,id,title,body,tags,answers,score
0,41594266,Asyncio with Django,"<p>I'm trying to use asyncio in my Django post processing like:</p>

<pre><code>query : # a query to my model
tasks =  []        
for record in query:
    tasks.append(do_something_with_google_calendar(record))

loop = asyncio.get_event_loop()
loop.run_until_complete(asyncio.wait(tasks))
loop.close()
</code></pre>

<p>But I just get an error while executing:</p>

<pre><code>loop = asyncio.get_event_loop()

RuntimeError: There is no current event loop in thread 'Thread-17'.
</code></pre>

<p>Any ideas? </p>

<p>Thank you in advance</p>",python|django|multithreading|loops|python-asyncio,"<p>It looks that if I do like this, it works:</p>

<pre><code>query : # a query to my model
tasks =  []        
for record in query:
    tasks.append(do_something_with_google_calendar(record))

loop = asyncio.SelectorEventLoop()
asyncio.set_event_loop(loop)

loop.run_until_complete(asyncio.wait(tasks))
loop.close()
</code></pre>

<p>I hope it is stable and it will also work fine in UNIX as it does in Windows</p>",2
1,41594266,Asyncio with Django,"<p>I'm trying to use asyncio in my Django post processing like:</p>

<pre><code>query : # a query to my model
tasks =  []        
for record in query:
    tasks.append(do_something_with_google_calendar(record))

loop = asyncio.get_event_loop()
loop.run_until_complete(asyncio.wait(tasks))
loop.close()
</code></pre>

<p>But I just get an error while executing:</p>

<pre><code>loop = asyncio.get_event_loop()

RuntimeError: There is no current event loop in thread 'Thread-17'.
</code></pre>

<p>Any ideas? </p>

<p>Thank you in advance</p>",python|django|multithreading|loops|python-asyncio,"<p>Your original code woun't work since get_event_loop() method is only shortcut to get_event_loop_policy().get_event_loop() which create&amp;return event loop automatically for main thread only.
To make it work right you need to explicitly create and set new event loop for each current thread context:</p>

<pre><code>query : # a query to my model
tasks =  []        
for record in query:
    tasks.append(do_something_with_google_calendar(record))

loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop)
loop.run_until_complete(asyncio.wait(tasks))
loop.close()
</code></pre>

<p>You may read more about this stuff <a href=""http://lucumr.pocoo.org/2016/10/30/i-dont-understand-asyncio/"" rel=""noreferrer"">here</a>.</p>",6
2,41347662,How to print individual values of an object?,"<p>I have a list that I've filled with objects. I'm able to print an entire object by using:</p>

<pre><code>print str(vars(theList[0]))
</code></pre>

<p>or in a loop:</p>

<pre><code>i = 0
for objects in theList:

     print str(vars(theList[i]))
     i+=1
</code></pre>

<p>What if I only want one of the values in the object and not the entire object. </p>

<p>Edit trying to clarify the question further:
Lets' say I have a list of ten objects with name, age, address, and phone number. What if I want index 1 object's name only and not the entire contents of the object at index one. That is the goal.</p>

<pre><code>print str(vars(theList[0].itemOne))
</code></pre>

<p>The above gives me <code>TypeError: vars() argument must have __dict__ attribute</code></p>

<p>I found another question that suggested using <code>dic</code> instead of <code>vars</code> but that didn't work. It only printed a long list:</p>

<p><code>['__add__', '__class__', '__contains__', '__delattr__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__getslice__', '__gt__', '__hash__', '__init__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '_formatter_field_name_split', '_formatter_parser', 'capitalize', 'center', 'count', 'decode', 'encode', 'endswith', 'expandtabs', 'find', 'format', 'index', 'isalnum', 'isalpha', 'isdigit', 'islower', 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'partition', 'replace', 'rfind', 'rindex', 'rjust', 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', 'strip', 'swapcase', 'title', 'translate', 'upper', 'zfill']</code></p>",python|list|object,"<pre><code>for object in list_name:
    print(object)   # &lt;--- the ""body""
</code></pre>

<p>This is the for loop syntax. It executes the body of the for loop once for every item in the list, assigning the item to the name, here it is <code>object</code>.</p>

<p>Replace <code>list_name</code> with your list's name and <code>object</code> to the appropriate name.</p>",2
3,44696252,How to find and replace different strings in a file at a time?,"<p>As per my know this may work for one condition but it is clears my file and replacing the find string in file.</p>

<pre><code> #!/usr/bin/python
    open('vpc.xml','r+') as p: #open a file in read and write mode
    p=rp.readlines()
    print p #printing what content read by p
    for line in p: #for loop up to end of line in file
          if ""&lt;mac address="" in  line: #if condition encounter by for loop line then it replaces the string specified in if condition.
             print line
             r.write(line.replace(""&lt;mac address="",""&lt;mac address1=""))
           elif ""&lt;source bridge="" in line:
             print line
             r.write(line.replace(""&lt;source bridge="",""&lt;source bridge1=""))
           elif ""&lt;target dev"" in line:
                 print line
                 r.write(line.replace(""&lt;target dev"",""&lt;target dev1""))
           else :
             print 'no changes'
             continue
</code></pre>",python,"<pre><code>#!/usr/bin/python
o = input(""enter how many vpcs"")
y = input(""enter how many eth interfaces"")
for k in range(1,o):
        h='vpc'+str(k)+'.xml'
        print h
#j = input(""enter how many eth interfaces"")
        ri=open(h,'r')
        line = ri.read()
        ri.close()
        for i in range(0,y)
                for s in range(i+1)
        dev_val={'network':'bridge','&lt;man':'&lt;manneth0','&lt;man':'vpc'+str(i)+_eth+str(i),}
                for key,val in dev_val.items():
                                line = line.replace(key,val)
                                print line
                with open(h,'w') as v:
                        v.write(line)
                        v.close()
</code></pre>",0
4,45246559,How to convert a string of numbers back into binary hex (\x values) type?,"<h2>Edited:</h2>
<p>The code below is reading a file (an image in this example) in binary mode:</p>
<pre><code>with open(&quot;img_80px.png&quot;, mode='rb') as file:
    file_content = file.read()
    binary_data = []
    for i in file_content:
        binary_data.append(i)
</code></pre>
<p>Now, printing out <code>file_content</code> will give us a string of hex values in binary <code>b' '</code> format:</p>
<pre><code>b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00P\x00\x00\x00&lt;
\x08\x06\x00\x00\x00\xf1\'=\x8c\x00\x00\x00\tpHYs\x00\x00\x0fa
\x00\x00\x0fa\x01\xa8?\xa7i\x00\x009\xeeiTXtXML:com.adobe.xmp
\x00\\x00\x00\x00\x00&lt;?xpacket begin=&quot;\xef\xbb\xbf&quot; id=&quot;W5M0MpCehiHzreSzNTczkc9d&quot;?&gt; 
\n&lt;x:xmpmeta xmlns:x=&quot;adobe:ns:meta/&quot; 
x:xmptk=&quot;Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01 

 ....'
</code></pre>
<p>So, the code converts this binary string into the list of numbers by going through <code>file_content</code> and appending each bit into the <code>binary_data</code> (not sure if it's the best way, not sure why it even works), so we're getting this:</p>
<pre><code>[137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13 ....]
</code></pre>
<p>The question is, how do I convert <strong>this list back</strong> into that <code>b''</code> hex binary string or whatever it is? As you can see, it has <code>\x</code> values and metadata in plain text there. Not sure how to convert it back.</p>
<p>If this way of conversion is disrative, could you suggest another way to convert binary in to a string of integers and back?</p>
<h3>I tried doing this:</h3>
<pre><code>binary_data_string = &quot;&quot;.join(map(str, binary_data))

with open(&quot;edited_img_80px.png&quot;, mode='wb') as edited_file: 
    binary_hex = bytes.fromhex(binary_data_string)
    edited_file.write(binary_hex)
</code></pre>
<p>it throws an error:</p>
<pre><code>ValueError: non-hexadecimal number found in fromhex() arg at position 58313
</code></pre>
<p>And I also tried to not convert it to a string to preserve the information about each converted item in the list and be able to convert it back into the binary, but I get:</p>
<pre><code>TypeError: fromhex() argument must be str, not list
</code></pre>",python|python-3.x,"<p>Since you're using Python 3, you can do this:</p>

<pre><code>&gt;&gt;&gt;numbers = [222, 173, 190, 239]
&gt;&gt;&gt;bytes(numbers)
b'\xde\xad\xbe\xef'
</code></pre>

<p>Cheers!</p>",2
5,47933966,Formatting log file output in python,"<p>I am writing a python script to cat and grep a log file similar to linux command <code>cat logfile | grep "" Finished processing""</code></p>

<p>Currently </p>

<pre><code>with open(""logfile"",'r') as f:
    output= [line for line in f.read().strip().split('\n') if ""Finished processing"" in line]
    print output
</code></pre>

<p>The output removes '\n' and adds a ','. I wish to format the output such that line starting after ',' gets appended to next line. I am new to python. I have heard of the format() function but not getting the exact syntax. Any help is appreciated. 
Supported python version 2.7</p>",python|logfile,"<p>Your list comprehension is a mess.  This will give you an array with each element being a line in the file without the \n.  Some of your comments make me doubtful what you are really trying to do.</p>

<pre><code>with open(""logfile"",'r') as f:
  output = [line.strip() for line in f if 'Finished processing' in line]
  print output
</code></pre>

<p>If you really wanted the lines comma separated for some reason change the print to</p>

<pre><code>print ', '.join(output)
</code></pre>",1
6,7942857,Sharing variables between two classes in Python,"<p>I felt like working on my network programming, threading and OOP skills. I've encountered a problem though.
I have a class named IRC and a class named Pong. I want to use IRC to do stuff like connecting to the server, sending messages, etc. I want to use Pong as a thread in the background which checks for a message containing ""PING"".</p>

<pre><code>class IRC:
    def Connect(self):
        try:
            HOST = sys.argv[1]
            PORT = sys.argv[2]
        except IndexError:
            print ""Usage: ""+sys.argv[0]+"" [server] [port]\n""
            sys.exit(1)
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.connect((HOST, PORT))

class Pong(threading.Thread):
    def Pong(self):
        while 1:
            IRC.s.send(""Test"") # IRC has no attribute 's'
</code></pre>

<p>Keep in mind that the code above is simplified and only for testing purposes, my question is how I can use variables in one class from another class. The variable <code>s</code> is declared and defined in IRC, but is needed in Pong too.
The interpreter complains that class IRC has no attribute 's' (I've tried calling Connect() first with a sample variable to see if it works, it doesn't).</p>

<p>How do I solve this? I'm new when it comes to threading and object orientation.</p>

<p>Thanks in advance!</p>",python|multithreading|class|variables,"<p>You'll need to call an instance of the IRC class which you can pass to the PONG constructor:</p>

<pre><code>class IRC:
    def Connect(self):
        try:
            HOST = sys.argv[1]
            PORT = sys.argv[2]
        except IndexError:
            print ""Usage: ""+sys.argv[0]+"" [server] [port]\n""
            sys.exit(1)
        self.s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.s.connect((HOST, PORT))

class Pong(threading.Thread):
    def __init__(self,ircclass):
        self.myirc = ircclass
    def Pong(self):
        while 1:
            self.myirc.s.send(""Test"")

gIRC = IRC
gIRC.connect()
myPong = Pong(gIRC)
</code></pre>

<p>etc.</p>",3
7,8190275,How do you to post a diff to ReviewBoard through its API?,"<p>I have been struggling to post a diff to ReviewBoard through their API.  I've managed to login to the server and create a new post, but I've failed to post correctly the contents of the diff file.</p>

<p>I'm new to writing this kind of application, but my goal is to have a one step script to:</p>

<ol>
<li>diff a file (pre-commit) with the svn repository, </li>
<li>add a review request to ReviewBoard and post the diff from the current file,</li>
</ol>

<p>May be later, the script can be part of a svn pre-commit hook.</p>

<p>My python attempt looks like:</p>

<pre><code>import urllib.request
import urllib.parse
import os.path

... login to the reviewboard server with
urllib.request.HTTPBasicAuthHandler ...

diff_path = '/path/to/file'
diff_name = 'my.diff'
diff_path = os.path.join(diff_path, diff_name)

diff_val = open(diff_path,'r')

# load the diff into the http data POST request
diff_header =                                                    \
     '-- SoMe BoUnDaRy   \n'                                     \
  +  'Content-Disposition: form-data; name=path; filename='      \
  +  '""' + diff_name + '""\n\n'                                   \
  +  diff_val.read()  + '\n'                                     \
  +  '-- SoMe BoUnDaRy --'

data ={'path': diff_header, 'basedir': '/path/to/file/in/rep'}
print( data['path'] )
data = urllib.parse.urlencode(data)
data = data.encode('utf-8')

opener.open(                                      \
    'http://xxx.xxx.x.xxx/api/review-requests/26/diffs/', data)
</code></pre>

<p>With this code I get a BAD REQUEST(400) error, specifically: ""One or more fields had errors"" (105).  </p>

<p>I'm aware that there are some libraries out there that can talk with the ReviewBoard API.  I'm also aware that post-review exists.  I'd rather not have to distribute to the other developers another python library and post-review seems less flexible when diffing files from multiple locations.</p>

<p>From the suggestion below, I've add the server response here:</p>

<pre><code>CREATING PASSWD MANAGER...
CREATING PASSWD MANAGER... done
CREATING PASSWD HANDLER...
CREATING PASSWD HANDLER... done
CREATING URL OPENER...
CREATING URL OPENER... done
LOADING DIFF... 
send: b'POST /api/review-requests/26/diffs/ HTTP/1.1\r\nAccept-Encoding: 
  identity\r\nContent-Length: 723\r\nHost: xxx.xxx.x.xxx\r\nContent-Type: 
  application/x-www-form-urlencoded\r\nConnection: close\r\nUser-Agent: 
  [empty no username+password] Python-urllib/3.2\r\n\r\
  npath=--+SoMe+BoUnDaRy+++%...[the rest of my post]
reply: 'HTTP/1.1 401 UNAUTHORIZED\r\n'
header: Date header: Server header: Content-Language header: Expires header: 
  Vary header: Cache-Control header: WWW-Authenticate header: 
  Content-Length header: Last-Modified header: Connection header: 
  Content-Type send: b'POST /api/review-requests/26/diffs/ 
  HTTP/1.1\r\nAccept-Encoding: identity\r\nContent-Length: 723\r\nHost: 
  xxx.xxx.x.xxx\r\nUser-Agent: Python-urllib/3.2\r\nConnection: 
  close\r\nContent-Type: application/x-www-form-urlencoded\r\nAuthorization: 
  Basic [with username+password]\r\n\r\npath=
  --+SoMe+BoUnDaRy+++%0AContent-Disposition%...
reply: 'HTTP/1.1 400 BAD REQUEST\r\n'
header: Date header: Server header: Content-Language header: Expires header: 
  Vary header: Cache-Control header: Set-Cookie header: Content-Length header: 
  Last-Modified header: Connection header: Content-Type HTTPError thrown
</code></pre>

<p>At first glance my guess is that something is happening to my password handler.  I'm not sure what is happening to it.  Just in case, this is how I'm generate my authentication:</p>

<pre><code>manager_passwd = urllib.request.HTTPPasswordMgr()
manager_passwd.add_password(...)
handler_passwd = urllib.request.HTTPBasicAuthHandler(manager_passwd)
opener = urllib.request.build_opener(handler_passwd)
</code></pre>

<p>The authentication seems to working.  I've tested it by create a new review post.  So it is when I post the diff that the authentication fails.</p>",python|http|review-board,"<p>Reviewboard have already a python tool for posting diff with their API, it's called postreview.py. You can found it at : </p>

<p><a href=""http://reviewboard.googlecode.com/svn/trunk/wxpostreview/postreview.py"" rel=""nofollow"">http://reviewboard.googlecode.com/svn/trunk/wxpostreview/postreview.py</a></p>

<p>Grab and use their <code>ReviewBoardServer</code> for login and post a diff !</p>

<p>(In addition, in your request, the authentification is required yes, but also the cookie file. That's why you need 2 requests (one for login and get the cookie, another one for sending the diff.))</p>",2
8,33366119,Is it possible to have a dictionary of dictionary of dictionary in python?,"<p>I would like a three-dimensional hash in python - a dictionary of a dictionary of a dictionary. I don't know if this is possible and I'm having some problems I don't understand that makes me suspect it isn't possible.  An example piece of code is below that reads two comma separated files ('tv.txt' and 'film.txt') and puts the data on a dictionary of dictionary of dictionary (dOfDofD).  The two files look like this:</p>

<p><strong>tv.txt</strong></p>

<pre><code>Muppets,female,Miss Piggy
Muppets,male,Kermit
Simpsons,female,Marge 
Simpsons,male,Homer
</code></pre>

<p><strong>film.txt</strong></p>

<pre><code>Gone with the Wind,female,Vivien Leigh
Gone with the Wind,male,Clark Gable 
Anthony and Cleopatra,female,Elizabeth Taylor 
Anthony and Cleopatra,male,Richard Burton
</code></pre>

<p>My code reads these two files and creates the dOfDofD, but when it comes to retrieve the data, it seems some of it is missing in a systematic way: only the last example of the final level of dictionary appears to exist.  The code is:</p>

<pre><code>#!/usr/bin/env python
import string

dOfDofD = {}

mediaList = ['tv', 'film']

showSet = set()

for media in mediaList:
    fName = media + "".txt""
    f = open(fName, 'r')
    for line in f:
        line = line.rstrip('\n')
        dataList = string.splitfields(line, ',')
        show = dataList[0]
        showSet.add(show)
        gender = dataList[1]
        name = dataList[2]
        dOfDofD[show] = {}
        dOfDofD[show][media] = {}
        dOfDofD[show][media][gender] = name
    f.close()

for show in showSet:
    for media in dOfDofD[show]:
        for gender in dOfDofD[show][media]:
            print ""show: %s. media: %s. gender: %s. character: %s."" % \
                    (show, media, gender, dOfDofD[show][media][gender])
</code></pre>

<p>This only prints out the male characters, as if the female ones have been overwritten (which were set up first).</p>

<pre><code>show: Simpsons. media: tv. gender: male. character: Homer. 
show: Gone with the Wind. media: film. gender: male. character: Clark Gable.
show: Muppets. media: tv. gender: male. character: Kermit. 
show: Anthony and Cleopatra. media: film. gender: male. character: Richard Burton.
</code></pre>

<p>I'm running python 2.7.6 on Ubuntu 14.04.</p>

<p>Any ideas what I'm doing wrong?</p>",python|dictionary,"<p>yes: creating nested dictionaries is possible.</p>

<p>you keep overwriting <code>dOfDofD[show]</code> for every line in your text file.</p>

<p>you could try this:</p>

<pre><code>if show in dOfDofD:
    show_dict = dOfDofD[show]
else:
    show_dict = {}
    dOfDofD[show] = show_dict
# do something with show_dict
</code></pre>

<p>and something similar for <code>dOfDofD[show][media]</code>.</p>

<p>or you could use <a href=""https://docs.python.org/3.4/library/collections.html#collections.defaultdict"" rel=""nofollow""><code>defaultdict</code></a>.</p>

<p>and seeing that your input file is comma-separated: have a look at the <a href=""https://docs.python.org/3.4/library/csv.html"" rel=""nofollow"">python <code>csv</code> module</a>.</p>",1
9,33366119,Is it possible to have a dictionary of dictionary of dictionary in python?,"<p>I would like a three-dimensional hash in python - a dictionary of a dictionary of a dictionary. I don't know if this is possible and I'm having some problems I don't understand that makes me suspect it isn't possible.  An example piece of code is below that reads two comma separated files ('tv.txt' and 'film.txt') and puts the data on a dictionary of dictionary of dictionary (dOfDofD).  The two files look like this:</p>

<p><strong>tv.txt</strong></p>

<pre><code>Muppets,female,Miss Piggy
Muppets,male,Kermit
Simpsons,female,Marge 
Simpsons,male,Homer
</code></pre>

<p><strong>film.txt</strong></p>

<pre><code>Gone with the Wind,female,Vivien Leigh
Gone with the Wind,male,Clark Gable 
Anthony and Cleopatra,female,Elizabeth Taylor 
Anthony and Cleopatra,male,Richard Burton
</code></pre>

<p>My code reads these two files and creates the dOfDofD, but when it comes to retrieve the data, it seems some of it is missing in a systematic way: only the last example of the final level of dictionary appears to exist.  The code is:</p>

<pre><code>#!/usr/bin/env python
import string

dOfDofD = {}

mediaList = ['tv', 'film']

showSet = set()

for media in mediaList:
    fName = media + "".txt""
    f = open(fName, 'r')
    for line in f:
        line = line.rstrip('\n')
        dataList = string.splitfields(line, ',')
        show = dataList[0]
        showSet.add(show)
        gender = dataList[1]
        name = dataList[2]
        dOfDofD[show] = {}
        dOfDofD[show][media] = {}
        dOfDofD[show][media][gender] = name
    f.close()

for show in showSet:
    for media in dOfDofD[show]:
        for gender in dOfDofD[show][media]:
            print ""show: %s. media: %s. gender: %s. character: %s."" % \
                    (show, media, gender, dOfDofD[show][media][gender])
</code></pre>

<p>This only prints out the male characters, as if the female ones have been overwritten (which were set up first).</p>

<pre><code>show: Simpsons. media: tv. gender: male. character: Homer. 
show: Gone with the Wind. media: film. gender: male. character: Clark Gable.
show: Muppets. media: tv. gender: male. character: Kermit. 
show: Anthony and Cleopatra. media: film. gender: male. character: Richard Burton.
</code></pre>

<p>I'm running python 2.7.6 on Ubuntu 14.04.</p>

<p>Any ideas what I'm doing wrong?</p>",python|dictionary,"<p>Following from <a href=""https://stackoverflow.com/users/4954037/hiro-protagonist"">hiro protagonist</a>'s post, here's the snipet of code I used:</p>

<pre><code>for media in mediaList:
    fName = media + "".txt""
    f = open(fName, 'r')
    for line in f:
        line = line.rstrip('\n')
        dataList = string.splitfields(line, ',')
        show = dataList[0]
        showSet.add(show)
        gender = dataList[1]
        name = dataList[2]
        if show in dOfDofD:
            if media in dOfDofD[show]:
                dOfDofD[show][media][gender] = name
            else:
                dOfDofD[show][media] = {}
                dOfDofD[show][media][gender] = name
        else:
            dOfDofD[show] = {}
            dOfDofD[show][media] = {}
            dOfDofD[show][media][gender] = name
    f.close()
</code></pre>",0
10,33366119,Is it possible to have a dictionary of dictionary of dictionary in python?,"<p>I would like a three-dimensional hash in python - a dictionary of a dictionary of a dictionary. I don't know if this is possible and I'm having some problems I don't understand that makes me suspect it isn't possible.  An example piece of code is below that reads two comma separated files ('tv.txt' and 'film.txt') and puts the data on a dictionary of dictionary of dictionary (dOfDofD).  The two files look like this:</p>

<p><strong>tv.txt</strong></p>

<pre><code>Muppets,female,Miss Piggy
Muppets,male,Kermit
Simpsons,female,Marge 
Simpsons,male,Homer
</code></pre>

<p><strong>film.txt</strong></p>

<pre><code>Gone with the Wind,female,Vivien Leigh
Gone with the Wind,male,Clark Gable 
Anthony and Cleopatra,female,Elizabeth Taylor 
Anthony and Cleopatra,male,Richard Burton
</code></pre>

<p>My code reads these two files and creates the dOfDofD, but when it comes to retrieve the data, it seems some of it is missing in a systematic way: only the last example of the final level of dictionary appears to exist.  The code is:</p>

<pre><code>#!/usr/bin/env python
import string

dOfDofD = {}

mediaList = ['tv', 'film']

showSet = set()

for media in mediaList:
    fName = media + "".txt""
    f = open(fName, 'r')
    for line in f:
        line = line.rstrip('\n')
        dataList = string.splitfields(line, ',')
        show = dataList[0]
        showSet.add(show)
        gender = dataList[1]
        name = dataList[2]
        dOfDofD[show] = {}
        dOfDofD[show][media] = {}
        dOfDofD[show][media][gender] = name
    f.close()

for show in showSet:
    for media in dOfDofD[show]:
        for gender in dOfDofD[show][media]:
            print ""show: %s. media: %s. gender: %s. character: %s."" % \
                    (show, media, gender, dOfDofD[show][media][gender])
</code></pre>

<p>This only prints out the male characters, as if the female ones have been overwritten (which were set up first).</p>

<pre><code>show: Simpsons. media: tv. gender: male. character: Homer. 
show: Gone with the Wind. media: film. gender: male. character: Clark Gable.
show: Muppets. media: tv. gender: male. character: Kermit. 
show: Anthony and Cleopatra. media: film. gender: male. character: Richard Burton.
</code></pre>

<p>I'm running python 2.7.6 on Ubuntu 14.04.</p>

<p>Any ideas what I'm doing wrong?</p>",python|dictionary,"<p>The problem is that each time you are adding a new pair to the dictionary, you're creating new dicts for <code>dOfDofD[show]</code> and <code>dOfDofD[show][media]</code>. To fix this, you could use <a href=""https://docs.python.org/2/library/stdtypes.html#dict.setdefault"" rel=""nofollow""><code>dict.setdefault()</code></a>. Here's the line: <code>dOfDOfD.setdefault(show, {}).setdefault(media, {})[gender] = name</code>.</p>

<pre><code>dOfDOfD = {}

mediaList = ['tv', 'film']

showSet = set()

for media in mediaList:
    with open('{}.txt'.format(media), 'r') as f:
        for line in f:
            show, gender, name = line.split(',')
            showSet.add(show)
            dOfDOfD.setdefault(show, {}).setdefault(media, {})[gender] = name

for show in showSet:
    for media in dOfDOfD[show]:
        for gender in dOfDOfD[show][media]:
            print ""show: {}. media: {}. gender: {}. character: {}."".format(
                show, media, gender, dOfDOfD[show][media][gender])
</code></pre>

<blockquote>
  <p>show: Simpsons. media: tv. gender: male. character: Homer.</p>
  
  <p>show: Simpsons. media: tv. gender: female. character: Marge.</p>
  
  <p>show: Gone with the Wind. media: film. gender: male. character: Clark Gable.</p>
  
  <p>show: Gone with the Wind. media: film. gender: female. character: Vivien Leigh.</p>
  
  <p>show: Muppets. media: tv. gender: male. character: Kermit.</p>
  
  <p>show: Muppets. media: tv. gender: female. character: Miss Piggy.</p>
  
  <p>show: Anthony and Cleopatra. media: film. gender: male. character: Richard Burton.</p>
  
  <p>show: Anthony and Cleopatra. media: film. gender: female. character: Elizabeth Taylor.</p>
</blockquote>

<p>In addition, I changed some other things in your program. I renamed <code>dOfDofD</code> to <code>dOfDOfD</code> (proper camel casing). I used a <code>with...as</code> statement to open the files, which provides numerous advantages (I will not go into them here, but if you're curious just Google it). And I changed your string formatting with `%s' to use the <a href=""https://docs.python.org/2/library/stdtypes.html#str.format"" rel=""nofollow""><code>str.format()</code></a> method (the now recommended way of formatting a string).</p>",0
11,33170803,How to display multiple ForeignKey filtered items in a single view in django?,"<p>I'm trying to understand the best way to display <code>ForeignKey</code> filtered data in a Django model.</p>

<p>I have three models reduced to this:</p>



<pre class=""lang-py prettyprint-override""><code>// models.py
class Publisher(models.Model)
    def publisher_name = models.TextField()
    def publisher_slug = models.SlugField()
    def founded_year = models.IntegerField()

class Album(models.Model)
    def album_name = models.TextField()
    def publisher = models.ForeignKey('Publisher', related_name='albums')

class Song(models.Model)
    def song_name = models.TextField()
    def album = models.ForeignKey('Album', related_name='songs')
    def published_year = models.IntegerField()
</code></pre>

<p>I have a URL that is composed of: <code>/&lt;publisher&gt;/&lt;published_year&gt;/</code></p>

<p>The view I'm having trouble composing is supposed to be details like this:</p>

<p>Title of: Publisher.publisher_name
List of All Albums by the publisher: List of All songs from that album published the same year as the publisher__published_year: List of All songs from that album published as the url </p>

<p>The way, I've tried to do this that works right now is similar to this:</p>

<pre class=""lang-py prettyprint-override""><code>// views.py
class SongYearView(TemplateView):
    def get_context_data(self, **kwargs):
        context = super(SongYearView, self).get_context_data(**kwargs)
        context['publisher'] = Publisher.objects.get(slug=kwargs['publisher_slug']
        album_list=[]
        for album in context['publisher'].albums.all():
            single_album = dict()
            single_album['album'] = album
            single_album['publisher_year_song'] = album.songs.filter(published_year=context['publisher'].published_year)
            single_album['filtered_year_song'] = album.songs.filter(published_year=kwargs['published_year']
            album_list.append(single_album)
        context['albums'] = album_list
        return context
</code></pre>

<p>Then in the template I'm doing (with stripped out formatting)</p>

<pre class=""lang-py prettyprint-override""><code>// template.html
{{ publisher.name }}
{% for album in albums %}
    {{  album.album.album_name }}

    {% for song in album.publisher_year_song %}
        {{ song.song_name }}
    {% endfor %}

    {% for song in album.filtered_year_song %}
        {{ song.song_name }}
    {% endfor %}
{% endfor %}
</code></pre>

<p>While this does work, it's not pretty and I'm pretty sure there are better ways of doing this.</p>

<p>This is an odd example, but just a basic example of my more detailed models. The way to think about it is Publisher -> Album -> Song or A -> B -> C. And I'm trying to get a view of all B items, that are only linked with a specific A item and then get two sets of C items for each B item, where one set is filtered on an A property and the other set is filtered on a passed argument from a URL.</p>

<p>I tried to get a custom model.Manager to help get this constructed, but didn't have much luck.</p>",python|django|django-models|django-templates|django-views,"<p>You could do <a href=""https://stackoverflow.com/a/1333277/3207406"">add a custom template filter</a> <code>of_year</code>:</p>

<pre><code>@register.filter
def of_year(songs, year):
    return songs.filter(published_year=year)
</code></pre>

<p>And change your template to</p>

<pre><code>// template.html
{{ publisher.name }}
{% for album in publisher.albums %}
    {{  album.album.album_name }}

    {% for song in album.songs|of_year:publisher.founded_year %}
        {{ song.song_name }}
    {% endfor %}

    {% for song in album.songs|of_year:filtered_year %}
        {{ song.song_name }}
    {% endfor %}
{% endfor %}
</code></pre>

<p>And clean your view:</p>

<pre><code>// views.py
class SongYearView(TemplateView):
    def get_context_data(self, **kwargs):
        context = super(SongYearView, self).get_context_data(**kwargs)
        context['publisher'] = Publisher.objects.get(slug=kwargs['publisher_slug'])
        context['filtered_year'] = kwargs['published_year']
        return context
</code></pre>

<p><em>Edit: rename the template filter</em></p>",1
12,43670948,Python: How to get list of file and use wildcard in FTP directory?,"<p>I'm new to python. I want to access baseURL and eventually get a list of files in one of the sub-directories so I can download/unzip this file. The specific file extension can change so I'm hoping to find a match to the file by just the date (yyyymmdd). </p>

<pre><code>baseURL = 'ftp://prism.nacse.org'
</code></pre>

<p>Thanks in advance for your guidance! </p>

<p>My code so far is: </p>

<pre><code>variables  = ['ppt', 'tmax', 'tmin']
nvars = len(variables)



baseURL = 'ftp://prism.nacse.org/daily/'


stDateNum = date.toordinal(date(1981,1,1))  # Year, Month, Day
edDateNum = date.toordinal(date(2017,4,22))

dates = list(range(stDateNum,edDateNum+1))
ndates = len(dates)



for v in range(0,nvars):

    for d in range(0,ndates):

        tmpdate = date.fromordinal(dates[d]).strftime('%Y%m%d') #yyyymmdd
        tmpYR = date.fromordinal(dates[d]).strftime('%Y') #yyyy
        totalpath = baseURL + variables[v] + '/' + tmpYR + '/*_' + tmpdate + '_bil.zip'
</code></pre>",python|ftp|directory|wildcard,"<p>You could use Python ftplib, <a href=""https://docs.python.org/3/library/ftplib.html"" rel=""nofollow noreferrer"">https://docs.python.org/3/library/ftplib.html</a>, as a ftp client. I don't think wildcard downloads are support, so you'd have to do something along the lines of...</p>

<ol>
<li>Login to the FTP server</li>
<li>Navigate to the desired directory</li>
<li>Get a listing of the files, iterate thorough the files and match according to the desired file format</li>
<li>Download desired files</li>
</ol>",2
13,43901977,KeyError - python dictionaries,"<p>I'm using a dictionary in Python and trying to reference one of the data categories however I am getting a keyerror when running the code. </p>

<p>""Restock_Item"" will be an eight digit number such as ""12345670"" which is in the dictionary so by using </p>

<pre><code>stock[restock_item]['STOCK_LEVEL']
</code></pre>

<p>it would be referencing the dictionary like this: </p>

<pre><code>stock[12345670]['STOCK_LEVEL']
</code></pre>

<p>But when doing this I get the error:</p>

<pre><code>KeyError: 12345670
</code></pre>

<p>Here is the code:</p>

<pre><code>restock_item = input(""\nPlease enter the gtin code of the product you wish to restock. "")
    if restock_item.isdigit() == True:

        restock_level = input(""How many items would you like to restock? "")
        while restock_item.isdigit() == True:

            restock_item = int(restock_item)
            newStockLevel = int(stock[restock_item]['STOCK_LEVEL']) # This is the line that gets the key error
            newStockLevel = newStockLevel + restock_level
            stock[restock_item]['STOCK_LEVEL'] = newStockLevel
</code></pre>",python|dictionary|keyerror,"<p>Resolved in comments:  </p>

<blockquote>
  <p>When you retrieved the dictionary from the file, did you also apply int() to this key?<br>
  12345670 and ""12345670"" are not equivalent keys. – jasonharper</p>
  
  <p>Yeah I just thought maybe that was the reason and i resolved the problem, thanks for the help :) i converted the variable to an int before i used it – Heather Lara </p>
</blockquote>",0
14,43163524,"How to conditionally extract lines from a file, edit them, and insert them back","<p>I have created a simple command line game in python.
The user begins by inputting their nickname which is stored as <code>name</code></p>

<p>At the end of the game the user's score is stored in a file like so:</p>

<pre><code>wins = str(wins)
losses = str(losses)

file = open('scores.py','a')
file.write(name + "": wins = "" + wins + ""  losses = "" + losses + ""\n\n"")
file.close
</code></pre>

<p><em>( I converted the 'wins' and 'losses' variables to strings as I couldn't seem to write integers to a file, I don't know if this is possible (i'm sure it is) but I just didn't know how to do it. )</em></p>

<p>I want the user playing the game to have a cumulative score, i.e. if they were to play 1 game and win 6 rounds, play another game and win 2 rounds, I don't want there to by 2 entries in the 'scores.py' file, I would like it to say:</p>

<pre><code>*User*: wins = 8 losses = 0
</code></pre>

<p>The only way I could think of doing this is that after each game finishes, the user's name and score would be appended to the 'scores.py' file, but before that, the file is scanned line-by-line to check whether or not the user's nickname already has an entered score. IF the name inputted at the start of the game is the same name as the one being read on the particular line in the 'scores.py' file, extract the line, convert the string values for wins and for losses to integers, add the current score in the game to the stored score, and then write it back into the file.</p>

<p>Any and all help would be greatly appreciated, and excuse me if the code is terrible and the solution is simple, I am extremely new to python and am not very well-versed in code in general either.</p>",python,"<p>You can use the built-in <code>json</code> module. I think it fits nicely with your use case.</p>

<pre><code>import json

def update_scores(name, wins, losses, scores_file='scores.json'):
    try:
        with open(scores_file, 'r') as f:
            scores = json.load(f)
    except (IOError, ValueError):
        # Non existing or empty file.
        scores = {} 
    try:
        scores[name]['wins'] += wins
        scores[name]['losses'] += losses
    except KeyError:
        # Initialize user score
        scores[name] = {'wins': wins, 'losses': losses}
    with open(scores_file, 'w') as f:
        json.dump(scores, f)

# Use:
update_scores('foo', 3, 8)  # {""foo"": {""wins"": 3, ""losses"": 8}}
update_scores('foo', 3, 2)  # {""foo"": {""wins"": 6, ""losses"": 10}}
update_scores('bar', 8, 0)  # {""foo"": {""wins"": 6, ""losses"": 10}, ""bar"": {""wins"": 8, ""losses"": 0}}
</code></pre>",0
15,43406242,"Tkinter python multithread (avoid ""Not Responding"")","<p>I'm trying to write a Python GUI program with tkinter.</p>

<p>I want to make two thread. One runing with the main_form function to keep tkinter from keep update and loop (avoid ""Not Responding"").</p>

<p>The other, when the button1 (btn1) is clicked make function sci_thread() start running and start thread2 that execute the main_scikit with long time code.</p>

<p>But tkinter keep Not Responding. </p>

<p>Below is my code:</p>

<pre><code>import threading

class class_one:
    def main_scikit(seft):
        ######
        code_take_loooong_time
        ######
    def save(seft):
        pass

    def main_form(seft):
        root = Tk(  )
        root.minsize(width=300, height=500)
        ent1 = Entry(width=30)
        ent1.grid(row=0,column=1,padx = 10,pady=5)
        bnt1 = Button(root,text = ""Start"",command=lambda : seft.sci_thread())
        bnt1.grid(row=5,column=0,padx = 10) 

        root.update() 
        root.mainloop()

    def sci_thread(seft):
        maincal = threading.Thread(2,seft.main_scikit())
        maincal.start()

co = class_one()
mainfz = threading.Thread(1,co.main_form());
mainfz.start() 
</code></pre>",python|tkinter,"<p>Your app is unresponsive because your <em>target</em> parameter executed when declared and result of that passed as <em>target</em>. And, obviously, because of that you GUI is unresponsive while <code>code_take_loooong_time</code> being executed in GUI's thread. To deal with it  - get rid of redundant parentheses.</p>

<p>Try this snippet:</p>

<pre><code>import threading

try:
    import tkinter as tk
except ImportError:
    import Tkinter as tk


class class_one:
    def main_scikit(self):
        ######
        # code_take_loooong_time
        # same as sleep
        threading.Event().wait(5)
        # some print
        self.print_active_threads_count()

        ######
    def save(self):
        pass

    def main_form(self):

        self.root = tk.Tk()
        self.root.minsize(width=300, height=500)
        self.ent1 = tk.Entry(self.root, width=30)
        self.ent1.grid(row=0, column=1, padx=10, pady=5)
        self.bnt1 = tk.Button(self.root, text=""Start"", command=self.sci_thread)
        self.bnt1.grid(row=5, column=0, padx=10)

        self.root.update()
        self.root.mainloop()

    def sci_thread(self):
        maincal = threading.Thread(target=self.main_scikit)
        maincal.start()

    def print_active_threads_count(self):
        msg = 'Active threads: %d ' % threading.active_count()

        self.ent1.delete(0, 'end')
        self.ent1.insert(0, msg)
        print(msg)


co = class_one()
mainfz = threading.Thread(target=co.main_form)
mainfz.start() 
</code></pre>

<p><em>Links:</em></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/5767228/why-is-button-parameter-command-executed-when-declared"">Similar problem with a tkinter button's parameter</a></li>
<li><a href=""https://stackoverflow.com/questions/706721/how-do-i-pass-a-method-as-a-parameter-in-python"">More general: How to pass a method as an parameter</a></li>
<li><a href=""https://docs.python.org/3/library/threading.html"" rel=""nofollow noreferrer"">Threading docs</a></li>
</ul>

<p><em>P.S.:</em>
Also, be careful when you start a tkinter application <em>not in the main thread</em> because tkinter expects (in general) that <code>mainloop</code> is outer-most loop possible and that all Tcl commands invoked from the same thread. So there can be many and more synchronisation problem with all that, <a href=""https://stackoverflow.com/questions/26703502/threads-and-tkinter-python-3"">even if you just trying to quit GUI</a>!
In conclusion, maybe <a href=""https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python"">this</a> and <a href=""https://stackoverflow.com/questions/17466561/best-way-to-structure-a-tkinter-application"">that</a> would give you some new ideas.</p>",1
16,45948887,How to print index in integers from DataFrame Pandas in Python,"<p>I have two DataFrames (1) fruit, and (2) market. Both have three rows denoted 0,1,2 and only one column with no header.</p>

<pre><code>print fruit
0   apple
1   pear
2   melon

print market
0   apple
1   pear
2   melon
</code></pre>

<p>I would like to to print the index in integers and tried below but have hard time in </p>

<pre><code>print market.iloc[np.where(fruit[0] == market)].index
Int64Index([0], dtype='int64')

print market.iloc[np.where(fruit[0] == market)].index.tolist
&lt;bound method Int64Index.tolist of Int64Index([0], dtype='int64')&gt;

print market.iloc[np.where(fruit[0] == market)].index.values
[0]

print market.iloc[np.where(fruit[0] == market)].index.get_values
&lt;bound method Int64Index.get_values of Int64Index([0], dtype='int64')&gt;
</code></pre>

<p>What should I do to print 0 only without the brackets?
Goal:
0   </p>",python|pandas|dataframe,"<p>Would this work?</p>

<pre><code>print(list(market.index)[0])
print(list(fruit.index)[0])
</code></pre>",1
17,45977979,Pack manager of tkinter in python,"<p>I have written this code in python 2.7 and i have used ""pack_propagate"" in this code. First time ""pack_propagate"" works fine but when i click on the button 1, ""pack_propagate"" doesn't work. can anyone tell me the reason?</p>

<pre><code>from tkinter import *

root = Tk()
root.title(""pack_forget check"")

tk_window_width = 500
tk_window_height = 300
screen_width = root.winfo_screenwidth() # width of the screen
screen_height = root.winfo_screenheight() # height of the screen
x = (screen_width/2) - (tk_window_width/2)
y = (screen_height/2) - (tk_window_height/2)
root.geometry('%dx%d+%d+%d' %(tk_window_width, tk_window_height, x, y))

frame1 = Frame(root, bg=""red"", height=250, width=250)
frame2 = Frame(root, bg=""green"", height=250, width=250)

def first():
    frame1.pack(side=TOP, padx=20, pady=20)
    frame1.pack_propagate(0)
    frame2.pack_forget()

def second():
    frame2.pack(side=TOP, padx=20, pady=20)
    frame2.pack_propagate(0)
    frame1.pack_forget()   

label1 = Label(frame1, text=""Frame 1"")
label1.pack(side=""top"")
button1 = Button(frame1, text=""button 1"", command=second, width=10)
button1.pack(side=""bottom"")

label2 = Label(frame2, text=""Frame 2"")
label2.pack(side=""top"")
button2 = Button(frame2, text=""button 2"", command=first, width=10)
button2.pack(side=""bottom"")

frame1.pack(side=TOP, padx=20, pady=20)
frame1.pack_propagate(0)

root.mainloop()
</code></pre>",python|python-2.7|python-3.x|tkinter,"<p>Add this before the mainloop(), it seems to solve the problem. Honestly, I am unsure how it works, but looks like it does. I saw you did that with <code>frame1</code> and I was like: hey, why not <code>frame2</code>? :D</p>

<pre><code>frame2.pack(side=TOP, padx=20, pady=20)
frame2.pack_propagate(0)

root.mainloop()
</code></pre>",0
18,46057594,OpenCV (3.3.0) returns fail on VideoCapture with Video but works with Webcam [OS X],"<p>Thanks for reading already, I've been trying to get this to work for a day and I didn't get closer to the solution. </p>

<p>I'm trying to get this <a href=""https://github.com/bikz05/object-tracker"" rel=""nofollow noreferrer"">object tracker</a> to work. When I use a video from my webcam (with: <code>python object-tracker-single.py -d 0</code>, everything works as expected.</p>

<p>But as soon as I'm trying to use a video file (i've tried different formats: <code>.mp4</code>, <code>.mkv</code> &amp; <code>.avi</code>. I also tried to use the file given in the repository, that didn't work as well. To see if there is a <code>File not found</code>-Error, I passed an invalid path to the function and an error got printed, that has not been printed when I used the other videos. So the file(s) i'm using is(/are) valid and not corrupted. </p>

<p>I installed <code>dlib</code> through <code>homebrew</code> following <a href=""https://www.learnopencv.com/install-dlib-on-macos/"" rel=""nofollow noreferrer"">this article</a> and compiled <code>OpenCV</code> from the official source. This is the <a href=""https://pastebin.com/6tAEC3iC"" rel=""nofollow noreferrer"">CMakeCache.txt</a> that <code>CMake</code> spit out. After the first time I compiled it, I added <a href=""https://github.com/opencv/opencv_contrib"" rel=""nofollow noreferrer"">opencv_contrib</a> to the mix, thinking that it could help (I also think that I actually needed it), but that didn't fix the problem.</p>

<p>This is the code I'm having problems with:</p>

<pre><code># Create the VideoCapture object
cam = cv2.VideoCapture(source)

# If Camera Device is not opened, exit the program
if not cam.isOpened():
    print ""Video device or file couldn't be opened""
    exit()

print ""Press key `p` to pause the video to start tracking""
while True:
    # Retrieve an image and Display it.
    retval, img = cam.read() #&lt;-- this returns false when trying to read a video 
    if not retval:
        print ""Cannot capture frame device""
        exit()
</code></pre>

<p>At the marked line, <code>retval</code> equals <code>False</code> and <code>image</code> equals <code>None</code>. 
It would already help me if I could somehow debug this behavior, but I didn't find any way of doing so.</p>

<p>I found that many Windows Users had problems with missing <code>ffmpeg</code> support, but that is not the case for me, since I used <code>ffmpeg</code> in previous (not OpenCV-related) projects and <code>CMakeCache.txt</code> reports that <code>ffmpeg</code> has been found and the compilation succeeded.</p>

<p>I also tried using a fully qualified file-name for the video file, which either resulted in <code>Video device or file couldn't be opened</code> or the given problem.</p>

<p>If you have any idea how this problem can be completely resolved, have an Idea on how to solve it or can provide me with a way of properly debugging this behavior, I'd be super glad to here it!</p>

<p>Thanks already!</p>

<p>-</p>

<p>System: MacBook Pro (macOS Sierra <code>10.12.6</code>)</p>

<p>OpenCV Version: <code>3.3.0</code></p>

<p>Dlib Version (not necessary imo, but hey): <code>19.4.0</code> </p>

<p><strong>Edit 2</strong>
Output of <code>cmake -DOPENCV_EXTRA_MODULES_PATH=../opencv_contrib-master/modules ../ &gt;&gt; result.txt</code>: <a href=""https://pastebin.com/KbHPQm3L"" rel=""nofollow noreferrer"">pastebin</a></p>",python|opencv|video|ffmpeg|capture,"<p>I had the same issue with OpenCV 3.3.0. on Ubuntu 14.04.</p>

<p>The reason cv2.VideoCapture failed, seems to be because of a wrong installation of OpenCV. </p>

<p>The official way of installation should be followed: <a href=""http://docs.opencv.org/trunk/d7/d9f/tutorial_linux_install.html"" rel=""nofollow noreferrer"">http://docs.opencv.org/trunk/d7/d9f/tutorial_linux_install.html</a></p>

<p>I had installed using pip, clearly not working.</p>

<p>I ended up just pulling a docker image:
<a href=""https://hub.docker.com/r/victorhcm/opencv/"" rel=""nofollow noreferrer"">https://hub.docker.com/r/victorhcm/opencv/</a></p>

<p>That worked perfectly.</p>",1
19,46057594,OpenCV (3.3.0) returns fail on VideoCapture with Video but works with Webcam [OS X],"<p>Thanks for reading already, I've been trying to get this to work for a day and I didn't get closer to the solution. </p>

<p>I'm trying to get this <a href=""https://github.com/bikz05/object-tracker"" rel=""nofollow noreferrer"">object tracker</a> to work. When I use a video from my webcam (with: <code>python object-tracker-single.py -d 0</code>, everything works as expected.</p>

<p>But as soon as I'm trying to use a video file (i've tried different formats: <code>.mp4</code>, <code>.mkv</code> &amp; <code>.avi</code>. I also tried to use the file given in the repository, that didn't work as well. To see if there is a <code>File not found</code>-Error, I passed an invalid path to the function and an error got printed, that has not been printed when I used the other videos. So the file(s) i'm using is(/are) valid and not corrupted. </p>

<p>I installed <code>dlib</code> through <code>homebrew</code> following <a href=""https://www.learnopencv.com/install-dlib-on-macos/"" rel=""nofollow noreferrer"">this article</a> and compiled <code>OpenCV</code> from the official source. This is the <a href=""https://pastebin.com/6tAEC3iC"" rel=""nofollow noreferrer"">CMakeCache.txt</a> that <code>CMake</code> spit out. After the first time I compiled it, I added <a href=""https://github.com/opencv/opencv_contrib"" rel=""nofollow noreferrer"">opencv_contrib</a> to the mix, thinking that it could help (I also think that I actually needed it), but that didn't fix the problem.</p>

<p>This is the code I'm having problems with:</p>

<pre><code># Create the VideoCapture object
cam = cv2.VideoCapture(source)

# If Camera Device is not opened, exit the program
if not cam.isOpened():
    print ""Video device or file couldn't be opened""
    exit()

print ""Press key `p` to pause the video to start tracking""
while True:
    # Retrieve an image and Display it.
    retval, img = cam.read() #&lt;-- this returns false when trying to read a video 
    if not retval:
        print ""Cannot capture frame device""
        exit()
</code></pre>

<p>At the marked line, <code>retval</code> equals <code>False</code> and <code>image</code> equals <code>None</code>. 
It would already help me if I could somehow debug this behavior, but I didn't find any way of doing so.</p>

<p>I found that many Windows Users had problems with missing <code>ffmpeg</code> support, but that is not the case for me, since I used <code>ffmpeg</code> in previous (not OpenCV-related) projects and <code>CMakeCache.txt</code> reports that <code>ffmpeg</code> has been found and the compilation succeeded.</p>

<p>I also tried using a fully qualified file-name for the video file, which either resulted in <code>Video device or file couldn't be opened</code> or the given problem.</p>

<p>If you have any idea how this problem can be completely resolved, have an Idea on how to solve it or can provide me with a way of properly debugging this behavior, I'd be super glad to here it!</p>

<p>Thanks already!</p>

<p>-</p>

<p>System: MacBook Pro (macOS Sierra <code>10.12.6</code>)</p>

<p>OpenCV Version: <code>3.3.0</code></p>

<p>Dlib Version (not necessary imo, but hey): <code>19.4.0</code> </p>

<p><strong>Edit 2</strong>
Output of <code>cmake -DOPENCV_EXTRA_MODULES_PATH=../opencv_contrib-master/modules ../ &gt;&gt; result.txt</code>: <a href=""https://pastebin.com/KbHPQm3L"" rel=""nofollow noreferrer"">pastebin</a></p>",python|opencv|video|ffmpeg|capture,"<p>I've found a workaround by now using the <a href=""http://www.scikit-video.org/stable/io.html"" rel=""nofollow noreferrer"">scikit-video</a> and the linked <code>skvideo.io.FFmpegReader()</code> function. Through that I was able to read the all the videos I tested inbefore frame-by-frame. </p>

<p>This is the code that replaces the code in my original question:</p>

<pre><code>reader = skvideo.io.FFmpegReader(""/Users/timomueller/Desktop/test_video_carcounting.mp4"", inputdict=inputparameters, outputdict=outputparameters);

print ""Press key `p` to pause the video to start tracking""
for img in reader.nextFrame():
    #img contains the frame - the for loop runs until there is 
    #no frame available anymore 
</code></pre>

<p>If you're facing the same problem as I do, I think that <code>scikit-video</code> is a good workaround and I'll focus on working on my actual problem instead of fixing <code>OpenCV</code> from now on.</p>

<p>Installation through <code>pip</code> is quiet easy. Simply <code>sudo pip install sk-video</code> and wait until the command finishes. Then you can <code>import skvideo.io</code> and everything should work fine!</p>

<p>The only problem I was having with this workaround is that <code>img</code> seems tinted as if it lost it's colors or as if there were incorrect settings regarding color space, pixel format, etc. For me this is not crucial, so I will simply ignore that and probably work on it later on. (If I find a fix, I'll update this answer). For everyone that needs correct colors, take a look at the documentation regarding <code>inputdict</code> and <code>outputdict</code> (<code>skvideo.io.FFmpegReader(file, inputdict, outputdict)</code>). As well as <code>FFmpeg</code>'s <a href=""https://ffmpeg.org/ffmpeg-filters.html#Video-Filters"" rel=""nofollow noreferrer"">video filters</a>. It should be possible to fix the tinted colors with that or with proper pixel format settings in the <code>outputdict</code>.</p>

<p>But maybe the tinting problem doesn't affect you, in that case: I hope this helped.</p>

<p>Be sure to add your answer if you find an actual solution to the problem though!</p>",0
20,48761269,"Python not working in terminal (Python 3.4.3, Windows 8.1)","<p>I open cmd.exe in the installed directory and type 'python':</p>

<pre><code>C:\Python34&gt;python
Python 3.4.3 (v3.4.3:9b73f1c3e601, Feb 24 2015, 22:43:06) [MSC v.1600 32 bit (In
tel)] on win32
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
</code></pre>

<p>Basic math works fine:</p>

<pre><code>&gt;&gt;&gt; 4+4
8
</code></pre>

<p>I can import, but can't seem to do basic things like check the version, or use pip, etc.:</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getcwd()
'C:\\Python34'


&gt;&gt;&gt; -version
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
NameError: name 'version' is not defined


&gt;&gt;&gt; import pip
&gt;&gt;&gt; pip install flask
  File ""&lt;stdin&gt;"", line 1
    pip install flask
          ^
SyntaxError: invalid syntax
</code></pre>

<p>I'm relatively new to this so might be doing something stupid, but I can't figure out what's going on.</p>",python|python-3.x,"<p>You cannot do pip install inside the python interpreter. Befor enterig the interpreter, try pip install, if you do not have pip, google for getpip.py.</p>",1
21,48761269,"Python not working in terminal (Python 3.4.3, Windows 8.1)","<p>I open cmd.exe in the installed directory and type 'python':</p>

<pre><code>C:\Python34&gt;python
Python 3.4.3 (v3.4.3:9b73f1c3e601, Feb 24 2015, 22:43:06) [MSC v.1600 32 bit (In
tel)] on win32
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
</code></pre>

<p>Basic math works fine:</p>

<pre><code>&gt;&gt;&gt; 4+4
8
</code></pre>

<p>I can import, but can't seem to do basic things like check the version, or use pip, etc.:</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getcwd()
'C:\\Python34'


&gt;&gt;&gt; -version
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
NameError: name 'version' is not defined


&gt;&gt;&gt; import pip
&gt;&gt;&gt; pip install flask
  File ""&lt;stdin&gt;"", line 1
    pip install flask
          ^
SyntaxError: invalid syntax
</code></pre>

<p>I'm relatively new to this so might be doing something stupid, but I can't figure out what's going on.</p>",python|python-3.x,"<p>Notice the triple chevrons (""<code>&gt;&gt;&gt;</code>"") means you are inside the Python REPL.  Install packages either:</p>

<ol>
<li>outside Python at the commandline (recommended)</li>
<li><a href=""https://stackoverflow.com/questions/12332975/installing-python-module-within-code"">inside Python</a> (less common)</li>
</ol>

<p>Try the first option:</p>

<p><em>In cmd</em></p>

<pre><code>&gt; pip install requests
&gt; python                                               # activates python
</code></pre>

<p><em>In Python</em></p>

<pre><code>&gt;&gt;&gt; import requests
&gt;&gt;&gt; r = requests.get(""https://www.google.com"")
&gt;&gt;&gt; r.status_code
200
</code></pre>",2
22,48792380,Add two matrices containing NaN in python,"<p>I have two 5D matrices which I would like to add elementwise. The matrices have the exact same dimensions and number of elements, but they both contain randomly distributed NaN values.</p>

<p>I would like to add these two matrices elementwise in an efficient way. I am currently adding them by looping through them elementwise, but this loop takes about 40 minutes and I just thought there must be a more efficient way of doing it.</p>

<p>What I think would be an efficient way is if it was possible to use numpy.nansum to add them, but from what I can find, numpy.nansum only works with 1D arrays. </p>

<p>I would prefer it if the adding went down as it does with numpy.nansum (<a href=""https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nansum.html"" rel=""nofollow noreferrer"">https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nansum.html</a>). Namely, (1) if two values are added I want the sum to be a value, (2) if a value and a NaN are added I want the sum to be the value and (3) if two NaN are added I want the sum to be NaN. </p>

<p>Below is an exaplary code:</p>

<pre><code>import numpy as np

# Creating fake data
A = np.arange(0,720,1).reshape(2,3,4,5,6)
B = np.arange(720,1440,1).reshape(2,3,4,5,6)

# Assigning some elements as NaN
A[0,1,2,3,4] = np.nan
A[1,2,3,4,5] = np.nan
B[1,2,3,4,5] = np.nan
</code></pre>

<p>So, if I now add A and B (lets say C = A + B), I want element C[0,1,2,3,4] to be the value of B[0,1,2,3,4], element C[1,2,3,4,5] to be NaN and all other elements in C to be the sums of the respectively added elements in A and B.</p>

<p>Does anyone have an efficient solution for this addition?</p>",python|python-2.7|numpy,"<p>I was thinking of something more prosaic</p>

<pre><code>In [22]: A=np.arange(10.)         # make sure A is float
In [23]: B=np.arange(100,110.)
In [24]: A[[1,3,9]]=np.nan
In [25]: B[[2,5,9]]=np.nan

In [26]: A
Out[26]: array([ 0., nan,  2., nan,  4.,  5.,  6.,  7.,  8., nan])
In [27]: B
Out[27]: array([100., 101.,  nan, 103., 104.,  nan, 106., 107., 108.,  nan])
In [29]: C=A+B
In [30]: C
Out[30]: array([100.,  nan,  nan,  nan, 108.,  nan, 112., 114., 116.,  nan])

In [31]: mask1 = np.isnan(A) &amp; ~np.isnan(B)
In [32]: C[mask1] = B[mask1]
In [33]: mask2 = np.isnan(B) &amp; ~np.isnan(A)
In [34]: C[mask2] = A[mask2]
In [35]: C
Out[35]: array([100., 101.,   2., 103., 108.,   5., 112., 114., 116.,  nan])
</code></pre>

<p>I like the <code>stack</code> and <code>nansum</code> approach, but I'm not sure it's faster:</p>

<pre><code>In [36]: s=np.stack((A,B))
In [37]: C1 = np.nansum(s, axis=0)
In [38]: C1
Out[38]: array([100., 101.,   2., 103., 108.,   5., 112., 114., 116.,   0.])
In [40]: C1[np.all(np.isnan(s), axis=0)] = np.nan
In [41]: C1
Out[41]: array([100., 101.,   2., 103., 108.,   5., 112., 114., 116.,  nan])
</code></pre>

<p>Look at <code>s</code> if this approach is puzzling:</p>

<pre><code>In [42]: s
Out[42]: 
array([[  0.,  nan,   2.,  nan,   4.,   5.,   6.,   7.,   8.,  nan],
       [100., 101.,  nan, 103., 104.,  nan, 106., 107., 108.,  nan]])
</code></pre>

<p><code>s</code> is a new array, with a new 0 dimension.  <code>sum</code> on that dimension is the same as <code>A+B</code>.  This stacking lets us take advantage of the <code>nansum</code>.  Unfortunately you still want to keep some <code>nan</code>, so we still have to do a masked assignment to handle that detail.</p>",3
23,48792380,Add two matrices containing NaN in python,"<p>I have two 5D matrices which I would like to add elementwise. The matrices have the exact same dimensions and number of elements, but they both contain randomly distributed NaN values.</p>

<p>I would like to add these two matrices elementwise in an efficient way. I am currently adding them by looping through them elementwise, but this loop takes about 40 minutes and I just thought there must be a more efficient way of doing it.</p>

<p>What I think would be an efficient way is if it was possible to use numpy.nansum to add them, but from what I can find, numpy.nansum only works with 1D arrays. </p>

<p>I would prefer it if the adding went down as it does with numpy.nansum (<a href=""https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nansum.html"" rel=""nofollow noreferrer"">https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nansum.html</a>). Namely, (1) if two values are added I want the sum to be a value, (2) if a value and a NaN are added I want the sum to be the value and (3) if two NaN are added I want the sum to be NaN. </p>

<p>Below is an exaplary code:</p>

<pre><code>import numpy as np

# Creating fake data
A = np.arange(0,720,1).reshape(2,3,4,5,6)
B = np.arange(720,1440,1).reshape(2,3,4,5,6)

# Assigning some elements as NaN
A[0,1,2,3,4] = np.nan
A[1,2,3,4,5] = np.nan
B[1,2,3,4,5] = np.nan
</code></pre>

<p>So, if I now add A and B (lets say C = A + B), I want element C[0,1,2,3,4] to be the value of B[0,1,2,3,4], element C[1,2,3,4,5] to be NaN and all other elements in C to be the sums of the respectively added elements in A and B.</p>

<p>Does anyone have an efficient solution for this addition?</p>",python|python-2.7|numpy,"<pre><code>np.where(np.isnan(A), B, A + np.nan_to_num(B))    
</code></pre>
<p>We see how this works in two parts:</p>
<ol>
<li>For the nan part of <code>A</code>, we fill in values from <code>B</code>.</li>
</ol>
<p>If <code>B</code> and <code>A</code> are <code>nan</code> at the same time, the values stored will be <code>nan</code>. If values in <code>B</code> are not <code>nan</code> while those from <code>A</code> are <code>nan</code>, the values of <code>B</code> will be taken.</p>
<ol start=""2"">
<li>For the part of <code>A</code> that is non-nan, we fill in <code>A + np.nan_to_num(B)</code>.</li>
</ol>
<p><code>np.nan_to_num(B)</code> will turn <code>B</code>'s nan part into 0. Thus, <code>A + np.nan_to_num(B)</code> will not be <code>nan</code> when <code>B</code> is <code>nan</code>.</p>
<p>Thanks for Paul Panzer's correction.</p>",3
24,48792380,Add two matrices containing NaN in python,"<p>I have two 5D matrices which I would like to add elementwise. The matrices have the exact same dimensions and number of elements, but they both contain randomly distributed NaN values.</p>

<p>I would like to add these two matrices elementwise in an efficient way. I am currently adding them by looping through them elementwise, but this loop takes about 40 minutes and I just thought there must be a more efficient way of doing it.</p>

<p>What I think would be an efficient way is if it was possible to use numpy.nansum to add them, but from what I can find, numpy.nansum only works with 1D arrays. </p>

<p>I would prefer it if the adding went down as it does with numpy.nansum (<a href=""https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nansum.html"" rel=""nofollow noreferrer"">https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nansum.html</a>). Namely, (1) if two values are added I want the sum to be a value, (2) if a value and a NaN are added I want the sum to be the value and (3) if two NaN are added I want the sum to be NaN. </p>

<p>Below is an exaplary code:</p>

<pre><code>import numpy as np

# Creating fake data
A = np.arange(0,720,1).reshape(2,3,4,5,6)
B = np.arange(720,1440,1).reshape(2,3,4,5,6)

# Assigning some elements as NaN
A[0,1,2,3,4] = np.nan
A[1,2,3,4,5] = np.nan
B[1,2,3,4,5] = np.nan
</code></pre>

<p>So, if I now add A and B (lets say C = A + B), I want element C[0,1,2,3,4] to be the value of B[0,1,2,3,4], element C[1,2,3,4,5] to be NaN and all other elements in C to be the sums of the respectively added elements in A and B.</p>

<p>Does anyone have an efficient solution for this addition?</p>",python|python-2.7|numpy,"<pre><code>s = np.stack((A, B))
C = np.nansum(s, axis=0)
C[np.all(np.isnan(s), axis=0)] = np.nan
</code></pre>

<p>This will treat <code>np.nan</code> as <code>0.0</code> for purposes of summing, and then the final line adds back the places where <code>np.nan</code> existed for all entries along the new ""depth"" axis that spans across <code>A</code> and <code>B</code>.</p>

<p>Note that this last operation is necessary for NumPy versions > 1.8, as it says in <a href=""https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nansum.html"" rel=""nofollow noreferrer"">the documentation</a>:</p>

<blockquote>
  <p>In NumPy versions &lt;= 1.8.0 Nan is returned for slices that are all-NaN or empty. In later versions zero is returned.</p>
</blockquote>

<p>If you can guarantee NumPy version &lt;= 1.8, then just the <code>nansum</code> part alone would suffice.</p>",1
25,48792380,Add two matrices containing NaN in python,"<p>I have two 5D matrices which I would like to add elementwise. The matrices have the exact same dimensions and number of elements, but they both contain randomly distributed NaN values.</p>

<p>I would like to add these two matrices elementwise in an efficient way. I am currently adding them by looping through them elementwise, but this loop takes about 40 minutes and I just thought there must be a more efficient way of doing it.</p>

<p>What I think would be an efficient way is if it was possible to use numpy.nansum to add them, but from what I can find, numpy.nansum only works with 1D arrays. </p>

<p>I would prefer it if the adding went down as it does with numpy.nansum (<a href=""https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nansum.html"" rel=""nofollow noreferrer"">https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nansum.html</a>). Namely, (1) if two values are added I want the sum to be a value, (2) if a value and a NaN are added I want the sum to be the value and (3) if two NaN are added I want the sum to be NaN. </p>

<p>Below is an exaplary code:</p>

<pre><code>import numpy as np

# Creating fake data
A = np.arange(0,720,1).reshape(2,3,4,5,6)
B = np.arange(720,1440,1).reshape(2,3,4,5,6)

# Assigning some elements as NaN
A[0,1,2,3,4] = np.nan
A[1,2,3,4,5] = np.nan
B[1,2,3,4,5] = np.nan
</code></pre>

<p>So, if I now add A and B (lets say C = A + B), I want element C[0,1,2,3,4] to be the value of B[0,1,2,3,4], element C[1,2,3,4,5] to be NaN and all other elements in C to be the sums of the respectively added elements in A and B.</p>

<p>Does anyone have an efficient solution for this addition?</p>",python|python-2.7|numpy,"<p>Just add a new axe before summing :  </p>

<pre><code>np.nansum(np.concatenate((A[None,:],B[None,:])),axis=0)
</code></pre>",1
26,48664649,Keras Training a CNN - Should I Convert Heatmap Data As Image or 2D Matrix,"<p>I am interested in training a Keras CNN and I have some data in the form of 2D matrices (e.g. width x height). I normally represent, or visualize the data like a heatmap, with a colorbar.</p>

<p>However, in training the CNN and formatting the data input, I'm wondering if I should keep this matrix as a 2D matrix, or convert it into an RGB image that is essentially a 3D matrix?</p>

<p>What is the best practice and some considerations people should take into account?</p>",python|tensorflow|keras|conv-neural-network|data-processing,"<p>In fact - you need to reshape a single data point to have a <code>3D</code> shape - as <code>keras</code> expects your dataset to have shape <code>(number examples, width, height, channels)</code>. If you don't wont to make your image <code>RGB</code> - you can simply leave it with only one channel (and interpret it as <code>greyscale</code> channel).</p>",2
27,48594765,How to get text from entry/text widget generated dynamically on action?,"<p>I want to get data from every newly generated text/entry widget on click:</p>

<pre><code>for i in range(len(list1)):
    tk.Text(frame, height=1, width = 30).grid(row=i+3, column=2, sticky ='w',
                                                        padx = 10, pady = 4)
</code></pre>",python|tkinter,"<p>This is a combination of four questions:</p>

<ol>
<li>How to get the string in Entry?</li>
<li>How to get the string in Text?</li>
<li>How to call a method when a widget is clicked?</li>
<li>How to dynamically create widgets?</li>
</ol>

<p><strong>How to get the string in Entry?</strong></p>

<pre><code>import tkinter as tk
...
entry = tk.Entry(...)
...
entry.get() # gets the string in an Entry
</code></pre>

<p><strong>How to get the string in Text?</strong></p>

<pre><code>import tkinter as tk
...
text = tk.Text(...)
...
text.get('1.0', 'end-1c')
</code></pre>

<p><strong>How to call a method when a widget is clicked?</strong></p>

<pre><code>import tkinter as tk
...
def a_method(*args):
    print(""Hello"")
...
widget = tk.Label(...)
...
widget.bind('&lt;Button-1&gt;', a_method)
</code></pre>

<p><strong>How to dynamically create widgets?</strong></p>

<p>Creating widgets dynamically is no excuse for not assigning them to variables. It is not strictly necessary to assign those particular objects to variables, but I doubt that's what a python programmer would want to deal with.</p>

<p>Create multiple widgets using an iterable type, such as a <code>dict</code>:</p>

<pre><code>import tkinter as tk
...
a_dict = dict()
my_widget_names = {""Township"", ""Rebellion"", ""Know"", ...}
for name in my_widget_names:
    a_dict[name] = tk.Button(...)
</code></pre>

<hr>

<p>Here's an example that has all of the above:</p>

<pre><code>try:                        # In order to be able to import tkinter for
    import tkinter as tk    # either in python 2 or in python 3
except ImportError:
    import Tkinter as tk


def display_data(d, key):
    if d[key].winfo_class() == 'Text':
        data = d[key].get('1.0', 'end-1c')
    elif d[key].winfo_class() == 'Entry':
        data = d[key].get()
    print(data)


def populate_widgets(widget_class_name, keys):
    global root
    widget_dict = dict()
    if widget_class_name in ('Text', 'Entry'):
        if widget_class_name == 'Text':
            for name in keys:
                widget_dict[name] = tk.Text(root, height=4)
        elif widget_class_name == 'Entry':
            for name in keys:
                widget_dict[name] = tk.Entry(root)
        for name in keys:        
            widget_dict[name].pack()
            widget_dict[name].bind('&lt;Button-1&gt;',
                                        lambda event, d=widget_dict,
                                        key=name: display_data(d, key))
        return widget_dict

if __name__ == '__main__':
    root = tk.Tk()
    widget_names = {""Township"", ""Rebellion"", ""Know"", ""Your"", ""Enemy""}
    my_text_widgets = populate_widgets('Text', widget_names)
    my_entry_widgets = populate_widgets('Entry', widget_names)
    root.mainloop()
</code></pre>",0
28,32440656,Python data structure to mimic relational databases,"<p>I would like to store a lot of instances of some data in python. Each record has the following fields:
username, address, salary etc...</p>

<p>The username should be unique. I do a lot of searches.</p>

<p>Currently I am using a list of dictionaries, but when I insert a new item I iterate the list and check the username of each dictionary, which is O(n). Searching is O(n) too. How could I achieve that there is an index on usernames, and make the search time O(logn)?</p>",python|list|search|dictionary|set,"<p>You could alternatively actually use a relational database. The <a href=""https://docs.python.org/2/library/sqlite3.html"" rel=""nofollow"">sqlite</a> module allows for databases in memory:</p>

<pre><code>import sqlite3
conn = sqlite3.connect(':memory:')
# ...
conn.close()
</code></pre>",1
29,32440656,Python data structure to mimic relational databases,"<p>I would like to store a lot of instances of some data in python. Each record has the following fields:
username, address, salary etc...</p>

<p>The username should be unique. I do a lot of searches.</p>

<p>Currently I am using a list of dictionaries, but when I insert a new item I iterate the list and check the username of each dictionary, which is O(n). Searching is O(n) too. How could I achieve that there is an index on usernames, and make the search time O(logn)?</p>",python|list|search|dictionary|set,"<p>Why not use a dictionary of dicts?</p>

<p>The top-level dictionary could be addressed by the username and the other dicts can be the same you have now.</p>

<p>A dictionary can also be scanned threw (d.values()) -- the only disadvantage is, that you can't depend on the ordering.</p>

<p>Of course that is not a DB behavior, but in most cases good enough and very fast -- the access via dict is O(1).</p>

<p>Of course you could use sqlite -- but when you just want to access via username and scan the entries, you are much faster (both in development- and runtime speed).</p>",2
30,32419942,Importing package after running setup.py does not work,"<p>I have the following file structure:</p>

<pre><code>setup.py  
src/  
    __init__.py
    source.py 
</code></pre>

<p>My <code>setup.py</code> file contains:</p>

<pre><code>from setuptools import setup

setup(
    name = ""PackageName"",
    version = ""0.0"",
    author = ""My Name"",
    description = ""Something"",
    packages = ['src']
)
</code></pre>

<p>However when I run the command:</p>

<p><code>&gt;python setup.py install</code></p>

<p>The installation runs without any error, but in the <code>Python27\Lib\site-packages</code> directory where all installed packages go, I only see a <code>.egg</code> file. Furthermore, I cannot use the <code>import PackageName</code> command as I get the error that the package does not exist. What am I doing wrong?</p>",python-2.7|setup.py|egg,"<p>The name used for importing in <code>import PackageName</code> should be the name of the package directory. So changing <code>src</code> to <code>PackageName</code> will resolve the import error.</p>

<p>Thanks to  @Ignacio Vazquez-Abrams for pointing this out.</p>",0
31,14355151,how to make pandas HDFStore 'put' operation faster,"<p>I'm trying to build a ETL toolkit with pandas, hdf5.</p>

<p>My plan was  </p>

<ol>
<li>extracting a table from mysql to a DataFrame;  </li>
<li>put this DataFrame into a HDFStore;</li>
</ol>

<p>But when i was doing the step 2, i found putting a dataframe into a *.h5 file costs too much time.</p>

<ul>
<li>the size of table in source mysql server: 498MB
<ul>
<li>52 columns</li>
<li>924,624 records</li>
</ul></li>
<li>the size of *.h5 file after putting the dataframe inside : 513MB
<ul>
<li>the 'put' operation costs 849.345677137 seconds</li>
</ul></li>
</ul>

<p>My questions are:<br>
Is this time costs normal?<br>
Is there any way to make it faster?</p>

<hr>

<h2>Update 1</h2>

<p>thanks Jeff</p>

<ul>
<li><p>my codes are pretty simple:</p>

<p>extract_store = HDFStore('extract_store.h5')<br>
extract_store['df_staff'] = df_staff</p></li>
<li>and when i trying 'ptdump -av file.h5', i got an error, but i still could load the dataframe object from this h5 file:</li>
</ul>

<blockquote>
  <p>tables.exceptions.HDF5ExtError: HDF5 error back trace</p>
  
  <p>File ""../../../src/H5F.c"", line 1512, in H5Fopen<br>
      unable to open file   File ""../../../src/H5F.c"", line 1307, in H5F_open<br>
      unable to read superblock   File ""../../../src/H5Fsuper.c"", line 305, in H5F_super_read<br>
      unable to find file signature   File ""../../../src/H5Fsuper.c"", line 153, in H5F_locate_signature<br>
      unable to find a valid file signature  </p>
  
  <p>End of HDF5 error back trace  </p>
  
  <p>Unable to open/create file 'extract_store.h5'  </p>
</blockquote>

<ul>
<li>some other infos:<br>
<ul>
<li>pandas version: '0.10.0'</li>
<li>os: ubuntu server 10.04 x86_64</li>
<li>cpu: 8 * Intel(R) Xeon(R) CPU X5670  @ 2.93GHz</li>
<li>MemTotal: 51634016 kB</li>
</ul></li>
</ul>

<p>I will update the pandas to 0.10.1-dev and try again.</p>

<hr>

<h2>Update 2</h2>

<ul>
<li>I had updated pandas to '0.10.1.dev-6e2b6ea'</li>
<li>but the time costs wasn't decreased, it costs 884.15 s seconds this time</li>
<li>the output of 'ptdump -av file.h5 ' is :</li>
</ul>

<pre>
    / (RootGroup) ''  
      /._v_attrs (AttributeSet), 4 attributes:  
       [CLASS := 'GROUP',  
        PYTABLES_FORMAT_VERSION := '2.0',  
        TITLE := '',  
        VERSION := '1.0']  
    /df_bugs (Group) ''  
      /df_bugs._v_attrs (AttributeSet), 12 attributes:  
       [CLASS := 'GROUP',  
        TITLE := '',  
        VERSION := '1.0',  
        axis0_variety := 'regular',  
        axis1_variety := 'regular',  
        block0_items_variety := 'regular',  
        block1_items_variety := 'regular',  
        block2_items_variety := 'regular',  
        nblocks := 3,  
        ndim := 2,  
        pandas_type := 'frame',  
        pandas_version := '0.10.1']  
    /df_bugs/axis0 (Array(52,)) ''  
      atom := StringAtom(itemsize=19, shape=(), dflt='')  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'irrelevant'  
      chunkshape := None  
      /df_bugs/axis0._v_attrs (AttributeSet), 7 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',  
        kind := 'string',  
        name := None,  
        transposed := True]  
    /df_bugs/axis1 (Array(924624,)) ''  
      atom := Int64Atom(shape=(), dflt=0)  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'little'  
      chunkshape := None  
      /df_bugs/axis1._v_attrs (AttributeSet), 7 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',  
        kind := 'integer',  
        name := None,  
        transposed := True]  
    /df_bugs/block0_items (Array(5,)) ''  
      atom := StringAtom(itemsize=12, shape=(), dflt='')  
      maindim := 0   
      flavor := 'numpy'  
      byteorder := 'irrelevant'  
      chunkshape := None  
      /df_bugs/block0_items._v_attrs (AttributeSet), 7 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',  
        kind := 'string',  
        name := None,  
        transposed := True]  
    /df_bugs/block0_values (Array(924624, 5)) ''  
      atom := Float64Atom(shape=(), dflt=0.0)  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'little'  
      chunkshape := None  
      /df_bugs/block0_values._v_attrs (AttributeSet), 5 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',  
        transposed := True]  
    /df_bugs/block1_items (Array(19,)) ''  
      atom := StringAtom(itemsize=19, shape=(), dflt='')  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'irrelevant'  
      chunkshape := None  
      /df_bugs/block1_items._v_attrs (AttributeSet), 7 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',  
        kind := 'string',  
        name := None,  
        transposed := True]  
    /df_bugs/block1_values (Array(924624, 19)) ''  
      atom := Int64Atom(shape=(), dflt=0)  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'little'  
      chunkshape := None  
      /df_bugs/block1_values._v_attrs (AttributeSet), 5 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',   
        VERSION := '2.3',  
        transposed := True]  
    /df_bugs/block2_items (Array(28,)) ''  
      atom := StringAtom(itemsize=18, shape=(), dflt='')  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'irrelevant'  
      chunkshape := None  
      /df_bugs/block2_items._v_attrs (AttributeSet), 7 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',
        kind := 'string',  
        name := None,  
        transposed := True]  
    /df_bugs/block2_values (VLArray(1,)) ''  
      atom = ObjectAtom()  
      byteorder = 'irrelevant'  
      nrows = 1  
      flavor = 'numpy'  
      /df_bugs/block2_values._v_attrs (AttributeSet), 5 attributes:  
       [CLASS := 'VLARRAY',  
        PSEUDOATOM := 'object',  
        TITLE := '',   
        VERSION := '1.3',  
        transposed := True]  
</pre>

<ul>
<li>and I had tried your code below (putting the dataframe into hdfstore with the param 'table' is True) , but got an error instead, it seemed like python's datatime type was not supported :</li>
</ul>

<blockquote>
  <p>Exception: cannot find the correct atom type -> [dtype->object] object
  of type 'datetime.datetime' has no len()</p>
</blockquote>

<hr>

<h2>Update 3</h2>

<p>thanks jeff. 
Sorry for the delay.</p>

<ul>
<li>tables.<strong>version</strong> : '2.4.0'.</li>
<li>yes, the 884 seconds is only the put operation costs without the pull operation from mysql</li>
<li>a row of dataframe (df.ix[0]):</li>
</ul>

<pre>
bug_id                                   1
assigned_to                            185
bug_file_loc                          None
bug_severity                      critical
bug_status                          closed
creation_ts            1998-05-06 21:27:00
delta_ts               2012-05-09 14:41:41
short_desc                    Two cursors.
host_op_sys                        Unknown
guest_op_sys                       Unknown
priority                                P3
rep_platform                          IA32
reporter                                56
product_id                               7
category_id                            983
component_id                         12925
resolution                           fixed
target_milestone                       ws1
qa_contact                             412
status_whiteboard                         
votes                                    0
keywords                                SR
lastdiffed             2012-05-09 14:41:41
everconfirmed                            1
reporter_accessible                      1
cclist_accessible                        1
estimated_time                        0.00
remaining_time                        0.00
deadline                              None
alias                                 None
found_in_product_id                      0
found_in_version_id                      0
found_in_phase_id                        0
cf_type                             Defect
cf_reported_by                 Development
cf_attempted                           NaN
cf_failed                              NaN
cf_public_summary                         
cf_doc_impact                            0
cf_security                              0
cf_build                               NaN
cf_branch                                 
cf_change                              NaN
cf_test_id                             NaN
cf_regression                      Unknown
cf_reviewer                              0
cf_on_hold                               0
cf_public_severity                     ---
cf_i18n_impact                           0
cf_eta                                None
cf_bug_source                          ---
cf_viss                               None
Name: 0, Length: 52
</pre>

<ul>
<li>the picture of dataframe( just type 'df' in ipython notebook):</li>
</ul>

<pre>

Int64Index: 924624 entries, 0 to 924623
Data columns:
bug_id                 924624  non-null values
assigned_to            924624  non-null values
bug_file_loc           427318  non-null values
bug_severity           924624  non-null values
bug_status             924624  non-null values
creation_ts            924624  non-null values
delta_ts               924624  non-null values
short_desc             924624  non-null values
host_op_sys            924624  non-null values
guest_op_sys           924624  non-null values
priority               924624  non-null values
rep_platform           924624  non-null values
reporter               924624  non-null values
product_id             924624  non-null values
category_id            924624  non-null values
component_id           924624  non-null values
resolution             924624  non-null values
target_milestone       924624  non-null values
qa_contact             924624  non-null values
status_whiteboard      924624  non-null values
votes                  924624  non-null values
keywords               924624  non-null values
lastdiffed             924509  non-null values
everconfirmed          924624  non-null values
reporter_accessible    924624  non-null values
cclist_accessible      924624  non-null values
estimated_time         924624  non-null values
remaining_time         924624  non-null values
deadline               0  non-null values
alias                  0  non-null values
found_in_product_id    924624  non-null values
found_in_version_id    924624  non-null values
found_in_phase_id      924624  non-null values
cf_type                924624  non-null values
cf_reported_by         924624  non-null values
cf_attempted           89622  non-null values
cf_failed              89587  non-null values
cf_public_summary      510799  non-null values
cf_doc_impact          924624  non-null values
cf_security            924624  non-null values
cf_build               327460  non-null values
cf_branch              614929  non-null values
cf_change              300612  non-null values
cf_test_id             12610  non-null values
cf_regression          924624  non-null values
cf_reviewer            924624  non-null values
cf_on_hold             924624  non-null values
cf_public_severity     924624  non-null values
cf_i18n_impact         924624  non-null values
cf_eta                 3910  non-null values
cf_bug_source          924624  non-null values
cf_viss                725  non-null values
dtypes: float64(5), int64(19), object(28)
</pre>

<ul>
<li>after 'convert_objects()':</li>
</ul>

<pre>
dtypes: datetime64[ns](2), float64(5), int64(19), object(26)
</pre>

<ul>
<li>and putting the converted dataframe into hdfstore costs: <strong>749.50 s</strong> :)
<ul>
<li>it seems that reducing the number of 'object' dtypes is the key to decrease time costs</li>
</ul></li>
<li>and putting the converted dataframe into hdfstore with the param 'table' is true still returns that error</li>
</ul>

<pre>
/usr/local/lib/python2.6/dist-packages/pandas-0.10.1.dev_6e2b6ea-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in create_axes(self, axes, obj, validate, nan_rep, data_columns, min_itemsize, **kwargs)
   2203                 raise
   2204             except (Exception), detail:
-> 2205                 raise Exception(""cannot find the correct atom type -> [dtype->%s] %s"" % (b.dtype.name, str(detail)))
   2206             j += 1
   2207 
Exception: cannot find the correct atom type -> [dtype->object] object of type 'datetime.datetime' has no len()
</pre>

<ul>
<li>I'm trying to put the dataframe without datetime columns</li>
</ul>

<hr>

<h2>Update 4</h2>

<ul>
<li>There are 4 columns in mysql whose type is datetime:
<ul>
<li>creation_ts</li>
<li>delta_ts</li>
<li>lastdiffed</li>
<li>deadline</li>
</ul></li>
</ul>

<p>After calling the convert_objects():</p>

<ul>
<li>creation_ts:</li>
</ul>

<pre>
Timestamp: 1998-05-06 21:27:00
</pre>

<ul>
<li>delta_ts:</li>
</ul>

<pre>
Timestamp: 2012-05-09 14:41:41
</pre>

<ul>
<li>lastdiffed</li>
</ul>

<pre>
datetime.datetime(2012, 5, 9, 14, 41, 41)
</pre>

<ul>
<li>deadline is always None, no matter before or after calling 'convert_objects'</li>
</ul>

<pre>
None
</pre>

<ul>
<li>putting the dataframe without column 'lastdiff' costs <strong>691.75 s</strong></li>
<li>when putting the dataframe without column 'lastdiff' and setting param 'table' equal to  True, I got an new error, :</li>
</ul>

<pre>
/usr/local/lib/python2.6/dist-packages/pandas-0.10.1.dev_6e2b6ea-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in create_axes(self, axes, obj, validate, nan_rep, data_columns, min_itemsize, **kwargs)
   2203                 raise
   2204             except (Exception), detail:
-> 2205                 raise Exception(""cannot find the correct atom type -> [dtype->%s] %s"" % (b.dtype.name, str(detail)))
   2206             j += 1
   2207 

Exception: cannot find the correct atom type -> [dtype->object] object of type 'Decimal' has no len()
</pre>

<ul>
<li>the type of columns 'estimated_time', 'remaining_time', 'cf_viss' is 'decimal' in mysql</li>
</ul>

<hr>

<h2>Update 5</h2>

<ul>
<li>I had transformed these 'decimal' type columns to 'float' type, by the code below:</li>
</ul>

<pre>
no_diffed_converted_df_bugs.estimated_time = no_diffed_converted_df_bugs.estimated_time.map(float)
</pre>

<ul>
<li>and now, the time costs is <strong>372.84 s</strong></li>
<li>but the 'table' version putting still raised an error:</li>
</ul>

<pre>
/usr/local/lib/python2.6/dist-packages/pandas-0.10.1.dev_6e2b6ea-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in create_axes(self, axes, obj, validate, nan_rep, data_columns, min_itemsize, **kwargs)
   2203                 raise
   2204             except (Exception), detail:
-> 2205                 raise Exception(""cannot find the correct atom type -> [dtype->%s] %s"" % (b.dtype.name, str(detail)))
   2206             j += 1
   2207 

Exception: cannot find the correct atom type -> [dtype->object] object of type 'datetime.date' has no len()
</pre>",python|pandas,"<h2>How to make this faster?</h2>

<ol>
<li>use 'io.sql.read_frame' to load data from a sql db to a dataframe. Because the 'read_frame' will take care of the columns whose type is 'decimal' by turning them into float.</li>
<li>fill the missing data for each columns.</li>
<li>call the function 'DataFrame.convert_objects' before putting operation</li>
<li>if having string type columns in dateframe, use 'table' instead of 'storer'</li>
</ol>

<p>store.put('key', df, table=True)</p>

<p>After doing these jobs, the performance of putting operation has a big improvement with the same data set:</p>

<pre><code>CPU times: user 42.07 s, sys: 28.17 s, total: 70.24 s
Wall time: 98.97 s
</code></pre>

<hr>

<p>Profile logs of the second test:</p>

<pre>
95984 function calls (95958 primitive calls) in 68.688 CPU seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
      445   16.757    0.038   16.757    0.038 {numpy.core.multiarray.array}
       19   16.250    0.855   16.250    0.855 {method '_append_records' of 'tables.tableExtension.Table' objects}
       16    7.958    0.497    7.958    0.497 {method 'astype' of 'numpy.ndarray' objects}
       19    6.533    0.344    6.533    0.344 {pandas.lib.create_hdf_rows_2d}
        4    6.284    1.571    6.388    1.597 {method '_fillCol' of 'tables.tableExtension.Row' objects}
       20    2.640    0.132    2.641    0.132 {pandas.lib.maybe_convert_objects}
        1    1.785    1.785    1.785    1.785 {pandas.lib.isnullobj}
        7    1.619    0.231    1.619    0.231 {method 'flatten' of 'numpy.ndarray' objects}
       11    1.059    0.096    1.059    0.096 {pandas.lib.infer_dtype}
        1    0.997    0.997   41.952   41.952 pytables.py:2468(write_data)
       19    0.985    0.052   40.590    2.136 pytables.py:2504(write_data_chunk)
        1    0.827    0.827   60.617   60.617 pytables.py:2433(write)
     1504    0.592    0.000    0.592    0.000 {method '_g_readSlice' of 'tables.hdf5Extension.Array' objects}
        4    0.534    0.133   13.676    3.419 pytables.py:1038(set_atom)
        1    0.528    0.528    0.528    0.528 {pandas.lib.max_len_string_array}
        4    0.441    0.110    0.571    0.143 internals.py:1409(_stack_arrays)
       35    0.358    0.010    0.358    0.010 {method 'copy' of 'numpy.ndarray' objects}
        1    0.276    0.276    3.135    3.135 internals.py:208(fillna)
        5    0.263    0.053    2.054    0.411 common.py:128(_isnull_ndarraylike)
       48    0.253    0.005    0.253    0.005 {method '_append' of 'tables.hdf5Extension.Array' objects}
        4    0.240    0.060    1.500    0.375 internals.py:1400(_simple_blockify)
        1    0.234    0.234   12.145   12.145 pytables.py:1066(set_atom_string)
       28    0.225    0.008    0.225    0.008 {method '_createCArray' of 'tables.hdf5Extension.Array' objects}
       36    0.218    0.006    0.218    0.006 {method '_g_writeSlice' of 'tables.hdf5Extension.Array' objects}
     6110    0.155    0.000    0.155    0.000 {numpy.core.multiarray.empty}
        4    0.097    0.024    0.097    0.024 {method 'all' of 'numpy.ndarray' objects}
        6    0.084    0.014    0.084    0.014 {tables.indexesExtension.keysort}
       18    0.084    0.005    0.084    0.005 {method '_g_close' of 'tables.hdf5Extension.Leaf' objects}
    11816    0.064    0.000    0.108    0.000 file.py:1036(_getNode)
       19    0.053    0.003    0.053    0.003 {method '_g_flush' of 'tables.hdf5Extension.Leaf' objects}
     1528    0.045    0.000    0.098    0.000 array.py:342(_interpret_indexing)
    11709    0.040    0.000    0.042    0.000 file.py:248(__getitem__)
        2    0.027    0.013    0.383    0.192 index.py:1099(get_neworder)
        1    0.018    0.018    0.018    0.018 {numpy.core.multiarray.putmask}
        4    0.013    0.003    0.017    0.004 index.py:607(final_idx32)
</pre>",2
32,14355151,how to make pandas HDFStore 'put' operation faster,"<p>I'm trying to build a ETL toolkit with pandas, hdf5.</p>

<p>My plan was  </p>

<ol>
<li>extracting a table from mysql to a DataFrame;  </li>
<li>put this DataFrame into a HDFStore;</li>
</ol>

<p>But when i was doing the step 2, i found putting a dataframe into a *.h5 file costs too much time.</p>

<ul>
<li>the size of table in source mysql server: 498MB
<ul>
<li>52 columns</li>
<li>924,624 records</li>
</ul></li>
<li>the size of *.h5 file after putting the dataframe inside : 513MB
<ul>
<li>the 'put' operation costs 849.345677137 seconds</li>
</ul></li>
</ul>

<p>My questions are:<br>
Is this time costs normal?<br>
Is there any way to make it faster?</p>

<hr>

<h2>Update 1</h2>

<p>thanks Jeff</p>

<ul>
<li><p>my codes are pretty simple:</p>

<p>extract_store = HDFStore('extract_store.h5')<br>
extract_store['df_staff'] = df_staff</p></li>
<li>and when i trying 'ptdump -av file.h5', i got an error, but i still could load the dataframe object from this h5 file:</li>
</ul>

<blockquote>
  <p>tables.exceptions.HDF5ExtError: HDF5 error back trace</p>
  
  <p>File ""../../../src/H5F.c"", line 1512, in H5Fopen<br>
      unable to open file   File ""../../../src/H5F.c"", line 1307, in H5F_open<br>
      unable to read superblock   File ""../../../src/H5Fsuper.c"", line 305, in H5F_super_read<br>
      unable to find file signature   File ""../../../src/H5Fsuper.c"", line 153, in H5F_locate_signature<br>
      unable to find a valid file signature  </p>
  
  <p>End of HDF5 error back trace  </p>
  
  <p>Unable to open/create file 'extract_store.h5'  </p>
</blockquote>

<ul>
<li>some other infos:<br>
<ul>
<li>pandas version: '0.10.0'</li>
<li>os: ubuntu server 10.04 x86_64</li>
<li>cpu: 8 * Intel(R) Xeon(R) CPU X5670  @ 2.93GHz</li>
<li>MemTotal: 51634016 kB</li>
</ul></li>
</ul>

<p>I will update the pandas to 0.10.1-dev and try again.</p>

<hr>

<h2>Update 2</h2>

<ul>
<li>I had updated pandas to '0.10.1.dev-6e2b6ea'</li>
<li>but the time costs wasn't decreased, it costs 884.15 s seconds this time</li>
<li>the output of 'ptdump -av file.h5 ' is :</li>
</ul>

<pre>
    / (RootGroup) ''  
      /._v_attrs (AttributeSet), 4 attributes:  
       [CLASS := 'GROUP',  
        PYTABLES_FORMAT_VERSION := '2.0',  
        TITLE := '',  
        VERSION := '1.0']  
    /df_bugs (Group) ''  
      /df_bugs._v_attrs (AttributeSet), 12 attributes:  
       [CLASS := 'GROUP',  
        TITLE := '',  
        VERSION := '1.0',  
        axis0_variety := 'regular',  
        axis1_variety := 'regular',  
        block0_items_variety := 'regular',  
        block1_items_variety := 'regular',  
        block2_items_variety := 'regular',  
        nblocks := 3,  
        ndim := 2,  
        pandas_type := 'frame',  
        pandas_version := '0.10.1']  
    /df_bugs/axis0 (Array(52,)) ''  
      atom := StringAtom(itemsize=19, shape=(), dflt='')  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'irrelevant'  
      chunkshape := None  
      /df_bugs/axis0._v_attrs (AttributeSet), 7 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',  
        kind := 'string',  
        name := None,  
        transposed := True]  
    /df_bugs/axis1 (Array(924624,)) ''  
      atom := Int64Atom(shape=(), dflt=0)  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'little'  
      chunkshape := None  
      /df_bugs/axis1._v_attrs (AttributeSet), 7 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',  
        kind := 'integer',  
        name := None,  
        transposed := True]  
    /df_bugs/block0_items (Array(5,)) ''  
      atom := StringAtom(itemsize=12, shape=(), dflt='')  
      maindim := 0   
      flavor := 'numpy'  
      byteorder := 'irrelevant'  
      chunkshape := None  
      /df_bugs/block0_items._v_attrs (AttributeSet), 7 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',  
        kind := 'string',  
        name := None,  
        transposed := True]  
    /df_bugs/block0_values (Array(924624, 5)) ''  
      atom := Float64Atom(shape=(), dflt=0.0)  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'little'  
      chunkshape := None  
      /df_bugs/block0_values._v_attrs (AttributeSet), 5 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',  
        transposed := True]  
    /df_bugs/block1_items (Array(19,)) ''  
      atom := StringAtom(itemsize=19, shape=(), dflt='')  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'irrelevant'  
      chunkshape := None  
      /df_bugs/block1_items._v_attrs (AttributeSet), 7 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',  
        kind := 'string',  
        name := None,  
        transposed := True]  
    /df_bugs/block1_values (Array(924624, 19)) ''  
      atom := Int64Atom(shape=(), dflt=0)  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'little'  
      chunkshape := None  
      /df_bugs/block1_values._v_attrs (AttributeSet), 5 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',   
        VERSION := '2.3',  
        transposed := True]  
    /df_bugs/block2_items (Array(28,)) ''  
      atom := StringAtom(itemsize=18, shape=(), dflt='')  
      maindim := 0  
      flavor := 'numpy'  
      byteorder := 'irrelevant'  
      chunkshape := None  
      /df_bugs/block2_items._v_attrs (AttributeSet), 7 attributes:  
       [CLASS := 'ARRAY',  
        FLAVOR := 'numpy',  
        TITLE := '',  
        VERSION := '2.3',
        kind := 'string',  
        name := None,  
        transposed := True]  
    /df_bugs/block2_values (VLArray(1,)) ''  
      atom = ObjectAtom()  
      byteorder = 'irrelevant'  
      nrows = 1  
      flavor = 'numpy'  
      /df_bugs/block2_values._v_attrs (AttributeSet), 5 attributes:  
       [CLASS := 'VLARRAY',  
        PSEUDOATOM := 'object',  
        TITLE := '',   
        VERSION := '1.3',  
        transposed := True]  
</pre>

<ul>
<li>and I had tried your code below (putting the dataframe into hdfstore with the param 'table' is True) , but got an error instead, it seemed like python's datatime type was not supported :</li>
</ul>

<blockquote>
  <p>Exception: cannot find the correct atom type -> [dtype->object] object
  of type 'datetime.datetime' has no len()</p>
</blockquote>

<hr>

<h2>Update 3</h2>

<p>thanks jeff. 
Sorry for the delay.</p>

<ul>
<li>tables.<strong>version</strong> : '2.4.0'.</li>
<li>yes, the 884 seconds is only the put operation costs without the pull operation from mysql</li>
<li>a row of dataframe (df.ix[0]):</li>
</ul>

<pre>
bug_id                                   1
assigned_to                            185
bug_file_loc                          None
bug_severity                      critical
bug_status                          closed
creation_ts            1998-05-06 21:27:00
delta_ts               2012-05-09 14:41:41
short_desc                    Two cursors.
host_op_sys                        Unknown
guest_op_sys                       Unknown
priority                                P3
rep_platform                          IA32
reporter                                56
product_id                               7
category_id                            983
component_id                         12925
resolution                           fixed
target_milestone                       ws1
qa_contact                             412
status_whiteboard                         
votes                                    0
keywords                                SR
lastdiffed             2012-05-09 14:41:41
everconfirmed                            1
reporter_accessible                      1
cclist_accessible                        1
estimated_time                        0.00
remaining_time                        0.00
deadline                              None
alias                                 None
found_in_product_id                      0
found_in_version_id                      0
found_in_phase_id                        0
cf_type                             Defect
cf_reported_by                 Development
cf_attempted                           NaN
cf_failed                              NaN
cf_public_summary                         
cf_doc_impact                            0
cf_security                              0
cf_build                               NaN
cf_branch                                 
cf_change                              NaN
cf_test_id                             NaN
cf_regression                      Unknown
cf_reviewer                              0
cf_on_hold                               0
cf_public_severity                     ---
cf_i18n_impact                           0
cf_eta                                None
cf_bug_source                          ---
cf_viss                               None
Name: 0, Length: 52
</pre>

<ul>
<li>the picture of dataframe( just type 'df' in ipython notebook):</li>
</ul>

<pre>

Int64Index: 924624 entries, 0 to 924623
Data columns:
bug_id                 924624  non-null values
assigned_to            924624  non-null values
bug_file_loc           427318  non-null values
bug_severity           924624  non-null values
bug_status             924624  non-null values
creation_ts            924624  non-null values
delta_ts               924624  non-null values
short_desc             924624  non-null values
host_op_sys            924624  non-null values
guest_op_sys           924624  non-null values
priority               924624  non-null values
rep_platform           924624  non-null values
reporter               924624  non-null values
product_id             924624  non-null values
category_id            924624  non-null values
component_id           924624  non-null values
resolution             924624  non-null values
target_milestone       924624  non-null values
qa_contact             924624  non-null values
status_whiteboard      924624  non-null values
votes                  924624  non-null values
keywords               924624  non-null values
lastdiffed             924509  non-null values
everconfirmed          924624  non-null values
reporter_accessible    924624  non-null values
cclist_accessible      924624  non-null values
estimated_time         924624  non-null values
remaining_time         924624  non-null values
deadline               0  non-null values
alias                  0  non-null values
found_in_product_id    924624  non-null values
found_in_version_id    924624  non-null values
found_in_phase_id      924624  non-null values
cf_type                924624  non-null values
cf_reported_by         924624  non-null values
cf_attempted           89622  non-null values
cf_failed              89587  non-null values
cf_public_summary      510799  non-null values
cf_doc_impact          924624  non-null values
cf_security            924624  non-null values
cf_build               327460  non-null values
cf_branch              614929  non-null values
cf_change              300612  non-null values
cf_test_id             12610  non-null values
cf_regression          924624  non-null values
cf_reviewer            924624  non-null values
cf_on_hold             924624  non-null values
cf_public_severity     924624  non-null values
cf_i18n_impact         924624  non-null values
cf_eta                 3910  non-null values
cf_bug_source          924624  non-null values
cf_viss                725  non-null values
dtypes: float64(5), int64(19), object(28)
</pre>

<ul>
<li>after 'convert_objects()':</li>
</ul>

<pre>
dtypes: datetime64[ns](2), float64(5), int64(19), object(26)
</pre>

<ul>
<li>and putting the converted dataframe into hdfstore costs: <strong>749.50 s</strong> :)
<ul>
<li>it seems that reducing the number of 'object' dtypes is the key to decrease time costs</li>
</ul></li>
<li>and putting the converted dataframe into hdfstore with the param 'table' is true still returns that error</li>
</ul>

<pre>
/usr/local/lib/python2.6/dist-packages/pandas-0.10.1.dev_6e2b6ea-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in create_axes(self, axes, obj, validate, nan_rep, data_columns, min_itemsize, **kwargs)
   2203                 raise
   2204             except (Exception), detail:
-> 2205                 raise Exception(""cannot find the correct atom type -> [dtype->%s] %s"" % (b.dtype.name, str(detail)))
   2206             j += 1
   2207 
Exception: cannot find the correct atom type -> [dtype->object] object of type 'datetime.datetime' has no len()
</pre>

<ul>
<li>I'm trying to put the dataframe without datetime columns</li>
</ul>

<hr>

<h2>Update 4</h2>

<ul>
<li>There are 4 columns in mysql whose type is datetime:
<ul>
<li>creation_ts</li>
<li>delta_ts</li>
<li>lastdiffed</li>
<li>deadline</li>
</ul></li>
</ul>

<p>After calling the convert_objects():</p>

<ul>
<li>creation_ts:</li>
</ul>

<pre>
Timestamp: 1998-05-06 21:27:00
</pre>

<ul>
<li>delta_ts:</li>
</ul>

<pre>
Timestamp: 2012-05-09 14:41:41
</pre>

<ul>
<li>lastdiffed</li>
</ul>

<pre>
datetime.datetime(2012, 5, 9, 14, 41, 41)
</pre>

<ul>
<li>deadline is always None, no matter before or after calling 'convert_objects'</li>
</ul>

<pre>
None
</pre>

<ul>
<li>putting the dataframe without column 'lastdiff' costs <strong>691.75 s</strong></li>
<li>when putting the dataframe without column 'lastdiff' and setting param 'table' equal to  True, I got an new error, :</li>
</ul>

<pre>
/usr/local/lib/python2.6/dist-packages/pandas-0.10.1.dev_6e2b6ea-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in create_axes(self, axes, obj, validate, nan_rep, data_columns, min_itemsize, **kwargs)
   2203                 raise
   2204             except (Exception), detail:
-> 2205                 raise Exception(""cannot find the correct atom type -> [dtype->%s] %s"" % (b.dtype.name, str(detail)))
   2206             j += 1
   2207 

Exception: cannot find the correct atom type -> [dtype->object] object of type 'Decimal' has no len()
</pre>

<ul>
<li>the type of columns 'estimated_time', 'remaining_time', 'cf_viss' is 'decimal' in mysql</li>
</ul>

<hr>

<h2>Update 5</h2>

<ul>
<li>I had transformed these 'decimal' type columns to 'float' type, by the code below:</li>
</ul>

<pre>
no_diffed_converted_df_bugs.estimated_time = no_diffed_converted_df_bugs.estimated_time.map(float)
</pre>

<ul>
<li>and now, the time costs is <strong>372.84 s</strong></li>
<li>but the 'table' version putting still raised an error:</li>
</ul>

<pre>
/usr/local/lib/python2.6/dist-packages/pandas-0.10.1.dev_6e2b6ea-py2.6-linux-x86_64.egg/pandas/io/pytables.pyc in create_axes(self, axes, obj, validate, nan_rep, data_columns, min_itemsize, **kwargs)
   2203                 raise
   2204             except (Exception), detail:
-> 2205                 raise Exception(""cannot find the correct atom type -> [dtype->%s] %s"" % (b.dtype.name, str(detail)))
   2206             j += 1
   2207 

Exception: cannot find the correct atom type -> [dtype->object] object of type 'datetime.date' has no len()
</pre>",python|pandas,"<p>I am pretty convinced your issue is related to type mapping of the actual types in DataFrames and to how they are stored by PyTables.</p>

<ul>
<li>Simple types (floats/ints/bools) that have a fixed represenation, these are mapped to fixed c-types</li>
<li>Datetimes are handled if they can properly be converted (e.g. they have a dtype of 'datetime64[ns]', notably datetimes.date are NOT handled (NaN are a different story and depending on usage can cause the entire column type to be mishandled)</li>
<li>Strings are mapped (in Storer objects to Object type, Table maps them to String types)</li>
<li>Unicode are not handled </li>
<li>all other types are handled as Object in Storers or an Exception is throw for Tables</li>
</ul>

<p>What this means is that if you are doing a <em>put</em> to a Storer (a fixed-representation), then all of the non-mappable types will become Object, see this. <strong>PyTables pickles these columns</strong>. See the below reference for ObjectAtom</p>

<p><a href=""http://pytables.github.com/usersguide/libref/declarative_classes.html#the-atom-class-and-its-descendants"" rel=""nofollow"">http://pytables.github.com/usersguide/libref/declarative_classes.html#the-atom-class-and-its-descendants</a></p>

<p>Table will raise on an invalid type (I should provide a better error message here). I think I will also provide a warning if you try to store a type that is mapped to ObjectAtom (for performance reasons).</p>

<p>To force some types try some of these:</p>

<pre><code>import pandas as pd

# convert None to nan (its currently Object)
# converts to float64 (or type of other objs)
x = pd.Series([None])
x = x.where(pd.notnull(x)).convert_objects()

# convert datetime like with embeded nans to datetime64[ns]
df['foo'] = pd.Series(df['foo'].values, dtype = 'M8[ns]')
</code></pre>

<p>Heres a sample on 64-bit linux (file is 1M rows, about 1 GB in size on disk)</p>

<pre><code>In [1]: import numpy as np

In [2]: import pandas as pd

In [3]: pd.__version__
Out[3]: '0.10.1.dev'

In [3]: import tables

In [4]: tables.__version__
Out[4]: '2.3.1'

In [4]: df = pd.DataFrame(np.random.randn(1000 * 1000, 100), index=range(int(
   ...: 1000 * 1000)), columns=['E%03d' % i for i in xrange(100)])

In [5]: for x in range(20):
   ...:     df['String%03d' % x] = 'string%03d' % x

In [6]: df
Out[6]: 
&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 1000000 entries, 0 to 999999
Columns: 120 entries, E000 to String019
dtypes: float64(100), object(20)

# storer put (cannot query) 
In [9]: def test_put():
   ...:     store = pd.HDFStore('test_put.h5','w')
   ...:     store['df'] = df
   ...:     store.close()

In [10]: %timeit test_put()
1 loops, best of 3: 7.65 s per loop

# table put (can query)
In [7]: def test_put():
      ....:     store = pd.HDFStore('test_put.h5','w')
      ....:     store.put('df',df,table=True)
      ....:     store.close()


In [8]: %timeit test_put()
1 loops, best of 3: 21.4 s per loop
</code></pre>",4
33,14368893,Why is decimal multiplication slightly inaccurate?,"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/1594985/why-do-simple-math-operations-on-floating-point-return-unexpected-inacurate-re"">Why do simple math operations on floating point return unexpected (inacurate) results in VB.Net and Python?</a>  </p>
</blockquote>



<p>Why does this happen in Python:</p>

<pre><code>&gt;&gt;&gt; 
&gt;&gt;&gt; 483.6 * 3
1450.8000000000002
&gt;&gt;&gt; 
</code></pre>

<p>I know this happens in other languages, and I'm not asking how to fix this. I know you can do:</p>

<pre><code>&gt;&gt;&gt; 
&gt;&gt;&gt; from decimal import Decimal
&gt;&gt;&gt; Decimal('483.6') * 3
Decimal('1450.8')
&gt;&gt;&gt; 
</code></pre>

<p>So what exactly causes this to happen? Why do decimals get slightly inaccurate when doing math like this? </p>

<p>Is there any specific reason the computer doesn't get this right?</p>",python|math,"<p>Computers can't represent every floating point number perfectly. </p>

<p>Basically, floating point numbers are represented in scientific notation, but in base 2. Now, try representing 1/3 (base 10) with scientific notation. You might try 3 * 10<sup>-1</sup> or, better yet, 33333333 * 10<sup>-8</sup>. You could keep adding 3's, but you'd never have an exact value of 1/3. Now, try representing 1/10 in binary scientific notation, and you'll find that the same thing happens. </p>

<p><a href=""http://docs.python.org/2/tutorial/floatingpoint.html"" rel=""nofollow noreferrer"">Here</a> is a good link about floating point in python.</p>

<p>As you delve into lower level topics, you'll see how floating point is represented in a computer. In C, for example, floating point numbers are represented as explained in <a href=""https://stackoverflow.com/questions/7644699/floating-point-representation"">this</a> stackoverflow question. You don't need to read this to understand why decimals can't be represented exactly, but it might give you a better idea of what's going on. </p>",4
34,14368893,Why is decimal multiplication slightly inaccurate?,"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/1594985/why-do-simple-math-operations-on-floating-point-return-unexpected-inacurate-re"">Why do simple math operations on floating point return unexpected (inacurate) results in VB.Net and Python?</a>  </p>
</blockquote>



<p>Why does this happen in Python:</p>

<pre><code>&gt;&gt;&gt; 
&gt;&gt;&gt; 483.6 * 3
1450.8000000000002
&gt;&gt;&gt; 
</code></pre>

<p>I know this happens in other languages, and I'm not asking how to fix this. I know you can do:</p>

<pre><code>&gt;&gt;&gt; 
&gt;&gt;&gt; from decimal import Decimal
&gt;&gt;&gt; Decimal('483.6') * 3
Decimal('1450.8')
&gt;&gt;&gt; 
</code></pre>

<p>So what exactly causes this to happen? Why do decimals get slightly inaccurate when doing math like this? </p>

<p>Is there any specific reason the computer doesn't get this right?</p>",python|math,"<p>Computers store numbers as bits (in binary). Unfortunately, even with infinite memory, you cannot accurately represent some decimals in binary, for example <code>0.3</code>. The notion is a kin to trying to store <code>1/3</code> in decimal notation exactly.</p>",1
35,14368893,Why is decimal multiplication slightly inaccurate?,"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/1594985/why-do-simple-math-operations-on-floating-point-return-unexpected-inacurate-re"">Why do simple math operations on floating point return unexpected (inacurate) results in VB.Net and Python?</a>  </p>
</blockquote>



<p>Why does this happen in Python:</p>

<pre><code>&gt;&gt;&gt; 
&gt;&gt;&gt; 483.6 * 3
1450.8000000000002
&gt;&gt;&gt; 
</code></pre>

<p>I know this happens in other languages, and I'm not asking how to fix this. I know you can do:</p>

<pre><code>&gt;&gt;&gt; 
&gt;&gt;&gt; from decimal import Decimal
&gt;&gt;&gt; Decimal('483.6') * 3
Decimal('1450.8')
&gt;&gt;&gt; 
</code></pre>

<p>So what exactly causes this to happen? Why do decimals get slightly inaccurate when doing math like this? </p>

<p>Is there any specific reason the computer doesn't get this right?</p>",python|math,"<p>See the <a href=""http://docs.python.org/2/tutorial/floatingpoint.html"" rel=""noreferrer"">Python documentation on floating point numbers</a>.  Essentially when you create a floating point number you are using base 2 arithmetic.  Just as 1/3 is .333.... on into infinity, so most floating point numbers cannot be exactly expressed in base 2.  Hence your result.</p>

<p>The difference between the Python interpreter and some other languages is that others may not display these extra digits.  It's not a bug in Python, just how the hardware computes using floating-point arithmetic.</p>",5
36,14348531,Check If Entity in Datastore exists in GAE Python,"<p>I'm trying to create (something like) an invoice number generator. But, since Invoices may be zero or more when starting a business, <strong>how do you know if an entity exists</strong>?</p>

<pre><code>query = ""SELECT loanNumber FROM Loans ORDER BY loanNumber DESC LIMIT 1""
loanNumbers = db.GqlQuery(query)

result = loanNumbers.get()

# for loanNumber in loanNumbers:
if loanNumbers is None:
  print ""Print the first number""
else:
  print ""Print the next number""
</code></pre>

<p>Error</p>

<pre><code>KindError: No implementation for kind 'Loans'
</code></pre>",python|google-app-engine|python-2.7|google-cloud-datastore,"<p>Now there are some nice metadata helper functions documented here: <a href=""https://developers.google.com/appengine/docs/python/datastore/metadataentityclasses#get_kinds"" rel=""nofollow"">https://developers.google.com/appengine/docs/python/datastore/metadataentityclasses#get_kinds</a></p>

<p>Here is an example of checking for <code>Loans</code> before continuing with your query and the rest of your code:</p>

<pre><code>from google.appengine.ext.db import metadata

my_kinds = metadata.get_kinds() # Returns a list of entity kind names.

if u'Loans' in my_kinds:
    ...
</code></pre>

<p>Note that <code>my_kinds</code> will not contain <code>Loans</code> until a loan entity has actually been created.</p>

<hr>

<p>If you require more control, or prefer to roll your own helper function there are examples of that here: <a href=""https://developers.google.com/appengine/docs/python/datastore/metadataqueries#Kind_Queries"" rel=""nofollow"">https://developers.google.com/appengine/docs/python/datastore/metadataqueries#Kind_Queries</a></p>",3
37,13949730,python create jpg file from raw data,"<p>I have this strange xml file which apparently contains jpeg image data:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;AttachmentDocument xmlns=""http://echa.europa.eu/schemas/iuclid5/20070330"" documentReferencePK=""ECB5-d18039fe-6fb0-44d6-be9e-d6ade38be543/0"" encoding=""0"" fileSize=""5788"" fileTimestamp=""2007-04-17T12:38:44Z"" parentDocumentPK=""ECB5-fb07efbf-ee93-4cdd-865b-49efa51cbd15/0"" version=""2007-03-19T14:13:29Z""&gt;
    &lt;modificationHistory&gt;
        &lt;modification date=""2007-05-10T09:00:00Z""&gt;
            &lt;comment&gt;Created&lt;/comment&gt;
            &lt;modificationBy&gt;European Commision/Joint Research Centre/European Chemicals Bureau&lt;/modificationBy&gt;
        &lt;/modification&gt;
    &lt;/modificationHistory&gt;
    &lt;ownershipProtection copyProtection=""false"" fractionalDocument=""false"" sealed=""false""/&gt;
    &lt;fileName&gt;33952-38-4-V2.jpeg&lt;/fileName&gt;
    &lt;fileMimetype&gt;image/jpeg&lt;/fileMimetype&gt;
    &lt;rawContent&gt;
        H4sIAAAAAAAAAO2XZ1AU65qAe5iBIQwgOCMZRkHJCIgEySBhyEEyIyDgMBKHLEFQBJEoIHBEQFQE
        JUjOSo4iOQ+Ss2QkSZhZvLXn7j11726d3draH1vn7Xp+dH1fd/XzvV+//TZxlDgNnNNQRakCIBAA
        gM4OgEgA5JQNVBRv6RrcQGLsBO+52WOQ3iJCwkgeLw+sCwaJ0lBDauipqCG9xUV5BZB29ndtvJw8
        kTgvGyes531K4jigDJCTkUHJSMmhUCgFBTklDE4No6KCMdGfp4WzMXOwszGzsiK5hLiRlwQ4WVl5
                ...
    &lt;/rawContent&gt;
    &lt;MD5&gt;0d80850b0c4085500f80e1430b90c70910d4110cc0d7&lt;/MD5&gt;
&lt;/AttachmentDocument&gt;
</code></pre>

<p>(The full version <a href=""http://pastebin.com/X204p1rw"" rel=""nofollow"">here</a>)
And I can't read image out of it.</p>

<p>My attempt:</p>

<pre><code>from PIL import Image
import StringIO
import base64

# I've eleminated all newlines and tabs to produce data string
data=""H4sIAAAAAAAAAO2XZ1AU65qAe5...""
im = Image.open(StringIO.StringIO(base64.b64decode(data)))
</code></pre>

<p>But I'm getting an error:</p>

<pre><code>File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""/usr/lib/python2.7/dist-packages/PIL/Image.py"", line 1980, in open
    raise IOError(""cannot identify image file"")
</code></pre>",python|image-processing|jpeg|python-imaging-library,"<p>If you'd check what you're getting in the output of base64 decode, then you would notice that it's a gzip file. Extract the compressed file and you'll get the desired JPEG.</p>

<p>Comment stored in the image:</p>

<pre><code>CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), default quality
</code></pre>",3
38,14098304,How to get the source of html in lxml?,"<pre><code>import urllib
import lxml.html
down='http://blog.sina.com.cn/s/blog_71f3890901017hof.html'
file=urllib.urlopen(down).read()
root=lxml.html.document_fromstring(file)
body=root.xpath('//div[@class=""articalContent  ""]')[0]
print body.text_content()
</code></pre>

<p>When i run the code, what i get is the text content ,how can i get the html source code of it,not the text content?</p>",python|lxml,"<p>Use</p>

<pre><code>html = lxml.html.tostring(node)
</code></pre>

<p>and please: read the basic documentation of the tools you are using first.</p>",6
39,14000944,Finding the currently selected tab of Ttk Notebook,"<p>I have a Ttk Notebook widget containing 8 Frames - so, 8 tabs. Each frame contains a Text widget. I have a button outside the Notebook widget, and I want to insert text into the current tabs Text widget when this button is pressed.</p>

<p>This would seem to require working out which widget in the Notebook is currently selected, but I can't seem to find how to do this. How would I find the currently selected tab?</p>

<p>Alternatively, how can I implement what I want to?</p>

<p>If it helps, here's the code for my notebook:</p>

<pre><code>self.nb = Notebook(master)
self.nb.pack(fill='both', expand='yes', padx=10, pady=10)
self.frames = []
self.texts = []
for i in xrange(8):
  self.frames.append(Frame())
  self.nb.add(self.frames[i])
  self.texts.append(Text(self.frames[i]))
  self.texts[i].pack(fill='both')
</code></pre>",python|tkinter|ttk,"<p><strong>Getting the tageted tab in tk.Notebook it's easy</strong> all you have to do is to use the notebook object and target the index of the current tab. This can be done as follows</p>
<pre><code> # creating a notebook object
 notebook = ttk.Notebook(root, height=height, width=width, padding=20)

 # Adding tabs
 notebook.add(bin_tab, text=&quot;Binary Conversion&quot;)
 notebook.add(oct_tab, text=&quot;Octal Conversion&quot;)
 notebook.add(hex_tab, text=&quot;Hexadecimal Conversion&quot;)

 print(notebook.index(&quot;current&quot;)) # returns 0, 1, 2depending on how many tabs you have in my case i have 3 which means index from 0 to 2
</code></pre>",1
40,14000944,Finding the currently selected tab of Ttk Notebook,"<p>I have a Ttk Notebook widget containing 8 Frames - so, 8 tabs. Each frame contains a Text widget. I have a button outside the Notebook widget, and I want to insert text into the current tabs Text widget when this button is pressed.</p>

<p>This would seem to require working out which widget in the Notebook is currently selected, but I can't seem to find how to do this. How would I find the currently selected tab?</p>

<p>Alternatively, how can I implement what I want to?</p>

<p>If it helps, here's the code for my notebook:</p>

<pre><code>self.nb = Notebook(master)
self.nb.pack(fill='both', expand='yes', padx=10, pady=10)
self.frames = []
self.texts = []
for i in xrange(8):
  self.frames.append(Frame())
  self.nb.add(self.frames[i])
  self.texts.append(Text(self.frames[i]))
  self.texts[i].pack(fill='both')
</code></pre>",python|tkinter|ttk,"<p>I am not a expert at all but hope i can help with some ""fresh eyes"".
I imagine it could be something involving</p>

<pre><code>def buttonclick():
      somevariablename = focus_get()
      #Print your text into the somevariable notebook could be
      #something like(not sure about the syntax):
      focusednotebook = somevariablename
      focusednotebook.insert('1.0', 'your text here')

yourbutton = Button(parent, text = ""button name"", command = buttonclick)
yourbutton.pack()
</code></pre>

<p>Hope it works or get you in the right direction.</p>

<p>Please feel free to edit as I am fairly new here amd with python :-)</p>",1
41,14000944,Finding the currently selected tab of Ttk Notebook,"<p>I have a Ttk Notebook widget containing 8 Frames - so, 8 tabs. Each frame contains a Text widget. I have a button outside the Notebook widget, and I want to insert text into the current tabs Text widget when this button is pressed.</p>

<p>This would seem to require working out which widget in the Notebook is currently selected, but I can't seem to find how to do this. How would I find the currently selected tab?</p>

<p>Alternatively, how can I implement what I want to?</p>

<p>If it helps, here's the code for my notebook:</p>

<pre><code>self.nb = Notebook(master)
self.nb.pack(fill='both', expand='yes', padx=10, pady=10)
self.frames = []
self.texts = []
for i in xrange(8):
  self.frames.append(Frame())
  self.nb.add(self.frames[i])
  self.texts.append(Text(self.frames[i]))
  self.texts[i].pack(fill='both')
</code></pre>",python|tkinter|ttk,"<p>There are two simple ways to see which tab is selected:</p>

<pre><code>nb.select()  # returns the Tab NAME (string) of the current selection
</code></pre>

<p>and</p>

<pre><code>nb.index('current') # returns the Tab INDEX (number) of the current selection
</code></pre>

<p>The <code>.select()</code> method can also be used to select which tab is currently active, via <code>nb.select(tabId)</code>.  Without the arg, it returns the tabId (in ""name"" form) of the current selection.</p>

<p>The <code>.index(tabId)</code> converts a tabId into a numerical index. It also can take the string ""end"" which will return the number of tabs. So, <code>nb.index(tkinter.END)</code> is like a <code>len()</code> method for a notebook widget.</p>

<p>When there are no tabs, <code>.select()</code> returns an empty string, but <code>.index('current')</code> throws an exception. So, if you want the index, I would say</p>

<pre><code>if nb.select():
    idx = nb.index('current')
</code></pre>

<p>is the best way to go.</p>

<p>In your particular case, you would probably want to grab the current notebook tab name and then convert that name into the actual child text widget, via the <code>nametowidget()</code> method, for manipulation. So...</p>

<pre><code>tabName = notebook.select()
if tabName:
    textWidget = notebook.nametowidget(tabName) # here, 'notebook' could be any widget
    textWidget.insert(pos, text, tags)
</code></pre>

<p>The <code>nametowidget(name)</code> method maps a Tkinter name to the actual widget. It is a method callable by any actual widget.</p>",6
42,14000944,Finding the currently selected tab of Ttk Notebook,"<p>I have a Ttk Notebook widget containing 8 Frames - so, 8 tabs. Each frame contains a Text widget. I have a button outside the Notebook widget, and I want to insert text into the current tabs Text widget when this button is pressed.</p>

<p>This would seem to require working out which widget in the Notebook is currently selected, but I can't seem to find how to do this. How would I find the currently selected tab?</p>

<p>Alternatively, how can I implement what I want to?</p>

<p>If it helps, here's the code for my notebook:</p>

<pre><code>self.nb = Notebook(master)
self.nb.pack(fill='both', expand='yes', padx=10, pady=10)
self.frames = []
self.texts = []
for i in xrange(8):
  self.frames.append(Frame())
  self.nb.add(self.frames[i])
  self.texts.append(Text(self.frames[i]))
  self.texts[i].pack(fill='both')
</code></pre>",python|tkinter|ttk,"<p>You can get currently selected tab using the <code>""current""</code> keyword:</p>

<pre><code>noteBook.index(""current"")
</code></pre>

<p>Check this website:
<a href=""https://docs.python.org/2/library/ttk.html#tab-identifiers"" rel=""noreferrer"">https://docs.python.org/2/library/ttk.html#tab-identifiers</a>
24.2.5.3. Tab Identifiers</p>",10
43,14000944,Finding the currently selected tab of Ttk Notebook,"<p>I have a Ttk Notebook widget containing 8 Frames - so, 8 tabs. Each frame contains a Text widget. I have a button outside the Notebook widget, and I want to insert text into the current tabs Text widget when this button is pressed.</p>

<p>This would seem to require working out which widget in the Notebook is currently selected, but I can't seem to find how to do this. How would I find the currently selected tab?</p>

<p>Alternatively, how can I implement what I want to?</p>

<p>If it helps, here's the code for my notebook:</p>

<pre><code>self.nb = Notebook(master)
self.nb.pack(fill='both', expand='yes', padx=10, pady=10)
self.frames = []
self.texts = []
for i in xrange(8):
  self.frames.append(Frame())
  self.nb.add(self.frames[i])
  self.texts.append(Text(self.frames[i]))
  self.texts[i].pack(fill='both')
</code></pre>",python|tkinter|ttk,"<p>You can retrieve the selected tab through <code>select</code> method. However, this method returns a tab_id which is not much useful as is. <code>index</code> convert it to the number of the selected tab.</p>

<pre><code>&gt;&gt;&gt; nb.select()
'.4299842480.4300630784'
&gt;&gt;&gt; nb.index(nb.select())
2
</code></pre>

<p>Note that you coud also get more information about the selected tab using <code>tab</code></p>

<pre><code>&gt;&gt;&gt; nb.tab(nb.select(), ""text"")
'mytab2'
</code></pre>

<p>You might look at Notebook reference documentation : <a href=""http://docs.python.org/3/library/tkinter.ttk.html#notebook"" rel=""noreferrer"">http://docs.python.org/3/library/tkinter.ttk.html#notebook</a></p>",35
44,14104462,Using python to type into a website,"<p>For example, how would I write a program that opens up facebook and posts a status? I'm trying to learn how to use python to duplicate normal user actions.</p>",python,"<p>Facebook has an <a href=""https://developers.facebook.com/docs/"" rel=""nofollow"">API</a> you could use (it also has a <a href=""https://github.com/pythonforfacebook/facebook-sdk/"" rel=""nofollow"">module for Python</a>) – this would be the ""right way"" for most of the use cases. Though it wouldn't be the same as ""normal user actions"", Facebook will distinct between a user using a browser to do things and an application using an API.</p>

<p>If you want to automate your software to browse a website, especially AJAX-y one like Facebook, I'd recommend you to look into <a href=""http://seleniumhq.org/"" rel=""nofollow"">Selenium</a> – it's a browser automation framework that's available for many languages, including Python.</p>",3
45,14104462,Using python to type into a website,"<p>For example, how would I write a program that opens up facebook and posts a status? I'm trying to learn how to use python to duplicate normal user actions.</p>",python,"<p>If you looking for ""normal user actions"", maybe you find this <a href=""http://facebookbot.rubyforge.org/"" rel=""nofollow"">http://facebookbot.rubyforge.org/</a> useful. it's facebook-bot written in ruby. It's old, but the principles are still the same.</p>",0
46,38878504,Decode a base64 string to a decimal string,"<p>I have a string say <code>FhY=</code> which has been encoded to hex. So when run</p>

<pre><code>&gt;&gt;&gt; b6 = 'FhY='
&gt;&gt;&gt; b6.decode('base64')
'\x16\x16'
</code></pre>

<p>This is a hex string that once converted should be <code>22 22</code>. This result has been proven on the site <a href=""https://conv.darkbyte.ru/"" rel=""nofollow noreferrer"">https://conv.darkbyte.ru/</a>. However, I cannot seem to do a proper conversion from base64 to decimal representation. Some of the challenges I am facing are </p>

<ol>
<li>Expectation of decimal being an int. I just want base 10</li>
<li>Incorrect values. I have tried the following conversions <code>base64 &gt; base16</code>(<a href=""https://stackoverflow.com/questions/22010277/convert-a-base64-encoded-string-to-binary"">Convert a base64 encoded string to binary</a>), <code>base64 &gt;  binary &gt; decimal</code>(<a href=""https://stackoverflow.com/questions/209513/convert-hex-string-to-int-in-python"">Convert hex string to int in Python</a>) both of which have failed. </li>
</ol>

<p>Please assist.</p>",python|string|encoding|base64,"<p>You need to convert each byte from the decoded string to its decimal value. So this should solve it:</p>

<pre class=""lang-py prettyprint-override""><code>b6 = 'FhY='
' '.join([ str(ord(c)) for c in b6.decode('base64') ])
</code></pre>

<p>Results in <code>22 22</code></p>",3
47,38834118,Split and parse (to new file) string every nth character iterating over starting character - python,"<p>I asked a more general approach to this problem in a <a href=""https://stackoverflow.com/questions/38727914/split-python-string-every-nth-character-iterating-over-starting-character"">previous post</a> but I am getting stuck with trying to parse out my results to individual files. I want to iterate over a long string, starting at position 1 (python 0) and print out every 100 characters. Then, I want move over one character and start at position 2 (python 1) and repeat the process until I reach the last 100 characters. I want to parse each ""100"" line chunk into a new file. Here is what I am currently working with:</p>

<pre><code>seq = 7524       # I get this number from a raw_input 
read_num=100

for raw_reads in range(100):
    def nlength_parts(seq,read_num):
        return map(''.join,zip(*[seq[i:] for i in range(read_num)]))


f = open('read' + str(raw_reads), 'w')
f.write(""read"" '\n')
f.write(nlength_parts(seq,read_num))
f.close
</code></pre>

<p>The error I am constantly getting now it</p>

<pre><code>f.write(nlength_parts(seq,read_num))
TypeError: expected a character buffer object
</code></pre>

<p>Having some issues, any help would be greatly appreciated!</p>

<hr>

<p>After some help, I have made some changes but still not working properly:</p>

<pre><code>seq = 7524       # I get this number from a raw_input 
read_num=100

def nlength_parts(seq,read_num):
    return map(''.join,zip(*[seq[i:] for i in range(read_num)]))

for raw_reads in range(100):   # Should be gene length - 100
    f = open('read' + str(raw_reads), 'w')
    f.write(""read"" + str(raw_reads))
    f.write(nlength_parts)
    f.close
</code></pre>

<hr>

<p>I may have left out some important variables and definitions to keep my post short but it has caused confusion. I have pasted my entire code below.</p>

<pre><code>#! /usr/bin/env python

import sys,os
import random
import string

raw = raw_input(""Text file: "" )

with open(raw) as f:
    joined = """".join(line.strip() for line in f)
    f = open(raw + '.txt', 'w')
    f.write(joined)
    f.closed

seq = str(joined)
read_num = 100

def nlength_parts(seq,read_num):
    return map(''.join,zip(*[seq[i:] for i in range(read_num)]))

for raw_reads in range(100):   # ideally I want range to be len(seq)-100
    f = open('read' + str(raw_reads), 'w')
    f.write(""read"" + str(raw_reads))
    f.write('\n')
    f.write(str(nlength_parts))
    f.close
</code></pre>",python|loops|parsing,"<h2>Edit in response to clarifying comment:</h2>

<p>Essentially, you want a rolling window of your string. Say <code>long_string = ""012345678901234567890123456789...""</code> for a total length of 100. </p>

<pre><code>In [18]: long_string
Out[18]: '0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789'

In [19]: window = 10

In [20]: for i in range(len(long_string) - window +1):
   .....:     chunk = long_string[i:i+window]
   .....:     print(chunk)
   .....:     with open('chunk_' + str(i+1) + '.txt','w') as f:
   .....:         f.write(chunk)
   .....:         
0123456789
1234567890
2345678901
3456789012
4567890123
5678901234
6789012345
7890123456
8901234567
9012345678
0123456789
1234567890
2345678901
3456789012
4567890123
5678901234
6789012345
7890123456
8901234567
9012345678
0123456789
1234567890
2345678901
3456789012
4567890123
5678901234
6789012345
7890123456
8901234567
9012345678
0123456789
1234567890
2345678901
3456789012
4567890123
5678901234
6789012345
7890123456
8901234567
9012345678
0123456789
1234567890
2345678901
3456789012
4567890123
5678901234
6789012345
7890123456
8901234567
9012345678
0123456789
1234567890
2345678901
3456789012
4567890123
5678901234
6789012345
7890123456
8901234567
9012345678
0123456789
1234567890
2345678901
3456789012
4567890123
5678901234
6789012345
7890123456
8901234567
9012345678
0123456789
1234567890
2345678901
3456789012
4567890123
5678901234
6789012345
7890123456
8901234567
9012345678
0123456789
1234567890
2345678901
3456789012
4567890123
5678901234
6789012345
7890123456
8901234567
9012345678
0123456789
</code></pre>

<p>Finally,</p>

<pre><code>In [21]: ls
chunk_10.txt  chunk_20.txt  chunk_30.txt  chunk_40.txt  chunk_50.txt  chunk_60.txt  chunk_70.txt  chunk_80.txt  chunk_90.txt
chunk_11.txt  chunk_21.txt  chunk_31.txt  chunk_41.txt  chunk_51.txt  chunk_61.txt  chunk_71.txt  chunk_81.txt  chunk_91.txt
chunk_12.txt  chunk_22.txt  chunk_32.txt  chunk_42.txt  chunk_52.txt  chunk_62.txt  chunk_72.txt  chunk_82.txt  chunk_9.txt
chunk_13.txt  chunk_23.txt  chunk_33.txt  chunk_43.txt  chunk_53.txt  chunk_63.txt  chunk_73.txt  chunk_83.txt
chunk_14.txt  chunk_24.txt  chunk_34.txt  chunk_44.txt  chunk_54.txt  chunk_64.txt  chunk_74.txt  chunk_84.txt
chunk_15.txt  chunk_25.txt  chunk_35.txt  chunk_45.txt  chunk_55.txt  chunk_65.txt  chunk_75.txt  chunk_85.txt
chunk_16.txt  chunk_26.txt  chunk_36.txt  chunk_46.txt  chunk_56.txt  chunk_66.txt  chunk_76.txt  chunk_86.txt
chunk_17.txt  chunk_27.txt  chunk_37.txt  chunk_47.txt  chunk_57.txt  chunk_67.txt  chunk_77.txt  chunk_87.txt
chunk_18.txt  chunk_28.txt  chunk_38.txt  chunk_48.txt  chunk_58.txt  chunk_68.txt  chunk_78.txt  chunk_88.txt
chunk_19.txt  chunk_29.txt  chunk_39.txt  chunk_49.txt  chunk_59.txt  chunk_69.txt  chunk_79.txt  chunk_89.txt
chunk_1.txt   chunk_2.txt   chunk_3.txt   chunk_4.txt   chunk_5.txt   chunk_6.txt   chunk_7.txt   chunk_8.txt
</code></pre>

<h2>Original response</h2>

<p>I would just treat the string like a file. This lets you avoid any slicing headaches and is pretty straightforward because the file API lets you ""read"" in chunks easily.</p>

<pre><code>In [1]: import io

In [2]: long_string = 'a'*100 + 'b'*100 + 'c'*100 + 'e'*88

In [3]: print(long_string)
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccceeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee

In [4]: string_io = io.StringIO(long_string)

In [5]: chunk = string_io.read(100)

In [6]: chunk_no = 1

In [7]: while chunk:
   ....:     print(chunk)
   ....:     with open('chunk_' + str(chunk_no) + '.txt','w') as f:
   ....:         f.write(chunk)
   ....:     chunk = string_io.read(100)
   ....:     chunk_no += 1
   ....:     
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
</code></pre>

<p>Note, I'm using ipython terminal, so you can use terminal commands inside the interpreter session!</p>

<pre><code>In [8]: ls chunk*
chunk_1.txt  chunk_2.txt  chunk_3.txt  chunk_4.txt

In [9]: cat chunk_1.txt
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
In [10]: cat chunk_2.txt
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
In [11]: cat chunk_3.txt
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
In [12]: cat chunk_4.txt
eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
In [13]: 
</code></pre>",0
48,38834118,Split and parse (to new file) string every nth character iterating over starting character - python,"<p>I asked a more general approach to this problem in a <a href=""https://stackoverflow.com/questions/38727914/split-python-string-every-nth-character-iterating-over-starting-character"">previous post</a> but I am getting stuck with trying to parse out my results to individual files. I want to iterate over a long string, starting at position 1 (python 0) and print out every 100 characters. Then, I want move over one character and start at position 2 (python 1) and repeat the process until I reach the last 100 characters. I want to parse each ""100"" line chunk into a new file. Here is what I am currently working with:</p>

<pre><code>seq = 7524       # I get this number from a raw_input 
read_num=100

for raw_reads in range(100):
    def nlength_parts(seq,read_num):
        return map(''.join,zip(*[seq[i:] for i in range(read_num)]))


f = open('read' + str(raw_reads), 'w')
f.write(""read"" '\n')
f.write(nlength_parts(seq,read_num))
f.close
</code></pre>

<p>The error I am constantly getting now it</p>

<pre><code>f.write(nlength_parts(seq,read_num))
TypeError: expected a character buffer object
</code></pre>

<p>Having some issues, any help would be greatly appreciated!</p>

<hr>

<p>After some help, I have made some changes but still not working properly:</p>

<pre><code>seq = 7524       # I get this number from a raw_input 
read_num=100

def nlength_parts(seq,read_num):
    return map(''.join,zip(*[seq[i:] for i in range(read_num)]))

for raw_reads in range(100):   # Should be gene length - 100
    f = open('read' + str(raw_reads), 'w')
    f.write(""read"" + str(raw_reads))
    f.write(nlength_parts)
    f.close
</code></pre>

<hr>

<p>I may have left out some important variables and definitions to keep my post short but it has caused confusion. I have pasted my entire code below.</p>

<pre><code>#! /usr/bin/env python

import sys,os
import random
import string

raw = raw_input(""Text file: "" )

with open(raw) as f:
    joined = """".join(line.strip() for line in f)
    f = open(raw + '.txt', 'w')
    f.write(joined)
    f.closed

seq = str(joined)
read_num = 100

def nlength_parts(seq,read_num):
    return map(''.join,zip(*[seq[i:] for i in range(read_num)]))

for raw_reads in range(100):   # ideally I want range to be len(seq)-100
    f = open('read' + str(raw_reads), 'w')
    f.write(""read"" + str(raw_reads))
    f.write('\n')
    f.write(str(nlength_parts))
    f.close
</code></pre>",python|loops|parsing,"<p>A few things:</p>

<ol>
<li>You define the variables <code>seq</code> and <code>read_num</code> in the global scope, and then also use the same parameters in your function. What you should be doing is have the names of the parameters in the function definition be different, and then passing those two variables to the function when you call it.</li>
<li>When you call nlength_parts, you don't pass it either of the parameters you defined it with and you also lack (). Fix that in conjunction with #1.</li>
<li>You don't seem to define the string you are slicing. You slice <code>seq</code> in your function, but <code>seq</code> is an integer in your code. Is seq the processed output of the file you were talking about in your comment? If so, is it much larger in your actual code?</li>
</ol>

<p>That being said, I believe this code will do what you want it to do:</p>

<pre><code>def nlength_parts(myStr, length, paddingChar="" ""):
    if(len(myStr) &lt; length):
        myStr += paddingChar * (length - len(myStr))
    sequences = []
    for i in range(0, len(myStr)-length + 1):
    sequences.append(myStr[i:i+length])
    return(sequences)
foo = ""ABCDEFGHIJKLMNOPQRSTUVWXYZ""
nlengthfoo = nlength_parts(foo, 10)
for x in range(0, length(nlengthfoo):
    with open(""read"" + (x+1), ""w"") as f:
        f.write(nlengthfoo[x])
</code></pre>

<p>EDIT: Apologies, changed my code in response to your comment.</p>",2
49,17715587,Is there a C# equivalent to python's type() function?,"<p>I am learning <code>C#</code> and have a very basic background in <code>Python</code> where I was familiar with the <a href=""http://docs.python.org/2/library/functions.html#type"" rel=""nofollow"">type() function</a> where the data type of a variable can be returned via:</p>

<p><code>type(myVariable)</code></p>

<p>Is there a <code>C#</code> equivalent to this function?</p>

<p>I am asking in the context of wanting to use such a function on a C# variable that has been created using <code>var</code> eg:</p>

<p><code>var myNewVariable = ""Hello!""</code></p>

<p>I am using explicit data types in general eg:</p>

<p><code>string myNewString = ""Hello!""</code></p>

<p>But I am just wondering what data type a variable created using <code>var</code> defaults to and thought something similar to <code>type()</code> would be a good way to check out what was happening '<strong>under the hood</strong>` so to speak.  </p>",c#|python|types,"<p>You can try using <a href=""http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx"" rel=""nofollow""><em>GetType()</em></a> method:</p>

<pre><code>Type myType = myVariable.GetType();
</code></pre>

<p>For instance</p>

<pre><code>String typeName = ""My String"".GetType().Name; // &lt;- ""String""
</code></pre>",6
50,17715587,Is there a C# equivalent to python's type() function?,"<p>I am learning <code>C#</code> and have a very basic background in <code>Python</code> where I was familiar with the <a href=""http://docs.python.org/2/library/functions.html#type"" rel=""nofollow"">type() function</a> where the data type of a variable can be returned via:</p>

<p><code>type(myVariable)</code></p>

<p>Is there a <code>C#</code> equivalent to this function?</p>

<p>I am asking in the context of wanting to use such a function on a C# variable that has been created using <code>var</code> eg:</p>

<p><code>var myNewVariable = ""Hello!""</code></p>

<p>I am using explicit data types in general eg:</p>

<p><code>string myNewString = ""Hello!""</code></p>

<p>But I am just wondering what data type a variable created using <code>var</code> defaults to and thought something similar to <code>type()</code> would be a good way to check out what was happening '<strong>under the hood</strong>` so to speak.  </p>",c#|python|types,"<p>You have couple of options here</p>

<ol>
<li>typeof. typeof takes a type name (which you specify at compile time).</li>
<li>GetType gets the runtime type of an instance.</li>
</ol>

<p>Example</p>

<pre><code>B a = new B();
a.GetType() == typeof(B) 
</code></pre>

<p>Note: <strong>a</strong> is an instance of an object <strong>B</strong>. Whereas B is a type.</p>",1
51,17741544,Rewriting nested if-statements in a more Pythonic fashion,"<p>I'm working on a function that, given a sequence, tries to find said sequence within a list and should then return the list item immediately after that sequence terminates.</p>

<p>Currently this code does return the list item immediately after the end of the sequence, however I'm not to happy with having this many nested if-statements and would love to rewrite it but I can't figure out how to go about it as it is quite unlike anything I've ever written in the past and feel a bit out of practice.</p>

<pre><code>def sequence_in_list(seq, lst):
    m, n = len(lst), len(seq)
    for i in xrange(m):
        for j in xrange(n):
            if lst[i] == seq[j]:
                if lst[i+1] == seq[j+1]:
                    if lst[i+2] == seq[j+2]:
                        return lst[i+3]
</code></pre>

<p>(My intention is to then extend this function so that if that sequence occurs more than once throughout the list it should return the subsequent item that has happened the most often after the sequence)</p>",python|list|if-statement|nested|pattern-matching,"<p>I would do this with a generator and slicing:</p>

<pre><code>sequence = [1, 2, 3, 5, 1, 2, 3, 6, 1, 2, 3]
pattern = [1, 2, 3]

def find_item_after_pattern(sequence, pattern):
    n = len(pattern)

    for index in range(0, len(sequence) - n):
        if pattern == sequence[index:index + n]:
            yield sequence[index + n]

for item in find_item_after_pattern(sequence, pattern):
    print(item)
</code></pre>

<p>And you'll get:</p>

<pre><code>5
6
</code></pre>

<p>The function isn't too efficient and won't work for infinite sequences, but it's short and generic.</p>",2
52,17741544,Rewriting nested if-statements in a more Pythonic fashion,"<p>I'm working on a function that, given a sequence, tries to find said sequence within a list and should then return the list item immediately after that sequence terminates.</p>

<p>Currently this code does return the list item immediately after the end of the sequence, however I'm not to happy with having this many nested if-statements and would love to rewrite it but I can't figure out how to go about it as it is quite unlike anything I've ever written in the past and feel a bit out of practice.</p>

<pre><code>def sequence_in_list(seq, lst):
    m, n = len(lst), len(seq)
    for i in xrange(m):
        for j in xrange(n):
            if lst[i] == seq[j]:
                if lst[i+1] == seq[j+1]:
                    if lst[i+2] == seq[j+2]:
                        return lst[i+3]
</code></pre>

<p>(My intention is to then extend this function so that if that sequence occurs more than once throughout the list it should return the subsequent item that has happened the most often after the sequence)</p>",python|list|if-statement|nested|pattern-matching,"<p>You can combine list comprehension with slicing to make comparing more readable:</p>

<pre><code>n, m = len(lst), len(seq)
[lst[j+3] for i in range(m-2) for j in range(n-2) if seq[i:i+3] == lst[j:j+3]]
</code></pre>

<p>Of course there are more efficient ways to do it, but this is simple, short and python styled.</p>",0
53,17741544,Rewriting nested if-statements in a more Pythonic fashion,"<p>I'm working on a function that, given a sequence, tries to find said sequence within a list and should then return the list item immediately after that sequence terminates.</p>

<p>Currently this code does return the list item immediately after the end of the sequence, however I'm not to happy with having this many nested if-statements and would love to rewrite it but I can't figure out how to go about it as it is quite unlike anything I've ever written in the past and feel a bit out of practice.</p>

<pre><code>def sequence_in_list(seq, lst):
    m, n = len(lst), len(seq)
    for i in xrange(m):
        for j in xrange(n):
            if lst[i] == seq[j]:
                if lst[i+1] == seq[j+1]:
                    if lst[i+2] == seq[j+2]:
                        return lst[i+3]
</code></pre>

<p>(My intention is to then extend this function so that if that sequence occurs more than once throughout the list it should return the subsequent item that has happened the most often after the sequence)</p>",python|list|if-statement|nested|pattern-matching,"<p>Since you are comparing consecutive indexes, <em>and assuming <code>lst</code> and <code>seq</code> are of the same type</em>, you can use slicing:</p>

<pre><code>def sequence_in_list(seq, lst):
    m, n = len(lst), len(seq)
    for i in xrange(m):
        for j in xrange(n):
            if lst[i:i+3] == seq[j:j+3]:
                return lst[i+3]
</code></pre>

<p>If the sequences are of different kind you should convert to a common type before doing the comparison(e.g. <code>lst[i:i+3] == list(seq[j:j+3])</code> would work if <code>seq</code> is a string and <code>lst</code> is a list).</p>

<p>Alternatively, if the sequences do not support slicing, you can use the built-in <code>all</code> to check for more conditions:</p>

<pre><code>def sequence_in_list(seq, lst):
    m, n = len(lst), len(seq)
    for i in xrange(m):
        for j in xrange(n):
            if all(lst[i+k] == seq[j+k] for k in range(3)):
                return lst[i+3]
</code></pre>

<p>If you want to extend the check over 10 indices instead of 3, simply change <code>range(3)</code> to <code>range(10)</code>.</p>

<p>Side note: your original code would raise an <code>IndexError</code> at some point, since you access <code>list[i+1]</code> where <code>i</code> may be <code>len(list) - 1</code>. The above code doesn't produce any errors, since slicing may produce a slice shorter than the difference of the indices, meainig that <code>seq[j:j+3]</code> can have less than 3 elements. If this is a problem you should adjust the indexes on which you are iterating over.</p>

<p>Last remark: don't use the name <code>list</code> since it shadows a built-in name.</p>",1
54,17937249,"""Fire and forget"" a process from a Python script","<p>How do I start a process (another Python script, for example) from a Python script so the ""child"" process is completely detached from the ""parent"", so the parent can a) continue on its merry way without waiting for child to finish and b) can be terminated without terminating the child process?</p>

<p><strong>Parent:</strong></p>

<pre><code>import os

print ""Parent started""
os.system(""./child.py"")
print ""Parent finished""
</code></pre>

<p><strong>Child:</strong></p>

<pre><code>import time

print ""Child started""
time.sleep(10)
print ""Child finished""
</code></pre>

<p>Running <code>parent.py</code> prints:</p>

<pre><code>Parent started
Child started
Child finished
Parent finished
</code></pre>

<p>What I want it to print:</p>

<pre><code>Parent started
Child started
Parent finished
(seconds later)
Child finished
</code></pre>",python|linux|subprocess,"<p>Using <code>asyncio</code> you can write a simple decorator as <code>@background</code></p>

<pre><code>import asyncio
import time

def background(f):
    def wrapped(*args, **kwargs):
        return asyncio.get_event_loop().run_in_executor(None, f, *args, *kwargs)

    return wrapped

@background
def foo():
    time.sleep(1)
    print(""foo() completed"")

print(""Hello"")
foo()
print(""I didn't wait for foo()"")
</code></pre>

<p>Produces</p>

<pre><code>&gt;&gt;&gt; Hello
&gt;&gt;&gt; I didn't wait for foo()
&gt;&gt;&gt; foo() completed
</code></pre>",3
55,17937249,"""Fire and forget"" a process from a Python script","<p>How do I start a process (another Python script, for example) from a Python script so the ""child"" process is completely detached from the ""parent"", so the parent can a) continue on its merry way without waiting for child to finish and b) can be terminated without terminating the child process?</p>

<p><strong>Parent:</strong></p>

<pre><code>import os

print ""Parent started""
os.system(""./child.py"")
print ""Parent finished""
</code></pre>

<p><strong>Child:</strong></p>

<pre><code>import time

print ""Child started""
time.sleep(10)
print ""Child finished""
</code></pre>

<p>Running <code>parent.py</code> prints:</p>

<pre><code>Parent started
Child started
Child finished
Parent finished
</code></pre>

<p>What I want it to print:</p>

<pre><code>Parent started
Child started
Parent finished
(seconds later)
Child finished
</code></pre>",python|linux|subprocess,"<p>Answering my own question: I ended up simply using <code>os.system</code> with <code>&amp;</code> at the end of command as <a href=""https://stackoverflow.com/questions/17937249/fire-and-forget-a-process-from-a-python-script#comment26211780_17937249"">suggested by @kevinsa</a>. This allows the parent process to be terminated without the child being terminated.</p>
<p>Here's some code:</p>
<p><strong>child.py</strong></p>
<pre><code>#!/usr/bin/python

import time
print &quot;Child started&quot;
time.sleep(10)
print &quot;Child finished&quot;
</code></pre>
<p><strong>parent.py</strong>, using subprocess.Popen:</p>
<pre><code>#!/usr/bin/python

import subprocess
import time

print &quot;Parent started&quot;
subprocess.Popen(&quot;./child.py&quot;)
print &quot;(child started, sleeping)&quot;

time.sleep(5)

print &quot;Parent finished&quot;
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>$ ./parent.py
Parent started
(child started, sleeping)
Child started
^CTraceback (most recent call last):
Traceback (most recent call last):
  File &quot;./child.py&quot;, line 5, in &lt;module&gt;
  File &quot;./parent.py&quot;, line 13, in &lt;module&gt;
        time.sleep(10)
time.sleep(5)
KeyboardInterrupt
KeyboardInterrupt
</code></pre>
<ul>
<li>note how the child never finishes if the parent is interrupted with Ctrl-C</li>
</ul>
<p><strong>parent.py</strong>, using os.system and &amp;</p>
<pre><code>#!/usr/bin/python

import os
import time

print &quot;Parent started&quot;
os.system(&quot;./child.py &amp;&quot;)
print &quot;(child started, sleeping)&quot;

time.sleep(5)

print &quot;Parent finished&quot;
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>$ ./parent.py
Parent started
(child started, sleeping)
Child started
^CTraceback (most recent call last):
  File &quot;./parent.py&quot;, line 12, in &lt;module&gt;
    time.sleep(5)
KeyboardInterrupt

$ Child finished
</code></pre>
<p>Note how the child lives beyond the Ctrl-C.</p>",1
56,17937249,"""Fire and forget"" a process from a Python script","<p>How do I start a process (another Python script, for example) from a Python script so the ""child"" process is completely detached from the ""parent"", so the parent can a) continue on its merry way without waiting for child to finish and b) can be terminated without terminating the child process?</p>

<p><strong>Parent:</strong></p>

<pre><code>import os

print ""Parent started""
os.system(""./child.py"")
print ""Parent finished""
</code></pre>

<p><strong>Child:</strong></p>

<pre><code>import time

print ""Child started""
time.sleep(10)
print ""Child finished""
</code></pre>

<p>Running <code>parent.py</code> prints:</p>

<pre><code>Parent started
Child started
Child finished
Parent finished
</code></pre>

<p>What I want it to print:</p>

<pre><code>Parent started
Child started
Parent finished
(seconds later)
Child finished
</code></pre>",python|linux|subprocess,"<p>Since you mentioned <code>os.system</code>, I think it's worth to mention that you should have used <code>os.spawn*</code> with mode <code>P_NOWAIT</code> to achieve the ""forget"" part. </p>

<p>But <code>subprocess</code> module provides replacements for <code>os.system</code>, <code>os,spawn*</code>,etc so you should use that instead like so</p>

<pre><code>import subprocess
p = subprocess.Popen(""./child.py"")
print ""pid = "", p.pid
</code></pre>

<p>See <a href=""https://docs.python.org/2/library/subprocess.html#replacing-the-os-spawn-family"" rel=""noreferrer"">Replacing os.spawn with subprocess.Popen</a></p>

<p>As I explained in the comments both processes <code>parent.py</code> and <code>child.py</code> are still on the same process group and therefore the terminal will forward signals (like <code>Ctrl-C</code>)  to all process in the foreground process group so both will get killed when you <code>Ctrl-C</code>.  So if you don't want that you can force <code>child.py</code> to be in a new process group with the following: </p>

<pre><code>#!/usr/bin/env python
import subprocess
import time
import os
p = subprocess.Popen(""./child.py"", preexec_fn=os.setsid)
print ""pid = "", p.pid
time.sleep(30) # Ctrl-C at this point will not kill child.py
print ""parent exit""
</code></pre>",11
57,17600942,"How to make print() override work ""globally""","<p>From <a href=""https://stackoverflow.com/questions/12609705/how-to-override-python-builtins-with-an-import-statement"">How to override python builtins with an import statement</a> I obtained the following code:</p>

<pre><code>from __future__ import print_function
def print(*args, **kwargs):
    .
    . some intervening logic
    .
    return __builtins__.print(*args, **kwargs)
</code></pre>

<p>This code works fine, but has module scope.  That is, if there are print statements within this file they work as expected, going through the print() function as defined.  However, importing it (from foo import *) has no effect within the module that imported it.</p>

<p>If I want to override the print function ""globally"" how is this best done.  Ideally:</p>

<pre><code>from MyOverrides import *
.
.
.
class foo():
    .
    .
    def bar( self ):
        print( ""this is my overridden print statement"" )
</code></pre>

<p>What am I missing about <strong>future</strong>, overrides, and print() here?</p>

<p>My environment is 2.6 and forward, but not 3.0.</p>",python|overloading,"<p>You can't (and shouldn't) have a global override that turns on a future statement. Since future statements affect the way a Python source file is parsed and compiled, before Python can even tell that <code>MyOverrides</code> defines a print function, all future statements a module uses must be explicit. You can't import a future statement from another module.</p>

<p>The safest way to replace the print function is to explicitly use <code>from __future__ import print_function</code> in all your modules, then import a replacement for <code>print</code> from one of your modules. Don't replace <code>__builtin__.print</code>.</p>

<p>If you want to affect all output to stdout, whether by print statement or print function, anywhere at all, you can replace <code>sys.stdout</code> with a wrapper.</p>

<pre><code>import sys

stdout = sys.stdout

class new_stdout(object):
    def write(*args, **kwargs):
        # do whatever
        stdout.write(*args, **kwargs)

sys.stdout = new_stdout()
</code></pre>

<p>However, this is probably a bad idea, and it won't affect print statements or print functions that use an explicit file argument.</p>",1
58,17600942,"How to make print() override work ""globally""","<p>From <a href=""https://stackoverflow.com/questions/12609705/how-to-override-python-builtins-with-an-import-statement"">How to override python builtins with an import statement</a> I obtained the following code:</p>

<pre><code>from __future__ import print_function
def print(*args, **kwargs):
    .
    . some intervening logic
    .
    return __builtins__.print(*args, **kwargs)
</code></pre>

<p>This code works fine, but has module scope.  That is, if there are print statements within this file they work as expected, going through the print() function as defined.  However, importing it (from foo import *) has no effect within the module that imported it.</p>

<p>If I want to override the print function ""globally"" how is this best done.  Ideally:</p>

<pre><code>from MyOverrides import *
.
.
.
class foo():
    .
    .
    def bar( self ):
        print( ""this is my overridden print statement"" )
</code></pre>

<p>What am I missing about <strong>future</strong>, overrides, and print() here?</p>

<p>My environment is 2.6 and forward, but not 3.0.</p>",python|overloading,"<p>Another stackoverflow user provided most of the answer, but then apparently deleted it (?).  Here is a working solution.  Once again, I recognize this isn't necessarily a best practice, but it can be handy in certain situations.</p>

<p>Module MyOverrides.py:</p>

<pre><code>from __future__ import print_function
import __builtin__

builtin_print = __builtin__.print
def print(*args, **kwargs):
    .
    .... whatever code you need here
    .
    return builtin_print(*args, **kwargs)
__builtin__.print = print
</code></pre>

<p>Module test.py:</p>

<pre><code>from __future__ import print_function
from MyOverrides import *
.
.
.
</code></pre>

<p>As pointed out by another user, <strong>future</strong> import needs to happen in every module that intends to use future functionality.</p>

<p>Thanks to user @kindall who answered and then apparently withdrew the answer.</p>",1
59,17580162,Is there a reason for python regex not to compile r'(\s*)+'?,"<p>I don't understand why <code>'(\s*)+'</code> gives an error <code>'nothing to repeat'</code>. At the same time <code>'(\s?)+'</code> goes just fine.</p>

<p>I've discovered that this problem has been known about quite for some time (for example <a href=""https://stackoverflow.com/questions/3675144/regex-error-nothing-to-repeat"">regex error - nothing to repeat</a> ) but I still see it in Python 3.3.1.</p>

<p>So I am wondering if there is a rational explanation for this behavior.</p>

<p>In reality I want to match a line of repeated words or numbers, for example:</p>

<pre><code>'foo foo foo foo'
</code></pre>

<p>I've come up with this:</p>

<pre><code>'(\w+)\s+(\1\s*)+'
</code></pre>

<p>It failed because of the second group: <code>(\1\s*)+</code>
In most cases I would probably not have more than 1 space between words so <code>(\1\s?)+</code> would work. For practical purposes this option also should work <code>(\1\s{0,1000})+</code></p>

<p><strong>Update:</strong>
I think I should add that I've seen the problem in python only.
In perl it works:</p>

<pre><code>`('foo foo foo foo' =~ /(\w+)\s+(\1\s*)+/) `
</code></pre>

<p>Not sure it's equivalent but vim also works:</p>

<pre><code>`\(\&lt;\w\+\&gt;\)\_s\+\(\1\_s*\)\+`
</code></pre>

<p><strong>Update2:</strong>
I found another implementation of regex for python which is said to replace current re someday. I checked and the error doesn't occur for the above problematic cases. This module has to be installed separately. It can be downloaded <a href=""https://pypi.python.org/pypi/regex"" rel=""nofollow noreferrer"">here</a> or via pypi </p>",python|regex,"<p>The problem that python has with this is primarily the null issue brought up in the linked post. If you're going to have at least one character I suggest instead using:</p>

<pre><code>(\s+)+
</code></pre>

<p>That said, it also doesn't really make sense if you ask for <code>(\s*)+</code> with the idea that <code>+</code> requires something to exist, and <code>*</code> does not. It doesn't quite make sense to match <code>?</code> either, but you can resolve it mentally by saying it's an optional match meaning that if it doesn't find one it moves on, rather than <code>*</code> which interprets nothing as a matched pattern.</p>

<p>However, if you really want to check what Python's issue with something is I suggest playing around with ranges. For instance, I came to my conclusion by using these two examples:</p>

<pre><code>re.compile(""(\s{1,})+"")
</code></pre>

<p>which is fine</p>

<pre><code>re.compile(""(\s{0,})+"")
</code></pre>

<p>which fails in the same manner.</p>

<p>At the very least this means it is not a ""bug"" in Python. It is a conscious design decision that acts on every regex pattern that conceptually falls into this same pit. My guess (checked in a few different environments) is that <code>(\s{0,})+</code> will reliably fail because it explicitly repeats a potentially null element.</p>

<p>However, it seems that a number of environments use <code>*</code> to indicate that a match is optional, and python does not follow this choice. It makes sense for many cases, but occasionally leads to weird behaviour. I think Guido made the right choice here, as having an inconsistent space presence means you've violated the pumping lemma and your pattern is no longer context free.</p>

<p>In this case it probably wouldn't matter much, but it means there would inevitably be an ambiguity in that regex that couldn't be resolved.</p>

<p>So you had a problem, then you chose to use regex to solve that problem. Now you have 2 problems, C'est la vie.</p>",6
60,17580162,Is there a reason for python regex not to compile r'(\s*)+'?,"<p>I don't understand why <code>'(\s*)+'</code> gives an error <code>'nothing to repeat'</code>. At the same time <code>'(\s?)+'</code> goes just fine.</p>

<p>I've discovered that this problem has been known about quite for some time (for example <a href=""https://stackoverflow.com/questions/3675144/regex-error-nothing-to-repeat"">regex error - nothing to repeat</a> ) but I still see it in Python 3.3.1.</p>

<p>So I am wondering if there is a rational explanation for this behavior.</p>

<p>In reality I want to match a line of repeated words or numbers, for example:</p>

<pre><code>'foo foo foo foo'
</code></pre>

<p>I've come up with this:</p>

<pre><code>'(\w+)\s+(\1\s*)+'
</code></pre>

<p>It failed because of the second group: <code>(\1\s*)+</code>
In most cases I would probably not have more than 1 space between words so <code>(\1\s?)+</code> would work. For practical purposes this option also should work <code>(\1\s{0,1000})+</code></p>

<p><strong>Update:</strong>
I think I should add that I've seen the problem in python only.
In perl it works:</p>

<pre><code>`('foo foo foo foo' =~ /(\w+)\s+(\1\s*)+/) `
</code></pre>

<p>Not sure it's equivalent but vim also works:</p>

<pre><code>`\(\&lt;\w\+\&gt;\)\_s\+\(\1\_s*\)\+`
</code></pre>

<p><strong>Update2:</strong>
I found another implementation of regex for python which is said to replace current re someday. I checked and the error doesn't occur for the above problematic cases. This module has to be installed separately. It can be downloaded <a href=""https://pypi.python.org/pypi/regex"" rel=""nofollow noreferrer"">here</a> or via pypi </p>",python|regex,"<p>Slater has given a good overview of the problem, but I just wanted to add that if you think about it, that theoretically matches an infinite number of empty spaces on the first empty space that it encounters. If you <em>could</em> compile that expression, applying it might very well just result in an infinite loop before the first character is even seen. So not only is it not a bug, it's a good thing. </p>",0
61,17655311,Rest API to output in .json,"<p>I am creating a script that will call a rest API in python and spits out the results in <code>JSON</code> format. I am getting some few trace back errors in my code. How can I go about fixing this issue.</p>

<pre><code>'import sitecustomize' failed; use -v for traceback
Traceback (most recent call last):
  File ""/home/Desktop/Sync.py"", line 12, in &lt;module&gt;
    url = urllib2.Request(request)
  File ""/usr/lib/python2.7/urllib2.py"", line 202, in __init__
    self.__original = unwrap(url)
  File ""/usr/lib/python2.7/urllib.py"", line 1057, in unwrap
    url = url.strip()
  File ""/usr/lib/python2.7/urllib2.py"", line 229, in __getattr__
    raise AttributeError, attr
AttributeError: strip
</code></pre>

<p><strong>Here's the code:</strong></p>

<pre><code>import urllib2
import json
url = ""http://google.com""
request = urllib2.Request(url)
request.add_header(""Authorization"",""Basic xxxxxxxxxxxxxxxxxx"")
socket = urllib2.urlopen(request)
data = json.dumps(socket)

hdrs = socket.headers
source = socket.read()
socket.close()

print ""---- Headers -----""
print data
print ""---- Source HTML -----""
print source
print ""---- END -----""

value = 0
for line in source.splitlines():
    if not line.strip():  continue
    if line.startswith(""value=""):
        try:
            value = line.split(""="")
        except IndexError:
            pass
    if value &gt; 0:
        break

open(""some.json"", ""w"").write(""value is: %d"" % value)
</code></pre>",python,"<p>From <a href=""http://docs.python.org/2/library/urllib2.html#urllib2.Request"" rel=""nofollow"">documentation</a> of <code>Request</code> class:</p>

<blockquote>
  <p>url should be a string containing a valid URL.</p>
</blockquote>

<p>You are curretnly passing another <code>Request</code> object to its constructor, so that's the reason for the error you're seeing. The correct way to do this:</p>

<pre><code>request=urllib2.Request( ""http.google.com"")
request.add_header(""Authorization"",""Basic xxxxxxxxxxxxxxxxxxxxxxxx="")
socket = urllib2.urlopen(request)
</code></pre>",0
62,17655311,Rest API to output in .json,"<p>I am creating a script that will call a rest API in python and spits out the results in <code>JSON</code> format. I am getting some few trace back errors in my code. How can I go about fixing this issue.</p>

<pre><code>'import sitecustomize' failed; use -v for traceback
Traceback (most recent call last):
  File ""/home/Desktop/Sync.py"", line 12, in &lt;module&gt;
    url = urllib2.Request(request)
  File ""/usr/lib/python2.7/urllib2.py"", line 202, in __init__
    self.__original = unwrap(url)
  File ""/usr/lib/python2.7/urllib.py"", line 1057, in unwrap
    url = url.strip()
  File ""/usr/lib/python2.7/urllib2.py"", line 229, in __getattr__
    raise AttributeError, attr
AttributeError: strip
</code></pre>

<p><strong>Here's the code:</strong></p>

<pre><code>import urllib2
import json
url = ""http://google.com""
request = urllib2.Request(url)
request.add_header(""Authorization"",""Basic xxxxxxxxxxxxxxxxxx"")
socket = urllib2.urlopen(request)
data = json.dumps(socket)

hdrs = socket.headers
source = socket.read()
socket.close()

print ""---- Headers -----""
print data
print ""---- Source HTML -----""
print source
print ""---- END -----""

value = 0
for line in source.splitlines():
    if not line.strip():  continue
    if line.startswith(""value=""):
        try:
            value = line.split(""="")
        except IndexError:
            pass
    if value &gt; 0:
        break

open(""some.json"", ""w"").write(""value is: %d"" % value)
</code></pre>",python,"<p>You seem to have an issue here:</p>

<pre><code>request=urllib2.Request( ""http.google.com"")
request.add_header(""Authorization"",""Basic xxxxxxxxxxxxxxxxxxxxxxxx="")
url = urllib2.Request(request)
socket = urllib2.urlopen(url)
</code></pre>

<p>You are trying to create a Request object named ""url"" by passing a Request object into the constructor.</p>

<p>See <a href=""http://docs.python.org/2/library/urllib2.html#urllib2.Request"" rel=""nofollow"">http://docs.python.org/2/library/urllib2.html#urllib2.Request</a></p>

<p>Try this:</p>

<pre><code>request=urllib2.Request( ""http.google.com"")
request.add_header(""Authorization"",""Basic xxxxxxxxxxxxxxxxxxxxxxxx="")
socket = urllib2.urlopen(request)
</code></pre>",0
63,24256868,What is the best data structure to store chunks of file in python,"<p>I want to store chunks of file in a list so that later on a can perform some operations with the map function on each chunks. Intuitively I am tempted to to something like below (but it doesn't work): </p>

<pre><code>fi = open(fileName, ""rb"")
data = fi.read()
fi.close()

max = len(data)
block = 1024

tmp = []
for i in range(0, max, block):
    tmp.append(data[i:i+block])
</code></pre>",python,"<p>I'd suggest to read the file by chunks in the first place:</p>

<pre><code>block = 1024
with open(fileName, 'rb') as f:
    tmp = [chunk for chunk in iter(lambda: f.read(block), b'')]
</code></pre>

<p>See the documentation for <a href=""https://docs.python.org/2/library/functions.html#iter"" rel=""nofollow""><code>iter()</code></a>.</p>",4
64,24337483,Appending list B with indices from enumerated list A,"<p>I'm new to python. When I attempt to copy list strings and their indices, to a list variable created by a loop, I'm returned an empty list. However, printing the list before it's copied returns all the data I want. </p>

<p>This website gave me the idea to use a slice b=a[:] (<a href=""http://henry.precheur.org/python/copy_list"" rel=""nofollow"">http://henry.precheur.org/python/copy_list</a>). It also doesn't work when I use this technique b = list(a) from the same website. </p>

<p>My goal is to create a series of lists with only one list for each unique character in a user input string. Each list would begin with the unique character followed by the indices of every occurrence of that character in the original user string.</p>

<pre><code>for i, value in enumerate (xlist):
    exec ""var%i=list()"" %(i)
    exec ""global var%i"" %(i)

def enum():
    global character_count
    global xlist
    for i, value in enumerate (xlist):
        exec ""global var%i"" %(i) 
    for i, value in enumerate(xlist):
        if value==""%s"" %str(xlist[character_count]):
            value=[value]
            value.append(i)
            print value 
            """"""&lt;--This returns a full list""""""
            exec ""var%i=value[:]"" %(i)
            exec ""print var%i"" %(i) 
            """"""&lt;-- This returns an empty list""""""

def enum2():
    global character_count
    global xlength
    while character_count&lt;xlength:
        enum()
        character_count=character_count+1
        continue

enum2()
print var38


""""""output ['?', 38]
   output []
   desired output ['?', 38]
   desired output ['?', 38]""""""
</code></pre>

<p>I'm getting closer to what I want by updating a dictionary.
However, this returns only one index per unique character. I want all the indices. </p>

<p>Should use a set instead of a dictionary to append indices to a key/set? Is this possible with a dictionary?</p>

<pre><code>""""""Output
Input: Hello
{'h': 0, 'e': 1, 'l': 3, 'o': 4}
Desired
{'h': 0, 'e': 1, 'l': [2, 3], 'o': 4}""""""

string=raw_input(""Input: "")
string_lower=string.lower()
string_list=list(string_lower)

string_dict = dict()
for i, j in enumerate(string_list):
    string_dict.update({j:i})
print string_dict
</code></pre>

<p>An answer has been found!</p>",python|list|dictionary|indexing|enumerate,"<p>As an answer to the comment above, a simple way to implement a dictionary of such lists would be this:</p>

<pre><code>string = 'efjseojfgiohgfiosjflk'
list_of_chars = dict()
for n in set(string):
    list_of_chars[n] = [n]*string.count(n)
</code></pre>

<p>The above is rather simple, human-readable, and allows for a stable way to access the newly created lists. It is at least better than using the evil that is <code>eval</code> and <code>exec</code></p>

<p>Edit: I thought you wanted indices, not chars? I realized this afterwards, but apparently this is the 'correct answer'. You've sending mixed messages about what answer you require.</p>

<p>SuperEdit: OK, now you should place your correct answer as <em>the</em> correct answer. Don't give me credit where it's not deserved! :) </p>",0
65,24337483,Appending list B with indices from enumerated list A,"<p>I'm new to python. When I attempt to copy list strings and their indices, to a list variable created by a loop, I'm returned an empty list. However, printing the list before it's copied returns all the data I want. </p>

<p>This website gave me the idea to use a slice b=a[:] (<a href=""http://henry.precheur.org/python/copy_list"" rel=""nofollow"">http://henry.precheur.org/python/copy_list</a>). It also doesn't work when I use this technique b = list(a) from the same website. </p>

<p>My goal is to create a series of lists with only one list for each unique character in a user input string. Each list would begin with the unique character followed by the indices of every occurrence of that character in the original user string.</p>

<pre><code>for i, value in enumerate (xlist):
    exec ""var%i=list()"" %(i)
    exec ""global var%i"" %(i)

def enum():
    global character_count
    global xlist
    for i, value in enumerate (xlist):
        exec ""global var%i"" %(i) 
    for i, value in enumerate(xlist):
        if value==""%s"" %str(xlist[character_count]):
            value=[value]
            value.append(i)
            print value 
            """"""&lt;--This returns a full list""""""
            exec ""var%i=value[:]"" %(i)
            exec ""print var%i"" %(i) 
            """"""&lt;-- This returns an empty list""""""

def enum2():
    global character_count
    global xlength
    while character_count&lt;xlength:
        enum()
        character_count=character_count+1
        continue

enum2()
print var38


""""""output ['?', 38]
   output []
   desired output ['?', 38]
   desired output ['?', 38]""""""
</code></pre>

<p>I'm getting closer to what I want by updating a dictionary.
However, this returns only one index per unique character. I want all the indices. </p>

<p>Should use a set instead of a dictionary to append indices to a key/set? Is this possible with a dictionary?</p>

<pre><code>""""""Output
Input: Hello
{'h': 0, 'e': 1, 'l': 3, 'o': 4}
Desired
{'h': 0, 'e': 1, 'l': [2, 3], 'o': 4}""""""

string=raw_input(""Input: "")
string_lower=string.lower()
string_list=list(string_lower)

string_dict = dict()
for i, j in enumerate(string_list):
    string_dict.update({j:i})
print string_dict
</code></pre>

<p>An answer has been found!</p>",python|list|dictionary|indexing|enumerate,"<p>A solution came after modifying an answer (<a href=""https://stackoverflow.com/a/2285887/3761932"">https://stackoverflow.com/a/2285887/3761932</a>) on (<a href=""https://stackoverflow.com/questions/2285874/python-dictionary-that-maps-strings-to-a-set-of-strings"">Python dictionary that maps strings to a set of strings?</a>)</p>

<p>Here's what I have</p>

<pre><code>string=raw_input(""Input: "")
string_lower=string.lower()
string_list=list(string_lower)

string_dict = dict()
for j in string_list:
    string_dict[j]=list()
for i, j in enumerate(string_list):
    string_dict[j].append(i)
print string_dict
</code></pre>

<p>Input: Shall I compare thee to a summer's day?</p>

<p>{'a': [2, 12, 24, 36], ' ': [5, 7, 15, 20, 23, 25, 34], 'c': [8], 'e': [14, 18, 19, 30], 'd': [35], ""'"": [32], 'i': [6], 'h': [1, 17], 'm': [10, 28, 29], 'l': [3, 4], 'o': [9, 22], 'p': [11], 's': [0, 26, 33], 'r': [13, 31], 'u': [27], 't': [16, 21], 'y': [37], '?': [38]}</p>",1
66,24193955,"super(type,subclass) in simple singleton implementation","<p>when I was implementing naive singleton in python, I came up with a problem with super key word. As usual the behavior of super is always tricky and buggy, hope someone can shed light on it. Thanks :)</p>

<p>The problem is that:</p>

<pre><code>class Singleton(object):
    def __new__(cls,*args,**kw):
        if not hasattr(cls,'_instance'):
            #create a instance of type cls,
            origin=super(Singleton,Singleton).__new__(cls,*args,**kw)
            cls._instance=origin
        return cls._instance

class B(Singleton):
    def __init__(self,b):
        self.b=b
</code></pre>

<p>It actually works, but I am wondering</p>

<p>Will it be better if I change line 5 to the below, like in most of the books?</p>

<pre><code>origin=super(Singleton,cls).__new__(cls,*args,**ks)
</code></pre>

<p>what's the difference to make?</p>",python,"<p><code>super()</code> searches the MRO of the current object for the next class that has the requested attribute. The first argument to <code>super()</code> determines the starting point for the MRO search, the second argument determines the object from which to take the MRO.</p>

<p>As long as you don't use <em>multiple inheritance</em>, your MRO will be straightforward. <code>Singleton</code> will always be in the same location in the MRO in that case. With multiple inheritance, where <code>Singleton</code> appears in the MRO of the subclass will differ, and you really want to use <code>cls</code> to get the <em>current</em> MRO, not the MRO of just <code>Singleton</code>.</p>

<p>For your simple example, ignoring <code>cls</code> (e.g. <code>B</code>) is fine:</p>

<pre><code>&gt;&gt;&gt; class Singleton(object):
...     def __new__(cls,*args,**kw):
...         if not hasattr(cls,'_instance'):
...             #create a instance of type cls,
...             origin=super(Singleton,Singleton).__new__(cls,*args,**kw)
...             cls._instance=origin
...         return cls._instance
... 
&gt;&gt;&gt; class B(Singleton):
...     def __init__(self,b):
...         self.b=b
... 
&gt;&gt;&gt; B.__mro__
(&lt;class '__main__.B'&gt;, &lt;class '__main__.Singleton'&gt;, &lt;type 'object'&gt;)
&gt;&gt;&gt; Singleton.__mro__
(&lt;class '__main__.Singleton'&gt;, &lt;type 'object'&gt;)
</code></pre>

<p>So <code>super(Singleton, Singleton)</code> and <code>super(Singleton, cls)</code> end up searching through the same sublist, finding only <code>object</code>.</p>

<p>Use multiple inheritance however, and you'll get a very <em>different</em> MRO; note that <code>Foo</code> is listed between <code>Singleton</code> and <code>object</code>:</p>

<pre><code>&gt;&gt;&gt; class Foo(object): pass
... 
&gt;&gt;&gt; class Bar(Singleton, Foo): pass
... 
&gt;&gt;&gt; Bar.__mro__
(&lt;class '__main__.Bar'&gt;, &lt;class '__main__.Singleton'&gt;, &lt;class '__main__.Foo'&gt;, &lt;type 'object'&gt;)
</code></pre>

<p>If you use <code>super(Singleton, Singleton)</code>, then <code>Foo</code> is <em>inadvertently skipped</em> when looking for inherited methods. <code>super(Singleton, cls)</code> will search through <code>(Foo, object)</code>, <code>super(Singleton, Singleton)</code> will only look at <code>object</code>.</p>",1
67,23970680,Rounding logic in Python?,"<p>In my original code I was trying to compute some indices out of some float values and I faced the following problem:</p>

<pre><code>&gt;&gt;&gt; print int((1.40-.3)/.05)
21
</code></pre>

<p>But:</p>

<pre><code>&gt;&gt;&gt; print ((1.40-.3)/.05)
22.0
</code></pre>

<p>I am speechless about what is going on. Can somebody please explain?</p>",python|rounding,"<p>I think this explains it straightforwardly:</p>

<pre><code>import decimal

&gt;&gt;&gt; (decimal.Decimal(1.40) -decimal.Decimal(.3))/decimal.Decimal(.05)
Decimal('21.99999999999999722444243843')
&gt;&gt;&gt; (decimal.Decimal('1.40') -decimal.Decimal('.3'))/decimal.Decimal('.05')
Decimal('22')
</code></pre>",0
68,23970680,Rounding logic in Python?,"<p>In my original code I was trying to compute some indices out of some float values and I faced the following problem:</p>

<pre><code>&gt;&gt;&gt; print int((1.40-.3)/.05)
21
</code></pre>

<p>But:</p>

<pre><code>&gt;&gt;&gt; print ((1.40-.3)/.05)
22.0
</code></pre>

<p>I am speechless about what is going on. Can somebody please explain?</p>",python|rounding,"<p>Drop the <code>print</code> and you'll see that the actual value is:</p>

<pre><code>&gt;&gt;&gt; (1.40-.3)/.05
21.999999999999996
</code></pre>

<p>Python 2 <code>print()</code> (more accurately, <code>float.__str__</code>) lies to you by rounding to a couple of decimal digits. Python 3 <code>print()</code> (again, actually <code>float.__str__</code>) doesn't do that, it always gives a faithful representation of the actual value (it abbreviates, but only when it doesn't change the value).</p>

<p>This inaccuracy is inherent to floating point numbers (including <code>Decimal</code>, though its inaccuracies occur different cases). This is a fundamental problem, representing arbitrary real numbers is not possible. See <a href=""https://stackoverflow.com/q/588004/395760"">Is floating point math broken?</a> for explanations.</p>",1
69,23970680,Rounding logic in Python?,"<p>In my original code I was trying to compute some indices out of some float values and I faced the following problem:</p>

<pre><code>&gt;&gt;&gt; print int((1.40-.3)/.05)
21
</code></pre>

<p>But:</p>

<pre><code>&gt;&gt;&gt; print ((1.40-.3)/.05)
22.0
</code></pre>

<p>I am speechless about what is going on. Can somebody please explain?</p>",python|rounding,"<p>This is caused by floating point inaccuracy:</p>

<pre><code>&gt;&gt;&gt; print repr((1.40-.3)/.05)
21.999999999999996
</code></pre>

<p>You could try using the <code>Decimal</code> type instead:</p>

<pre><code>&gt;&gt;&gt; from decimal import Decimal
&gt;&gt;&gt; Decimal
&lt;class 'decimal.Decimal'&gt;
</code></pre>

<p>and then</p>

<pre><code>&gt;&gt;&gt; (Decimal('1.40') - Decimal('.3')) / Decimal('.05')
Decimal('22')
</code></pre>

<p>The <code>fractions.Fraction</code> class would work too. Or, you could just round:</p>

<pre><code>&gt;&gt;&gt; round((1.40-.3)/.05, 10) #  round to 10 decimal places
22.0
</code></pre>",2
70,42873773,How do I run the Deep Dream source code?,"<p>(I downloaded the deep dream source code from <a href=""https://github.com/google/deepdream"" rel=""nofollow noreferrer"">https://github.com/google/deepdream</a>)</p>

<p>First of all, I'm not interested in purely Deep Dream only, but machine learning, and deep learning in particular, as a whole. I know programming (but by no means an expert) and python syntax etc. However, I'm not familiar with external libraries and how to properly install them. </p>

<p>Thus, I'm struggling with simply getting the source code for Deep Dream to run. Here's what I've done so far:</p>

<ol>
<li>Installed Python, but it couldn't run the .ipynb (nor did it include any of the libraries) file so I:</li>
<li>Installed Anaconda, but it didn't include Caffe so I:</li>
<li>Downloaded Caffe, but it requires cudNN(??) so I:</li>
<li>Downloaded cudNN (Does it require Cuda (whatever that is?))</li>
</ol>

<p>What are the next steps? There are so many things to download and install and I have no experience with any of it except for Python programming itself.</p>

<p>I tried reading the install instructions but they get me even more confused. </p>

<p>What are the steps I should take next in order to get it running?</p>

<p>Keep in mind that I'm a beginner. No hate please. Official documentation and terminology are still hard to understand. I'm simply looking for step-by-step instructions.</p>

<p>Thanks in advance!</p>

<p>Edit: I'm using Windows</p>",python|deep-learning|caffe|deep-dream,"<p>[Promoted from a comment]</p>

<p>If you're not familiar with it, Docker is going to be your easiest option. Think of a docker container as as a portable, fully self-contained VM.</p>

<p>You can install docker on almost any OS, then use it to load a container which has all the software pre-installed.</p>

<p>You can get docker <a href=""https://www.docker.com/community-edition"" rel=""nofollow noreferrer"">here</a> and you can get the CPU / GPU container by following the <a href=""https://github.com/BVLC/caffe/tree/master/docker"" rel=""nofollow noreferrer"">instructions here</a>.</p>

<p>Note that Docker's really handy for other things too - eg I have containers for Centos 6/6.5/7, RHEL, SLES, Windows, etc... for testing and as servers.</p>",2
71,17115462,Django: strategy for preventing duplicate object creation,"<p>I'm running into an issue of creating multiple DB objects when I only ever expect one.</p>

<p>My application models consist of a <code>Form</code> with a collection of <code>Fields</code>, and a <code>FormEntry</code> with a collection of <code>FieldEntries</code>. For a given <code>FormEntry</code>, I only expect one <code>FieldEntry</code> per field.</p>

<p>Here's my problem: my UI uses ajax to submit field entries. the Django code that handles submissions does a <code>FieldEntry.objects.get_or_create()</code> to make an entry, but it seems I have some kind of race condition: if two ajax calls fire in rapid succession (they fire as soon as a field loses focus), it seems the second <code>get_or_create()</code> can happen before the first has completed, creating two objects. I have added code to clean up after a race, but if the field doesn't get updated again, the code won't be run. To be fair, I'm not sure this is even the mechanism leading to my multiple creation problem.</p>

<p>The question is how best to prevent this? I could implement some kind of resource lock in JS to make sure a field update doesn't occur until a previous update on the same field is finished, but I don't know how to gracefully 'delay' in JS until the lock becomes available.</p>

<p>I could also implement the lock in Django/python, but I think that's even more complicated.</p>",javascript|python|django|asynchronous,"<p>In <code>models.py</code>
Create your model and add <code>unique=True</code></p>

<p>e.g.</p>

<pre><code>model_name = models.CharField(max_length=120, unique= True)
</code></pre>",0
72,17115462,Django: strategy for preventing duplicate object creation,"<p>I'm running into an issue of creating multiple DB objects when I only ever expect one.</p>

<p>My application models consist of a <code>Form</code> with a collection of <code>Fields</code>, and a <code>FormEntry</code> with a collection of <code>FieldEntries</code>. For a given <code>FormEntry</code>, I only expect one <code>FieldEntry</code> per field.</p>

<p>Here's my problem: my UI uses ajax to submit field entries. the Django code that handles submissions does a <code>FieldEntry.objects.get_or_create()</code> to make an entry, but it seems I have some kind of race condition: if two ajax calls fire in rapid succession (they fire as soon as a field loses focus), it seems the second <code>get_or_create()</code> can happen before the first has completed, creating two objects. I have added code to clean up after a race, but if the field doesn't get updated again, the code won't be run. To be fair, I'm not sure this is even the mechanism leading to my multiple creation problem.</p>

<p>The question is how best to prevent this? I could implement some kind of resource lock in JS to make sure a field update doesn't occur until a previous update on the same field is finished, but I don't know how to gracefully 'delay' in JS until the lock becomes available.</p>

<p>I could also implement the lock in Django/python, but I think that's even more complicated.</p>",javascript|python|django|asynchronous,"<p>In your model field definition set <a href=""https://docs.djangoproject.com/en/dev/ref/models/fields/#unique"" rel=""nofollow"">unique=True</a></p>

<p><code>my_field = models.ForeignKey('any_model', unique=True)</code></p>

<p>This will make sure no duplicates entries for <code>any_model</code>.</p>",3
73,17115462,Django: strategy for preventing duplicate object creation,"<p>I'm running into an issue of creating multiple DB objects when I only ever expect one.</p>

<p>My application models consist of a <code>Form</code> with a collection of <code>Fields</code>, and a <code>FormEntry</code> with a collection of <code>FieldEntries</code>. For a given <code>FormEntry</code>, I only expect one <code>FieldEntry</code> per field.</p>

<p>Here's my problem: my UI uses ajax to submit field entries. the Django code that handles submissions does a <code>FieldEntry.objects.get_or_create()</code> to make an entry, but it seems I have some kind of race condition: if two ajax calls fire in rapid succession (they fire as soon as a field loses focus), it seems the second <code>get_or_create()</code> can happen before the first has completed, creating two objects. I have added code to clean up after a race, but if the field doesn't get updated again, the code won't be run. To be fair, I'm not sure this is even the mechanism leading to my multiple creation problem.</p>

<p>The question is how best to prevent this? I could implement some kind of resource lock in JS to make sure a field update doesn't occur until a previous update on the same field is finished, but I don't know how to gracefully 'delay' in JS until the lock becomes available.</p>

<p>I could also implement the lock in Django/python, but I think that's even more complicated.</p>",javascript|python|django|asynchronous,"<p>Sounds like you need the <a href=""https://docs.djangoproject.com/en/dev/ref/models/options/#unique-together"" rel=""nofollow"">unique_together</a> option inside your <code>FieldEntry</code> class:</p>

<pre><code>class Meta:
    unique_together = (""form"", ""field"")
</code></pre>",1
74,17100313,"Given a list of username, do an update on all of them at once using Pymongo","<p>If I am given a list of username, and i want to update a particular field, how do I do it from this</p>

<pre><code>for name in username:
    db.users.update({'name': username}, {'$set': {""status"" :""funny""}})
</code></pre>

<p>to a single line update on all usernames?
Thanks</p>",python|pymongo,"<p>The precise answer depends on which version of MongoDB you are using (the syntax for <code>update</code> has changed), however the key is to set <code>multi</code> to <code>true</code>, which will update all documents that match the query. In this case, your query could be an array of usernames with which you would use the <code>$in</code> operator.</p>

<ul>
<li><a href=""http://docs.mongodb.org/manual/core/update/#update-multiple-documents"" rel=""nofollow"">Update Multiple Documents</a></li>
<li><a href=""http://docs.mongodb.org/manual/reference/operator/in/"" rel=""nofollow""><code>$in</code> operator</a></li>
</ul>",2
75,17100313,"Given a list of username, do an update on all of them at once using Pymongo","<p>If I am given a list of username, and i want to update a particular field, how do I do it from this</p>

<pre><code>for name in username:
    db.users.update({'name': username}, {'$set': {""status"" :""funny""}})
</code></pre>

<p>to a single line update on all usernames?
Thanks</p>",python|pymongo,"<p>In mongodb shell,</p>

<p><code>db.users.update({name:{$in:username}},{$set:{'field':'value'}}, {multi: true})</code> </p>

<p>almost the same in pymongo ? not? </p>",0
76,16855642,execute a shell-script from Python subprocess,"<p>I need to call a shellscript from python.
The problem is that the shellscript will ask a couple of questions along the way until it is finished.</p>

<p>I can't find a way to do so using <code>subprocess</code>! (using <code>pexpect</code> seems a bit over-kill since I only need to start it and send a couple of YES to it)</p>

<p><strong>PLEASE don't suggest ways that requires modification to the shell-script!</strong></p>",python|subprocess|pexpect,"<p>Using the <code>subprocess</code> library, you can tell the <code>Popen</code> class that you want to manage the standard input of the process like this:</p>

<pre><code>import subprocess
shellscript = subprocess.Popen([""shellscript.sh""], stdin=subprocess.PIPE)
</code></pre>

<p>Now <code>shellscript.stdin</code> is a file-like object on which you can call <code>write</code>:</p>

<pre><code>shellscript.stdin.write(""yes\n"")
shellscript.stdin.close()
returncode = shellscript.wait()   # blocks until shellscript is done
</code></pre>

<p>You can also get standard out and standard error from a process by setting <code>stdout=subprocess.PIPE</code> and <code>stderr=subprocess.PIPE</code>, but you shouldn't use <code>PIPEs</code> for both standard input and standard output, because deadlock could result.  (See the <a href=""http://docs.python.org/2.7/library/subprocess.html"" rel=""noreferrer"">documentation</a>.)  If you need to pipe in and pipe out, use the <code>communicate</code> method instead of the file-like objects:</p>

<pre><code>shellscript = subprocess.Popen([""shellscript.sh""], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
stdout, stderr = shellscript.communicate(""yes\n"")   # blocks until shellscript is done
returncode = shellscript.returncode
</code></pre>",6
77,29114189,Python Pandas to_html can't print utf-8 characters,"<p>I have some UTF 8 characters that I am trying to print out but when I issue the following code</p>

<pre><code>csv = 'name\n""BOVÉR, LIÙSAIDH""'
`df = pandas.DataFrame.from_csv( StringIO(csv), index_col=False, encoding='utf-8')
print df.to_html()
</code></pre>

<p>I get an error as follows</p>

<blockquote>
  <p>UnicodeEncodeError: 'ascii' codec can't encode character u'\xc9' in position 260: ordinal not in range(128)</p>
</blockquote>

<p>I tried adding the force unicode flag but that didn't change anything. Any tips?</p>",python|pandas,"<p>The question is not precise enough to provide a definitive answer.  Questions on file and string encodings, pandas version and where that particular error comes from remain.  But there is enough there to construct an MCVE to evaluate the issue on python and python3 interpreters.</p>

<p>Couple things to go after:  </p>

<ul>
<li><code>from_csv()</code> is obsolete in recent pandas.  Use <code>read_csv()</code> as early
as feasible given the version of pandas being used </li>
<li>The PEP-0263 source file encoding so that the MCVE can work </li>
<li>Make the test data a unicode string</li>
</ul>

<pre><code># -*- coding: utf-8 -*-
import pandas as pd
from io import StringIO
import sys

print(sys.version)
print(pd.__version__)

csv = u'name\n""BOVÉR, LIÙSAIDH""'
print(type(csv))
df = pd.read_csv(StringIO(csv), index_col=False, encoding='utf-8')
print(df.to_html())
</code></pre>

<p>python2.7 run:</p>

<pre><code>python unicode_to_html.py 
2.7.16 (default, Mar 19 2019, 10:44:02) 
[GCC 4.2.1 Compatible Apple LLVM 10.0.0 (clang-1000.11.45.5)]
0.20.3
&lt;type 'unicode'&gt;
...snip...
      &lt;td&gt;BOVÉR, LIÙSAIDH&lt;/td&gt;
...snip...

</code></pre>

<p>python3 run:</p>

<pre><code>python3 unicode_to_html.py 
3.7.2 (default, Mar 19 2019, 10:33:22) 
[Clang 10.0.0 (clang-1000.11.45.5)]
0.24.2
&lt;class 'str'&gt;
...snip...
      &lt;td&gt;BOVÉR, LIÙSAIDH&lt;/td&gt;
...snip...

</code></pre>",0
78,29136677,I can't find what's wrong with this circle bounce calculation in python,"<p>I have a a program where circles can bounce into one another. I followed the directions from here for rotating the vectors and scaling the magnitudes based on the collision angle: <a href=""http://www.vobarian.com/collisions/2dcollisions2.pdf"" rel=""nofollow"">http://www.vobarian.com/collisions/2dcollisions2.pdf</a></p>

<p>I wrote this code in python (the 0 index indicates the x coordinate):</p>

<pre><code>norm_vect = [(object2.pos[0] - object1.pos[0]), (object2.pos[1] - object1.pos[1])]
unit = sqrt((norm_vect[0]**2) + (norm_vect[1]**2))
unit_vect = [float(norm_vect[0]) / unit, float(norm_vect[1]) /unit]
tan_vect = [-unit_vect[1], unit_vect[0]]
vel1 = object1.vel
vel2 = object2.vel
vel1_norm = vel1[0] * unit_vect[0] + vel1[1] * unit_vect[1]
vel1_tan = vel1[0] * tan_vect[0] + vel1[1] * tan_vect[1]
vel2_norm = vel2[0] * unit_vect[0] + vel2[1] * unit_vect[1]
vel2_tan = vel2[0] * tan_vect[0] + vel2[1] * tan_vect[1]
new_vel1_norm = (vel1_norm * (object1.mass - object2.mass) + 2 * object2.mass * vel2_norm) / (object1.mass + object2.mass)
new_vel2_norm = (vel2_norm * (object2.mass - object1.mass) + 2 * object1.mass * vel1_norm) / (object1.mass + object2.mass)
new_norm_vect1 = [new_vel1_norm * float(unit_vect[0]), new_vel1_norm * float(unit_vect[1])]
new_norm_vect2 = [new_vel2_norm * float(unit_vect[0]), new_vel2_norm * float(unit_vect[1])]
new_tan_vect1 = [new_vel1_norm * float(tan_vect[0]), new_vel1_norm * float(tan_vect[1])]
new_tan_vect2 = [new_vel2_norm * float(tan_vect[0]), new_vel2_norm * float(tan_vect[1])]

# Now update the object's velocity
object1.vel = [new_norm_vect1[0] + new_tan_vect1[0], + new_norm_vect1[1] + new_tan_vect1[1]]
object2.vel = [new_norm_vect2[0] + new_tan_vect2[0], + new_norm_vect2[1] + new_tan_vect2[1]]
</code></pre>

<p>The problem is that it works sometimes, but not othertimes. Can anyone tell me why? It seems like if the balls collide at the right angle then their exit trajectories swap or something. I wrote this in codeskulptor browser: <a href=""http://www.codeskulptor.org/#user39_8q0Xdp3Y4s_2.py"" rel=""nofollow"">http://www.codeskulptor.org/#user39_8q0Xdp3Y4s_2.py</a></p>

<p>Can anyone point out where I went wrong?</p>

<p>EDIT: Could it be the way that I process the collision? Here is the steps:</p>

<pre><code>    1) Draw the balls on the screen
    2) Create set of unique pairs of collidable objects 
    3) For each ball, move the ball's position 1 frame forward according to the velocity:
        -&gt;1) Check to see if the ball is hitting a wall
        -&gt;2) For each pairset, if the ball in question is a member of the pair:
             --&gt;1) If distance between centers is less than sum of radii:
                    --&gt;1)  Calculate rebound trajectories
                    ---2)  Find N such that position + rebound trajectory *N is out of collision zone
</code></pre>",python|debugging|physics|bounce,"<p>The online simulation is really cool! I did not study your complete code in detail, just the snippet you posted in your question. From a quick glance, you correctly compute the tangential and normal unit vectors, the old normal and tangential velocities, and the new normal velocity. But after that, you seem to get lost a bit. As explained in the document about the collisions, the tangential velocities do not change during the collision, so there is no need to calculate <code>new_tan_vect1/2</code>. I also don't understand why you are calculating <code>new_norm_vect1</code>, the normal vector does not change during the collision.</p>

<p>Some other small remarks:</p>

<ul>
<li><p>why do you use <code>float()</code> all over your code? This is normally not needed. If the reason for this is to get correct results for division, you should really add a <code>from __future__ import division</code> at the top of your code, since you seem to be using Python2. See <a href=""https://stackoverflow.com/questions/183853/in-python-what-is-the-difference-between-and-when-used-for-division"">this old question</a> for more info.</p></li>
<li><p>What you call <code>norm_vect</code> is actually the un-normalized normal vector, and what you call <code>unit_vect</code> is actually the normalized normal unit vector. I would just call both norm_vect, to make the difference between normal and tangential more clear. A unit vector is any vector with length 1, so using that for the normal vector is a bit misleading.</p></li>
<li><p>If you are planning to do more of these kind of simulations, you should consider learning about <code>numpy</code>. This allows you to write vectorized calculations, instead of writing out all the equations for <code>x</code> and <code>y</code> by hand. E.g. <code>norm_vect = pos2 - pos1; norm_vect /= np.linalg.norm(norm_vect)</code> or <code>object1.vel = norm_vect * new_vel1_norm + tang_vect * vel1_tang</code>.</p></li>
</ul>

<p>I would write your snippet should more or less like this (untested code):</p>

<pre><code>from __future__ import division  # move this to the top of your program

# calculate normal and tangential unit vectors
norm_vect = [(object2.pos[0] - object1.pos[0]), 
             (object2.pos[1] - object1.pos[1])]  # stil un-normalized!
norm_length = sqrt((norm_vect[0]**2) + (norm_vect[1]**2))
norm_vect = [norm_vect[0] / norm_length, 
             norm_vect[1] / norm_length]  # do normalization
tang_vect = [-norm_vect[1], norm_vect[0]]  # rotate norm_vect by 90 degrees

# normal and tangential velocities before collision
vel1 = object1.vel
vel2 = object2.vel
vel1_norm = vel1[0] * norm_vect[0] + vel1[1] * norm_vect[1]
vel1_tang = vel1[0] * tang_vect[0] + vel1[1] * tang_vect[1]
vel2_norm = vel2[0] * norm_vect[0] + vel2[1] * norm_vect[1]
vel2_tang = vel2[0] * tang_vect[0] + vel2[1] * tang_vect[1]

# calculate velocities after collision
new_vel1_norm = (vel1_norm * (object1.mass - object2.mass) 
    + 2 * object2.mass * vel2_norm) / (object1.mass + object2.mass)
new_vel2_norm = (vel2_norm * (object2.mass - object1.mass) 
    + 2 * object1.mass * vel1_norm) / (object1.mass + object2.mass)
# no need to calculate new_vel_tang, since it does not change

# Now update the object's velocity
object1.vel = [norm_vect[0] * new_vel1_norm + tang_vect[0] * vel1_tang, 
               norm_vect[1] * new_vel1_norm + tang_vect[1] * vel1_tang]
object2.vel = [norm_vect[0] * new_vel2_norm + tang_vect[0] * vel2_tang, 
               norm_vect[1] * new_vel2_norm + tang_vect[1] * vel2_tang]
</code></pre>

<p>I renamed some of the variables to make it more clear.</p>",3
79,28959292,what should I change in my function,"<pre><code>list_1  =[1, 2, 3, 4 ]

def fun(list_1):
    for each value in list1:
        # perform some operation and create a new data frame(pandas) for each value in the list
        # so in total I should get 4 data frames.
        print each_value

        return new_data_frame
</code></pre>

<p>When I run <code>fun(list_1)</code> I should get 4 data frames:</p>

<pre><code>1
data_frame_1

2
data_frame_2

3
data_frame_3

4
data_frame_4
</code></pre>

<p>but I am getting an ouput only with first value.</p>

<pre><code>1
data_frame_1
</code></pre>

<p>so what should I change in my function.</p>",python|python-2.7|pandas,"<p>When you <code>return</code> from the function, it's over.<br>
You're out of the function and that's it.  </p>

<p>You could use <a href=""https://docs.python.org/3/glossary.html#term-generator"" rel=""nofollow noreferrer"">a generator</a> to achieve what you want or you may return a <code>tuple</code> or a <code>list</code>.</p>

<hr>

<p>Using a generator :</p>

<pre><code>def fun(list_1):
    for each_value in list_1:
        # perform some operation and create a new data frame(pandas) named ""new_data_frame"" for each value in the list
        print each_value
        yield new_data_frame

for data_frame in fun(list_1):
    # Do something with the data frame ""data_frame""
</code></pre>

<p>This will print the value each time, and return your data frame.
But it returns a generator, so you have to call the function multiple times.  What you cannot really do is get your data frames in a loop without wanting to store them in an list or assimilated or call the function only once.</p>

<hr>

<p>A simpler way with a list could be:</p>

<pre><code>def fun(list_1):
    data_frames = []
    for each_value in list1:
        # perform some operation and create a new data frame(pandas) named ""new_data_frame"" for each value in the list
        print each_value
        data_frames.append(new_data_frame)

return data_frames
</code></pre>

<hr>

<p>For reference, I'd suggest you have a look at <a href=""https://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do-in-python/231855#231855"">What does the &quot;yield&quot; keyword do in Python?</a> 
which may be interesting for you.</p>",5
80,14471831,sqlalchemy FOR UPDATE NOWAIT,"<p>The <a href=""http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.with_lockmode"" rel=""nofollow"">documentation</a> for sqlalchemy says that you can specify ""FOR UPDATE NOWAIT"" in PostgreSQL 8.1 upwards using Query.with_lockmode('update_nowait'). Does anyone know how to get it to add the FOR UPDATE NOWAIT instead of just FOR UPDATE?</p>

<pre><code>PostgreSQL 9.1.6

query = db.session.query(MyTable)\
    .filter_by(process_status=""PENDING"")\
    .order_by(MyTable.id)\
    .with_lockmode('update_nowait')\

print query
</code></pre>

<p>sql:</p>

<pre><code>SELECT 
MyTable.id AS MyTable_id
,MyTable.created_on AS MyTable_created_on
FROM MyTable 
WHERE MyTable.process_status = :process_status_1 
ORDER BY MyTable.id 
FOR UPDATE
</code></pre>",python|postgresql|sqlalchemy|select-for-update,"<p>I was able to reproduce similar case with Oracle 11g and SQLAlchemy 0.8.0b2.</p>

<pre><code>db = create_engine('...',echo=True)
...
q = session.query(CauseCode.__table__).with_lockmode('update_nowait')
print q
&gt;&gt;&gt;SELECT ... FROM cause_code FOR UPDATE
print renderquery(q)
&gt;&gt;&gt;SELECT ... FROM cause_code FOR UPDATE NOWAIT
q.all()
&gt;&gt;&gt;2013-01-23 09:58:12,665 INFO sqlalchemy.engine.base.Engine SELECT ... FROM cause_code FOR UPDATE NOWAIT
</code></pre>

<p>Usually default query renderer used by <strong>str</strong>() produce query different from the actual query executed to DB.
I suspect that sqlalchemy behave in the same way for Postgres in your case - print q produce dialect agnostic query.</p>

<p>PS renderquery() method implementation can be found <a href=""https://stackoverflow.com/a/9898141/1296661"">here</a></p>",2
81,14471831,sqlalchemy FOR UPDATE NOWAIT,"<p>The <a href=""http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.with_lockmode"" rel=""nofollow"">documentation</a> for sqlalchemy says that you can specify ""FOR UPDATE NOWAIT"" in PostgreSQL 8.1 upwards using Query.with_lockmode('update_nowait'). Does anyone know how to get it to add the FOR UPDATE NOWAIT instead of just FOR UPDATE?</p>

<pre><code>PostgreSQL 9.1.6

query = db.session.query(MyTable)\
    .filter_by(process_status=""PENDING"")\
    .order_by(MyTable.id)\
    .with_lockmode('update_nowait')\

print query
</code></pre>

<p>sql:</p>

<pre><code>SELECT 
MyTable.id AS MyTable_id
,MyTable.created_on AS MyTable_created_on
FROM MyTable 
WHERE MyTable.process_status = :process_status_1 
ORDER BY MyTable.id 
FOR UPDATE
</code></pre>",python|postgresql|sqlalchemy|select-for-update,"<p>In newer versions of sqlalchmey, you can use</p>

<pre><code>session.query().with_for_update(of=[fields to update], nowait=True)
</code></pre>",2
82,14517524,Automatically simplifying/refactoring Python code (e.g. for loops -> list comprehension)?,"<p>In Python, I really enjoy how concise an implementation can be when using list comprehension. I love to do concise list comprehensions this:</p>

<pre><code>myList = [1, 5, 11, 20, 30, 35] #input data
bigNumbers = [x for x in myList if x &gt; 10]
</code></pre>

<p>However, I often encounter more verbose implementations like this:</p>

<pre><code>myList = [1, 5, 11, 20, 30, 35] #input data
bigNumbers = []
for i in xrange(0, len(myList)):
    if myList[i] &gt; 10:
        bigNumbers.append(myList[i])
</code></pre>

<p>When a <code>for loop</code> only looks through one data structure (e.g. <code>myList[]</code>), there is usually a straightforward list comprehension statement that is equivalent to the loop. <br>
<strong>With this in mind, is there a refactoring tool that converts verbose Python loops into concise list comprehension statements?</strong></p>

<hr>

<p><a href=""https://stackoverflow.com/questions/2532525/how-do-i-make-this-simple-list-comprehension?rq=1"">Previous</a> <a href=""https://stackoverflow.com/questions/10637037/replacing-while-loop-with-list-comprehension"">StackOverflow</a> <a href=""https://stackoverflow.com/questions/2532525/how-do-i-make-this-simple-list-comprehension?rq=1"">questions</a> have asked for advice on transforming loops into list comprehension. But, I have yet to find a question about <strong>automatically</strong> converting loops into list comprehension expressions.</p>

<hr>

<p><strong>Motivation:</strong> There are numerous ways to answer the question ""what does it mean for code to be clean?"" Personally, I find that making code concise and getting rid of some of the fluff tends to make code cleaner and more readable. Naturally there's a line in the sand between ""concise code"" and ""incomprehensible one-liners."" Still, I often find it satisfying to write and work with concise code.</p>",python|refactoring|list-comprehension|simplify|automated-refactoring,"<p><a href=""http://docs.python.org/2/library/2to3.html"" rel=""nofollow"">2to3</a> is a refactoring tool that can perform arbitrary refactorings, as long as you can specify them with a syntactical pattern. The pattern you might want to look for is this</p>

<pre><code>VARIABLE1 = []
for VARIABLE2 in EXPRESSION1:
    if EXPRESSION2:
        VARIABLE1.append(EXPRESSION3)
</code></pre>

<p>This can be refactored safely to</p>

<pre><code>VARIABLE1 = [EXPRESSION3 for VARIABLE2 in EXPRESSION1 if EXPRESSION2]
</code></pre>

<p>In your specific example, this would give</p>

<pre><code>bigNumbers = [myList[i] for i in xrange(0, len(myList)) if myList[i] &gt; 10]
</code></pre>

<p>Then, you can have another refactoring that replaces xrange(0, N) with xrange(N),
and another one that replaces</p>

<pre><code>[VARIABLE1[VARIABLE2] for VARIABLE2 in xrange(len(VARIABLE1)) if EXPRESSION1]
</code></pre>

<p>with</p>

<pre><code>[VARIABLE3 for VARIABLE3 in VARIABLE1 if EXPRESSION1PRIME]
</code></pre>

<p>There are several problems with this refactoring: </p>

<ul>
<li><code>EXPRESSION1PRIME</code> must be <code>EXPRESSION1</code> with all occurrences of 
<code>VARIABLE1[VARIABLE2]</code> replaced by VARIABLE3. This is possible with
2to3, but requires explicit code to do the traversal and replacement.</li>
<li><code>EXPRESSION1PRIME</code> then must not contain no further occurrences of
<code>VARIABLE1</code>. This can also be checked with explicit code.</li>
<li>One needs to come up with a name for VARIABLE3. You have chosen <code>x</code>;
there is no reasonable way to have this done automatically. You could
chose to recycle <code>VARIABLE1</code> (i.e. <code>i</code>) for that, but that may be confusing
as it suggests that <code>i</code> is still an index. It might work to pick a synthetic
name, such as <code>VARIABLE1_VARIABLE2</code> (i.e. <code>myList_i</code>), and check whether
that's not used otherwise.</li>
<li>One needs to be sure that VARIABLE1[VARIABLE2] yields the same as you get
when using <code>iter(VARIABLE1)</code>. It's not possible to do this automatically.</li>
</ul>

<p>If you want to learn how to write 2to3 fixers, take a look at <a href=""http://python3porting.com/fixers.html"" rel=""nofollow"">Lennart Regebro's</a> book.</p>",5
83,14903791,How can I convert two bytes of an integer back into an integer in Python?,"<p>I am currently using an <code>Arduino</code> that's outputting some integers (int) through Serial (using <code>pySerial</code>) to a Python script that I'm writing for the <code>Arduino</code> to communicate with <code>X-Plane</code>, a flight simulation program. </p>

<p>I managed to separate the original into two bytes so that I could send it over to the script, but I'm having a little trouble reconstructing the original integer. </p>

<p>I tried using basic bitwise operators (&lt;&lt;, >> etc.) as I would have done in a C++like program, but it does not seem to be working. </p>

<p>I suspect it has to do with data types. I may be using integers with bytes in the same operations, but I can't really tell which type each variable holds, since you don't really declare variables in Python, as far as I know (I'm very new to Python). </p>

<pre><code>self.pot=self.myline[2]&lt;&lt;8
self.pot|=self.myline[3]
</code></pre>",python|serial-port|byte|arduino,"<p>For example, using Big Endian encoding:</p>
<pre class=""lang-py prettyprint-override""><code>int.from_bytes(my_bytes, byteorder='big')
</code></pre>",1
84,14903791,How can I convert two bytes of an integer back into an integer in Python?,"<p>I am currently using an <code>Arduino</code> that's outputting some integers (int) through Serial (using <code>pySerial</code>) to a Python script that I'm writing for the <code>Arduino</code> to communicate with <code>X-Plane</code>, a flight simulation program. </p>

<p>I managed to separate the original into two bytes so that I could send it over to the script, but I'm having a little trouble reconstructing the original integer. </p>

<p>I tried using basic bitwise operators (&lt;&lt;, >> etc.) as I would have done in a C++like program, but it does not seem to be working. </p>

<p>I suspect it has to do with data types. I may be using integers with bytes in the same operations, but I can't really tell which type each variable holds, since you don't really declare variables in Python, as far as I know (I'm very new to Python). </p>

<pre><code>self.pot=self.myline[2]&lt;&lt;8
self.pot|=self.myline[3]
</code></pre>",python|serial-port|byte|arduino,"<p>You can use the <code>struct</code> module to convert between integers and representation as bytes. In your case, to convert from a Python integer to two bytes and back, you'd use:</p>

<pre><code>&gt;&gt;&gt; import struct
&gt;&gt;&gt; struct.pack('&gt;H', 12345)
'09'
&gt;&gt;&gt; struct.unpack('&gt;H', '09')
(12345,)
</code></pre>

<p>The first argument to <code>struct.pack</code> and <code>struct.unpack</code> represent how you want you data to be formatted. Here, I ask for it to be in big-ending mode by using the <code>&gt;</code> prefix (you can use <code>&lt;</code> for little-endian, or <code>=</code> for native) and then I say there is a single unsigned short (16-bits integer) represented by the <code>H</code>.</p>

<p>Other possibilities are <code>b</code> for a signed byte, <code>B</code> for an unsigned byte, <code>h</code> for a signed short (16-bits), <code>i</code> for a signed 32-bits integer, <code>I</code> for an unsigned 32-bits integer. You can get the complete list by looking at the documentation of the <code>struct</code> module.</p>",8
85,14903791,How can I convert two bytes of an integer back into an integer in Python?,"<p>I am currently using an <code>Arduino</code> that's outputting some integers (int) through Serial (using <code>pySerial</code>) to a Python script that I'm writing for the <code>Arduino</code> to communicate with <code>X-Plane</code>, a flight simulation program. </p>

<p>I managed to separate the original into two bytes so that I could send it over to the script, but I'm having a little trouble reconstructing the original integer. </p>

<p>I tried using basic bitwise operators (&lt;&lt;, >> etc.) as I would have done in a C++like program, but it does not seem to be working. </p>

<p>I suspect it has to do with data types. I may be using integers with bytes in the same operations, but I can't really tell which type each variable holds, since you don't really declare variables in Python, as far as I know (I'm very new to Python). </p>

<pre><code>self.pot=self.myline[2]&lt;&lt;8
self.pot|=self.myline[3]
</code></pre>",python|serial-port|byte|arduino,"<p>To convert a byte or char to the number it represents, use <code>ord()</code>. Here's a simple round trip from an int to bytes and back:</p>

<pre><code>&gt;&gt;&gt; number = 3**9
&gt;&gt;&gt; hibyte = chr(number / 256)
&gt;&gt;&gt; lobyte = chr(number % 256)
&gt;&gt;&gt; hibyte, lobyte
('L', '\xe3')
&gt;&gt;&gt; print number == (ord(hibyte) &lt;&lt; 8) + ord(lobyte)
True
</code></pre>

<p>If your <code>myline</code> variable is string or bytestring, you can use the formula in the last line above. If it somehow is a list of integers, then of course you don't need <code>ord</code>.</p>",-1
86,14903791,How can I convert two bytes of an integer back into an integer in Python?,"<p>I am currently using an <code>Arduino</code> that's outputting some integers (int) through Serial (using <code>pySerial</code>) to a Python script that I'm writing for the <code>Arduino</code> to communicate with <code>X-Plane</code>, a flight simulation program. </p>

<p>I managed to separate the original into two bytes so that I could send it over to the script, but I'm having a little trouble reconstructing the original integer. </p>

<p>I tried using basic bitwise operators (&lt;&lt;, >> etc.) as I would have done in a C++like program, but it does not seem to be working. </p>

<p>I suspect it has to do with data types. I may be using integers with bytes in the same operations, but I can't really tell which type each variable holds, since you don't really declare variables in Python, as far as I know (I'm very new to Python). </p>

<pre><code>self.pot=self.myline[2]&lt;&lt;8
self.pot|=self.myline[3]
</code></pre>",python|serial-port|byte|arduino,"<p>This totally works:</p>

<pre><code>long = 500
first = long &amp; 0xff  #244
second = long &gt;&gt; 8  #1
result = (second &lt;&lt; 8) + first #500
</code></pre>

<p>If you are not sure of types in 'myline' please check Stack Overflow question <em><a href=""https://stackoverflow.com/questions/402504"">How to determine the variable type in Python?</a></em>.</p>",0
87,14903791,How can I convert two bytes of an integer back into an integer in Python?,"<p>I am currently using an <code>Arduino</code> that's outputting some integers (int) through Serial (using <code>pySerial</code>) to a Python script that I'm writing for the <code>Arduino</code> to communicate with <code>X-Plane</code>, a flight simulation program. </p>

<p>I managed to separate the original into two bytes so that I could send it over to the script, but I'm having a little trouble reconstructing the original integer. </p>

<p>I tried using basic bitwise operators (&lt;&lt;, >> etc.) as I would have done in a C++like program, but it does not seem to be working. </p>

<p>I suspect it has to do with data types. I may be using integers with bytes in the same operations, but I can't really tell which type each variable holds, since you don't really declare variables in Python, as far as I know (I'm very new to Python). </p>

<pre><code>self.pot=self.myline[2]&lt;&lt;8
self.pot|=self.myline[3]
</code></pre>",python|serial-port|byte|arduino,"<p>What you have seems basically like it should work, assuming the data stored in <code>myline</code> has the high byte first:</p>

<pre><code>myline = [0, 1, 2, 3]
pot = myline[2]&lt;&lt;8 | myline[3]

print 'pot: {:d}, 0x{:04x}'.format(pot, pot)  # outputs ""pot: 515, 0x0203""
</code></pre>

<p>Otherwise, if it's low-byte first you'd need to do the opposite way:</p>

<pre><code>myline = [0, 1, 2, 3]
pot = myline[3]&lt;&lt;8 | myline[2]

print 'pot: {:d}, 0x{:04x}'.format(pot, pot)  # outputs ""pot: 770, 0x0302""
</code></pre>",2
88,14509192,How to import functions from other projects in Python?,"<p>I have some code in a project which I'd like to reuse in another project. What do I need to do (in both folders) so that I can do this?</p>

<p>The directory structure is something like:</p>

<ul>
<li>Foo
<ul>
<li>Project1
<ul>
<li>file1.py</li>
<li>file2.py</li>
</ul></li>
</ul></li>
<li>Bar
<ul>
<li>Project2
<ul>
<li>fileX.py</li>
<li>fileY.py</li>
</ul></li>
</ul></li>
</ul>

<p>I want to use functions from file1.py and file2.py in fileX.py and fileY.py.</p>",python|import,"<p>You may want to make a <a href=""http://docs.python.org/2/tutorial/modules.html"" rel=""noreferrer"">module</a> out of it and then import whatever you need from it.</p>",5
89,14509192,How to import functions from other projects in Python?,"<p>I have some code in a project which I'd like to reuse in another project. What do I need to do (in both folders) so that I can do this?</p>

<p>The directory structure is something like:</p>

<ul>
<li>Foo
<ul>
<li>Project1
<ul>
<li>file1.py</li>
<li>file2.py</li>
</ul></li>
</ul></li>
<li>Bar
<ul>
<li>Project2
<ul>
<li>fileX.py</li>
<li>fileY.py</li>
</ul></li>
</ul></li>
</ul>

<p>I want to use functions from file1.py and file2.py in fileX.py and fileY.py.</p>",python|import,"<p>There's a lot going on here.  you should read about python packages and module management <a href=""http://docs.python.org/2/tutorial/modules.html#packages"" rel=""noreferrer"">http://docs.python.org/2/tutorial/modules.html#packages</a> but the basic idea is that fileX needs to know where file1 and file2 are in order to use them.</p>

<p>To turn a folder into a package, it just needs to contain an <code>__init__.py</code> file.  What I would suggest you do is (in a terminal)</p>

<pre><code>$ touch Foo/__init__.py
$ touch Foo/Project1/__init__.py
</code></pre>

<p>(assuming you're using unix/linux).  </p>

<p>Then somehow, fileX needs to know where the <code>Foo</code> package is.  You can call <code>sys.path.append(PATH)</code> where PATH is the location of Foo.</p>

<p>finally inside fileX.py you'd have</p>

<pre><code>import sys
sys.path.append(PATH) #replace PATH with the path to Foo

from Foo.Project1 import file1

#use its functions
file1.function_name(argument)
</code></pre>

<p>if you really want to just say <code>function_name</code> without the preceeding <code>file1.</code> you can import all of its functions by saying <code>from Foo.Project1.file1 import *</code> however <em>please</em> note that <code>from module import *</code> is <strong>highly</strong> frowned upon as it mixes names and make code less readable and understandable</p>",8
90,14509192,How to import functions from other projects in Python?,"<p>I have some code in a project which I'd like to reuse in another project. What do I need to do (in both folders) so that I can do this?</p>

<p>The directory structure is something like:</p>

<ul>
<li>Foo
<ul>
<li>Project1
<ul>
<li>file1.py</li>
<li>file2.py</li>
</ul></li>
</ul></li>
<li>Bar
<ul>
<li>Project2
<ul>
<li>fileX.py</li>
<li>fileY.py</li>
</ul></li>
</ul></li>
</ul>

<p>I want to use functions from file1.py and file2.py in fileX.py and fileY.py.</p>",python|import,"<p>You take the code you want to use in both projects, and you put it into a <a href=""http://docs.python.org/2/tutorial/modules.html"" rel=""nofollow"">module</a>, which you extract into a third separate project. That project you make into a package, which you can work on separately. You then release version of it, and reuse them in your other projects.</p>

<p>It is important that you have versions that you ""release"" so that you can keep track of which version of the module each project uses. Otherwise you will end up in a situation where an old project stops working because you have made incompatible changes to the common module.</p>

<p>If it's generically usable not only for you but for others, consider uploading it to <a href=""http://pypi.python.org/"" rel=""nofollow"">PyPI</a>. </p>",3
91,14509192,How to import functions from other projects in Python?,"<p>I have some code in a project which I'd like to reuse in another project. What do I need to do (in both folders) so that I can do this?</p>

<p>The directory structure is something like:</p>

<ul>
<li>Foo
<ul>
<li>Project1
<ul>
<li>file1.py</li>
<li>file2.py</li>
</ul></li>
</ul></li>
<li>Bar
<ul>
<li>Project2
<ul>
<li>fileX.py</li>
<li>fileY.py</li>
</ul></li>
</ul></li>
</ul>

<p>I want to use functions from file1.py and file2.py in fileX.py and fileY.py.</p>",python|import,"<p>Ideally both projects will be an installable python package, replete with __init__.py and setup.py. They could then be installed with <code>python setup.py install</code> or similar.</p>

<p>If that is not possible, <em>don't</em> use <code>execfile()</code>! Manipulate the <code>PYTHONPATH</code> to add <code>Foo</code> so that <code>import Project1.file1</code> works.</p>

<p>For example, from Project2/fileX.py:</p>

<pre><code>from os import path
import sys
sys.path.append(path.abspath('../Foo'))

from Project1.file1 import something
</code></pre>

<p>However, the <em>real</em> answer is to make each a discrete installable package.</p>",46
92,14509192,How to import functions from other projects in Python?,"<p>I have some code in a project which I'd like to reuse in another project. What do I need to do (in both folders) so that I can do this?</p>

<p>The directory structure is something like:</p>

<ul>
<li>Foo
<ul>
<li>Project1
<ul>
<li>file1.py</li>
<li>file2.py</li>
</ul></li>
</ul></li>
<li>Bar
<ul>
<li>Project2
<ul>
<li>fileX.py</li>
<li>fileY.py</li>
</ul></li>
</ul></li>
</ul>

<p>I want to use functions from file1.py and file2.py in fileX.py and fileY.py.</p>",python|import,<p>I think you can add <code>Foo</code> to the current Python path using <code>os.path.join()</code> or <code>os.path.append()</code> and do <code>from import Project1.file1 import function_name</code>.</p>,-1
93,30674845,Regex: How to match IP address in RFC1918 private IPV4 address ranges (in Python)?,"<p>RFC1918 defines private IPv4 addresses as those that fall within any of the following ranges:</p>

<pre><code>10.0.0.0 - 10.255.255.255
172.16.0.0 - 172.31.255.255
192.168.0.0 - 192.168.255.255
</code></pre>

<p>I'm adding 127.0.0.1 to this list, for the purposes of my analysis. I know there are tried-and tested regex's to match any IPv4 address, but how would I narrow one of these to down to matching only if the address falls in one of the above ranges or in 127.0.0.1? Will be using Python.</p>

<p>Many thanks</p>",python|regex,"<p>The following regexp should work:</p>

<pre><code>^(?:10|127|172\.(?:1[6-9]|2[0-9]|3[01])|192\.168)\..*
</code></pre>

<p><a href=""https://regex101.com/r/bO9kB2/2"" rel=""noreferrer"">DEMO</a></p>",5
94,30674845,Regex: How to match IP address in RFC1918 private IPV4 address ranges (in Python)?,"<p>RFC1918 defines private IPv4 addresses as those that fall within any of the following ranges:</p>

<pre><code>10.0.0.0 - 10.255.255.255
172.16.0.0 - 172.31.255.255
192.168.0.0 - 192.168.255.255
</code></pre>

<p>I'm adding 127.0.0.1 to this list, for the purposes of my analysis. I know there are tried-and tested regex's to match any IPv4 address, but how would I narrow one of these to down to matching only if the address falls in one of the above ranges or in 127.0.0.1? Will be using Python.</p>

<p>Many thanks</p>",python|regex,"<pre><code>(?:(?:192\.)(?:(?:168\.)(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?\.)(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)))|(?:(?:10\.)(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){2}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:172\.)(?:(?:1[6-9]|2[0-9]|3[0-1])\.)(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.)(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))
</code></pre>
<p>This regex works for fetching all private ips from a string. Demo can be found <a href=""https://regex101.com/r/Os9iDR/2/"" rel=""nofollow noreferrer"">here</a></p>",0
95,30674845,Regex: How to match IP address in RFC1918 private IPV4 address ranges (in Python)?,"<p>RFC1918 defines private IPv4 addresses as those that fall within any of the following ranges:</p>

<pre><code>10.0.0.0 - 10.255.255.255
172.16.0.0 - 172.31.255.255
192.168.0.0 - 192.168.255.255
</code></pre>

<p>I'm adding 127.0.0.1 to this list, for the purposes of my analysis. I know there are tried-and tested regex's to match any IPv4 address, but how would I narrow one of these to down to matching only if the address falls in one of the above ranges or in 127.0.0.1? Will be using Python.</p>

<p>Many thanks</p>",python|regex,"<p>In Python 3.3+ (you did not specify a version, nor why regular expressions are a requirement, so I’ll put this here for completeness), you can:</p>

<pre><code>import ipaddress

addr_string = # string with your IP address
try:
    addr = ipaddress.IPv4Address(addr_string)
except ValueError:
    raise # not an IP address
if addr.is_private:
    pass # is a private address
</code></pre>

<p>See also: <a href=""https://docs.python.org/3/library/ipaddress.html"" rel=""noreferrer"">ipaddress module documentation</a></p>",7
96,30507347,Efficiently execute mathematical Python expression in C++ many,"<p>I have a python program, that generates a mathematical expression like </p>

<pre><code>exp(sin(x-y))**2
</code></pre>

<p>Now I want to give this to my C++ program, that must evaluate this expression with different x,y values. My first approach was to use the Python.h library with PyRun_String. </p>

<p>Here the initialization code:</p>

<pre><code>func=function;
Py_Initialize();
    memset(pythonString,0,strlen(pythonString));

    // add whiteNoise Kernel
    sprintf(pythonString,""from math import *;func=lambda x,y:(%s+0.1*(x==y))"",function);
    //printf(""%s\n"",pythonString);
    PyRun_SimpleString(pythonString);
</code></pre>

<p>and here the code that gets evaluated many times:</p>

<pre><code>char execString[200];
memset(execString,0,strlen(execString));

sprintf(execString,""result=func(%f,%f)"",x1[0],  x2[0]);

PyObject* main = PyImport_AddModule(""__main__"");
PyObject* globalDictionary = PyModule_GetDict(main);
PyObject* localDictionary = PyDict_New();

//create the dictionaries as shown above

PyRun_String(execString, Py_file_input, globalDictionary, localDictionary);
double result = PyFloat_AsDouble(PyDict_GetItemString(localDictionary, ""result""));
</code></pre>

<p>However, I think it's really too slow to parse the string with PyRun_String every time again. Is there a way to directly convert Python expressions to a C++ function, that can be invoked efficiently? Or is there any alternative? It would also be okay to use something like symbolicc++</p>",python|c++|math,"<p>I would suggest to pass all your inputs as arrays/vectors to your c++ &amp; get all solved at once. Also, try <code>Py_CompileString</code> &amp; <code>PyEval_EvalCode</code> instead of <code>PyRun_String</code>. I had to solve millions of equations &amp; found a 10X speed improvement.</p>

<p>Below is an example for a simple <code>'a + b'</code> but with some more for loops one can generalize it for any equation with any number of variables. For a million values below is done in slightly less than a second on my machine (compared to 10 seconds for <code>PyRun_String</code>). </p>

<pre><code>PyObject* main = PyImport_AddModule(""__main__"");
PyObject* globalDict = PyModule_GetDict(main);
PyCodeObject* code = (PyCodeObject*) Py_CompileString(""a + b"", ""My Eqn"", Py_eval_input);
for (millions of values in input) {
    PyObject* localDict = PyDict_New();
    PyObject* oA = PyFloat_FromDouble(a);  // 'a' from input
    PyObject* oB = PyFloat_FromDouble(b);  // 'b' from input
    PyDict_SetItemString(localDict, ""a"", oA);
    PyDict_SetItemString(localDict, ""b"", oB);
    PyObject* pyRes = PyEval_EvalCode(code, globalDict, localDict);
    r = PyFloat_AsDouble(pyRes);
    // put r in output array

    Py_DECREF(pyRes);
    Py_DECREF(localDict)
}
Py_DECREF(code);
</code></pre>",1
97,41913023,How to use Pandas rolling average without guaranteed number of observations,"<p>I am looking at annualized baseball statistics and would like to calculate a rolling mean looking back at the previous 3 years' worth of performance in regard to number of Hits. However, I want to account for the fact that while my dataset reaches back more than 3 years, one single player may have only been in the league for 1-2 years and will not have 3 years' worth of observations off of which I can calculate the rolling mean. For example:</p>

<pre><code>In[6]: df = pd.DataFrame({'PLAYER_ID': ['A', 'A', 'A', 'B', 'B'], 
                          'HITS': [45, 55, 50, 20, 24]})
In[9]: df
Out[9]: 
  PLAYER_ID  HITS
0         A    45
1         A    55
2         A    50
3         B    20
4         B    24
</code></pre>

<p>How would I use a groupby and aggregation/transform (or some other process) to calculate the rolling mean for each player <strong>with a max 3 years historic totals</strong> and then just use the max available historic observations for a player with less than 3 years' historic performance data available?</p>

<p>Pretty sure my answer lies within the Pandas package but would be interested in any solution.</p>

<p>Thanks!</p>",python|pandas|group-by|statistics,"<p><code>pd.DataFrame.rolling</code> handles this problem for you automatically. Using your example data, <code>df.groupby('PLAYER_ID').rolling(1).mean()</code> will give you:</p>

<pre><code>             HITS PLAYER_ID
PLAYER_ID
A         0  45.0         A
          1  55.0         A
          2  50.0         A
B         3  20.0         B
          4  24.0         B
</code></pre>

<p>For your example case I'm using a window size of just 1, which means that we're treating each individual observation as its own mean. This isn't particularly interesting. With more data you can use a larger window size: for example, if your data is weekly, <code>rolling(5)</code> would give you an approximately monthly window size (or <code>rolling(31)</code> if your data is daily, and so on).</p>

<p>Two issues to be aware of when using this methodology:</p>

<ol>
<li>If your data isn't sampled on a regular basis (e.g. if it skips a week or a month at a time), your rolling average won't be aligned in time. For this reason if your data isn't already regularly sampled you'll usually want to resample it.</li>
<li>If your data contains <code>NaN</code> values, those will be propagated: every window containing that <code>NaN</code> will also be <code>NaN</code>. You'll have to <a href=""http://pandas.pydata.org/pandas-docs/stable/missing_data.html"" rel=""nofollow noreferrer"">impute those values</a> somehow to keep that from happening.</li>
</ol>",2
98,42055009,Key input code (pygame) not responding,"<p>I'm using python and the pygame module for my A Level project (creating a very basic, pixelated game - think early pokemon) and I've used the event.type function is two discreet parts of the code, using different keys entirely. The first section works in the main section of the code, but the second is within a function and displays no output whatsoever.</p>

<p>I tried putting both parts into one at the end of the program with different conditions to make them true, but nothing I do seems to work. It's currently put into a function:</p>

<pre><code>#variable that causes Combat Mode, generates 'random encounter'
PlayerStep = 5

while True:#while the screen is up and the program is running
    for event in pygame.event.get():
        if event.type == KEYDOWN and PlayerSprite.canMove:
            #actions based on which key is pressed
            if event.key == K_w:#sprite moves up
                PlayerSprite.moveup()

            elif event.key == K_s:#sprite moves down
                PlayerSprite.movedown()

            elif event.key == K_a:#sprite moves right
                PlayerSprite.moveright()

            elif event.key == K_d:#sprite moves left - no diagonal movement
                PlayerSprite.moveleft()

            PlayerStep = PlayerStep - 1
            pygame.event.pump()
            print(KEYDOWN)
            pygame.display.update()

        if event.type == KEYDOWN and CombatMode() == True:
            if KEYDOWN == K_w or KEYDOWN == K_a or KEYDOWN == K_s or KEYDOWN == K_d: 
                    event.key = KEYUP #stops the WASD keys affecting the Combat Mode function

                #use the number buttons to attack
            if KEYDOWN == K_1:#'attack' option
                ClearMsg()
                TextBox(""You attack!"", (60, 50), 32)
                MonsterHP = MonsterHP - 2
                print(MonsterHP)

            if KEYDOWN == K_2:#heal option
                PlayerHP = PlayerHP + 10
                print(PlayerHP)

            if KEYDOWN == K_3:#'item's option
                #add square to display list of items
                BoxOption((255,250,191), (204,200,153), 150, 50, 400, 300, 4)

            if KEYDOWN == K_4:#'flee' option - ends Combat Mode and returns to main screen
                break
                return
            pygame.event.pump()

    #gives Player warning when PlayerStep is low    
    if PlayerStep &lt; 5 and PlayerStep != 0:
        TextBox(""Wait!"", (255,50), 32)
        pygame.event.pump()
    elif PlayerStep &lt;= 0:#causes Combat Mode when PlayerStep is 0
        PlayerSprite.nomove()
        Combat_Mode()
    pygame.display.update()
</code></pre>

<p>For context, the code is split into two sections: Explore Mode and Combat Mode. The Explore Mode is the main screen of the game where the sprite moves around, and Combat Mode is the turn-based battle system: a function that is called when the condition is met.</p>

<p><b>The WASD keys still work just fine, but nothing happens when the 1234 keys are pressed and the Combat Mode function is called.</b> </p>

<p>I'm very new to using pygame but I've been using python for a few years now (still not great, but fairly competent). Any help is very much appreciated!</p>",python|pygame,"<p>You did:</p>

<pre><code>print(KEYDOWN)     (Line 22)
if KEYDOWN == K_w or KEYDOWN == K_a or KEYDOWN == K_s or KEYDOWN == K_d: (Line 26)
if KEYDOWN == K_1: (Line 30)
if KEYDOWN == K_2: (Line 36)
if KEYDOWN == K_3: (Line 40)
if KEYDOWN == K_4: (Line 44)
</code></pre>

<p>but you need to replace all those <code>KEYDOWN</code>s with <code>event.key</code>
And also on line 27,<code>event.key = KEYUP</code> does not work. Near the beggining, all those <code>event.key</code>s you did were correct.</p>",1
99,39606184,How to launch IPython kernel in Jupyter?,"<p>I have both <code>Jupyter</code> and <code>IPython</code> installed on my Mac OSX El Capitan.</p>

<p>But, for some reason when I launch <code>Jupyter</code>, I'm not able to start any <code>ipython</code> kernels in notebook.</p>

<p>I think that <code>ipython</code> is installed because I can see it when I do <code>which ipython</code>: <code>/Library/Frameworks/Python.framework/Versions/3.5/bin/ipython</code></p>

<p>And, when I do <code>which jupyter</code> I see the following:  <code>/Library/Frameworks/Python.framework/Versions/2.7/bin/jupyter</code></p>

<p>When I launch <code>jupyter notebook</code> in the terminal, I'm able to open the <code>ipynb</code> file, but then I see this at the top:</p>

<p><a href=""https://i.stack.imgur.com/J3hic.png"" rel=""nofollow noreferrer"">IPython kernel ""None not found""?</a> (I can't embed images without sufficient reputation, so please click it).</p>

<p>...which is kind of strange because:</p>

<ul>
<li><p>1) it's a double negative</p></li>
<li><p>2) I already have IPython installed, so I don't know why it can't start the kernel (that's what this question says to try: <a href=""https://stackoverflow.com/questions/34851801/jupyter-cant-create-new-notebook"">Jupyter: can&#39;t create new notebook?</a>)</p></li>
</ul>

<p>Also, when I click the <code>New</code> button at the top, it does not show ""notebook"" under the options.  It only shows ""Text File"", ""Folder"", ""Terminal"":</p>

<p><a href=""https://i.stack.imgur.com/VWdr6.png"" rel=""nofollow noreferrer"">""New"" dropdown menu</a></p>",macos|ipython|jupyter|jupyter-notebook,"<p>The problem was that I had different versions of python associated with <code>Jupyter</code> and <code>IPython</code>.  To solve this, I did:</p>

<pre><code>sudo python3 -m pip install jupyter
sudo python3 -m pip install ipython
</code></pre>",2
100,39574924,Why is inverting a positive definite matrix via Cholesky decomposition slower than regular inversion with numpy?,"<p>It's mathematically known that inverting a positive definite matrix via Cholesky decomposition is faster than just using <code>np.linalg.inv(X)</code>. However, when I experimented with both and it turns out Cholesky decomposition's performance is worse!</p>

<pre><code># Inversion through Cholesky
p = X.shape[0]
Ip = np.eye(p)
%timeit scipy.linalg.cho_solve(scipy.linalg.cho_factor(X,lower=True), Ip)

The slowest run took 17.96 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 107 µs per loop


# Simple inversion
%timeit np.linalg.inv(X)

The slowest run took 58.81 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 25.9 µs per loop
</code></pre>

<p>The latter took shorter. Why is this? In <code>R</code>, <code>chol2inv(chol(X))</code> is usually faster than <code>solve(X)</code>.</p>",python|r|numpy|scipy|matrix-inverse,<p>np.linalg.inv uses parallel processing. Check your cpu spike when you run both functions. if you are using parallel processing to run multiple inv or Cholesky you will find Cholesky to be faster. </p>,0
101,39574924,Why is inverting a positive definite matrix via Cholesky decomposition slower than regular inversion with numpy?,"<p>It's mathematically known that inverting a positive definite matrix via Cholesky decomposition is faster than just using <code>np.linalg.inv(X)</code>. However, when I experimented with both and it turns out Cholesky decomposition's performance is worse!</p>

<pre><code># Inversion through Cholesky
p = X.shape[0]
Ip = np.eye(p)
%timeit scipy.linalg.cho_solve(scipy.linalg.cho_factor(X,lower=True), Ip)

The slowest run took 17.96 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 107 µs per loop


# Simple inversion
%timeit np.linalg.inv(X)

The slowest run took 58.81 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 25.9 µs per loop
</code></pre>

<p>The latter took shorter. Why is this? In <code>R</code>, <code>chol2inv(chol(X))</code> is usually faster than <code>solve(X)</code>.</p>",python|r|numpy|scipy|matrix-inverse,"<p>Perhaps your matrix is too small. I just tested matrix inversion for a $2\times2$ matrix in Matlab using Cholesky decomposition followed by LU decomposition. 999999 repeats take 5 seconds using Cholesky and only takes 3.4 seconds using LU. Indeed the algorithm of Cholesky followed by back substitution has a smaller big O result, but the result is an asymptotic result and only applies for big matrices.</p>

<pre><code>#LU decomposition
tic
for i=1:999999
    (V_i(:,:,2)+[0 1e-10;0 0])\eye(2);
end
toc
Elapsed time is 3.430676 seconds.

#Cholesky
tic
for i=1:999999
    (V_i(:,:,2))\eye(2);
end
toc
Elapsed time is 4.824175 seconds.
</code></pre>",2
102,39574924,Why is inverting a positive definite matrix via Cholesky decomposition slower than regular inversion with numpy?,"<p>It's mathematically known that inverting a positive definite matrix via Cholesky decomposition is faster than just using <code>np.linalg.inv(X)</code>. However, when I experimented with both and it turns out Cholesky decomposition's performance is worse!</p>

<pre><code># Inversion through Cholesky
p = X.shape[0]
Ip = np.eye(p)
%timeit scipy.linalg.cho_solve(scipy.linalg.cho_factor(X,lower=True), Ip)

The slowest run took 17.96 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 107 µs per loop


# Simple inversion
%timeit np.linalg.inv(X)

The slowest run took 58.81 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 25.9 µs per loop
</code></pre>

<p>The latter took shorter. Why is this? In <code>R</code>, <code>chol2inv(chol(X))</code> is usually faster than <code>solve(X)</code>.</p>",python|r|numpy|scipy|matrix-inverse,"<p>I run a comparison on 1000x1000 matrices, and the Inversion through Cholesky was roughly twice as fast.</p>",2
103,39726737,How can I travel through the words of a file in PYTHON?,"<p>I have a file .txt and I want to travel through the words of it. I have a problem, I need to remove the punctuation marks before travelling through the words. I have tried this, but it isn't removing the punctuation marks.</p>

<pre><code>file=open(file_name,""r"")
for word in file.read().strip("",;.:- '"").split():
     print word
file.close()
</code></pre>",python|python-2.7|text|punctuation,"<p>You can try using the <code>re</code> module:</p>

<pre><code>import re
with open(file_name) as f:
    for word in re.split('\W+', f.read()):
        print word
</code></pre>

<p>See the <a href=""https://docs.python.org/2/library/re.html"" rel=""nofollow"">re documentation</a> for more details.</p>

<p>Edit: In case of non ASCII characters, the previous code ignore them. In that case the following code can help:</p>

<pre><code>import re
with open(file_name) as f:
    for word in re.compile('\W+', re.unicode).split(f.read().decode('utf8')):
        print word
</code></pre>",0
104,39726737,How can I travel through the words of a file in PYTHON?,"<p>I have a file .txt and I want to travel through the words of it. I have a problem, I need to remove the punctuation marks before travelling through the words. I have tried this, but it isn't removing the punctuation marks.</p>

<pre><code>file=open(file_name,""r"")
for word in file.read().strip("",;.:- '"").split():
     print word
file.close()
</code></pre>",python|python-2.7|text|punctuation,"<p>The following code preserves apostrophes and blanks, and could easily be modified to preserve double quotations marks, if desired. It works by using a translation table based on a subclass of the string object. I think  the code is fairly easy to understand. It might be made more efficient if necessary.</p>

<pre><code>class SpecialTable(str):
    def __getitem__(self, chr):
        if chr==32 or chr==39 or 48&lt;=chr&lt;=57 \
            or 65&lt;=chr&lt;=90 or 97&lt;=chr&lt;=122:
            return chr
        else:
            return None

specialTable = SpecialTable()


with open('temp2.txt') as inputText:
    for line in inputText:
        print (line)
        convertedLine=line.translate(specialTable)
        print (convertedLine)
        print (convertedLine.split(' '))
</code></pre>

<p>Here's typical output.</p>

<pre><code>This! is _a_ single (i.e. 1) English sentence that won't cause any trouble, right?

This is a single ie 1 English sentence that won't cause any trouble right
['This', 'is', 'a', 'single', 'ie', '1', 'English', 'sentence', 'that', ""won't"", 'cause', 'any', 'trouble', 'right']
'nother one.

'nother one
[""'nother"", 'one']
</code></pre>",0
105,39726737,How can I travel through the words of a file in PYTHON?,"<p>I have a file .txt and I want to travel through the words of it. I have a problem, I need to remove the punctuation marks before travelling through the words. I have tried this, but it isn't removing the punctuation marks.</p>

<pre><code>file=open(file_name,""r"")
for word in file.read().strip("",;.:- '"").split():
     print word
file.close()
</code></pre>",python|python-2.7|text|punctuation,"<p>The problem with your current method is that <code>.strip()</code> doesn't really do what you want.  It removes leading and trailing characters (and you want to remove ones within the text), and if you want to specify characters in addition to whitespace, they need to be in a list.</p>

<p>Another problem is that there are many more potential punctuation characters (question marks, exclamations, unicode ellipses, em dashes) that wouldn't get filtered out by your list.  Instead, you can use <code>string.punctuation</code> to get a wide range of characters (note that <code>string.punctuation</code> doesn't include some non-English characters, so its viability may depend on the source of your input):</p>

<pre><code>import string
punctuation = set(string.punctuation)
text = ''.join(char for char in text if char not in punctuation)
</code></pre>

<p>An even faster method (shown in <a href=""https://stackoverflow.com/questions/265960/best-way-to-strip-punctuation-from-a-string-in-python"">other</a> <a href=""https://stackoverflow.com/questions/36464160/what-does-python-string-maketrans"">answers</a> on SO) uses <code>string.translate()</code> to replace the characters:</p>

<pre><code>import string
text = text.translate(string.maketrans('', ''), string.punctuation)
</code></pre>",1
106,39726737,How can I travel through the words of a file in PYTHON?,"<p>I have a file .txt and I want to travel through the words of it. I have a problem, I need to remove the punctuation marks before travelling through the words. I have tried this, but it isn't removing the punctuation marks.</p>

<pre><code>file=open(file_name,""r"")
for word in file.read().strip("",;.:- '"").split():
     print word
file.close()
</code></pre>",python|python-2.7|text|punctuation,"<p><code>strip()</code>only removes characters found at the beginning or end of a string.
So <code>split()</code> first to cut into words, then <code>strip()</code> to remove punctuation.</p>

<pre><code>import string

with open(file_name, ""rt"") as finput:
    for line in finput:
        for word in line.split():
            print word.strip(string.punctuation)
</code></pre>

<p>Or use a natural language aware library like <code>nltk</code>: <a href=""http://www.nltk.org/"" rel=""nofollow"">http://www.nltk.org/</a></p>",1
107,39726737,How can I travel through the words of a file in PYTHON?,"<p>I have a file .txt and I want to travel through the words of it. I have a problem, I need to remove the punctuation marks before travelling through the words. I have tried this, but it isn't removing the punctuation marks.</p>

<pre><code>file=open(file_name,""r"")
for word in file.read().strip("",;.:- '"").split():
     print word
file.close()
</code></pre>",python|python-2.7|text|punctuation,"<p>I would remove the punctuation marks with the <code>replace</code> function after storing the words in a list like so:</p>

<pre><code>with open(file_name,""r"") as f_r:
    words = []
    for row in f_r:
        words.append(row.split())
punctuation = [',', ';', '.', ':', '-']
words = [x.replace(y, '') for y in punctuation for x in words]
</code></pre>",-1
108,47126075,How to compress the string using gzip and encode in python 2.7,"<p>I'm trying to compress and encode my string using gGIP in python 2.7, I'm able to do that in Python 3 but I'm not getting same output in Python 2.7 version code:</p>

<p><strong>Python 3:</strong></p>

<pre><code>import sys
import redis
import io import StringIO
import gzip

redisConn = redis.StrictRedis(host=""127.0.0.1"", port=6379, db=0)

myValue = ""This is test data""
result = gzip.compress(myValue.encode())
redisConn.set(""myKey"", result)
</code></pre>

<p><strong>Python 2.7:</strong></p>

<pre><code>import sys
import redis
import StringIO
import gzip

redisConn = redis.StrictRedis(host=""127.0.0.1"", port=6379, db=0)
myValue = ""This is test data""
out = StringIO.StringIO()
gzip_s = gzip.GzipFile(fileobj=out, mode=""w"")
result = gzip_s.write(myValue.encode())
redisConn.set(""myKey"", result)
</code></pre>

<p>But Python 2.7 version code is breaking I'm getting an error:
'int' object has no attribute 'encode'</p>

<p>Can someone please help what's the equivalent code of Python 2.7 - my Python 3 version is working as expected.</p>

<p>Thanks for your help in advance. </p>",python|python-2.7|gzip|encode,"<p>Python 2 doesn't make the distinction between strings and bytes (even if the gzip stream is open as binary like here). You can write strings in a binary stream without needing to encode it. It has some drawbacks but in your case just remove the <code>.encode()</code> call:</p>

<pre><code>gzip_s.write(myValue)
</code></pre>

<p>for a Python 2/3 agnostic code, I would simply do:</p>

<pre><code>if bytes is str:
   # python 2, no need to do anything
   pass
else:
   # python 3+: encode string as bytes
   myValue = myValue.encode()

gzip_s.write(myValue)
</code></pre>

<p>EDIT: since you seem to issue a command <code>redisConn.set(""myKey"", result)</code>, don't forget to call:</p>

<pre><code>gzip_s.close()
</code></pre>

<p>before that, or it's not guaranteed that the file is fully flushed.</p>",0
109,47126075,How to compress the string using gzip and encode in python 2.7,"<p>I'm trying to compress and encode my string using gGIP in python 2.7, I'm able to do that in Python 3 but I'm not getting same output in Python 2.7 version code:</p>

<p><strong>Python 3:</strong></p>

<pre><code>import sys
import redis
import io import StringIO
import gzip

redisConn = redis.StrictRedis(host=""127.0.0.1"", port=6379, db=0)

myValue = ""This is test data""
result = gzip.compress(myValue.encode())
redisConn.set(""myKey"", result)
</code></pre>

<p><strong>Python 2.7:</strong></p>

<pre><code>import sys
import redis
import StringIO
import gzip

redisConn = redis.StrictRedis(host=""127.0.0.1"", port=6379, db=0)
myValue = ""This is test data""
out = StringIO.StringIO()
gzip_s = gzip.GzipFile(fileobj=out, mode=""w"")
result = gzip_s.write(myValue.encode())
redisConn.set(""myKey"", result)
</code></pre>

<p>But Python 2.7 version code is breaking I'm getting an error:
'int' object has no attribute 'encode'</p>

<p>Can someone please help what's the equivalent code of Python 2.7 - my Python 3 version is working as expected.</p>

<p>Thanks for your help in advance. </p>",python|python-2.7|gzip|encode,"<p>Here's a complete working example for Python 2.7. Note that <code>gzip_s.write()</code> returns the number of bytes written, so your code is passing an int to <code>redisConn.set(""myKey"", result)</code>. Also, you probably <em>should</em> explicitly encode and decode the data to avoid unexpected encoding/decoding errors if you ever need to store non-ASCII data.</p>

<pre><code># -*- coding: utf-8 -*-
import redis
import StringIO
import gzip

redis_cxn = redis.StrictRedis(host='127.0.0.1', port=6379, db=0)

test_data = u'This is some test data with a non-ASCII character: ñ'
print 'Test data:\n    ', test_data

out_file = StringIO.StringIO()

gzip_file = gzip.GzipFile(fileobj=out_file, mode='wb')

# If you don't encode the data yourself, it will be implicitly encoded as
# ASCII.
gzip_file.write(test_data.encode('utf-8'))

gzip_file.close()

# Get the bytes written to the underlying file object
value = out_file.getvalue()

print 'Setting value in Redis'
redis_cxn.set('key', value)

print 'Getting value from Redis'
retrieved_value = redis_cxn.get('key')

assert retrieved_value == value

in_file = StringIO.StringIO()
in_file.write(retrieved_value)
in_file.seek(0)

gzip_file = gzip.GzipFile(fileobj=in_file, mode='rb')
retrieved_data = gzip_file.read()
retrieved_data = retrieved_data.decode('utf-8')
gzip_file.close()

assert retrieved_data == test_data
print 'Data retrieved from Redis and unzippped:\n    ', test_data
</code></pre>",0
110,46921311,Fastest way to get rolling averages in pandas?,"<p>I have a list of nodes (about 2300 of them) that have hourly price data for about a year. I have a script that, for each node, loops through the times of the day to create a 4-hour trailing average, then groups the averages by month and hour. Finally, these hours in a month are averaged to give, for each month, a typical day of prices. I'm wondering if there is a faster way to do this because what I have seems to take a significant amount of time (about an hour). I also save the dataframes as csv files for later visualization (that's not the slow part). </p>

<pre><code>df (before anything is done to it)
        Price_Node_Name      Local_Datetime_HourEnding   Price      Irrelevant_column

0       My-node                 2016-08-17 01:00:00        20.95          EST
1       My-node                 2016-08-17 02:00:00        21.45          EST
2       My-node                 2016-08-17 03:00:00        25.60          EST

df_node (after the groupby as it looks going to csv)
Month        Hour             MA
1            0                23.55
1            1                23.45
1            2                21.63


 for node in node_names:
     df_node = df[df['Price_Node_Name'] == node]
     df_node['MA'] = df_node['Price'].rolling(4).mean()
     df_node = df_node.groupby([df_node['Local_Datetime_HourEnding'].dt.month, 
                      df_node['Local_Datetime_HourEnding'].dt.hour]).mean()
     df_node.to_csv('%s_rollingavg.csv' % node)
</code></pre>

<p>I get an weak error warning me about SetWithCopy, but I haven't quite figured out how to use .loc here since the column ['MA'] doesn't exist until I create it in this snippet and any way I can think of to create it before hand and fill it seems slower than what I have. Could be totally wrong though. Any help would be great. </p>

<p>python 3.6</p>",python|pandas|loops,"<p>Here's a few things to try:</p>

<p>set 'Price_Node_name' to the index before the loop</p>

<pre><code>df.set_index('Price_Node_name', inplace=True)
for node in node_names:
    df_node = df[node]
</code></pre>

<p>use <code>sort=False</code> as a kwarg in the groupby</p>

<pre><code>df_node.groupby(..., sort=False).mean()
</code></pre>

<p>Perform the rolling average AFTER the groupby, or don't do it at all--I don't think you need it in your case. Averaging the hourly totals for a month will give you the expected values for a typical day, which is what you desire. If you still want the rolling average, perform it on the averaged hourly totals for each month.</p>",0
111,46921311,Fastest way to get rolling averages in pandas?,"<p>I have a list of nodes (about 2300 of them) that have hourly price data for about a year. I have a script that, for each node, loops through the times of the day to create a 4-hour trailing average, then groups the averages by month and hour. Finally, these hours in a month are averaged to give, for each month, a typical day of prices. I'm wondering if there is a faster way to do this because what I have seems to take a significant amount of time (about an hour). I also save the dataframes as csv files for later visualization (that's not the slow part). </p>

<pre><code>df (before anything is done to it)
        Price_Node_Name      Local_Datetime_HourEnding   Price      Irrelevant_column

0       My-node                 2016-08-17 01:00:00        20.95          EST
1       My-node                 2016-08-17 02:00:00        21.45          EST
2       My-node                 2016-08-17 03:00:00        25.60          EST

df_node (after the groupby as it looks going to csv)
Month        Hour             MA
1            0                23.55
1            1                23.45
1            2                21.63


 for node in node_names:
     df_node = df[df['Price_Node_Name'] == node]
     df_node['MA'] = df_node['Price'].rolling(4).mean()
     df_node = df_node.groupby([df_node['Local_Datetime_HourEnding'].dt.month, 
                      df_node['Local_Datetime_HourEnding'].dt.hour]).mean()
     df_node.to_csv('%s_rollingavg.csv' % node)
</code></pre>

<p>I get an weak error warning me about SetWithCopy, but I haven't quite figured out how to use .loc here since the column ['MA'] doesn't exist until I create it in this snippet and any way I can think of to create it before hand and fill it seems slower than what I have. Could be totally wrong though. Any help would be great. </p>

<p>python 3.6</p>",python|pandas|loops,"<p>edit: I might have misread the question here, hopefully this at least sparks some ideas for the solution. </p>

<p>I think it is useful to have the index as the datetime column when working with time series data in Pandas.</p>

<p>Here is some sample data:</p>

<pre><code>Out[3]:
                          price
date
2015-01-14 00:00:00  155.427361
2015-01-14 01:00:00  205.285202
2015-01-14 02:00:00  205.305021
2015-01-14 03:00:00  195.000000
2015-01-14 04:00:00  213.102000
2015-01-14 05:00:00  214.500000
2015-01-14 06:00:00  222.544375
2015-01-14 07:00:00  227.090251
2015-01-14 08:00:00  227.700000
2015-01-14 09:00:00  243.456190
</code></pre>

<p>We use <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.rolling.html"" rel=""nofollow noreferrer""><code>Series.rolling</code></a> to create an <code>MA</code> column, i.e. we apply the method to the <code>price</code> column, with a two-period window, and call <code>mean</code> on the resulting <code>rolling</code> object:</p>

<pre><code>In [4]: df['MA'] = df.price.rolling(window=2).mean()

In [5]: df
Out[5]:
                          price          MA
date
2015-01-14 00:00:00  155.427361         NaN
2015-01-14 01:00:00  205.285202  180.356281
2015-01-14 02:00:00  205.305021  205.295111
2015-01-14 03:00:00  195.000000  200.152510
2015-01-14 04:00:00  213.102000  204.051000
2015-01-14 05:00:00  214.500000  213.801000
2015-01-14 06:00:00  222.544375  218.522187
2015-01-14 07:00:00  227.090251  224.817313
2015-01-14 08:00:00  227.700000  227.395125
2015-01-14 09:00:00  243.456190  235.578095
</code></pre>

<p>And if you want <code>month</code> and <code>hour</code> columns, can extract those from the index: </p>

<pre><code>In [7]: df['month'] = df.index.month  

In [8]: df['hour'] = df.index.hour

In [9]: df
Out[9]:
                          price          MA  month  hour
date
2015-01-14 00:00:00  155.427361         NaN      1     0
2015-01-14 01:00:00  205.285202  180.356281      1     1
2015-01-14 02:00:00  205.305021  205.295111      1     2
2015-01-14 03:00:00  195.000000  200.152510      1     3
2015-01-14 04:00:00  213.102000  204.051000      1     4
2015-01-14 05:00:00  214.500000  213.801000      1     5
2015-01-14 06:00:00  222.544375  218.522187      1     6
2015-01-14 07:00:00  227.090251  224.817313      1     7
2015-01-14 08:00:00  227.700000  227.395125      1     8
2015-01-14 09:00:00  243.456190  235.578095      1     9
</code></pre>

<p>Then we can use <code>groupby</code>:</p>

<pre><code>In [11]: df.groupby([
    ...:     df['month'],
    ...:     df['hour']
    ...: ]).mean()[['MA']]
Out[11]:
                    MA
month hour
1     0            NaN
      1     180.356281
      2     205.295111
      3     200.152510
      4     204.051000
      5     213.801000
      6     218.522187
      7     224.817313
      8     227.395125
      9     235.578095
</code></pre>",1
112,46867659,Flask mysql getting response to SQL commands (not using SQL-Alchemy),"<p>First, I understand the value of using ORM solutions, and will use SQL-Alchemy later.</p>

<p>I have installed Flask and am using flask-mysql.</p>

<p>I do not know how to get the results for a SQL ""desc "" command.</p>

<p>Here is the code I'm working with:</p>

<pre><code>from flask import Flask, render_template, request, redirect, jsonify
import requests
from flaskext.mysql import MySQL

app = Flask(__name__)

@app.route(""/"")
def main():
    return render_template('login.html')

@app.route(""/login"", methods=['POST'])
def login():
    #username = request.form['username']   #not using the form fields yet
    #password = request.form['password']
    mysql = MySQL()
    app.config['MYSQL_DATABASE_USER'] = '&lt;my user here&gt;'
    app.config['MYSQL_DATABASE_PASSWORD'] = '&lt;password here&gt;'
    app.config['MYSQL_DATABASE_DB'] = '&lt;database name here&gt;'
    app.config['MYSQL_DATABASE_HOST'] = '&lt;database server IP address here&gt;'
    mysql.init_app(app)

    conn = mysql.connect()
    cursor = conn.cursor()
    #cursor = mysql.connection.cursor()  #invalid code, at least for this version of flask-mysql
    cursor.execute(""desc user;"")
    result = jsonify(cursor.fetchall())

    #row = cursor.fetchone()
    return ""&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;"" + str(result)+ ""&lt;/body&gt;&lt;/html&gt;""

if __name__ == ""__main__"":
    app.run()
</code></pre>

<p>It appears to be connecting to the database, logging in, and sending the desc command OK because result's contents are ""Response 268 bytes [200 OK]"" (can see that by looking at the page source code after getting the response in the browser).</p>

<p>Is there any way to get the results (table description) and not just an ""OK I ran this command""?</p>

<p>Thank you.</p>",python|mysql|sql|flask|flask-mysql,"<p>I suppose you would like to get all records and sort them in desc order. You may try this.</p>

<pre><code>from flask_mysqldb import MySQL

app.config['MYSQL_HOST'] = 'localhost'
app.config['MYSQL_USER'] = 'root'
app.config['MYSQL_PASSWORD'] = 
app.config['MYSQL_DB'] = 
app.config['MYSQL_CURSORCLASS'] = 'DictCursor'


# initialize mysql
mysql = MySQL(app)

...

@app.route('/posts')
def posts():
    cur = mysql.connection.cursor()
    result = cur.execute('SELECT * FROM posts ORDER BY postdate DESC ')
    posts = cur.fetchall()

    if result &gt; 0:
        return render_template('posts.html', posts=posts)
    else:
        message = 'I shouldn't find any post'
        return render_template('posts.html', message=message)

    cur.close
</code></pre>",0
113,46918560,What does this actually mean? [Mainly on the for loop],"<p>I must confess that I am not a great programmer (basically I am a beginner). I would like some help with understanding what is going in the code (which does work) but I need to ensure full comprehension before I feel ready to move on.</p>

<p>I have researched upon the 'for loop' but still, I cannot grasp what goes on in this part of code which was constructed with some help by observing answers to similar tasks. </p>

<p><strong>Please could someone tell me what exactly goes on specifically on the 'for loop'!</strong></p>

<p>This is the code:</p>

<pre><code>while Checks != 5:
  for seqs in seqs:
    if seqs in UserPass:
      NumOfSeqs = UserPass.count(seqs)
      PointScore -= 5 * NumOfSeqs
      x += 1
  Checks += 1
print(PointScore)
</code></pre>

<p>Thanks you in advance!</p>",python,"<p>A loop like:</p>

<pre><code>for x in y:
    some code here
</code></pre>

<p>means to repeatedly execute <code>some code here</code>, each time setting <code>x</code> to the next item in <code>y</code>. <code>y</code> can be any kind of iterable object: a list (it loops through the elements), a string (it loops through the characters), a dictionary (it loops through the keys), etc.</p>

<p>So when you write</p>

<pre><code>for seqs in seqs:
</code></pre>

<p>the first iteration will set <code>seqs</code> to the first item in <code>seqs</code>, the second iteration will set it to the second item, and so on.</p>

<p>Since you're using the same variable for the original list and the iteration variable, when the loop is done <code>seqs</code> will hold the last item, not the original list. You almost certainly don't want to do that, you should use a different variable, e.g.</p>

<pre><code>for seq in seqs:
</code></pre>

<p>Then use <code>seq</code> inside the loop to refer to the current element.</p>",0
114,20970413,Regular expression match a or b pattern,"<p>I've got a small problem with the regular expression library in python, specifically with the match method with different patterns:</p>

<pre><code>import re
files = [""noi100k_0p55m0p3_fow71f"",\
     ""fnoi100v5_71f60s"",\
     ""noi100k_0p55m0p3_151f_560s"",\
     ""noi110v25_560s""]

for i in files:
    keyws = i.split(""_"")
    for j in keyws:
        if re.match(r""noi(\w+)k|fnoi(\w+)v(\w+)|noi(\w+)v(\w+)"",j): 
            print ""Results :"", re.match(r""noi(\w+)k|fnoi(\w+)v(\w+)|noi(\w+)v(\w+)"",j).group(1)
</code></pre>

<p>The results are:</p>

<pre><code>Results : 100
Results : None
Results : 100
Results : None
</code></pre>

<p>When I would expect:</p>

<pre><code>Results : 100
Results : 100
Results : 100
Results : 110
</code></pre>

<p>The only match is for <code>""noi(\w+)k""</code> it does not seems to test the other patterns but <code>re.match(a|b,string)</code> should check the <code>a</code> and <code>b</code> pattern no?</p>",python|regex,"<p>Your groups are numbered from left to right; if <em>one</em> of the alternatives matches, then it is <em>that group</em> you need to extract.</p>

<p>You have 5 groups, either group 1, or groups 2 and 3, or groups 4 and 5 will contain a match:</p>

<pre><code>for j in keyws:
    match = re.match(r""noi(\w+)k|fnoi(\w+)v(\w+)|noi(\w+)v(\w+)"",j)
    if match: 
        results = match.group(1) or match.group(2) or match.group(4)
        print ""Results :"", results
</code></pre>

<p>would print the first matched <code>\w+</code> group in each alternative.</p>

<p>Demo:</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; files = [""noi100k_0p55m0p3_fow71f"",\
...      ""fnoi100v5_71f60s"",\
...      ""noi100k_0p55m0p3_151f_560s"",\
...      ""noi110v25_560s""]
&gt;&gt;&gt; for i in files:
...     keyws = i.split(""_"")
...     for j in keyws:
...         match = re.match(r""noi(\w+)k|fnoi(\w+)v(\w+)|noi(\w+)v(\w+)"",j)
...         if match: 
...             results = match.group(1) or match.group(2) or match.group(4)
...             print ""Results :"", results
... 
Results : 100
Results : 100
Results : 100
Results : 110
</code></pre>

<p>If you are not going to use of the other two captured <code>(\w+)</code> groups, remove the parenthesis to make picking the matched group a little easier:</p>

<pre><code>match = re.match(r""noi(\w+)k|fnoi(\w+)v\w+|noi(\w+)v\w+"",j)
if match: 
    results = next(g for g in match.groups() if g)
    print ""Results :"", results
</code></pre>

<p>which picks the first matched group that is not empty.</p>

<p>Your pattern could be further simplified if you accept <code>fnoi(\w+)k</code> as a possibility too:</p>

<pre><code>match = re.match(r""f?noi(\w+)[kv](\w*)"", j)
</code></pre>

<p>at which point there is only ever a <code>.group(1)</code>.</p>",1
115,20974780,Access django sqlite db from external script,"<p>I want to prepopulate my db using an external script. The script is the following</p>

<pre><code># -*- coding:utf-8-*-
import os, sys
from random import choice
PROJECT_DIR = os.path.abspath(os.path.join(os.path.abspath(__file__),'..','..'))

sys.path.append(PROJECT_DIR)
os.environ['DJANGO_SETTINGS_MODULE']='geoedu.settings'

from school.models import School    
from student.models import Student

if __name__=='__main__':
    student = Student(first_name=choice(first_names_males), last_name=choice(last_names_males),
                  father_name=choice(first_names_males), mother_name=choice(first_names_females),
                  mobile=choice(mobiles), telephone=choice(telephones))
    student.save()
</code></pre>

<p>where the arguments in choice are lists with names and telephones. When i run it though i get the following error</p>

<pre><code>django.db.utils.DatabaseError: no such table: student_student
</code></pre>

<p>The directory tree</p>

<pre><code>geoedu
├── geoedu
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── settings.py
│   ├── settings.pyc
│   ├── urls.py
│   ├── urls.pyc
│   ├── wsgi.py
│   └── wsgi.pyc
├── geoedu.db
├── geoedu.sublime-project
├── geoedu.sublime-workspace
├── manage.py
├── school
│   ├── admin.py
│   ├── admin.pyc
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── models.py
│   ├── models.pyc
│   ├── tests.py
│   └── views.py
├── scripts
│   └── populate.py
└── student
    ├── admin.py
    ├── admin.pyc
    ├── __init__.py
    ├── __init__.pyc
    ├── models.py
    ├── models.pyc
    ├── tests.py
    └── views.py
</code></pre>

<p>What it does is it creates a new geoedu.db inside the script folder and uses that(which is empty and has no student_student table ofcourse)</p>

<p>Why is that happening?The PROJECT_DIR is the correct one(printed it out) and is the root of the tree that is the geodedu on the top of all. </p>

<p>EDIT: new geoedu.db gets created when creating new student. If I comment out those lines geoedu.db doesn't get created. </p>",python|django|sqlite|external-script,"<p>Defining models in Django helps you to manipulate instances.</p>

<p>But, before, you have to create the table ""skeleton"" in your sqlite db</p>

<p>For this, you just need to synchronize the db with Django by doing :</p>

<pre><code>python manage.py syncdb
</code></pre>

<p>This has to be done one time only.</p>

<p>In the future, you will probably needs to make your models evolve (thus needing similar db evolutions), at this time South - or adhoc schema evolution queries - will be useful (<a href=""http://south.aeracode.org/"" rel=""nofollow"">http://south.aeracode.org/</a>) but as far as you're prototyping, you can just remove db and recreate it with good table by executing syncdb</p>",0
116,20974780,Access django sqlite db from external script,"<p>I want to prepopulate my db using an external script. The script is the following</p>

<pre><code># -*- coding:utf-8-*-
import os, sys
from random import choice
PROJECT_DIR = os.path.abspath(os.path.join(os.path.abspath(__file__),'..','..'))

sys.path.append(PROJECT_DIR)
os.environ['DJANGO_SETTINGS_MODULE']='geoedu.settings'

from school.models import School    
from student.models import Student

if __name__=='__main__':
    student = Student(first_name=choice(first_names_males), last_name=choice(last_names_males),
                  father_name=choice(first_names_males), mother_name=choice(first_names_females),
                  mobile=choice(mobiles), telephone=choice(telephones))
    student.save()
</code></pre>

<p>where the arguments in choice are lists with names and telephones. When i run it though i get the following error</p>

<pre><code>django.db.utils.DatabaseError: no such table: student_student
</code></pre>

<p>The directory tree</p>

<pre><code>geoedu
├── geoedu
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── settings.py
│   ├── settings.pyc
│   ├── urls.py
│   ├── urls.pyc
│   ├── wsgi.py
│   └── wsgi.pyc
├── geoedu.db
├── geoedu.sublime-project
├── geoedu.sublime-workspace
├── manage.py
├── school
│   ├── admin.py
│   ├── admin.pyc
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── models.py
│   ├── models.pyc
│   ├── tests.py
│   └── views.py
├── scripts
│   └── populate.py
└── student
    ├── admin.py
    ├── admin.pyc
    ├── __init__.py
    ├── __init__.pyc
    ├── models.py
    ├── models.pyc
    ├── tests.py
    └── views.py
</code></pre>

<p>What it does is it creates a new geoedu.db inside the script folder and uses that(which is empty and has no student_student table ofcourse)</p>

<p>Why is that happening?The PROJECT_DIR is the correct one(printed it out) and is the root of the tree that is the geodedu on the top of all. </p>

<p>EDIT: new geoedu.db gets created when creating new student. If I comment out those lines geoedu.db doesn't get created. </p>",python|django|sqlite|external-script,"<p>The problem was that i hadn't used an absolute path for the database name in the settings.py file. I added this in the NAME of the database engine</p>

<pre><code>'NAME':os.path.join(SETTINGS_DIR,'geoedu.db')
</code></pre>

<p>and everything worked as it should. PROJECT_DIR is</p>

<pre><code>SETTINGS_DIR = os.path.dirname(__file__)
</code></pre>

<p>so the database is created inside settings folder. If you wanted inside projects folder you should do</p>

<pre><code>'NAME':os.path.abspath(os.path.join(SETTINGS_DIR,'..','geoedu.db'))
</code></pre>",0
117,21418823,Dynamically increment/decrement the value of a variable?,"<p>I have a situation where the variable <code>max_order</code> is calculated depending on the value of other variables such that sometimes <code>max_order</code> is positive and others negative. Here's my code:</p>

<pre><code>def delta_value(direction):
    diff=value2-value1
    if diff &gt; 0: ascend=""+""; descend=""-""
    elif diff &lt; 0: ascend=""-""; descend=""+""
    if direction == ""increase"": return ascend
    elif direction == ""decrease"": return descend

def calc_max_order():
    global max_order
    if num &lt; max_num:
        while num &lt; max_num:
            exec(""max_order%s=1"" % delta_value(""decrease""))
    elif num &gt; max_num:
        while num &gt; max_num:
            exec(""max_order%s=1"" % delta_value(""increase""))
</code></pre>

<p>This code doesn't seem to work (i.e. it doesn't change the value of max_order), but there are no errors returned. It stays stuck in the while loops. The code does work when <code>calc_max_order</code> is not a function, but in the main block. However, I want to make it a function to clean up my code.</p>

<p>I know that most people say it is unwise to use exec, but I'm just starting to learn python and I'm not sure how else to do it. I suppose I could use a bunch of if statements, but I imagine there is a cleaner way to do it.</p>

<p>So, to be clear, my question is: </p>

<p>Is there a way to either make <code>exec(""max_order%s=1"" % delta_order_value(""decrease""))</code> work inside a function, or is there an alternative method to dynamically increse/decrease <code>max_order</code> depending on the output of <code>delta_value</code>?</p>",python,"<p>The use of <code>exec()</code> is a huge red flag. You can do this with a fixed <code>+=</code> and a varying delta.</p>

<pre><code>delta = (+1 if ascending else -1)
max_order += delta
</code></pre>

<p>And if you need to reverse the sense of <code>delta</code>, negate it:</p>

<pre><code>max_order -= delta;
# or
delta = -delta;
# or
delta *= -1;
</code></pre>",1
118,21418823,Dynamically increment/decrement the value of a variable?,"<p>I have a situation where the variable <code>max_order</code> is calculated depending on the value of other variables such that sometimes <code>max_order</code> is positive and others negative. Here's my code:</p>

<pre><code>def delta_value(direction):
    diff=value2-value1
    if diff &gt; 0: ascend=""+""; descend=""-""
    elif diff &lt; 0: ascend=""-""; descend=""+""
    if direction == ""increase"": return ascend
    elif direction == ""decrease"": return descend

def calc_max_order():
    global max_order
    if num &lt; max_num:
        while num &lt; max_num:
            exec(""max_order%s=1"" % delta_value(""decrease""))
    elif num &gt; max_num:
        while num &gt; max_num:
            exec(""max_order%s=1"" % delta_value(""increase""))
</code></pre>

<p>This code doesn't seem to work (i.e. it doesn't change the value of max_order), but there are no errors returned. It stays stuck in the while loops. The code does work when <code>calc_max_order</code> is not a function, but in the main block. However, I want to make it a function to clean up my code.</p>

<p>I know that most people say it is unwise to use exec, but I'm just starting to learn python and I'm not sure how else to do it. I suppose I could use a bunch of if statements, but I imagine there is a cleaner way to do it.</p>

<p>So, to be clear, my question is: </p>

<p>Is there a way to either make <code>exec(""max_order%s=1"" % delta_order_value(""decrease""))</code> work inside a function, or is there an alternative method to dynamically increse/decrease <code>max_order</code> depending on the output of <code>delta_value</code>?</p>",python,"<p>Change <code>delta_value()</code> to:</p>

<pre><code>def delta_value(direction):
    diff = cmp(value2, value1)   # -1 for &lt;, 0 for ==, 1 for &gt;
    if direction == ""increase"": diff = -dif
    return diff
</code></pre>

<p><em>...meanwhile...</em></p>

<p>In place of the <code>exec</code>, you can now have:</p>

<pre><code>max_order = max_order + diff
</code></pre>

<p>Diff is either positive or negative, rather than '+' or '-'</p>",1
119,33703325,How can I run a script as part of a Travis CI build?,"<p>As part of a Python package I have a script <code>myscript.py</code> at the root of my project and </p>

<pre><code>setup(scripts=['myscript.py'], ...) 
</code></pre>

<p>in my <code>setup.py</code>.</p>

<p>Is there an entry I can provide to my <code>.travis.yml</code> that will run <code>myscript.py</code> (e.g. after my tests)?</p>

<p>I've tried </p>

<pre><code>language: python

python:
  - ""2.7""

install:
  - pip install -r requirements.txt
  - pip install pytest

script:
  - py.test -v --color=yes --exitfirst --showlocals --durations=5
  - myscript.py some args
</code></pre>

<p>but get a ""command not found"" error.</p>

<p>I don't need (or really want) the script to be part of the test suite, I just want to see it's output in the Travis log (and, of corse, fail the build if it errors).</p>

<p>How can I run a package script as part of a Travis CI build?</p>",python|travis-ci,"<p>As mentioned in the comments (you need to call python):</p>

<pre><code>language: python

python:
  - ""2.7""

install:
  - pip install -r requirements.txt
  - pip install pytest

script:
  - py.test -v --color=yes --exitfirst --showlocals --durations=5
  - python myscript.py some args
</code></pre>

<p>(Prepending python in the last line.)</p>

<p>Aside: travis should have pytest preinstalled.</p>

<hr>

<p>There's also an <code>after_success</code> block which can be useful in these cases (for running a script only if the tests pass, and not affecting the success of the builds) - often this is used for posting coverage stats.</p>

<pre><code>language: python

python:
  - ""2.7""

install:
  - pip install -r requirements.txt
  - pip install pytest

script:
  - py.test -v --color=yes --exitfirst --showlocals --durations=5

after_success:
  - python myscript.py some args
</code></pre>",9
120,33953054,How to write domain filter onchange function for one2many field in odoo?,"<p>In the following case I have written <strong>def onchange_insp(self, cr, uid, ids, folionum,context=None)</strong>  function  but at <strong>inspec_type</strong> in  <strong>'feedback.tree'</strong> is not working properly.</p>

<pre><code>    from openerp.osv import fields, osv
    from openerp import api
    import logging

    class feedback_form(osv.Model):
        _name = 'feedback.form'

        _columns = {
            'company_id111': fields.many2one('res.company', 'Substation', required=True),

            'folionum' : fields.many2one('calendar.event','Maintenance ID',),
            'folio_number' : fields.many2one('asset.asset','Folio number',),
            # this field is filtering properly
            'inspec_type' : fields.many2one('asset1.inspection','Inspection Type',),

            'frequency' : fields.char('Frequency'),
            'shutdown' : fields.char('Shut Down'),
            #'insp_msr1' : fields.many2one('results.measure','Result',),

            'insp_rslt' : fields.one2many('feedback.tree','insp_rsltts','Inspection Result',),

        }


        def onchange_insp(self, cr, uid, ids, folionum,context=None):
            dids = []
            res = {}
            for record in self.pool.get('calendar.event').browse(cr, uid, folionum, context=context):
                dids = [x.id for x in record.inspection_name]
            dids1 = []
            for record in self.pool.get('calendar.event').browse(cr, uid, folionum, context=context):
                dids1 = [x.id for x in record.folio_num1]
            res.update({'inspec_type':[('id','in',dids)]})

            res.update({'folio_number':[('id','in',dids1)]})

            return {'domain':res}


    feedback_form()

    class feedback_tree(osv.Model):
        _name = 'feedback.tree'


        _columns = {
            **# How to do this for this field please reply me soon**
            'inspec_type' : fields.many2one('asset1.inspection','Inspection Type',),
            'valuess' : fields.char('Values/Results'),
            'insp_rsltts': fields.many2one('feedback.form','Result Id'),
            'insp_msr1' : fields.many2one('results.measure','Result',),
        }



        def onchange_measure(self, cr, uid, ids, inspec_type, context=None):
            dids = []
            for record in self.pool.get('asset1.inspection').browse(cr, uid, inspec_type, context=context):
                dids = [x.id for x in record.msr_insp]
            return {'domain':{'insp_msr1':[('id','in',dids)]}}

    feedback_tree()
</code></pre>",python|openerp,"<p>With version odoo 10.0</p>

<blockquote>
  <p>Solution applicable to one2many and many2many too :)</p>
</blockquote>

<p>class res_partner(models.Model):
    _inherit = ""res.partner""</p>

<pre><code>sb_sector_id = fields.Many2one('sb.business_sector',string=""Business Sector"" )
sb_categories_id = fields.Many2many('sb.business_categories','rel_sb_business_cates','confirm_id','status_id', string='Business Categories', required=False)

sb_activity_id = fields.Many2many('sb.business_activties','rel_sb_business_activties','confirm_id','status_id', string='Neclamenture of activities', required=False)


@api.onchange('sb_sector_id')
def onchange_sb_sector_id(self):
    return {'domain':{'sb_categories_id':[('sector_id','=',self.sb_sector_id.id if self.sb_sector_id else False)]}}
</code></pre>

<p>Mainly in return you had to write domain with field and give domain value.</p>

<pre><code>return {'domain':{'sb_categories_id':[('sector_id','=',self.sb_sector_id.id if self.sb_sector_id else False)]}}
</code></pre>",4
121,33953054,How to write domain filter onchange function for one2many field in odoo?,"<p>In the following case I have written <strong>def onchange_insp(self, cr, uid, ids, folionum,context=None)</strong>  function  but at <strong>inspec_type</strong> in  <strong>'feedback.tree'</strong> is not working properly.</p>

<pre><code>    from openerp.osv import fields, osv
    from openerp import api
    import logging

    class feedback_form(osv.Model):
        _name = 'feedback.form'

        _columns = {
            'company_id111': fields.many2one('res.company', 'Substation', required=True),

            'folionum' : fields.many2one('calendar.event','Maintenance ID',),
            'folio_number' : fields.many2one('asset.asset','Folio number',),
            # this field is filtering properly
            'inspec_type' : fields.many2one('asset1.inspection','Inspection Type',),

            'frequency' : fields.char('Frequency'),
            'shutdown' : fields.char('Shut Down'),
            #'insp_msr1' : fields.many2one('results.measure','Result',),

            'insp_rslt' : fields.one2many('feedback.tree','insp_rsltts','Inspection Result',),

        }


        def onchange_insp(self, cr, uid, ids, folionum,context=None):
            dids = []
            res = {}
            for record in self.pool.get('calendar.event').browse(cr, uid, folionum, context=context):
                dids = [x.id for x in record.inspection_name]
            dids1 = []
            for record in self.pool.get('calendar.event').browse(cr, uid, folionum, context=context):
                dids1 = [x.id for x in record.folio_num1]
            res.update({'inspec_type':[('id','in',dids)]})

            res.update({'folio_number':[('id','in',dids1)]})

            return {'domain':res}


    feedback_form()

    class feedback_tree(osv.Model):
        _name = 'feedback.tree'


        _columns = {
            **# How to do this for this field please reply me soon**
            'inspec_type' : fields.many2one('asset1.inspection','Inspection Type',),
            'valuess' : fields.char('Values/Results'),
            'insp_rsltts': fields.many2one('feedback.form','Result Id'),
            'insp_msr1' : fields.many2one('results.measure','Result',),
        }



        def onchange_measure(self, cr, uid, ids, inspec_type, context=None):
            dids = []
            for record in self.pool.get('asset1.inspection').browse(cr, uid, inspec_type, context=context):
                dids = [x.id for x in record.msr_insp]
            return {'domain':{'insp_msr1':[('id','in',dids)]}}

    feedback_tree()
</code></pre>",python|openerp,"<p>You can try <a href=""https://www.odoo.com/forum/how-to/developers-13/what-should-onchange-methods-do-and-return-57760"" rel=""nofollow noreferrer"">this link</a>,</p>

<p><strong>Example</strong>:</p>

<pre><code>'insp_rslt' : fields.one2many('feedback.tree','insp_rsltts','Inspection Result', domain=[('valuess', '=', 'as u like string')])
</code></pre>",0
122,33928305,"In Python, is there a string s such that float(s) is None?","<p>I'm curious. For context, I have a list of string representations of floats (including some None values), and I'd like to use a list comprehension to convert it to a list of actual floats. If the string is 'None', then the code gives an error:</p>

<pre><code>arr = ['1', '2.5', 'None']
arr2 = [float(i) for i in arr]
# Gives an error
</code></pre>

<p>I know that the float function takes inf, -inf, or nan, and I could use those for a workaround, but I'm curious if there's a string that gets cast to None.</p>",python|python-2.7,"<p>A simple solution would be to use a ternary statement</p>

<pre><code>arr2 = [None if i == ""None"" else float(i) for i in arr]
</code></pre>",4
123,16250408,what really happen when modules imported?,"<p>I import a part of module instead of whole point because I am interested in accelerating my script.</p>

<p>I have the file called theFile.py</p>

<pre><code>def goza():
    print vari
    funct()

vari = ""called variable""

def funct():
    print ""CALLED FUNCTION""

something_else = 12
</code></pre>

<p>I if in my main:</p>

<pre><code>from theFile import goza
</code></pre>

<p>And then run goza()
It really has variable vari and function fuct.
It means that if I import:</p>

<pre><code>from theFile import goza
</code></pre>

<p>It actually import the whole module?
But the only variable that is easy accessed is goza?
How can import only part of the code as I expected?
(that if I do something like from theFile import goza and use goza,
that will be an error says there is no variable vari and function funct).</p>

<p>Thank you very much!</p>",python|python-2.7|python-2.6|python-import,"<p>Python will always execute the whole file at import time, and then those variables in module scope at the end of the execution are importable.</p>

<p>If there are parts of your module which you'd like to only execute when it's run as a script but not at import time then the idiom is to use:</p>

<pre><code>def main():
    code_here

if __name__ == ""__main__"":
    main()
</code></pre>

<p>i.e.</p>

<pre><code>def goza():
    print vari
    funct()

def main():
    vari = ""called variable""

    def funct():
        print ""CALLED FUNCTION""

    something_else = 12

if __name__ == ""__main__"":
    main()
</code></pre>

<p>see <a href=""http://docs.python.org/2/library/__main__.html"" rel=""nofollow"">http://docs.python.org/2/library/<strong>main</strong>.html</a></p>",2
124,16250408,what really happen when modules imported?,"<p>I import a part of module instead of whole point because I am interested in accelerating my script.</p>

<p>I have the file called theFile.py</p>

<pre><code>def goza():
    print vari
    funct()

vari = ""called variable""

def funct():
    print ""CALLED FUNCTION""

something_else = 12
</code></pre>

<p>I if in my main:</p>

<pre><code>from theFile import goza
</code></pre>

<p>And then run goza()
It really has variable vari and function fuct.
It means that if I import:</p>

<pre><code>from theFile import goza
</code></pre>

<p>It actually import the whole module?
But the only variable that is easy accessed is goza?
How can import only part of the code as I expected?
(that if I do something like from theFile import goza and use goza,
that will be an error says there is no variable vari and function funct).</p>

<p>Thank you very much!</p>",python|python-2.7|python-2.6|python-import,"<p><strong>Don't worry about it.</strong></p>

<p>I'm almost positive the entire module is compiled to bytecode and then read into memory, regardless. The different <code>import</code> statements only have to do with which classes/functions/variables are brought into the global scope.</p>

<p>So basically you're worrying about nothing.  This should have absolutely zero impact on the performance of your script. Spend your time looking for improvements elsewhere.</p>",2
125,16472639,Setting up idle thread/signalling thread,"<p>I'm using Python with wxPython for writing an app.</p>

<p>The method I'm considering to accomplish this may not be the best - if that's the case, let me know because I'm open to refactoring.</p>

<p>Right now, I have one GUI form. The main program start point instantiates an instance of the GUI form then runs wx.mainLoop(), which causes the app's main initial thread to block for the lifetime of the app.</p>

<p>We of course know that when events happen in the UI, the UI thread runs the code for them.</p>

<p>Now, I have another thread - a worker thread. This thread needs to sit idle, and then when something happens in the UI thread, e.g. a button is clicked, I want the worker thread to stop idling and do something else - run a function, say.</p>

<p>I can't envision this right now but I could see as the app gets more complex also having to signal the worker thread while it's actually busy doing something. </p>

<p>I have two questions about this setup:</p>

<ol>
<li><p>How can I make my worker thread idle without using up CPU time? Doing something like <code>while True: pass</code> will suck CPU time, while something like <code>while True: time.sleep(0.1)</code> will not allow instantaneous reaction to events. </p></li>
<li><p>What's the best way to signal into the worker thread to do something? I don't want the UI thread to execute something, I want the worker thread to be signaled, by the UI thread, that it should change what it's doing. Ideally, I'd have some way for the worker thread to register a callback with the UI itself, so that when a button is clicked or any other UI Event happens, the worker thread is signalled to change what it's doing.</p></li>
</ol>

<p>So, is this the best way to accomplish this? And what's the best way to do it?</p>

<p>Thanks!</p>",python|multithreading|wxpython,"<p>First: Do you actually need a background thread to sit around idle in the first place?</p>

<p>On most platforms, starting a new thread is cheap. (Except on Windows and Linux, where it's <em>supercheap</em>.) So, why not just kick off a thread whenever you need it? (It's just as easy to keep around a list of threads as a single thread, right?)</p>

<p>Alternatively, why not just create a <a href=""http://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor"" rel=""nofollow noreferrer""><code>ThreadPoolExecutor</code></a>, and just submit jobs to it, and let the executor worry about when they get run and on which thread. Any time you can just think in terms of ""tasks that need to get run without blocking the main thread"" instead of ""worker threads that need to wait on work"", you're making your life easier. Under the covers, there's still one or more worker threads waiting on a queue, or something equivalent, but that part's all been written (and debugged and optimized) for you. All you have to write are the tasks, which are just regular functions.</p>

<p>But, if you want to write explicit background threads, you can, so I'll explain that.</p>

<hr>

<blockquote>
  <p>How can I make my worker thread idle without using up CPU time? … What's the best way to signal into the worker thread to do something?</p>
</blockquote>

<p>The way to idle a thread until a value is ready is to wait on a synchronization object. On any modern OS, waiting on a synchronization object means the operating system stops giving you any CPU time until the object is ready for you.*</p>

<p>There are a variety of different options you can see in the <code>Threading</code> module docs, but the obvious one to use in most cases like this is a <a href=""http://docs.python.org/2/library/threading.html#condition-objects"" rel=""nofollow noreferrer""><code>Condition</code></a>. The way to signal the worker thread is then to <code>notify</code> the <code>Condition</code>.</p>

<p>However, often a <a href=""http://docs.python.org/2/library/queue.html#Queue.Queue"" rel=""nofollow noreferrer""><code>Queue</code></a> is a lot simpler. To wait on a <code>Queue</code>, just call its <code>get</code> method with <code>block=True</code>. To signal another thread to wake up, just <code>put</code> something on the <code>Queue</code>. (Under the covers, a <code>Queue</code> wraps up a <code>list</code> or <code>deque</code> or other collection, a <code>Lock</code>, and a <code>Condition</code>, so you just tell it what you want to do—check for a value, block until there's a value, add a value—instead of dealing with waiting and signaling and protecting the collection.)</p>

<p>See the answer to <a href=""https://stackoverflow.com/questions/16452517/controlling-ui-elements-in-wxpython-using-threading/16452674#16452674"">controlling UI elements in wxPython using threading</a> for how to signal in both directions, from a worker thread to a UI thread and vice-versa.</p>

<hr>

<blockquote>
  <p>I'd have some way for the worker thread to register a callback with the UI itself, so that when a button is clicked or any other UI Event happens, the worker thread is signalled to change what it's doing.</p>
</blockquote>

<p>You can do it this way if you want. Just pass <code>self.queue.put</code> or <code>def callback(value): self.value = value; self.condition.notify()</code> or whatever as a callback, and the GUI thread doesn't even have to know that the callback is triggering another thread.</p>

<p>In fact, that's a pretty nice design that may make you very happy later, when you decide to move some code back and forth between inline and background-threaded, or move it off to a child process instead of a background thread, or whatever.</p>

<hr>

<blockquote>
  <p>I can't envision this right now but I could see as the app gets more complex also having to signal the worker thread while it's actually busy doing something.</p>
</blockquote>

<p>But what do you want to happen if it's busy?</p>

<p>If you just want to say ""If you're idle, wake up and do this task; otherwise, hold onto it and do it whenever you're ready"", that's exactly what a <code>Queue</code>, or an <code>Executor</code>, will do for you automatically.</p>

<p>If you want to say, ""If you're idle, wake up, otherwise, don't worry about it"", that's what a <code>Condition</code> or <code>Event</code> will do.</p>

<p>If you want to say, ""If you're idle, wake up and do this, otherwise, cancel what you're doing and do this instead"", that's a bit more complicated. You pretty much need to have the background thread periodically check an ""interrupt_me"" variable while it's busy (and put a <code>Lock</code> around it), and then you'll set that flag as well as notifying the <code>Condition</code>… although in some cases, you can merge the idle and busy cases into a single <code>Condition</code> or <code>Event</code> (by calling an infinite <code>wait()</code> when idle, and a quick-check <code>wait(timeout=0)</code> when busy).</p>

<hr>

<p>* In some cases—e.g., a Linux <code>futex</code> or a Windows <code>CriticalSection</code>—it may actually spin off a little bit of CPU time in some cases, because that happens to be a good optimization. But the point is, you're not <em>asking</em> for any CPU time until you're ready to use it.</p>",5
126,16140948,Is there a way to suppress unresolved imports in eclipse in a PyDev project?,"<p>I have a Python project in eclipse, which imports modules that can't be found by Python. Here's a list of some of the cases:</p>

<ol>
<li><p>some of the files might <em>import both the 2.x and 3.x versions</em> of some built-in modules for compatibility purposes (but I can specify only one grammar version in the project's settings)</p></li>
<li><p>since the scripts I'm writing will be ran in an environment very different from mine, some of the modules I use don't even exist in the system (<em>like Windows-specific modules, or modules from other projects that I REALLY don't want to link directly to this one</em>)</p></li>
<li><p>modules that might or might not be installed on the machine where the script is going to be executed (of course, wrapped into try-except clauses)
and so on...</p></li>
</ol>

<p>It is very annoying to have these modules marked as errors, since they make REAL syntax errors much less noticeable.
I know that this behavior can somehow be overridden - I have another project that doesn't mark unresolved imports as errors, but I just can't find the right setting for it. Can anyone help me?</p>",python|eclipse|pydev,"<p>How about adding <code>#@UnresolvedImport</code> to your imports? Eg: </p>

<pre><code>import a_module_pydev_doesnt_know #@UnresolvedImport
</code></pre>

<p>You can simply press Ctrl-1 when your cursor is placed in a line where PyDev marked an error and and select the corresponding entry to automatically add it.</p>

<p><em>Edit:</em> I don't have much experience with it, but it seems that if you want to change this for a whole project (or do it without touching your code), you can also add the module in question to the forced built-ins: <a href=""http://pydev.org/manual_101_interpreter.html#PyDevInterpreterConfiguration-ForcedBuiltins"" rel=""nofollow"">http://pydev.org/manual_101_interpreter.html#PyDevInterpreterConfiguration-ForcedBuiltins</a></p>",4
127,16522362,Concatenate elements of a list,"<p>I have a list like <code>l=['a', 'b', 'c']</code>
I want a String like 'abc'. So in fact the result is <code>l[0]+l[1]+l[2]</code>, which can also be writte as</p>

<pre><code>s = ''
for i in l:
    s += i
</code></pre>

<p>Is there any way to do this more elegantly?</p>",python|string|concatenation,"<p>Use <a href=""http://docs.python.org/2/library/stdtypes.html#str.join"" rel=""noreferrer""><code>str.join()</code></a>:</p>

<pre><code>s = ''.join(l)
</code></pre>

<p>The string on which you call this is used as the delimiter between the strings in <code>l</code>:</p>

<pre><code>&gt;&gt;&gt; l=['a', 'b', 'c']
&gt;&gt;&gt; ''.join(l)
'abc'
&gt;&gt;&gt; '-'.join(l)
'a-b-c'
&gt;&gt;&gt; ' - spam ham and eggs - '.join(l)
'a - spam ham and eggs - b - spam ham and eggs - c'
</code></pre>

<p>Using <code>str.join()</code> is <em>much</em> faster than concatenating your elements one by one, as that has to create a new string object for every concatenation. <code>str.join()</code> only has to create <em>one</em> new string object.</p>

<p>Note that <code>str.join()</code> will loop over the input sequence <em>twice</em>. Once to calculate how big the output string needs to be, and once again to build it. As a side-effect, that means that using a list comprehension instead of a generator expression is faster:</p>

<pre><code>slower_gen_expr = ' - '.join('{}: {}'.format(key, value) for key, value in some_dict)
faster_list_comp = ' - '.join(['{}: {}'.format(key, value) for key, value in some_dict])
</code></pre>",24
128,16254923,What needs to be done to import and use a Linux kernel module in python?,"<p>What do I need to do import a Linux kernel module into python so that I can use its features in an application I want to build.</p>

<p>My target is to use the Better Approach To Mobile Ad-Hoc Networking (B.A.T.M.A.N) kernel module that has been included in the Linux Kernel since 2.6 for routing purposes for a mesh network that would consist of Raspberry Pis. I will be using Twisted for all the network programming.</p>",python|linux|linux-kernel|twisted|kernel,"<p>You don't want to load a kernel module. Kernel modules have many extremely odd properties (for example, some instructions are compiled as no-ops, then replaced at load time depending on the processor.)</p>

<p>Instead, it will be much simpler to <em>re-compile</em> the code into a user-space library that you can call from Python.</p>

<p>Even simpler still, you could just grab the ""user-space"" branch of the BATMAN algorithm, called batmand and use that. <a href=""http://www.open-mesh.org/projects/open-mesh/wiki/BranchesExplained"" rel=""nofollow"">http://www.open-mesh.org/projects/open-mesh/wiki/BranchesExplained</a></p>",2
129,16254923,What needs to be done to import and use a Linux kernel module in python?,"<p>What do I need to do import a Linux kernel module into python so that I can use its features in an application I want to build.</p>

<p>My target is to use the Better Approach To Mobile Ad-Hoc Networking (B.A.T.M.A.N) kernel module that has been included in the Linux Kernel since 2.6 for routing purposes for a mesh network that would consist of Raspberry Pis. I will be using Twisted for all the network programming.</p>",python|linux|linux-kernel|twisted|kernel,"<p>Trigger loading of that module into the kernel. Loading this into a user-space process is probably futile. In theory, you can build a Python module in C using the sources for the kernel module, but that still doesn't give you e.g. hardware access and you will have to emulate/copy large parts of the kernel infrastructure, too. Sounds like a bad idea.</p>",0
130,35538814,How to find a special word inside a file using Python?,"<p>I have a bunch of <code>.java</code> files in a directory and I want to compile all of them to <code>.class</code> files via python code. </p>

<p>As you know, the <code>Javac</code> command line tool is the tool that I must use and it require the name of <code>.java</code> files to be equal with the class name. Unfortunately for my <code>.java</code> files, it isn't. I mean they have different random names that are not equal with their class names. </p>

<p>So I need to extract the name of classes from the contents of <code>.java</code> files. It was simple if the line of class definition was specified, but it isn't. The <code>.java</code> file may contains some comments in the top that may contain <em>class</em> or <em>package</em> words too.</p>

<p>The question is how I can extract package and class name of each file?</p>

<p>For example this is contents of one of them:</p>

<pre class=""lang-java prettyprint-override""><code>//This is a sample package that its class name is HelloWorldApplet. in this package we blah blah blah and this class blah blah blah.
package helloWorldPackage;
//This is another comment that may or may not have the word ""package"" and ""class"" inside.
import javacard.framework.APDU;
import javacard.framework.Applet;
import javacard.framework.ISO7816;
import javacard.framework.ISOException;
import javacard.framework.Util;
/* this is also a multi line comment. blah blah blah package, blah blah blah package ... */
public class HelloWorldApplet extends Applet 
{
    private static final byte[] helloWorld = {(byte)'H',(byte)'e',(byte)'l',(byte)'l',(byte)'o',(byte)' ',(byte)'W',(byte)'o',(byte)'r',(byte)'l',(byte)'d',};
    private static final byte HW_CLA = (byte)0x80;
    private static final byte HW_INS = (byte)0x00;

    public static void install(byte[] bArray, short bOffset, byte bLength) 
        {
        new HelloWorldApplet().register(bArray, (short) (bOffset + 1), bArray[bOffset]);
        }

    public void process(APDU apdu) 
        {
        if (selectingApplet()) 
            {
            return;
            }

        byte[] buffer = apdu.getBuffer();
        byte CLA = (byte) (buffer[ISO7816.OFFSET_CLA] &amp; 0xFF);
        byte INS = (byte) (buffer[ISO7816.OFFSET_INS] &amp; 0xFF);

        if (CLA != HW_CLA)
            {
            ISOException.throwIt(ISO7816.SW_CLA_NOT_SUPPORTED);
            }

        switch ( INS ) 
            {
            case HW_INS:
                getHelloWorld( apdu );
                break;
            default:
                ISOException.throwIt(ISO7816.SW_INS_NOT_SUPPORTED);
            }
        }

    private void getHelloWorld( APDU apdu)
        {
        byte[] buffer = apdu.getBuffer();
        short length = (short) helloWorld.length;
        Util.arrayCopyNonAtomic(helloWorld, (short)0, buffer, (short)0, (short) length);
        apdu.setOutgoingAndSend((short)0, length);
        }
}
</code></pre>

<p>How can I extract package name (i.e. <code>helloWorldPackage</code>) and class name(i.e <code>HelloWorldApplet</code>) of each file?</p>

<p>Note that, the <code>.java</code> files may have different classes inside, but I need the name of that class that extends <code>Applet</code> only.</p>

<p><strong>Update:</strong></p>

<p>I tried the followings, but they didn't worked (Python 2.7.10):</p>

<pre><code>import re

prgFile = open(r""yourFile\New Text Document.txt"",""r"")
contents = prgFile.read()

x = re.match(r""(?&lt;=class)\b.*\b(?=extends Applet)"",contents)
print x
x = re.match(r""^(public)+"",contents)
print x
x = re.match(r""^package ([^;\n]+)"",contents)
print x
x = re.match(r""(?&lt;=^public class )\b.*\b(?= extends Applet)"",contents)
print x
</code></pre>

<p>Output:</p>

<pre><code>&gt;&gt;&gt; ================================ RESTART ================================
&gt;&gt;&gt; 
None
None
None
None
&gt;&gt;&gt; 
</code></pre>",python|regex|python-2.7|python-3.x,"<p>In many cases a simple regex will work.</p>

<p>If you want to be 100% certain I suggest using a full-blown Java parser like <a href=""https://github.com/c2nes/javalang"" rel=""nofollow"">javalang</a> to parse each file, then walk the AST to pull out the class name.</p>

<p>Something like</p>

<pre><code>import glob
import javalang

# look at all .java files in the working directory
for fname in glob.glob(""*.java""):
    # load the sourcecode
    with open(fname) as inf:
        sourcecode = inf.read()

    try:
        # parse it to an Abstract Syntax Tree
        tree = javalang.parse.parse(sourcecode)
        # get package name
        pkg = tree.package.name

        # look at all class declarations
        for path, node in tree.filter(javalang.tree.ClassDeclaration):
            # if class extends Applet
            if node.extends.name == 'Applet':
                # print the class name
                print(""{}: package {}, main class is {}"".format(fname, pkg, node.name))

    except javalang.parser.JavaSyntaxError as je:
        # report any files which don't parse properly
        print(""Error parsing {}: {}"".format(fname, je))
</code></pre>

<p>which gives</p>

<pre><code>sample.java: package helloWorldPackage, main class is HelloWorldApplet
</code></pre>",3
131,35538814,How to find a special word inside a file using Python?,"<p>I have a bunch of <code>.java</code> files in a directory and I want to compile all of them to <code>.class</code> files via python code. </p>

<p>As you know, the <code>Javac</code> command line tool is the tool that I must use and it require the name of <code>.java</code> files to be equal with the class name. Unfortunately for my <code>.java</code> files, it isn't. I mean they have different random names that are not equal with their class names. </p>

<p>So I need to extract the name of classes from the contents of <code>.java</code> files. It was simple if the line of class definition was specified, but it isn't. The <code>.java</code> file may contains some comments in the top that may contain <em>class</em> or <em>package</em> words too.</p>

<p>The question is how I can extract package and class name of each file?</p>

<p>For example this is contents of one of them:</p>

<pre class=""lang-java prettyprint-override""><code>//This is a sample package that its class name is HelloWorldApplet. in this package we blah blah blah and this class blah blah blah.
package helloWorldPackage;
//This is another comment that may or may not have the word ""package"" and ""class"" inside.
import javacard.framework.APDU;
import javacard.framework.Applet;
import javacard.framework.ISO7816;
import javacard.framework.ISOException;
import javacard.framework.Util;
/* this is also a multi line comment. blah blah blah package, blah blah blah package ... */
public class HelloWorldApplet extends Applet 
{
    private static final byte[] helloWorld = {(byte)'H',(byte)'e',(byte)'l',(byte)'l',(byte)'o',(byte)' ',(byte)'W',(byte)'o',(byte)'r',(byte)'l',(byte)'d',};
    private static final byte HW_CLA = (byte)0x80;
    private static final byte HW_INS = (byte)0x00;

    public static void install(byte[] bArray, short bOffset, byte bLength) 
        {
        new HelloWorldApplet().register(bArray, (short) (bOffset + 1), bArray[bOffset]);
        }

    public void process(APDU apdu) 
        {
        if (selectingApplet()) 
            {
            return;
            }

        byte[] buffer = apdu.getBuffer();
        byte CLA = (byte) (buffer[ISO7816.OFFSET_CLA] &amp; 0xFF);
        byte INS = (byte) (buffer[ISO7816.OFFSET_INS] &amp; 0xFF);

        if (CLA != HW_CLA)
            {
            ISOException.throwIt(ISO7816.SW_CLA_NOT_SUPPORTED);
            }

        switch ( INS ) 
            {
            case HW_INS:
                getHelloWorld( apdu );
                break;
            default:
                ISOException.throwIt(ISO7816.SW_INS_NOT_SUPPORTED);
            }
        }

    private void getHelloWorld( APDU apdu)
        {
        byte[] buffer = apdu.getBuffer();
        short length = (short) helloWorld.length;
        Util.arrayCopyNonAtomic(helloWorld, (short)0, buffer, (short)0, (short) length);
        apdu.setOutgoingAndSend((short)0, length);
        }
}
</code></pre>

<p>How can I extract package name (i.e. <code>helloWorldPackage</code>) and class name(i.e <code>HelloWorldApplet</code>) of each file?</p>

<p>Note that, the <code>.java</code> files may have different classes inside, but I need the name of that class that extends <code>Applet</code> only.</p>

<p><strong>Update:</strong></p>

<p>I tried the followings, but they didn't worked (Python 2.7.10):</p>

<pre><code>import re

prgFile = open(r""yourFile\New Text Document.txt"",""r"")
contents = prgFile.read()

x = re.match(r""(?&lt;=class)\b.*\b(?=extends Applet)"",contents)
print x
x = re.match(r""^(public)+"",contents)
print x
x = re.match(r""^package ([^;\n]+)"",contents)
print x
x = re.match(r""(?&lt;=^public class )\b.*\b(?= extends Applet)"",contents)
print x
</code></pre>

<p>Output:</p>

<pre><code>&gt;&gt;&gt; ================================ RESTART ================================
&gt;&gt;&gt; 
None
None
None
None
&gt;&gt;&gt; 
</code></pre>",python|regex|python-2.7|python-3.x,"<p>This regex works for me. <code>(?&lt;=^public class )\b.*\b(?= extends Applet)</code>.</p>

<p>The way to use it correctly:</p>

<pre><code>re.compile(ur'(?&lt;=^public class )\b.*\b(?= extends Applet)', re.MULTILINE)
</code></pre>",1
132,35538814,How to find a special word inside a file using Python?,"<p>I have a bunch of <code>.java</code> files in a directory and I want to compile all of them to <code>.class</code> files via python code. </p>

<p>As you know, the <code>Javac</code> command line tool is the tool that I must use and it require the name of <code>.java</code> files to be equal with the class name. Unfortunately for my <code>.java</code> files, it isn't. I mean they have different random names that are not equal with their class names. </p>

<p>So I need to extract the name of classes from the contents of <code>.java</code> files. It was simple if the line of class definition was specified, but it isn't. The <code>.java</code> file may contains some comments in the top that may contain <em>class</em> or <em>package</em> words too.</p>

<p>The question is how I can extract package and class name of each file?</p>

<p>For example this is contents of one of them:</p>

<pre class=""lang-java prettyprint-override""><code>//This is a sample package that its class name is HelloWorldApplet. in this package we blah blah blah and this class blah blah blah.
package helloWorldPackage;
//This is another comment that may or may not have the word ""package"" and ""class"" inside.
import javacard.framework.APDU;
import javacard.framework.Applet;
import javacard.framework.ISO7816;
import javacard.framework.ISOException;
import javacard.framework.Util;
/* this is also a multi line comment. blah blah blah package, blah blah blah package ... */
public class HelloWorldApplet extends Applet 
{
    private static final byte[] helloWorld = {(byte)'H',(byte)'e',(byte)'l',(byte)'l',(byte)'o',(byte)' ',(byte)'W',(byte)'o',(byte)'r',(byte)'l',(byte)'d',};
    private static final byte HW_CLA = (byte)0x80;
    private static final byte HW_INS = (byte)0x00;

    public static void install(byte[] bArray, short bOffset, byte bLength) 
        {
        new HelloWorldApplet().register(bArray, (short) (bOffset + 1), bArray[bOffset]);
        }

    public void process(APDU apdu) 
        {
        if (selectingApplet()) 
            {
            return;
            }

        byte[] buffer = apdu.getBuffer();
        byte CLA = (byte) (buffer[ISO7816.OFFSET_CLA] &amp; 0xFF);
        byte INS = (byte) (buffer[ISO7816.OFFSET_INS] &amp; 0xFF);

        if (CLA != HW_CLA)
            {
            ISOException.throwIt(ISO7816.SW_CLA_NOT_SUPPORTED);
            }

        switch ( INS ) 
            {
            case HW_INS:
                getHelloWorld( apdu );
                break;
            default:
                ISOException.throwIt(ISO7816.SW_INS_NOT_SUPPORTED);
            }
        }

    private void getHelloWorld( APDU apdu)
        {
        byte[] buffer = apdu.getBuffer();
        short length = (short) helloWorld.length;
        Util.arrayCopyNonAtomic(helloWorld, (short)0, buffer, (short)0, (short) length);
        apdu.setOutgoingAndSend((short)0, length);
        }
}
</code></pre>

<p>How can I extract package name (i.e. <code>helloWorldPackage</code>) and class name(i.e <code>HelloWorldApplet</code>) of each file?</p>

<p>Note that, the <code>.java</code> files may have different classes inside, but I need the name of that class that extends <code>Applet</code> only.</p>

<p><strong>Update:</strong></p>

<p>I tried the followings, but they didn't worked (Python 2.7.10):</p>

<pre><code>import re

prgFile = open(r""yourFile\New Text Document.txt"",""r"")
contents = prgFile.read()

x = re.match(r""(?&lt;=class)\b.*\b(?=extends Applet)"",contents)
print x
x = re.match(r""^(public)+"",contents)
print x
x = re.match(r""^package ([^;\n]+)"",contents)
print x
x = re.match(r""(?&lt;=^public class )\b.*\b(?= extends Applet)"",contents)
print x
</code></pre>

<p>Output:</p>

<pre><code>&gt;&gt;&gt; ================================ RESTART ================================
&gt;&gt;&gt; 
None
None
None
None
&gt;&gt;&gt; 
</code></pre>",python|regex|python-2.7|python-3.x,"<p>You could come up with the following regex:</p>

<pre><code>import re
string = your_string_here
classes = [x.strip() for x in re.findall(r'^(?:public class|package) ([^;]+?)(?=extends|;)', string, re.MULTILINE)]
# look for public class or package at the start of the line 
# then anything but a semicolon
# make sure the match is immediately followed by extends or a colon
print classes
# ['helloWorldPackage', 'HelloWorldApplet']
</code></pre>",1
133,35556512,In tkinter (python 3) how to make the program wait for an event (e.g. button click) before continuing?,"<p>I'm making a simple Rock paper scissors program (my first program ever, no prior programming experience) and this is what I came up with.</p>

<pre><code>from tkinter import *

import random

computerChoice = random.randint(1, 3)
playerChoice = 0
root = Tk()
root.geometry('315x400')
theLabel = Label(text=""Rock, paper or scissors?"")
theLabel.grid(row=0, column=0)

ttf = Frame(root)
ttf.grid(row=1, column=0)
tbf = Frame(root)
tbf.grid(row=2, column=0)
mtf = Frame(root)
mtf.grid(row=3, column=0)
mbf = Frame(root)
mbf.grid(row=4, column=0)
btf = Frame(root)
btf.grid(row=5, column=0)
bbf = Frame(root)
bbf.grid(row=6, column=0)

photo1 = PhotoImage(file=""rock.png"")
photo2 = PhotoImage(file=""paper.png"")
photo3 = PhotoImage(file=""scissors.png"")
playerLabel1 = Label(tbf)
playerLabel2 = Label(tbf)
playerLabel3 = Label(tbf)

def button1Command(event):
    playerLabel1 = Label(text=""You chose rock\n"")
    playerLabel1.grid(row=2, column=0)
    return playerChoice == 1
if computerChoice == 1:
    computerLabel1 = Label(mtf, text=""Your opponent chose:"")
    computerLabel1.grid(row=3, column=0)
    computerLabel11 = Label(mbf, image=photo1, width=""100"", height=""100"")
    computerLabel11.grid(row=4, column=0)
    labelResult3 = Label(text=""It's a tie!"")
    labelResult3.grid(row=5, column=0)
elif computerChoice == 2:
    computerLabel3 = Label(mtf, text=""Your opponent chose:"")
    computerLabel3.grid(row=3, column=0)
    computerLabel33 = Label(mbf, image=photo2, width=""100"", height=""100"")
    computerLabel33.grid(row=4, column=0)
    labelResult2 = Label(text=""You lose!"")
    labelResult2.grid(row=5, column=0)
elif computerChoice == 3:
    computerLabel3 = Label(mtf, text=""Your opponent chose:"")
    computerLabel3.grid(row=3, column=0)
    computerLabel33 = Label(mbf, image=photo3, width=""100"", height=""100"")
    computerLabel33.grid(row=4, column=0)
    labelResult1 = Label(text=""You win!"")
    labelResult1.grid(row=5, column=0)


def button2Command(event):
    playerLabel2 = Label(text=""You chose paper\n"")
    playerLabel2.grid(row=2, column=0)
    return playerChoice == 2
if computerChoice == 1:
    computerLabel3 = Label(mtf, text=""Your opponent chose:"")
    computerLabel3.grid(row=3, column=0)
    computerLabel33 = Label(mbf, image=photo1, width=""100"", height=""100"")
    computerLabel33.grid(row=4, column=0)
    labelResult1 = Label(text=""You win!"")
    labelResult1.grid(row=5, column=0)
elif computerChoice == 2:
    computerLabel2 = Label(mtf, text=""Your opponent chose:"")
    computerLabel2.grid(row=3, column=0)
    computerLabel22 = Label(mbf, image=photo2, width=""100"", height=""100"")
    computerLabel22.grid(row=4, column=0)
    labelResult3 = Label(text=""It's a tie!"")
elif computerChoice == 3:
    computerLabel3 = Label(mtf, text=""Your opponent chose:"")
    computerLabel3.grid(row=3, column=0)
    computerLabel33 = Label(mbf, image=photo3, width=""100"", height=""100"")
    computerLabel33.grid(row=4, column=0)
    labelResult2 = Label(text=""You lose!"")
    labelResult2.grid(row=5, column=0)


def button3Command(event):
    playerLabel3 = Label(text=""You chose scissors\n"")
    playerLabel3.grid(row=2, column=0)
    return playerChoice == 3
if computerChoice == 1:
    computerLabel3 = Label(mtf, text=""Your opponent chose:"")
    computerLabel3.grid(row=3, column=0)
    computerLabel33 = Label(mbf, image=photo1, width=""100"", height=""100"")
    computerLabel33.grid(row=4, column=0)
    labelResult2 = Label(text=""You lose!"")
    labelResult2.grid(row=5, column=0)
elif computerChoice == 2:
    computerLabel3 = Label(mtf, text=""Your opponent chose:"")
    computerLabel3.grid(row=3, column=0)
    computerLabel33 = Label(mbf, image=photo2, width=""100"", height=""100"")
    computerLabel33.grid(row=4, column=0)
    labelResult1 = Label(text=""You win!"")
    labelResult1.grid(row=5, column=0)
elif computerChoice == 3:
    computerLabel3 = Label(mtf, text=""Your opponent chose:"")
    computerLabel3.grid(row=3, column=0)
    computerLabel33 = Label(mbf, image=photo3, width=""100"", height=""100"")
    computerLabel33.grid(row=4, column=0)
    labelResult3 = Label(text=""It's a tie!"")

button1 = Button(ttf)
button1.config(image=photo1, width=""100"", height=""100"")
button1.bind(""&lt;Button-1&gt;"", button1Command)
button1.bind(""&lt;Button-2&gt;"", button1Command)
button1.bind(""&lt;Button-3&gt;"", button1Command)
button1.grid(row=1, column=0)

button2 = Button(ttf)
button2.config(image=photo2, width=""100"", height=""100"")
button2.bind(""&lt;Button-1&gt;"", button2Command)
button2.bind(""&lt;Button-2&gt;"", button2Command)
button2.bind(""&lt;Button-3&gt;"", button2Command)
button2.grid(row=1, column=1)

button3 = Button(ttf)
button3.config(image=photo3, width=""100"", height=""100"")
button3.bind(""&lt;Button-1&gt;"", button3Command)
button3.bind(""&lt;Button-2&gt;"", button3Command)
button3.bind(""&lt;Button-3&gt;"", button3Command)
button3.grid(row=1, column=2)

root.mainloop()
</code></pre>

<p>problem is, the program just selects a random int for computerChoice and displays the photo as intended, and writes the message that is first associated with that computerChoice int. It doesn't take into account the playerChoice which should get set with the event that happens after the button click.
Now I want it to just display the first 2 rows, the ""choose"" row and the 3 photo options row, and after I click a button it should display the other rows.</p>

<p>Now I don't understand if the problem is in my ""return playerChoice == 1/2/3"" part of the code, or if my if and elif parts are all useless. Why doesn't it take into account the playerChoice that happens with the button click initiated event?</p>

<p>ps: as mentioned, my first bit of programming ever, so sorry if it's a stupid or complicated question :) </p>",python|tkinter,"<p>You can simply create a flag variable:</p>

<pre><code>from tkinter import *

evtHappened=False
def do():
    print('click!')
    global evtHappened
    evtHappened=True

tk = Tk()
Button(tk,command=do,text='click me!').pack()

while True:
    if evtHappened:
        evtHappened=False
        print('detected')
    tk.update()
</code></pre>

<p>Obviously, not the greatest solution, but it should work!
Actually, it's the stupidest solution.
Never use the <code>global</code> keyword.
But it still works.
Hope that's helpful.
Sure that's stupid.</p>",0
134,13191035,Catch full URL in python,"<p>I'm developing application using Bottle. How do I get full query string when I get a GET Request.</p>

<p>I dont want to catch using individual parameters like:</p>

<pre><code>param_a = request.GET.get(""a"","""")
</code></pre>

<p>as I dont want to fix number of parameters in the URL.</p>

<p>How to get full query string of requested url</p>",python|bottle,"<p>Use <a href=""http://bottlepy.org/docs/dev/api.html#bottle.BaseRequest.query"" rel=""nofollow""><code>request.query</code></a> or <code>request.query.getall(key)</code> if you have more than one value for a single <code>key</code>.</p>

<p>For eg., <code>request.query.a</code> will return you the <code>param_a</code> you wanted. <code>request.query.b</code> will return the parameter for <code>b</code> and so on.</p>

<p>If you only want the query string alone, you can use @halex's answer.</p>",1
135,13191035,Catch full URL in python,"<p>I'm developing application using Bottle. How do I get full query string when I get a GET Request.</p>

<p>I dont want to catch using individual parameters like:</p>

<pre><code>param_a = request.GET.get(""a"","""")
</code></pre>

<p>as I dont want to fix number of parameters in the URL.</p>

<p>How to get full query string of requested url</p>",python|bottle,"<p>You can use the attribute <a href=""http://bottlepy.org/docs/dev/api.html#bottle.BaseRequest.query_string""><code>request.query_string</code></a> to get the whole query string.</p>",6
136,12863339,Is there a way in Ipython notebook to show LaTeX files inline?,"<p>For month or more I have used Ipython notebook for proceeding measurement data and found it quite effortless for creating plots with matplotlib, by seeing them instantly in Ipython notebook. For tables I use matrix2latex which then I use to include to my long latex document. Since I usually can't get my tables to show up as I wish at first time I lose quite a time compiling my long LaTeX file. </p>

<p>So the question is:</p>

<p>Are there a way to show all latex formatted file inline python notebook which I could use for plotting a matrix2latex generated file? </p>",latex|ipython|inline,"<p>As IPython is simply using MathJax for LaTeX display, it is limited to the math family of commands.  matrix2latex outputs LaTeX tables of the form:</p>

<pre><code>\begin{table}[ht]
  \begin{center}
    \begin{tabular}{cc}
      \toprule
        $1$ &amp; $1$\\
        $2$ &amp; $4$\\
        $3$ &amp; $9$\\
      \bottomrule
    \end{tabular}
  \end{center}
\end{table}
</code></pre>

<p>This being said, if you need to have some pretty printing of matrices, then I would suggest something like this:</p>

<pre class=""lang-py prettyprint-override""><code>from IPython.core.display import Math
m = eye(10)
display(Math(latex(m)))
</code></pre>",1
137,13084112,Type checking on results with pyparsing,"<p>I'm new using pyparsing, but I can't find how to solve this quite easy issue. I have (for the moment) a simple grammar, but I can' t find the way to discriminate the result of parsing according the types I defined in my grammar.</p>

<p>Maybe it' d be easier to explain it with an example. Supposing this element:</p>

<pre><code>elem = foo | bar
</code></pre>

<p>When I invoke:</p>

<pre><code>elem.parseString(""..."")
</code></pre>

<p>supposing the string matches with my grammar, how can I discriminate if it matches with ' foo' or with ' bar'? I get an instance object of ParseResults with no such metadata.</p>

<p>Thanks in advance.</p>",python|parsing|pyparsing,"<p>Jon Clements' answer is the correct one, here is just some extra code in support of his post, showing how to use <code>getName()</code> to detect which term you got:</p>

<pre><code>&gt;&gt;&gt; from pyparsing import Literal, OneOrMore, Group
&gt;&gt;&gt; bar = Literal('bar').setResultsName('BAR')
&gt;&gt;&gt; foo = Literal('foo')('FOO') # using short form
&gt;&gt;&gt; grammar = OneOrMore(Group(foo | bar))
&gt;&gt;&gt; parsed = grammar.parseString('bar foo')
&gt;&gt;&gt; for p in parsed: print p[0], p.getName()
... 
bar BAR
foo FOO
</code></pre>",4
138,13084112,Type checking on results with pyparsing,"<p>I'm new using pyparsing, but I can't find how to solve this quite easy issue. I have (for the moment) a simple grammar, but I can' t find the way to discriminate the result of parsing according the types I defined in my grammar.</p>

<p>Maybe it' d be easier to explain it with an example. Supposing this element:</p>

<pre><code>elem = foo | bar
</code></pre>

<p>When I invoke:</p>

<pre><code>elem.parseString(""..."")
</code></pre>

<p>supposing the string matches with my grammar, how can I discriminate if it matches with ' foo' or with ' bar'? I get an instance object of ParseResults with no such metadata.</p>

<p>Thanks in advance.</p>",python|parsing|pyparsing,"<p>You could assign a name to them (a convoluted example using Literal):</p>

<pre><code>foo = Literal('foo').setResultsName('foo')
bar = Literal('bar').setResultsName('bar')
grammar = foo | bar
parsed = grammar.parseString('bar foo')
print parsed
# (['bar'], {'bar': [('bar', 0)]})
print parsed.asDict()
# {'bar': 'bar'}
</code></pre>",4
139,12738499,SQLalchemy specify which index to use,"<p>Is there a way in SQLalchemy to tell the query which index to use?</p>

<p>The reason I need this is that the SQL queries it generates use the ""wrong"" index - there exists an index for exactly the two fields that I have and it doesn't use it.</p>

<p>Thanks!</p>",python|sql|indexing|sqlalchemy,"<p>I think you can use <a href=""http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.with_hint"" rel=""noreferrer"">with_hint()</a> for this.</p>

<p>e.g.</p>

<pre><code>session.query(Model).with_hint(Model, 'USE INDEX col1_index')
</code></pre>

<p>Honestly, I didn't really know about this; I discovered it by finding 'USE INDEX' in their <a href=""https://github.com/sqlalchemy/sqlalchemy/blob/master/test/orm/test_query.py"" rel=""noreferrer"">ORM tests</a>.</p>",23
140,35257406,Django redirect for multilingual website,"<p>I'm working on a bilingual website French and English, and I'm trying to figure out how to detect and redirect the French users to index_fr.html (in templates folder).</p>

<p>My urls.py (it only shows the english ver. for now):</p>

<pre><code>urlpatterns = [
    url(r'^admin/', admin.site.urls),
    url(r'^$', profiles.views.home, name='home'),
]
</code></pre>",python|django|http-redirect,"<p>Thanks for your responses.</p>

<p>As dhke said, I enabled LocalMiddleware and used request.LANGUAGE_CODE to write a function in views.py that renders a template depending on the language and it works!:</p>

<p>views.py:</p>

<pre><code>from django.http import HttpResponse

def home(request):

context={}
if request.LANGUAGE_CODE == 'fr':
    template='index_fr.html'
else:
    template='index_en.html'

return render(request,template,context)

def fr(request):

context={}
template='index_fr.html'
return render(request,template,context)

def all(request):

context={}
template='index_en.html'
return render(request,template,context)
</code></pre>

<p>urls.py:</p>

<pre><code>urlpatterns =[
url(r'^admin/', admin.site.urls),

url(r'^$', profiles.views.home, name='home'),
url(r'^index_fr.html', profiles.views.fr, name='fr'),
url(r'^index_en.html', profiles.views.all, name='all'),
</code></pre>

<p>]</p>",0
141,35067063,Python function unexpectedly modifies variable in outer function,"<p>So I am seeing really strange behavior from my python code and couldn't find any other examples of my problem. From what I've read of python, a function can only access variables that are either global or inside it. However, I've discovered in the following snippet that the two print statements return different results even though the variable 'density' is never returned by the function and isn't declared globally.</p>

<pre><code>def findHeight(density):
  print density
  height = integrateHeight(density, cutOff)
  print density
  return height
</code></pre>

<p>This is a real pain in the a** because it is messing up code later on in the script. </p>

<p>I am using python 2.7.6 and my function definition is as follows:</p>

<pre><code>def integrateHeight(data, cutOff):
  # accumulate data values and rescale to fit interval [0,1]
  # Calculate bin widths (first one is a different size from the others)
  data[0,1] = -2*data[0,0]*data[0,1]
  data[1:,1] = (data[2,0] - data[1,0])*data[1:,1]
  # accumulate distribution and divide by the total
  data[:,1] = np.cumsum(data[:,1]) / data[:,1].sum()

  # Assign a default height value
  height = data[0,0]
  # store the first height,fraction pair
  prev = data[0]
  # loop through remaining height,fraction pairs
  for row in data[1:]:
    # check that the cut-off is between two values
    if row[1] &gt; cutOff &gt;= prev[1]:
      # Interpolate between height values
      height = interpolate(cutOff, prev[::-1], row[::-1])
      # exit the loop when the height is found
      break
    # store the current height,fraction value
    prev = row

  return height
</code></pre>

<p>This particular script is supposed to take a distribution, accumulate it, and find the height corresponding to a certain fraction of the cumulative distribution.</p>",python|function|scope,"<p>The <em>variable</em> isn't being modified, the <em>object you passed to <code>integrateHeight</code></em> is being modified. This is normal. If you don't want <code>integrateHeight</code> to mutate its inputs, write it in such a way that it doesn't mutate its inputs. To do so, you'll probably need to make a copy of it in the function, or find some other way to perform the computation without mutating the object.</p>",3
142,35122083,TypeError happens with Nginx but not with Flask Server,"<p>I am running an api behind flask in python and connections are handled through nginx and uwsgi.</p>

<p>Some of the api routes use pycrypto but am getting errors when using nginx on port 80 regarding <a href=""https://github.com/dlitz/pycrypto/blob/master/lib/Crypto/Util/py3compat.py#L80"" rel=""nofollow"">this line</a> in the pycrypto source.</p>

<p>The full traceback is:</p>

<pre><code>Traceback (most recent call last):
  File ""/home/ubuntu/test/testvenv/local/lib/python2.7/site-packages/flask/app.py"", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File ""/home/ubuntu/test/testvenv/local/lib/python2.7/site-packages/flask/app.py"", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File ""/home/ubuntu/test/testvenv/local/lib/python2.7/site-packages/flask_cors/extension.py"", line 188, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File ""/home/ubuntu/test/testvenv/local/lib/python2.7/site-packages/flask/app.py"", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File ""/home/ubuntu/test/testvenv/local/lib/python2.7/site-packages/flask/app.py"", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File ""/home/ubuntu/test/testvenv/local/lib/python2.7/site-packages/flask/app.py"", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File ""./application.py"", line 113, in new_user
    decrypted_json = crypt.decrypt_json(encrypted)
  File ""./crypto_module/crypt.py"", line 201, in decrypt_json
    decrypted_text = cryptor.decrypt(data_to_decrypt, PASSWORD)
  File ""./crypto_module/crypt.py"", line 112, in decrypt
    encryption_key = self._pbkdf2(password, encryption_salt, iterations=iterations)
  File ""./crypto_module/crypt.py"", line 184, in _pbkdf2
    return KDF.PBKDF2(password, salt, dkLen=key_length, count=iterations, prf=lambda p, s: hmac.new(p, s, hashlib.sha256).digest())
  File ""/home/ubuntu/test/testvenv/local/lib/python2.7/site-packages/Crypto/Protocol/KDF.py"", line 110, in PBKDF2
    password = tobytes(password)
  File ""/home/ubuntu/test/testvenv/local/lib/python2.7/site-packages/Crypto/Util/py3compat.py"", line 85, in tobytes
    return ''.join(s)
TypeError
</code></pre>

<p>The TypeError is never specifically mentioned for some reason.
The error also does not show when running the server with the basic <code>python application.py</code> command on the default port 5000. When letting nginx and uwsgi handle the connections, I get the Internal Server Error shown above. Not really sure what's happening. All other non-crypto routes go through fine.</p>

<p><strong>Update:</strong> running the server one level up in uwsgi with the following command will also work. Nginx still does not:</p>

<pre><code>uwsgi --socket 0.0.0.0:8000 --protocol=http -w wsgi 
</code></pre>

<p><strong>Update 2:</strong> Now getting another TypeError that's a little more descriptive but I still think the data being sent in the request is not being handled the same way/correctly with nginx as it is with uwsgi or flask.</p>

<pre><code>...
  File ""./crypto_module/crypt.py"", line 202, in &lt;lambda&gt;
    return KDF.PBKDF2(password, salt, dkLen=key_length, count=iterations, prf=lambda p, s: hmac.new(p, s, hashlib.sha256).digest())
  File ""/usr/lib/python2.7/hmac.py"", line 133, in new
    return HMAC(key, msg, digestmod)
  File ""/usr/lib/python2.7/hmac.py"", line 68, in __init__
    if len(key) &gt; blocksize:
TypeError: object of type 'NoneType' has no len()
</code></pre>

<p>I should also note that <code>crypt.py</code> is <a href=""https://github.com/RNCryptor/RNCryptor-python/blob/master/RNCryptor.py"" rel=""nofollow"">RNCryptor-python</a></p>",python|nginx|flask|pycrypto|pbkdf2,"<p>Got it working.</p>

<p>In /etc/nginx/sites-enabled/test</p>

<pre><code>uwsgi_pass unix:/...;
</code></pre>

<p>Should be</p>

<pre><code>uwsgi_pass unix:///...;
</code></pre>

<p>The original error also stemmed from the password used in the crypto file. The password was retrieved from the system's environment variables. I later found out that Nginx doesn't come with any functionality to natively use environment variables but a workaround is explained <a href=""https://docs.apitools.com/blog/2014/07/02/using-environment-variables-in-nginx-conf.html"" rel=""nofollow"">here</a>.</p>",0
143,27185294,Python conditional variable assignment,"<p>Morning all,</p>

<p>Can someone advise, is it possible to achieve something like this:</p>

<pre><code>def myFunction(someParam)
   if someParam == 1:
      return ""This and that""
   else:
      return None

someVariable = someVariable || myFunction(valuePassedIn)
</code></pre>

<p>ie, given ""someVariable"" has an existing value, I want to preserve that value, or replace it with the value returned from ""myFunction"", provided that is not None?</p>

<p>Obviously, I can do something like:</p>

<pre><code>if myFunction(valuePassedIn) != None:
    someVariable = myFunction(valuePassedIn)
</code></pre>

<p>But this of course is calling myFunction twice. Alternatively, I could do:</p>

<pre><code>myFuncRes = myFunction(valuePassedIn)
if MyFuncRes != None:
    someVariable = myFuncRes
</code></pre>

<p>But it'd be good if I could reduce this to a single line of code, as per my ""||"" line in the first code snippet above. Obviously I've seen the <a href=""https://docs.python.org/2/whatsnew/2.5.html"" rel=""nofollow"">conditional expressions documentation</a>, but unless I'm misunderstanding, this would still involve calling <code>myFunction</code> twice?</p>

<p>I guess one other option would be to pass <code>someVariable</code> in as an additional param to <code>myFunction</code> and use this as the ""else"" return instead of None, but I can't help feeling this is kinda messy - and Python probably has something more slick I could use?</p>

<p>Thanks</p>",python|variables|conditional-statements|variable-assignment,"<p>Yes you can do this </p>

<p>Please check below code</p>

<pre><code>&gt;&gt;&gt; a = 1
&gt;&gt;&gt; def test(b):
...     return b*10
...
&gt;&gt;&gt; c = a or test(2)
&gt;&gt;&gt; c
1
&gt;&gt;&gt; a = 0
&gt;&gt;&gt; c = a or test(2)
&gt;&gt;&gt; c
20
</code></pre>",4
144,27424437,Using regular expressions to denote the opener of nestedExpr,"<p>I am trying to use pyparsing to match nested expressions. Without having to specify the content expression, is there a way to use regular expressions to define the opener?</p>

<p>My opener consists of two tokens A and B. These two tokens may or may not be separated by whitespace and newline characters. </p>

<p>I am able to create a pyparsing expression for the opener when specifying a content rule. However is there a way to do this without specifying a content rule? Alternatively, how can I specify a rule to ignore content?</p>

<pre><code>opener = Word('A') + ZeroOrMore(' ') + ZeroOrMore('\n') + Word('B')
closer = 'END'
content_rule = SkipTo(opener | closer)


pat = nestedExpr(opener=opener, closer=closer, content=content_rule) 


for x in pat.scanString(data):
    print x
</code></pre>

<p>Context:
I am trying to extract if-blocks from source code files. So I will need a way of extracting nested expressions. This requires me to specify: </p>

<ol>
<li>An opener that consists of multiple tokens which can be separated by white-space ('if {')</li>
<li>A way for the closer to match only the closing tags that correspond to the opener. i.e. Closers for other blocks are the same than for the if-block. Consider loops for example: while () {}. I am not sure if this is possible however.</li>
</ol>",python|pyparsing,"<p>You said:</p>

<blockquote>
  <p>I am not sure if this is possible however.</p>
</blockquote>

<p>It isn't, at least for general C code. For example:</p>

<pre><code>if (a) {
    char a = '}';
}
</code></pre>

<p>There's no good way for your parser to know (as opposed to guessing) that the first close curly-brace is not intended to close the if statement without actually parsing the interior. (Also comments, double-quoted strings, etc. Not to mention curly-brace-less ifs!)</p>

<p>If you're confident the interior only has balanced curly braces, and you only want top-level if statements, my suggestion would be to do something like this (untested, but hopefully it gets the idea across):</p>

<pre><code>pat = Literal('if') + nestedExpr(""{"", ""}"")
</code></pre>

<p>If you need nested ifs, you might be able to do something like:</p>

<pre><code>expression = Forward()
if_statement = Literal('if') + nestedExpr(""{"", ""}"", expression)
expression &lt;&lt; ZeroOrMore(Or(if_statement, Regex('.')))
</code></pre>",2
145,27153331,Google App Engine - ImportError: No module named edf,"<p>I have several .py files in my Google App Engine project and I decided to group them together in a directory. However when I tried to access one I get an error:</p>

<p>ImportError: No module named edf</p>

<p>Previously my directory structure was:</p>

<pre><code>app_name
-edf.py
-jkl.py
</code></pre>

<p>Now it is </p>

<pre><code>app_name
-folder_name
--edf.py
--jkl.py
</code></pre>

<p>I tried to change the app.yaml line</p>

<pre><code>- url: /edf
  script: folder_name/edf
</code></pre>",python|google-app-engine,"<p>You should use the dot character '.' to separate the paths rather than the colon in your original example.</p>

<p>On some operating systems \ is used to separate paths, and in some / is used. So python uses . instead to be os-independent at that level. </p>

<p>You can read some discussion on this here: <a href=""https://www.python.org/dev/peps/pep-0328/"" rel=""nofollow"">https://www.python.org/dev/peps/pep-0328/</a></p>",1
146,37261495,"fp = builtins.open(filename, ""rb"") - Error","<p>When I try running this script:</p>

<pre><code>from PIL import Image
import os

files = os.listdir('mri')
for file in files:
    img = Image.open(file)
</code></pre>

<p>I get the following error:</p>

<pre><code>Traceback (most recent call last):
  File ""resize_image.py"", line 6, in &lt;module&gt;
    img = Image.open(file)
  File ""/usr/lib/python2.7/dist-packages/PIL/Image.py"", line 2258, in open
    fp = builtins.open(filename, ""rb"")
IOError: [Errno 2] No such file or directory: '6.jpg'
</code></pre>

<p>I made sure that 6.jpg is available. And, it seems that I get such error for any image in this location.</p>

<p>How can I fix the issue?</p>

<p>Thanks.</p>",python|image,"<pre><code>img = Image.open(os.path.join('mri', file))
</code></pre>
<p>this worked for me making sure you join the dir with the path</p>",0
147,37261495,"fp = builtins.open(filename, ""rb"") - Error","<p>When I try running this script:</p>

<pre><code>from PIL import Image
import os

files = os.listdir('mri')
for file in files:
    img = Image.open(file)
</code></pre>

<p>I get the following error:</p>

<pre><code>Traceback (most recent call last):
  File ""resize_image.py"", line 6, in &lt;module&gt;
    img = Image.open(file)
  File ""/usr/lib/python2.7/dist-packages/PIL/Image.py"", line 2258, in open
    fp = builtins.open(filename, ""rb"")
IOError: [Errno 2] No such file or directory: '6.jpg'
</code></pre>

<p>I made sure that 6.jpg is available. And, it seems that I get such error for any image in this location.</p>

<p>How can I fix the issue?</p>

<p>Thanks.</p>",python|image,"<p>You are getting this error because you haven't add your image in project file folder.
Paste your image in project file and then run the program.</p>",0
148,37261495,"fp = builtins.open(filename, ""rb"") - Error","<p>When I try running this script:</p>

<pre><code>from PIL import Image
import os

files = os.listdir('mri')
for file in files:
    img = Image.open(file)
</code></pre>

<p>I get the following error:</p>

<pre><code>Traceback (most recent call last):
  File ""resize_image.py"", line 6, in &lt;module&gt;
    img = Image.open(file)
  File ""/usr/lib/python2.7/dist-packages/PIL/Image.py"", line 2258, in open
    fp = builtins.open(filename, ""rb"")
IOError: [Errno 2] No such file or directory: '6.jpg'
</code></pre>

<p>I made sure that 6.jpg is available. And, it seems that I get such error for any image in this location.</p>

<p>How can I fix the issue?</p>

<p>Thanks.</p>",python|image,"<pre><code>img = Image.open(os.path.join(r'C:\Users\Simin\Desktop\python proj\img.jpg'))
</code></pre>
<p>this direct path worked for me</p>",0
149,37261495,"fp = builtins.open(filename, ""rb"") - Error","<p>When I try running this script:</p>

<pre><code>from PIL import Image
import os

files = os.listdir('mri')
for file in files:
    img = Image.open(file)
</code></pre>

<p>I get the following error:</p>

<pre><code>Traceback (most recent call last):
  File ""resize_image.py"", line 6, in &lt;module&gt;
    img = Image.open(file)
  File ""/usr/lib/python2.7/dist-packages/PIL/Image.py"", line 2258, in open
    fp = builtins.open(filename, ""rb"")
IOError: [Errno 2] No such file or directory: '6.jpg'
</code></pre>

<p>I made sure that 6.jpg is available. And, it seems that I get such error for any image in this location.</p>

<p>How can I fix the issue?</p>

<p>Thanks.</p>",python|image,"<p>The file names from <code>os.listdir</code> are relative to the directory given. They must be made complete by joining the dirname to their basename.</p>

<pre><code>files = os.listdir('my_folder')
for file in files:
    img = Image.open(os.path.join('my_folder', file))
</code></pre>",2
150,37311968,Python redis get method raises an AttributeError for non existing key,"<p>I have the following part of code:</p>

<p><code>rd = redis.Redis(host, port, db, password, socket_timeout,
            connection_pool, charset, errors, unix_socket_path)</code></p>

<p><code>check_flag = rd.get(""some_key"")
 if check_flag is not None:
    do_something()</code></p>

<p>But <code>get</code> method of Redis raises an AttributeError:
<code>AttributeError: 'str' object has no attribute 'iteritems'</code></p>

<p>I'm not sure if it's OK to share full text of traceback here.</p>

<p>I'm using redis 2.10.5</p>

<p>Do somebody have any ideas what is going on?</p>

<p>P.S. I was looking through stackoverflow for the same issues, but with no success</p>

<p>UPD: Added full traceback</p>

<p><code>init_flag = self.redis.get(""face_init"")
  File ""/usr/local/lib/python2.7/dist-packages/redis/client.py"", line 880, in get
    return self.execute_command('GET', name)
  File ""/usr/local/lib/python2.7/dist-packages/redis/client.py"", line 572, in execute_command
    connection.send_command(*args)
  File ""/usr/local/lib/python2.7/dist-packages/redis/connection.py"", line 563, in send_command
    self.send_packed_command(self.pack_command(*args))
  File ""/usr/local/lib/python2.7/dist-packages/redis/connection.py"", line 538, in send_packed_command
    self.connect()
  File ""/usr/local/lib/python2.7/dist-packages/redis/connection.py"", line 439, in connect
    sock = self._connect()
  File ""/usr/local/lib/python2.7/dist-packages/redis/connection.py"", line 475, in _connect
    for k, v in iteritems(self.socket_keepalive_options):
  File ""/usr/local/lib/python2.7/dist-packages/redis/_compat.py"", line 27, in iteritems
    return x.iteritems()
AttributeError: 'str' object has no attribute 'iteritems'</code></p>",python|redis,"<p>Looks like you might have found a bug in the redis-py library. </p>

<p>I'd first try updating to the newest version of the library, as well as trying out other releases, and see if you see any different behaviour. You should be able to checkout any given release of it from here, <a href=""https://github.com/andymccurdy/redis-py"" rel=""nofollow"">https://github.com/andymccurdy/redis-py</a>, and then use the command listed <a href=""https://github.com/andymccurdy/redis-py/blob/master/INSTALL"" rel=""nofollow"">here</a> to do a local install of the checked out code. </p>

<p>You might also want to try under a few different network conditions. That code path in the trace looks like it's related to sending the packets to the Redis Server, so it might be worth testing what happens when you're not connecting to a valid server address. </p>

<p>You could also run the Redis <a href=""http://redis.io/commands/MONITOR"" rel=""nofollow"">Monitor</a> command from the redis cli, to see if anything is making it to the server or not. </p>

<p>If you still don't see any thing obviously wrong with those additional bits of trouble shooting, I'd open up an issue on the Redis-py github repo, and see if they can help track down the underlying issue. </p>",0
151,37443622,Python user-input,"<p>I'm trying to come up with a simple calculator that takes a user's input and does a calculation but it keeps throwing out errors. </p>

<pre><code>raw = input(""Raw Formatting:"")
disk = input(""On-disk formatting:"")
slack = input(""Slack space:"")
quest = input(""Select protection; 1=FTT, 2=EC-1, 3=EC-2:"")

if quest == 1:
    answer = raw * (1-disk) * (1-slack) * 0.5
    print (answer)
elif quest == 2:
    answer = raw * (1-disk) * (1-slack) * 0.75
    print (answer)
elif quest == 3:
    answer = raw * (1-disk) * (1-slack) * 0.67
    print (answer)
else:
    print (""You didn't provide a valid protection level"")
</code></pre>

<p>Output:</p>

<pre><code>Raw Formatting:24
On-disk formatting:0.1
Slack space:0.3
Select protection; 1=FTT, 2=EC-1, 3=EC-2:1
Traceback (most recent call last):
 File ""C:\Users\Ed\Desktop\hello.py"", line 7, in &lt;module&gt;
  answer = raw * (1-disk) * (1-slack) * 0.5
TypeError: unsupported operand type(s) for -: 'int' and 'str' 
</code></pre>

<p>Any help would be appreciated.</p>

<p>Thanks</p>",python|user-input,"<p>Thrustmaster's answer is correct:</p>

<p>You are taking an input, which is a string, no matter what is entered as input, then you are trying to perform a math operation with a string and an integer. </p>

<p>you need to convert your strings to ints or call them as ints when you are performing your math functions. </p>

<p>example one:</p>

<pre><code>raw = input(""Raw Formatting:"")
disk = input(""On-disk formatting:"")
slack = input(""Slack space:"")
quest = input(""Select protection; 1=FTT, 2=EC-1, 3=EC-2:"")
raw = float(raw)
disk = float(disk)
slack = float(slack)
quest= float(quest)
if quest == 1:
    answer = raw * (1-disk) * (1-slack) * 0.5
    print (answer)
elif quest == 2:
    answer = raw * (1-disk) * (1-slack) * 0.75
    print (answer)
elif quest == 3:
    answer = raw * (1-disk) * (1-slack) * 0.67
    print (answer)
else:
    print (""You didn't provide a valid protection level"")
</code></pre>

<p>Example 2</p>

<pre><code>raw = input(""Raw Formatting:"")
disk = input(""On-disk formatting:"")
slack = input(""Slack space:"")
quest = input(""Select protection; 1=FTT, 2=EC-1, 3=EC-2:"")

if quest == '1':
    answer = float(raw) * (1-float(disk)) * (1-float(slack)) * 0.5
    print (answer)
elif quest == '2':
    answer = float(raw) * (1-float(disk)) * (1-float(slack)) * 0.75
    print (answer)
elif quest == '3':
    answer = float(raw) * (1-float(disk)) * (1-float(slack)) * 0.67
    print (answer)
else:
    print (""You didn't provide a valid protection level"")
</code></pre>

<p>You will also need to check to make sure that what you are getting back will evaluate to integer, less you want more errors.. first thing you should do is strip spaces from you input</p>

<pre><code>x = input('type a number: ').strip(' ')
</code></pre>

<p>then you should ensure that your input(string values) are numbers.</p>

<pre><code>if not x.isdigit():
    print(""you didn't enter a number"")
</code></pre>

<p>Alternatively, there are more pythonic ways to perform the answer I have given, but I think the answer is appropriate for you currently
you should be able to work with that..
read the docs <a href=""https://docs.python.org/3/library/"" rel=""nofollow"">https://docs.python.org/3/library/</a></p>",0
152,37443622,Python user-input,"<p>I'm trying to come up with a simple calculator that takes a user's input and does a calculation but it keeps throwing out errors. </p>

<pre><code>raw = input(""Raw Formatting:"")
disk = input(""On-disk formatting:"")
slack = input(""Slack space:"")
quest = input(""Select protection; 1=FTT, 2=EC-1, 3=EC-2:"")

if quest == 1:
    answer = raw * (1-disk) * (1-slack) * 0.5
    print (answer)
elif quest == 2:
    answer = raw * (1-disk) * (1-slack) * 0.75
    print (answer)
elif quest == 3:
    answer = raw * (1-disk) * (1-slack) * 0.67
    print (answer)
else:
    print (""You didn't provide a valid protection level"")
</code></pre>

<p>Output:</p>

<pre><code>Raw Formatting:24
On-disk formatting:0.1
Slack space:0.3
Select protection; 1=FTT, 2=EC-1, 3=EC-2:1
Traceback (most recent call last):
 File ""C:\Users\Ed\Desktop\hello.py"", line 7, in &lt;module&gt;
  answer = raw * (1-disk) * (1-slack) * 0.5
TypeError: unsupported operand type(s) for -: 'int' and 'str' 
</code></pre>

<p>Any help would be appreciated.</p>

<p>Thanks</p>",python|user-input,"<p>You are comparing a string against an integer.</p>

<p>You should do (with all the variables):</p>

<pre><code>quest = int(input("" .... ""))
</code></pre>

<p>and then compare the way you are doing currently.</p>",1
153,37441698,Scapy sniffing on Windows,"<p>I run this code as administrator:</p>

<pre><code>from scapy.all import *
def poison(packet):
    packet[TCP].flags='R'
    sendp(packet)
sniff(prn=poison,filter='tcp',iface='any')
</code></pre>

<p>And I have error:AttributeError None Type object has no attribute encode<br>
What should I do to make it work?</p>",python|scapy,"<p>I don't think setting <code>iface</code> to <code>""any""</code> is valid under Windows.</p>

<p>You can check by removing the <code>iface</code> parameter from your code (or by using a valid interface name).</p>",0
154,37313471,"What's the meaning of ""(1,) == 1,"" in Python?","<p>I'm testing the tuple structure, and I found it's strange when I use the <code>==</code> operator like:</p>

<pre><code>&gt;&gt;&gt;  (1,) == 1,
Out: (False,)
</code></pre>

<p>When I assign these two expressions to a variable, the result is true:</p>

<pre><code>&gt;&gt;&gt; a = (1,)
&gt;&gt;&gt; b = 1,
&gt;&gt;&gt; a==b
Out: True
</code></pre>

<p>This questions is different from <a href=""https://stackoverflow.com/questions/7992559/python-tuple-trailing-comma-syntax-rule"">Python tuple trailing comma syntax rule</a> in my view. I ask the group of expressions between <code>==</code> operator. </p>",python|tuples|equals-operator,"<p>This is just operator precedence.  Your first</p>

<pre><code>(1,) == 1,
</code></pre>

<p>groups like so:</p>

<pre><code>((1,) == 1),
</code></pre>

<p>so builds a tuple with a single element from the result of comparing the one-element tuple <code>1,</code> to the integer <code>1</code> for equality  They're not equal, so you get the 1-tuple <code>False,</code> for a result.</p>",156
155,37313471,"What's the meaning of ""(1,) == 1,"" in Python?","<p>I'm testing the tuple structure, and I found it's strange when I use the <code>==</code> operator like:</p>

<pre><code>&gt;&gt;&gt;  (1,) == 1,
Out: (False,)
</code></pre>

<p>When I assign these two expressions to a variable, the result is true:</p>

<pre><code>&gt;&gt;&gt; a = (1,)
&gt;&gt;&gt; b = 1,
&gt;&gt;&gt; a==b
Out: True
</code></pre>

<p>This questions is different from <a href=""https://stackoverflow.com/questions/7992559/python-tuple-trailing-comma-syntax-rule"">Python tuple trailing comma syntax rule</a> in my view. I ask the group of expressions between <code>==</code> operator. </p>",python|tuples|equals-operator,"<p>When you do </p>

<pre><code>&gt;&gt;&gt; (1,) == 1,
</code></pre>

<p>it builds a tuple with the result from comparing the <em>tuple</em> <code>(1,)</code> with an <em>integer</em> and thus returning <code>False</code>.</p>

<p>Instead when you assign to variables, the two <em>equal tuples</em> are compared with each other.</p>

<p>You can try:</p>

<pre><code>&gt;&gt;&gt; x = 1,
&gt;&gt;&gt; x
(1,)
</code></pre>",13
156,37313471,"What's the meaning of ""(1,) == 1,"" in Python?","<p>I'm testing the tuple structure, and I found it's strange when I use the <code>==</code> operator like:</p>

<pre><code>&gt;&gt;&gt;  (1,) == 1,
Out: (False,)
</code></pre>

<p>When I assign these two expressions to a variable, the result is true:</p>

<pre><code>&gt;&gt;&gt; a = (1,)
&gt;&gt;&gt; b = 1,
&gt;&gt;&gt; a==b
Out: True
</code></pre>

<p>This questions is different from <a href=""https://stackoverflow.com/questions/7992559/python-tuple-trailing-comma-syntax-rule"">Python tuple trailing comma syntax rule</a> in my view. I ask the group of expressions between <code>==</code> operator. </p>",python|tuples|equals-operator,"<p>Other answers have already shown you that the behaviour is due to operator precedence, as documented <a href=""https://docs.python.org/3/reference/expressions.html#operator-precedence"" rel=""noreferrer"">here</a>.  </p>

<p>I'm going to show you how to find the answer yourself next time you have a question similar to this.  You can deconstruct how the expression parses using the <a href=""https://docs.python.org/3/library/ast.html"" rel=""noreferrer""><code>ast</code></a> module:</p>

<pre><code>&gt;&gt;&gt; import ast
&gt;&gt;&gt; source_code = '(1,) == 1,'
&gt;&gt;&gt; print(ast.dump(ast.parse(source_code), annotate_fields=False))
Module([Expr(Tuple([Compare(Tuple([Num(1)], Load()), [Eq()], [Num(1)])], Load()))])
</code></pre>

<p>From this we can see that the code gets parsed <a href=""https://stackoverflow.com/a/37313506/674039"">as Tim Peters explained</a>: </p>

<pre><code>Module([Expr(
    Tuple([
        Compare(
            Tuple([Num(1)], Load()), 
            [Eq()], 
            [Num(1)]
        )
    ], Load())
)])
</code></pre>",90
157,31385175,Django+MongoDb connection error,"<p>I am currently developing an application in Django+MongoDb. The application has to just push the data into the database once the url of the application is accessed. </p>

<p>But how ever I am encountering this error <code>mongoengine.connection.ConnectionError: Cannot connect to database default : port must be an instance of int
</code></p>

<p>As the error states port should be an 'int', I changed the port details from <code>mongoengine.connect('employeedb', host='127.0.0.1', port='8000')</code> to 
<code>mongoengine.connect('employeedb', host='127.0.0.1', port=8000)</code> in my settings.py file but then I get an error stating <code>mongoengine.connection.ConnectionError: Cannot connect to database default : [Errno 111] Connection refused</code></p>

<p>Can anyone find out what is going wrong here?</p>

<p>I am using: <code>django==1.7, mongoengine, django-toolbox &amp; pymongo==2.8</code></p>

<p>My settings.py file is <a href=""https://github.com/iyerkiran/zaya/tree/master/zaya_project"" rel=""nofollow"">here</a></p>

<p><strong>EDIT: My OS= Ubuntu 14.04 &amp; 
I have not installed django-nonrel</strong></p>",python|django|mongodb,"<p>Install mongodb in local pc and set dbpath,</p>

<p>Then open cmd and open connection using this command:</p>

<p>c:/mongodb/bin>mongod --dbpath (path of db)</p>

<p>and then replace you connection line in settings.py like this and run your project.</p>

<pre><code>mongoengine.connect('employeedb', username='', password='')
</code></pre>

<p>Let me know.</p>",1
158,31385175,Django+MongoDb connection error,"<p>I am currently developing an application in Django+MongoDb. The application has to just push the data into the database once the url of the application is accessed. </p>

<p>But how ever I am encountering this error <code>mongoengine.connection.ConnectionError: Cannot connect to database default : port must be an instance of int
</code></p>

<p>As the error states port should be an 'int', I changed the port details from <code>mongoengine.connect('employeedb', host='127.0.0.1', port='8000')</code> to 
<code>mongoengine.connect('employeedb', host='127.0.0.1', port=8000)</code> in my settings.py file but then I get an error stating <code>mongoengine.connection.ConnectionError: Cannot connect to database default : [Errno 111] Connection refused</code></p>

<p>Can anyone find out what is going wrong here?</p>

<p>I am using: <code>django==1.7, mongoengine, django-toolbox &amp; pymongo==2.8</code></p>

<p>My settings.py file is <a href=""https://github.com/iyerkiran/zaya/tree/master/zaya_project"" rel=""nofollow"">here</a></p>

<p><strong>EDIT: My OS= Ubuntu 14.04 &amp; 
I have not installed django-nonrel</strong></p>",python|django|mongodb,"<p>Try replacing dummy database from DATABASES dict with the following, should work for you.</p>

<pre><code>DATABASES = {
    'default' : {
      'ENGINE' : 'django_mongodb_engine',
      'NAME' : 'employeedb'    
    } 
}
</code></pre>

<p>Django MongoDB Engine also takes into account the HOST, PORT, USER, PASSWORD and OPTIONS settings.</p>

<p>For more help <a href=""https://django-mongodb-engine.readthedocs.org/en/latest/reference/settings.html"" rel=""nofollow"">https://django-mongodb-engine.readthedocs.org/en/latest/reference/settings.html</a></p>",0
159,31480325,__add__ operator what am i doing wrong?,"<p>I have to add two names together using the overloading operator <strong>add</strong>. My output should be both names added together for example: ""john"" + ""frank"" = 'JohnFrank'</p>

<pre><code>class Person():
    def __init__(self, name):
        self.aname = name


    def __add__(self,other):
        x = self.person1 
        y = self.person2 
        print(x + y)
        return(Couple(x,y))

class Couple(Person):
    def __init__(self,person1,person2):
        self.person1 = person1
        self.person2 = person2
</code></pre>

<p>What am i doing wrong?</p>

<p>The error i get:</p>

<pre><code>Traceback (most recent call last):
  File ""&lt;pyshell#81&gt;"", line 1, in &lt;module&gt;
    acouple = p1 + p2
  File ""/Users/Desktop/NameP.py"", line 7, in __add__
    x = self.person1
AttributeError: 'Person' object has no attribute 'person1'
</code></pre>",python|operator-overloading,"<pre><code># This is what worked for me


class Person():
    def __init__(self, name):
        self.aname = name


    def __add__(self,other):
        x = self.aname 
        y = self.aname 
        print(self.aname + "" "" + other.aname)
        return(Couple(x,y))


class Couple(Person):
    def __init__(self,person1,person2):
        self.person1 = person1
        self.person2 = person2
    enter code here
</code></pre>",0
160,31480325,__add__ operator what am i doing wrong?,"<p>I have to add two names together using the overloading operator <strong>add</strong>. My output should be both names added together for example: ""john"" + ""frank"" = 'JohnFrank'</p>

<pre><code>class Person():
    def __init__(self, name):
        self.aname = name


    def __add__(self,other):
        x = self.person1 
        y = self.person2 
        print(x + y)
        return(Couple(x,y))

class Couple(Person):
    def __init__(self,person1,person2):
        self.person1 = person1
        self.person2 = person2
</code></pre>

<p>What am i doing wrong?</p>

<p>The error i get:</p>

<pre><code>Traceback (most recent call last):
  File ""&lt;pyshell#81&gt;"", line 1, in &lt;module&gt;
    acouple = p1 + p2
  File ""/Users/Desktop/NameP.py"", line 7, in __add__
    x = self.person1
AttributeError: 'Person' object has no attribute 'person1'
</code></pre>",python|operator-overloading,"<p>A <code>Person</code> object only has <code>aname</code> so you should pass the currect object <code>self</code> and the added object:</p>

<pre><code>def __add__(self, other):
    return Couple(self, other)
</code></pre>",1
161,31352161,Python: How to keep running program until some value becomes 0 and checking how long it takes,"<p>I have the following code:</p>

<pre><code>time_counter = 0
for i in range(time_counter):
    if pred &gt; 0:
        prey, pred = prey*(1+A-B*pred), pred*1-C+D*prey)
    else:
        print time_counter
    time_counter +=1
</code></pre>

<p>The values for A, B, C, and D are fixed to 0.1, 0.01, 0.01, 0.00009. pred is 20 and prey is 1000. I'm trying to figure out how long it takes for pred to become 0 (as an integer, not float) and then display that time.</p>

<p>Logically, I can think of it is starting the time at 0 and running the formula...if pred is greater than 0 than repeat and until pred is 0 or less than 0 to stop and display the time. Not sure what I am doing wrong.</p>

<p>Please try to keep it basic. I'd like to be able to do it using a for loop with conditional statements and using Python 2.7 syntax.</p>

<p>EDIT: Sorry if something was confusing. I want to count the time periods (which in this case would be the number of iterations) that the loop runs until pred is equal to 0. However, pred should be considered 0 once it is &lt; 1 so even 0.999 would be 0.</p>",python|if-statement|for-loop,"<p>Here's a sloppy answer from my mobile:</p>

<pre><code>import time

time.time()
while (pred &gt; 0):
    # smooth jazz
time.time()
</code></pre>

<p>Apologies if this kind of answer is a bit lacking as I don't have an IDE available to verify my syntax. </p>",0
162,31352161,Python: How to keep running program until some value becomes 0 and checking how long it takes,"<p>I have the following code:</p>

<pre><code>time_counter = 0
for i in range(time_counter):
    if pred &gt; 0:
        prey, pred = prey*(1+A-B*pred), pred*1-C+D*prey)
    else:
        print time_counter
    time_counter +=1
</code></pre>

<p>The values for A, B, C, and D are fixed to 0.1, 0.01, 0.01, 0.00009. pred is 20 and prey is 1000. I'm trying to figure out how long it takes for pred to become 0 (as an integer, not float) and then display that time.</p>

<p>Logically, I can think of it is starting the time at 0 and running the formula...if pred is greater than 0 than repeat and until pred is 0 or less than 0 to stop and display the time. Not sure what I am doing wrong.</p>

<p>Please try to keep it basic. I'd like to be able to do it using a for loop with conditional statements and using Python 2.7 syntax.</p>

<p>EDIT: Sorry if something was confusing. I want to count the time periods (which in this case would be the number of iterations) that the loop runs until pred is equal to 0. However, pred should be considered 0 once it is &lt; 1 so even 0.999 would be 0.</p>",python|if-statement|for-loop,"<p>Actually, the while loop worked however I needed to add int tags before the formulas ran in order for it to appropriately evaluate. Otherwise I was getting into very miniscule values that were greater than 0 (think 1*10^-9) and the program would just end once it couldn't handle the small values. </p>",0
163,31352161,Python: How to keep running program until some value becomes 0 and checking how long it takes,"<p>I have the following code:</p>

<pre><code>time_counter = 0
for i in range(time_counter):
    if pred &gt; 0:
        prey, pred = prey*(1+A-B*pred), pred*1-C+D*prey)
    else:
        print time_counter
    time_counter +=1
</code></pre>

<p>The values for A, B, C, and D are fixed to 0.1, 0.01, 0.01, 0.00009. pred is 20 and prey is 1000. I'm trying to figure out how long it takes for pred to become 0 (as an integer, not float) and then display that time.</p>

<p>Logically, I can think of it is starting the time at 0 and running the formula...if pred is greater than 0 than repeat and until pred is 0 or less than 0 to stop and display the time. Not sure what I am doing wrong.</p>

<p>Please try to keep it basic. I'd like to be able to do it using a for loop with conditional statements and using Python 2.7 syntax.</p>

<p>EDIT: Sorry if something was confusing. I want to count the time periods (which in this case would be the number of iterations) that the loop runs until pred is equal to 0. However, pred should be considered 0 once it is &lt; 1 so even 0.999 would be 0.</p>",python|if-statement|for-loop,"<p>You should use a while loop. Your for loop wont even start if you set <code>time_counter = 0</code></p>

<pre><code>time_counter = 0
while pred &gt; 0:
    prey, pred = int(prey*(1+A-B*pred)), int(pred*(1-C+D*prey))
    time_counter +=1
print time_counter
</code></pre>

<p>This will run until <code>pred &lt;= 0</code>. Although it will not time the function, but rather count the number of loops it takes for <code>pred</code> to be <code>&lt;= 0</code></p>",0
164,31352161,Python: How to keep running program until some value becomes 0 and checking how long it takes,"<p>I have the following code:</p>

<pre><code>time_counter = 0
for i in range(time_counter):
    if pred &gt; 0:
        prey, pred = prey*(1+A-B*pred), pred*1-C+D*prey)
    else:
        print time_counter
    time_counter +=1
</code></pre>

<p>The values for A, B, C, and D are fixed to 0.1, 0.01, 0.01, 0.00009. pred is 20 and prey is 1000. I'm trying to figure out how long it takes for pred to become 0 (as an integer, not float) and then display that time.</p>

<p>Logically, I can think of it is starting the time at 0 and running the formula...if pred is greater than 0 than repeat and until pred is 0 or less than 0 to stop and display the time. Not sure what I am doing wrong.</p>

<p>Please try to keep it basic. I'd like to be able to do it using a for loop with conditional statements and using Python 2.7 syntax.</p>

<p>EDIT: Sorry if something was confusing. I want to count the time periods (which in this case would be the number of iterations) that the loop runs until pred is equal to 0. However, pred should be considered 0 once it is &lt; 1 so even 0.999 would be 0.</p>",python|if-statement|for-loop,"<p>Here's what I would do:</p>

<pre><code>time_counter = 0
while pred &gt; 0:
    prey, pred = prey*(1+A-B*pred), pred*(1-C+D*prey)
    print prey, pred
    time_counter +=1
    print time_counter
</code></pre>",-1
165,31312149,Selecting image inside SVG tag in selenium,"<p>I have just started working in selenium and stuck at a point and need help.
Here is my html. I am using python selinium</p>

<pre><code>&lt;div id=""d3_tree""&gt;
  &lt;svg&gt;
    &lt;g&gt;
      &lt;g class=""node vm node_pe""&gt;
        &lt;image class=""mainNode"" xlink:href=""images/edge.png""&gt; &lt;/image&gt;
        &lt;image xlink:href=""images/gate.png""&gt;&lt;/image&gt;
      &lt;/g&gt;
      &lt;g class=""node vm node_pe""&gt;
        &lt;image class=""mainNode"" xlink:href=""images/edge.png""&gt; &lt;/image&gt;
        &lt;image xlink:href=""images/gate.png""&gt;&lt;/image&gt;
      &lt;/g&gt;
    &lt;/g&gt;
  &lt;/svg&gt;
&lt;/div&gt;
</code></pre>

<p>i want to get the image tag of all vm node_pe so i can check which node has image.</p>

<p>These are the xpaths i tried using, Where i is the loop on xpath.</p>

<pre><code>""//div[@id='d3_tree']/*[name()='svg']/*[name()='g']/*[name()='g[""+str(i)+""]']/*[name()='image[2]']""
</code></pre>

<p>Above xpath return NONE</p>

<pre><code>""//div[@id='d3_tree']/*[name()='svg']/*[name()='g']/*[name()='g[""+str(i)+""]']""
</code></pre>

<p>Return 1 element but cannot get any attribute.</p>

<pre><code>""//*[contains(@class, 'node vm node_pe')]""
</code></pre>

<p>Return all elements but get_attribute(""innerHTML"") return NONE</p>

<p>Any help will be appreciated
Thanks</p>",python|selenium|xpath|svg,"<p>This XPATH should work :</p>

<pre><code>//*[@id=""d3_tree""]/svg/g/g/*[contains(@class, 'mainNode')]/@xlink:href
</code></pre>

<p>or maybe you can do it like this :</p>

<pre><code>images = WebDriverWait(driver, 2).until(lambda driver: driver.find_elements_by_css_selector('#d3_tree image.mainNode'))
for image in images:
    print(image.get_attribute('xlink:href'))
</code></pre>

<p>to check if a node got image, you can check if attribute is none.</p>

<pre><code>if(image.get_attribute('xlink:href') is None):
    print(""attribute is none"")
</code></pre>",1
166,31326117,flip keys and values in dictionary python,"<p>I have a dictionary called z that looks like this</p>

<hr>

<p>{0: [0.28209479177387814, 0.19947114020071635, 0.10377687435514868, 0.07338133158686996], 
-1: [0.28209479177387814, 0.19947114020071635, 0.10377687435514868, 0.07338133158686996]}.</p>

<p>I want to flip the values and keys to have </p>

<p>{0.28209479177387814:0, 0.19947114020071635:0, 0.10377687435514868:0, 0.07338133158686996:0, 
0.28209479177387814:-1, 0.19947114020071635:-1, 0.10377687435514868:-1, 0.07338133158686996:-1}</p>

<p>The piece of code that seems to work is :</p>

<pre><code>for a in z:
     newdict=dict.fromkeys(z[a],a)
</code></pre>

<p>but it only works for one of the keys in z and returns this:</p>

<p>{0.28209479177387814: -1, 0.07338133158686996: -1, 0.10377687435514868: -1, 0.19947114020071635: -1}</p>

<p>what am I doing wrong?</p>",python|dictionary,"<p>Easiest way to flip key value in a dict is using dict comprehension, which looks like this: <code>{value: key for key, value in ORIGINAL_DICT.items()}</code>. Full example:</p>

<pre><code>REGION_PREFIX = {
    'AB': 'Alberta',
    'BC': 'British Columbia',
    'IN': 'International',
    'MB': 'Manitoba',
    'NB': 'New Brunswick',
    'NL': 'Newfoundland',
    'NS': 'Nova Scotia',
    'NU': 'Nunavut',
    'NW': 'Northwest Territories',
    'ON': 'Ontario',
    'PE': 'Prince Edward Island',
    'QC': 'Quebec',
    'SK': 'Saskatchewan',
    'US': 'United States',
    'YK': 'Yukon',
}

REGION_PREFIX2 = {value: key for key, value in REGION_PREFIX.items()}
</code></pre>

<p>And your output is this:</p>

<pre><code>{'Alberta': 'AB', 'British Columbia': 'BC', 'International': 'IN', 'Manitoba': 'MB', 'New Brunswick': 'NB', 'Newfoundland': 'NL', 'Nova Scotia': 'NS', 'Nunavut': 'NU', 'Northwest Territories': 'NW', 'Ontario': 'ON', 'Prince Edward Island': 'PE', 'Quebec': 'QC', 'Saskatchewan': 'SK', 'United States': 'US', 'Yukon': 'YK'}
</code></pre>

<p>Cheers!</p>",1
167,31326117,flip keys and values in dictionary python,"<p>I have a dictionary called z that looks like this</p>

<hr>

<p>{0: [0.28209479177387814, 0.19947114020071635, 0.10377687435514868, 0.07338133158686996], 
-1: [0.28209479177387814, 0.19947114020071635, 0.10377687435514868, 0.07338133158686996]}.</p>

<p>I want to flip the values and keys to have </p>

<p>{0.28209479177387814:0, 0.19947114020071635:0, 0.10377687435514868:0, 0.07338133158686996:0, 
0.28209479177387814:-1, 0.19947114020071635:-1, 0.10377687435514868:-1, 0.07338133158686996:-1}</p>

<p>The piece of code that seems to work is :</p>

<pre><code>for a in z:
     newdict=dict.fromkeys(z[a],a)
</code></pre>

<p>but it only works for one of the keys in z and returns this:</p>

<p>{0.28209479177387814: -1, 0.07338133158686996: -1, 0.10377687435514868: -1, 0.19947114020071635: -1}</p>

<p>what am I doing wrong?</p>",python|dictionary,"<p>As you have already seen in the comments on your question, Python dictionaries cannot have duplicate keys, since there would be uncertainty as to a correct single value given a key</p>

<p>This could be fixed by having parallel structure to the first, so instead of <code>{value:key}</code>, it would be <code>{value:[key1, key2]}</code>. The code to generate it would be:</p>

<pre><code>new = {}
for key, value in z.items():
  if not value in new:
    new[value] = []
  new[value].append(key)
</code></pre>

<p>See Adam Smith's answer for more details. </p>",4
168,31326117,flip keys and values in dictionary python,"<p>I have a dictionary called z that looks like this</p>

<hr>

<p>{0: [0.28209479177387814, 0.19947114020071635, 0.10377687435514868, 0.07338133158686996], 
-1: [0.28209479177387814, 0.19947114020071635, 0.10377687435514868, 0.07338133158686996]}.</p>

<p>I want to flip the values and keys to have </p>

<p>{0.28209479177387814:0, 0.19947114020071635:0, 0.10377687435514868:0, 0.07338133158686996:0, 
0.28209479177387814:-1, 0.19947114020071635:-1, 0.10377687435514868:-1, 0.07338133158686996:-1}</p>

<p>The piece of code that seems to work is :</p>

<pre><code>for a in z:
     newdict=dict.fromkeys(z[a],a)
</code></pre>

<p>but it only works for one of the keys in z and returns this:</p>

<p>{0.28209479177387814: -1, 0.07338133158686996: -1, 0.10377687435514868: -1, 0.19947114020071635: -1}</p>

<p>what am I doing wrong?</p>",python|dictionary,"<p>You can't have duplicate keys in a dictionary, but you can pair them together using tuples in a meaningful way.</p>

<pre><code>from itertools import product, chain

tuples = chain.from_iterable(product(vs, [k]) for k, vs in orig_dict.items())
# note this is identical to:
# # tuples = []
# # for k, vs in orig_dict.items():
# #     for tup in [(v, k) for v in vs]:
# #         tuples.append(tup)
</code></pre>

<p>That will produce:</p>

<pre><code>[(0.28209479177387814, 0), (0.19947114020071635, 0),
 (0.10377687435514868, 0), (0.07338133158686996, 0),
 (0.28209479177387814, -1), (0.19947114020071635, -1),
 (0.10377687435514868, -1), (0.07338133158686996, -1)]
</code></pre>

<p>Now if you really wanted something interesting, you could sort that and group it together.</p>

<pre><code>from itertools import groupby

groups = groupby(sorted(tuples), key=lambda kv: kv[0])
</code></pre>

<p>That creates something like:</p>

<pre><code>[(0.07338133158686996, [(0.07338133158686996, 0,
                         0.07338133158686996, -1] ),
 ... ]
</code></pre>

<p>You could toss those into a dict by doing:</p>

<pre><code>final_dict = {k: [v[1] for v in vs] for k, vs in groups}
</code></pre>

<p>Which should finally give:</p>

<pre><code>{0.07338133158686996: [0, -1],
 ... }
</code></pre>",3
169,31317596,How should one test matplotlib plotting with tox and py.test?,"<p>How should one test matplotlib plotting with tox and py.test?</p>

<p>My files are:</p>

<pre><code>testtox /
  - testtox.py
  - tox.ini
  - setup.py
</code></pre>

<p>testtox.py contains:</p>

<pre><code>import matplotlib.pyplot as plt


def plotting():
    """"""Plot.

    Examples
    --------
    &gt;&gt;&gt; plt.ion()
    &gt;&gt;&gt; plotting()

    """"""
    plt.plot([1, 2, 1, 3])
</code></pre>

<p>tox.ini:</p>

<pre><code>[tox]
envlist = py27

[testenv:py27]
sitepackages = True
commands = py.test --doctest-modules testtox.py
deps = pytest
</code></pre>

<p>setup.py:</p>

<pre><code>from setuptools import setup

setup(name='testtox', py_modules=['testtox'])
</code></pre>

<p>py.test on its own works ok: </p>

<pre><code>$ py.test --doctest-modules testtox.py
</code></pre>

<p>In this case the plot window is briefly flashed.</p>

<p>tox produces an error on the DISPLAY variable: </p>

<pre><code>$ tox
[...cut ...]
=================================================== FAILURES ====================================================
__________________________________________ [doctest] testtox.plotting ___________________________________________
005     """"""Plot.
006 
007     Examples
008     --------
009     &gt;&gt;&gt; plt.ion()
010     &gt;&gt;&gt; plotting()
UNEXPECTED EXCEPTION: RuntimeError(u'Invalid DISPLAY variable',)
Traceback (most recent call last):
[...]

  File ""/usr/local/lib/python2.7/dist-packages/matplotlib/backends/backend_qt5.py"", line 138, in _create_qApp
    raise RuntimeError('Invalid DISPLAY variable')

RuntimeError: Invalid DISPLAY variable
</code></pre>

<p>This error happened with the most recent version of tox (2.1.1). An older version did not produce the error. </p>",python|matplotlib|pytest|tox,"<p>Setting the DISPLAY environment variable in <code>tox.ini</code> seems to do the trick in this case: </p>

<pre><code>[tox]
envlist = py27

[testenv:py27]
setenv = 
    DISPLAY = :0
sitepackages = True
commands = py.test --doctest-modules testtox.py
deps = pytest
</code></pre>",0
170,4134718,"Facebook Events and timezones, how to convert UTC datetime to what facebook expects?","<p>My application needs to create facebook events. Everything works fine, but I can't get the timezones correct. The start/end dates are all wrong. Facebook's Event API docs say this:</p>

<blockquote>
  <p>Note: The start_time and end_time are the times that were input by the event creator, converted to UTC after assuming that they were in Pacific time (Daylight Savings or Standard, depending on the date of the event), then converted into Unix epoch time.</p>
</blockquote>

<p><a href=""http://developers.facebook.com/docs/reference/rest/events.create"" rel=""nofollow"">(source)</a></p>

<p>I can't figure out what that means.</p>

<p>My web application is a python (django) site. Given a <code>datetime</code> object which has the start/end time in UTC, what is the magical incantation of <code>pytz</code> calls to get the correct time to send to facebook?</p>",python|facebook|datetime|timezone,"<p>It means that if the user enters ""12 am"" you're supposed to assume its ""12 am pacific time"", convert that to UTC so its ""8 am GMT"" and turn that into a unix epoch.</p>

<p>You can do it like this:</p>

<pre><code>import datetime, calendar

date_local = datetime.datetime.now() # some date in some timezone
date_utc = date_local.utctimetuple() 
unix_time = calendar.timegm(date_utc) # to unix time
</code></pre>",2
171,4134718,"Facebook Events and timezones, how to convert UTC datetime to what facebook expects?","<p>My application needs to create facebook events. Everything works fine, but I can't get the timezones correct. The start/end dates are all wrong. Facebook's Event API docs say this:</p>

<blockquote>
  <p>Note: The start_time and end_time are the times that were input by the event creator, converted to UTC after assuming that they were in Pacific time (Daylight Savings or Standard, depending on the date of the event), then converted into Unix epoch time.</p>
</blockquote>

<p><a href=""http://developers.facebook.com/docs/reference/rest/events.create"" rel=""nofollow"">(source)</a></p>

<p>I can't figure out what that means.</p>

<p>My web application is a python (django) site. Given a <code>datetime</code> object which has the start/end time in UTC, what is the magical incantation of <code>pytz</code> calls to get the correct time to send to facebook?</p>",python|facebook|datetime|timezone,"<p>""<a href=""http://en.wikipedia.org/wiki/Unix_time"" rel=""nofollow"">Unix epoch time</a>"" simply means ""number of seconds since January 1, 1970 (not counting leap seconds)"".</p>

<p>By the way, that Facebook Event API description is so bizarre, I can't believe it is right as described. What they seem to be asking for is:</p>

<ol>
<li>The time that was input by the event creator;</li>
<li>Interpreted as if a local time in the Pacific time zone, with the daylight saving rules for that zone in effect;</li>
<li>Converted to UTC.</li>
</ol>

<p>I live in the timezone UTC+0. So if I schedule an event at 2010-11-09 12:00:00 UTC, the time that actually gets submitted to Facebook is (the Unix time corresponding to) 2010-11-09 20:00:00 UTC. How can that be right? Maybe I've misunderstood.</p>",1
172,4504270,Distributing a Python Software for Linux,"<p>I am writing my first software in Python for Ubuntu (or Debian based Linux). I am looking for a good advise on the best way to distribute my software. </p>

<p>The easist alternative that I can think of at the moment is to archive the python code into *.tar.gz, and let user execute the  main python script as an executable to run the software. I realize that this may not be the best approach.</p>

<p>I looked at the Debian maintainer guide: ""http://www.debian.org/doc/maint-guide/ch-dother.en.html"", not too sound lazy, but the guide looks very intimidating for a beginner. Are there any other tutorial that show how to create a debian package for a beginner ?</p>

<p>If anyone has a suggestion do let me know. Thanks ^_^</p>",ubuntu|python|packaging,"<p><a href=""http://docs.python.org/distutils/index.html"" rel=""nofollow"">Here</a>. This is the official, distribution-agnostic way to package and distribute a python program. <strong>Use this one</strong>, you'll have to learn it anyway one day.</p>

<p>Here, instead, is a cheap and dirty hack:</p>

<ol>
<li>Make a directory <code>/programname/</code>;</li>
<li>Put your whole project folder in a subdirectory <code>/program/</code>;</li>
<li>Put a file <code>programname.sh</code> in your <code>/programname/</code> folder;</li>
<li>Let this <code>programname.sh</code> call your python files.</li>
</ol>

<p>If you want to go on on the non-standard path, you might:</p>

<ol>
<li>Require that the program is executed as root;</li>
<li>Make it create a shell script in <code>/usr/bin</code> called programname, which executes <code>python /path/to/_main_.py</code></li>
</ol>",-3
173,4504270,Distributing a Python Software for Linux,"<p>I am writing my first software in Python for Ubuntu (or Debian based Linux). I am looking for a good advise on the best way to distribute my software. </p>

<p>The easist alternative that I can think of at the moment is to archive the python code into *.tar.gz, and let user execute the  main python script as an executable to run the software. I realize that this may not be the best approach.</p>

<p>I looked at the Debian maintainer guide: ""http://www.debian.org/doc/maint-guide/ch-dother.en.html"", not too sound lazy, but the guide looks very intimidating for a beginner. Are there any other tutorial that show how to create a debian package for a beginner ?</p>

<p>If anyone has a suggestion do let me know. Thanks ^_^</p>",ubuntu|python|packaging,"<p>Just sending them the source in a tarball is perfectly fine. You could also put it up on <a href=""http://pypi.python.org/pypi"" rel=""nofollow"">http://pypi.python.org/pypi</a>. How else were you thinking? There are lots of ways of doing it really. Jut distributing source is probably the easiest.</p>",3
174,4573468,What is good practice for writing web applications that control daemons (and their config files),"<p>Can someone suggest some basic advice on dealing with web applications that interact with configuration files like httpd.conf, bind zone files, etc.</p>

<p>I understand that it's bad practice, in fact very dangerous to allow arbitrary execution of code without fully validating it and so on. But say you are tasked to write a small app that allows one to add vhosts to an apache configuration.</p>

<p>Do you have your code execute with full privileges, do you write future variables into a database and have a cron job (with full privileges) execute a script that pulls the vars from the database and throws them into a template config file, etc.</p>

<p>Some thoughts &amp; contributions on this issue would be appreciated.</p>

<p>tl;dr - how can you securely write a web app to update/create entries in a config file like apache's httpd.conf, etc.</p>",php|python|ruby-on-rails|system-administration|database-administration,"<blockquote>
  <p>I understand that it's bad practice, in fact very dangerous to allow arbitrary execution of code without fully validating it and so on.</p>
</blockquote>

<p>True.</p>

<blockquote>
  <p>But say you are tasked to write a small app that allows one to add vhosts to an apache configuration.</p>
</blockquote>

<p>Unrelated to the first point.  Totally unrelated.  Indeed, why is the first point even in there?</p>

<p>Adding vhosts is a simple script.  You simply write the script and get it to work. It requires extraordinary privileges.  But it's not ""arbitrary execution of code"".  And it will be ""fully validatated"" (Whatever that means.  You write it.  You validate it.)</p>

<p>This is not a good choice for a ""web app"".  Nor is it a good choice for a daemon.  Indeed, it's really hard to see the connection between  ""add vhosts to an apache configuration"" and ""web applications that control daemons.""</p>

<p>It's just a script that just updates a file.  Nothing special.  It requires privileges, so only a select few people can run it.  Nothing special there either.  Use <code>sudo</code>.</p>

<blockquote>
  <p>Do you have your code execute with full privileges, </p>
</blockquote>

<p>Obviously.  The script can't update the vhosts without some privileges.</p>

<p>Unless by ""your code"" you don't mean the script that updates the vhosts.  If you mean something else, like a web page which allows someone to runt he script which updates the vhosts.  In which case, you've conflated the script with the web app that runs the script.</p>

<blockquote>
  <p>do you write future variables into a database and have a cron job (with full privileges) execute a script that pulls the vars from the database and throws them into a template config file, etc.</p>
</blockquote>

<p>Sure.  People do that.  It seems terribly complex.  </p>

<p>Use <code>celery</code> instead of rolling your own background processor.  <a href=""http://ask.github.com/celery/getting-started/introduction.html"" rel=""nofollow"">http://ask.github.com/celery/getting-started/introduction.html</a></p>",0
175,4573468,What is good practice for writing web applications that control daemons (and their config files),"<p>Can someone suggest some basic advice on dealing with web applications that interact with configuration files like httpd.conf, bind zone files, etc.</p>

<p>I understand that it's bad practice, in fact very dangerous to allow arbitrary execution of code without fully validating it and so on. But say you are tasked to write a small app that allows one to add vhosts to an apache configuration.</p>

<p>Do you have your code execute with full privileges, do you write future variables into a database and have a cron job (with full privileges) execute a script that pulls the vars from the database and throws them into a template config file, etc.</p>

<p>Some thoughts &amp; contributions on this issue would be appreciated.</p>

<p>tl;dr - how can you securely write a web app to update/create entries in a config file like apache's httpd.conf, etc.</p>",php|python|ruby-on-rails|system-administration|database-administration,"<p>I'm not a Unix security guru, but some basic things to think of:</p>

<ul>
<li><p>Make sure your web app runs as a specific user, and make sure that user has privileged rights <em>only</em> to those files which it is supposed to modify.</p></li>
<li><p>Do not allow arbitrary inputs to be added to the files, have strict forms where each field is validated to contain only things it should contain, like a-z and 0-9 only, etc.</p></li>
<li><p>Use HTTPS to access the site.</p></li>
</ul>

<p>I'm sure there is more to come from the real gurus.</p>",1
176,4424206,Python/C: Parse all values at once for return to Python?,"<p>If you are outputting a lot of values from C to a dict in Python, is there a better (quicker and less error prone) way to do it than:</p>

<pre><code>    return Py_BuildValue(""{s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:(i,i,i,i),s:(i,i,i,i),s:(i,i,i,i)}"",
            ""jd\0"",             spa.jd, //Julian day
            ""jc\0"",             spa.jc, //Julian century
            ""jde\0"",            spa.jde, //Julian ephemeris day
            ""jce\0"",            spa.jce, //Julian ephemeris century
            ""jme\0"",            spa.jme, //Julian ephemeris millennium
            ""l\0"",              spa.l, //earth heliocentric longitude [degrees]
            ""b\0"",              spa.b, //earth heliocentric latitude [degrees]
            ""r\0"",              spa.r,     //earth radius vector [Astronomical Units, AU]
            ""theta\0"",          spa.theta, //geocentric longitude [degrees]
            ""beta\0"",           spa.beta, //geocentric latitude [degrees]
            ""x0\0"",             spa.x0, //mean elongation (moon-sun) [degrees]
            ""x1\0"",             spa.x1, //mean anomaly (sun) [degrees]
            ""x2\0"",             spa.x2, //mean anomaly (moon) [degrees]
            ""x3\0"",             spa.x3, //argument latitude (moon) [degrees]
            ""x4\0"",             spa.x4, //ascending longitude (moon) [degrees]
            ""del_psi\0"",        spa.del_psi, //nutation longitude [degrees]
            ""del_epsilon\0"",    spa.del_epsilon, //nutation obliquity [degrees]
            ""epsilon0\0"",       spa.epsilon0, //ecliptic mean obliquity [arc seconds]
            ""epsilon\0"",        spa.epsilon, //ecliptic true obliquity  [degrees]
            ""del_tau\0"",        spa.del_tau, //aberration correction [degrees]
            ""lamda\0"",          spa.lamda, //apparent sun longitude [degrees]
            ""nu0\0"",            spa.nu0, //Greenwich mean sidereal time [degrees]
            ""nu\0"",             spa.nu, //Greenwich sidereal time [degrees]
            ""alpha\0"",          spa.alpha, //geocentric sun right ascension [degrees]
            ""delta\0"",          spa.delta, //geocentric sun declination [degrees]
            ""h\0"",              spa.h, //observer hour angle [degrees]
            ""xi\0"",             spa.xi, //sun equatorial horizontal parallax [degrees]
            ""del_alpha\0"",      spa.del_alpha, //sun right ascension parallax [degrees]
            ""delta_prime\0"",    spa.delta_prime, //topocentric sun declination [degrees]
            ""alpha_prime\0"",    spa.alpha_prime, //topocentric sun right ascension [degrees]
            ""h_prime\0"",        spa.h_prime, //topocentric local hour angle [degrees],
            ""h0_prime\0"",       spa.h0_prime,
            ""delta_zero\0"",     spa.delta_zero,
            ""e0\0"",             spa.e0, //topocentric elevation angle (uncorrected) [degrees]
            ""del_e\0"",          spa.del_e, //atmospheric refraction correction [degrees]
            ""e\0"",              spa.e, //topocentric elevation angle (corrected) [degrees]
            ""eot\0"",            spa.eot, //equation of time [minutes]
            ""srha\0"",           spa.srha, //sunrise hour angle [degrees]
            ""ssha\0"",           spa.ssha, //sunset hour angle [degrees]
            ""sta\0"",            spa.sta, //sun transit altitude [degrees]
            ""zenith\0"",         spa.zenith, //topocentric zenith angle [degrees]
            ""azimuth180\0"",     spa.azimuth180, //topocentric azimuth angle (westward from south) [-180 to 180 degrees]
            ""azimuth\0"",        spa.azimuth, //topocentric azimuth angle (eastward from north) [   0 to 360 degrees]
            ""incidence\0"",      spa.incidence, //surface incidence angle [degrees]
            ""_suntransit\0"",    spa.suntransit, //local sun transit time (or solar noon) [fractional hour]
            ""_sunrise\0"",       spa.sunrise, //local sunrise time (+/- 30 seconds) [fractional hour]
            ""_sunset\0"",        spa.sunset, //local sunset time (+/- 30 seconds) [fractional hour]
            ""sunrise\0"",        sunrise_hour, sunrise_min, sunrise_sec, sunrise_microsec,
            ""sunset\0"",         sunset_hour, sunset_min, sunset_sec, sunset_microsec,
            ""noon\0"",           transit_hour, transit_min, transit_sec, transit_microsec
            );
</code></pre>",python|c|python-c-extension,"<p>If that is needed for several structs then I'd probably write a small python script for generating this code by reading the structure definition from the .h (e.g. by tagging with a special comment what are the structs and fields you need to export as dicts) ... the last three fields in the shown case would need to be added manually to the dict however.</p>

<p>I wouldn't do that just for one struct especially if the struct is stable.</p>

<p>Did you consider exporting the objects instead of dicts for example using SIP ?</p>",1
177,4424206,Python/C: Parse all values at once for return to Python?,"<p>If you are outputting a lot of values from C to a dict in Python, is there a better (quicker and less error prone) way to do it than:</p>

<pre><code>    return Py_BuildValue(""{s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:(i,i,i,i),s:(i,i,i,i),s:(i,i,i,i)}"",
            ""jd\0"",             spa.jd, //Julian day
            ""jc\0"",             spa.jc, //Julian century
            ""jde\0"",            spa.jde, //Julian ephemeris day
            ""jce\0"",            spa.jce, //Julian ephemeris century
            ""jme\0"",            spa.jme, //Julian ephemeris millennium
            ""l\0"",              spa.l, //earth heliocentric longitude [degrees]
            ""b\0"",              spa.b, //earth heliocentric latitude [degrees]
            ""r\0"",              spa.r,     //earth radius vector [Astronomical Units, AU]
            ""theta\0"",          spa.theta, //geocentric longitude [degrees]
            ""beta\0"",           spa.beta, //geocentric latitude [degrees]
            ""x0\0"",             spa.x0, //mean elongation (moon-sun) [degrees]
            ""x1\0"",             spa.x1, //mean anomaly (sun) [degrees]
            ""x2\0"",             spa.x2, //mean anomaly (moon) [degrees]
            ""x3\0"",             spa.x3, //argument latitude (moon) [degrees]
            ""x4\0"",             spa.x4, //ascending longitude (moon) [degrees]
            ""del_psi\0"",        spa.del_psi, //nutation longitude [degrees]
            ""del_epsilon\0"",    spa.del_epsilon, //nutation obliquity [degrees]
            ""epsilon0\0"",       spa.epsilon0, //ecliptic mean obliquity [arc seconds]
            ""epsilon\0"",        spa.epsilon, //ecliptic true obliquity  [degrees]
            ""del_tau\0"",        spa.del_tau, //aberration correction [degrees]
            ""lamda\0"",          spa.lamda, //apparent sun longitude [degrees]
            ""nu0\0"",            spa.nu0, //Greenwich mean sidereal time [degrees]
            ""nu\0"",             spa.nu, //Greenwich sidereal time [degrees]
            ""alpha\0"",          spa.alpha, //geocentric sun right ascension [degrees]
            ""delta\0"",          spa.delta, //geocentric sun declination [degrees]
            ""h\0"",              spa.h, //observer hour angle [degrees]
            ""xi\0"",             spa.xi, //sun equatorial horizontal parallax [degrees]
            ""del_alpha\0"",      spa.del_alpha, //sun right ascension parallax [degrees]
            ""delta_prime\0"",    spa.delta_prime, //topocentric sun declination [degrees]
            ""alpha_prime\0"",    spa.alpha_prime, //topocentric sun right ascension [degrees]
            ""h_prime\0"",        spa.h_prime, //topocentric local hour angle [degrees],
            ""h0_prime\0"",       spa.h0_prime,
            ""delta_zero\0"",     spa.delta_zero,
            ""e0\0"",             spa.e0, //topocentric elevation angle (uncorrected) [degrees]
            ""del_e\0"",          spa.del_e, //atmospheric refraction correction [degrees]
            ""e\0"",              spa.e, //topocentric elevation angle (corrected) [degrees]
            ""eot\0"",            spa.eot, //equation of time [minutes]
            ""srha\0"",           spa.srha, //sunrise hour angle [degrees]
            ""ssha\0"",           spa.ssha, //sunset hour angle [degrees]
            ""sta\0"",            spa.sta, //sun transit altitude [degrees]
            ""zenith\0"",         spa.zenith, //topocentric zenith angle [degrees]
            ""azimuth180\0"",     spa.azimuth180, //topocentric azimuth angle (westward from south) [-180 to 180 degrees]
            ""azimuth\0"",        spa.azimuth, //topocentric azimuth angle (eastward from north) [   0 to 360 degrees]
            ""incidence\0"",      spa.incidence, //surface incidence angle [degrees]
            ""_suntransit\0"",    spa.suntransit, //local sun transit time (or solar noon) [fractional hour]
            ""_sunrise\0"",       spa.sunrise, //local sunrise time (+/- 30 seconds) [fractional hour]
            ""_sunset\0"",        spa.sunset, //local sunset time (+/- 30 seconds) [fractional hour]
            ""sunrise\0"",        sunrise_hour, sunrise_min, sunrise_sec, sunrise_microsec,
            ""sunset\0"",         sunset_hour, sunset_min, sunset_sec, sunset_microsec,
            ""noon\0"",           transit_hour, transit_min, transit_sec, transit_microsec
            );
</code></pre>",python|c|python-c-extension,"<p>Given that most of the values seem to come from <code>spa</code>, it's probably a better idea to encapsulate it along with the other loose properties <a href=""http://docs.python.org/extending/newtypes.html"" rel=""nofollow"">within an object</a> and just return that. Also, <a href=""http://docs.python.org/library/datetime.html#time-objects"" rel=""nofollow""><code>datetime.time</code></a>.</p>",2
178,4424206,Python/C: Parse all values at once for return to Python?,"<p>If you are outputting a lot of values from C to a dict in Python, is there a better (quicker and less error prone) way to do it than:</p>

<pre><code>    return Py_BuildValue(""{s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:(i,i,i,i),s:(i,i,i,i),s:(i,i,i,i)}"",
            ""jd\0"",             spa.jd, //Julian day
            ""jc\0"",             spa.jc, //Julian century
            ""jde\0"",            spa.jde, //Julian ephemeris day
            ""jce\0"",            spa.jce, //Julian ephemeris century
            ""jme\0"",            spa.jme, //Julian ephemeris millennium
            ""l\0"",              spa.l, //earth heliocentric longitude [degrees]
            ""b\0"",              spa.b, //earth heliocentric latitude [degrees]
            ""r\0"",              spa.r,     //earth radius vector [Astronomical Units, AU]
            ""theta\0"",          spa.theta, //geocentric longitude [degrees]
            ""beta\0"",           spa.beta, //geocentric latitude [degrees]
            ""x0\0"",             spa.x0, //mean elongation (moon-sun) [degrees]
            ""x1\0"",             spa.x1, //mean anomaly (sun) [degrees]
            ""x2\0"",             spa.x2, //mean anomaly (moon) [degrees]
            ""x3\0"",             spa.x3, //argument latitude (moon) [degrees]
            ""x4\0"",             spa.x4, //ascending longitude (moon) [degrees]
            ""del_psi\0"",        spa.del_psi, //nutation longitude [degrees]
            ""del_epsilon\0"",    spa.del_epsilon, //nutation obliquity [degrees]
            ""epsilon0\0"",       spa.epsilon0, //ecliptic mean obliquity [arc seconds]
            ""epsilon\0"",        spa.epsilon, //ecliptic true obliquity  [degrees]
            ""del_tau\0"",        spa.del_tau, //aberration correction [degrees]
            ""lamda\0"",          spa.lamda, //apparent sun longitude [degrees]
            ""nu0\0"",            spa.nu0, //Greenwich mean sidereal time [degrees]
            ""nu\0"",             spa.nu, //Greenwich sidereal time [degrees]
            ""alpha\0"",          spa.alpha, //geocentric sun right ascension [degrees]
            ""delta\0"",          spa.delta, //geocentric sun declination [degrees]
            ""h\0"",              spa.h, //observer hour angle [degrees]
            ""xi\0"",             spa.xi, //sun equatorial horizontal parallax [degrees]
            ""del_alpha\0"",      spa.del_alpha, //sun right ascension parallax [degrees]
            ""delta_prime\0"",    spa.delta_prime, //topocentric sun declination [degrees]
            ""alpha_prime\0"",    spa.alpha_prime, //topocentric sun right ascension [degrees]
            ""h_prime\0"",        spa.h_prime, //topocentric local hour angle [degrees],
            ""h0_prime\0"",       spa.h0_prime,
            ""delta_zero\0"",     spa.delta_zero,
            ""e0\0"",             spa.e0, //topocentric elevation angle (uncorrected) [degrees]
            ""del_e\0"",          spa.del_e, //atmospheric refraction correction [degrees]
            ""e\0"",              spa.e, //topocentric elevation angle (corrected) [degrees]
            ""eot\0"",            spa.eot, //equation of time [minutes]
            ""srha\0"",           spa.srha, //sunrise hour angle [degrees]
            ""ssha\0"",           spa.ssha, //sunset hour angle [degrees]
            ""sta\0"",            spa.sta, //sun transit altitude [degrees]
            ""zenith\0"",         spa.zenith, //topocentric zenith angle [degrees]
            ""azimuth180\0"",     spa.azimuth180, //topocentric azimuth angle (westward from south) [-180 to 180 degrees]
            ""azimuth\0"",        spa.azimuth, //topocentric azimuth angle (eastward from north) [   0 to 360 degrees]
            ""incidence\0"",      spa.incidence, //surface incidence angle [degrees]
            ""_suntransit\0"",    spa.suntransit, //local sun transit time (or solar noon) [fractional hour]
            ""_sunrise\0"",       spa.sunrise, //local sunrise time (+/- 30 seconds) [fractional hour]
            ""_sunset\0"",        spa.sunset, //local sunset time (+/- 30 seconds) [fractional hour]
            ""sunrise\0"",        sunrise_hour, sunrise_min, sunrise_sec, sunrise_microsec,
            ""sunset\0"",         sunset_hour, sunset_min, sunset_sec, sunset_microsec,
            ""noon\0"",           transit_hour, transit_min, transit_sec, transit_microsec
            );
</code></pre>",python|c|python-c-extension,"<p>You can use macros:</p>

<pre><code>#define ADD_FIELD(F) PyDict_SetItemString(d, #F, spa.F)
ADD_FIELD(jd);
ADD_FIELD(jc);
...
</code></pre>

<p>This will prevent mistakes in the string names, and the format string. 
Mistakes in not listing all fields are not easy to prevent AFAICT.</p>

<p>Also, you can drop the trailing <code>\0</code>; it does not serve a purpose.</p>",2
179,4424206,Python/C: Parse all values at once for return to Python?,"<p>If you are outputting a lot of values from C to a dict in Python, is there a better (quicker and less error prone) way to do it than:</p>

<pre><code>    return Py_BuildValue(""{s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:d,s:(i,i,i,i),s:(i,i,i,i),s:(i,i,i,i)}"",
            ""jd\0"",             spa.jd, //Julian day
            ""jc\0"",             spa.jc, //Julian century
            ""jde\0"",            spa.jde, //Julian ephemeris day
            ""jce\0"",            spa.jce, //Julian ephemeris century
            ""jme\0"",            spa.jme, //Julian ephemeris millennium
            ""l\0"",              spa.l, //earth heliocentric longitude [degrees]
            ""b\0"",              spa.b, //earth heliocentric latitude [degrees]
            ""r\0"",              spa.r,     //earth radius vector [Astronomical Units, AU]
            ""theta\0"",          spa.theta, //geocentric longitude [degrees]
            ""beta\0"",           spa.beta, //geocentric latitude [degrees]
            ""x0\0"",             spa.x0, //mean elongation (moon-sun) [degrees]
            ""x1\0"",             spa.x1, //mean anomaly (sun) [degrees]
            ""x2\0"",             spa.x2, //mean anomaly (moon) [degrees]
            ""x3\0"",             spa.x3, //argument latitude (moon) [degrees]
            ""x4\0"",             spa.x4, //ascending longitude (moon) [degrees]
            ""del_psi\0"",        spa.del_psi, //nutation longitude [degrees]
            ""del_epsilon\0"",    spa.del_epsilon, //nutation obliquity [degrees]
            ""epsilon0\0"",       spa.epsilon0, //ecliptic mean obliquity [arc seconds]
            ""epsilon\0"",        spa.epsilon, //ecliptic true obliquity  [degrees]
            ""del_tau\0"",        spa.del_tau, //aberration correction [degrees]
            ""lamda\0"",          spa.lamda, //apparent sun longitude [degrees]
            ""nu0\0"",            spa.nu0, //Greenwich mean sidereal time [degrees]
            ""nu\0"",             spa.nu, //Greenwich sidereal time [degrees]
            ""alpha\0"",          spa.alpha, //geocentric sun right ascension [degrees]
            ""delta\0"",          spa.delta, //geocentric sun declination [degrees]
            ""h\0"",              spa.h, //observer hour angle [degrees]
            ""xi\0"",             spa.xi, //sun equatorial horizontal parallax [degrees]
            ""del_alpha\0"",      spa.del_alpha, //sun right ascension parallax [degrees]
            ""delta_prime\0"",    spa.delta_prime, //topocentric sun declination [degrees]
            ""alpha_prime\0"",    spa.alpha_prime, //topocentric sun right ascension [degrees]
            ""h_prime\0"",        spa.h_prime, //topocentric local hour angle [degrees],
            ""h0_prime\0"",       spa.h0_prime,
            ""delta_zero\0"",     spa.delta_zero,
            ""e0\0"",             spa.e0, //topocentric elevation angle (uncorrected) [degrees]
            ""del_e\0"",          spa.del_e, //atmospheric refraction correction [degrees]
            ""e\0"",              spa.e, //topocentric elevation angle (corrected) [degrees]
            ""eot\0"",            spa.eot, //equation of time [minutes]
            ""srha\0"",           spa.srha, //sunrise hour angle [degrees]
            ""ssha\0"",           spa.ssha, //sunset hour angle [degrees]
            ""sta\0"",            spa.sta, //sun transit altitude [degrees]
            ""zenith\0"",         spa.zenith, //topocentric zenith angle [degrees]
            ""azimuth180\0"",     spa.azimuth180, //topocentric azimuth angle (westward from south) [-180 to 180 degrees]
            ""azimuth\0"",        spa.azimuth, //topocentric azimuth angle (eastward from north) [   0 to 360 degrees]
            ""incidence\0"",      spa.incidence, //surface incidence angle [degrees]
            ""_suntransit\0"",    spa.suntransit, //local sun transit time (or solar noon) [fractional hour]
            ""_sunrise\0"",       spa.sunrise, //local sunrise time (+/- 30 seconds) [fractional hour]
            ""_sunset\0"",        spa.sunset, //local sunset time (+/- 30 seconds) [fractional hour]
            ""sunrise\0"",        sunrise_hour, sunrise_min, sunrise_sec, sunrise_microsec,
            ""sunset\0"",         sunset_hour, sunset_min, sunset_sec, sunset_microsec,
            ""noon\0"",           transit_hour, transit_min, transit_sec, transit_microsec
            );
</code></pre>",python|c|python-c-extension,"<p>I agree with @Martin v. Löwis about using the C preprocessor and its macro capabilities to ease at least some of the burden of setting and maintaining something like what you are doings. If you define these macros properly you can arrange to have all of the defining information in a single spot in a single header file and avoid repeating yourself.</p>

<p>Basically you need two pieces of information about each item or key &amp; value pair that are to go into the dictionary you're building. One piece is what is put in <code>Py_BuildValue()</code>'s format string argument, and the second is the source of key and associated value for it.</p>

<p>You can extract each of these two sets of information by defining and then redefining the macros used as needed for the task. For your example, the following header file could be created. Notice how one of two different sets of macros are defined depending on whether <code>FORMAT</code> or <code>FIELDS</code> was defined at the time it was <code>#include</code>d. </p>

<pre><code>// builddict.h -- for defining Py_BuildValue() arguments

// define apppropriate macros for current usage
#ifdef FORMAT
    #define SPA_FIELD_LAST(FIELD)           ""s:d""
    #define SPA_FIELD(FIELD)                SPA_FIELD_LAST(FIELD)"", ""
    #define TIME_FIELD_LAST(NAME)           ""s:(i,i,i,i)""
    #define TIME_FIELD(NAME)                TIME_FIELD_LAST(NAME)"", ""
    #define TIME_KEY_FIELD_LAST(KEY,NAME)   ""s:(i,i,i,i)""
    #define TIME_KEY_FIELD(KEY,NAME)        TIME_KEY_FIELD_LAST(KEY,NAME)"", ""
    #undef FORMAT
#elif defined FIELDS
    #define SPA_FIELD_LAST(FIELD)           #FIELD, spa.FIELD
    #define SPA_FIELD(FIELD)                SPA_FIELD_LAST(FIELD),
    #define TIME_FIELD_LAST(NAME)           #NAME, NAME##_hour, NAME##_min, NAME##_sec, NAME##_microsec
    #define TIME_FIELD(NAME)                TIME_FIELD_LAST(NAME),
    #define TIME_KEY_FIELD_LAST(KEY,NAME)   #KEY, NAME##_hour, NAME##_min, NAME##_sec, NAME##_microsec
    #define TIME_KEY_FIELD(KEY,NAME)        TIME_KEY_FIELD_LAST(KEY,NAME),
    #undef FIELDS
#else
    #error neither FORMAT nor FIELDS usage macros are defined
#endif

SPA_FIELD(jd)               // Julian day
SPA_FIELD(jc)               // Julian century
SPA_FIELD(jde)              // Julian ephemeris day
SPA_FIELD(jce)              // Julian ephemeris century
SPA_FIELD(jme)              // Julian ephemeris millennium
SPA_FIELD(l)                // earth heliocentric longitude [degrees]
SPA_FIELD(b)                // earth heliocentric latitude [degrees]
SPA_FIELD(r)                // earth radius vector [Astronomical Units)  AU]
SPA_FIELD(theta)            // geocentric longitude [degrees]
SPA_FIELD(beta)             // geocentric latitude [degrees]
SPA_FIELD(x0)               // mean elongation (moon-sun) [degrees]
SPA_FIELD(x1)               // mean anomaly (sun) [degrees]
SPA_FIELD(x2)               // mean anomaly (moon) [degrees]
SPA_FIELD(x3)               // argument latitude (moon) [degrees]
SPA_FIELD(x4)               // ascending longitude (moon) [degrees]
SPA_FIELD(del_psi)          // nutation longitude [degrees]
SPA_FIELD(del_epsilon)      // nutation obliquity [degrees]
SPA_FIELD(epsilon0)         // ecliptic mean obliquity [arc seconds]
SPA_FIELD(epsilon)          // ecliptic true obliquity  [degrees]
SPA_FIELD(del_tau)          // aberration correction [degrees]
SPA_FIELD(lamda)            // apparent sun longitude [degrees]
SPA_FIELD(nu0)              // Greenwich mean sidereal time [degrees]
SPA_FIELD(nu)               // Greenwich sidereal time [degrees]
SPA_FIELD(alpha)            // geocentric sun right ascension [degrees]
SPA_FIELD(delta)            // geocentric sun declination [degrees]
SPA_FIELD(h)                // observer hour angle [degrees]
SPA_FIELD(xi)               // sun equatorial horizontal parallax [degrees]
SPA_FIELD(del_alpha)        // sun right ascension parallax [degrees]
SPA_FIELD(delta_prime)      // topocentric sun declination [degrees]
SPA_FIELD(alpha_prime)      // topocentric sun right ascension [degrees]
SPA_FIELD(h_prime)          // topocentric local hour angle [degrees])
SPA_FIELD(h0_prime)
SPA_FIELD(delta_zero)
SPA_FIELD(e0)               // topocentric elevation angle (uncorrected) [degrees]
SPA_FIELD(del_e)            // atmospheric refraction correction [degrees]
SPA_FIELD(e)                // topocentric elevation angle (corrected) [degrees]
SPA_FIELD(eot)              // equation of time [minutes]
SPA_FIELD(srha)             // sunrise hour angle [degrees]
SPA_FIELD(ssha)             // sunset hour angle [degrees]
SPA_FIELD(sta)              // sun transit altitude [degrees]
SPA_FIELD(zenith)           // topocentric zenith angle [degrees]
SPA_FIELD(azimuth180)       // topocentric azimuth angle (westward from south) [-180 to 180 degrees]
SPA_FIELD(azimuth)          // topocentric azimuth angle (eastward from north) [   0 to 360 degrees]
SPA_FIELD(incidence)        // surface incidence angle [degrees]
SPA_FIELD(suntransit)       // local sun transit time (or solar noon) [fractional hour]
SPA_FIELD(sunrise)          // local sunrise time (+/- 30 seconds) [fractional hour]
SPA_FIELD(sunset)           // local sunset time (+/- 30 seconds) [fractional hour]
TIME_FIELD(sunrise)
TIME_FIELD(sunset)
TIME_KEY_FIELD_LAST(noon, transit)  // must use a xxx_LAST macro on last one

// clean up to prevent warnings about redefining macros
#undef SPA_FIELD_LAST
#undef SPA_FIELD
#undef TIME_FIELD_LAST
#undef TIME_FIELD
#undef TIME_KEY_FIELD_LAST
#undef TIME_KEY_FIELD
</code></pre>

<p>Once you have it all set up, your <code>build_dict()</code> function to become something fairly short and independent of what the actual contents of the dictionary are going to be:</p>

<pre><code>// build format string using header
char format_string[] = ""{""
    #define FORMAT
    #include ""builddict.h""
""}"";

// use header again to build list of fields
PyObject* build_dict(SPA spa)
{
    return Py_BuildValue(format_string,
        #define FIELDS
        #include ""builddict.h""
    );
}
</code></pre>

<p>While this doesn't completely automate the process, but could help a lot. There are likely additional text processing or C interfacing tools available (or you could write your own) to further assist you in creating this single header file since it's in a very uniform format.</p>",2
180,4664568,What's the equivalent of this in Javascript?,"<pre><code>print dir(someOjbect)
</code></pre>

<p>How can I print that in console?</p>",javascript|python,"<p>Something like this?</p>

<pre><code>console.debug(someOjbect);
</code></pre>",0
181,4664568,What's the equivalent of this in Javascript?,"<pre><code>print dir(someOjbect)
</code></pre>

<p>How can I print that in console?</p>",javascript|python,"<p>There's not a 100% equivalent in JS. However, if you use Firebug's console.log(someObj), you'll see an object in the console that you can click to see its properties.</p>

<p>Alternatively, you can encode and object as json, which will now show any functions that are properties of the object. <a href=""https://github.com/douglascrockford/JSON-js"" rel=""nofollow"">https://github.com/douglascrockford/JSON-js</a></p>",0
182,4664568,What's the equivalent of this in Javascript?,"<pre><code>print dir(someOjbect)
</code></pre>

<p>How can I print that in console?</p>",javascript|python,"<p>To print in 'console', you are talking about something browser specific. With Firebug and Web Inspector, you can use <code>console.log(stuff)</code> to write to the console. If you are actually trying to append to the HTML body, use <code>document.write(stuff)</code> or <code>document.writeln(stuff)</code></p>",0
183,4664568,What's the equivalent of this in Javascript?,"<pre><code>print dir(someOjbect)
</code></pre>

<p>How can I print that in console?</p>",javascript|python,"<p>Each browser has it's own internal console.  If you're using Firefox and have Firebug installed and enabled, you should be able to do something like:</p>

<pre><code>console.log(someObject);
</code></pre>

<p>Depending on how many objects you need to do this for, this works just fine too:</p>

<pre><code>alert(someObject);
</code></pre>",0
184,4664568,What's the equivalent of this in Javascript?,"<pre><code>print dir(someOjbect)
</code></pre>

<p>How can I print that in console?</p>",javascript|python,"<p><code>console.dir(object)</code> object works fine in Firebug and JS inspectors derived from it.</p>

<p>Beware that not all interpreters support <code>console</code> though, so the usual idiom is:</p>

<pre><code>if (typeof console !== 'undefined') {
  console.dir(object);
}
</code></pre>

<p>From <a href=""http://getfirebug.com/logging"" rel=""nofollow"">http://getfirebug.com/logging</a> :</p>

<blockquote>
  <p>Object inspection</p>
  
  <p>How many times have you hand-written
  code to dump all of the properties of
  an object, or all of the elements in
  an HTML fragment? With Firebug, you'll
  never write that code again.</p>
  
  <p>Calling console.dir(object) will log
  an interactive listing of an object's
  properties, like a miniature version
  of the DOM tab. Calling
  console.dirxml(element) on any HTML or
  XML element will print a lovely XML
  outline, like a miniature version of
  the HTML tab.</p>
</blockquote>",0
185,4664568,What's the equivalent of this in Javascript?,"<pre><code>print dir(someOjbect)
</code></pre>

<p>How can I print that in console?</p>",javascript|python,"<p>If you're using Chrome, just open up your JavaScript Console or Developer Tools.</p>

<pre><code>var red = {color: 'red'};
console.log(red);
</code></pre>",1
186,4664568,What's the equivalent of this in Javascript?,"<pre><code>print dir(someOjbect)
</code></pre>

<p>How can I print that in console?</p>",javascript|python,"<p>The quickest and dirtiest way is <code>alert(someObject)</code>, but it does not help much with objects. You can write a crude <code>dir()</code> like this:</p>

<pre><code>function dir(obj) {
   var s = '(';
   for (k in obj) {
     v = obj[k];
     if (typeof v != 'function') s += """"+k+"":""+v"", "";
   }
   return s+"")"";
}
</code></pre>",1
187,4664568,What's the equivalent of this in Javascript?,"<pre><code>print dir(someOjbect)
</code></pre>

<p>How can I print that in console?</p>",javascript|python,"<p>You can install <a href=""http://getfirebug.com/"" rel=""nofollow"">Firebug</a> and do</p>

<pre><code>console.log(someObject);
</code></pre>",4
188,38302613,Run WebSocket server in Thread,"<p>this is probably more a question about threading than about my websocket.
I'm using ""SimpleWebSocket"" from github ( <a href=""https://github.com/dpallot/simple-websocket-server"" rel=""nofollow"">https://github.com/dpallot/simple-websocket-server</a> )
The example works fine:</p>

<pre><code>from SimpleWebSocketServer import SimpleWebSocketServer, WebSocket

class SimpleEcho(WebSocket):

    def handleMessage(self):
        # echo message back to client
        self.sendMessage(self.data)

    def handleConnected(self):
        print self.address, 'connected'

    def handleClose(self):
        print self.address, 'closed'

server = SimpleWebSocketServer('', 8000, SimpleEcho)
server.serveforever()
</code></pre>

<p>The Server is running, I can connect and send Messages.</p>

<p>Now i try to run it as a Thread with those classes:
This one is supposed to create many threads including the WebSocketServer</p>

<pre><code>from websockethread import WebSocketThread
class startManyThreads:
    def __init__(self):
        self.thread1 = WebSocketThread()
        self.thread1.start()

if __name__ == ""__main__"":
    startManyThreads = startManyThreads()
</code></pre>

<p>This class should run as my thread:</p>

<pre><code>import threading
from SimpleWebSocketServer import SimpleWebSocketServer
from webSocketServer import WebSocketServer

class WebSocketThread(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
        server = SimpleWebSocketServer('', 8000, WebSocketServer)
        server.serveforever()
</code></pre>

<p>And this is the ""customized"" echo example:</p>

<pre><code>from SimpleWebSocketServer import SimpleWebSocketServer, WebSocket

class SimpleEcho(WebSocket):

    def handleMessage(self):
        # echo message back to client
        self.sendMessage(self.data)

    def handleConnected(self):
        print self.address, 'connected'

    def handleClose(self):
        print self.address, 'closed'
</code></pre>

<p>I have also tried to derive this: <code>class SimpleEcho(WebSocket, threading.Thread):</code></p>

<p>Any Ideas what i'm doing wrong?
&amp;
Thanks alot in advance!</p>

<p>Edit:
The result when i run ""simpleEcho"" is that i get a prompt can connect via the websocket.html (provided on github), send and receive Messages</p>

<p>The result when i put it in a thread (anyone of the 3 ways i tried) is the same behaviour except when i try to ""connect"" from the websocket.html i get a ""error: undefined"". With nmap i checked and the Server seems so be running &amp; listening to port 8000</p>

<p>Edit 2: Derived new Class from SimpleWebSocketServer</p>

<pre><code>import threading

from SimpleWebSocketServer import SimpleWebSocketServer

class ThreadSimpleWebSocketThread(threading.Thread, SimpleWebSocketServer):
    def __init__(self, serversocket):
        threading.Thread.__init__(self)
        self.serversocket = serversocket

    def serveforever(self):
        SimpleWebSocketServer.serversocket = self.serversocket
        SimpleWebSocketServer.selectInterval = 0.1
        SimpleWebSocketServer.listeners = [self.serversocket]
        super(ThreadSimpleWebSocketThread, self).serveforever()

    def run(self):
        self.serveforever()
</code></pre>",python|multithreading|websocket,"<p>The main problem seems to be <em>where</em> you're starting the server. The <code>Thread.__init__()</code> method runs inside the main thread (of the <em>caller</em>), not the actual <code>WebSocketThread()</code>. This needs to be done in the <code>Thread.run()</code> method:</p>

<pre><code>class WebSocketThread(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)

    def run(self):
        server = SimpleWebSocketServer('', 8000, WebSocketServer)
        server.serveforever()
</code></pre>

<p>The code inside <code>run()</code> actually runs inside the thread.</p>

<p>Note that because of the Global Interpreter Lock, threads won't improve performance much, and you'll probably need <code>multiprocessing</code>. However, if you just want to offload the I/O waiting, this should work fine.</p>

<p><strong>Edit</strong>: From looking at this GitHub project, and rethinking what you're trying to do, this isn't trivial. You'll have to override <code>WebSocket.serveforever()</code> in your <code>SimpleEcho()</code> class and change it to accept the socket and pass the accepted socket to a <code>Thread</code> (see <a href=""https://stackoverflow.com/questions/17453212/multi-threaded-tcp-server-in-python"">here</a>). </p>",0
189,38149319,Setting current user for required model field,"<p>I have a model where one of the required fields is the currently signed in user. I do the following when creating a new record for the model:</p>

<p>views.py</p>

<pre><code>def post(self, request):
    bound_form = self.form_class(request.POST)
    if bound_form.is_valid():
        new_position = bound_form.save()
</code></pre>

<p>The problem is that this only works when the user has selected them self on the form. I need a way to set the current user automatically and simply don't display the user field on the form. I have tried this:</p>

<pre><code>def post(self, request):
    bound_form = self.form_class(request.POST)
    if bound_form.is_valid():
        new_position = bound_form.save(commit=False)
        new_position.user = request.user
        new_position.save()
</code></pre>

<p>However this does not work because the <code>bound_form</code> is not valid because it is missing a user which is a required field on the model. Where else can the user be set before trying to save the form? In the template, or the get method of the view?</p>",python|django,"<p>You should use <code>exclude=('user',)</code> in <code>class Meta:</code> of your <code>form</code>. @Daniel Roseman is also right.</p>",2
190,38263085,cusolver library not found,"<p>I am trying to use skcuda in my python code but whenever i want to use it, it rises the following exception:</p>

<pre><code>Traceback (most recent call last):
File ""/home/rohola/Projects/Python/wordnetwork/s.py"", line 6, in     &lt;module&gt;
from skcuda import cusolver
File ""/home/rohola/anaconda3/lib/python3.4/site-     packages/skcuda/cusolver.py"", line 51, in &lt;module&gt;
raise OSError('cusolver library not found')
OSError: cusolver library not found
</code></pre>

<p>i was just tried to use skcuda</p>

<pre><code>from skcuda import cusolver
handle = cusolver.cusolverDnCreate()
</code></pre>

<p>i installed pycuda, NVIDIA CUDA Toolkit. What's wrong about my code or dependencies?</p>",python|cuda|scikits,"<pre><code>import ctypes
a = ctypes.cdll.LoadLibrary( ""/usr/local/cuda-8.0/targets/x86_64-linux/lib/libcusolver.so"" )
</code></pre>

<p>gets me </p>

<pre><code>OSError: /usr/local/cuda-8.0/targets/x86_64-linux/lib/libcusolver.so: undefined symbol: GOMP_critical_end
</code></pre>

<p>which seems to be a yet unsolved issue according to <a href=""https://github.com/lebedov/scikit-cuda/issues/171"" rel=""nofollow"">this github thread</a> </p>

<p>Though, a 7.5 version which </p>

<pre><code>/usr/lib/x86_64-linux-gnu/libcusolver.so 
</code></pre>

<p>seems to point to works well. And author's fix seems to work with it.</p>",3
191,38263085,cusolver library not found,"<p>I am trying to use skcuda in my python code but whenever i want to use it, it rises the following exception:</p>

<pre><code>Traceback (most recent call last):
File ""/home/rohola/Projects/Python/wordnetwork/s.py"", line 6, in     &lt;module&gt;
from skcuda import cusolver
File ""/home/rohola/anaconda3/lib/python3.4/site-     packages/skcuda/cusolver.py"", line 51, in &lt;module&gt;
raise OSError('cusolver library not found')
OSError: cusolver library not found
</code></pre>

<p>i was just tried to use skcuda</p>

<pre><code>from skcuda import cusolver
handle = cusolver.cusolverDnCreate()
</code></pre>

<p>i installed pycuda, NVIDIA CUDA Toolkit. What's wrong about my code or dependencies?</p>",python|cuda|scikits,"<p>I finally found a solution to my problem. Firstly, i searched for libcusolver.so with</p>

<pre><code>locate libcusolver.so
</code></pre>

<p>and then changed the following code in cusolver.py from:</p>

<pre><code>_libcusolver = ctypes.cdll.LoadLibrary(_libcusolver_libname)
</code></pre>

<p>to:</p>

<pre><code>_libcusolver = ctypes.cdll.LoadLibrary(""/usr/local/cuda-7.5/targets/x86_64-linux/lib/""+_libcusolver_libname)
</code></pre>

<p>now the following code:</p>

<pre><code>from skcuda import cusolver
handle = cusolver.cusolverDnCreate()
</code></pre>

<p>works without any error.</p>

<p>UPDATE:</p>

<p>If you have installed cuda8.0 or 9.0 the best way to solve the problem is to find this line in cusolver.py:</p>

<pre><code>_libcusolver = ctypes.cdll.LoadLibrary(_libcusolver_libname)
</code></pre>

<p>and add this line before it:
     ctypes.CDLL('libgomp.so.1', mode=ctypes.RTLD_GLOBAL)</p>

<p>You have to make sure that you already installed libgomp.</p>",3
192,25345130,Should every python program be distributed with a setup.py?,"<p><strong>Disclaimer: I'm still not sure I understand fully what setup.py does.</strong></p>

<p>From what I understand, using a setup.py file is convenient for packages that need to be compiled or to notify Disutils that the package has been installed and can be used in another program. setup.py is thus great for libraries or modules.</p>

<p>But what about super simple packages that only has a foo.py file to be run? Is a setup.py file making packaging for Linux repository easier?</p>",python|setup.py,"<p>Using a <code>setup.py</code> script is only useful if:</p>

<ol>
<li>Your code is a C extension, and then depends on platform-specific features that you really don't want to define manually.</li>
<li>Your code is pure Python but depends on other modules, in which case dependencies may be resolved automatically.</li>
</ol>

<p>For a single file or a few set of files that don't rely on anything else, writing one is not worth the hassle. As a side note, your code is likely to be more attractive to people if trying it up doesn't require a complex setup. ""Installing"" it is then just about copying a directory or a single file in one's project directory.</p>",4
193,25261825,Wait using sockets,"<p>Is there a method to wait for a result from an SSL socket before continuing?</p>

<p>for example this is my current code :</p>

<pre><code>circ_to_rend.createStream(1, ""xx.x.x.x"", 80)
connected = recvCell(ssl_sock)
</code></pre>

<p>but is there a way to pause the program until something is sent back from that stream or do I just simply carry on using the code above which <em>should</em> do this as connected willn't be assigned a value until somthing is received? </p>

<p>create stream is a section of code i have written which creates a stream to send data through the tor network,and recvCell is below, this gets a reply and decodes it so it can be read :</p>

<pre><code>def recvCell(sock, waitFor = 0):
        while True:
                hdr = sock.recv(3)
                circid, cmd = struct.unpack(""&gt;HB"", hdr[0:3])
                ln = 509
                if cmd == 7 or cmd &gt;= 128:
                        ln = struct.unpack(""&gt;H"", sock.recv(2))[0]
                pl = sock.recv(ln)

                print ""got pkt circ "",circid, "" cmd"", cmd
                if cmd == waitFor or waitFor == 0:
                        print ""Return pkt circ "",circid, "" cmd"", cmd
                        return { 'circId': circid, 'cmd': cmd, 'len': ln, 'pl': pl}
</code></pre>",python|sockets,"<p>To answer your literal question:</p>

<blockquote>
  <p>is there a way to pause the program until something is sent back from that stream</p>
</blockquote>

<p>Yes, the <a href=""https://docs.python.org/3/library/select.html"" rel=""nofollow""><code>select</code></a> module (or, in 3.4+, the higher-level <a href=""https://docs.python.org/3/library/selectors.html"" rel=""nofollow""><code>selectors</code></a> module) provides ways to pause until something has been sent back, after which you know you can receive it without blocking.</p>

<p>But there's a much simpler way to do this, and as far as I can tell you're already doing it:</p>

<blockquote>
  <p>do I just simply carry on using the code above which should do this as connected willn't be assigned a value until somthing is received?</p>
</blockquote>

<p>If <code>connected</code> isn't assigned a value until something is received, then you're <em>already</em> pausing the program until something is sent back from the stream. Unless you switch a socket to non-blocking mode, <code>recv</code> automatically does that. So… I don't know what your problem is, but if you're looking for validation that your code is correct, then yes, it is—at least in this aspect.</p>

<hr>

<p>There is at least one other problem, however. There is absolutely no guarantee that <code>recv(509)</code> will block until 509 bytes come in. It will block until <em>any packet</em> comes in. Which could be less than 509 bytes. Which means your code will read the first, say, 300 bytes of a message and treat it as a whole message, and then the next time you try to <code>recv</code> you'll get the remaining 209 bytes of that message (or maybe those 209 bytes plus the first 140 of the next message, or whatever) and confuse your code badly. You should always loop and accumulate until you get the full data. The easiest way to do that is to write a function like this:</p>

<pre><code>def recvall(sock, bufsize):
    buf = ''
    while len(buf) &lt; bufsize:
        newbuf = sock.recv(bufsize - len(buf))
        if not newbuf:
            return buf # or maybe raise an exception
        buf += newbuf
</code></pre>",0
194,25261825,Wait using sockets,"<p>Is there a method to wait for a result from an SSL socket before continuing?</p>

<p>for example this is my current code :</p>

<pre><code>circ_to_rend.createStream(1, ""xx.x.x.x"", 80)
connected = recvCell(ssl_sock)
</code></pre>

<p>but is there a way to pause the program until something is sent back from that stream or do I just simply carry on using the code above which <em>should</em> do this as connected willn't be assigned a value until somthing is received? </p>

<p>create stream is a section of code i have written which creates a stream to send data through the tor network,and recvCell is below, this gets a reply and decodes it so it can be read :</p>

<pre><code>def recvCell(sock, waitFor = 0):
        while True:
                hdr = sock.recv(3)
                circid, cmd = struct.unpack(""&gt;HB"", hdr[0:3])
                ln = 509
                if cmd == 7 or cmd &gt;= 128:
                        ln = struct.unpack(""&gt;H"", sock.recv(2))[0]
                pl = sock.recv(ln)

                print ""got pkt circ "",circid, "" cmd"", cmd
                if cmd == waitFor or waitFor == 0:
                        print ""Return pkt circ "",circid, "" cmd"", cmd
                        return { 'circId': circid, 'cmd': cmd, 'len': ln, 'pl': pl}
</code></pre>",python|sockets,"<p>The code you provided is not complete so we can't figure out the entire design, but the <a href=""https://docs.python.org/2/library/ssl.html"" rel=""nofollow""><code>ssl</code></a> module uses <a href=""https://docs.python.org/2/library/socket.html"" rel=""nofollow""><code>socket</code></a>, whose <a href=""https://docs.python.org/2/library/socket.html#socket.socket.recv"" rel=""nofollow""><code>recv()</code></a> method can:</p>

<ol>
<li><p>(<em>socket in blocking mode</em>): Blocks the execution until some data is ready.</p></li>
<li><p>(<em>socket in non-blocking mode</em>): Throws an error if no data is available</p></li>
</ol>

<p>The sockets are created in <em>blocking mode</em> as default (the blocking setting can be changed using <a href=""https://docs.python.org/2/library/socket.html#socket.socket.setblocking"" rel=""nofollow"">setblocking</a>). So a call to <code>recv()</code> should block until some data is ready on the SSL socket.</p>",1
195,25311251,Sign in and scrape search results on LinkedIn using Python,"<p>Sorry for this stupid question but I am so new to programming and have a deadline to meet for my thesis. I greatly appreciate your patience and help!</p>

<p>My goal is to get data from LinkedIn. One possible way I just knew (from youtube videos) is to search on google then scrape links for further scraping. </p>

<pre><code>import mechanize
import re
from bs4 import BeautifulSoup

br = mechanize.Browser()
br.addheaders = [('User-agent','Mozilla/5.0')]
br.set_handle_robots(False)
html = br.open('http://google.com/search?q=site:linkedin.com%2Fjob%2F+big+data')
html = html.read().lower()

#let handle the unicode character
html = unicode(html,errors='ignore')

#raw result
#print html

soup = BeautifulSoup(html)
#print soup
</code></pre>

<p>In the soup I see this portion that contains the link that I wanna scrape. </p>

<pre><code>&lt;div data-async-context=""query:site%3Alinkedin.com%2Fjob%2F%20big%20data"" id=""ires""&gt;
...    
&lt;a href=""/url?sa=t&amp;amp;rct=j&amp;amp;q=&amp;amp;esrc=s&amp;amp;source=web&amp;amp;cd=5&amp;amp;cad=rja&amp;amp;uact=8&amp;amp;ved=0CGIQFjAE&amp;amp;url=https%3A%2F%2Fwww.linkedin.com%2Fjob%2Fgoogle%2Fbig-data-jobs%2F&amp;amp;ei=U9TsU8mECZOkyQSLxoCYAg&amp;amp;usg=AFQjCNGlr9VqOU8WSGS_8eJpVqWpKM3rIQ&amp;amp;sig2=lFrE7FgtzqS4dfSD-k_cKA&amp;amp;bvm=bv.72938740,d.aWw"" onmousedown=""return rwt(this,'','','','5','AFQjCNGlr9VqOU8WSGS_8eJpVqWpKM3rIQ','lFrE7FgtzqS4dfSD-k_cKA','0CGIQFjAE','','',event)"" wrc_done=""true"" data-href=""https://www.linkedin.com/job/google/big-data-jobs/""&gt;&lt;em&gt;Big Data&lt;/em&gt; Jobs at Google | LinkedIn&lt;/a&gt;
...
&lt;/div&gt;
</code></pre>

<p>The link that I want is ""<a href=""https://www.linkedin.com/job/google/big-data-jobs/"" rel=""nofollow"">https://www.linkedin.com/job/google/big-data-jobs/</a>"" </p>

<p>However, I don't know why my following code does not work. Can someone advice?</p>

<pre><code>for google_body in soup.findAll('div',attrs={'data-async-context':""query:site%3Alinkedin.com%2Fjob%2F%20big%20data""}):
    for google_links in google_body.findAll('a'):
        print google_links.get('data-href')
</code></pre>",python|web-scraping|linkedin,"<p>When viewing in the browser, I see <code>&lt;div id=""ires"" data-async-context=""...""&gt;</code>, but when using Python to download it I only see <code>&lt;div id=""ires""&gt;</code>. It looks me like all of the <code>data-async-*</code> attributes are added with Javascript. However, I think you can get what you want by changing your loop slightly.</p>

<pre><code>import urlparse

for google_body in soup.findAll(id='ires'):
    for google_links in google_body.findAll('a'):
        # *href* looks something like:
        #   /url?q=https://www.linkedin.com/job/big-data-jobs/&amp;amp;sa=U&amp;amp;ei=6ejsU4ipGYGBygTnpICIAw&amp;amp;ved=0CCwQFjAA&amp;amp;usg=AFQjCNG_JhHqlpkvZ4DSgABsqaRt-hR6uA
        href = google_links.get('href')

        # Parse the query arguments out from *href*.
        # *args* will look something like:
        #   q=https://www.linkedin.com/job/big-data-jobs/&amp;sa=U&amp;ei=6ejsU4ipGYGBygTnpICIAw&amp;ved=0CCwQFjAA&amp;usg=AFQjCNG_JhHqlpkvZ4DSgABsqaRt-hR6uA
        # and then:
        #   {'q': ['https://www.linkedin.com/job/big-data-jobs/'], 'usg': ['AFQjCNG_JhHqlpkvZ4DSgABsqaRt-hR6uA'], 'sa': ['U'], 'ei': ['6ejsU4ipGYGBygTnpICIAw'], 'ved': ['0CCwQFjAA']}
        args = urlparse.urlparse(href).query
        args = urlparse.parse_qs(args)
        url = args['q'][0]
        print url # https://www.linkedin.com/job/big-data-jobs/
</code></pre>

<p>For reference, I downloaded the page using:</p>

<pre><code>import urllib2
req = urllib2.Request('http://google.com/search?q=site:linkedin.com%2Fjob%2F+big+data', headers={'User-agent': 'Mozilla/5.0'})
resp = urllib2.urlopen(req)
html = resp.read()
</code></pre>",2
196,25111405,Python: dynamically store access for dictionary,"<p>I've tried to find out how to do this (google, SO, etc), but I'm probably using the wrong keywords...</p>

<p>Basically I'm looping over a file line by line, and if I hit a keyword, I want to add it into a dictionary as its key, however, I want to add its value as a dictionary of the initial dictionary, and then any following hits as a child to it (and so on) unless I hit a close character, where it will go up one level in the dictionary.</p>

<p>example file:</p>

<pre><code>def myitem {
    def aSubItem {
        abc
    }
    def anotherSubItem {
        hi!
        hows you?
    }
}
</code></pre>

<p>so I'd get a dictionary like this:</p>

<pre><code>mydict = {
    ""myitem"" : {
        ""aSubItem"" : { ""abc"" },
        ""anotherSubItem"" : { ""hi!"", ""hows you?"" }
    }
}
</code></pre>

<p>Basically I'm looking at some way I can store the current depth (or dict access), so like, you'd access 'abc' by doing mydict['myitem']['aSubItem'], but I want to be able to store how deep I am incase someone adds something to that block... so something like:</p>

<pre><code>curLevel = ['myitem']['aSubItem']
</code></pre>

<p>then I Could tell mydict to access the curLevel, then when the block has finished (hits a } ), I could tell it to go up 'one level' to</p>

<pre><code>curLevel = ['myitem']
</code></pre>

<h1>===================</h1>

<p>I know that I could use </p>

<pre><code>curLevel = mydict
</code></pre>

<p>which would let me access myDic using curLevel...
That works fine going down into the dictionary levels...</p>

<p>however, how would I go up one?
i.e. if I had:</p>

<pre><code>curLevel = mydict['myitem']['aSubItem']
</code></pre>

<p>how would I go to</p>

<pre><code>curLevel = mydict['myitem']
</code></pre>

<p>====================</p>

<p>Here is some sample code, cause everyone likes sample code :P</p>

<p>This is working going down into the dictionary, I'm just not sure how to make it go back up</p>

<pre><code>import os
import re

# file location
fle = ""myfilelocation""
# read file contents
fh = open(fle, 'r')
content = fh.readlines()

# The dictionary to hold the structure
structure = {}
# reference to structure that we will use in the loop
cur = structure

# loop through file lines
for line in content:

    # Match our starting def line ( def ___ { )
    st = re.match(r'\s*Def\s([^{\s]+)', line, re.IGNORECASE)
    if st:
        cur[st.group(1)] = {}
        cur = cur[st.group(1)]

    # Match the close of a block ( } )
    ed = re.match(r'\s*}\s*', line)
    if ed:
        # ??? How do I tell it to go up one dict level??
        None

    # If its neither, add to current level of array
    # Don't mind the inefficiency here, I'll be improving it later
    if not st and not ed and not re.match(r'\s*{\s*$', line) and not re.match(r'\s*$', line):
        # Not implemented yet
        None

print(structure)
</code></pre>

<p>Output of the above sample code at the moment is something like</p>

<pre><code>mydict = {
    ""myitem"" : {
        ""aSubItem"" : {
            ""anotherSubItem"" : {}
            }
        }
    }
}
</code></pre>

<p>If any more information is needed, am happy to provide :)</p>

<p>(and yes, I know I could probably use a parser... but I've had absolutely no luck with any of them at all... besides, writing stuff from scratch is a good practice exercise xD)</p>",python|loops|python-3.x|dictionary|reference,"<p>As you've noted, the children do not automatically have references to their parents, so you can't just ""go back.""</p>

<p>You need to either explicitly give them those references with a special key like <code>__parent</code> or something that will not be duplicated by actual keys, or keep a separate list that will act as a ""stack"" and keep track of your current path in the tree, appending new levels as you go and <code>pop</code>ing them to go back to the parent.</p>

<p><code>curLevel = ['myitem']['aSubItem']</code> is almost there but doesn't work, just use one list <code>curLevel = ['myitem', 'aSubItem']</code> and <code>append</code> and <code>pop</code> as you go.</p>

<p>Depending on your needs, either keep references to the dictionaries in the list, or keep the keys in there and then walk up from the base object using the keys.</p>",1
197,44232812,beautifulsoup parse html content,"<p>I need to get <strong>date</strong> out from each html files. 
I tried find_siblings('p'), but returns <code>None</code>.</p>

<p>Date is under tags below (mostly the third <code>p</code> tag) but sometimes is with the first tag of <code>id=""a-body""</code> </p>

<pre><code>&lt;div class=""sa-art article-width"" id=""a-body"" itemprop=""articleBody""&gt;
    &lt;p class=""p p1""&gt;text1&lt;/p&gt;
    &lt;p class=""p p1""&gt;text2&lt;/p&gt;
    &lt;p class=""p p1""&gt;
    January 6, 2009  8:00 am ET
    &lt;/p&gt;
    ..
    ..
    ..
&lt;/div&gt;
</code></pre>

<p>or</p>

<p>Inside the first tag but include other information.</p>

<pre><code>&lt;div class=""sa-art article-width"" id=""a-body"" itemprop=""articleBody""&gt;
    &lt;p class=""p p1""&gt;
      participant text1 text2 text3 January  8, 2009  5:00 PM ET
    &lt;/p&gt;
    &lt;p class=""p p1""&gt;text&lt;/p&gt;
    &lt;p class=""p p1""&gt;text&lt;/p&gt;
    ..
    ..
&lt;/div&gt;
</code></pre>

<p>My code is just simply to find the third <code>p</code>, but if it's within the first <code>p</code> with other content, I don't know how to do it:</p>

<pre><code>fo = open('C:/Users/output1/4069369.html', ""r"") 
soup = bs4.BeautifulSoup(fo, ""lxml"")

d_date = soup.find_all('p')[2]
print d_date.get_text(strip=True)
</code></pre>",python|html|web-scraping|beautifulsoup|html-parsing,"<p>It is better identify a unique common pattern to be use... if you cannot rely on tag's attribute why don't use the string? Each date end with a <code>ET</code> so use this info like this</p>
<pre><code>tag_dates = soup.find_all(lambda t: str(t.string).endswith('ET'), string=True)

dates = [str(t.string) for t in tag_dates] # list of all dates
</code></pre>",0
198,44232812,beautifulsoup parse html content,"<p>I need to get <strong>date</strong> out from each html files. 
I tried find_siblings('p'), but returns <code>None</code>.</p>

<p>Date is under tags below (mostly the third <code>p</code> tag) but sometimes is with the first tag of <code>id=""a-body""</code> </p>

<pre><code>&lt;div class=""sa-art article-width"" id=""a-body"" itemprop=""articleBody""&gt;
    &lt;p class=""p p1""&gt;text1&lt;/p&gt;
    &lt;p class=""p p1""&gt;text2&lt;/p&gt;
    &lt;p class=""p p1""&gt;
    January 6, 2009  8:00 am ET
    &lt;/p&gt;
    ..
    ..
    ..
&lt;/div&gt;
</code></pre>

<p>or</p>

<p>Inside the first tag but include other information.</p>

<pre><code>&lt;div class=""sa-art article-width"" id=""a-body"" itemprop=""articleBody""&gt;
    &lt;p class=""p p1""&gt;
      participant text1 text2 text3 January  8, 2009  5:00 PM ET
    &lt;/p&gt;
    &lt;p class=""p p1""&gt;text&lt;/p&gt;
    &lt;p class=""p p1""&gt;text&lt;/p&gt;
    ..
    ..
&lt;/div&gt;
</code></pre>

<p>My code is just simply to find the third <code>p</code>, but if it's within the first <code>p</code> with other content, I don't know how to do it:</p>

<pre><code>fo = open('C:/Users/output1/4069369.html', ""r"") 
soup = bs4.BeautifulSoup(fo, ""lxml"")

d_date = soup.find_all('p')[2]
print d_date.get_text(strip=True)
</code></pre>",python|html|web-scraping|beautifulsoup|html-parsing,"<p>With provided code It's not really clear that really happens, but i guess, you are trying to find against root of page. try if it's work like this:</p>

<pre><code>d_date = soup.find_all('div', { ""id"" : ""a-body"" })[0].find_all(""p"")[0] 
print d_date.get_text(strip=True)
</code></pre>

<p><strong>Update:</strong></p>

<pre><code>for page in pages:
    soup = BeautifulSoup(page,'html.parser')
    if soup.find_all(""p"")[2].get_text():
        d_date = soup.find_all(""p"")[2]
        print d_date.get_text(strip=True)
    else:
        d_date = soup.find_all(""p"")[0]
        print d_date.get_text(strip=True)
</code></pre>",0
199,44232812,beautifulsoup parse html content,"<p>I need to get <strong>date</strong> out from each html files. 
I tried find_siblings('p'), but returns <code>None</code>.</p>

<p>Date is under tags below (mostly the third <code>p</code> tag) but sometimes is with the first tag of <code>id=""a-body""</code> </p>

<pre><code>&lt;div class=""sa-art article-width"" id=""a-body"" itemprop=""articleBody""&gt;
    &lt;p class=""p p1""&gt;text1&lt;/p&gt;
    &lt;p class=""p p1""&gt;text2&lt;/p&gt;
    &lt;p class=""p p1""&gt;
    January 6, 2009  8:00 am ET
    &lt;/p&gt;
    ..
    ..
    ..
&lt;/div&gt;
</code></pre>

<p>or</p>

<p>Inside the first tag but include other information.</p>

<pre><code>&lt;div class=""sa-art article-width"" id=""a-body"" itemprop=""articleBody""&gt;
    &lt;p class=""p p1""&gt;
      participant text1 text2 text3 January  8, 2009  5:00 PM ET
    &lt;/p&gt;
    &lt;p class=""p p1""&gt;text&lt;/p&gt;
    &lt;p class=""p p1""&gt;text&lt;/p&gt;
    ..
    ..
&lt;/div&gt;
</code></pre>

<p>My code is just simply to find the third <code>p</code>, but if it's within the first <code>p</code> with other content, I don't know how to do it:</p>

<pre><code>fo = open('C:/Users/output1/4069369.html', ""r"") 
soup = bs4.BeautifulSoup(fo, ""lxml"")

d_date = soup.find_all('p')[2]
print d_date.get_text(strip=True)
</code></pre>",python|html|web-scraping|beautifulsoup|html-parsing,"<p>The thing is that you have to find the element <code>p</code> with <code>date</code>, then you can work with a months list, like this:</p>

<pre><code>from bs4 import BeautifulSoup
div_test='&lt;div class=""sa-art article-width"" id=""a-body"" itemprop=""articleBody""&gt;\
&lt;p class=""p p1""&gt;text1&lt;/p&gt;\
&lt;p class=""p p1""&gt;\
  participant text1 text2 text3 January  8, 2009  5:00 a.m. EST\
&lt;/p&gt;\
&lt;p class=""p p1""&gt;text2&lt;/p&gt;\
&lt;p class=""p p1""&gt;\
January 6, 2009  8:00 pm ET\
&lt;/p&gt;&lt;/div&gt;'
soup = BeautifulSoup(div_test, ""lxml"")
month_list = ['January','February','March','April','May','June','July','August','September','October','November','December']

def first_date_p():
    for p in soup.find_all('p',{""class"":""p p1""}):
        for month in month_list:
            if month in p.get_text():
                first_date_p = p.get_text()
                date_start= first_date_p.index(month)
                date_text = first_date_p[date_start:]
                return date_text
first_date_p()
</code></pre>

<p>It will output the first <code>p</code> element which has <code>date</code>, no matter the element's position, in other words, it contains month:</p>

<pre><code>u'January  8, 2009  5:00 a.m. EST'
</code></pre>",1
200,44000727,Iterate over two lists with different lengths,"<p>I have 2 lists of numbers that can be different lengths, for example:</p>

<pre><code>list1 = [1, 2, -3, 4, 7]
list2 = [4, -6, 3, -1]
</code></pre>

<p>I need to iterate over these with the function:</p>

<pre><code>final_list = []
for index in range(???):
    if list1[index] &lt; 0:
        final_list.insert(0, list1[index])
    elif list1[index] &gt; 0:
        final_list.insert(len(final_list), list1[index])
    if list2[index] &lt; 0:
        final_list.insert(0, list2[index])
    elif list2[index] &gt; 0:
        final_list.insert(len(final_list), list2[index])
return final_list
</code></pre>

<p>but can't figure out how to deal with the range as the shorter list will become ""out of range"" if I use the <code>max</code> length. Any thoughts on how to overcome this or how to change my function?</p>",python|list|loops,"<p>In your case you should probably just check if the index is longer than the sequence:</p>

<pre><code>list1 = [1, 2, -3, 4, 7]
list2 = [4, -6, 3, -1]

final_list = []
for index in range(max(len(list1), len(list2))):
    if index &lt; len(list1):
        if list1[index] &lt; 0:
            final_list.insert(0, list1[index])
        elif list1[index] &gt; 0:
            final_list.insert(len(final_list), list1[index])

    if index &lt; len(list2):
        if list2[index] &lt; 0:
            final_list.insert(0, list2[index])
        elif list2[index] &gt; 0:
            final_list.insert(len(final_list), list2[index])

print(final_list)
# [-1, -3, -6, 1, 4, 2, 3, 4, 7]
</code></pre>

<p>Or use <a href=""https://docs.python.org/3/library/itertools.html#itertools.zip_longest"" rel=""nofollow noreferrer""><code>itertools.zip_longest</code></a> (or <code>itertools.izip_longest</code> on python-2.x) and check for some fillvalue (i.e. <code>None</code>):</p>

<pre><code>import itertools

list1 = [1, 2, -3, 4, 7]
list2 = [4, -6, 3, -1]

final_list = []
for item1, item2 in itertools.zip_longest(list1, list2, fillvalue=None):
    if item1 is None:
        pass
    elif item1 &lt; 0:
        final_list.insert(0, item1)
    elif item1 &gt; 0:
        final_list.append(item1)

    if item2 is None:
        pass
    elif item2 &lt; 0:
        final_list.insert(0, item2)
    elif item2 &gt; 0:
        final_list.append(item2)
</code></pre>

<hr>

<p>However your approach skips items when they are <code>== 0</code>, that's probably an oversight but you should check that it's working correct with zeros.</p>

<p>Also you use <code>insert</code> a lot. The last <code>elif</code>s could instead use <code>final_list.append(item1)</code> (or <code>item2</code>), like I did in the second example.</p>

<p>In this case the handling for <code>item1</code> and <code>item2</code> is identical, so you could use another loop:</p>

<pre><code>import itertools

list1 = [1, 2, -3, 4, 7]
list2 = [4, -6, 3, -1]

final_list = []
for items in itertools.zip_longest(list1, list2, fillvalue=None):
    for item in items:
        if item is None:
            pass
        elif item &lt; 0:
            final_list.insert(0, item)
        elif item &gt; 0:
            final_list.append(item)
</code></pre>",1
201,44000727,Iterate over two lists with different lengths,"<p>I have 2 lists of numbers that can be different lengths, for example:</p>

<pre><code>list1 = [1, 2, -3, 4, 7]
list2 = [4, -6, 3, -1]
</code></pre>

<p>I need to iterate over these with the function:</p>

<pre><code>final_list = []
for index in range(???):
    if list1[index] &lt; 0:
        final_list.insert(0, list1[index])
    elif list1[index] &gt; 0:
        final_list.insert(len(final_list), list1[index])
    if list2[index] &lt; 0:
        final_list.insert(0, list2[index])
    elif list2[index] &gt; 0:
        final_list.insert(len(final_list), list2[index])
return final_list
</code></pre>

<p>but can't figure out how to deal with the range as the shorter list will become ""out of range"" if I use the <code>max</code> length. Any thoughts on how to overcome this or how to change my function?</p>",python|list|loops,"<p>You can process adjacent items from the lists by using <a href=""https://docs.python.org/3/library/itertools.html#itertools.zip_longest"" rel=""nofollow noreferrer""><code>itertools.zip_longest()</code></a> (<code>itertools.izip_longest()</code> if using Python 2) to produce a sequence of paired items. Pairs will be padded with <code>None</code> for lists of mismatched length.</p>

<p>Then you can simplify the code in the body of the loop by flattening the sequence of paired items and filtering out the <code>None</code> values, and in your case, <code>0</code> values. That's what the generator expression below does.</p>

<p>Then it's just a matter of appending or inserting values into <code>final_list</code> if greater or less than zero respectively.</p>

<p>In code:</p>

<pre><code>from itertools import zip_longest

final_list = []
for value in (i for pair in zip_longest(list1, list2) for i in pair if i):
    if value &gt; 0:
        final_list.append(value)
    else:
        final_list.insert(0, value)

print(final_list)
</code></pre>

<pre>
[-1, -3, -6, 1, 4, 2, 3, 4, 7]
</pre>

<p>Notice that this will filter out any zero values that might be present in the lists. If you want to keep these then modify the generator expression to filter out the <code>None</code> values only:</p>

<pre><code>(i for pair in zip_longest(list1, list2)
    for i in pair if i is not None)
</code></pre>

<p>and modify the body of the loop to insert the <code>0</code> wherever it should go in <code>final_list</code>.</p>",2
202,44000727,Iterate over two lists with different lengths,"<p>I have 2 lists of numbers that can be different lengths, for example:</p>

<pre><code>list1 = [1, 2, -3, 4, 7]
list2 = [4, -6, 3, -1]
</code></pre>

<p>I need to iterate over these with the function:</p>

<pre><code>final_list = []
for index in range(???):
    if list1[index] &lt; 0:
        final_list.insert(0, list1[index])
    elif list1[index] &gt; 0:
        final_list.insert(len(final_list), list1[index])
    if list2[index] &lt; 0:
        final_list.insert(0, list2[index])
    elif list2[index] &gt; 0:
        final_list.insert(len(final_list), list2[index])
return final_list
</code></pre>

<p>but can't figure out how to deal with the range as the shorter list will become ""out of range"" if I use the <code>max</code> length. Any thoughts on how to overcome this or how to change my function?</p>",python|list|loops,"<p><a href=""https://docs.python.org/3/library/itertools.html#itertools.zip_longest"" rel=""noreferrer""><code>itertools.zip_longest(*iterables, fillvalue=None)</code></a> will do the job for you:</p>

<blockquote>
  <p>If the iterables are of uneven length, missing values are filled-in with <em>fillvalue</em>.</p>
</blockquote>

<p>For your example lists, this will yield:</p>

<pre><code>&gt;&gt;&gt; import itertools
&gt;&gt;&gt; list1 = [1, 2, -3, 4, 7]
&gt;&gt;&gt; list2 = [4, -6, 3, -1]

&gt;&gt;&gt; for combination in itertools.zip_longest(list1, list2):
    print(combination)

(1, 4)
(2, -6)
(-3, 3)
(4, -1)
(7, None)
</code></pre>

<hr>

<p>If you only want to use as many values as are present in <em>both</em> lists, use the built-in <a href=""https://docs.python.org/3/library/functions.html#zip"" rel=""noreferrer""><code>zip()</code></a>:</p>

<blockquote>
  <p>The iterator stops when the shortest input iterable is exhausted.</p>
</blockquote>

<pre><code>&gt;&gt;&gt; for combination in zip(list1, list2):
    print(combination)

(1, 4)
(2, -6)
(-3, 3)
(4, -1)
</code></pre>",14
203,44398390,Strange variable behaviour in Python,"<p>My first post here.</p>

<p>So I'm loading data into a variable called <strong>f1_data</strong>, then passing it to  <strong>pm.removeDC()</strong> function to do some signal processing, and keeping the result into the same variable. But then, I want to replace only the column 8, with the original <strong>f1_data</strong> that I called <strong>raw_data</strong> and I can't figure it out why it doesn't work. Here are the functions. Help anyone?</p>

<blockquote>
  <p>inside file pm.py</p>
</blockquote>

<pre><code>def removeDC(data):    
    # define the filter
    butter_order = 2
    hp_cutoff_Hz = 1.0
    b, a = signal.butter(butter_order, hp_cutoff_Hz/(fs_Hz / 2.0), 'highpass')

    for i in range(1,9):
        data[:,i] = signal.lfilter(b, a, data[:,i], 0)

    return (data)

def get_epoch1(data, t_sec, epoch, f_tup, col):
#f_tup = (f_wdir, f_name, f_columns, out_save, out_dir, out_number, fig_width)
    f_name = f_tup[1]
    fig_width = f_tup[6]

    epoch_boolvector = (t_sec &gt;= epoch[0][0]) &amp; (t_sec &lt;= epoch[0][1])
    epoch_timescale = t_sec[epoch_boolvector]
    epoch_data = data[epoch_boolvector]

    plt.figure(figsize=(fig_width,8), dpi=96)
    plt.plot(epoch_timescale, epoch_data[:,col]);
    plt.xlim(epoch_timescale[0], epoch_timescale[-1])
    plt.show()
    return (epoch_boolvector, epoch_timescale, epoch_data)
</code></pre>

<blockquote>
  <p>inside main file</p>
</blockquote>

<pre><code>#load the whole data
(f1_data, f1_data_indices, f1_timescale) = pm.load_data(f1_wdir, f1_name)

raw_data = f1_data[:] #create copy of f1_data

(f1ep1_boolvector, f1ep1_timescale, f1ep1_data) = pm.get_epoch1(f1_data, f1_timescale, f1_epochs[1], f1_tup, 8)

#--- filter data to remove DC (1Hz)
f1_data = pm.removeDC(f1_data)


# replace only channel 8 with original data
f1_data[:,8] = raw_data[:,8]
(f1ep2_boolvector, f1ep2_timescale, f1ep2_data) = pm.get_epoch1(f1_data, f1_timescale, f1_epochs[1], f1_tup, 8)
</code></pre>",python|python-2.7,"<p>The solution is <code>import copy</code> and use <code>copy.deepcopy</code> function.
For further info check this link:
 <a href=""http://%20docs.python.org/2/library/copy.html"" rel=""nofollow noreferrer"">docs.python.org/2/library/copy.html</a></p>

<p>When I have <code>raw_data = f1_data[:]</code> I get, after <code>pm.removeDC()</code>:</p>

<pre><code> raw_data is f1_data: False
(raw_data == f1_data).all(): True  
</code></pre>

<p>But when I have <code>raw_data = copy.deepcopy(f1_data)</code> I get, after <code>pm.removeDC()</code>:</p>

<pre><code> raw_data is f1_data: False  
(raw_data == f1_data).all(): False
</code></pre>",1
204,44352590,loop using python in html,"<p>so i want to loop a html element like this(i loop it in a .html file not .py file):</p>

<pre><code>{% for i in range(0, row['star']) %}       
    &lt;span class=""glyphicon glyphicon-star star""&gt;&lt;/span&gt;
{% endfor %}
</code></pre>

<p>but it gives me this error :</p>

<blockquote>
  <p>TypeError: an integer is required</p>
</blockquote>

<p>i know i need an integer for looping but i dont know how to convert it</p>",python|sqlite|flask,"<p>Converting string to int use <code>int</code> template tag </p>

<pre><code>{% for i in range(0, row['star']|int) %}       
    &lt;span class=""glyphicon glyphicon-star star""&gt;&lt;/span&gt;
{% endfor %}
</code></pre>",0
205,6182071,Can I reliably unimport a Python module if I import it in a namespace?,"<p>Basically, I have a long running process where I would like to be able to unimport modules and recover memory via the gc. I've read about deleting modules <a href=""https://stackoverflow.com/questions/437589/how-do-i-unload-reload-a-python-module"">How do I unload (reload) a Python module?</a> and it seems like there are still dangling references that block gc.</p>

<p>However, what if I import and use the module only inside a namespace. In other words, something like this:</p>

<pre><code>ns = {}
exec somecode in ns
</code></pre>

<p>Then I would cleanup sys.modules inside the namespace and finish off by deleting the namespace itself. </p>

<p>Would that free up the memory for reuse in CPython?</p>

<p>If not, then is it possible to access some part of the Python C API using ctypes, to accomplish this?</p>

<p>The important part of the end result is that memory is released so that a process running for weeks or months, can reliably unimport a module without reloading it. Of course it is entirely possible that any given module would be loaded and unloaded many times during that time period. I am assuming that a module could create a large number of objects while it is loaded, and that the normally cleanup (sys.modules and del) would leave those objects in memory forever.</p>

<p>Jochen: Yes, I could work around this in a number of ways but I am interested in exploring the limits of Python.</p>",python,"<p>If what you really want is to avoid memory leaks, Your best bet is probably to arrange for importing the module once, in the normal way, with <code>sys.modules</code> in it's usual state.  No matter how many times the module is later imported, it will not take any more memory, since the import machinery will just keep returning the same module.</p>

<p>If for some reason, this still doesn't suit, say modules are being created dynamically and only need to be used once, <code>exec</code> <a href=""http://www.youtube.com/watch?v=vpkzhvZ_CFM"" rel=""nofollow"">certainly isn't the solution</a>.  You should consider using an alternative execution model, perhaps forking new processes.</p>",3
206,6182071,Can I reliably unimport a Python module if I import it in a namespace?,"<p>Basically, I have a long running process where I would like to be able to unimport modules and recover memory via the gc. I've read about deleting modules <a href=""https://stackoverflow.com/questions/437589/how-do-i-unload-reload-a-python-module"">How do I unload (reload) a Python module?</a> and it seems like there are still dangling references that block gc.</p>

<p>However, what if I import and use the module only inside a namespace. In other words, something like this:</p>

<pre><code>ns = {}
exec somecode in ns
</code></pre>

<p>Then I would cleanup sys.modules inside the namespace and finish off by deleting the namespace itself. </p>

<p>Would that free up the memory for reuse in CPython?</p>

<p>If not, then is it possible to access some part of the Python C API using ctypes, to accomplish this?</p>

<p>The important part of the end result is that memory is released so that a process running for weeks or months, can reliably unimport a module without reloading it. Of course it is entirely possible that any given module would be loaded and unloaded many times during that time period. I am assuming that a module could create a large number of objects while it is loaded, and that the normally cleanup (sys.modules and del) would leave those objects in memory forever.</p>

<p>Jochen: Yes, I could work around this in a number of ways but I am interested in exploring the limits of Python.</p>",python,"<p>To un-import a module you will need to ensure that you've removed all references to the module. That means you have to delete the references from all modules that imported it, delete the reference from <code>sys.modules</code>, delete any references to any functions or classes defined in that module and delete all references to objects that are instances of classes defined in the module.</p>

<p>In almost all situations this is more effort than it is worth to retrieve what is a comparatively small amount of memory. If you really want to try this then <code>gc.get_referrers()</code> might be useful as you can delete all but one known reference the the module and then trace back to find what else still references it.</p>",3
207,6028274,Clean up ugly WYSIWYG HTML code? Python or *nix utility,"<p>I'm finally upgrading (<em>rewriting</em> ;) ) my first Django app, but I am migrating all the content. </p>

<p>I foolishly gave users a full <em>WYSIWYG</em> editor for certain tasks, the HTML code produced is of course terribly ugly with more extra tags than content. </p>

<p><strong>Does anyone know of a library or external shell app I could use to clean up the code?</strong></p>

<p>I use tidy sometimes, but as far as I know that doesn't do what I'm asking. I want to simplify all the extra span and other garbage tags. I cleaned the most offensive offending styles with some regex, but I it would take a really long time to do anything more using just regex. </p>

<p>Any ideas? </p>",python|html|regex|django|wysiwyg,"<p>Beautiful Soup will probably get you a more complete solution, but you might be able to get some cleanup done more simply with html5lib (if you're OK with html5 rules):</p>

<pre><code>import html5lib
from html5lib import sanitizer, treebuilders, treewalkers, serializer

my_html = ""&lt;i&gt;Some html fragment&lt;/I&gt;"" #intentional 'I'

html_parser = html5lib.HTMLParser(tree=treebuilders.getTreeBuilder(""dom""))
dom_tree = html_parser.parseFragment(my_html)
walker = treewalkers.getTreeWalker(""dom"")
stream = walker(dom_tree)
s = serializer.htmlserializer.HTMLSerializer(omit_optional_tags=False, quote_attr_values=True)
cleaned_html = s.render(stream)
cleaned_html == '&lt;i&gt;Some html fragment&lt;/i&gt;""
</code></pre>

<p>You can also sanitize the html by initializing your html_parser like this:</p>

<pre><code>html_parser = html5lib.HTMLParser(tree=treebuilders.getTreeBuilder(""dom""), tokenizer=sanitizer.HTMLSanitizer)
</code></pre>",2
208,6028274,Clean up ugly WYSIWYG HTML code? Python or *nix utility,"<p>I'm finally upgrading (<em>rewriting</em> ;) ) my first Django app, but I am migrating all the content. </p>

<p>I foolishly gave users a full <em>WYSIWYG</em> editor for certain tasks, the HTML code produced is of course terribly ugly with more extra tags than content. </p>

<p><strong>Does anyone know of a library or external shell app I could use to clean up the code?</strong></p>

<p>I use tidy sometimes, but as far as I know that doesn't do what I'm asking. I want to simplify all the extra span and other garbage tags. I cleaned the most offensive offending styles with some regex, but I it would take a really long time to do anything more using just regex. </p>

<p>Any ideas? </p>",python|html|regex|django|wysiwyg,"<p>You could also take a look at <a href=""https://github.com/jsocol/bleach"" rel=""nofollow"">Bleach</a> a white-list based HTML sanitizer. It uses html5lib to do what Kyle posted, but you'll get a lot more control over which elements and attributes are allowed in the final output.</p>",3
209,6028274,Clean up ugly WYSIWYG HTML code? Python or *nix utility,"<p>I'm finally upgrading (<em>rewriting</em> ;) ) my first Django app, but I am migrating all the content. </p>

<p>I foolishly gave users a full <em>WYSIWYG</em> editor for certain tasks, the HTML code produced is of course terribly ugly with more extra tags than content. </p>

<p><strong>Does anyone know of a library or external shell app I could use to clean up the code?</strong></p>

<p>I use tidy sometimes, but as far as I know that doesn't do what I'm asking. I want to simplify all the extra span and other garbage tags. I cleaned the most offensive offending styles with some regex, but I it would take a really long time to do anything more using just regex. </p>

<p>Any ideas? </p>",python|html|regex|django|wysiwyg,"<p>The standard answer is <code>Beautiful Soup</code>.  </p>

<p>""Extra span"" and ""garbage tags"" is something you'll need to define very, very carefully so you can remove the tags without removing content.</p>

<p>I would suggest you do two things.</p>

<ol>
<li><p>Fix  your app so that users don't provide HTML under any circumstances.  Django can use RST markup which is much more user-friendly.  <a href=""http://docs.djangoproject.com/en/1.3/ref/templates/builtins/#django-contrib-markup"" rel=""nofollow"">http://docs.djangoproject.com/en/1.3/ref/templates/builtins/#django-contrib-markup</a></p></li>
<li><p>Write a Beautiful Soup parser and transform the user's <em>content</em> into RST markup.  Keep the structural elements (headings, lists, etc.) and lose the formatting to the extent possible.</p></li>
</ol>",0
210,5872299,How do I get a python regular expression to return all text not matching?,"<p>So, I am successfully matching and extracting some special tagged text using the following regular expression:</p>

<pre><code>theString = u""Var 1 value: %%v:123453%%, Var 2 value: %%v:984561%%, Var 3 value: %%v:123456%%""
p = re.compile(""\%%v:([0-9]*)%%"")
theIds = p.findall(theString)
</code></pre>

<p>That returns </p>

<pre><code>[u'123453', u'984561', u'123456']
</code></pre>

<p>which is exactly what I need. Next, I need to replace those with some looked up value, so what I'd like to get next is this:</p>

<pre><code>[u'Var 1 value: ', u', Var 2 value: ', u', Var 3 value: ']
</code></pre>

<p>So that I can glue those strings together with the looked up values from the first list, resulting in a string that looks something like this:</p>

<p>u""Var 1 value: Some Value, Var 2 value: 837, Var 3 value: more stuff""</p>

<p>Or, if there's a better way to do the replacement I'm all ears.</p>

<p>Thanks in advance!</p>",python|regex|replace,"<p>Can't you just <code>split(', ')</code> the string and work with the individual pieces?</p>

<p>A naive solution of mine would be something like this:</p>

<pre><code>theString = u""Var 1 value: %%v:123453%%, Var 2 value: %%v:984561%%, Var 3 value: %%v:123456%%""

for chunk in theString.split(', '):
  temp = str(chunk)

  p = re.compile(""\%%v:([0-9]*)%%"")
  theIds = p.findall(theString)

  theOpposite = temp.replace(theIds[0])
</code></pre>",0
211,5872299,How do I get a python regular expression to return all text not matching?,"<p>So, I am successfully matching and extracting some special tagged text using the following regular expression:</p>

<pre><code>theString = u""Var 1 value: %%v:123453%%, Var 2 value: %%v:984561%%, Var 3 value: %%v:123456%%""
p = re.compile(""\%%v:([0-9]*)%%"")
theIds = p.findall(theString)
</code></pre>

<p>That returns </p>

<pre><code>[u'123453', u'984561', u'123456']
</code></pre>

<p>which is exactly what I need. Next, I need to replace those with some looked up value, so what I'd like to get next is this:</p>

<pre><code>[u'Var 1 value: ', u', Var 2 value: ', u', Var 3 value: ']
</code></pre>

<p>So that I can glue those strings together with the looked up values from the first list, resulting in a string that looks something like this:</p>

<p>u""Var 1 value: Some Value, Var 2 value: 837, Var 3 value: more stuff""</p>

<p>Or, if there's a better way to do the replacement I'm all ears.</p>

<p>Thanks in advance!</p>",python|regex|replace,"<p>Instead of ""p.findall"" use ""p.sub"".</p>",0
212,5872299,How do I get a python regular expression to return all text not matching?,"<p>So, I am successfully matching and extracting some special tagged text using the following regular expression:</p>

<pre><code>theString = u""Var 1 value: %%v:123453%%, Var 2 value: %%v:984561%%, Var 3 value: %%v:123456%%""
p = re.compile(""\%%v:([0-9]*)%%"")
theIds = p.findall(theString)
</code></pre>

<p>That returns </p>

<pre><code>[u'123453', u'984561', u'123456']
</code></pre>

<p>which is exactly what I need. Next, I need to replace those with some looked up value, so what I'd like to get next is this:</p>

<pre><code>[u'Var 1 value: ', u', Var 2 value: ', u', Var 3 value: ']
</code></pre>

<p>So that I can glue those strings together with the looked up values from the first list, resulting in a string that looks something like this:</p>

<p>u""Var 1 value: Some Value, Var 2 value: 837, Var 3 value: more stuff""</p>

<p>Or, if there's a better way to do the replacement I'm all ears.</p>

<p>Thanks in advance!</p>",python|regex|replace,"<p>How about the following?</p>

<pre><code>theString = u""Var 1 value: %%v:123453%%, Var 2 value: %%v:984561%%, Var 3 value: %%v:123456%%""
p = re.compile(""\%%v:([0-9]*)%%"")
replacements = [""Some Value"", ""837"", ""more stuff""]
newString = p.sub(lambda m: replacements.pop(0), theString)
</code></pre>

<p>You can provide a function to <code>re.sub()</code>, in this case the function takes the first item from a <code>replacements</code> list and substitutes it for the match.</p>

<p><strong>edit</strong>: I misread the question and missed that you want to look up the replacement values based on the initial values, you probably want something like <a href=""https://stackoverflow.com/questions/5872299/how-do-i-get-a-python-regular-expression-to-return-all-text-not-matching/5872450#5872450"">Martijn's answer</a> for your replacement.  As far as returning all text not matching, you can remove the group in your regex and then use <code>re.split()</code>:</p>

<pre><code>&gt;&gt;&gt; theString = u""Var 1 value: %%v:123453%%, Var 2 value: %%v:984561%%, Var 3 value: %%v:123456%%""
&gt;&gt;&gt; p = re.compile(""%%v:[0-9]*%%"")
&gt;&gt;&gt; p.split(theString)
[u'Var 1 value: ', u', Var 2 value: ', u', Var 3 value: ', u'']
</code></pre>",2
213,5872299,How do I get a python regular expression to return all text not matching?,"<p>So, I am successfully matching and extracting some special tagged text using the following regular expression:</p>

<pre><code>theString = u""Var 1 value: %%v:123453%%, Var 2 value: %%v:984561%%, Var 3 value: %%v:123456%%""
p = re.compile(""\%%v:([0-9]*)%%"")
theIds = p.findall(theString)
</code></pre>

<p>That returns </p>

<pre><code>[u'123453', u'984561', u'123456']
</code></pre>

<p>which is exactly what I need. Next, I need to replace those with some looked up value, so what I'd like to get next is this:</p>

<pre><code>[u'Var 1 value: ', u', Var 2 value: ', u', Var 3 value: ']
</code></pre>

<p>So that I can glue those strings together with the looked up values from the first list, resulting in a string that looks something like this:</p>

<p>u""Var 1 value: Some Value, Var 2 value: 837, Var 3 value: more stuff""</p>

<p>Or, if there's a better way to do the replacement I'm all ears.</p>

<p>Thanks in advance!</p>",python|regex|replace,"<p>Use a replacement function to insert arbitrary substitutions. See the <a href=""http://docs.python.org/library/re.html#re.sub"" rel=""nofollow""><code>re.sub</code></a> documentation for how the function works. Here is an example:</p>

<pre><code>values = {
    u'123453': u'Some Value',
    u'984561': u'837',
    u'123456': u'more stuff',
}

def insertLookup(matchobj):
    return values[matchobj.group(1)]

theString = u""Var 1 value: %%v:123453%%, Var 2 value: %%v:984561%%, Var 3 value: %%v:123456%%""
p = re.compile(""\%%v:([0-9]*)%%"")
newString = p.sub(insertLookup, theString)

print newString
u""Var 1 value: Some Value, Var 2 value: 837, Var 3 value: more stuff""
</code></pre>

<p>The <code>insertLookup</code> function will be called for each match, and is passed a <a href=""http://docs.python.org/library/re.html#match-objects"" rel=""nofollow"">MatchObject</a>. We then use the matched value (<code>u'123453'</code>, etc.) to look up the replacement value, which then is inserted into <code>newString</code> instead of the matched string.</p>",2
214,6114251,How to make __name__ == '__main__' when running module,"<p>More specifically, I have a file</p>

<p>file file1.py:</p>

<pre><code>if __name__ == '__main__':
    a = 1
</code></pre>

<p>and from file file2.py, I want to do something like</p>

<pre><code>import file1
print file1.a
</code></pre>

<p>without modifying file1.py</p>",python,"<pre><code>from runpy import run_module
data = run_module(""file1"", run_name=""__main__"")
print data[""a""]
</code></pre>

<p>You don't need to mess with the import internals to do things like this any more (and as an added bonus, you will avoid blocking access to your <em>real</em> <code>__main__</code> module namespace)</p>",4
215,6114251,How to make __name__ == '__main__' when running module,"<p>More specifically, I have a file</p>

<p>file file1.py:</p>

<pre><code>if __name__ == '__main__':
    a = 1
</code></pre>

<p>and from file file2.py, I want to do something like</p>

<pre><code>import file1
print file1.a
</code></pre>

<p>without modifying file1.py</p>",python,"<p>You would need to declare <code>a</code> outside of the <code>if __name__ == '__main__'</code> scope.  Right now, it only exists within the scope of that <code>if</code> block.</p>

<pre><code>a = 0
if __name__ == '__main__':
    a = 1
</code></pre>",0
216,6114251,How to make __name__ == '__main__' when running module,"<p>More specifically, I have a file</p>

<p>file file1.py:</p>

<pre><code>if __name__ == '__main__':
    a = 1
</code></pre>

<p>and from file file2.py, I want to do something like</p>

<pre><code>import file1
print file1.a
</code></pre>

<p>without modifying file1.py</p>",python,<p>You can't; that's the purpose of the main sentinel in the first place. If variables defined in the main sentinel are useful outside of it then they should be defined outside of it to begin with.</p>,3
217,6114251,How to make __name__ == '__main__' when running module,"<p>More specifically, I have a file</p>

<p>file file1.py:</p>

<pre><code>if __name__ == '__main__':
    a = 1
</code></pre>

<p>and from file file2.py, I want to do something like</p>

<pre><code>import file1
print file1.a
</code></pre>

<p>without modifying file1.py</p>",python,"<pre><code>import imp
m = imp.find_module('file1')
file1 = imp.load_module('__main__', *m)
</code></pre>

<p>That being said, you should really think about modifying <code>file1.py</code> instead of using this hack.</p>",4
218,5745881,Fast way to remove a few items from a list/queue,"<p>This is a follow up to a similar <a href=""https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python/1207461#comment-6561137"">question</a> which asked the best way to write</p>

<pre><code>for item in somelist:
    if determine(item):
         code_to_remove_item
</code></pre>

<p>and it seems the consensus was on something like</p>

<pre><code>somelist[:] = [x for x in somelist if not determine(x)]
</code></pre>

<p>However, I think if you are only removing a few items, most of the items are being copied into the same object, and perhaps that is slow. In an <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python/181062#181062"">answer</a> to another related <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python"">question</a>, someone suggests:</p>

<pre><code>for item in reversed(somelist):
    if determine(item):
        somelist.remove(item)
</code></pre>

<p>However, here the <code>list.remove</code> will search for the item, which is O(N) in the length of the list. May be we are limited in that the list is represented as an array, rather than a linked list, so removing items will need to move everything after it. However, it is suggested <a href=""http://wiki.python.org/moin/TimeComplexity"" rel=""nofollow noreferrer"">here</a> that collections.dequeue is represented as a doubly linked list. It should then be possible to remove in O(1) while iterating. How would we actually accomplish this?</p>

<p><strong>Update</strong>:
I did some time testing as well, with the following code:</p>

<pre><code>import timeit
setup = """"""
import random
random.seed(1)
b = [(random.random(),random.random()) for i in xrange(1000)]
c = []
def tokeep(x):
        return (x[1]&gt;.45) and (x[1]&lt;.5)
""""""
listcomp = """"""
c[:] = [x for x in b if tokeep(x)]
""""""
filt = """"""
c = filter(tokeep, b)
""""""
print ""list comp = "", timeit.timeit(listcomp,setup, number = 10000)
print ""filtering = "", timeit.timeit(filt,setup, number = 10000)
</code></pre>

<p>and got:</p>

<pre><code>list comp =  4.01255393028
filtering =  3.59962391853
</code></pre>",python|list|queue|time-complexity|optimization,"<p>A deque is optimized for head and tail removal, not for arbitrary removal in the middle. The removal itself is fast, but you still have to traverse the list to the removal point. If you're iterating through the entire length, then the only difference between filtering a deque and filtering a list (using <code>filter</code> or a comprehension) is the overhead of copying, which at worst is a constant multiple; it's still a O(n) operation. Also, note that the objects in the list aren't being copied -- just the references to them. So it's not that much overhead.</p>

<p>It's possible that you could avoid copying like so, but I have no particular reason to believe this is faster than a straightforward list comprehension -- it's probably not: </p>

<pre><code>write_i = 0
for read_i in range(len(L)):
    L[write_i] = L[read_i]
    if L[read_i] not in ['a', 'c']:
         write_i += 1
del L[write_i:]
</code></pre>",3
219,5745881,Fast way to remove a few items from a list/queue,"<p>This is a follow up to a similar <a href=""https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python/1207461#comment-6561137"">question</a> which asked the best way to write</p>

<pre><code>for item in somelist:
    if determine(item):
         code_to_remove_item
</code></pre>

<p>and it seems the consensus was on something like</p>

<pre><code>somelist[:] = [x for x in somelist if not determine(x)]
</code></pre>

<p>However, I think if you are only removing a few items, most of the items are being copied into the same object, and perhaps that is slow. In an <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python/181062#181062"">answer</a> to another related <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python"">question</a>, someone suggests:</p>

<pre><code>for item in reversed(somelist):
    if determine(item):
        somelist.remove(item)
</code></pre>

<p>However, here the <code>list.remove</code> will search for the item, which is O(N) in the length of the list. May be we are limited in that the list is represented as an array, rather than a linked list, so removing items will need to move everything after it. However, it is suggested <a href=""http://wiki.python.org/moin/TimeComplexity"" rel=""nofollow noreferrer"">here</a> that collections.dequeue is represented as a doubly linked list. It should then be possible to remove in O(1) while iterating. How would we actually accomplish this?</p>

<p><strong>Update</strong>:
I did some time testing as well, with the following code:</p>

<pre><code>import timeit
setup = """"""
import random
random.seed(1)
b = [(random.random(),random.random()) for i in xrange(1000)]
c = []
def tokeep(x):
        return (x[1]&gt;.45) and (x[1]&lt;.5)
""""""
listcomp = """"""
c[:] = [x for x in b if tokeep(x)]
""""""
filt = """"""
c = filter(tokeep, b)
""""""
print ""list comp = "", timeit.timeit(listcomp,setup, number = 10000)
print ""filtering = "", timeit.timeit(filt,setup, number = 10000)
</code></pre>

<p>and got:</p>

<pre><code>list comp =  4.01255393028
filtering =  3.59962391853
</code></pre>",python|list|queue|time-complexity|optimization,"<pre><code> import collections
 list1=collections.deque(list1)
 for i in list2:
   try:
     list1.remove(i)
   except:
     pass
</code></pre>
<p>INSTEAD OF CHECKING IF ELEMENT IS THERE. USING TRY EXCEPT.
I GUESS THIS FASTER</p>",-1
220,5745881,Fast way to remove a few items from a list/queue,"<p>This is a follow up to a similar <a href=""https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python/1207461#comment-6561137"">question</a> which asked the best way to write</p>

<pre><code>for item in somelist:
    if determine(item):
         code_to_remove_item
</code></pre>

<p>and it seems the consensus was on something like</p>

<pre><code>somelist[:] = [x for x in somelist if not determine(x)]
</code></pre>

<p>However, I think if you are only removing a few items, most of the items are being copied into the same object, and perhaps that is slow. In an <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python/181062#181062"">answer</a> to another related <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python"">question</a>, someone suggests:</p>

<pre><code>for item in reversed(somelist):
    if determine(item):
        somelist.remove(item)
</code></pre>

<p>However, here the <code>list.remove</code> will search for the item, which is O(N) in the length of the list. May be we are limited in that the list is represented as an array, rather than a linked list, so removing items will need to move everything after it. However, it is suggested <a href=""http://wiki.python.org/moin/TimeComplexity"" rel=""nofollow noreferrer"">here</a> that collections.dequeue is represented as a doubly linked list. It should then be possible to remove in O(1) while iterating. How would we actually accomplish this?</p>

<p><strong>Update</strong>:
I did some time testing as well, with the following code:</p>

<pre><code>import timeit
setup = """"""
import random
random.seed(1)
b = [(random.random(),random.random()) for i in xrange(1000)]
c = []
def tokeep(x):
        return (x[1]&gt;.45) and (x[1]&lt;.5)
""""""
listcomp = """"""
c[:] = [x for x in b if tokeep(x)]
""""""
filt = """"""
c = filter(tokeep, b)
""""""
print ""list comp = "", timeit.timeit(listcomp,setup, number = 10000)
print ""filtering = "", timeit.timeit(filt,setup, number = 10000)
</code></pre>

<p>and got:</p>

<pre><code>list comp =  4.01255393028
filtering =  3.59962391853
</code></pre>",python|list|queue|time-complexity|optimization,<p>If you need to remove item in O(1) you can use HashMaps</p>,3
221,5745881,Fast way to remove a few items from a list/queue,"<p>This is a follow up to a similar <a href=""https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python/1207461#comment-6561137"">question</a> which asked the best way to write</p>

<pre><code>for item in somelist:
    if determine(item):
         code_to_remove_item
</code></pre>

<p>and it seems the consensus was on something like</p>

<pre><code>somelist[:] = [x for x in somelist if not determine(x)]
</code></pre>

<p>However, I think if you are only removing a few items, most of the items are being copied into the same object, and perhaps that is slow. In an <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python/181062#181062"">answer</a> to another related <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python"">question</a>, someone suggests:</p>

<pre><code>for item in reversed(somelist):
    if determine(item):
        somelist.remove(item)
</code></pre>

<p>However, here the <code>list.remove</code> will search for the item, which is O(N) in the length of the list. May be we are limited in that the list is represented as an array, rather than a linked list, so removing items will need to move everything after it. However, it is suggested <a href=""http://wiki.python.org/moin/TimeComplexity"" rel=""nofollow noreferrer"">here</a> that collections.dequeue is represented as a doubly linked list. It should then be possible to remove in O(1) while iterating. How would we actually accomplish this?</p>

<p><strong>Update</strong>:
I did some time testing as well, with the following code:</p>

<pre><code>import timeit
setup = """"""
import random
random.seed(1)
b = [(random.random(),random.random()) for i in xrange(1000)]
c = []
def tokeep(x):
        return (x[1]&gt;.45) and (x[1]&lt;.5)
""""""
listcomp = """"""
c[:] = [x for x in b if tokeep(x)]
""""""
filt = """"""
c = filter(tokeep, b)
""""""
print ""list comp = "", timeit.timeit(listcomp,setup, number = 10000)
print ""filtering = "", timeit.timeit(filt,setup, number = 10000)
</code></pre>

<p>and got:</p>

<pre><code>list comp =  4.01255393028
filtering =  3.59962391853
</code></pre>",python|list|queue|time-complexity|optimization,"<p>I took a stab at this.  My solution is slower, but requires less memory overhead (i.e. doesn't create a new array).  It might even be faster in some circumstances!</p>

<p><strong>This code has been edited since its first posting</strong></p>

<p>I had problems with timeit, I might be doing this wrong.</p>

<pre><code>import timeit
setup = """"""

import random
random.seed(1)
global b
setup_b = [(random.random(), random.random()) for i in xrange(1000)]
c = []
def tokeep(x):
        return (x[1]&gt;.45) and (x[1]&lt;.5)


# define and call to turn into psyco bytecode (if using psyco)
b = setup_b[:]
def listcomp():
   c[:] = [x for x in b if tokeep(x)]
listcomp()

b = setup_b[:]
def filt():
   c = filter(tokeep, b)
filt()

b = setup_b[:]
def forfilt():
   marked = (i for i, x in enumerate(b) if tokeep(x))
   shift = 0
   for n in marked:
      del b[n - shift]
      shift += 1
forfilt()

b = setup_b[:]
def forfiltCheating():
   marked = (i for i, x in enumerate(b) if (x[1] &gt; .45) and (x[1] &lt; .5))

   shift = 0
   for n in marked:
      del b[n - shift]
      shift += 1
forfiltCheating()

""""""

listcomp = """"""
b = setup_b[:]

listcomp()
""""""

filt = """"""
b = setup_b[:]

filt()
""""""

forfilt = """"""
b = setup_b[:]

forfilt()
""""""

forfiltCheating = '''
b = setup_b[:]

forfiltCheating()
'''

psycosetup = '''

import psyco
psyco.full()


'''

print ""list comp = "", timeit.timeit(listcomp, setup, number = 10000)
print ""filtering = "", timeit.timeit(filt, setup, number = 10000)
print 'forfilter = ', timeit.timeit(forfilt, setup, number = 10000)
print 'forfiltCheating = ', timeit.timeit(forfiltCheating, setup, number = 10000)


print '\nnow with psyco \n'
print ""list comp = "", timeit.timeit(listcomp, psycosetup + setup, number = 10000)
print ""filtering = "", timeit.timeit(filt, psycosetup + setup, number = 10000)
print 'forfilter = ', timeit.timeit(forfilt, psycosetup + setup, number = 10000)
print 'forfiltCheating = ', timeit.timeit(forfiltCheating, psycosetup + setup, number = 10000)
</code></pre>

<p>And here are the results</p>

<pre><code>list comp =  6.56407690048
filtering =  5.64738512039
forfilter =  7.31555104256
forfiltCheating =  4.8994679451

now with psyco 

list comp =  8.0485959053
filtering =  7.79016900063
forfilter =  9.00477004051
forfiltCheating =  4.90830993652
</code></pre>

<p>I must be doing something wrong with psyco, because it is actually running slower.</p>",2
222,5745881,Fast way to remove a few items from a list/queue,"<p>This is a follow up to a similar <a href=""https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python/1207461#comment-6561137"">question</a> which asked the best way to write</p>

<pre><code>for item in somelist:
    if determine(item):
         code_to_remove_item
</code></pre>

<p>and it seems the consensus was on something like</p>

<pre><code>somelist[:] = [x for x in somelist if not determine(x)]
</code></pre>

<p>However, I think if you are only removing a few items, most of the items are being copied into the same object, and perhaps that is slow. In an <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python/181062#181062"">answer</a> to another related <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python"">question</a>, someone suggests:</p>

<pre><code>for item in reversed(somelist):
    if determine(item):
        somelist.remove(item)
</code></pre>

<p>However, here the <code>list.remove</code> will search for the item, which is O(N) in the length of the list. May be we are limited in that the list is represented as an array, rather than a linked list, so removing items will need to move everything after it. However, it is suggested <a href=""http://wiki.python.org/moin/TimeComplexity"" rel=""nofollow noreferrer"">here</a> that collections.dequeue is represented as a doubly linked list. It should then be possible to remove in O(1) while iterating. How would we actually accomplish this?</p>

<p><strong>Update</strong>:
I did some time testing as well, with the following code:</p>

<pre><code>import timeit
setup = """"""
import random
random.seed(1)
b = [(random.random(),random.random()) for i in xrange(1000)]
c = []
def tokeep(x):
        return (x[1]&gt;.45) and (x[1]&lt;.5)
""""""
listcomp = """"""
c[:] = [x for x in b if tokeep(x)]
""""""
filt = """"""
c = filter(tokeep, b)
""""""
print ""list comp = "", timeit.timeit(listcomp,setup, number = 10000)
print ""filtering = "", timeit.timeit(filt,setup, number = 10000)
</code></pre>

<p>and got:</p>

<pre><code>list comp =  4.01255393028
filtering =  3.59962391853
</code></pre>",python|list|queue|time-complexity|optimization,"<p>Since <code>list.remove</code> is equivalent to <code>del list[list.index(x)]</code>, you could do:</p>

<pre><code>for idx, item in enumerate(somelist):
    if determine(item):
        del somelist[idx]
</code></pre>

<p>But: you should <em>not</em> modify the list while iterating over it. It will bite you, sooner or later. Use <code>filter</code> or list comprehension first, and optimise later.</p>",3
223,5745881,Fast way to remove a few items from a list/queue,"<p>This is a follow up to a similar <a href=""https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python/1207461#comment-6561137"">question</a> which asked the best way to write</p>

<pre><code>for item in somelist:
    if determine(item):
         code_to_remove_item
</code></pre>

<p>and it seems the consensus was on something like</p>

<pre><code>somelist[:] = [x for x in somelist if not determine(x)]
</code></pre>

<p>However, I think if you are only removing a few items, most of the items are being copied into the same object, and perhaps that is slow. In an <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python/181062#181062"">answer</a> to another related <a href=""https://stackoverflow.com/questions/18418/elegant-way-to-remove-items-from-sequence-in-python"">question</a>, someone suggests:</p>

<pre><code>for item in reversed(somelist):
    if determine(item):
        somelist.remove(item)
</code></pre>

<p>However, here the <code>list.remove</code> will search for the item, which is O(N) in the length of the list. May be we are limited in that the list is represented as an array, rather than a linked list, so removing items will need to move everything after it. However, it is suggested <a href=""http://wiki.python.org/moin/TimeComplexity"" rel=""nofollow noreferrer"">here</a> that collections.dequeue is represented as a doubly linked list. It should then be possible to remove in O(1) while iterating. How would we actually accomplish this?</p>

<p><strong>Update</strong>:
I did some time testing as well, with the following code:</p>

<pre><code>import timeit
setup = """"""
import random
random.seed(1)
b = [(random.random(),random.random()) for i in xrange(1000)]
c = []
def tokeep(x):
        return (x[1]&gt;.45) and (x[1]&lt;.5)
""""""
listcomp = """"""
c[:] = [x for x in b if tokeep(x)]
""""""
filt = """"""
c = filter(tokeep, b)
""""""
print ""list comp = "", timeit.timeit(listcomp,setup, number = 10000)
print ""filtering = "", timeit.timeit(filt,setup, number = 10000)
</code></pre>

<p>and got:</p>

<pre><code>list comp =  4.01255393028
filtering =  3.59962391853
</code></pre>",python|list|queue|time-complexity|optimization,"<p>The list comprehension is the asymptotically optimal solution:</p>

<pre><code>somelist = [x for x in somelist if not determine(x)]
</code></pre>

<p>It only makes one pass over the list, so runs in O(n) time.  Since you need to call determine() on each object, any algorithm will require at least O(n) operations.  The list comprehension does have to do some copying, but it's only copying references to the objects not copying the objects themselves.</p>

<p>Removing items from a list in Python is O(n), so anything with a remove, pop, or del inside the loop will be O(n**2).</p>

<p>Also, in CPython list comprehensions are faster than for loops.</p>",20
224,5951135,How to save a list as numpy array in python?,<p>Is possible to construct a NumPy array from a python list?</p>,python|list|numpy,"<p>I suppose, you mean converting a list into a numpy array?
Then,</p>

<pre><code>import numpy as np

# b is some list, then ...    
a = np.array(b).reshape(lengthDim0, lengthDim1);
</code></pre>

<p>gives you a as an array of list b in the shape given in reshape.</p>",4
225,5951135,How to save a list as numpy array in python?,<p>Is possible to construct a NumPy array from a python list?</p>,python|list|numpy,"<p>maybe:</p>

<pre><code>import numpy as np
a=[[1,1],[2,2]]
b=np.asarray(a)
print(type(b))
</code></pre>

<p>output:</p>

<pre><code>&lt;class 'numpy.ndarray'&gt;
</code></pre>",0
226,5951135,How to save a list as numpy array in python?,<p>Is possible to construct a NumPy array from a python list?</p>,python|list|numpy,"<pre><code>import numpy as np 

... ## other code
</code></pre>

<p>some list comprehension</p>

<pre><code>t=[nodel[ nodenext[i][j] ] for j in idx]
            #for each link, find the node lables 
            #t is the list of node labels 
</code></pre>

<p>Convert the list to a numpy array using the array method specified in the numpy library.</p>

<pre><code>t=np.array(t)
</code></pre>

<p>This may be helpful: <a href=""https://numpy.org/devdocs/user/basics.creation.html"" rel=""nofollow noreferrer"">https://numpy.org/devdocs/user/basics.creation.html</a></p>",0
227,5951135,How to save a list as numpy array in python?,<p>Is possible to construct a NumPy array from a python list?</p>,python|list|numpy,"<p>You want to save it as a file?</p>

<pre><code>import numpy as np

myList = [1, 2, 3]

np.array(myList).dump(open('array.npy', 'wb'))
</code></pre>

<p>... and then read:</p>

<pre><code>myArray = np.load(open('array.npy', 'rb'))
</code></pre>",16
228,5951135,How to save a list as numpy array in python?,<p>Is possible to construct a NumPy array from a python list?</p>,python|list|numpy,"<p><a href=""http://www.scipy.org/Tentative_NumPy_Tutorial#head-d3f8e5fe9b903f3c3b2a5c0dfceb60d71602cf93"" rel=""noreferrer"">Yes it is:</a></p>

<pre><code>a = numpy.array([1,2,3])
</code></pre>",18
229,5951135,How to save a list as numpy array in python?,<p>Is possible to construct a NumPy array from a python list?</p>,python|list|numpy,"<p>you mean something like this ?</p>

<pre><code>from numpy  import array
a = array( your_list )
</code></pre>",41
230,5951135,How to save a list as numpy array in python?,<p>Is possible to construct a NumPy array from a python list?</p>,python|list|numpy,"<p>Here is a more complete example:</p>

<pre><code>import csv
import numpy as np

with open('filename','rb') as csvfile:
     cdl = list( csv.reader(csvfile,delimiter='\t'))
     print ""Number of records = "" + str(len(cdl))

#then later

npcdl = np.array(cdl)
</code></pre>

<p>Hope this helps!!</p>",0
231,5951135,How to save a list as numpy array in python?,<p>Is possible to construct a NumPy array from a python list?</p>,python|list|numpy,"<p>You can use <a href=""https://docs.scipy.org/doc/numpy/reference/generated/numpy.asarray.html"" rel=""noreferrer"">numpy.asarray</a>, for example to convert a list into an array:</p>

<pre><code>&gt;&gt;&gt; a = [1, 2]
&gt;&gt;&gt; np.asarray(a)
array([1, 2])
</code></pre>",8
232,5951135,How to save a list as numpy array in python?,<p>Is possible to construct a NumPy array from a python list?</p>,python|list|numpy,"<p>First of all, I'd recommend you to go through NumPy's  <a href=""https://numpy.org/devdocs/user/quickstart.html"" rel=""noreferrer"">Quickstart tutorial</a>, which will probably help with these basic questions.</p>
<p>You can directly create an array from a list as:</p>
<pre><code>import numpy as np
a = np.array( [2,3,4] )
</code></pre>
<p>Or from a from a nested list in the same way:</p>
<pre><code>import numpy as np
a = np.array( [[2,3,4], [3,4,5]] )
</code></pre>",168
233,22017705,"TypeError: data() missing 4 required positional arguments: 'n', 'p', 'gn', and 's'","<p>I have this assignment for school work, this is pretty basic stuff i gather but I'm new to this language so I'm still a little nooby. I get the aforementioned error upon testing each module with the error being specific to this line and this line alone.</p>

<pre><code>def data(n, p, gn, s):

    name[x] = input(""Please enter the customer's name."")
    n.append(name[x])

    phone = int(input(""Please enter the customer's Phone Number.""))
    if len.str(phone[x]) == 11:
        p.append(attendance[x])
    else :  phone[x] = int(input(""Please enter the customer's Phone Number.""))
    if len.str(phone[x]) == 11:
        p.append(attendance[x])

    groupno[x] = int(input(""Please enter the number of diners in the group - length must be 11 characters.""))
    if  1 &gt;= groupno[x] &lt;=20:
        gn.append(groupno[x])
    else:  groupno[x] = int(input(""Please enter the number of diners in the group - between 1 &amp; 20.""))
    gn.append(groupno[x])

    score[x] = int(input(""Please enter the rating of the meal.""))
    if 1 &gt;= score[x] &lt;=3:
        s.append(score[x])
    else:  score[x] = int(input(""Please enter the rating of the meal - between 1 &amp; 10.""))
    if 1 &gt;= score[x] &lt;=3:
        s.append(score[x])
data()
</code></pre>",python,"<p>It looks like you are trying to store information about multiple customers, I suggest you use a dictionary instead:</p>

<pre><code>def data():
   name = input(""Please enter the customer's name."")
   temp_phone = int(input(""Please enter the customer's Phone Number.""))
   while len.str(temp_phone) != 11:
        temp_phone = int(input(""Please enter the customer's Phone Number.""))
   phone = temp_phone
   temp_groupno = int(input(""Please enter the number of diners in the group (maximum 20 diners)""))
   while  not (1 &lt;= groupno &lt;=20):
        temp_groupno = int(input(""Please enter the number of diners in the group (maximum 20)""))
   group = temp_groupno

   temp_score = int(input(""Please enter the rating of the meal (between 1 and 10)""))
   while not (1 &lt;= temp_score &lt;= 3):
        temp_score = int(input(""Please enter the rating of the meal - between 1 &amp; 10.""))
   score = temp_score
   return {'name': name, 'phone': phone, 'group': group, 'score': score}

customers = []
customers.append(data())
customers.append(data())
print(customers)
</code></pre>",1
234,22017705,"TypeError: data() missing 4 required positional arguments: 'n', 'p', 'gn', and 's'","<p>I have this assignment for school work, this is pretty basic stuff i gather but I'm new to this language so I'm still a little nooby. I get the aforementioned error upon testing each module with the error being specific to this line and this line alone.</p>

<pre><code>def data(n, p, gn, s):

    name[x] = input(""Please enter the customer's name."")
    n.append(name[x])

    phone = int(input(""Please enter the customer's Phone Number.""))
    if len.str(phone[x]) == 11:
        p.append(attendance[x])
    else :  phone[x] = int(input(""Please enter the customer's Phone Number.""))
    if len.str(phone[x]) == 11:
        p.append(attendance[x])

    groupno[x] = int(input(""Please enter the number of diners in the group - length must be 11 characters.""))
    if  1 &gt;= groupno[x] &lt;=20:
        gn.append(groupno[x])
    else:  groupno[x] = int(input(""Please enter the number of diners in the group - between 1 &amp; 20.""))
    gn.append(groupno[x])

    score[x] = int(input(""Please enter the rating of the meal.""))
    if 1 &gt;= score[x] &lt;=3:
        s.append(score[x])
    else:  score[x] = int(input(""Please enter the rating of the meal - between 1 &amp; 10.""))
    if 1 &gt;= score[x] &lt;=3:
        s.append(score[x])
data()
</code></pre>",python,"<p>Your function require 4 parameters and you have given it none.</p>

<p>When you define a function like so: <code>def foo(a,b,c,d)</code>, you need to supply it with <code>a,b,c</code> and <code>d</code>.</p>

<pre><code>name[x] = input(""Please enter the customer's name."")
    n.append(name[x])
</code></pre>

<p>This will also give you an error as <code>x</code> is undefined.</p>",0
235,22109019,Replacing values in a list,"<p>Basically, I'm trying to create a program that will replace the values of diceList with a random integer between 1 and 6 wherever my indexList has a 1 in it. This is what I have so far: </p>

<pre><code>import random
def replaceValues(diceList, indexList):
    newList = diceList
    for i in indexList:
        if indexList == 1:
            newList[i] = random.randint(1,6)
        return newList
</code></pre>

<p>I'm executing <code>replaceValues([1,2,3,4,5], [0,1,0,1,0])</code> and what I should get is <code>[1,x,3,x,5]</code> where x should be a random number between 1 and 6. The problem is it currently returns [1,2,3,4,5]</p>",python,"<p>Is <code>indexList</code> a <code>list</code>? If so, what does a <code>list == 1</code> mean?</p>

<pre><code>if indexList == 1:
    newList[i] = random.randint(1,6)
</code></pre>

<p>Did you perhaps mean <code>i == 1</code> ?</p>

<p>Edit:</p>

<p>I think you're looking for something like this:</p>

<pre><code>def replaceValues(diceList, indexList):
    newList = diceList
    if len(diceList) == len(indexList):
        for pos in range(0, len(indexList)):
            if indexList[pos] == 1:
                newList[pos] = random.randint(0,6)
        return newList
</code></pre>",2
236,22054287,Clicking visible close button inside a dialog,"<p>Have a potential problem at hand. I have an overlay form that comes just after successful registration. I have tried by X path too but that does not help(as in recognize it).</p>

<p>Now i am trying to have a class recognize ( the complete overlay form) and then click the 'X' link on the form. However the problem is the compound class.</p>

<p>This is the complete class that recognize the overlay form:</p>

<pre><code>ui-dialog ui-widget ui-widget-content ui-corner-all registerModel-main-dialog ui-draggable signup_thanks
</code></pre>

<p>This is the class for the 'X' link:</p>

<pre><code>ui-icon ui-icon-closethick
</code></pre>

<p>The website is <a href=""http://www.saksoff5th.com/"" rel=""nofollow"">http://www.saksoff5th.com/</a></p>",python|selenium|selenium-webdriver,"<p>Given your site is <a href=""http://saksoff5th.com"" rel=""nofollow noreferrer"">http://saksoff5th.com</a>, I can provide working code for you.</p>

<pre><code>from selenium import webdriver
from selenium.webdriver.support.ui import WebDriverWait

driver = webdriver.Firefox()
driver.get(""http://www.saksoff5th.com/"")

driver.implicitly_wait(10) # seconds

driver.find_element_by_css_selector("".sign-in &gt; span"").click()
driver.find_element_by_css_selector("".ui-dialog[style*='display: block'] .ui-icon-closethick"").click()

# If you prefer explicit wait, you can do these
# WebDriverWait(driver, 10).until(lambda driver: driver.find_element_by_css_selector("".sign-in &gt; span"")).click()
# WebDriverWait(driver, 10).until(lambda driver: driver.find_element_by_css_selector("".ui-dialog[style*='display: block'] .ui-icon-closethick"")).click()
</code></pre>

<p>Since you haven't provided your code, I guess two possible issues with your code:</p>

<ul>
<li>You didn't use WebDriverWait, which is needed before clicking, since your elements are not available immediately.</li>
<li>There are two other dialogs with same class names, you need to find the visible one.</li>
</ul>

<p>If you are happy with the answer, please accept like <a href=""https://meta.stackexchange.com/a/5235/220697"">this</a>. Otherwise provide feedbacks below.</p>",1
237,22376437,matplotlib - Drawing directly on the canvas,"<p>Due to performance issues for dynamical updates, I need to draw directly a lot of rectangle on the canvas as very low level, that is to say without using <code>matplotlib.patches</code> and as we have to do with classical GUI.</p>

<p>More precisely, I would like to only draw one rectangle and not only all the figure.</p>

<p>Is it possible ?</p>

<p>Here is my testing code using the link given by  Joe Kington.</p>

<pre><code>#!/usr/bin/env python3

from random import randint, choice
import time

import matplotlib.pyplot as plt
import matplotlib.patches as mpatches
import matplotlib.colors as colors
import matplotlib

back_color = ""black""
colors     = ['red', 'green', 'cyan', 'yellow']

width  = 16
height = 16

ax     = plt.subplot(111)
canvas = ax.figure.canvas

ax.set_xlim([0, width])
ax.set_ylim([0, height])

def update():
    global ax, canvas, colors, width, height

    x = randint(0, width - 1)
    y = randint(0, height - 1)

    rect = mpatches.Rectangle(
        (x, y), 1, 1,
        facecolor = choice(colors),
        edgecolor = back_color
    )

    start = time.time()
    ax.draw_artist(rect)
    canvas.blit(ax.bbox)
    print(""draw &gt;&gt;&gt;"", time.time() - start)

timer = canvas.new_timer(interval = 1)
timer.add_callback(update)
timer.start()

plt.show()
</code></pre>

<p>Under Mac O$, I obtain the following message.</p>

<pre><code>Traceback (most recent call last):
  File ""/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/matplotlib/backend_bases.py"", line 1203, in _on_timer
    ret = func(*args, **kwargs)
  File ""/Users/xxx/test.py"", line 86, in update
    ax.draw_artist(rect)
  File ""/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/matplotlib/axes.py"", line 2100, in draw_artist
    a.draw(self._cachedRenderer)
  File ""/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/matplotlib/artist.py"", line 56, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/matplotlib/patches.py"", line 393, in draw
    gc = renderer.new_gc()
  File ""/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/matplotlib/backends/backend_macosx.py"", line 97, in new_gc
    self.gc.save()
RuntimeError: CGContextRef is NULL
</code></pre>

<h2>For Maverick users</h2>

<p>I have a good news for the Mac users who want to play with the following codes, and also with animations. I've reinstalled Maverick OS on my Mac without any softwares, this is called a clean installation, and then I've installed Anaconda, and XQuark (<a href=""http://support.apple.com/kb/ht5293"" rel=""nofollow"">see this</a>).</p>

<p>To make animations work, you just have to use the following two lines before any other matplotlib imports.</p>

<pre><code>import matplotlib
matplotlib.use('TkAgg')
</code></pre>

<p>I think this will work for any Mac OS supported by Anaconda. The use of XQuark is only needed for Maverick.</p>",python|matplotlib,"<p>You have two problems with your current code.</p>

<ol>
<li>You're trying to blit without having drawn the canvas first.  The error you're getting is backend-specific, but basically, it's saying that the canvas's renderer hasn't been initialized yet.</li>
<li>You're not adding the rectangle artist to the axes. Therefore, it's not being drawn with you call <code>ax.draw_artist(rect)</code>.</li>
</ol>

<p>Here's a working example:</p>

<pre><code>from random import randint, choice
import time
import matplotlib.pyplot as plt
import matplotlib.patches as mpatches

back_color = ""black""
colors     = ['red', 'green', 'cyan', 'yellow']
width, height = 16, 16

fig, ax = plt.subplots()
ax.set(xlim=[0, width], ylim=[0, height]) # Or use ""ax.axis([x0,x1,y0,y1])""

# Be sure to draw the canvas once before we start blitting. Otherwise
# a) the renderer doesn't exist yet, and b) there's noting to blit onto
fig.canvas.draw()

def update():
    x = randint(0, width - 1)
    y = randint(0, height - 1)

    rect = mpatches.Rectangle(
        (x, y), 1, 1,
        facecolor = choice(colors),
        edgecolor = back_color
    )
    ax.add_artist(rect)

    start = time.time()
    ax.draw_artist(rect)
    fig.canvas.blit(ax.bbox)
    print(""draw &gt;&gt;&gt;"", time.time() - start)

timer = fig.canvas.new_timer(interval=1)
timer.add_callback(update)
timer.start()

plt.show()
</code></pre>

<p>At this point, though, it would make a lot more sense not to add a new artist each time.  Instead, add the initial rectangle and update it each time.  For example:</p>

<pre><code>from random import randint, choice
import time
import matplotlib.pyplot as plt
import matplotlib.patches as mpatches

back_color = ""black""
colors     = ['red', 'green', 'cyan', 'yellow']

width, height = 16, 16

fig, ax = plt.subplots()
ax.set(xlim=[0, width], ylim=[0, height]) # Or use ""ax.axis([x0,x1,y0,y1])""

rect = mpatches.Rectangle(
    (0, 0), 1, 1,
    facecolor = choice(colors),
    edgecolor = back_color
)
ax.add_artist(rect)

# Be sure to draw the canvas once before we start blitting. Otherwise
# a) the renderer doesn't exist yet, and b) there's noting to blit onto
fig.canvas.draw()

def update():
    x = randint(0, width - 1)
    y = randint(0, height - 1)
    rect.set(xy=[x,y], facecolor=choice(colors))

    start = time.time()
    ax.draw_artist(rect)
    fig.canvas.blit(ax.bbox)
    print(""draw &gt;&gt;&gt;"", time.time() - start)

timer = fig.canvas.new_timer(interval=1)
timer.add_callback(update)
timer.start()

plt.show()
</code></pre>",1
238,22231108,Python encode list 'list' object has no attribute 'encode',"<p>trying to remove \u0141 from this list which i am trying to insert into my database</p>

<pre><code>results=[['The Squid Legion', '0', u'Banda \u0141ysego', '1', [""\nRazer's Clash of the Gods EU #12 - \nChallonge\n""]], ['Romanian eSports', '1', 'Love', '0', [""\nRazer's Clash of the Gods EU #12 - \nChallonge\n""]]]

results =[[x.encode('ascii', 'ignore')  for x in l] for l in results]
</code></pre>

<p>I am getting this error:</p>

<pre><code>AttributeError: 'list' object has no attribute 'encode'
</code></pre>",python|encode,"<p>The first list in your ""big list"" itself contains a list <code>[""\nRazer's Clash of the Gods EU #12 - \nChallonge\n""]</code>, which obviously doesn't have an <code>encode()</code> method on it.</p>

<p>So what happens in your algorithm is this:</p>

<pre><code>[[somestring.encode, somestring.encode, somestring.encode, [somestring].encode, ...]
</code></pre>

<p>You could use a simple recursive algorithm though:</p>

<pre><code>def recursive_ascii_encode(lst):
    ret = []
    for x in lst:
        if isinstance(x, basestring):  # covers both str and unicode
            ret.append(x.encode('ascii', 'ignore'))
        else:
            ret.append(recursive_ascii_encode(x))
    return ret

print recursive_ascii_encode(results)
</code></pre>

<p>outputs:</p>

<pre><code>[['The Squid Legion', '0', 'Banda ysego', '1', [""\nRazer's Clash of the Gods EU #12 - \nChallonge\n""]], ['Romanian eSports', '1', 'Love', '0', [""\nRazer's Clash of the Gods EU #12 - \nChallonge\n""]]]
</code></pre>

<p>Of course that's actually a special case of a more general recursive map, which, refactored, looks like this:</p>

<pre><code>def recursive_map(lst, fn):
    return [recursive_map(x, fn) if isinstance(x, list) else fn(x) for x in lst]

print recursive_map(results, lambda x: x.encode('ascii', 'ignore'))
</code></pre>",3
239,39119471,Raspberry pi Jasper speech recognition not working,"<p>I follow this tutorial <a href=""http://jasperproject.github.io/documentation/"" rel=""nofollow"">http://jasperproject.github.io/documentation/</a>
I use Debian Jessie so most off them I have to compile.
When I want to run jasper.py I get this error:
Does anyone knows what the problem can be.</p>

<blockquote>
  <p>DEBUG:client.diagnose:Checking network connection to server
  'www.google.com'... DEBUG:client.diagnose:Network connection
  working DEBUG:<strong>main</strong>:Trying to read config file:
  '/root/.jasper/profile.yml' DEBUG:client.diagnose:Checking python import 'pocketsphinx'... 
  DEBUG:client.diagnose:Python package 'pocketsphinx' found:
  /usr/local/lib/python2.7/dist-packages/pocketsphinx/<strong>init</strong>.py' 
  WARNING:root:tts_engine not specified in profile, defaulting to
  espeak-tts' DEBUG:client.diagnose:Checking executable 'aplay'... 
  DEBUG:client.diagnose:Executable 'aplay' found: '/usr/bin/aplay' 
  DEBUG:client.diagnose:Checking executable 'espeak'... 
  DEBUG:client.diagnose:Executable 'espeak' found: '/usr/bin/espeak' 
  DEBUG:client.vocabcompiler:compiled_revision is
  'bb74ae36d130ef20de710e3a77b43424b8fa774f' ERROR:root:Error
  occured! Traceback (most recent call last):   File ""jasper.py"",
  line 146, in      app = Jasper()   File ""jasper.py"",
  line 109, in <strong>init</strong><br>
  stt_passive_engine_class.get_passive_instance(), File
  ""/home/pi/jasper/client/stt.py"", line 48, in get_passive_instance<br>
  return cls.get_instance('keyword', phrases) File
  ""/home/pi/jasper/client/stt.py"", line 42, in get_instance<br>
  instance = cls(**config) File ""/home/pi/jasper/client/stt.py"",
  line 126, in <strong>init</strong>     **vocabulary.decoder_kwargs) 
  TypeError: <strong>init</strong>() got an unexpected keyword argument 'hmm' </p>
</blockquote>",python|linux,"<p>I paste my stt.py script on pastebin. <a href=""http://pastebin.com/Cy6ziGPk"" rel=""nofollow"">http://pastebin.com/Cy6ziGPk</a>
Because I could not manage this on this forum.</p>",0
240,39435481,How to generate numbers in range with specific average with Python?,"<p>For example I would like to generate 22 numbers between 20 and 46 with an average value of 27. And I would like the numbers to cover the range as well as possible.</p>

<p>EDIT:
These numbers don't need to be random.</p>",python|math,"<p>I used an iterative approach to continuously track the current avg and the target avg while generating the numbers. Every step is directed towards bringing the cur_avg towards the target while using the RNG/</p>

<pre><code>import random

def gen_target_avg(num, min, max, avg):
    numbers = []
    sum = 0
    cur_avg = max
    print ""Current avg is %f: %r"" % (cur_avg, numbers)
    for n in range(0, num):
        if avg &lt; cur_avg:
            n = random.randint(min, cur_avg)
            sum  += n
            numbers.append(n)
        elif avg &gt; cur_avg:
            n = random.randint(cur_avg, max)
            sum += n
            numbers.append(n)
        cur_avg = sum/len(numbers)
    print ""Final avg is %f: %r"" % (cur_avg, numbers)

&gt;&gt;&gt; gen_target_avg(100, 3, 150, 25)
Current avg is 150.000000: []
Final avg is 25.000000: [81, 47, 56, 58, 23, 27, 24, 3, 7, 11, 19, 15, 19, 11, 18, 14, 24, 20, 17, 3, 121, 16, 7, 24, 6, 14, 13]
&gt;&gt;&gt; gen_target_avg(100, 3, 150, 25)  
Current avg is 150.000000: []
Final avg is 25.000000: [56, 3, 14, 139, 10, 10, 11, 34, 22, 26, 31, 24, 16,   19, 11, 28, 28, 6, 25, 19, 25, 17, 21]
&gt;&gt;&gt; gen_target_avg(100, 3, 150, 30)
Current avg is 150.000000: []
Final avg is 30.000000: [143, 131, 38, 54, 34, 75, 31, 11, 63, 42, 38, 4, 22, 46, 27, 13, 6, 17, 14, 6, 21, 15, 3, 30, 15, 29, 28, 4, 32, 9, 17, 22, 10, 28, 11, 26]
</code></pre>",0
241,39435481,How to generate numbers in range with specific average with Python?,"<p>For example I would like to generate 22 numbers between 20 and 46 with an average value of 27. And I would like the numbers to cover the range as well as possible.</p>

<p>EDIT:
These numbers don't need to be random.</p>",python|math,"<p>You could sove this in a pure mathematical way. <br/></p>

<ol>
<li>Randomly pick a number (call it n) within the wanted range</li>
<li>The next number will be avg + abs(n-avg)</li>
<li>repeat this until you fill the amount of numbers you want</li>
</ol>

<p>if the amount of needed numbers is no even - just select one of the numbers as the average itself and then you will need to generate k-1 numbers (which is even)</p>

<p>** <strong>EDIT</strong> **<br/>
you can use this code that manipulates an initial list to meet the requirements of a average so the resulting list is not symmetrical. (Better than generating lists until you hit the correct one)</p>

<pre><code>import random


def generate_numbers(wanted_avg, numbers_to_generate, start, end):
    rng = [i for i in range(start, end)]
    initial_selection = [random.choice(rng) for _ in range(numbers_to_generate)]
    initial_avg = reduce(lambda x, y: x+y, initial_selection) / float(numbers_to_generate)
    print ""initial selection is: "" + str(initial_selection)
    print ""initial avg is: "" + str(initial_avg)
    if initial_avg == wanted_avg:
        return initial_selection
    off = abs(initial_avg - wanted_avg)
    manipulation = off * numbers_to_generate

    sign = -1 if initial_avg &gt; wanted_avg else 1

    manipulation_action = dict()
    acceptable_indices = range(numbers_to_generate)
    while manipulation &gt; 0:
        random_index = random.choice(acceptable_indices)
        factor = manipulation_action[random_index] if random_index in manipulation_action else 0
        after_manipulation = initial_selection[random_index] + factor + sign * 1
        if start &lt;= after_manipulation &lt;= end:
            if random_index in manipulation_action:
                manipulation_action[random_index] += sign * 1
                manipulation -= 1
            else:
                manipulation_action[random_index] = sign * 1
                manipulation -= 1
        else:
            acceptable_indices.remove(random_index)

    for key in manipulation_action:
        initial_selection[key] += manipulation_action[key]

    print ""after manipulation selection is: "" + str(initial_selection)
    print ""after manipulation avg is: "" + str(reduce(lambda x, y: x+y, initial_selection) / float(numbers_to_generate))
    return initial_selection
</code></pre>",3
242,39435481,How to generate numbers in range with specific average with Python?,"<p>For example I would like to generate 22 numbers between 20 and 46 with an average value of 27. And I would like the numbers to cover the range as well as possible.</p>

<p>EDIT:
These numbers don't need to be random.</p>",python|math,"<p>Here is a Python solution to this question.  This one has the following advantages:</p>

<ul>
<li>It does not use rejection sampling.</li>
<li>It chooses uniformly at random from among all combinations that meet the requirements.</li>
</ul>

<p>It's based on an algorithm by John McClane, which he posted as an <a href=""https://stackoverflow.com/a/61520472/815724"">answer to another question</a>.  I <a href=""https://stackoverflow.com/a/61525097/815724"">describe the algorithm</a> in another answer.</p>

<pre><code>import random # Or secrets

def permTable(nc, sum, mn, mx):
  t=[[0 for i in range(sum+1)] \
    for j in range(nc+1)]
  t[0][0]=1
  for i in range(1,nc+1):
    for j in range(0,sum+1):
      jm=max(j-(mx-mn), 0)
      v=0
      for k in range(jm, j+1): v+=t[i-1][k]
      t[i][j]=v
  return t

def getSol(nc, sum, mn, mx, table):
  s=sum-nc*mn
  ret=[0 for i in range(nc)]
  for ib in range(nc):
    i=nc-1-ib
    # Or 'secrets.randint(table[i+1][s])'
    v=random.randint(0, table[i+1][s]-1)
    r=mn
    v-=table[i][s]
    while v&gt;=0:
      v-=table[i][s-1]
      s-=1
      r+=1
    ret[i]=r
  return ret

def genAverage(numSamples, valuesPerSample, mn, mx, avg):
   sum = avg * valuesPerSample
   pt = permTable(valuesPerSample, sum, mn, mx)
   return [getSol(valuesPerSample, sum, mn, mx, pt) \
      for i in range(numSamples)]

# Print one sample
print(genAverage(1, 22, 20, 46, 27))
# Print 100 samples
print(genAverage(100, 22, 20, 46, 27))
</code></pre>",1
243,39435481,How to generate numbers in range with specific average with Python?,"<p>For example I would like to generate 22 numbers between 20 and 46 with an average value of 27. And I would like the numbers to cover the range as well as possible.</p>

<p>EDIT:
These numbers don't need to be random.</p>",python|math,"<p>So I also used the random number generator. In addition, in order to meet the specification to cover the range as well as possible, I also calculated the standard deviation, which is a good measure of spread. So whenever a sample set meets the criteria of mean of 27, I compared it to previous matches and constantly choose the samples that have the highest std dev (mean always = 27). SO in my script, I did 5 trials, and you can see the output that the final answer matches the samples_list that had highest std dev. Note that Python 3.4 or higher is needed to use statistics module. If you're using Python 2, then you can replace the stdev function with of your own (which you can easily find on Google or Stackoverflow)</p>

<pre><code>import random as rd
import statistics as st
min_val = 20
max_val = 46
sample_count = 22
expected_mean = 27
num_of_trials = 5

def get_samples_list(min_v, max_v, s_count, exp_mean):
    target_sum = sample_count * expected_mean
    samples_list = []
    curr_stdev_max = 0
    for trials in range(num_of_trials):
        samples = [0] * sample_count
        while sum(samples) != target_sum:
            samples = [rd.randint(min_v, max_v) for trial in range(s_count)]
        print (""Mean: "", st.mean(samples), ""Std Dev: "", st.stdev(samples), )
        print (samples, ""\n"")
        if st.stdev(samples) &gt; curr_stdev_max:
            curr_stdev_max = st.stdev(samples)
            samples_best = samples[:]
    return samples_best

samples_list = get_samples_list(min_val, max_val, sample_count, expected_mean)
print (""\nFinal list: "",samples_list)
samples_list.sort()
print (""\nSorted Final list: "",samples_list)
</code></pre>

<p>Here is the output:</p>

<pre><code>Mean:  27 Std Dev:  6.90755280213519
[34, 30, 39, 21, 23, 32, 22, 23, 22, 20, 27, 30, 29, 20, 32, 24, 42, 20, 39, 24, 20, 21] 

Mean:  27 Std Dev:  6.07100838882165
[21, 21, 34, 27, 35, 22, 29, 34, 24, 21, 20, 22, 20, 23, 26, 29, 28, 31, 30, 41, 21, 35] 

Mean:  27 Std Dev:  6.2105900340811875
[26, 27, 26, 26, 25, 42, 32, 23, 21, 34, 23, 20, 25, 25, 21, 27, 40, 21, 26, 26, 37, 21] 

Mean:  27 Std Dev:  8.366600265340756
[27, 22, 22, 44, 41, 21, 28, 36, 21, 23, 21, 25, 20, 20, 39, 46, 23, 25, 21, 23, 20, 26] 

Mean:  27 Std Dev:  6.347102826149446
[21, 30, 20, 41, 25, 23, 39, 26, 27, 20, 28, 23, 29, 24, 20, 40, 27, 27, 22, 25, 34, 23] 


Final list:  [27, 22, 22, 44, 41, 21, 28, 36, 21, 23, 21, 25, 20, 20, 39,
 46, 23, 25, 21, 23, 20, 26]

Sorted Final list:  [20, 20, 20, 21, 21, 21, 21, 22, 22, 23, 23, 23, 25, 25,
 26, 27, 28, 36, 39, 41, 44, 46]
&gt;&gt;&gt; 
</code></pre>",1
244,39435481,How to generate numbers in range with specific average with Python?,"<p>For example I would like to generate 22 numbers between 20 and 46 with an average value of 27. And I would like the numbers to cover the range as well as possible.</p>

<p>EDIT:
These numbers don't need to be random.</p>",python|math,"<p>Not optimal in terms of covering the range as much as possible, but you can try this:</p>

<pre><code>def GenerateArr(count,minimum,maximum,average):
    arr = []
    diff = 1
    while len(arr) &lt; count-1:
        if minimum &lt;= average-diff and average+diff &lt;= maximum:
            arr.append(average-diff)
            arr.append(average+diff)
            diff += 1
        else:
            arr.append(average)
            diff = 1
    if len(arr) &lt; count:
        arr.append(average)
    return arr

print GenerateArr(22,20,46,27)
</code></pre>",2
245,39435481,How to generate numbers in range with specific average with Python?,"<p>For example I would like to generate 22 numbers between 20 and 46 with an average value of 27. And I would like the numbers to cover the range as well as possible.</p>

<p>EDIT:
These numbers don't need to be random.</p>",python|math,"<p>Warning: this is not the optimal solution but it works quite fast with your input parameters:</p>

<pre><code>import random


def gen_avg(expected_avg=27, n=22, a=20, b=46):
    while True:
        l = [random.randint(a, b) for i in range(n)]
        avg = reduce(lambda x, y: x + y, l) / len(l)

        if avg == expected_avg:
            return l

for i in range(100):
    print gen_avg()
</code></pre>

<p>In my laptop will give 100 random sequences in ~2.5s:</p>

<pre><code>[21, 20, 20, 23, 25, 24, 29, 22, 42, 23, 31, 26, 30, 25, 29, 38, 20, 31, 46, 28, 41, 20]
[20, 30, 39, 26, 24, 31, 35, 36, 22, 22, 20, 32, 23, 21, 42, 32, 23, 24, 26, 28, 29, 25]
[23, 43, 21, 31, 44, 24, 24, 20, 27, 31, 28, 22, 26, 33, 25, 30, 21, 26, 33, 20, 31, 25]
[36, 28, 24, 29, 32, 21, 36, 28, 24, 27, 24, 22, 28, 28, 33, 21, 20, 32, 23, 30, 35, 21]
[21, 34, 25, 32, 20, 37, 31, 20, 46, 25, 21, 25, 35, 36, 21, 26, 21, 35, 24, 21, 30, 28]
[28, 23, 43, 22, 20, 23, 30, 41, 25, 32, 20, 21, 21, 30, 26, 22, 46, 40, 27, 26, 26, 21]
[21, 26, 38, 27, 42, 36, 43, 21, 29, 32, 22, 29, 26, 20, 23, 22, 21, 38, 23, 21, 21, 23]
[28, 21, 27, 34, 38, 21, 25, 37, 27, 22, 36, 38, 27, 20, 32, 35, 20, 24, 31, 22, 24, 24]
[28, 31, 23, 26, 36, 23, 30, 36, 32, 23, 20, 25, 23, 25, 25, 40, 21, 27, 21, 25, 28, 38]
[30, 24, 24, 25, 38, 27, 35, 31, 21, 31, 27, 22, 25, 25, 39, 31, 22, 23, 30, 29, 20, 23]
[25, 21, 42, 24, 24, 31, 22, 34, 32, 21, 23, 27, 20, 35, 31, 23, 26, 33, 20, 23, 22, 43]
[23, 23, 20, 40, 27, 22, 22, 41, 20, 21, 45, 26, 22, 28, 29, 39, 24, 23, 26, 34, 20, 38]
[22, 44, 27, 36, 29, 22, 24, 35, 30, 20, 20, 31, 38, 23, 20, 31, 25, 29, 30, 21, 24, 28]
[27, 30, 21, 28, 39, 30, 33, 33, 25, 21, 26, 33, 33, 24, 31, 20, 24, 25, 22, 27, 28, 20]
[23, 28, 24, 20, 35, 29, 33, 22, 23, 21, 31, 39, 32, 22, 24, 39, 22, 21, 29, 32, 34, 25]
[38, 25, 20, 22, 21, 44, 32, 20, 26, 20, 21, 29, 25, 20, 37, 27, 33, 23, 20, 39, 28, 27]
[29, 22, 30, 20, 31, 23, 23, 24, 28, 28, 46, 27, 24, 23, 21, 35, 20, 21, 45, 29, 27, 34]
[21, 29, 21, 33, 38, 44, 21, 20, 41, 30, 26, 23, 23, 29, 21, 32, 20, 29, 32, 29, 21, 26]
[21, 20, 24, 40, 30, 30, 31, 27, 20, 34, 28, 37, 31, 20, 38, 43, 25, 25, 21, 20, 27, 22]
[27, 35, 30, 21, 36, 37, 41, 21, 23, 24, 23, 32, 23, 25, 20, 23, 36, 40, 30, 24, 20, 24]
[39, 30, 30, 21, 26, 23, 20, 25, 36, 22, 23, 29, 23, 42, 20, 23, 32, 20, 30, 36, 25, 31]
[24, 24, 25, 41, 20, 27, 35, 31, 21, 24, 31, 36, 20, 25, 22, 32, 31, 30, 21, 22, 33, 25]
[22, 34, 33, 20, 29, 24, 34, 27, 27, 31, 20, 24, 22, 33, 36, 22, 21, 31, 21, 38, 21, 44]
[20, 43, 29, 23, 22, 32, 20, 21, 26, 23, 26, 33, 34, 22, 26, 20, 38, 21, 29, 32, 24, 33]
[23, 38, 39, 35, 21, 33, 25, 39, 33, 28, 23, 20, 22, 22, 25, 30, 20, 26, 28, 31, 24, 30]
[21, 36, 32, 42, 25, 25, 20, 46, 24, 22, 22, 22, 33, 32, 22, 29, 24, 26, 30, 23, 22, 21]
[25, 34, 20, 23, 44, 21, 40, 21, 25, 20, 26, 25, 44, 20, 24, 32, 21, 23, 31, 21, 43, 22]
[34, 31, 23, 20, 25, 30, 22, 23, 30, 22, 31, 21, 41, 42, 21, 22, 36, 20, 26, 24, 31, 32]
[27, 27, 35, 34, 31, 36, 21, 21, 24, 39, 22, 29, 29, 20, 20, 46, 23, 30, 27, 24, 28, 21]
[28, 37, 30, 31, 38, 23, 21, 20, 21, 32, 29, 24, 32, 20, 20, 21, 28, 20, 32, 41, 25, 40]
[27, 25, 24, 46, 23, 24, 26, 28, 30, 23, 23, 27, 38, 20, 44, 21, 27, 25, 20, 23, 26, 28]
[20, 28, 24, 33, 25, 22, 28, 27, 22, 27, 42, 25, 43, 27, 20, 26, 29, 33, 29, 24, 36, 23]
[39, 31, 27, 20, 23, 25, 22, 22, 24, 26, 25, 42, 21, 22, 21, 21, 28, 24, 44, 31, 35, 34]
[20, 20, 31, 30, 41, 30, 40, 20, 28, 20, 21, 25, 23, 30, 28, 25, 29, 21, 28, 28, 38, 24]
[35, 37, 30, 20, 24, 25, 36, 21, 23, 29, 25, 23, 21, 27, 22, 44, 41, 24, 33, 30, 22, 20]
[22, 22, 25, 20, 22, 29, 25, 25, 21, 33, 23, 20, 21, 42, 39, 32, 33, 30, 46, 34, 21, 22]
[26, 25, 27, 35, 30, 39, 20, 26, 43, 20, 29, 33, 23, 27, 35, 21, 20, 36, 24, 27, 21, 28]
[20, 30, 24, 31, 36, 23, 24, 46, 30, 28, 24, 25, 24, 22, 20, 33, 20, 21, 24, 23, 39, 27]
[20, 22, 33, 22, 33, 22, 38, 24, 29, 36, 23, 31, 26, 24, 28, 28, 26, 28, 43, 24, 25, 20]
[36, 26, 24, 24, 24, 33, 21, 28, 27, 29, 31, 31, 21, 27, 25, 24, 34, 20, 33, 37, 23, 30]
[25, 33, 24, 27, 30, 35, 25, 30, 23, 23, 20, 20, 28, 30, 29, 38, 25, 25, 32, 21, 25, 33]
[30, 21, 27, 33, 21, 43, 23, 23, 25, 29, 23, 38, 28, 24, 21, 44, 22, 31, 32, 21, 20, 27]
[21, 33, 26, 26, 33, 27, 26, 32, 41, 31, 25, 29, 33, 22, 26, 38, 24, 22, 21, 28, 21, 21]
[26, 28, 31, 20, 38, 20, 26, 23, 24, 24, 30, 21, 21, 33, 26, 33, 38, 28, 40, 24, 21, 26]
[21, 27, 30, 22, 24, 28, 38, 27, 20, 23, 41, 20, 26, 41, 26, 24, 29, 22, 20, 43, 21, 42]
[22, 28, 21, 25, 25, 46, 29, 27, 24, 34, 24, 27, 23, 23, 34, 21, 37, 26, 20, 44, 28, 24]
[32, 27, 21, 35, 28, 37, 21, 32, 23, 20, 21, 20, 31, 21, 32, 24, 35, 26, 42, 35, 22, 24]
[22, 36, 41, 35, 27, 20, 25, 21, 28, 32, 31, 30, 23, 26, 23, 26, 28, 33, 23, 35, 20, 23]
[28, 24, 27, 39, 37, 25, 21, 29, 36, 27, 24, 24, 26, 27, 37, 27, 28, 23, 27, 21, 22, 26]
[32, 33, 24, 31, 22, 35, 39, 20, 39, 39, 22, 21, 23, 28, 34, 23, 20, 21, 35, 24, 23, 22]
[25, 20, 20, 25, 28, 23, 37, 30, 34, 27, 22, 20, 41, 22, 22, 23, 42, 27, 39, 25, 22, 24]
[20, 36, 22, 21, 21, 38, 20, 45, 36, 28, 23, 23, 35, 26, 20, 30, 31, 28, 33, 22, 25, 31]
[30, 23, 21, 45, 20, 31, 35, 21, 22, 24, 29, 32, 34, 30, 23, 31, 20, 20, 31, 35, 29, 20]
[22, 21, 22, 32, 42, 24, 35, 22, 26, 21, 28, 23, 24, 21, 31, 20, 27, 39, 42, 21, 37, 33]
[26, 28, 24, 20, 42, 23, 22, 20, 22, 33, 24, 25, 24, 28, 38, 26, 44, 28, 31, 20, 28, 25]
[25, 42, 32, 20, 25, 20, 27, 22, 21, 20, 31, 28, 21, 31, 25, 25, 46, 28, 30, 41, 25, 20]
[20, 27, 28, 26, 34, 23, 20, 22, 34, 20, 36, 30, 21, 23, 26, 23, 31, 37, 23, 34, 40, 29]
[28, 30, 22, 21, 20, 35, 20, 24, 23, 24, 34, 33, 37, 34, 24, 21, 24, 21, 41, 32, 22, 30]
[21, 20, 21, 28, 24, 42, 36, 26, 29, 33, 26, 22, 33, 28, 26, 31, 20, 22, 29, 32, 27, 28]
[23, 41, 24, 39, 22, 23, 25, 21, 24, 35, 20, 27, 31, 43, 34, 29, 24, 22, 23, 21, 37, 21]
[20, 29, 32, 21, 27, 25, 32, 36, 24, 34, 33, 31, 25, 21, 29, 26, 21, 32, 23, 33, 20, 29]
[21, 32, 22, 26, 40, 40, 23, 28, 26, 25, 31, 21, 20, 37, 30, 30, 25, 35, 27, 24, 24, 21]
[25, 25, 27, 21, 27, 23, 20, 39, 20, 43, 29, 21, 38, 27, 30, 23, 24, 29, 20, 24, 36, 30]
[26, 20, 22, 25, 28, 22, 21, 29, 30, 37, 23, 39, 20, 34, 33, 23, 25, 30, 27, 41, 27, 26]
[29, 20, 32, 22, 26, 27, 21, 20, 27, 26, 22, 42, 28, 24, 26, 23, 40, 24, 27, 42, 23, 44]
[21, 38, 25, 26, 35, 28, 21, 40, 37, 28, 25, 23, 26, 22, 22, 21, 46, 29, 23, 23, 21, 32]
[39, 23, 20, 37, 26, 22, 30, 21, 25, 25, 32, 20, 39, 20, 33, 23, 24, 32, 38, 22, 33, 27]
[21, 21, 21, 20, 34, 20, 27, 36, 25, 20, 20, 26, 34, 40, 32, 32, 30, 22, 28, 29, 36, 35]
[37, 30, 23, 20, 21, 38, 26, 21, 41, 34, 33, 26, 36, 26, 25, 34, 34, 20, 24, 21, 20, 25]
[28, 24, 25, 29, 41, 24, 24, 29, 34, 37, 20, 29, 21, 30, 21, 28, 33, 20, 22, 43, 27, 20]
[35, 36, 20, 29, 26, 30, 26, 26, 34, 22, 24, 25, 21, 35, 34, 34, 25, 21, 23, 31, 24, 20]
[24, 25, 22, 22, 31, 28, 38, 42, 33, 24, 37, 27, 21, 42, 22, 28, 25, 20, 21, 25, 22, 29]
[26, 38, 33, 40, 22, 22, 21, 26, 29, 26, 23, 25, 35, 21, 27, 23, 35, 21, 43, 29, 20, 29]
[26, 31, 25, 20, 20, 21, 25, 25, 24, 28, 22, 30, 22, 22, 40, 37, 29, 46, 20, 38, 22, 24]
[24, 26, 23, 22, 34, 26, 30, 20, 24, 21, 32, 24, 24, 31, 31, 27, 28, 31, 32, 45, 25, 33]
[30, 32, 24, 27, 24, 21, 25, 22, 23, 39, 39, 22, 27, 23, 37, 23, 32, 23, 38, 21, 36, 22]
[27, 23, 22, 24, 28, 42, 26, 33, 28, 20, 20, 35, 22, 20, 31, 27, 34, 23, 32, 36, 23, 38]
[31, 35, 23, 28, 21, 28, 37, 20, 38, 34, 27, 20, 24, 27, 22, 26, 20, 29, 35, 31, 28, 21]
[28, 21, 33, 31, 24, 29, 20, 23, 25, 22, 28, 27, 30, 25, 29, 28, 26, 22, 38, 39, 30, 33]
[23, 36, 41, 26, 23, 29, 29, 45, 20, 23, 34, 21, 22, 39, 35, 24, 20, 24, 24, 25, 23, 28]
[25, 25, 21, 32, 44, 24, 32, 28, 33, 21, 22, 38, 32, 22, 25, 29, 22, 27, 29, 26, 26, 32]
[35, 28, 35, 24, 27, 34, 25, 30, 25, 42, 29, 26, 20, 36, 25, 25, 20, 20, 23, 21, 31, 34]
[44, 23, 20, 25, 24, 28, 20, 23, 38, 21, 24, 28, 35, 30, 20, 45, 23, 28, 39, 26, 23, 25]
[22, 25, 22, 45, 21, 22, 31, 37, 42, 28, 21, 24, 26, 25, 30, 25, 20, 36, 23, 25, 23, 29]
[32, 21, 28, 20, 20, 41, 25, 20, 46, 21, 38, 31, 25, 26, 21, 30, 20, 31, 39, 24, 22, 24]
[34, 24, 23, 26, 33, 20, 26, 26, 24, 20, 24, 25, 21, 29, 31, 30, 39, 34, 28, 27, 25, 41]
[26, 36, 20, 27, 23, 23, 20, 27, 32, 23, 24, 36, 34, 23, 24, 43, 25, 25, 33, 24, 31, 31]
[23, 21, 28, 20, 33, 46, 20, 43, 21, 24, 28, 21, 22, 34, 38, 25, 20, 20, 20, 25, 44, 32]
[30, 35, 26, 21, 28, 20, 21, 22, 24, 35, 23, 22, 21, 26, 24, 31, 41, 37, 27, 20, 43, 25]
[34, 42, 21, 20, 26, 21, 40, 20, 41, 21, 21, 23, 29, 22, 21, 26, 30, 25, 32, 29, 39, 27]
[31, 44, 40, 27, 22, 21, 44, 21, 30, 26, 20, 34, 22, 20, 20, 20, 29, 36, 22, 21, 22, 38]
[21, 43, 46, 28, 32, 22, 23, 21, 24, 21, 28, 21, 20, 33, 21, 24, 36, 22, 23, 28, 45, 32]
[21, 22, 24, 39, 21, 25, 25, 20, 23, 20, 22, 26, 40, 39, 22, 28, 41, 38, 20, 20, 33, 33]
[34, 22, 26, 23, 28, 20, 32, 25, 24, 20, 39, 28, 41, 24, 29, 32, 24, 33, 23, 34, 24, 23]
[22, 39, 36, 22, 24, 20, 28, 23, 30, 39, 23, 33, 37, 25, 27, 20, 23, 27, 34, 31, 25, 20]
[34, 20, 20, 22, 26, 21, 26, 40, 23, 20, 42, 23, 31, 25, 46, 31, 27, 28, 22, 31, 34, 23]
[24, 29, 39, 24, 39, 26, 25, 25, 29, 23, 27, 20, 46, 21, 27, 25, 20, 41, 24, 31, 25, 22]
[42, 25, 23, 30, 22, 23, 37, 20, 29, 32, 28, 22, 35, 36, 22, 20, 27, 39, 21, 20, 22, 32]
[24, 26, 37, 44, 26, 23, 21, 23, 34, 33, 36, 22, 22, 22, 21, 27, 35, 24, 22, 44, 21, 20]
[24, 27, 22, 30, 20, 27, 21, 24, 31, 22, 30, 33, 35, 24, 23, 20, 32, 28, 30, 44, 26, 29]
</code></pre>",6
246,39105342,Merging several csv files and storing the file names as a variable - Python,"<p>I am trying to append several csv files into a single csv file using python while adding the file name (or, even better, a sub-string of the file name) as a new variable. All files have headers. The following script does the trick of merging the files, but does not cover the file name as variable issue:</p>

<pre><code>import glob

filenames=glob.glob(""/filepath/*.csv"")

outputfile=open(""out.csv"",""a"")

for line in open(str(filenames[1])):
 outputfile.write(line)

for i in range(1,len(filenames)):
  f = open(str(filenames[i]))
  f.next() 
  for line in f:
     outputfile.write(line)

outputfile.close()
</code></pre>

<p>I was wondering if there are any good suggestions. I have about 25k small size csv files (less than 100KB each).</p>",python|csv,"<p>You can use Python's <code>csv</code> module to parse the CSV files for you, and to format the output.  Example code (untested):</p>

<pre><code>import csv

with open(output_filename, ""wb"") as outfile:
    writer = None
    for input_filename in filenames:
        with open(input_filename, ""rb"") as infile:
            reader = csv.DictReader(infile)
            if writer is None:
                field_names = [""Filename""] + reader.fieldnames
                writer = csv.DictWriter(outfile, field_names)
                writer.writeheader()
            for row in reader:
                row[""Filename""] = input_filename
                writer.writerow(row)
</code></pre>

<p>A few notes:</p>

<ul>
<li>Always use <code>with</code> to open files.  This makes sure they will get closed again when you are done with them.  Your code doesn't correctly close the input files.</li>
<li>CSV files should be opened in binary mode.</li>
<li>Indices start at 0 in Python.  Your code skips the first file, and includes the lines from the second file twice.  If you just want to iterate over a list, you don't need to bother with indices in Python.  Simply use <code>for x in my_list</code> instead.</li>
</ul>",0
247,39105342,Merging several csv files and storing the file names as a variable - Python,"<p>I am trying to append several csv files into a single csv file using python while adding the file name (or, even better, a sub-string of the file name) as a new variable. All files have headers. The following script does the trick of merging the files, but does not cover the file name as variable issue:</p>

<pre><code>import glob

filenames=glob.glob(""/filepath/*.csv"")

outputfile=open(""out.csv"",""a"")

for line in open(str(filenames[1])):
 outputfile.write(line)

for i in range(1,len(filenames)):
  f = open(str(filenames[i]))
  f.next() 
  for line in f:
     outputfile.write(line)

outputfile.close()
</code></pre>

<p>I was wondering if there are any good suggestions. I have about 25k small size csv files (less than 100KB each).</p>",python|csv,"<p>Simple changes will achieve what you want:
For the first line</p>

<pre><code>outputfile.write(line) -&gt; outputfile.write(line+',file')
</code></pre>

<p>and later</p>

<pre><code>outputfile.write(line+','+filenames[i])
</code></pre>",0
248,36754099,"Use iterrows in pandas to find mismatches between strings, bug","<p>I have the following pandas Dataframe in Python3.5:</p>

<pre><code>import pandas as pd
df = pd.Dataframe(...)
print(df)
</code></pre>

<p>which outputs</p>

<pre><code>string1        string2
'abcdefg...'   'abcSefg...'
'Iknowhow...'  'Eknowhow...'
'Thecatis...'  'Thekatis...'
...
</code></pre>

<p>I first wanted to find the location of mismatches between <code>string1</code> and <code>string2</code> and append this to the Dataframe <code>df</code>. I use this code:</p>

<pre><code>df[""different_positions""] = [[i for i in range(len(row.string2)) 
    if row.string1[i] != row.string2[i]] for _, row in df.iterrows()]
</code></pre>

<p>That will give me all the positions were mismatches occur. Now, I would like a separate column which outputs each letter of the mismatch. For example, in <code>string2</code>, there is an <code>S</code> instead of a <code>d</code> in the first row, an <code>E</code> instead of <code>I</code> in the second row, etc. </p>

<p>I thought the code would be </p>

<pre><code>df[""different_letters""] = [[i for i in row.string2
    if row.string1[i] != row.string2[i]] for _, row in df.iterrows()]
</code></pre>

<p>However, it appears this isn't correct. I get a <code>NameError</code> at <code>for _, row</code>, i.e. </p>

<pre><code>NameError: name 'i' is not defined
</code></pre>

<p>How do I output the mismatched letter to correspond to the mismatched position? </p>",python|python-3.x|pandas|dataframe|iteration,"<p>String iteration returns characters, not indices. In other words, <code>i for i in row.string2</code> will go through the <em>characters</em> of <code>row.string2</code>, not the corresponding indices.</p>

<p>So </p>

<pre><code>df[""different_letters""] = [[i for i in row.string2
if row.string1[i] != row.string2[i]] for _, row in df.iterrows()]
</code></pre>

<p>is incorrect because you're effectively asking what <code>row.string1['a']</code> is if <code>row.string1</code> contains an <code>a</code>. String indices <em>must</em> be integers.</p>

<p>Instead, you want to do</p>

<pre><code>df[""different_letters""] = [[j for i, j in enumerate(row.string2)
if row.string1[i] != row.string2[i]] for _, row in df.iterrows()]
</code></pre>

<p><code>enumerate</code> lets you iterate through both the index <em>and</em> the corresponding element in an iterable. Here, <code>j</code> is the corresponding character, <code>i</code> is its index, and you can now compare by index but only return the corresponding character. </p>",1
249,37068723,extracting data from .txt file using python,"<p>I have a txt file which contains the following information</p>

<pre><code>03/05/2016 3020 04/05/2016 1605 05/05/2016 2015 06/05/2016 1014 07/05/2016 558 08/05/2016 509 09/05/2016 1510 10/05/2016 1010
</code></pre>

<p>I want to extract this data form this txt file and store it in an variable in python..
How can i achieve this...
I am using pyth</p>",python|python-2.7,"<pre><code>f = open('filepath', 'r+')

text = txt.read()

print text
</code></pre>

<p>where 'r+' opens the file for both reading and writing.</p>",0
250,37068723,extracting data from .txt file using python,"<p>I have a txt file which contains the following information</p>

<pre><code>03/05/2016 3020 04/05/2016 1605 05/05/2016 2015 06/05/2016 1014 07/05/2016 558 08/05/2016 509 09/05/2016 1510 10/05/2016 1010
</code></pre>

<p>I want to extract this data form this txt file and store it in an variable in python..
How can i achieve this...
I am using pyth</p>",python|python-2.7,"<pre><code>f=open('myfile.txt','r')

myvar=f.read()
</code></pre>

<p>That gives you all the text but it also returns text formating characters like new line,tab etc. </p>

<p>To avoid new lines do </p>

<pre><code>myvar=''.join(f.read().split('\n'))
</code></pre>",0
251,26665766,How can I use csv module to replace empty value in column with the value from the row above it?,"<p>I am working with the CSV module in python and I am trying to trying to fill in blank values in one specific column with the value from the previous row
I can do this in excel but I want to run this program on a cronjob so i'm trying to figure out how to do it in python</p>

<p>for example</p>

<p>{{AAA, BBB, CCC} , {DDD,    , EEE} , {FFF, GGG, HHH} , {III,    , JJJ} , {KKK,    all, LLL}, {MMM, NNN, OOO}} </p>

<p>should become </p>

<p>{{AAA, BBB, CCC} , {DDD, BBB, EEE} , {FFF, GGG, HHH} , {III, GGG, JJJ} , {KKK, GGG, LLL}, {MMM, NNN, OOO}} </p>

<p>thanks for any help or suggestions</p>",python|csv|replace,"<p>I think you can do this by saving the previous row in a variable, and using its values to replace any strings that are empty in the succeeding row:</p>

<pre><code>with open(in_filename, newline="""") as f_in, open(out_filename, ""w"", newline="""") as f_out:
    reader = csv.reader(f_in)    # setup code
    writer = csv.writer(f_out)

    row = next(reader)           # handle first line (with no replacements)
    writer.writerow(row)
    last_row = row               # always save the last row of data that we've written

    for row in reader:           # loop over the rest of the lines
        row = [x if x else y for x, y in zip(row, last_row)]  # replace empty strings
        writer.writerow(row)
        last_row = row
</code></pre>

<p>This code assumes that you want to keep using the same previous value if there are blank items in several successive rows in the same column (not only replace the first). If there are blank values in the first row, they will not be replaced.</p>

<p>I'm also using one of Python 3 new parameters to <code>open</code> to get <code>csv</code> module compatible file objects. If you're using Python 2 you'll need to open the files a bit differently. If that is that case, open both files in binary mode (modes <code>""rb""</code> and <code>""wb""</code>) and get rid of the <code>newline</code> keyword parameters.</p>

<p>You may also need to pass in parameters <code>csv.reader</code> and <code>csv.writer</code> to describe your specific CSV dialect (e.g. delimiter, quote style, etc.) if the defaults don't work for your file.</p>",1
252,26479826,angle between three points,"<p>I am trying to get the angle between three points on a plane using this formula:</p>

<pre><code>cos-1((P122 + P132 - P232)/(2 * P12 * P13))
</code></pre>

<p>but occasionally I am getting a math domain exception. here is the function:</p>

<pre><code>P12 = math.sqrt((x1-x2)**2 + (y1-y2)**2)
P13 = math.sqrt((x1-x3)**2 + (y1-y3)**2)
P23 = math.sqrt((x2-x3)**2 + (y2-y3)**2)

if P12 ==0 or P23 ==0 or P13 ==0 :
    return 0
return math.acos((P12**2 + P13**2 - P23**2) / (2*P12*P13) )
</code></pre>

<p>where P1 is the vertex
what could be going wrong here?</p>

<p>Thanks</p>",python|geometry,"<p>You will sometimes get this error when the points are co-linear (or possibly very close to co-linear)</p>

<p>eg </p>

<pre><code>(-1,-1),(1,1),(100,100)
</code></pre>

<p>gives </p>

<pre><code>P12 = 140.007142675 
P13 = 2.82842712475
P23 = 142.8355698
</code></pre>

<p>and</p>

<pre><code>&gt;&gt;&gt; (P12**2 + P13**2 - P23**2) / (2*P12*P13)
-1.0000000000901725
</code></pre>

<p>It's due to floating point errors and you'll end up passing a number slightly larger than <code>1</code> or slightly smaller than <code>-1</code> to <code>acos</code></p>",2
253,26630245,testing python multiprocessing: low speed because of overhead?,"<p>I'm trying to learn about <code>multiprocessing</code> in python (2.7). My CPU has 4 cores. In the following code I test speed of parallel Vs serial execution of the same basic instruction. </p>

<p>I find that the time taken using the 4 cores is only 0.67 the one taken by only one core, while naively I'd expect ~0.25. </p>

<p>Is overhead the reason? where does it come from? Are not the 4 processes independent?</p>

<p>I also tried <code>pool.map</code> and <code>pool.map_async</code>, with very similar results in terms of speed.</p>

<pre><code>from multiprocessing import Process
import time

def my_process(a):
    for i in range(0,a[1]):
        j=0
        while j&lt;10000:
            j = j+1
    print(a,j)

if __name__ == '__main__':
    # arguments to pass:
    a = ((0,2000),(1,2000),(2,2000),(3,2000))

    # --- 1) parallel processes:
    # 4 cores go up to 100% each here
    t0 = time.time()
    proc1 = Process(target=my_process, args=(a[0],))
    proc2 = Process(target=my_process, args=(a[1],))
    proc3 = Process(target=my_process, args=(a[2],))
    proc4 = Process(target=my_process, args=(a[3],))
    proc1.start(); proc2.start(); proc3.start(); proc4.start()
    proc1.join() ; proc2.join() ; proc3.join() ; proc4.join()
    dt_parallel = time.time()-t0
    print(""parallel : "" + str(dt_parallel))

    # --- 2) serial process :
    # 1 core only goes up to 100%
    t0 = time.time()
    for k in a:
        my_process(k)
    dt_serial = time.time()-t0
    print(""serial : "" + str(dt_serial))

    print(""t_par / t_ser = "" + str(dt_parallel/dt_serial))
</code></pre>

<p><strong>EDIT</strong> my PC has actually 2 physical cores (2 = 2 cores per socket * 1 sockets, from <code>lscpu</code> [thanks @goncalopp]). If I run the above script with only the first 2 processes I get a ratio of 0.62, not that different to the one obtained with 3 or 4 processes. I guess it won't be easy to go faster than that.</p>

<p>I tested on another PC with <code>lscpu</code>: CPU(s):32, Thread(s) per core: 2, core(s) per socket: 8, Socket(s): 2, and I get a ratio of 0.34, similar to @dano.</p>

<p>Thanks for your help</p>",python|performance|multiprocessing,"<p>Yes, this <em>may</em> be related to overhead, including:</p>

<ul>
<li>Creating and starting the processes</li>
<li>passing the function and the arguments over to them</li>
<li>waiting for process termination</li>
</ul>

<p>If you truly have 4 physical cores on your machine (and not 2 cores with hyperthreading or similar), you should see that the ratio becomes closer to what is expected for larger inputs, as chepner said. If you only have 2 physical cores, you can't get ratio &lt; 0.5</p>",3
254,26603204,How to extract 7z zip file in Python 2.7.3 version,"<p>How to extract 7z zip file in python .Please some one let me know is there any library for that.</p>

<p>I have install libarchive library in python 2.7.3 version . But i am not able to use that library.</p>",python|extract|7zip,"<p>I use command like <code>C:\Program Files\7-Zip\7z.exe x &lt;filename&gt;</code> in my C++ project. You can run it in Python like so:</p>

<pre><code>import subprocess
subprocess.call(r'""C:\Program Files\7-Zip\7z.exe"" x ' + archive_name + ' -o' + folder_name_to_extract)
</code></pre>

<p>or 32-bit version:</p>

<pre><code>subprocess.call(r'""C:\Program Files (x86)\7-Zip\7z.exe"" x ' + archive_name + ' -o' + folder_name_to_extract)
</code></pre>",3
255,26603204,How to extract 7z zip file in Python 2.7.3 version,"<p>How to extract 7z zip file in python .Please some one let me know is there any library for that.</p>

<p>I have install libarchive library in python 2.7.3 version . But i am not able to use that library.</p>",python|extract|7zip,"<p>This worked for me in Windows.  The string you want to shoot for is something like this: </p>

<pre class=""lang-none prettyprint-override""><code>C:/Egain_ETL/7-Zip/7z.exe e ""C:/Egain_ETL/EG_DATA_EXTRACT_2017-11-25 09-45-10-627.7z"" -p""Dev@123"" -o""C:/Egain_ETL/""
</code></pre>

<p>Notice the call to the exe and options are unquoted, everything else is double quoted.   </p>

<p><strong>Sample Code</strong>:</p>

<pre><code>import subprocess

Z_Location = 'C:/Egain_ETL/7-Zip/7z.exe'
Extract_File = 'C:/Egain_ETL/EG_DATA_EXTRACT_2017-11-25 09-45-10-627.7z'
Extract_PW = 'Dev@123'
Extact_Folder = 'C:/Egain_ETL/'

Extract_Target = Z_Location + ' e ' + '""' + Extract_File + '""' + ' -p' + '""' + Extract_PW + '""' + ' -o' + '""' + Extact_Folder + '""'

subprocess.run(Extract_Target)
</code></pre>",0
256,26603204,How to extract 7z zip file in Python 2.7.3 version,"<p>How to extract 7z zip file in python .Please some one let me know is there any library for that.</p>

<p>I have install libarchive library in python 2.7.3 version . But i am not able to use that library.</p>",python|extract|7zip,"<p><code>!apt-get install p7zip-full
!p7zip -d file_name.tar.7z
</code></p>

<p>Try the above steps </p>",-2
257,26603204,How to extract 7z zip file in Python 2.7.3 version,"<p>How to extract 7z zip file in python .Please some one let me know is there any library for that.</p>

<p>I have install libarchive library in python 2.7.3 version . But i am not able to use that library.</p>",python|extract|7zip,"<p>According to the <a href=""https://docs.python.org/3.6/library/subprocess.html"" rel=""nofollow noreferrer"">Python doc (about the subprocess)</a>, you might rather to use the recommanded function <strong>run</strong> (such as in this exemple).</p>

<pre><code>from subprocess import run
run('C:\\Program Files\\7-Zip\\7zG.exe x'+ archive_name + ' -o' + folder_name_to_extract)`
</code></pre>

<p><strong>PS0 :</strong> One adivce, don't forget to escape the chars in the full path; it's could help a lot specially under Windows. Otherwise the OS couldn't find 7zip (or another program).</p>

<p><strong>PS1 :</strong> Apparently, the comments are difficult to wrote... The display wasn't the same (like group all the text just in only one line) and via the touch enter, the post will be publish (unfinished). The system from stackoverflow.com is wrong because I wanted to just add a few lines and not publish it. And also because no, on the moment, I wasn't finish to write (this post).</p>",1
258,26603204,How to extract 7z zip file in Python 2.7.3 version,"<p>How to extract 7z zip file in python .Please some one let me know is there any library for that.</p>

<p>I have install libarchive library in python 2.7.3 version . But i am not able to use that library.</p>",python|extract|7zip,<p>You can use <code>PyLZMA</code> and <code>py7zlib</code> libraries to extract <code>7z</code> file or try executing shell scripts to extract zip file using python <code>subprocess</code> module.</p>,4
259,26840413,Insert a custom object in a sorted list,"<p>I implemented an object with a numerical attribute. I want to keep a list of those objects sorted according to that attribute, without need to run a sort method at each insertion. I took a look to bisect module, but I do not know if I can use it also with an object.
What is the best way to do that?</p>",python|object|sortedlist,"<p>You may provide a custom implementation of list that override the insert method that make a binary insertion. hose the time to insert an element come from O(1) to O(log2(n)) where n is the number of element in the list.</p>

<p>You may also use an already implemented implementation such as sorted containers [<a href=""http://www.grantjenks.com/docs/sortedcontainers/]"" rel=""nofollow"">http://www.grantjenks.com/docs/sortedcontainers/]</a>.</p>

<p>Anyway, whatever solution you use, you MUST implement comparators methods on your objects ( greater than (<code>__gt__</code>) and lesser than (<code>__lt__</code>) ) that use this numerical attribute to define an order on your objects. Without order, there is no sorting possible.</p>

<p>Here an example :</p>

<pre><code>from sortedcontainers import SortedList

class OrderedObject():

    def __init__(self, id, value):
        self.id = id
        self.value = value

    def __gt__(self, other):
        if not isinstance(other,OrderedObject):
            raise Exception(""OrderedObject are only comparable to OrderedObject, not to {0}"".format(type(other)))
        else:
            return self.value.__gt__(other.value)

    def __lt__(self, other):
        if not isinstance(other,OrderedObject):
            raise Exception(""OrderedObject are only comparable to OrderedObject, not to {0}"".format(type(other)))
        else:
            return self.value.__lt__(other.value)

    def __repr__(self):
        return ""&lt;OrderedObject({0}, {1})&gt;"".format(self.id, self.value)

if __name__ == ""__main__"":
    a = OrderedObject('foo', 1)
    b = OrderedObject('bar', 2)
    c = OrderedObject('-*-', 3)

    mylist = [b,c,a]
    print(mylist)
    mylist.sort()
    print(mylist)

    mylist = SortedList()
    mylist.add(b)
    mylist.add(c)
    mylist.add(a)
    print(mylist)
</code></pre>

<p>This give the following results :</p>

<pre><code>[&lt;OrderedObject(bar, 2)&gt;, &lt;OrderedObject(-*-, 3)&gt;, &lt;OrderedObject(foo, 1)&gt;]
[&lt;OrderedObject(foo, 1)&gt;, &lt;OrderedObject(bar, 2)&gt;, &lt;OrderedObject(-*-, 3)&gt;]
SortedList([&lt;OrderedObject(foo, 1)&gt;, &lt;OrderedObject(bar, 2)&gt;, &lt;OrderedObject(-*-, 3)&gt;])
</code></pre>

<p>NB : I'm not affiliated to sorted container library in any way</p>",3
260,26840413,Insert a custom object in a sorted list,"<p>I implemented an object with a numerical attribute. I want to keep a list of those objects sorted according to that attribute, without need to run a sort method at each insertion. I took a look to bisect module, but I do not know if I can use it also with an object.
What is the best way to do that?</p>",python|object|sortedlist,"<p>You can do this for your custom object if you implement the <a href=""https://docs.python.org/2/reference/datamodel.html#object.__lt__"" rel=""noreferrer""><code>__lt__</code></a> method, because <a href=""https://hg.python.org/cpython/file/2.7/Lib/bisect.py"" rel=""noreferrer"">this is what bisect will use</a> to compare your object.</p>

<pre><code>&gt;&gt;&gt; class Foo(object):
...     def __init__(self, val):
...         self.prop = val # The value to compare
...     def __lt__(self, other):
...         return self.prop &lt; other.prop
...     def __repr__(self):
...         return 'Foo({})'.format(self.prop)
...
&gt;&gt;&gt; sorted_foos = sorted([Foo(7), Foo(1), Foo(3), Foo(9)])
&gt;&gt;&gt; sorted_foos
[Foo(1), Foo(3), Foo(7), Foo(9)]
&gt;&gt;&gt; bisect.insort_left(sorted_foos, Foo(2))
&gt;&gt;&gt; sorted_foos
[Foo(1), Foo(2), Foo(3), Foo(7), Foo(9)]
</code></pre>",20
261,26840413,Insert a custom object in a sorted list,"<p>I implemented an object with a numerical attribute. I want to keep a list of those objects sorted according to that attribute, without need to run a sort method at each insertion. I took a look to bisect module, but I do not know if I can use it also with an object.
What is the best way to do that?</p>",python|object|sortedlist,"<p>bisect doesn't support keys; read this: <a href=""http://bugs.python.org/issue4356"" rel=""nofollow"">http://bugs.python.org/issue4356</a> and they don't plan to support that either for performance reasons. But I think it should work if you use <code>__gt__</code>, <code>__lt__</code> etc.</p>",1
262,26840413,Insert a custom object in a sorted list,"<p>I implemented an object with a numerical attribute. I want to keep a list of those objects sorted according to that attribute, without need to run a sort method at each insertion. I took a look to bisect module, but I do not know if I can use it also with an object.
What is the best way to do that?</p>",python|object|sortedlist,"<p>You can decrease amount of sorts by:</p>

<ul>
<li>Introducing special variable that will show you if your list is sorted AND</li>
<li>Sort list when you need to get data from it if your special variable tells you that your list has been modified.</li>
</ul>

<p>Modification for your special variable should be performed on inserting new data.</p>",0
263,26726503,read file and see if number in lst are in numerical order,"<p><strong>the question asked to me:</strong></p>

<p>In the book All Creatures of Mythology, gnomes are kind, bearded creatures, while goblins tend to be bossy and simple-minded. The goblins like to harass the gnomes by making them line up in groups of three, ordered by the length of their beards. The gnomes, being of different physical heights, vary their arrangements to confuse the goblins. Therefore, the goblins must actually measure the beards in centimeters to see if everyone is lined up in order.
Your task is to write a function to assist the goblins in determining whether or not the gnomes are lined up properly, either from shortest to longest beard or from longest to shortest. The input will come from the file gnome.txt which starts with a line containing a single integer N, 0 &lt; N &lt; 30, which is the number of groups to process. Following this are N lines, each containing three distinct positive integers less than 100. For each group, a line saying ""Ordered"" or ""Unordered"" should be printed:
Usage: </p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>gnome()
      Ordered
      Unordered
      Ordered</p>
    </blockquote>
  </blockquote>
</blockquote>

<p><strong>The inside of gnome.txt</strong></p>

<p>3</p>

<p>40 62 77</p>

<p>88 62 77</p>

<p>91 33 18</p>

<p><strong>my code so far</strong></p>

<pre><code>def gnome():
    infile = open('gnome.txt')
    firstline = infile.readline()
    for i in range (int(firstline)):
        gnomeList = infile.readline().split()
        intlist = []
        for str in gnomeList:
            intlist.append(int(str))
            if intlist[i] &gt; intlist[i + 1]:
                print ('Unordered')

        else:
            print ('ordered')
</code></pre>

<p><strong>errors im getting</strong></p>

<p>File ""C:/Users/cjakob/Desktop/homework6.py"", line 34, in gnome
    if intlist[i] > intlist[i + 1]:
IndexError: list index out of range</p>

<p><strong>thank you all very much I have been working on this for hours</strong></p>",python,"<p>Other approach:</p>

<pre><code>f = open('gnome.txt').readlines()[1:]
def check(a):
        if sorted(a) == a:
            return True
for x in f:
    x=x.split()
    if check(x) == True:
        print "" "".join(x),""Ordered""
    else:print "" "".join(x),""Unordered""
</code></pre>

<p>output:</p>

<pre><code>40 62 77 Ordered
88 62 77 Unordered
91 33 18 Unordered
</code></pre>

<p>In the above code i have a <code>check</code> function that takes the list,if <code>list == sorted(list)</code>,it will return True, indicating Ordered.<br>
For Big files dont use <code>readlines</code></p>",0
264,26726503,read file and see if number in lst are in numerical order,"<p><strong>the question asked to me:</strong></p>

<p>In the book All Creatures of Mythology, gnomes are kind, bearded creatures, while goblins tend to be bossy and simple-minded. The goblins like to harass the gnomes by making them line up in groups of three, ordered by the length of their beards. The gnomes, being of different physical heights, vary their arrangements to confuse the goblins. Therefore, the goblins must actually measure the beards in centimeters to see if everyone is lined up in order.
Your task is to write a function to assist the goblins in determining whether or not the gnomes are lined up properly, either from shortest to longest beard or from longest to shortest. The input will come from the file gnome.txt which starts with a line containing a single integer N, 0 &lt; N &lt; 30, which is the number of groups to process. Following this are N lines, each containing three distinct positive integers less than 100. For each group, a line saying ""Ordered"" or ""Unordered"" should be printed:
Usage: </p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>gnome()
      Ordered
      Unordered
      Ordered</p>
    </blockquote>
  </blockquote>
</blockquote>

<p><strong>The inside of gnome.txt</strong></p>

<p>3</p>

<p>40 62 77</p>

<p>88 62 77</p>

<p>91 33 18</p>

<p><strong>my code so far</strong></p>

<pre><code>def gnome():
    infile = open('gnome.txt')
    firstline = infile.readline()
    for i in range (int(firstline)):
        gnomeList = infile.readline().split()
        intlist = []
        for str in gnomeList:
            intlist.append(int(str))
            if intlist[i] &gt; intlist[i + 1]:
                print ('Unordered')

        else:
            print ('ordered')
</code></pre>

<p><strong>errors im getting</strong></p>

<p>File ""C:/Users/cjakob/Desktop/homework6.py"", line 34, in gnome
    if intlist[i] > intlist[i + 1]:
IndexError: list index out of range</p>

<p><strong>thank you all very much I have been working on this for hours</strong></p>",python,"<p>You are confusing what your indices mean. Your index <code>i</code> represents the number of <strong>sets</strong> of three gnomes that you will need to process, not the number of gnomes in each set. </p>

<p>Since you are looking to check whether the most recently added value is greater than the one added two ago, you could just change your if statement to <code>if intlist[-2] &gt; intlist[-1]:</code>. This negative index represents in Python the element n counting back from the end of the list.
Note though that then you will need to make sure you aren't doing this when there is only one element in the list or it will throw an exception because <code>intlist[-2]</code> will not exist!</p>

<p>Enjoy Python :)</p>",0
265,26726503,read file and see if number in lst are in numerical order,"<p><strong>the question asked to me:</strong></p>

<p>In the book All Creatures of Mythology, gnomes are kind, bearded creatures, while goblins tend to be bossy and simple-minded. The goblins like to harass the gnomes by making them line up in groups of three, ordered by the length of their beards. The gnomes, being of different physical heights, vary their arrangements to confuse the goblins. Therefore, the goblins must actually measure the beards in centimeters to see if everyone is lined up in order.
Your task is to write a function to assist the goblins in determining whether or not the gnomes are lined up properly, either from shortest to longest beard or from longest to shortest. The input will come from the file gnome.txt which starts with a line containing a single integer N, 0 &lt; N &lt; 30, which is the number of groups to process. Following this are N lines, each containing three distinct positive integers less than 100. For each group, a line saying ""Ordered"" or ""Unordered"" should be printed:
Usage: </p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>gnome()
      Ordered
      Unordered
      Ordered</p>
    </blockquote>
  </blockquote>
</blockquote>

<p><strong>The inside of gnome.txt</strong></p>

<p>3</p>

<p>40 62 77</p>

<p>88 62 77</p>

<p>91 33 18</p>

<p><strong>my code so far</strong></p>

<pre><code>def gnome():
    infile = open('gnome.txt')
    firstline = infile.readline()
    for i in range (int(firstline)):
        gnomeList = infile.readline().split()
        intlist = []
        for str in gnomeList:
            intlist.append(int(str))
            if intlist[i] &gt; intlist[i + 1]:
                print ('Unordered')

        else:
            print ('ordered')
</code></pre>

<p><strong>errors im getting</strong></p>

<p>File ""C:/Users/cjakob/Desktop/homework6.py"", line 34, in gnome
    if intlist[i] > intlist[i + 1]:
IndexError: list index out of range</p>

<p><strong>thank you all very much I have been working on this for hours</strong></p>",python,"<pre><code>def gnome(gnome_list):
    return gnome_list == sorted(gnome_list) or gnome_list == sorted(gnome_list, reverse=True)


if __name__ == '__main__':
    with open('gnome.txt', 'r') as f:
        for line in f:
            if gnome(line.split()):
                print('Ordered')
            else:
                print('Unordered')
</code></pre>

<p>This will compare the list to sorted versions (both ascending and descending) of itself and return the Boolean result. </p>",0
266,26636394,Python multi-threaded processing with limited CPU/ports,"<p>I have a dictionary of folder names that I would like to process in <strong>parallel</strong>. Under each folder, there is an array of file names that I would like to process in <strong>series</strong>:</p>

<pre><code>folder_file_dict = {
         folder_name : {
                         file_names_key : [file_names_array]
                       }
        }
</code></pre>

<p>Ultimately, I will be creating a folder named <code>folder_name</code> which contains the files with names <code>len(folder_file_dict[folder_name][file_names_key])</code>. I have a method like so:</p>

<pre><code>def process_files_in_series(file_names_array, udp_port):
    for file_name in file_names_array:
         time_consuming_method(file_name, udp_port)
         # create ""file_name""

udp_ports = [123, 456, 789]
</code></pre>

<p>Note the <code>time_consuming_method()</code> above, which takes a long time due to calls over a UDP port. I am also limited to using the UDP ports in the array above. Thus, I have to wait for <code>time_consuming_method</code> to complete on a UDP port before I can use that UDP port again. This means that I can only have <code>len(udp_ports)</code> threads running at a time.</p>

<p>Thus, I will ultimately create <code>len(folder_file_dict.keys())</code> threads, with <code>len(folder_file_dict.keys())</code> calls to <code>process_files_in_series</code>. I also have a MAX_THREAD count. I am trying to use the <code>Queue</code> and <code>Threading</code> modules, but I am not sure what kind of design I need. How can I do this using Queues and Threads, and possibly Conditions as well? A solution that uses a thread pool may also be helpful.</p>

<p><strong>NOTE</strong></p>

<p>I am not trying to increase the read/write speed. I am trying to parallelize the calls to <code>time_consuming_method</code> under <code>process_files_in_series</code>. Creating these files is just part of the process, but not the rate limiting step.</p>

<p>Also, I am looking for a solution that uses <code>Queue</code>, <code>Threading</code>, and possible <code>Condition</code> modules, or anything relevant to those modules. A threadpool solution may also be helpful. I cannot use processes, only threads. </p>

<p>I am also looking for a solution in Python 2.7.</p>",python|multithreading|python-2.7|parallel-processing,"<p>Use the <code>multiprocessing.pool.ThreadPool</code>. It handles queue / thread management for you and can be easily changed to do multiprocessing instead. </p>

<p><strong>EDIT:</strong> Added example</p>

<p>Here's an example... multiple threads may end up using the same udp port. I'm not sure if that's a problem for you.</p>

<pre><code>import multithreading
import multithreading.pool
import itertools

def process_files_in_series(file_names_array, udp_port):
    for file_name in file_names_array:
         time_consuming_method(file_name, udp_port)
         # create ""file_name""

udp_ports = [123, 456, 789]

folder_file_dict = {
         folder_name : {
                         file_names_key : [file_names_array]
                       }
        }

def main(folder_file_dict, udp_ports):
    # number of threads - here I'm limiting to the smaller of udp_ports,
    # file lists to process and a cap I arbitrarily set to 4
    num_threads = min(len(folder_file_dict), len(udp_ports), 4)
    # the pool
    pool = multithreading.pool.ThreadPool(num_threads)
    # build files to be processed into list. You may want to do other
    # Things like join folder_name...
    file_arrays = [value['file_names_key'] for value in folder_file_dict.values()]
    # do the work
    pool.map(process_files_in_series, zip(file_arrays, itertools.cycle(udp_ports))
    pool.close()
    pool.join()
</code></pre>",0
267,26636394,Python multi-threaded processing with limited CPU/ports,"<p>I have a dictionary of folder names that I would like to process in <strong>parallel</strong>. Under each folder, there is an array of file names that I would like to process in <strong>series</strong>:</p>

<pre><code>folder_file_dict = {
         folder_name : {
                         file_names_key : [file_names_array]
                       }
        }
</code></pre>

<p>Ultimately, I will be creating a folder named <code>folder_name</code> which contains the files with names <code>len(folder_file_dict[folder_name][file_names_key])</code>. I have a method like so:</p>

<pre><code>def process_files_in_series(file_names_array, udp_port):
    for file_name in file_names_array:
         time_consuming_method(file_name, udp_port)
         # create ""file_name""

udp_ports = [123, 456, 789]
</code></pre>

<p>Note the <code>time_consuming_method()</code> above, which takes a long time due to calls over a UDP port. I am also limited to using the UDP ports in the array above. Thus, I have to wait for <code>time_consuming_method</code> to complete on a UDP port before I can use that UDP port again. This means that I can only have <code>len(udp_ports)</code> threads running at a time.</p>

<p>Thus, I will ultimately create <code>len(folder_file_dict.keys())</code> threads, with <code>len(folder_file_dict.keys())</code> calls to <code>process_files_in_series</code>. I also have a MAX_THREAD count. I am trying to use the <code>Queue</code> and <code>Threading</code> modules, but I am not sure what kind of design I need. How can I do this using Queues and Threads, and possibly Conditions as well? A solution that uses a thread pool may also be helpful.</p>

<p><strong>NOTE</strong></p>

<p>I am not trying to increase the read/write speed. I am trying to parallelize the calls to <code>time_consuming_method</code> under <code>process_files_in_series</code>. Creating these files is just part of the process, but not the rate limiting step.</p>

<p>Also, I am looking for a solution that uses <code>Queue</code>, <code>Threading</code>, and possible <code>Condition</code> modules, or anything relevant to those modules. A threadpool solution may also be helpful. I cannot use processes, only threads. </p>

<p>I am also looking for a solution in Python 2.7.</p>",python|multithreading|python-2.7|parallel-processing,"<p>Using a thread pool:</p>

<pre><code>#!/usr/bin/env python2
from multiprocessing.dummy import Pool, Queue # thread pool

folder_file_dict = {
    folder_name: {
        file_names_key: file_names_array
    }
}

def process_files_in_series(file_names_array, udp_port):
    for file_name in file_names_array:
         time_consuming_method(file_name, udp_port)
         # create ""file_name""
         ...

def mp_process(filenames):
    udp_port = free_udp_ports.get() # block until a free udp port is available
    args = filenames, udp_port
    try:
        return args, process_files_in_series(*args), None
    except Exception as e:
        return args, None, str(e)
    finally:
        free_udp_ports.put_nowait(udp_port)

free_udp_ports = Queue() # in general, use initializer to pass it to children
for port in udp_ports:
    free_udp_ports.put_nowait(port)
pool = Pool(number_of_concurrent_jobs) #
for args, result, error in pool.imap_unordered(mp_process, get_files_arrays()):
    if error is not None:
       print args, error
</code></pre>

<p>I don't think you need to bind number of threads to number of udp ports if the processing time may differ for different filenames arrays.</p>

<p>If I understand the structure of <code>folder_file_dict</code> correctly then to generate the filenames arrays:</p>

<pre><code>def get_files_arrays(folder_file_dict=folder_file_dict):
    for folder_name_dict in folder_file_dict.itervalues():
        for filenames_array in folder_name_dict.itervalues():
            yield filenames_array
</code></pre>",1
268,26636394,Python multi-threaded processing with limited CPU/ports,"<p>I have a dictionary of folder names that I would like to process in <strong>parallel</strong>. Under each folder, there is an array of file names that I would like to process in <strong>series</strong>:</p>

<pre><code>folder_file_dict = {
         folder_name : {
                         file_names_key : [file_names_array]
                       }
        }
</code></pre>

<p>Ultimately, I will be creating a folder named <code>folder_name</code> which contains the files with names <code>len(folder_file_dict[folder_name][file_names_key])</code>. I have a method like so:</p>

<pre><code>def process_files_in_series(file_names_array, udp_port):
    for file_name in file_names_array:
         time_consuming_method(file_name, udp_port)
         # create ""file_name""

udp_ports = [123, 456, 789]
</code></pre>

<p>Note the <code>time_consuming_method()</code> above, which takes a long time due to calls over a UDP port. I am also limited to using the UDP ports in the array above. Thus, I have to wait for <code>time_consuming_method</code> to complete on a UDP port before I can use that UDP port again. This means that I can only have <code>len(udp_ports)</code> threads running at a time.</p>

<p>Thus, I will ultimately create <code>len(folder_file_dict.keys())</code> threads, with <code>len(folder_file_dict.keys())</code> calls to <code>process_files_in_series</code>. I also have a MAX_THREAD count. I am trying to use the <code>Queue</code> and <code>Threading</code> modules, but I am not sure what kind of design I need. How can I do this using Queues and Threads, and possibly Conditions as well? A solution that uses a thread pool may also be helpful.</p>

<p><strong>NOTE</strong></p>

<p>I am not trying to increase the read/write speed. I am trying to parallelize the calls to <code>time_consuming_method</code> under <code>process_files_in_series</code>. Creating these files is just part of the process, but not the rate limiting step.</p>

<p>Also, I am looking for a solution that uses <code>Queue</code>, <code>Threading</code>, and possible <code>Condition</code> modules, or anything relevant to those modules. A threadpool solution may also be helpful. I cannot use processes, only threads. </p>

<p>I am also looking for a solution in Python 2.7.</p>",python|multithreading|python-2.7|parallel-processing,"<p>This is kind of a blue print to how you could use multiprocessing.Process
with JoinableQueue 's to deliver Jobs to Workers. You will 
still be bound by I/O but with Process you do have <strong>true concurrency</strong>,
which may prove to be useful, since threading may even be slower than
a normal script processing the files.</p>

<p>(Be aware that this will also prevent you from doing anything else with your Laptop
if you dare to start too many processes at once :P).</p>

<p>I tried to explain the code
as much as possible with comments. </p>

<pre><code>import traceback

from multiprocessing import Process, JoinableQueue, cpu_count

# Number if CPU's on your PC
cpus = cpu_count()

# The Worker Function. Could also be modelled as a class
def Worker(q_jobs):
    while True:
        # Try / Catch / finally may be necessary for error-prone tasks since the processes 
        # may hang forever if the task_done() method is not called.
        try:
            # Get an item from the Queue
            item = q_jobs.get()

            # At this point the data should somehow be processed

        except:
            traceback.print_exc()
        else:
            pass

        finally:
            # Inform the Queue that the Task has been done
            # Without this. The processes can not be killed
            # and will be left as Zombies afterwards
            q_jobs.task_done()


# A Joinable Queue to end the process
q_jobs = JoinableQueue()

# Create process depending on the number of CPU's
for i in range(cpus):

    # target function and arguments
    # a list of multiple arguments should not end with ',' e.g.
    # (q_jobs, 'bla')
    p = Process(target=Worker,
                args=(q_jobs,)
                )
    p.daemon = True
    p.start()

# fill Queue with Jobs
q_jobs.put(['Do'])
q_jobs.put(['Something'])

# End Process
q_jobs.join()
</code></pre>

<p>Cheers</p>

<p><strong>EDIT</strong></p>

<p>I wrote this with Python 3 in mind.
Taking the parenthesis from the print function</p>

<pre><code>print item
</code></pre>

<p>should make this work for 2.7.</p>",0
269,23435723,Installing IPython Notebook table of contents,"<p>I'd like to install the extension to generate automatic table of contents using header cells.</p>

<p>however, when I copy/paste </p>

<pre><code>curl -L https://rawgithub.com/minrk/ipython_extensions/master/nbextensions/toc.js &gt; $(ipython locate)/nbextensions/toc.js
</code></pre>

<p>into terminal, it says directory not found. The extension in question can be found <a href=""https://github.com/minrk/ipython_extensions"" rel=""nofollow"">here</a>.</p>",python|ipython|ipython-notebook,"<p>I did the following and it worked for me using Ubuntu:</p>

<pre><code>1. git clone https://github.com/minrk/ipython_extensions.git

2. ln -s $(pwd)/extensions $(ipython locate)/extensions
   ln -s $(pwd)/nbextensions $(ipython locate)/nbextensions

3. curl -L https://rawgithub.com/minrk/ipython_extensions/master/nbextensions/gist.js &gt; $(ipython locate)/nbextensions/gist.js

4. I use ubuntu so I  used the text editor from bash like so   gedit $(ipython locate profile)/static/custom/custom.js. 

5. I appended ""IPython.load_extensions('gist');"" to the bottom of  custom.js and saved the file.
</code></pre>

<p>If you want to install the Retina Figures extension follow the rest of the instructions <a href=""https://github.com/minrk/ipython_extensions/blob/master/README.md"" rel=""nofollow"">here</a></p>

<p>If you do are using Windows there is a tutorial <a href=""http://www.howtogeek.com/howto/16226/complete-guide-to-symbolic-links-symlinks-on-windows-or-linux/"" rel=""nofollow"">here</a> that shows both how to create sym links in Windows and Linux.</p>

<p>If you do not have git installed then download the zip file with this <a href=""https://github.com/minrk/ipython_extensions/archive/master.zip"" rel=""nofollow"">link</a></p>",1
270,23435723,Installing IPython Notebook table of contents,"<p>I'd like to install the extension to generate automatic table of contents using header cells.</p>

<p>however, when I copy/paste </p>

<pre><code>curl -L https://rawgithub.com/minrk/ipython_extensions/master/nbextensions/toc.js &gt; $(ipython locate)/nbextensions/toc.js
</code></pre>

<p>into terminal, it says directory not found. The extension in question can be found <a href=""https://github.com/minrk/ipython_extensions"" rel=""nofollow"">here</a>.</p>",python|ipython|ipython-notebook,"<p>Install <a href=""https://github.com/ipython-contrib/jupyter_contrib_nbextensions"" rel=""nofollow noreferrer"">jupyter_contrib_nbextensions</a> by entering the following commands at the shell</p>
<pre><code>pip install --user jupyter_contrib_nbextensions
jupyter contrib nbextension install --user
</code></pre>
<p>Activate the table of content extension:</p>
<pre><code>jupyter nbextension enable toc2/main
</code></pre>
<p>There are many other extensions available in this package.
Optionally you can install the jupyter notebook extension configurator (not needed)</p>
<pre><code>pip install --user jupyter_nbextensions_configurator
jupyter nbextensions_configurator enable --user
</code></pre>
<p>This will make a configurator available at:</p>
<pre><code>http://localhost:8888/nbextensions
</code></pre>",2
271,23435723,Installing IPython Notebook table of contents,"<p>I'd like to install the extension to generate automatic table of contents using header cells.</p>

<p>however, when I copy/paste </p>

<pre><code>curl -L https://rawgithub.com/minrk/ipython_extensions/master/nbextensions/toc.js &gt; $(ipython locate)/nbextensions/toc.js
</code></pre>

<p>into terminal, it says directory not found. The extension in question can be found <a href=""https://github.com/minrk/ipython_extensions"" rel=""nofollow"">here</a>.</p>",python|ipython|ipython-notebook,"<p>Cloning the repo and creating the sum links did not work for me. </p>

<p>While using ipython 1.1, I had to do the following:</p>

<ol>
<li>Download the jquery-2.0.2.min.map, from <a href=""https://github.com/davidfowl/SignalR.Lite/blob/master/SignalR.Lite/Scripts/jquery-2.0.2.min.map"" rel=""nofollow"">this link</a> and copy it to $HOME/.ipython/profile_default/static/components/jquery/</li>
<li>Create sym link to nbextensions in the $HOME/.ipython/profile_default/static/<br>
ln -s ../../nbextensions nbextensions</li>
</ol>

<p>The extension expects the section headings to be in separate cells. So, if one has a markdown cell with a few headings &amp; sub-headings, it will not be recognised.</p>

<p>For ipython 2.2, you need to also download the min map files of backbone &amp; underscore also.</p>",0
272,23435723,Installing IPython Notebook table of contents,"<p>I'd like to install the extension to generate automatic table of contents using header cells.</p>

<p>however, when I copy/paste </p>

<pre><code>curl -L https://rawgithub.com/minrk/ipython_extensions/master/nbextensions/toc.js &gt; $(ipython locate)/nbextensions/toc.js
</code></pre>

<p>into terminal, it says directory not found. The extension in question can be found <a href=""https://github.com/minrk/ipython_extensions"" rel=""nofollow"">here</a>.</p>",python|ipython|ipython-notebook,"<p><a href=""https://github.com/ahambi/140824-TOC/tree/master"" rel=""nofollow"">This IPython Notebook</a> semi-automatically generates the files for minrk's table of contents in Windows (I guess one only needs to change </p>

<pre><code>%%cmd- to %%bash magics 
</code></pre>

<p>to make it work in Linux). It does not use the 'curl'-commands or links, but writes the *.js and *.css files directly into your IPython Notebook-profile-directory.</p>

<p>There is a section in the notebook called <strong>'What you need to do'</strong> - follow it and have a nice floating table of contents : ) </p>

<p>Here is an html version which already shows it: 
<a href=""http://htmlpreview.github.io/?https://github.com/ahambi/140824-TOC/blob/master/A%20floating%20table%20of%20contents.htm"" rel=""nofollow"">http://htmlpreview.github.io/?https://github.com/ahambi/140824-TOC/blob/master/A%20floating%20table%20of%20contents.htm</a> </p>",0
273,5236855,Securely storing account balances in a database?,"<p>So I have a Django web application and I need to add a payment module to it.</p>

<p>Basically a user will prepay for a certain amount of service and this will slowly reduce over as the user uses the service. I'm wondering what is the best practice to facilitate this? I can process payments using Satchmo, but then just storing the USD value in a database and having my code interacting with that value directly seems kind of risky. Sure I can do that but I am wondering if there is a well tested solution to this problem out there already?</p>",python|database|django|web-applications,"<p>My language agnostic recommendation would be to make sure that the database that communicates with the web app is read only; at least for the table(s) that deal with these account balances. So, you process payments, and manage the reduction of account balances in a database that is not accessible to anyone other than you (i.e. not connected to the internet, or this web app). You can periodically take snapshots of that database and update the one that interacts with the webapp, so your users have a read copy of their balance. This way, even if a user is able to modify the data to increase their balance by a million bucks, you know that you have their true balance in a separate location. Basically, you'd never have to trust the data on the webapp side - it would be purely informational for your users. </p>",1
274,5236855,Securely storing account balances in a database?,"<p>So I have a Django web application and I need to add a payment module to it.</p>

<p>Basically a user will prepay for a certain amount of service and this will slowly reduce over as the user uses the service. I'm wondering what is the best practice to facilitate this? I can process payments using Satchmo, but then just storing the USD value in a database and having my code interacting with that value directly seems kind of risky. Sure I can do that but I am wondering if there is a well tested solution to this problem out there already?</p>",python|database|django|web-applications,"<p>I don't know about a ""well-tested solution"" as you put it, but I would strongly caution against just storing a dollar value in the database and increasing or decreasing that dollar value.  Instead, I would advise storing transactions that can be audited if anything goes wrong.  Calculate the amount available from the credit and debit transactions in the user account rather than storing it directly.</p>

<p>For extra safety, you would want to ensure that your application cannot delete any transaction records.  If you cannot deny write permissions on the relevant tables for some reason, try replicating the transactions to a second database (that the application does not touch) as they are created.</p>",6
275,5238953,problem compiling libjingle,"<p>I downloaded and installed libjingle-0.5.2.zip, and according to the README also downloaded and installed swtoolkit.0.9.1.zip, scons-local-2.1.0.alpha.20101125.tar.gz, and expat-2.0.1.tar.gz, and got nrtp by cvs download. After overwriting my Makefile twice, attempting to follow the rather poorly-written README, I came up with the following Makefile that almost works:</p>

<pre><code>
# First, make sure the SCONS_DIR environment variable is set correctly.
SCONS_DIR ?= /usr/src/scons-local/scons-local-2.1.0.alpha.20101125/
#SCONS_DIR ?= /usr/src/scons-local/
export
default: build
# Second, run talk/third_party/expat-2.0.1/configure...
talk/third_party/expat-2.0.1/Makefile:
    cd talk/third_party/expat-2.0.1 && ./configure
# ...and talk/third_party/srtp/configure.
talk/third_party/srtp/Makefile:
    cd talk/third_party/srtp && ./configure
# Third, go to the talk/ directory and run $path_to_swtoolkit/hammer.sh. Run
# $path_to_swtoolkit/hammer.sh --help for information on how to build for
# different modes.
build: talk/third_party/expat-2.0.1/Makefile talk/third_party/srtp/Makefile
    cd talk && ../../swtoolkit/hammer.sh
help:
    ../swtoolkit/hammer.sh --help
</code></pre>

<p>However, <code>make</code> gives me the following errors:</p>

<pre>
jcomeau@intrepid:/usr/src/libjingle-0.5.2$ make
cd talk && ../../swtoolkit/hammer.sh
*** Error loading site_init file './../../swtoolkit/site_scons/site_init.py':
AttributeError: 'Dir' object has no attribute 'endswith':
  File ""/usr/src/scons-local/scons-local-2.1.0.alpha.20101125/SCons/Script/Main.py"", line 1338:
    _exec_main(parser, values)
  File ""/usr/src/scons-local/scons-local-2.1.0.alpha.20101125/SCons/Script/Main.py"", line 1302:
    _main(parser)
  File ""/usr/src/scons-local/scons-local-2.1.0.alpha.20101125/SCons/Script/Main.py"", line 929:
    _load_site_scons_dir(d.path, options.site_dir)
  File ""/usr/src/scons-local/scons-local-2.1.0.alpha.20101125/SCons/Script/Main.py"", line 719:
    exec fp in site_m
  File ""./../../swtoolkit/site_scons/site_init.py"", line 455:
    SiteInitMain()
  File ""./../../swtoolkit/site_scons/site_init.py"", line 451:
    SCons.Node.FS.get_default_fs().SConstruct_dir, None)
  File ""/usr/src/scons-local/scons-local-2.1.0.alpha.20101125/SCons/Script/Main.py"", line 677:
    site_dir = os.path.join(topdir, site_dir_name)
  File ""/usr/lib/python2.6/posixpath.py"", line 67:
    elif path == '' or path.endswith('/'):
make: *** [build] Error 2
</pre>

<p>I'm guessing that something new (a 'Dir' object being where a POSIX path string is expected) in one of the packages is breaking the build process, but which one? There are just too many layers of cruft here for me to follow. For sure I could just keep trying older packages, particularly for swtoolkit and scons, but if anyone here has successfully compiled libjingle and could prod me in the right direction, I'd appreciate it.</p>",python|google-code|libjingle,"<p>I'm not familiar with the project, but think I have a fix to get you past that point.  You need to cast those <code>Dir</code> instances using <code>str()</code> in swtoolkit/site_scons/site_init.py. That way they can safely be evaluated by <code>path.endswith('/')</code>.  Odd that such an issue would exist for very long in the main part of the build infrastructure:</p>

<p>Line 330:</p>

<pre><code>SCons.Script.Main._load_site_scons_dir(
    str(SCons.Node.FS.get_default_fs().SConstruct_dir), site_dir)
</code></pre>

<p>Line 450:</p>

<pre><code>SCons.Script.Main._load_site_scons_dir(
    str(SCons.Node.FS.get_default_fs().SConstruct_dir), None)
</code></pre>",24
276,5238953,problem compiling libjingle,"<p>I downloaded and installed libjingle-0.5.2.zip, and according to the README also downloaded and installed swtoolkit.0.9.1.zip, scons-local-2.1.0.alpha.20101125.tar.gz, and expat-2.0.1.tar.gz, and got nrtp by cvs download. After overwriting my Makefile twice, attempting to follow the rather poorly-written README, I came up with the following Makefile that almost works:</p>

<pre><code>
# First, make sure the SCONS_DIR environment variable is set correctly.
SCONS_DIR ?= /usr/src/scons-local/scons-local-2.1.0.alpha.20101125/
#SCONS_DIR ?= /usr/src/scons-local/
export
default: build
# Second, run talk/third_party/expat-2.0.1/configure...
talk/third_party/expat-2.0.1/Makefile:
    cd talk/third_party/expat-2.0.1 && ./configure
# ...and talk/third_party/srtp/configure.
talk/third_party/srtp/Makefile:
    cd talk/third_party/srtp && ./configure
# Third, go to the talk/ directory and run $path_to_swtoolkit/hammer.sh. Run
# $path_to_swtoolkit/hammer.sh --help for information on how to build for
# different modes.
build: talk/third_party/expat-2.0.1/Makefile talk/third_party/srtp/Makefile
    cd talk && ../../swtoolkit/hammer.sh
help:
    ../swtoolkit/hammer.sh --help
</code></pre>

<p>However, <code>make</code> gives me the following errors:</p>

<pre>
jcomeau@intrepid:/usr/src/libjingle-0.5.2$ make
cd talk && ../../swtoolkit/hammer.sh
*** Error loading site_init file './../../swtoolkit/site_scons/site_init.py':
AttributeError: 'Dir' object has no attribute 'endswith':
  File ""/usr/src/scons-local/scons-local-2.1.0.alpha.20101125/SCons/Script/Main.py"", line 1338:
    _exec_main(parser, values)
  File ""/usr/src/scons-local/scons-local-2.1.0.alpha.20101125/SCons/Script/Main.py"", line 1302:
    _main(parser)
  File ""/usr/src/scons-local/scons-local-2.1.0.alpha.20101125/SCons/Script/Main.py"", line 929:
    _load_site_scons_dir(d.path, options.site_dir)
  File ""/usr/src/scons-local/scons-local-2.1.0.alpha.20101125/SCons/Script/Main.py"", line 719:
    exec fp in site_m
  File ""./../../swtoolkit/site_scons/site_init.py"", line 455:
    SiteInitMain()
  File ""./../../swtoolkit/site_scons/site_init.py"", line 451:
    SCons.Node.FS.get_default_fs().SConstruct_dir, None)
  File ""/usr/src/scons-local/scons-local-2.1.0.alpha.20101125/SCons/Script/Main.py"", line 677:
    site_dir = os.path.join(topdir, site_dir_name)
  File ""/usr/lib/python2.6/posixpath.py"", line 67:
    elif path == '' or path.endswith('/'):
make: *** [build] Error 2
</pre>

<p>I'm guessing that something new (a 'Dir' object being where a POSIX path string is expected) in one of the packages is breaking the build process, but which one? There are just too many layers of cruft here for me to follow. For sure I could just keep trying older packages, particularly for swtoolkit and scons, but if anyone here has successfully compiled libjingle and could prod me in the right direction, I'd appreciate it.</p>",python|google-code|libjingle,"<p>I did following to build libjingle :</p>

<h2>Building LibJingle for Linux</h2>

<ol>
<li>How to Build</li>
</ol>

<p>Libjingle is built with swtoolkit ( <a href=""http://code.google.com/p/swtoolkit/"" rel=""nofollow"">http://code.google.com/p/swtoolkit/</a>), which
is a set of extensions to the open-source SCons build tool ( <a href=""http://www.scons.org"" rel=""nofollow"">http://www.scons.org</a>).</p>

<ul>
<li><p>First, install Python 2.4 or later from <a href=""http://www.python.org/"" rel=""nofollow"">http://www.python.org/</a>.
Please note that since swtoolkit only works with Python 2.x, you will
not be able to use Python 3.x.</p></li>
<li><p>Second, install the stand alone scons-local package 2.0.0 or later from
<a href=""http://www.scons.org/download.php"" rel=""nofollow"">http://www.scons.org/download.php</a> and set an environment variable,
<code>SCONS_DIR</code>, to point to the directory containing SCons, for example,
<code>/src/libjingle/scons-local/scons-local-2.0.0.final.0/</code>.</p></li>
<li><p>Third, install swtoolkit from <a href=""http://code.google.com/p/swtoolkit/"" rel=""nofollow"">http://code.google.com/p/swtoolkit/</a>.</p></li>
<li><p>Finally, Libjingle depends on two open-source projects, expat and srtp.
Download expat from <a href=""http://sourceforge.net/projects/expat/"" rel=""nofollow"">http://sourceforge.net/projects/expat/</a> to
talk/third_party/expat-2.0.1/. Follow the instructions at
<a href=""http://sourceforge.net/projects/srtp/develop"" rel=""nofollow"">http://sourceforge.net/projects/srtp/develop</a> to download latest srtp to
talk/third_party/srtp. Note that <code>srtp-1.4.4</code> does not work since it misses
the extensions used by Libjingle.
If you put expat or srtp in a different directory, you need to edit
<code>talk/libjingle.scons</code> correspondingly.</p></li>
</ul>

<p>2.1 Build Libjingle under Linux or OS X</p>

<ul>
<li>First, make sure the <code>SCONS_DIR</code> environment variable is set correctly.</li>
<li>Second, run <code>talk/third_party/expat-2.0.1/configure</code> and
<code>talk/third_party/srtp/configure</code>.</li>
<li>Third, go to the talk/ directory and run <code>$path_to_swtoolkit/hammer.sh</code>. Run
<code>$path_to_swtoolkit/hammer.sh --help</code> for information on how to build for
different modes.</li>
</ul>

<h1>Other than above given steps, See following as reference</h1>

<h3>Set SCONS_DIR Path</h3>

<pre><code>export SCONS_DIR=/home/esumit/libjingle/libjingle-0.5.2/talk/third_party/scons-local/scons-local-2.0.1
</code></pre>

<p>Install <code>libasound2-dev</code> Lib to compile libJingle, otherwise you will encounter errors.</p>

<pre><code>sudo apt-get install libasound2-dev
</code></pre>

<p>Download SRTP using the following command. If it asks for a passowrd, just hit Enter.</p>

<pre><code>cvs -z3 -d:pserver:anonymous@srtp.cvs.sourceforge.net:/cvsroot/srtp co -P srtp
</code></pre>

<h3>Possible components in LibJingle Directory</h3>

<pre><code>libjingle-0.5.2/talk/third_party$ ls
expat-2.0.1  libudev  scons-local  srtp  swtoolkit
</code></pre>

<h3>Execute following command to build LibJingle</h3>

<pre><code>libjingle-0.5.2/talk$ ./third_party/swtoolkit/hammer.sh
</code></pre>",3
277,5158781,I'm running 32-bit Windows on an x86-64 PC. Should I download the 32-bit or 64-bit Python installer?,"<p>I have an Intel T9550 64-bit processor with 32-bit Windows Vista. I want to install Python 2.7.1 onto my PC. From the python.org website, which installer should I use:</p>

<ul>
<li>""Python 2.7.1 Windows Installer""?</li>
<li>or ""Python 2.7.1 Windows X86-64 Installer""?</li>
</ul>

<p>The latter one is for x86-64. I don't understand if this bit refers to the processor or the OS.</p>",python|installation|download|32bit-64bit,"<p>Even though you have a 64-bit processor, your OS is of a 32-bit flavour. The Windows installer for Python targets the OS it is built on, not just the processor. Since your OS is 32-bit, you can only install the regular 32-bit Python 2.7.1 Windows installer.</p>

<p>Note that you can install both 32-bit (under a 32-bit emulation) and x86-64 flavours of Python installer had you have Windows 64-bit on your machine.</p>",3
278,5158781,I'm running 32-bit Windows on an x86-64 PC. Should I download the 32-bit or 64-bit Python installer?,"<p>I have an Intel T9550 64-bit processor with 32-bit Windows Vista. I want to install Python 2.7.1 onto my PC. From the python.org website, which installer should I use:</p>

<ul>
<li>""Python 2.7.1 Windows Installer""?</li>
<li>or ""Python 2.7.1 Windows X86-64 Installer""?</li>
</ul>

<p>The latter one is for x86-64. I don't understand if this bit refers to the processor or the OS.</p>",python|installation|download|32bit-64bit,"<p><img src=""https://i.stack.imgur.com/j5KUX.png"" alt=""enter image description here""></p>",6
279,5158781,I'm running 32-bit Windows on an x86-64 PC. Should I download the 32-bit or 64-bit Python installer?,"<p>I have an Intel T9550 64-bit processor with 32-bit Windows Vista. I want to install Python 2.7.1 onto my PC. From the python.org website, which installer should I use:</p>

<ul>
<li>""Python 2.7.1 Windows Installer""?</li>
<li>or ""Python 2.7.1 Windows X86-64 Installer""?</li>
</ul>

<p>The latter one is for x86-64. I don't understand if this bit refers to the processor or the OS.</p>",python|installation|download|32bit-64bit,"<p>The first of the two Windows installers on the <a href=""http://www.python.org/download/"" rel=""nofollow"">download page</a> are for 32-bit versions of the operating system.</p>

<p>The Windows <em>AMD64</em> / <em>Intel 64</em> / <em>X86-64</em> description refers to 64-bit versions of Windows.</p>

<p>Luckily, an installer for the other 64 bit version of windows - <em>IA64</em>,  or <em>Itanium</em> - 
is no longer available on the download page. See for example <a href=""http://www.python.org/download/releases/2.5.4/"" rel=""nofollow"">2.5.4 downloads</a>:
""`For <em>Win64-Itanium</em> users: python-2.5.4.ia64.msi""</p>",1
280,5074177,Python code behaving differently between IDLE and Eclipse,"<p>I'm completely new to programming, so I decided to teach myself python. While going through <a href=""http://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_3"" rel=""nofollow"">the Non-Programmer's Tutorial for Python 3</a>, I stumbled across a strange occurrence. When I run this code:</p>

<pre><code>def print_options():
    print('Options:')
    print("" 'p' print options"")
    print("" 'c' convert from Celsius"")
    print("" 'f' convert from Fahrenheit"")
    print("" 'q' quit"")

def c_to_f(c_temp):
    return 9.0/5.0 * c_temp + 32

def f_to_c(f_temp):
    return (f_temp-32)*5.0/9.0

choice = 'p'

while choice != 'q':
    if choice == 'c':
        temp = float(input('Celsius temp: '))
        print('Fahrenheit:', c_to_f(temp))
    elif choice == 'f':
        temp = float(input('Fahrenheit temp:'))
        print('Celsius:', f_to_c(temp))
    elif choice == 'p':
        print_options()
    choice = input('Options: ')
</code></pre>

<p>The resulting output is what you'd expect:</p>

<pre><code>Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: f
Fahrenheit temp:98.6
Celsius: 37.0
Options: c
Celsius temp: 37
Fahrenheit: 98.60000000000001
Options: q
</code></pre>

<p>But when I run the same code on Eclipse (IDLE was crashing so I tried something else), the program just loops instead of going into the other options:</p>

<pre><code>Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: c
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: f
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: q
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: 
</code></pre>

<p>Is there something wrong in the code itself to cause this or is it just some wonky interaction? Any help would be greatly appreciated.</p>",eclipse|python-3.x|pydev,"<p>If you run python in your terminal you will find it to be more accurate. In fact, I use eclipse and run everything in python launcher.</p>",0
281,5074177,Python code behaving differently between IDLE and Eclipse,"<p>I'm completely new to programming, so I decided to teach myself python. While going through <a href=""http://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_3"" rel=""nofollow"">the Non-Programmer's Tutorial for Python 3</a>, I stumbled across a strange occurrence. When I run this code:</p>

<pre><code>def print_options():
    print('Options:')
    print("" 'p' print options"")
    print("" 'c' convert from Celsius"")
    print("" 'f' convert from Fahrenheit"")
    print("" 'q' quit"")

def c_to_f(c_temp):
    return 9.0/5.0 * c_temp + 32

def f_to_c(f_temp):
    return (f_temp-32)*5.0/9.0

choice = 'p'

while choice != 'q':
    if choice == 'c':
        temp = float(input('Celsius temp: '))
        print('Fahrenheit:', c_to_f(temp))
    elif choice == 'f':
        temp = float(input('Fahrenheit temp:'))
        print('Celsius:', f_to_c(temp))
    elif choice == 'p':
        print_options()
    choice = input('Options: ')
</code></pre>

<p>The resulting output is what you'd expect:</p>

<pre><code>Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: f
Fahrenheit temp:98.6
Celsius: 37.0
Options: c
Celsius temp: 37
Fahrenheit: 98.60000000000001
Options: q
</code></pre>

<p>But when I run the same code on Eclipse (IDLE was crashing so I tried something else), the program just loops instead of going into the other options:</p>

<pre><code>Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: c
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: f
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: q
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: 
</code></pre>

<p>Is there something wrong in the code itself to cause this or is it just some wonky interaction? Any help would be greatly appreciated.</p>",eclipse|python-3.x|pydev,<p>The program looks ok in my opinion. Perhaps there is a bug with how Eclipse handle input. Are you using the latest version of PyDev? I suggest you try another IDE (like PyCharm).</p>,0
282,5074177,Python code behaving differently between IDLE and Eclipse,"<p>I'm completely new to programming, so I decided to teach myself python. While going through <a href=""http://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_3"" rel=""nofollow"">the Non-Programmer's Tutorial for Python 3</a>, I stumbled across a strange occurrence. When I run this code:</p>

<pre><code>def print_options():
    print('Options:')
    print("" 'p' print options"")
    print("" 'c' convert from Celsius"")
    print("" 'f' convert from Fahrenheit"")
    print("" 'q' quit"")

def c_to_f(c_temp):
    return 9.0/5.0 * c_temp + 32

def f_to_c(f_temp):
    return (f_temp-32)*5.0/9.0

choice = 'p'

while choice != 'q':
    if choice == 'c':
        temp = float(input('Celsius temp: '))
        print('Fahrenheit:', c_to_f(temp))
    elif choice == 'f':
        temp = float(input('Fahrenheit temp:'))
        print('Celsius:', f_to_c(temp))
    elif choice == 'p':
        print_options()
    choice = input('Options: ')
</code></pre>

<p>The resulting output is what you'd expect:</p>

<pre><code>Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: f
Fahrenheit temp:98.6
Celsius: 37.0
Options: c
Celsius temp: 37
Fahrenheit: 98.60000000000001
Options: q
</code></pre>

<p>But when I run the same code on Eclipse (IDLE was crashing so I tried something else), the program just loops instead of going into the other options:</p>

<pre><code>Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: c
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: f
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: q
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: 
</code></pre>

<p>Is there something wrong in the code itself to cause this or is it just some wonky interaction? Any help would be greatly appreciated.</p>",eclipse|python-3.x|pydev,"<p>I`ve tried to run your code in IDLE and all is ok, in eclipse too. Try to reinstall last version of PyDev</p>",0
283,5074177,Python code behaving differently between IDLE and Eclipse,"<p>I'm completely new to programming, so I decided to teach myself python. While going through <a href=""http://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_3"" rel=""nofollow"">the Non-Programmer's Tutorial for Python 3</a>, I stumbled across a strange occurrence. When I run this code:</p>

<pre><code>def print_options():
    print('Options:')
    print("" 'p' print options"")
    print("" 'c' convert from Celsius"")
    print("" 'f' convert from Fahrenheit"")
    print("" 'q' quit"")

def c_to_f(c_temp):
    return 9.0/5.0 * c_temp + 32

def f_to_c(f_temp):
    return (f_temp-32)*5.0/9.0

choice = 'p'

while choice != 'q':
    if choice == 'c':
        temp = float(input('Celsius temp: '))
        print('Fahrenheit:', c_to_f(temp))
    elif choice == 'f':
        temp = float(input('Fahrenheit temp:'))
        print('Celsius:', f_to_c(temp))
    elif choice == 'p':
        print_options()
    choice = input('Options: ')
</code></pre>

<p>The resulting output is what you'd expect:</p>

<pre><code>Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: f
Fahrenheit temp:98.6
Celsius: 37.0
Options: c
Celsius temp: 37
Fahrenheit: 98.60000000000001
Options: q
</code></pre>

<p>But when I run the same code on Eclipse (IDLE was crashing so I tried something else), the program just loops instead of going into the other options:</p>

<pre><code>Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: c
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: f
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: q
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: 
</code></pre>

<p>Is there something wrong in the code itself to cause this or is it just some wonky interaction? Any help would be greatly appreciated.</p>",eclipse|python-3.x|pydev,"<p>If the latest Eclipse/Pydev doesn't fix the issue, I'd recommend that you add a couple of debug/display lines to show you what Eclipse thinks it received as input.</p>

<p>Between these two lines:</p>

<pre><code>while choice != 'q':
    if choice == 'c':
</code></pre>

<p>Add the following, indented at the same level as the if choice == 'c': line:</p>

<pre><code>print ('debug1\tchoice =', choice)                # what you typed
print ('debug2\tlen(choice)=', len(choice))       # should be length of 1,
print ('debug3\tsame?', choice == choice.strip()) # should be True
</code></pre>

<p>If debug2 is not 1 or debug3 is not True, there's a sneaky gotcha with whitespace which could probably be resolved with changing this:</p>

<pre><code>while choice != 'q':
</code></pre>

<p>to this:</p>

<pre><code>while choice.strip() != 'q':
</code></pre>

<p>Also, I am curious about the description.  You said the code works ---  where did it work?  You said IDLE crashed and Eclipse does not work.</p>

<p>If you're using another editor (like Notepad++, PyScripter) or a different IDE (like PyCharm or WingIDE), do a Show Whitespace for the example code in both tools and verify that the code is indeed identical to what Eclipse/PyDev is running.</p>

<p>In Python, whitepsace (tabs, spaces) definitely matters and some tools interpret them slightly different --- especially in cases where you bounce back and forth between them.</p>

<p>Cheers,
Rob</p>",0
284,5074177,Python code behaving differently between IDLE and Eclipse,"<p>I'm completely new to programming, so I decided to teach myself python. While going through <a href=""http://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_3"" rel=""nofollow"">the Non-Programmer's Tutorial for Python 3</a>, I stumbled across a strange occurrence. When I run this code:</p>

<pre><code>def print_options():
    print('Options:')
    print("" 'p' print options"")
    print("" 'c' convert from Celsius"")
    print("" 'f' convert from Fahrenheit"")
    print("" 'q' quit"")

def c_to_f(c_temp):
    return 9.0/5.0 * c_temp + 32

def f_to_c(f_temp):
    return (f_temp-32)*5.0/9.0

choice = 'p'

while choice != 'q':
    if choice == 'c':
        temp = float(input('Celsius temp: '))
        print('Fahrenheit:', c_to_f(temp))
    elif choice == 'f':
        temp = float(input('Fahrenheit temp:'))
        print('Celsius:', f_to_c(temp))
    elif choice == 'p':
        print_options()
    choice = input('Options: ')
</code></pre>

<p>The resulting output is what you'd expect:</p>

<pre><code>Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: f
Fahrenheit temp:98.6
Celsius: 37.0
Options: c
Celsius temp: 37
Fahrenheit: 98.60000000000001
Options: q
</code></pre>

<p>But when I run the same code on Eclipse (IDLE was crashing so I tried something else), the program just loops instead of going into the other options:</p>

<pre><code>Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: c
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: f
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: q
Options:
 'p' print options
 'c' convert from Celsius
 'f' convert from Fahrenheit
 'q' quit
Options: 
</code></pre>

<p>Is there something wrong in the code itself to cause this or is it just some wonky interaction? Any help would be greatly appreciated.</p>",eclipse|python-3.x|pydev,<p>try running the code through your terminal-- <code>$ python3 filename.py</code></p>,0
285,5347003,Python: how to find value in list smaller than target,"<p>For example I have a non-ordered list of values [10, 20, 50, 200, 100, 300, 250, 150]</p>

<p>I have this code which returns the next greater value:</p>

<pre><code>def GetNextHighTemp(self,  temp,  templist):
    target = int(temp)
    list = []
    for t in templist:
        if t != """":
            list.append(int(t))
    return str(min((abs(target - i), i) for i in list)[1])
</code></pre>

<p>e.g. If temp = 55, it will return '100'.</p>

<p>But how can I get the lesser of the value? That is how to get it to return '50'?</p>

<p>Thank you.</p>

<p><strong>EDIT - now working</strong></p>

<pre><code>def OnTWMatCurrentIndexChanged(self):
    self.ClearTWSelectInputs()
    material = self.cb_TW_mat.currentText()
    temp = self.txt_design_temp.text()
    if material != """":
        Eref = self.GetMaterialData(material,  ""25"",  ""elast"")
        if Eref and Eref != """":
            Eref = str(float(Eref) / 1000000000)
            self.txt_TW_Eref.setText(Eref)
        else:
            self.txt_TW_Eref.setText(""194.8"")
            self.ShowMsg(""No temperature match found for E&lt;sub&gt;ref&lt;/sub&gt; in material data file. Value of 194.8 GPa will be used."",  ""blue"")
    if material != """" and temp != """":
        if self.CheckTWTemp(material,  temp):
            dens = self.GetMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
        else:
            self.ShowMsg(""No temperature match found for "" + temp + ""&amp;#x00B0; C in material data file. Extrapolated data will be used where possible or add new material data."",  ""blue"")
            dens = self.GetExtrapolatedMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetExtrapolatedMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetExtrapolatedMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
    else:
        self.ClearTWSelectInputs()

def CheckTWTemp(self, matvar, tempvar):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if int(temp.text) == int(tempvar):
                    return True
            return False

def GetMaterialData(self, matvar, tempvar, tag):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if temp.text == tempvar:
                    value = temp.find(tag)
                    return value.text

def GetExtrapolatedMaterialData(self, matvar, tempvar, tag):
    try:
        templist = QStringList()
        for material in self.materials:
            if material.attrib[""name""] == matvar:
                temps = material.getiterator(""temp"")
                for temp in temps:
                    templist.append(temp.text)
        templist.sort()
        target = int(tempvar)
        x1 = max(int(t) for t in templist if t != '' and int(t) &lt; target)
        x2 = min(int(t) for t in templist if t != '' and int(t) &gt; target)
        y1 = float(self.GetMaterialData(matvar, str(x1), tag))
        y2 = float(self.GetMaterialData(matvar, str(x2), tag))
        x = target
        y = y1 - ((y1 - y2) * (x - x1) / (x2 - x1))
        return str(y)
    except Exception, inst:
        return ""0""
</code></pre>",python,"<p>Let the unordered list be <code>myList</code>:</p>

<p><code>
answer = max(x for x in myList if x &lt; temp)
</code></p>",2
286,5347003,Python: how to find value in list smaller than target,"<p>For example I have a non-ordered list of values [10, 20, 50, 200, 100, 300, 250, 150]</p>

<p>I have this code which returns the next greater value:</p>

<pre><code>def GetNextHighTemp(self,  temp,  templist):
    target = int(temp)
    list = []
    for t in templist:
        if t != """":
            list.append(int(t))
    return str(min((abs(target - i), i) for i in list)[1])
</code></pre>

<p>e.g. If temp = 55, it will return '100'.</p>

<p>But how can I get the lesser of the value? That is how to get it to return '50'?</p>

<p>Thank you.</p>

<p><strong>EDIT - now working</strong></p>

<pre><code>def OnTWMatCurrentIndexChanged(self):
    self.ClearTWSelectInputs()
    material = self.cb_TW_mat.currentText()
    temp = self.txt_design_temp.text()
    if material != """":
        Eref = self.GetMaterialData(material,  ""25"",  ""elast"")
        if Eref and Eref != """":
            Eref = str(float(Eref) / 1000000000)
            self.txt_TW_Eref.setText(Eref)
        else:
            self.txt_TW_Eref.setText(""194.8"")
            self.ShowMsg(""No temperature match found for E&lt;sub&gt;ref&lt;/sub&gt; in material data file. Value of 194.8 GPa will be used."",  ""blue"")
    if material != """" and temp != """":
        if self.CheckTWTemp(material,  temp):
            dens = self.GetMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
        else:
            self.ShowMsg(""No temperature match found for "" + temp + ""&amp;#x00B0; C in material data file. Extrapolated data will be used where possible or add new material data."",  ""blue"")
            dens = self.GetExtrapolatedMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetExtrapolatedMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetExtrapolatedMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
    else:
        self.ClearTWSelectInputs()

def CheckTWTemp(self, matvar, tempvar):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if int(temp.text) == int(tempvar):
                    return True
            return False

def GetMaterialData(self, matvar, tempvar, tag):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if temp.text == tempvar:
                    value = temp.find(tag)
                    return value.text

def GetExtrapolatedMaterialData(self, matvar, tempvar, tag):
    try:
        templist = QStringList()
        for material in self.materials:
            if material.attrib[""name""] == matvar:
                temps = material.getiterator(""temp"")
                for temp in temps:
                    templist.append(temp.text)
        templist.sort()
        target = int(tempvar)
        x1 = max(int(t) for t in templist if t != '' and int(t) &lt; target)
        x2 = min(int(t) for t in templist if t != '' and int(t) &gt; target)
        y1 = float(self.GetMaterialData(matvar, str(x1), tag))
        y2 = float(self.GetMaterialData(matvar, str(x2), tag))
        x = target
        y = y1 - ((y1 - y2) * (x - x1) / (x2 - x1))
        return str(y)
    except Exception, inst:
        return ""0""
</code></pre>",python,"<pre><code>a=[4,3,8,2,5]
temp=4
def getSmaller(temp,alist):
    alist.sort()
    for i in range(len(alist)):
        if(i&gt;0 and alist[i]==temp):
            print alist[i-1]
        elif(i==0 and alist[i]==temp):
            print alist[i]
getSmaller(temp,a)
</code></pre>",0
287,5347003,Python: how to find value in list smaller than target,"<p>For example I have a non-ordered list of values [10, 20, 50, 200, 100, 300, 250, 150]</p>

<p>I have this code which returns the next greater value:</p>

<pre><code>def GetNextHighTemp(self,  temp,  templist):
    target = int(temp)
    list = []
    for t in templist:
        if t != """":
            list.append(int(t))
    return str(min((abs(target - i), i) for i in list)[1])
</code></pre>

<p>e.g. If temp = 55, it will return '100'.</p>

<p>But how can I get the lesser of the value? That is how to get it to return '50'?</p>

<p>Thank you.</p>

<p><strong>EDIT - now working</strong></p>

<pre><code>def OnTWMatCurrentIndexChanged(self):
    self.ClearTWSelectInputs()
    material = self.cb_TW_mat.currentText()
    temp = self.txt_design_temp.text()
    if material != """":
        Eref = self.GetMaterialData(material,  ""25"",  ""elast"")
        if Eref and Eref != """":
            Eref = str(float(Eref) / 1000000000)
            self.txt_TW_Eref.setText(Eref)
        else:
            self.txt_TW_Eref.setText(""194.8"")
            self.ShowMsg(""No temperature match found for E&lt;sub&gt;ref&lt;/sub&gt; in material data file. Value of 194.8 GPa will be used."",  ""blue"")
    if material != """" and temp != """":
        if self.CheckTWTemp(material,  temp):
            dens = self.GetMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
        else:
            self.ShowMsg(""No temperature match found for "" + temp + ""&amp;#x00B0; C in material data file. Extrapolated data will be used where possible or add new material data."",  ""blue"")
            dens = self.GetExtrapolatedMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetExtrapolatedMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetExtrapolatedMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
    else:
        self.ClearTWSelectInputs()

def CheckTWTemp(self, matvar, tempvar):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if int(temp.text) == int(tempvar):
                    return True
            return False

def GetMaterialData(self, matvar, tempvar, tag):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if temp.text == tempvar:
                    value = temp.find(tag)
                    return value.text

def GetExtrapolatedMaterialData(self, matvar, tempvar, tag):
    try:
        templist = QStringList()
        for material in self.materials:
            if material.attrib[""name""] == matvar:
                temps = material.getiterator(""temp"")
                for temp in temps:
                    templist.append(temp.text)
        templist.sort()
        target = int(tempvar)
        x1 = max(int(t) for t in templist if t != '' and int(t) &lt; target)
        x2 = min(int(t) for t in templist if t != '' and int(t) &gt; target)
        y1 = float(self.GetMaterialData(matvar, str(x1), tag))
        y2 = float(self.GetMaterialData(matvar, str(x2), tag))
        x = target
        y = y1 - ((y1 - y2) * (x - x1) / (x2 - x1))
        return str(y)
    except Exception, inst:
        return ""0""
</code></pre>",python,"<pre><code>nextHighest = lambda seq,x: min([(i-x,i) for i in seq if x&lt;=i] or [(0,None)])[1]
nextLowest  = lambda seq,x: min([(x-i,i) for i in seq if x&gt;=i] or [(0,None)])[1]
</code></pre>

<p>Here's how this works: Looking at <code>nextHighest</code>, the argument to min is a list comprehension, that calculates the differences between each value in the list and the input x, but only for those values >= x. Since you want the actual value, then we need the list elements to include both the difference to the value, and the actual value. Tuples are compared value by value, left-to-right, so the tuple for each value <code>i</code> in the sequence becomes <code>(i-x,i)</code> - the min tuple will have the actual value in the <code>[1]</code>'th element. </p>

<p>If the input x value is outside the range of values in seq (or if seq is just empty), then the list comprehension will give us an empty list, which will raise a ValueError in <code>min</code>.  In case this happens, we add the <code>or [(0,None)]</code> term inside the argument to <code>min</code>.  If the list comprehension is empty, it will evaluate to False, in which case min will instead look at the sequence containing the single tuple <code>(0,None)</code>.  In the case, the <code>[1]</code>'th element is None, indicating that there were no elements in seq higher than x.</p>

<p>Here are some test cases:</p>

<pre><code>&gt;&gt;&gt; t = [10, 20, 50, 200, 100, 300, 250, 150]
&gt;&gt;&gt; print nextHighest(t,55)
100
&gt;&gt;&gt; print nextLowest(t,55)
50
&gt;&gt;&gt; print nextHighest([],55)
None
&gt;&gt;&gt; print nextLowest([],55)
None
&gt;&gt;&gt; print nextHighest(t,550)
None
</code></pre>",2
288,5347003,Python: how to find value in list smaller than target,"<p>For example I have a non-ordered list of values [10, 20, 50, 200, 100, 300, 250, 150]</p>

<p>I have this code which returns the next greater value:</p>

<pre><code>def GetNextHighTemp(self,  temp,  templist):
    target = int(temp)
    list = []
    for t in templist:
        if t != """":
            list.append(int(t))
    return str(min((abs(target - i), i) for i in list)[1])
</code></pre>

<p>e.g. If temp = 55, it will return '100'.</p>

<p>But how can I get the lesser of the value? That is how to get it to return '50'?</p>

<p>Thank you.</p>

<p><strong>EDIT - now working</strong></p>

<pre><code>def OnTWMatCurrentIndexChanged(self):
    self.ClearTWSelectInputs()
    material = self.cb_TW_mat.currentText()
    temp = self.txt_design_temp.text()
    if material != """":
        Eref = self.GetMaterialData(material,  ""25"",  ""elast"")
        if Eref and Eref != """":
            Eref = str(float(Eref) / 1000000000)
            self.txt_TW_Eref.setText(Eref)
        else:
            self.txt_TW_Eref.setText(""194.8"")
            self.ShowMsg(""No temperature match found for E&lt;sub&gt;ref&lt;/sub&gt; in material data file. Value of 194.8 GPa will be used."",  ""blue"")
    if material != """" and temp != """":
        if self.CheckTWTemp(material,  temp):
            dens = self.GetMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
        else:
            self.ShowMsg(""No temperature match found for "" + temp + ""&amp;#x00B0; C in material data file. Extrapolated data will be used where possible or add new material data."",  ""blue"")
            dens = self.GetExtrapolatedMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetExtrapolatedMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetExtrapolatedMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
    else:
        self.ClearTWSelectInputs()

def CheckTWTemp(self, matvar, tempvar):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if int(temp.text) == int(tempvar):
                    return True
            return False

def GetMaterialData(self, matvar, tempvar, tag):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if temp.text == tempvar:
                    value = temp.find(tag)
                    return value.text

def GetExtrapolatedMaterialData(self, matvar, tempvar, tag):
    try:
        templist = QStringList()
        for material in self.materials:
            if material.attrib[""name""] == matvar:
                temps = material.getiterator(""temp"")
                for temp in temps:
                    templist.append(temp.text)
        templist.sort()
        target = int(tempvar)
        x1 = max(int(t) for t in templist if t != '' and int(t) &lt; target)
        x2 = min(int(t) for t in templist if t != '' and int(t) &gt; target)
        y1 = float(self.GetMaterialData(matvar, str(x1), tag))
        y2 = float(self.GetMaterialData(matvar, str(x2), tag))
        x = target
        y = y1 - ((y1 - y2) * (x - x1) / (x2 - x1))
        return str(y)
    except Exception, inst:
        return ""0""
</code></pre>",python,"<p>If I understand you correctly, you want the greatest value that is less than your target; e.g. in your example, if your target is 55, you want 50, but if your target is 35, you want 20.  The following function should do that:</p>

<pre><code>def get_closest_less(lst, target):
    lst.sort()
    ret_val = None
    previous = lst[0]
    if (previous &lt;= target):
        for ndx in xrange(1, len(lst) - 1):
            if lst[ndx] &gt; target:
                ret_val = previous
                break
            else:
                previous = lst[ndx]
    return str(ret_val)
</code></pre>

<p>If you need to step through these values, you could use a <a href=""http://docs.python.org/tutorial/classes.html#generator-expressions"" rel=""nofollow"">generator</a> to get the values in succession:</p>

<pre><code>def next_lesser(l, target):
    for n in l:
        if n &lt; target:
            yield str(n)
</code></pre>

<p>Both these worked properly from within a simple program.</p>",0
289,5347003,Python: how to find value in list smaller than target,"<p>For example I have a non-ordered list of values [10, 20, 50, 200, 100, 300, 250, 150]</p>

<p>I have this code which returns the next greater value:</p>

<pre><code>def GetNextHighTemp(self,  temp,  templist):
    target = int(temp)
    list = []
    for t in templist:
        if t != """":
            list.append(int(t))
    return str(min((abs(target - i), i) for i in list)[1])
</code></pre>

<p>e.g. If temp = 55, it will return '100'.</p>

<p>But how can I get the lesser of the value? That is how to get it to return '50'?</p>

<p>Thank you.</p>

<p><strong>EDIT - now working</strong></p>

<pre><code>def OnTWMatCurrentIndexChanged(self):
    self.ClearTWSelectInputs()
    material = self.cb_TW_mat.currentText()
    temp = self.txt_design_temp.text()
    if material != """":
        Eref = self.GetMaterialData(material,  ""25"",  ""elast"")
        if Eref and Eref != """":
            Eref = str(float(Eref) / 1000000000)
            self.txt_TW_Eref.setText(Eref)
        else:
            self.txt_TW_Eref.setText(""194.8"")
            self.ShowMsg(""No temperature match found for E&lt;sub&gt;ref&lt;/sub&gt; in material data file. Value of 194.8 GPa will be used."",  ""blue"")
    if material != """" and temp != """":
        if self.CheckTWTemp(material,  temp):
            dens = self.GetMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
        else:
            self.ShowMsg(""No temperature match found for "" + temp + ""&amp;#x00B0; C in material data file. Extrapolated data will be used where possible or add new material data."",  ""blue"")
            dens = self.GetExtrapolatedMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetExtrapolatedMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetExtrapolatedMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
    else:
        self.ClearTWSelectInputs()

def CheckTWTemp(self, matvar, tempvar):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if int(temp.text) == int(tempvar):
                    return True
            return False

def GetMaterialData(self, matvar, tempvar, tag):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if temp.text == tempvar:
                    value = temp.find(tag)
                    return value.text

def GetExtrapolatedMaterialData(self, matvar, tempvar, tag):
    try:
        templist = QStringList()
        for material in self.materials:
            if material.attrib[""name""] == matvar:
                temps = material.getiterator(""temp"")
                for temp in temps:
                    templist.append(temp.text)
        templist.sort()
        target = int(tempvar)
        x1 = max(int(t) for t in templist if t != '' and int(t) &lt; target)
        x2 = min(int(t) for t in templist if t != '' and int(t) &gt; target)
        y1 = float(self.GetMaterialData(matvar, str(x1), tag))
        y2 = float(self.GetMaterialData(matvar, str(x2), tag))
        x = target
        y = y1 - ((y1 - y2) * (x - x1) / (x2 - x1))
        return str(y)
    except Exception, inst:
        return ""0""
</code></pre>",python,"<p>A better and much faster (code and cpu wise) way is to use bisect module which does binary search but for that you will need to sort the list first, here is the sample usage:</p>

<pre><code>import bisect

mylist = [10, 20, 50, 200, 100, 300, 250, 150]
mylist.sort()

index = bisect.bisect(mylist, 55)
print ""Greater than target"", mylist[index]
print ""Smaller than or equal to target"", mylist[index-1]
</code></pre>

<p>output:</p>

<pre><code>Greater than target 100
Smaller than or equal to target 50
</code></pre>

<p>Also you will need to check the returned index, if it is <code>0</code> it means you have passed target lower than the lowest</p>",22
290,5347003,Python: how to find value in list smaller than target,"<p>For example I have a non-ordered list of values [10, 20, 50, 200, 100, 300, 250, 150]</p>

<p>I have this code which returns the next greater value:</p>

<pre><code>def GetNextHighTemp(self,  temp,  templist):
    target = int(temp)
    list = []
    for t in templist:
        if t != """":
            list.append(int(t))
    return str(min((abs(target - i), i) for i in list)[1])
</code></pre>

<p>e.g. If temp = 55, it will return '100'.</p>

<p>But how can I get the lesser of the value? That is how to get it to return '50'?</p>

<p>Thank you.</p>

<p><strong>EDIT - now working</strong></p>

<pre><code>def OnTWMatCurrentIndexChanged(self):
    self.ClearTWSelectInputs()
    material = self.cb_TW_mat.currentText()
    temp = self.txt_design_temp.text()
    if material != """":
        Eref = self.GetMaterialData(material,  ""25"",  ""elast"")
        if Eref and Eref != """":
            Eref = str(float(Eref) / 1000000000)
            self.txt_TW_Eref.setText(Eref)
        else:
            self.txt_TW_Eref.setText(""194.8"")
            self.ShowMsg(""No temperature match found for E&lt;sub&gt;ref&lt;/sub&gt; in material data file. Value of 194.8 GPa will be used."",  ""blue"")
    if material != """" and temp != """":
        if self.CheckTWTemp(material,  temp):
            dens = self.GetMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
        else:
            self.ShowMsg(""No temperature match found for "" + temp + ""&amp;#x00B0; C in material data file. Extrapolated data will be used where possible or add new material data."",  ""blue"")
            dens = self.GetExtrapolatedMaterialData(material,  temp,  ""dens"")
            self.txt_TW_dens.setText(dens)
            elast = self.GetExtrapolatedMaterialData(material,  temp,  ""elast"")
            elast = str(float(elast) / 1000000000)
            self.txt_TW_Et.setText(elast)
            stress = self.GetExtrapolatedMaterialData(material,  temp,  ""stress"")
            stress = str(float(stress) / 1000000)
            self.txt_TW_stress_limit.setText(stress)
    else:
        self.ClearTWSelectInputs()

def CheckTWTemp(self, matvar, tempvar):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if int(temp.text) == int(tempvar):
                    return True
            return False

def GetMaterialData(self, matvar, tempvar, tag):
    for material in self.materials:
        if material.attrib[""name""] == matvar:
            temps = material.getiterator(""temp"")
            for temp in temps:
                if temp.text == tempvar:
                    value = temp.find(tag)
                    return value.text

def GetExtrapolatedMaterialData(self, matvar, tempvar, tag):
    try:
        templist = QStringList()
        for material in self.materials:
            if material.attrib[""name""] == matvar:
                temps = material.getiterator(""temp"")
                for temp in temps:
                    templist.append(temp.text)
        templist.sort()
        target = int(tempvar)
        x1 = max(int(t) for t in templist if t != '' and int(t) &lt; target)
        x2 = min(int(t) for t in templist if t != '' and int(t) &gt; target)
        y1 = float(self.GetMaterialData(matvar, str(x1), tag))
        y2 = float(self.GetMaterialData(matvar, str(x2), tag))
        x = target
        y = y1 - ((y1 - y2) * (x - x1) / (x2 - x1))
        return str(y)
    except Exception, inst:
        return ""0""
</code></pre>",python,"<p><strong>Edit</strong>: Ah, I used <code>templist</code> instead of <code>list</code> -- hence the confusion. I didn't mean it to be a one-line function; you still have to do the conversions. (Of course, as Mike DeSimone rightly points out, using list as a variable name is a terrible idea!! So I had a good reason for being confusing. :)</p>

<p>To be more explicit about it, here's a slightly streamlined version of the function (fixed to test properly for an empty list):</p>

<pre><code>def GetNextHighTemp(self, temp, templist):
    templist = (int(t) for t in templist if t != '')
    templist = [t for t in templist if t &lt; int(temp)]
    if templist: return max(templist)
    else: return None                   # or raise an error
</code></pre>

<p>Thanks to Mike for the suggestion to return <code>None</code> in case of an empty list -- I like that. </p>

<p>You could shorten this even more like so:</p>

<pre><code>def GetNextHighTemp(self, temp, templist):
    try: return str(max(int(t) for t in templist if t != '' and int(t) &lt; int(temp)))
    except ValueError: return None      # or raise a different error
</code></pre>",4
291,7501009,Affine transform in PIL Python,"<p>I have problems with the im.transform method in PIL python library. I thought I figured out the logic of parameters, A to F, however, the resulting image gets rotated in the wrong direction and cut off although all four corners calculated by the bellow function have correct positive values.</p>

<p>Could anybody give me formulas to calculate affine parameters (A to F) from three identical points in both coordinate systems?</p>

<pre><code>def tran (x_pic, y_pic, A, B, C, D, E, F):
  X = A * x_pic + B * y_pic + C
  Y = D * x_pic + E * y_pic + F
  return X, Y
</code></pre>",python-imaging-library|affinetransform,"<p>I think my version of is much more explicit and easy to understand</p>
<pre><code>def scale_rotate_translate(image, angle, sr_center=None, displacment=None, scale=None):
    if sr_center is None:
        sr_center = 0, 0
    if displacment is None:
        displacment = 0, 0
    if scale is None:
        scale = 1, 1

    angle = -angle / 180.0 * np.pi

    C = np.array([[1, 0, -sr_center[0]],
                  [0, 1, -sr_center[1]],
                  [0, 0, 1]])

    C_1 = np.linalg.inv(C)

    S = np.array([[scale[0], 0, 0],
                  [0, scale[1], 0],
                  [0,        0, 1]])

    R = np.array([[np.cos(angle), np.sin(angle), 0],
                  [-np.sin(angle), np.cos(angle), 0],
                  [0,                         0, 1]])

    D = np.array([[1, 0, displacment[0]],
                  [0, 1, displacment[1]],
                  [0, 0,            1]])

    Mt = np.dot(D, np.dot(C_1, np.dot(R, np.dot(S, C))))

    a, b, c = Mt[0]
    d, e, f = Mt[1]

    return image.transform(image.size, Image.AFFINE, (a, b, c, d, e, f), resample=Image.BICUBIC)
</code></pre>",0
292,7501009,Affine transform in PIL Python,"<p>I have problems with the im.transform method in PIL python library. I thought I figured out the logic of parameters, A to F, however, the resulting image gets rotated in the wrong direction and cut off although all four corners calculated by the bellow function have correct positive values.</p>

<p>Could anybody give me formulas to calculate affine parameters (A to F) from three identical points in both coordinate systems?</p>

<pre><code>def tran (x_pic, y_pic, A, B, C, D, E, F):
  X = A * x_pic + B * y_pic + C
  Y = D * x_pic + E * y_pic + F
  return X, Y
</code></pre>",python-imaging-library|affinetransform,"<p>transform works fine for me. As an example we'll rotate an image around a center different from (0,0) with optional scaling and translation to a new center. Here is how to do it with transform:</p>

<pre class=""lang-py prettyprint-override""><code>def ScaleRotateTranslate(image, angle, center = None, new_center = None, scale = None,expand=False):
    if center is None:
        return image.rotate(angle)
    angle = -angle/180.0*math.pi
    nx,ny = x,y = center
    sx=sy=1.0
    if new_center:
        (nx,ny) = new_center
    if scale:
        (sx,sy) = scale
    cosine = math.cos(angle)
    sine = math.sin(angle)
    a = cosine/sx
    b = sine/sx
    c = x-nx*a-ny*b
    d = -sine/sy
    e = cosine/sy
    f = y-nx*d-ny*e
    return image.transform(image.size, Image.AFFINE, (a,b,c,d,e,f), resample=Image.BICUBIC)
</code></pre>",15
293,7605199,Python: counting unique instance of words across several lines,"<p>I have a text file with several observations. Each observation is in one line. I would like to detect unique occurrence of each word in a line. In other words, if same word occurs twice or more on the same line, it is still counted as once. However, I would like to count the frequency of occurrence of each words across all observations. This means that if a word occurs in two or more lines,I would like to count the number of lines it occurred in. Here is the program I wrote and it is really slow in processing large number of file. I also remove certain words in the file by referencing another file. Please offer suggestions on how to improve speed. Thank you.</p>

<pre><code>import re, string
from itertools import chain, tee, izip
from collections import defaultdict

def count_words(in_file="""",del_file="""",out_file=""""):

    d_list = re.split('\n', file(del_file).read().lower())
    d_list = [x.strip(' ') for x in d_list] 

    dict2={}
    f1 = open(in_file,'r')
    lines = map(string.strip,map(str.lower,f1.readlines()))

    for line in lines:
        dict1={}
        new_list = []
        for char in line:
            new_list.append(re.sub(r'[0-9#$?*_&gt;&lt;@\(\)&amp;;:,.!-+%=\[\]\-\/\^]', ""_"", char))
        s=''.join(new_list)
        for word in d_list:
            s = s.replace(word,"""")
        for word in s.split():
            try:
                dict1[word]=1
            except:
                dict1[word]=1
        for word in dict1.keys():
            try:
                dict2[word] += 1
            except:
                dict2[word] = 1
    freq_list = dict2.items()
    freq_list.sort()
    f1.close()

    word_count_handle = open(out_file,'w+')
    for word, freq  in freq_list:
        print&gt;&gt;word_count_handle,word, freq
    word_count_handle.close()
    return dict2

 dict = count_words(""in_file.txt"",""delete_words.txt"",""out_file.txt"")
</code></pre>",python|performance|words|counting,"<p>You're running re.sub on each <em>character</em> of the line, one at a time. That's slow. Do it on the whole line:</p>

<pre><code>s = re.sub(r'[0-9#$?*_&gt;&lt;@\(\)&amp;;:,.!-+%=\[\]\-\/\^]', ""_"", line)
</code></pre>

<p>Also, have a look at sets and the Counter class in the collections module. It may be faster if you just count and then discard those you don't want afterwards.</p>",1
294,7605199,Python: counting unique instance of words across several lines,"<p>I have a text file with several observations. Each observation is in one line. I would like to detect unique occurrence of each word in a line. In other words, if same word occurs twice or more on the same line, it is still counted as once. However, I would like to count the frequency of occurrence of each words across all observations. This means that if a word occurs in two or more lines,I would like to count the number of lines it occurred in. Here is the program I wrote and it is really slow in processing large number of file. I also remove certain words in the file by referencing another file. Please offer suggestions on how to improve speed. Thank you.</p>

<pre><code>import re, string
from itertools import chain, tee, izip
from collections import defaultdict

def count_words(in_file="""",del_file="""",out_file=""""):

    d_list = re.split('\n', file(del_file).read().lower())
    d_list = [x.strip(' ') for x in d_list] 

    dict2={}
    f1 = open(in_file,'r')
    lines = map(string.strip,map(str.lower,f1.readlines()))

    for line in lines:
        dict1={}
        new_list = []
        for char in line:
            new_list.append(re.sub(r'[0-9#$?*_&gt;&lt;@\(\)&amp;;:,.!-+%=\[\]\-\/\^]', ""_"", char))
        s=''.join(new_list)
        for word in d_list:
            s = s.replace(word,"""")
        for word in s.split():
            try:
                dict1[word]=1
            except:
                dict1[word]=1
        for word in dict1.keys():
            try:
                dict2[word] += 1
            except:
                dict2[word] = 1
    freq_list = dict2.items()
    freq_list.sort()
    f1.close()

    word_count_handle = open(out_file,'w+')
    for word, freq  in freq_list:
        print&gt;&gt;word_count_handle,word, freq
    word_count_handle.close()
    return dict2

 dict = count_words(""in_file.txt"",""delete_words.txt"",""out_file.txt"")
</code></pre>",python|performance|words|counting,"<p>Without having done any performance testing, the following come to mind:</p>

<p><strong>1)</strong> you're using regexes  --  why?  Are you just trying to get rid of certain characters?</p>

<p><strong>2)</strong> you're using exceptions for flow control -- although it can be pythonic (better to ask forgiveness than permission), throwing exceptions can often be slow.  As seen here:</p>

<pre><code>    for word in dict1.keys():
        try:
            dict2[word] += 1
        except:
            dict2[word] = 1
</code></pre>

<p><strong>3)</strong> turn <code>d_list</code> into a set, and use python's <code>in</code> to test for membership, and simultaneously ...</p>

<p><strong>4)</strong> avoid heavy use of <code>replace</code> method on strings -- I believe you're using this to filter out the words that appear in <code>d_list</code>.  This could be accomplished instead by avoiding <code>replace</code>, and just filtering the words in the line, either with a list comprehension:</p>

<pre><code>[word for word words if not word in del_words]
</code></pre>

<p>or with a filter (not very pythonic):</p>

<pre><code>filter(lambda word: not word in del_words, words)
</code></pre>",1
295,7605199,Python: counting unique instance of words across several lines,"<p>I have a text file with several observations. Each observation is in one line. I would like to detect unique occurrence of each word in a line. In other words, if same word occurs twice or more on the same line, it is still counted as once. However, I would like to count the frequency of occurrence of each words across all observations. This means that if a word occurs in two or more lines,I would like to count the number of lines it occurred in. Here is the program I wrote and it is really slow in processing large number of file. I also remove certain words in the file by referencing another file. Please offer suggestions on how to improve speed. Thank you.</p>

<pre><code>import re, string
from itertools import chain, tee, izip
from collections import defaultdict

def count_words(in_file="""",del_file="""",out_file=""""):

    d_list = re.split('\n', file(del_file).read().lower())
    d_list = [x.strip(' ') for x in d_list] 

    dict2={}
    f1 = open(in_file,'r')
    lines = map(string.strip,map(str.lower,f1.readlines()))

    for line in lines:
        dict1={}
        new_list = []
        for char in line:
            new_list.append(re.sub(r'[0-9#$?*_&gt;&lt;@\(\)&amp;;:,.!-+%=\[\]\-\/\^]', ""_"", char))
        s=''.join(new_list)
        for word in d_list:
            s = s.replace(word,"""")
        for word in s.split():
            try:
                dict1[word]=1
            except:
                dict1[word]=1
        for word in dict1.keys():
            try:
                dict2[word] += 1
            except:
                dict2[word] = 1
    freq_list = dict2.items()
    freq_list.sort()
    f1.close()

    word_count_handle = open(out_file,'w+')
    for word, freq  in freq_list:
        print&gt;&gt;word_count_handle,word, freq
    word_count_handle.close()
    return dict2

 dict = count_words(""in_file.txt"",""delete_words.txt"",""out_file.txt"")
</code></pre>",python|performance|words|counting,"<pre><code>import re

u_words        = set()
u_words_in_lns = []
wordcount      = {}
words          = []

# get unique words per line
for line in buff.split('\n'):
    u_words_in_lns.append(set(line.split(' ')))

# create a set of all unique words
map( u_words.update, u_words_in_lns )

# flatten the sets into a single list of words again
map( words.extend, u_words_in_lns)

# count everything up
for word in u_words:
    wordcount[word] = len(re.findall(word,str(words)))
</code></pre>",0
296,7299493,Converting a String into a datetime object in python,"<p>I have a string field like this.. </p>

<pre><code>2011-09-04 23:44:30.801000
</code></pre>

<p>and now I need to convert it to a datetime object in python so that I can calculate the difference between two datetime objects.</p>",python|datetime,"<pre><code># date string to datetime object
date_str = ""2008-11-10 17:53:59""
dt_obj = datetime.strptime(date_str, ""%Y-%m-%d %H:%M:%S"")
print repr(dt_obj)
</code></pre>",0
297,7299493,Converting a String into a datetime object in python,"<p>I have a string field like this.. </p>

<pre><code>2011-09-04 23:44:30.801000
</code></pre>

<p>and now I need to convert it to a datetime object in python so that I can calculate the difference between two datetime objects.</p>",python|datetime,"<p>Use <a href=""http://docs.python.org/library/datetime.html#datetime.datetime.strptime"" rel=""nofollow"">datetime.datetime.strptime</a>.</p>",0
298,7299493,Converting a String into a datetime object in python,"<p>I have a string field like this.. </p>

<pre><code>2011-09-04 23:44:30.801000
</code></pre>

<p>and now I need to convert it to a datetime object in python so that I can calculate the difference between two datetime objects.</p>",python|datetime,"<p>An alternative to <code>datetime.datetime.strptime</code> would be the <a href=""http://labix.org/python-dateutil"" rel=""nofollow"">python-dateutil</a> libray. <code>dateutil</code> will allow you to do the same thing without the explicit formatting step:</p>

<pre><code>&gt;&gt;&gt; from dateutil import parser
&gt;&gt;&gt; date_obj = parser.parse('2011-09-04 23:44:30.801000')
&gt;&gt;&gt; date
datetime.datetime(2011, 9, 4, 23, 44, 30, 801000)
</code></pre>

<p>It's not a standard library module, but it is very handy for parsing date and time strings, especially if you don't have control over the format they come in.</p>

<p>One caveat if you install this library: version 1.5 is for <code>Python 2</code> and version 2.0 is for <code>Python 3</code>. <code>easy_install</code> and <code>pip</code> default to installing the 2.0 version, so you have to explicitly indicate <code>python-dateutil==1.5</code> if you are using <code>Python 2</code>.</p>",4
299,7299493,Converting a String into a datetime object in python,"<p>I have a string field like this.. </p>

<pre><code>2011-09-04 23:44:30.801000
</code></pre>

<p>and now I need to convert it to a datetime object in python so that I can calculate the difference between two datetime objects.</p>",python|datetime,"<p>You should use <code>datetime.datetime.strptime()</code>, which converts a string and date format into a <code>datetime.datetime</code> object.</p>

<p>The format fields (e.g., <code>%Y</code> denotes four-digit year) are specified <a href=""http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior"" rel=""noreferrer"">in the Python documentation</a>.</p>

<pre><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; s      = '2011-09-04 23:44:30.801000'
&gt;&gt;&gt; format = '%Y-%m-%d %H:%M:%S.%f'
&gt;&gt;&gt; date=datetime.datetime.strptime(s, format)
&gt;&gt;&gt; date
datetime.datetime(2011, 9, 4, 23, 44, 30, 801000)
</code></pre>",7
300,9899159,"IMAP ""Over Quota"" specific scripting","<p>I realize there are a number of libraries to access IMAP, from Java, Python, etc.  But what I want to do is very specific, and is counter to most imap examples.</p>

<p>The easy parts:</p>

<ul>
<li>Given an IMAP server, login, and specific folder name</li>
<li>Nuke all messages in that folder  (Or Nuke the folder, if that's easier or more efficient?)</li>
</ul>

<p>The atypical parts:</p>

<ul>
<li>Do an expunge after every N deletes</li>
<li>Include some retry and batch size logic so that busy servers - even deleting and expunging 100 messages per session would be a help.</li>
<li>DON'T download all the headers!</li>
</ul>

<p>That last point is a problem.  Every email client I've tried chokes on downloading the 20,000 email headers - which I don't need to see.</p>

<p>With POP3 scripting I've just given sequential IDs, 1, 2, 3 ...</p>

<p>But every IMAP example I've seen appears to use some field that it got from the headers.  So maybe deleting IMAP messages <em>requires</em> an ID that you can't guess at?  (and can only get by doing a query?)</p>

<p>If I did need to get headers, can this at least be made as compact as possible?  Or let me do just 100 at a time?</p>

<p>Alternatively, I've tried to delete an entire folder via email client UI's, but this doesn't seem to work.  I think it's trying to move all the headers to the trash first, and fails at that, so never gets to the expunge part.  So I'm not sure that deleting a folder is actually more efficient than deleting its contents.</p>

<p>Any thoughts appreciated.  I usually work in Java or Python, but I'm flexible.  I think this is a protocol issue, not a library issue.</p>",java|python|protocols|imap|quota,"<p>The <a href=""https://www.rfc-editor.org/rfc/rfc3501"" rel=""nofollow noreferrer"">IMAP specification</a> provides a <a href=""https://www.rfc-editor.org/rfc/rfc3501#section-6.3.4"" rel=""nofollow noreferrer""><code>DELETE</code> command</a> that can destroy an entire mailbox.</p>",0
301,9899159,"IMAP ""Over Quota"" specific scripting","<p>I realize there are a number of libraries to access IMAP, from Java, Python, etc.  But what I want to do is very specific, and is counter to most imap examples.</p>

<p>The easy parts:</p>

<ul>
<li>Given an IMAP server, login, and specific folder name</li>
<li>Nuke all messages in that folder  (Or Nuke the folder, if that's easier or more efficient?)</li>
</ul>

<p>The atypical parts:</p>

<ul>
<li>Do an expunge after every N deletes</li>
<li>Include some retry and batch size logic so that busy servers - even deleting and expunging 100 messages per session would be a help.</li>
<li>DON'T download all the headers!</li>
</ul>

<p>That last point is a problem.  Every email client I've tried chokes on downloading the 20,000 email headers - which I don't need to see.</p>

<p>With POP3 scripting I've just given sequential IDs, 1, 2, 3 ...</p>

<p>But every IMAP example I've seen appears to use some field that it got from the headers.  So maybe deleting IMAP messages <em>requires</em> an ID that you can't guess at?  (and can only get by doing a query?)</p>

<p>If I did need to get headers, can this at least be made as compact as possible?  Or let me do just 100 at a time?</p>

<p>Alternatively, I've tried to delete an entire folder via email client UI's, but this doesn't seem to work.  I think it's trying to move all the headers to the trash first, and fails at that, so never gets to the expunge part.  So I'm not sure that deleting a folder is actually more efficient than deleting its contents.</p>

<p>Any thoughts appreciated.  I usually work in Java or Python, but I'm flexible.  I think this is a protocol issue, not a library issue.</p>",java|python|protocols|imap|quota,"<p>Assuming you're not using an atypical server (like gmail which is quite atypical) you can do these commands, after LOGIN, and SELECT [folder]:</p>

<pre><code>A001 STORE 1:N +FLAGS (\Deleted)
A002 EXPUNGE
A003 STORE 1:N +FLAGS (\Deleted)
A004 EXPUNGE
</code></pre>

<p>And so on, where you replace N with your batch size.  This will not use the trash folder (unless your IMAP server has special logic, like Gmail: for gmail, tweak your IMAP access settings).</p>

<p>You should be able to do this:</p>

<pre><code>A001 STORE 1:* +FLAGS (\Deleted)
A002 EXPUNGE
</code></pre>

<p>That may take a while though.</p>

<p>In fact, you can use a tool like <a href=""http://www.dest-unreach.org/socat/"" rel=""nofollow"">socat</a> to login and speak the protocol yourself:</p>

<pre><code>socat READLINE: OPENSSL:[server]:993,noverify,crlf
a LOGIN [user] ""[password]""
b SELECT [folder]
</code></pre>

<p>And then the store and expunge commands from above.</p>",2
302,9970240,"How do I use Python to pack a big integer treating four characters as an unsigned long in network byte order as Ruby's .pack(""N"") does?","<p>This is the bit of Ruby I want to implement in Python:</p>

<pre><code>Base64.urlsafe_encode64([Digest::MD5.hexdigest(url).to_i(16)].pack(""N"")).sub(/==\n?$/, '')
</code></pre>

<p>You see, this helps turn a URL like this:</p>

<pre><code>http://stackoverflow.com/questions/ask
</code></pre>

<p>Into a small code like thise:</p>

<pre><code>sUEBtw
</code></pre>

<p>The big integer that gets generated in the process is this:</p>

<pre><code>307275247029202263937236026733300351415
</code></pre>

<p>I've been able to pack this into binary form using this Python code:</p>

<pre><code>url = 'http://stackoverflow.com/questions/ask'
n = int(hashlib.md5(url).hexdigest(), 16)                                       
s = struct.Struct('d')                                                          
values = [n]                                                                    
packed_data = s.pack(*values)                                                   
short_code = base64.urlsafe_b64encode(packed_data)[:-1]
print short_code
</code></pre>

<p>The short code I get is this:</p>

<pre><code>zgMM62Hl7Ec
</code></pre>

<p>As you can see it's larger than the one I get with Ruby this the packing is using a different format.</p>

<p>You're help will be appreciated.</p>",python|ruby|packing,"<p>So it is clear now that Ruby's <code>pack('N')</code> takes only the lower 4 bytes so following <a href=""https://stackoverflow.com/users/487339/dsm"">DSM</a>'s suggestion I got this code to work:</p>

<pre><code>import hashlib
import base64

url = 'https://stackoverflow.com/questions/ask'
n = int(hashlib.md5(url).hexdigest(), 16)                                       
s = struct.Struct('&gt;I')                                                         
values = [n % (2**32)]                                                          
packed_data = s.pack(*values)                                                   
print base64.urlsafe_b64encode(packed_data)[:-2] 
</code></pre>

<p>Nonetheless, as explained in <a href=""https://stackoverflow.com/users/235698/mark-tolonen"">Mark Tolonen</a>'s answer, <code>hashlib</code>'s HASH object's <code>digest()</code> method you get the hash already packed so taking the last four bytes with <code>[-4:]</code> for encoding using <code>Base64</code>'s <code>urlsafe_b64encode</code> is good enough.</p>",0
303,9970240,"How do I use Python to pack a big integer treating four characters as an unsigned long in network byte order as Ruby's .pack(""N"") does?","<p>This is the bit of Ruby I want to implement in Python:</p>

<pre><code>Base64.urlsafe_encode64([Digest::MD5.hexdigest(url).to_i(16)].pack(""N"")).sub(/==\n?$/, '')
</code></pre>

<p>You see, this helps turn a URL like this:</p>

<pre><code>http://stackoverflow.com/questions/ask
</code></pre>

<p>Into a small code like thise:</p>

<pre><code>sUEBtw
</code></pre>

<p>The big integer that gets generated in the process is this:</p>

<pre><code>307275247029202263937236026733300351415
</code></pre>

<p>I've been able to pack this into binary form using this Python code:</p>

<pre><code>url = 'http://stackoverflow.com/questions/ask'
n = int(hashlib.md5(url).hexdigest(), 16)                                       
s = struct.Struct('d')                                                          
values = [n]                                                                    
packed_data = s.pack(*values)                                                   
short_code = base64.urlsafe_b64encode(packed_data)[:-1]
print short_code
</code></pre>

<p>The short code I get is this:</p>

<pre><code>zgMM62Hl7Ec
</code></pre>

<p>As you can see it's larger than the one I get with Ruby this the packing is using a different format.</p>

<p>You're help will be appreciated.</p>",python|ruby|packing,"<p>Ruby <code>pack('N')</code> converts to a network-order (big-endian) 32bit unsigned. python <code>struct('d')</code> converts to an IEEE double precision float.  I think you want <code>struct('&gt;I')</code> for the equivalent <a href=""http://docs.python.org/library/struct.html"" rel=""nofollow"">big endian 32 bit unsigned in python</a>.</p>",1
304,9970240,"How do I use Python to pack a big integer treating four characters as an unsigned long in network byte order as Ruby's .pack(""N"") does?","<p>This is the bit of Ruby I want to implement in Python:</p>

<pre><code>Base64.urlsafe_encode64([Digest::MD5.hexdigest(url).to_i(16)].pack(""N"")).sub(/==\n?$/, '')
</code></pre>

<p>You see, this helps turn a URL like this:</p>

<pre><code>http://stackoverflow.com/questions/ask
</code></pre>

<p>Into a small code like thise:</p>

<pre><code>sUEBtw
</code></pre>

<p>The big integer that gets generated in the process is this:</p>

<pre><code>307275247029202263937236026733300351415
</code></pre>

<p>I've been able to pack this into binary form using this Python code:</p>

<pre><code>url = 'http://stackoverflow.com/questions/ask'
n = int(hashlib.md5(url).hexdigest(), 16)                                       
s = struct.Struct('d')                                                          
values = [n]                                                                    
packed_data = s.pack(*values)                                                   
short_code = base64.urlsafe_b64encode(packed_data)[:-1]
print short_code
</code></pre>

<p>The short code I get is this:</p>

<pre><code>zgMM62Hl7Ec
</code></pre>

<p>As you can see it's larger than the one I get with Ruby this the packing is using a different format.</p>

<p>You're help will be appreciated.</p>",python|ruby|packing,"<p>This does the trick:</p>

<pre><code>import hashlib
import base64
url = 'http://stackoverflow.com/questions/ask'
print base64.urlsafe_b64encode(hashlib.md5(url).digest()[-4:])[:-2]
</code></pre>

<h3>Output</h3>

<pre><code>sUEBtw
</code></pre>

<p><code>.digest()</code> gives the packed bytes of the full 16-byte digest so no need for <code>struct.pack</code>, but it seems Ruby's <code>.pack('N')</code> only converts the last four bytes of the digest.</p>",2
305,9876927,Recursion and appending to lists,"<p>I'm having trouble with a program, the program takes one word, and changing one letter at a time, converts that word into the target word. Although, keep in mind that the converted word must be a legal word according to a dictionary of words that I've been given.</p>

<p>I'm having trouble figuring out how to make it recursive. The program has a limit to the amount of steps it must take.</p>

<p>The output needs to be a list. So if the parameters for the function changeling are<br>
changeling(""find"",""lose""), the output should be:
    ['find','fine','line','lone','lose'].</p>

<p>with my current code:</p>

<pre><code>def changeling(word,target,steps):
holderlist=[]
i=0
if steps&lt;0 and word!=target:
    return None

if steps!=-1:
    for items in wordList:
        if len(items)==len(word):
            i=0

            if items!=word:
                for length in items:

                    if i==1:
                        if items[1]==target[1] and items[0]==word[0] and items[2:]==word[2:]:
                            if items==target:
                                print ""Target Achieved""
                                holder.list.append(target)
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))


                    elif i&gt;0 and i&lt;len(word)-1 and i!=1:
                        if items[i]==target[i] and items[0:i]==word[0:i] and items[i+1:]==word[i+1:]:
                            if items==target:
                                print ""Target Achieved""
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))


                    elif i==0:
                        if items[0]==target[0] and items[1:]==word[1:]:
                            if items==target:
                                print ""Target Achieved""
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))


                    elif i==len(word)-1:
                        if items[len(word)-1]==target[len(word)-1] and items[0:len(word)-1]==word[0:len(word)-1]:
                            if items==target:
                                print ""Target Achieved""
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))

                    else:
                        return None

                    i+=1

return holderlist
</code></pre>

<p>I receive a messy output:
['fine', ['line', ['lone', ['lose', []]]], 'fond', []]</p>

<p>I get the answer I wanted, but I'm not sure how to a)clean it up, by not having lists within lists. and b)fond appears, because when find is called it gives fine and fond, fine is the one that ends up with the target word, and fond fails, but I'm not sure how to get rid of it once I've appended it to the holderlist.</p>

<p>Any help would be appreciated.</p>

<p>Cheers.</p>",python|list|loops|recursion|append,"<p>Here's an alternative implementation.  It doesn't use recursion, but instead permutations. It's been rewritten to pass the wordlist rather than rely on the global wordlist, which should make it more portable. This implementation relies strictly on generators, too, which ensures a smaller memory footprint than expanding lists (as in the extend/append solution)</p>

<pre><code>import itertools

somelists = [['find','fine','line','lone','lose'],
            ['bank','hank','hark','lark','lurk'],
            ['tank','sank','sink','sing','ding']]

def changeling(word, target, wordlist):
    def difference(word, target):
        return len([i for i in xrange(len(word)) if word[i] != target[i]])

    for length in xrange(1, len(wordlist) + 1):
        for possibilities in [j for j in itertools.permutations(wordlist, length) if j[0] is word and j[-1] is target]:
            #computes all permutations and discards those whose initial word and target word don't match parameters
            if all(difference(possibilities[i], possibilities[i+1]) == 1 for i in xrange(0, len(possibilities) - 1)):
                #checks that all words are exactly one character different from previous link
                return possibilities
                #returns first result that is valid; this can be changed to yield if you wish to have all results

for w in somelists:
    print ""from '%s' to '%s' using only %s"" % (w[-2], w[0], w)
    print changeling(w[-2], w[0], w)
    print 
</code></pre>

<p><code>w[-2], w[0]</code> can be modified/replaced to match any words you choose</p>",1
306,9876927,Recursion and appending to lists,"<p>I'm having trouble with a program, the program takes one word, and changing one letter at a time, converts that word into the target word. Although, keep in mind that the converted word must be a legal word according to a dictionary of words that I've been given.</p>

<p>I'm having trouble figuring out how to make it recursive. The program has a limit to the amount of steps it must take.</p>

<p>The output needs to be a list. So if the parameters for the function changeling are<br>
changeling(""find"",""lose""), the output should be:
    ['find','fine','line','lone','lose'].</p>

<p>with my current code:</p>

<pre><code>def changeling(word,target,steps):
holderlist=[]
i=0
if steps&lt;0 and word!=target:
    return None

if steps!=-1:
    for items in wordList:
        if len(items)==len(word):
            i=0

            if items!=word:
                for length in items:

                    if i==1:
                        if items[1]==target[1] and items[0]==word[0] and items[2:]==word[2:]:
                            if items==target:
                                print ""Target Achieved""
                                holder.list.append(target)
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))


                    elif i&gt;0 and i&lt;len(word)-1 and i!=1:
                        if items[i]==target[i] and items[0:i]==word[0:i] and items[i+1:]==word[i+1:]:
                            if items==target:
                                print ""Target Achieved""
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))


                    elif i==0:
                        if items[0]==target[0] and items[1:]==word[1:]:
                            if items==target:
                                print ""Target Achieved""
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))


                    elif i==len(word)-1:
                        if items[len(word)-1]==target[len(word)-1] and items[0:len(word)-1]==word[0:len(word)-1]:
                            if items==target:
                                print ""Target Achieved""
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))

                    else:
                        return None

                    i+=1

return holderlist
</code></pre>

<p>I receive a messy output:
['fine', ['line', ['lone', ['lose', []]]], 'fond', []]</p>

<p>I get the answer I wanted, but I'm not sure how to a)clean it up, by not having lists within lists. and b)fond appears, because when find is called it gives fine and fond, fine is the one that ends up with the target word, and fond fails, but I'm not sure how to get rid of it once I've appended it to the holderlist.</p>

<p>Any help would be appreciated.</p>

<p>Cheers.</p>",python|list|loops|recursion|append,"<p>If you're trying to add a list to a list, you probably want <code>extend</code> rather than <code>append</code>.</p>

<p><a href=""http://docs.python.org/library/stdtypes.html#mutable-sequence-types"" rel=""nofollow"">http://docs.python.org/library/stdtypes.html#mutable-sequence-types</a></p>",3
307,9876927,Recursion and appending to lists,"<p>I'm having trouble with a program, the program takes one word, and changing one letter at a time, converts that word into the target word. Although, keep in mind that the converted word must be a legal word according to a dictionary of words that I've been given.</p>

<p>I'm having trouble figuring out how to make it recursive. The program has a limit to the amount of steps it must take.</p>

<p>The output needs to be a list. So if the parameters for the function changeling are<br>
changeling(""find"",""lose""), the output should be:
    ['find','fine','line','lone','lose'].</p>

<p>with my current code:</p>

<pre><code>def changeling(word,target,steps):
holderlist=[]
i=0
if steps&lt;0 and word!=target:
    return None

if steps!=-1:
    for items in wordList:
        if len(items)==len(word):
            i=0

            if items!=word:
                for length in items:

                    if i==1:
                        if items[1]==target[1] and items[0]==word[0] and items[2:]==word[2:]:
                            if items==target:
                                print ""Target Achieved""
                                holder.list.append(target)
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))


                    elif i&gt;0 and i&lt;len(word)-1 and i!=1:
                        if items[i]==target[i] and items[0:i]==word[0:i] and items[i+1:]==word[i+1:]:
                            if items==target:
                                print ""Target Achieved""
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))


                    elif i==0:
                        if items[0]==target[0] and items[1:]==word[1:]:
                            if items==target:
                                print ""Target Achieved""
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))


                    elif i==len(word)-1:
                        if items[len(word)-1]==target[len(word)-1] and items[0:len(word)-1]==word[0:len(word)-1]:
                            if items==target:
                                print ""Target Achieved""
                            holderlist.append(items)
                            holderlist.append(changeling(items,target,steps-1))

                    else:
                        return None

                    i+=1

return holderlist
</code></pre>

<p>I receive a messy output:
['fine', ['line', ['lone', ['lose', []]]], 'fond', []]</p>

<p>I get the answer I wanted, but I'm not sure how to a)clean it up, by not having lists within lists. and b)fond appears, because when find is called it gives fine and fond, fine is the one that ends up with the target word, and fond fails, but I'm not sure how to get rid of it once I've appended it to the holderlist.</p>

<p>Any help would be appreciated.</p>

<p>Cheers.</p>",python|list|loops|recursion|append,"<p>I'm not completely convinced that using <code>extend</code> instead of <code>append</code> will solve all your problems, because it seems like that may not account for making a change that does not lead to solving the word and requires backtracking.</p>

<p>If it turns out I am correct and the other answers don't end up working, here is a recursive function that will convert your current result into what you are looking for:</p>

<pre><code>def flatten_result(nested_list, target):
    if not nested_list:
        return None
    for word, children in zip(nested_list[::2], nested_list[1::2]):
        if word == target:
            return [word]
        children_result = flatten_result(children, target)
        if children_result:
            return [word] + children_result
    return None

&gt;&gt;&gt; result = ['fine', ['line', ['lone', ['lose', []]]], 'fond', []]
&gt;&gt;&gt; flatten_result(result, 'lose')
['fine', 'line', 'lone', 'lose']
</code></pre>",3
308,9757965,python - Accessing objects mocked with patch,"<p>I've been using the <code>mock</code> library to do some of my testing. It's been great so far, but there are some things that I haven't completely understand yet.</p>

<p><code>mock</code> provides a nice way of patching an entire method using <code>patch</code>, and I could access the patched object in a method like so:</p>

<pre><code>@patch('package.module')
def test_foo(self, patched_obj):
    # ... call patched_obj here
    self.assertTrue(patched_obj.called)
</code></pre>

<p>My question is, how do I access a patched object, if I use the <code>patch</code> decorator on an entire class?</p>

<p>For example:</p>

<pre><code>@patch('package.module')
class TestPackage(unittest.TestCase):

    def test_foo(self):
        # how to access the patched object?
</code></pre>",python|unit-testing|testing|mocking,"<p>In this case, <code>test_foo</code> will have an extra argument, the same way as when you decorate the method. If your method is also patched, it those args will be added as well:</p>

<pre><code>@patch.object(os, 'listdir')
class TestPackage(unittest.TestCase):
    @patch.object(sys, 'exit')
    def test_foo(self, sys_exit, os_listdir):
        os_listdir.return_value = ['file1', 'file2']
        # ... Test logic
        sys_exit.assert_called_with(1)
</code></pre>

<p>The arguments order is determined by the order of the decorators calls. The method decorator is called first, so it appends the first argument. The class decorator is outer, so it will add a second argument. The same applies when you attach several patch decorators to the same test method or class (i.e. the outer decorator goes last).</p>",8
309,9970158,Significance of double underscores in Python filename,"<p>Other than for <code>__init__.py</code> files, do the leading and trailing double underscores have any significance in a file name? For example, is <code>__model__.py</code> in any way more significant than <code>model.py</code>?</p>",python,"<p>Double underscores in filenames other than <code>__init__.py</code> and <a href=""https://stackoverflow.com/questions/4042905/what-is-main-py""><code>__main__.py</code></a> have no significance to Python itself, but frameworks may use them to indicate/identify various things.</p>",8
310,9970158,Significance of double underscores in Python filename,"<p>Other than for <code>__init__.py</code> files, do the leading and trailing double underscores have any significance in a file name? For example, is <code>__model__.py</code> in any way more significant than <code>model.py</code>?</p>",python,"<p>Ahhh! I see you've discovered magic methods.</p>

<p>The double underscores are called ""dunder"" and they invoke special methods which can have some really neat effects on objects. They don't change significance, but they are pretty amazing voodoo, and a good tool to have on your belt.</p>

<p>Here's a link of many links, I learned all about magic methods through here.
<a href=""http://pythonconquerstheuniverse.wordpress.com/2012/03/09/pythons-magic-methods/"" rel=""nofollow"">http://pythonconquerstheuniverse.wordpress.com/2012/03/09/pythons-magic-methods/</a></p>

<p><code>__init__</code> is a magic method for declaring stuff to happen on initialization of an object. It only preceded by <code>__new__</code>.</p>

<p>The most useful of these methods I've been using is the <code>__dict__</code> method. The <code>__dict__</code> method makes it so that all attributes in a class turn into key value pairs that can then be used like a dictionary. Although I don't think using it as a file name would be useful.</p>

<p>here's an example:</p>

<pre><code>class Thing(object):
    def __init__(self): ##Init here is a magic method that determines what haps first
        self.tint = ""black""
        self.color = ""red""
        self.taste = ""tangy""

thing = Thing()
dictionary_from_class = {}
for key in thing.__dict__.keys(): ##returns all key values. here: ""tint, color, taste""
    dictionary_from_class[key] = thing.__dict__[key]
</code></pre>

<p>Fire up Idle in python, and try that out. Good luck in practicing python voodoo!</p>

<p><strong>EDITED</strong></p>

<p>Sorry, I really quickly read your question, let me mention this because I may have not covered it in my answer: If the filename is <code>__init__.py</code>, it does a similar thing, to what I mention before. It invokes the Initialization, and python will do that stuff as soon as the folder is reached for module usage. That is if you are reading off that file because it was called, such as referring to a folder of modules, and in that case you NEED a <code>__init__.py</code> file just to get python to recognize it inside the folder. You can use any of the magic methods as names to get a similar functionality upon usage.</p>

<p>I hope that clarification was useful.</p>

<p>-Joseph</p>",0
311,9889244,Pyramid (Python): Override default error view,"<p>Task: When an error occurs in one of my views I need to show a custom error view. The error type does not matter.</p>

<p>I tried to override all exceptions by registring a view for all exceptions, like this:</p>

<pre><code>&lt;view
    context=""Exception""
    renderer=""server_error.pt""
    /&gt;
</code></pre>

<p>It worked <strong>good</strong>. All exceptions were showing my view. But the problem was that those <strong>errors stopped logging</strong>. Of cource I can do something like logger.error(traceback) in my error view, but this is a dumb idea.</p>

<p>How can I register a view for all errors without breaking the logging pyramid system.</p>",python|views|pyramid|error-logging,"<p>The plugin <a href=""https://docs.pylonsproject.org/projects/pyramid-exclog/en/latest/"" rel=""nofollow noreferrer"">pyramid_exclog</a> fills this purpose very well. </p>

<p>It is implemented as a tween so that you can still write a view for <code>Exception</code> and it will log the details of the exception to whatever log handler you specify in your pyramid configuration file - weather that is to the console, a file or an email.</p>

<p>In addition to the <a href=""https://docs.pylonsproject.org/projects/pyramid-exclog/en/latest/"" rel=""nofollow noreferrer"">pyramid_exclog</a> documentation I also found the Python <a href=""https://docs.python.org/3/library/logging.config.html#configuration-file-format"" rel=""nofollow noreferrer"">Configuration file format</a> section of the Python documentation very helpful since the config is a quite tricky to get right.</p>",0
312,9889244,Pyramid (Python): Override default error view,"<p>Task: When an error occurs in one of my views I need to show a custom error view. The error type does not matter.</p>

<p>I tried to override all exceptions by registring a view for all exceptions, like this:</p>

<pre><code>&lt;view
    context=""Exception""
    renderer=""server_error.pt""
    /&gt;
</code></pre>

<p>It worked <strong>good</strong>. All exceptions were showing my view. But the problem was that those <strong>errors stopped logging</strong>. Of cource I can do something like logger.error(traceback) in my error view, but this is a dumb idea.</p>

<p>How can I register a view for all errors without breaking the logging pyramid system.</p>",python|views|pyramid|error-logging,"<p>It is not dumb to log the exception in your own error view (the exception will be available as <code>request.context</code>.) As is always the case with exceptions, you can either do nothing, handle the exception and log it, or re-raise the same exception.</p>

<p>In my setup, an uncaught exception is logged by the WSGI server itself, in this case wsgiref. It's not possible to trigger both the WSGI server's normal response mechanism and its exception logger.</p>

<p>wsgiref's exception logger:</p>

<pre><code>def log_exception(self,exc_info):
    """"""Log the 'exc_info' tuple in the server log

    Subclasses may override to retarget the output or change its format.
    """"""
    try:
        from traceback import print_exception
        stderr = self.get_stderr()
        print_exception(
            exc_info[0], exc_info[1], exc_info[2],
            self.traceback_limit, stderr
        )
        stderr.flush()
    finally:
        exc_info = None
</code></pre>

<p>One alternative that may be acceptable to you is to display your custom error page at the web server layer instead of at the Pyramid layer.</p>",2
313,9889244,Pyramid (Python): Override default error view,"<p>Task: When an error occurs in one of my views I need to show a custom error view. The error type does not matter.</p>

<p>I tried to override all exceptions by registring a view for all exceptions, like this:</p>

<pre><code>&lt;view
    context=""Exception""
    renderer=""server_error.pt""
    /&gt;
</code></pre>

<p>It worked <strong>good</strong>. All exceptions were showing my view. But the problem was that those <strong>errors stopped logging</strong>. Of cource I can do something like logger.error(traceback) in my error view, but this is a dumb idea.</p>

<p>How can I register a view for all errors without breaking the logging pyramid system.</p>",python|views|pyramid|error-logging,"<p>You can log the error in your view via the plain old python logging. Or Set the status on the response to 500 (assuming your view is now return a status of 200 which indicates a successful response ). </p>

<p>Edit: working example</p>

<p>I'm not a logging expert, but I was under the impression that your logging config in development.ini/production.ini would be picked up, the example below seems to prove that but you be the judge.....</p>

<p>changes to log config from default</p>

<pre><code>[formatter_generic]
# format = %(asctime)s %(levelname)-5.5s [%(name)s][%(threadName)s] %(message)s
format = y u no work??!!?? %(message)s
# End logging configuration
</code></pre>

<p>the views</p>

<pre><code>from pyramid.view import view_config
from webob import Response
import logging
log = logging.getLogger(__name__)

@view_config(route_name='home', renderer='templates/mytemplate.pt')
def my_view(request):
    raise ValueError(""oops"")
    return {'project':'tstLogError'}


@view_config(context=Exception)
def exception_view(context, request):
    log.error(""The error was: %s"" % context, exc_info=(context))
    return Response(status_int=500, body=str(context))

    from pyramid.view import view_config
    from webob import Response
</code></pre>

<p>console output:</p>

<pre><code>serving on http://0.0.0.0:6543
y u no work??!!?? The error was: oops
Traceback (most recent call last):
  File ""/home/twillis/projects/TestLogError/local/lib/python2.7/site-packages/pyramid/tweens.py"", line 20, in excview_tween
    response = handler(request)
  File ""/home/twillis/projects/TestLogError/local/lib/python2.7/site-packages/pyramid/router.py"", line 164, in handle_request
    response = view_callable(context, request)
  File ""/home/twillis/projects/TestLogError/local/lib/python2.7/site-packages/pyramid/config/views.py"", line 333, in rendered_view
    result = view(context, request)
  File ""/home/twillis/projects/TestLogError/local/lib/python2.7/site-packages/pyramid/config/views.py"", line 471, in _requestonly_view
    response = view(request)
  File ""/home/twillis/projects/TestLogError/tstLogError/tstlogerror/views.py"", line 8, in my_view
    raise ValueError(""oops"")
ValueError: oops
</code></pre>

<p><img src=""https://i.stack.imgur.com/3GHzj.png"" alt=""browser screenshot""></p>",3
314,10115525,Memory Error when calculating pairwise distances in scipy,"<p>I am trying to apply hierarchial clustering to my dataset which consists of 14039 vectors of users. Each vector has 10 features, where each feature is basically frequency of tags tagged by that user.
I am using Scipy api for clustering. 
Now I need to calculate pairwise distances between these 14039 users and pass tis distance matrix to linkage function.</p>

<pre><code>  import scipy.cluster.hierarchy as sch
  Y = sch.distance.pdist( allUserVector,'cosine')
  set_printoptions(threshold='nan')
  print Y
</code></pre>

<p>But my program gives me MemoryError while calculating the distance matrix itself </p>

<pre><code>  File ""/usr/lib/pymodules/python2.7/numpy/core/numeric.py"", line 1424, in array_str
    return array2string(a, max_line_width, precision, suppress_small, ' ', """", str)
  File ""/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py"", line 306, in array2string
    separator, prefix)
  File ""/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py"", line 210, in _array2string
    format_function = FloatFormat(data, precision, suppress_small)
  File ""/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py"", line 392, in __init__
    self.fillFormat(data)
  File ""/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py"", line 399, in fillFormat
    non_zero = absolute(data.compress(not_equal(data, 0) &amp; ~special))
MemoryError
</code></pre>

<p>Any idea how to fix this? Is my dataset too large? But I guess clustering 14k users shouldnt be too much that it should cause Memory error.
I am running it on i3 and 4 Gb Ram.
I need to apply DBScan clustering too, but that too needs distance matrix as input.</p>

<p>Any suggestions appreciated.</p>

<p>Edit: I get the error only when I print Y. Any ideas why?</p>",python|numpy|scipy|cluster-analysis,"<p>Well, hierarchical clustering doesn't make that much sense for large datasets. It's actually mostly a textbook example in my opinion. The problem with hierarchical clustering is that it doesn't really build sensible clusters. It builds a dendrogram, but with 14000 objects the dendrogram becomes pretty much unusable. And very few implementations of hierarchical clustering have non-trivial methods to extract sensible clusters from the dendrogram. Plus, in the general case, hierarchical clustering is of complexity <code>O(n^3)</code> which makes it scale really bad to large datasets.</p>

<p>DBSCAN technically does <em>not</em> need a distance matrix. In fact, when you use a distance matrix, it will be <em>slow</em>, as computing the distance matrix already is <code>O(n^2)</code>. And even then, you can safe the <code>O(n^2)</code> memory cost for DBSCAN by computing the distances on the fly at the cost of computing distances twice each. DBSCAN visits each point once, so there is next to no benefit from using a distance matrix except the symmetry gain. And technically, you could do some neat caching tricks to even reduce that, since DBSCAN also just needs to know which objects are below the epsilon threshold. When the epsilon is chosen reasonably, managing the neighbor sets on the fly will use significantly less memory than <code>O(n^2)</code> at the same CPU cost of computing the distance matrix.</p>

<p>Any really good implementation of DBSCAN (it is spelled all uppercase, btw, as it is an abbreviation, not a scan) however should have support for index structures and then run in <code>O(n log n)</code> runtime.</p>

<p>On <a href=""http://elki.dbs.ifi.lmu.de/wiki/Benchmarking"" rel=""noreferrer"">http://elki.dbs.ifi.lmu.de/wiki/Benchmarking</a> they run DBSCAN on a 110250 object dataset and 8 dimensions, and the non-indexed variant takes 1446 seconds, the one with index just 219. That is about 7 times faster, including index buildup. (It's not python, however) Similarly, OPTICS is 5 times faster with the index. And their kmeans implementation in my experiments was around 6x faster than WEKA kmeans and using much less memory. Their single-link hierarchical clustering also is an optimized <code>O(n^2)</code> implementation. Actually the only one I've seen so far that is not the naive <code>O(n^3)</code> matrix-editing approach.
If you are willing to go beyond python, that might be a good choice.</p>",5
315,10115525,Memory Error when calculating pairwise distances in scipy,"<p>I am trying to apply hierarchial clustering to my dataset which consists of 14039 vectors of users. Each vector has 10 features, where each feature is basically frequency of tags tagged by that user.
I am using Scipy api for clustering. 
Now I need to calculate pairwise distances between these 14039 users and pass tis distance matrix to linkage function.</p>

<pre><code>  import scipy.cluster.hierarchy as sch
  Y = sch.distance.pdist( allUserVector,'cosine')
  set_printoptions(threshold='nan')
  print Y
</code></pre>

<p>But my program gives me MemoryError while calculating the distance matrix itself </p>

<pre><code>  File ""/usr/lib/pymodules/python2.7/numpy/core/numeric.py"", line 1424, in array_str
    return array2string(a, max_line_width, precision, suppress_small, ' ', """", str)
  File ""/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py"", line 306, in array2string
    separator, prefix)
  File ""/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py"", line 210, in _array2string
    format_function = FloatFormat(data, precision, suppress_small)
  File ""/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py"", line 392, in __init__
    self.fillFormat(data)
  File ""/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py"", line 399, in fillFormat
    non_zero = absolute(data.compress(not_equal(data, 0) &amp; ~special))
MemoryError
</code></pre>

<p>Any idea how to fix this? Is my dataset too large? But I guess clustering 14k users shouldnt be too much that it should cause Memory error.
I am running it on i3 and 4 Gb Ram.
I need to apply DBScan clustering too, but that too needs distance matrix as input.</p>

<p>Any suggestions appreciated.</p>

<p>Edit: I get the error only when I print Y. Any ideas why?</p>",python|numpy|scipy|cluster-analysis,"<p>It's possible that you really are running out of RAM. Finding pairwise distances between N objects means storing N^2 distances. In your case, N^2 is going to be 14039 ^ 2 = 1.97 * 10^8. If we assume that each distance takes only four bytes (which is almost certainly not the case, as they have to be held in some sort of data structure which may have non-constant overhead) that works out to 800 megabytes. That's a lot of memory for the interpreter to be working with. 32-bit architectures only allow up to 2 GB of process memory, and just your raw data is taking up around 50% of that. With the overhead of the data structure you could be looking at usage much higher than that -- I can't say how much because I don't know the memory model behind SciPy/numpy.  </p>

<p>I would try breaking your data sets up into smaller sets, or not constructing the full distance matrix. You can break it down into more manageable chunks (say, 14 subsets of around 1000 elements) and do nearest-neighbor between each chunk and all of the vectors -- then you're looking at loading an order of magnitude less into memory at any one time (14000 * 1000, 14 times instead of 14000 * 14000 once).</p>

<p><strong>Edit:</strong> agf is completely right on both counts: I missed your edit, and the problem probably comes about when it tries to construct the giant string that represents your matrix. If it's printing floating point values, and we assume 10 characters are printed per element and the string is stored with one byte per character, then you're looking at exactly 2 GB of memory usage just for the string.</p>",5
316,10156386,IDLE won't highlight my syntax,"<p>Using IDLE and Python version 2.7.3. Only when I start a new file it highlights for a few lines and then just stops after I press F5. So all my text becomes plain black.</p>

<p>If there are equally good/better  command line and editor combinations out there, you may always suggest them.</p>",python|syntax-highlighting|python-idle,<p>I usually have to save the file as .py before IDLE will do any syntax highlighting at all.  Not sure why it would highlight for a few and then stop though.  I've never had that happen.  </p>,6
317,10156386,IDLE won't highlight my syntax,"<p>Using IDLE and Python version 2.7.3. Only when I start a new file it highlights for a few lines and then just stops after I press F5. So all my text becomes plain black.</p>

<p>If there are equally good/better  command line and editor combinations out there, you may always suggest them.</p>",python|syntax-highlighting|python-idle,"<p>Is this under Windows? Is it possible your file association for Python files have possibly changed? (not quite sure why/how this could happen, but perhaps something worth checking)</p>",2
318,10156386,IDLE won't highlight my syntax,"<p>Using IDLE and Python version 2.7.3. Only when I start a new file it highlights for a few lines and then just stops after I press F5. So all my text becomes plain black.</p>

<p>If there are equally good/better  command line and editor combinations out there, you may always suggest them.</p>",python|syntax-highlighting|python-idle,"<p>Check the key binding for the <strong>toggle-auto-coloring</strong> option under <strong>Options</strong> -> <strong>Configure IDLE</strong> -> <strong>Keys</strong> -> <strong>Custom Key Bindings</strong>. The default is <kbd>Ctrl</kbd>+<kbd>/</kbd>. This should allow you to turn the syntax highlighting back on. (You can't toggle it off though, heh)</p>

<p>Works for me on both IDLE 2.7 and IDLE 3.3.3.</p>",6
319,10156386,IDLE won't highlight my syntax,"<p>Using IDLE and Python version 2.7.3. Only when I start a new file it highlights for a few lines and then just stops after I press F5. So all my text becomes plain black.</p>

<p>If there are equally good/better  command line and editor combinations out there, you may always suggest them.</p>",python|syntax-highlighting|python-idle,"<p>This happened to me too. Save it as .py (manually type .py in the document name), and the highlighting will come back.</p>",17
320,10200732,Django Deploy using Heroku - [Errno 2] No such file or directory,"<p>I get this error ([Errno 2] No such file or directory) after I push the repo to heroku master. Here are my logs.  </p>

<pre><code>2012-04-17T18:24:53+00:00 app[web.1]: python: can't open file '/test/project/manage.py': [Errno 2]     No such file or directory

2012-04-17T18:24:54+00:00 heroku[web.1]: Process exited with status 2

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from starting to crashed

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from crashed to created

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from created to starting

2012-04-17T18:24:57+00:00 heroku[web.1]: Starting process with command python /test/project/manage.py runserver 0.0.0.0:4473 --noreload 2012-04-17T18:24:57+00:00 app[web.1]: python: can't open file '/test/project/manage.py': [Errno 2] No such file or directory
</code></pre>

<p>My Procfile looks like the following:</p>

<pre><code>web: python /test/project/manage.py runserver 0.0.0.0:$PORT --noreload
</code></pre>

<p>I don't know why it can't open the file.  It opens fine when I am using my development server. Any ideas?  Thanks for reading. </p>",python|django|heroku,"<p>Your current setup in your Procfile references an absolute path '/test/project/manage.py' that doesn't exist on Heroku. The '/test/ is the root of the instance you're running in and is incorrect. You should first change this to be the relative path, this is likely something like:</p>

<pre><code>web: python project/manage.py runserver 0.0.0.0:$PORT --noreload
</code></pre>

<p>If this does not work you can explore the location of the project by running:</p>

<pre><code>heroku run bash
</code></pre>

<p>This should place you in '/app' from here you can see what the path to start your project is.</p>

<p>Since your initial push likely failed to start the process you'll likely need to scale a web process. You can then do this with:</p>

<pre><code>heroku scale web=1
</code></pre>",11
321,10200732,Django Deploy using Heroku - [Errno 2] No such file or directory,"<p>I get this error ([Errno 2] No such file or directory) after I push the repo to heroku master. Here are my logs.  </p>

<pre><code>2012-04-17T18:24:53+00:00 app[web.1]: python: can't open file '/test/project/manage.py': [Errno 2]     No such file or directory

2012-04-17T18:24:54+00:00 heroku[web.1]: Process exited with status 2

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from starting to crashed

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from crashed to created

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from created to starting

2012-04-17T18:24:57+00:00 heroku[web.1]: Starting process with command python /test/project/manage.py runserver 0.0.0.0:4473 --noreload 2012-04-17T18:24:57+00:00 app[web.1]: python: can't open file '/test/project/manage.py': [Errno 2] No such file or directory
</code></pre>

<p>My Procfile looks like the following:</p>

<pre><code>web: python /test/project/manage.py runserver 0.0.0.0:$PORT --noreload
</code></pre>

<p>I don't know why it can't open the file.  It opens fine when I am using my development server. Any ideas?  Thanks for reading. </p>",python|django|heroku,"<p>Try using <a href=""http://docs.python.org/library/os.path.html#os.path.join"" rel=""nofollow"">os.path</a> to join the elements of the path., btw have you try it to change the ProcFile to read from worker? <code>python hellodjango/manage.py</code></p>

<p>Edit later:</p>

<p>Try to run this three commands in order to make heroku master:</p>

<ul>
<li><p><code>pip install -r ./requirements.txt</code></p></li>
<li><p><code>foreman start</code></p></li>
<li><p><code>heroku create mempy-demo --stac=cedar</code></p></li>
<li><p>git push heroku master</p></li>
</ul>

<p>Now test a simple 'Hello World':</p>

<pre><code>$ curl mempy-demo.herokuapp.com
</code></pre>",0
322,10200732,Django Deploy using Heroku - [Errno 2] No such file or directory,"<p>I get this error ([Errno 2] No such file or directory) after I push the repo to heroku master. Here are my logs.  </p>

<pre><code>2012-04-17T18:24:53+00:00 app[web.1]: python: can't open file '/test/project/manage.py': [Errno 2]     No such file or directory

2012-04-17T18:24:54+00:00 heroku[web.1]: Process exited with status 2

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from starting to crashed

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from crashed to created

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from created to starting

2012-04-17T18:24:57+00:00 heroku[web.1]: Starting process with command python /test/project/manage.py runserver 0.0.0.0:4473 --noreload 2012-04-17T18:24:57+00:00 app[web.1]: python: can't open file '/test/project/manage.py': [Errno 2] No such file or directory
</code></pre>

<p>My Procfile looks like the following:</p>

<pre><code>web: python /test/project/manage.py runserver 0.0.0.0:$PORT --noreload
</code></pre>

<p>I don't know why it can't open the file.  It opens fine when I am using my development server. Any ideas?  Thanks for reading. </p>",python|django|heroku,"<p>you can attach an <code>ls</code> to heroku to find out the actual structure of the file system.</p>

<pre><code>&gt; heroku run ls /
Running ls / attached to terminal... up, run.1
app  dev  home  lib64       mnt   sbin  usr
bin  etc  lib   lost+found  proc  tmp   var
</code></pre>

<p>It might be the case that they wrap your app inside an <code>app</code> directory</p>",1
323,10200732,Django Deploy using Heroku - [Errno 2] No such file or directory,"<p>I get this error ([Errno 2] No such file or directory) after I push the repo to heroku master. Here are my logs.  </p>

<pre><code>2012-04-17T18:24:53+00:00 app[web.1]: python: can't open file '/test/project/manage.py': [Errno 2]     No such file or directory

2012-04-17T18:24:54+00:00 heroku[web.1]: Process exited with status 2

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from starting to crashed

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from crashed to created

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from created to starting

2012-04-17T18:24:57+00:00 heroku[web.1]: Starting process with command python /test/project/manage.py runserver 0.0.0.0:4473 --noreload 2012-04-17T18:24:57+00:00 app[web.1]: python: can't open file '/test/project/manage.py': [Errno 2] No such file or directory
</code></pre>

<p>My Procfile looks like the following:</p>

<pre><code>web: python /test/project/manage.py runserver 0.0.0.0:$PORT --noreload
</code></pre>

<p>I don't know why it can't open the file.  It opens fine when I am using my development server. Any ideas?  Thanks for reading. </p>",python|django|heroku,"<p>You could do something like this to change the environment variables (e.g add it in your wsgi.py file if that's where the error originates):</p>

<pre><code>os.environ[""DJANGO_SETTINGS_MODULE""] = ""myblog.settings""                                                                
os.environ.setdefault(""DJANGO_SETTINGS_MODULE"", ""myblog.settings"")
</code></pre>",0
324,10175068,Select data at a particular level from a MultiIndex,"<p>I have the following Pandas Dataframe with a MultiIndex(Z,A):</p>

<pre><code>             H1       H2  
   Z    A 
0  100  200  0.3112   -0.4197   
1  100  201  0.2967   0.4893    
2  100  202  0.3084   -0.4873   
3  100  203  0.3069   NaN        
4  101  203  -0.4956  NaN       
</code></pre>

<p>Question: How can I select all items with A=203?
I tried <code>df[:,'A']</code>  but it doesn't work. Then I found <a href=""http://pandas.pydata.org/pandas-docs/stable/indexing.html#cross-section-with-hierarchical-index"" rel=""noreferrer"">this</a> in the online documentation so I tried:<br>
<code>df.xs(203,level='A')</code><br>
but I get:<br>
""<code>TypeError: xs() got an unexpected keyword argument 'level'</code>""<br>
Also I dont see this parameter in the installed doc(<code>df.xs?</code>):<br>
""Parameters ---------- key : object Some label contained in the index, or partially in a MultiIndex axis : int, default 0 Axis to retrieve cross-section on copy : boolean, default True Whether to make a copy of the data""<br>
Note:I have the development version.</p>

<p>Edit: I found <a href=""http://www.digipedia.pl/usenet/thread/16070/6393/"" rel=""noreferrer"">this thread</a>. They recommend something like:</p>

<pre><code>df.select(lambda x: x[1]==200, axis=0)  
</code></pre>

<p>I still would like to know what happened with df.xs with the level parameter or what is the recommended way in the current version.</p>",python|pandas,"<p>Not a <em>direct</em> answer to the question, but if you want to select more than one value you can use the ""slice()"" notation:</p>

<pre><code>import numpy
from pandas import  MultiIndex, Series

arrays = [['bar', 'bar', 'baz', 'baz', 'foo', 'foo', 'qux', 'qux'],
              ['one', 'two', 'one', 'two', 'one', 'two', 'one', 'two']]
tuples = list(zip(*arrays))
index = MultiIndex.from_tuples(tuples, names=['first', 'second'])
s = Series(numpy.random.randn(8), index=index)

In [10]: s
Out[10]:
first  second
bar    one       0.181621
       two       1.016225
baz    one       0.716589
       two      -0.353731
foo    one      -0.326301
       two       1.009143
qux    one       0.098225
       two      -1.087523
dtype: float64

In [11]: s.loc[slice(None)]
Out[11]:
first  second
bar    one       0.181621
       two       1.016225
baz    one       0.716589
       two      -0.353731
foo    one      -0.326301
       two       1.009143
qux    one       0.098225
       two      -1.087523
dtype: float64

In [12]: s.loc[slice(None), ""one""]
Out[12]:
first
bar      0.181621
baz      0.716589
foo     -0.326301
qux      0.098225
dtype: float64

In [13]: s.loc[""bar"", slice(None)]
Out[13]:
first  second
bar    one       0.181621
       two       1.016225
dtype: float64
</code></pre>",4
325,10175068,Select data at a particular level from a MultiIndex,"<p>I have the following Pandas Dataframe with a MultiIndex(Z,A):</p>

<pre><code>             H1       H2  
   Z    A 
0  100  200  0.3112   -0.4197   
1  100  201  0.2967   0.4893    
2  100  202  0.3084   -0.4873   
3  100  203  0.3069   NaN        
4  101  203  -0.4956  NaN       
</code></pre>

<p>Question: How can I select all items with A=203?
I tried <code>df[:,'A']</code>  but it doesn't work. Then I found <a href=""http://pandas.pydata.org/pandas-docs/stable/indexing.html#cross-section-with-hierarchical-index"" rel=""noreferrer"">this</a> in the online documentation so I tried:<br>
<code>df.xs(203,level='A')</code><br>
but I get:<br>
""<code>TypeError: xs() got an unexpected keyword argument 'level'</code>""<br>
Also I dont see this parameter in the installed doc(<code>df.xs?</code>):<br>
""Parameters ---------- key : object Some label contained in the index, or partially in a MultiIndex axis : int, default 0 Axis to retrieve cross-section on copy : boolean, default True Whether to make a copy of the data""<br>
Note:I have the development version.</p>

<p>Edit: I found <a href=""http://www.digipedia.pl/usenet/thread/16070/6393/"" rel=""noreferrer"">this thread</a>. They recommend something like:</p>

<pre><code>df.select(lambda x: x[1]==200, axis=0)  
</code></pre>

<p>I still would like to know what happened with df.xs with the level parameter or what is the recommended way in the current version.</p>",python|pandas,"<p>The problem lies in my assumption(incorrect) that I was in the dev version while in reality I had 1.6.1, one can check the current installed version with:</p>

<pre><code>import pandas
print pandas.__version__
</code></pre>

<p>in the current version <code>df.xs()</code> with the level parameter works ok.</p>",7
326,10461705,global/app lib folders import in Django,"<p>I have a Django structure like this (only showing libs):</p>

<pre><code>project/lib/ # Global libraries that will be used cross apps
project/lib/global_stuff.py
project/apps/app1/lib/special_for_app1.py
project/apps/app2/lib/special_for_app2.py
</code></pre>

<p>Some apps don't have a lib folder.</p>

<p><code>from apps.app1.lib import special_for_app1</code> works fine. But how can I import from the global lib folder when I am inside a folder already containing a local lib folder?</p>

<p>From inside the apps views.py file on one of the apps:</p>

<hr>

<pre><code>from lib import global_stuff
</code></pre>

<p>Gives me <code>ImportError: cannot import name global_stuff</code></p>

<hr>

<p>from .lib import global_stuff</p>

<p>Gives me <code>ImportError: cannot import name global_stuff</code></p>

<hr>

<pre><code>from ..lib import global_stuff
</code></pre>

<p>Gives me <code>ImportError: No module named lib</code></p>

<hr>

<pre><code>from ...lib import global_stuff
</code></pre>

<p>Gives me <code>ValueError: Attempted relative import beyond toplevel package</code></p>

<hr>

<pre><code>from project.lib import global_stuff
</code></pre>

<p>Works, but I really dont want to be stuck with using the project name itself in the import.</p>

<hr>

<p>Is there any way to solve this, not using the project name in the import, or changing the whole lib idea.</p>

<p>Or is there any other good practice to store the main part of the code?</p>",python|django,"<blockquote>
  <p>I really dont want to be stuck with using the project name itself in the import</p>
</blockquote>

<p>Why not? It's the best way. Note that 'relative imports for intra-package imports are highly discouraged', - as <a href=""http://www.python.org/dev/peps/pep-0008/#imports"" rel=""nofollow"">said in PEP-8</a>.</p>",3
327,10461705,global/app lib folders import in Django,"<p>I have a Django structure like this (only showing libs):</p>

<pre><code>project/lib/ # Global libraries that will be used cross apps
project/lib/global_stuff.py
project/apps/app1/lib/special_for_app1.py
project/apps/app2/lib/special_for_app2.py
</code></pre>

<p>Some apps don't have a lib folder.</p>

<p><code>from apps.app1.lib import special_for_app1</code> works fine. But how can I import from the global lib folder when I am inside a folder already containing a local lib folder?</p>

<p>From inside the apps views.py file on one of the apps:</p>

<hr>

<pre><code>from lib import global_stuff
</code></pre>

<p>Gives me <code>ImportError: cannot import name global_stuff</code></p>

<hr>

<p>from .lib import global_stuff</p>

<p>Gives me <code>ImportError: cannot import name global_stuff</code></p>

<hr>

<pre><code>from ..lib import global_stuff
</code></pre>

<p>Gives me <code>ImportError: No module named lib</code></p>

<hr>

<pre><code>from ...lib import global_stuff
</code></pre>

<p>Gives me <code>ValueError: Attempted relative import beyond toplevel package</code></p>

<hr>

<pre><code>from project.lib import global_stuff
</code></pre>

<p>Works, but I really dont want to be stuck with using the project name itself in the import.</p>

<hr>

<p>Is there any way to solve this, not using the project name in the import, or changing the whole lib idea.</p>

<p>Or is there any other good practice to store the main part of the code?</p>",python|django,"<p>You are correct for not wanting to associate the project name with the imports, so there is a common pattern for this:</p>

<pre><code>project/
  |__/source/
  |     |__/lib/
  |     |__/app/
  |__/deployment/  # code for your production deployment maybe
  |
  |__/docs/   
  |__/tests/
  |__README
  |__requirements.txt
</code></pre>

<p>and put  /path/to/project inside your paths on your virtualenv(you use virtualenv right?).</p>

<p>Then you can do inside your code</p>

<pre><code>from source.lib.blah import foo
from source.app.baz import bar
</code></pre>

<p>EDIT: This is only optimal if you don't release your code as open source of course. Only when you have an internal project where the management keeps changing the name of the project :D</p>",4
328,10548592,performance when converting an integer into its bytes characters representation in python,"<p>To be specific I need to convert an integer, say <code>9999</code>, into bytes, <code>b'9999'</code> in python 2.6 up to python 3.x</p>

<p>In python 2.x I do</p>

<pre><code>b'%s'%n
</code></pre>

<p>while in python 3.x</p>

<pre><code>('%s'%n).encode()
</code></pre>

<p>Performance in python 2.6</p>

<pre><code>&gt;&gt;&gt; from timeit import Timer
&gt;&gt;&gt; Timer('b""%s""%n','n=9999').timeit()
0.24728001750963813
</code></pre>

<p>Performance in python 3.2</p>

<pre><code>&gt;&gt;&gt; from timeit import Timer
&gt;&gt;&gt; Timer('(""%s""%n).encode()','n=9999').timeit()
0.534475012767416
</code></pre>

<p>Assuming my benchmarks are set up correctly, that is an hefty penalty in python 3.x.</p>

<p>Is there a way to improve performance to close the gap with 2.6/2.7?</p>

<p>Maybe via the <a href=""http://cython.org/"" rel=""nofollow"">cython</a> route?</p>

<p>This is the generator function I'm trying to optimize. It is called over and over with <code>args</code> being a list of strings, bytes or numbers:</p>

<pre><code>def pack_gen(self, args, encoding='utf-8'):
    crlf = b'\r\n'
    yield ('*%s\r\n'%len(args)).encode(encoding)
    for value in args:
        if not isinstance(value, bytes):
            value = ('%s'%value).encode(encoding)
        yield ('$%s\r\n'%len(value)).encode(encoding)
        yield value
        yield crlf
</code></pre>

<p>The function is called in this way</p>

<pre><code>b''.join(pack_gen(args))
</code></pre>",python|performance|python-3.x|type-conversion,"<p>I've got a little bit better results using repr() with Python 3.2:</p>

<pre><code>&gt;&gt;&gt; Timer('repr(n).encode()','n=9999').timeit()
0.32432007789611816
&gt;&gt;&gt; Timer('(""%s"" % n).encode()','n=9999').timeit()
0.44790005683898926
</code></pre>

<p>But of course it is not as flexible as <code>""%s"" % n</code>.</p>

<p>I've also checked Python 3.3.0a3 hoping that <a href=""http://www.python.org/dev/peps/pep-0393/"" rel=""nofollow"">PEP393</a> will speed up conversion a little but surprisingly I've got worse results than in 3.2:</p>

<pre><code>&gt;&gt;&gt; Timer('repr(n).encode()','n=9999').timeit()
0.35951611599921307
&gt;&gt;&gt; Timer('(""%s""%n).encode()','n=9999').timeit()
0.4658188759985933
</code></pre>

<p>Finally, following:</p>

<pre><code>&gt;&gt;&gt; Timer('str(n).encode()','n=9999').timeit()
0.49958825100111426
</code></pre>

<p>shows that most of the cost may be from function call overhead (from result above I'm assuming that Python implementation of <code>str()</code> for integer type calls <code>repr()</code> internally). So if you need to optimize at this level, then as you suggested, replacing whole code block using cython may be the way to go. Or better yet show us the loop you are trying to optimize, as there may be many other approaches to speed it up.</p>",0
329,10788661,Google App Engine vs WebFaction,"<p>Possible duplicates:
<a href=""https://stackoverflow.com/questions/3326308/gae-python-vs-webfaction-python-django-for-a-relative-new-dev"">GAE + Python vs Webfaction + Python + django - for a relative new dev</a></p>

<p>Hello,
I am developing one of my hobby project using django-nonrel on google app engine. The basic part of the application is finished. Now for the some advance features I need to use:</p>

<ol>
<li>Comet for Facebook like real time ticker</li>
<li>django-filetransfer for storing article with images and serving corresponding image when someone reading article</li>
<li>10-30 minutes of video contents once above two are done (Not decided yet whether there will be any limit of total videos on web application since thinking to make it possible to allow users to upload)</li>
</ol>

<p>So my questions are:</p>

<ol>
<li>I need comet for each and every user using my application and since GAE is having limitation on creation and free quota for channel creation and maximum rate(6 creations/minute). Is it going to cost me more if I host my application on GAE ? Does other hosting services such as <a href=""http://www.webfaction.com/"" rel=""nofollow noreferrer"">WebFaction</a> and <a href=""http://www.linode.com/"" rel=""nofollow noreferrer"">Linode</a> also charge if our application uses reverse Ajax ?</li>
<li>Since uploading images with article using django-filetransfers require me to enable billing, Is it the same case with other hosting services ?</li>
<li>Is GAE (as compared with WebFaction, linode or any other hosting sites) is cost-effective for application which allows users to upload video contents ?</li>
</ol>

<p>P.S.
Since I have used django-nonrel, hence at this point can easily change my hosting site. Once I start working on above mentioned functionality, it will be difficult for me move from one hosting site to another. Due to which I want to take best possible step. Also, I am from India and here paying 1 unit of Dollar will cost me more than 50 unit of Indian currency. So love to here the best deal with no compromise on performance :-)</p>

<p>Thanks for your time,</p>

<p>Sunil</p>",python|google-app-engine|webfaction,"<p>Other possible Python PaaS platforms worth evaluating: </p>

<ul>
<li>Heroku</li>
<li>DotCloud</li>
<li>More at <a href=""http://www.quora.com/What-is-the-Heroku-equivalent-for-Django-applications"" rel=""nofollow"">http://www.quora.com/What-is-the-Heroku-equivalent-for-Django-applications</a></li>
</ul>",2
330,10788661,Google App Engine vs WebFaction,"<p>Possible duplicates:
<a href=""https://stackoverflow.com/questions/3326308/gae-python-vs-webfaction-python-django-for-a-relative-new-dev"">GAE + Python vs Webfaction + Python + django - for a relative new dev</a></p>

<p>Hello,
I am developing one of my hobby project using django-nonrel on google app engine. The basic part of the application is finished. Now for the some advance features I need to use:</p>

<ol>
<li>Comet for Facebook like real time ticker</li>
<li>django-filetransfer for storing article with images and serving corresponding image when someone reading article</li>
<li>10-30 minutes of video contents once above two are done (Not decided yet whether there will be any limit of total videos on web application since thinking to make it possible to allow users to upload)</li>
</ol>

<p>So my questions are:</p>

<ol>
<li>I need comet for each and every user using my application and since GAE is having limitation on creation and free quota for channel creation and maximum rate(6 creations/minute). Is it going to cost me more if I host my application on GAE ? Does other hosting services such as <a href=""http://www.webfaction.com/"" rel=""nofollow noreferrer"">WebFaction</a> and <a href=""http://www.linode.com/"" rel=""nofollow noreferrer"">Linode</a> also charge if our application uses reverse Ajax ?</li>
<li>Since uploading images with article using django-filetransfers require me to enable billing, Is it the same case with other hosting services ?</li>
<li>Is GAE (as compared with WebFaction, linode or any other hosting sites) is cost-effective for application which allows users to upload video contents ?</li>
</ol>

<p>P.S.
Since I have used django-nonrel, hence at this point can easily change my hosting site. Once I start working on above mentioned functionality, it will be difficult for me move from one hosting site to another. Due to which I want to take best possible step. Also, I am from India and here paying 1 unit of Dollar will cost me more than 50 unit of Indian currency. So love to here the best deal with no compromise on performance :-)</p>

<p>Thanks for your time,</p>

<p>Sunil</p>",python|google-app-engine|webfaction,"<p>Google App Engine and webfaction/linode are unrelated beyond the point that they both ultimately host your application.</p>

<p>GAE is a cloud platform-as-service for hosting an app, which usually conforms to an API they expose to you for the individual services you would like to use. They give you the free tier and then make their money by raising the tiers. </p>

<p>Linode is simply a VPS (virtual private server). Its a virtual linux box and you are responsible for setting up the services. There is no API to your individual web service needs. Its just a linux platform for you to play freely. Need apache? nginx? mysql? mongodb? You need to install and configure those services.</p>

<p>Webfaction sits between GAE and linode, in that its also kind of a VPS, kind of shared, and kind of cloud. You get shell access, and it facilitates installing your services as ""apps"", handling the configuration for you in the control panel. But it too, like linode, is not a cloud platform in the way GAE is. You do not get an API to various services that equal what GAE offers.</p>

<p>App engine gives you the convenience of not having to manage an actual server, but rather focus on managing your app and the resources it requires. But they charge for using more of the services beyond the free tier.</p>

<p>Linode/Webfaction/VPS/... does not charge so specifically per resource. Part of your plan may be unlimited bandwidth, or maybe its 10GB per month, 20GB, etc. Maybe part of your plan is 128/256/512mb ram. You go with the plan you need and sometimes they let you add more storage/memory after the fact. But you are not paying per upload, or per API call, because they have no API.</p>

<p>The idea behind GAE (and similarly Amazon's services) is to provide a scalable platform for your service, to where you think less about hardware and more about adding more resources.</p>",9
331,12292687,Segmentation fault in skype.Attach() in Python and Skype4Py,"<p>I tried to run a simple python code for Skype4Py here's my code</p>

<pre><code>import Skype4Py
import logging

logging.basicConfig(level=logging.DEBUG)
print 'OK'
# Create Skype instance
print 'CREATE'
skype = Skype4Py.Skype()
print 'CREATED'

# Connect Skype object to Skype client
print 'CONNECT'
skype.Attach()
print 'CONNECTED'

print 'Your full name:', skype.CurrentUser.FullName
print 'Your contacts:'
for user in skype.Friends:
  print 'LOOP'
  print '    ', user.FullName
  print 'DONE'
</code></pre>

<p>and my output is this </p>

<pre><code>OK
CREATE
INFO:Skype4Py.skype.Skype:object created
INFO:Skype4Py.api.posix_dbus.SkypeAPI:opened
CREATED
CONNECT
INFO:Skype4Py.api.posix_dbus.SkypeAPI:thread started
Segmentation fault
Segmentation in skype.Attach().
</code></pre>

<p>Anyone knows how to solve this? Thanks</p>",linux|python-2.7|skype4py,"<p>Use X11 transport to avoid segmentation faults</p>

<p><a href=""https://github.com/opensourcehacker/sevabot/blob/master/sevabot/bot.py#L30"" rel=""nofollow"">https://github.com/opensourcehacker/sevabot/blob/master/sevabot/bot.py#L30</a></p>

<p>Also use patched version of Skype4Py and do not try to use anything provided by your Linux distribution</p>

<p><a href=""https://github.com/stigkj/Skype4Py"" rel=""nofollow"">https://github.com/stigkj/Skype4Py</a></p>

<p>More information about the segfaults with Skype4Py</p>

<p><a href=""https://github.com/opensourcehacker/sevabot#segfaults"" rel=""nofollow"">https://github.com/opensourcehacker/sevabot#segfaults</a></p>",1
332,12620748,Running two threads which are dependent on each other in a loop,"<p>I need to know how to write a program that runs two threads:
1. a thread the updates the position(values) of an object 
2. a thread that runs two methods in it based on the values from the first thread
All of this in a loop</p>

<p>This is the current code that I have and I want to changed as I described, not that the value are form the valueList and the activate(valueList) is a method that contains several smaller methods in it. If you don't mind i would love to have an example to solving this.Thanks</p>

<pre><code>client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect(('59.191.193.42',5555))


screenw = 0
screenh = 0
while 1:
    client_socket.send(""loc\n"")
    data = client_socket.recv(8192)
    valueList = data.split()

    if (not(valueList[-1] == ""eom"" and valueList[0] == ""start"")):
        #print ""continuing..""
            continue

        if(screenw != int(valueList[2])):
            screenw = int(valueList[2])
            screenh = int(valueList[3])

    activate(valueList)
</code></pre>",python|multithreading,"<p>As others have pointed out, It doesn't look like threading is actually going to solve your problem. Especially because Python code is subject to the <a href=""http://docs.python.org/c-api/init.html#threads"" rel=""nofollow"">Global Interpreter Lock</a>, which basically means theading will only help you if your code is IO-bound (reading large files from disk, waiting on a slow network connection, etc). If your program is CPU-bound and you really want to take advantage of parallel processing, <a href=""http://docs.python.org/library/multiprocessing.html"" rel=""nofollow"">multiprocessing</a> is the way to go. With multiprocessing, you trade some memory overhead and a little latency (when the process is created and during inter-process communication) for the ability to take advantage of multi-core CPUs. </p>

<p>Just on the off chance that parallel processing does turn out to be useful for your program, or you're just curious, I present the following code sample. Disclaimer, I haven't so much as tried to import this module, so consider it pseudocode. </p>

<pre><code>import socket
from multiprocessing import Process, Queue, Value
from ctypes import c_bool

HOST = '198.51.100.0'
PORT = 8080

# This function will be run in a child process
def update_proc(data_queue, update_queue, quit_flag):
    while not quit_flag.value:
        data = data_queue.get()
        # do something with the data...
        update_queue.put(data)
    print ""Closing child update process""

# This function will be run in a child process
def activate_proc(update_queue, quit_flag):
    while not quit_flag.value:
        data = update_queue.get()
        # do something with the data...
    print ""Closing child activate process""

# main process begins execution here, if module is run from the terminal
if __name__ == ""__main__"":
    # Connect to remote host over TCP
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client.connect((HOST,PORT))

    # Set up a Queue to pass data to the update process, and another one
    # for the two children to communicate
    data_queue = Queue()
    update_queue = Queue()

    # The quit_flag Value is a *very* primitive way to signal the child 
    # processes to quit. I'm sure there are better ways to do this, but I'm 
    # tired and can't think of any right now.
    quit_flag = Value(c_bool, False)

    # Create two child processes, pass a reference to the Queue to each
    update = Process(target=update_proc, args=(data_queue, update_queue, quit_flag))
    activate = Process(target=activate_proc, args=(update_queue, quit_flag))

    update.start()
    activate.start()

    # Read data from the TCP socket, push it onto the data_queue
    while True:
        client.sendall(""loc\n"")
        data = client.recv(8192)
        if not data:
            print ""network connection closed by client""
            break
        data_queue.put(data)

    # Join with child processes before closing
    print ""All done, closing child processes""
    update.join()
    activate.join()
</code></pre>",3
333,12398150,Django bootstrap button widget,"<p>Is there any way to create a widget that generates twitter bootstrap buttons? I am needing to put some buttons in the middle of the form. (or html that are not inputs)</p>

<p>Tried as follows:</p>

<pre><code>class BootstrapButtonWidget(forms.Widget):
    def render(self, value, attrs=None):
        return '&lt;a href=""#"" class=""btn btn-danger delete""&gt;%s&lt;/a&gt;' % (value,)


class BootstrapButton(forms.Field):
    def __init__(self, value,  *args, **kwargs):
        if not kwargs:
            kwargs = {}
        kwargs[""widget""] = BootstrapButtonWidget

        super(BootstrapButton, self).__init__(*args, **kwargs)

    def clean(self, value):
        return value
</code></pre>

<p>But I could not pass values​​. He always spends a ""value"".</p>

<p>I need to render a button like this:</p>

<pre><code>&lt;button type=""button"" class=""btn %s""&gt;%s&lt;/button&gt; % (btn_type, btn_text)
</code></pre>

<p>Rendered:</p>

<pre><code>&lt;button type=""button"" class=""btn btn-primary""&gt;Delete this&lt;/button&gt;
</code></pre>

<p><a href=""http://twitter.github.com/bootstrap/base-css.html#buttons"" rel=""nofollow"">http://twitter.github.com/bootstrap/base-css.html#buttons</a></p>",python|django|twitter-bootstrap|django-widget,"<p>I assume you're source is referencing <a href=""http://djangosnippets.org/snippets/2312/"" rel=""nofollow"">http://djangosnippets.org/snippets/2312/</a> or vice versa for your custom field. I missed the documentation on use, but at the top of the file it states:</p>

<pre><code>""""""
Usage:
SubmitButtonField(label="""", initial=u""Your submit button text"")
""""""
</code></pre>

<p>If you want a custom value or style, you must change the initial value you pass your BootstrapButton field.</p>",1
334,12511644,How do I test my implementation of LT codes?,"<p>Inspired by Nick Johnson's blog <a href=""http://blog.notdot.net/2012/01/Damn-Cool-Algorithms-Fountain-Codes"" rel=""nofollow"">Damn Cool Algorithms: Fountain Codes</a>, I decided to have a go at implementing a <a href=""http://en.wikipedia.org/wiki/Luby_transform_code"" rel=""nofollow"">Luby Transform (LT) code</a>. I just pushed it to <a href=""https://github.com/alexchamberlain/socket/tree/master/fountain"" rel=""nofollow"">GitHub</a>; it is written in Python 3.</p>

<p>I developed it using a very short file consisting of just ""hello"" and tested on a randomly generated 1MB file. The software seems to encode and decode the file effectively, with only the length of the original file, the blocksize and the droplets shared between the encoder and the decoder.</p>

<p><strong>The question is, how should I prove this is indeed a faithful implementation of an LT code? How do I prove that the decoding algorithm is efficient?</strong></p>

<p>It was my intention that used droplets are deleted by Python's counted references system. <strong>How do I check this is indeed occuring?</strong></p>

<p>Any feedback on the code itself is also welcome, though it may be more appropriate as a comment (rather than an answer) or an issue on GitHub.</p>",python|testing,"<p>If you just want to see if the reference counting is working, you can define the <code>__del__</code> method in your classes. Be aware that this will prevent the cyclic GC from working on those classes</p>

<p>Another way is to look at changes to the refcount of the class, since each instance holds a reference to the class</p>

<pre><code>&gt;&gt;&gt; from sys import getrefcount
&gt;&gt;&gt; class Obj(object):
...  pass
... 
&gt;&gt;&gt; sys.getrefcount(Obj)
5
&gt;&gt;&gt; obj_list=[Obj() for x in range(5)]
&gt;&gt;&gt; sys.getrefcount(Obj)
10
&gt;&gt;&gt; obj_list[:3]=[]
&gt;&gt;&gt; sys.getrefcount(Obj)
7
</code></pre>",2
335,12346033,South: Unknown command 'migrate',"<p>I'm getting a merciless</p>

<pre><code>$ python manage.py migrate
Unknown command: 'migrate'
Type 'manage.py help' for usage.
</code></pre>

<p>I pulled the code from github onto a fresh computer. This code is tested and is working on other computers. The entire code runs fine except for the fact I can't run migrations!</p>

<p>Installed my virtual environment and ran <code>pip install -r requirements.txt</code>. It installs everything, including South. I can check by running</p>

<pre><code>$ python manage.py shell
&gt;&gt;&gt; import south
&gt;&gt;&gt; south.__version__
'0.7.3'
</code></pre>

<p>However, when I run the <code>manage.py help</code>, the <code>migrate</code> and <code>schemamigration</code> commands don't appear listed.</p>

<p>I double checked that my <code>settings.py</code> file has 'south' listed under <code>INSTALLED_APPS</code> (I didn't change this file after pulling).</p>

<p>I tried <code>pip uninstall south</code> and then running <code>pip install -r requirements.txt</code> again, but I still get the same error.</p>

<p>Would really appreciate any help!</p>",python|django|migration|pip|django-south,"<p>I got the same error, but for a different reason. I did:</p>

<pre><code>$ python manage.py migrate my_app --settings=settings_dev.py
</code></pre>

<p>But with the settings parameter, you should pass the name of the <em>module</em> not the name of the <em>file</em>. So it should have been</p>

<pre><code>$ python manage.py migrate my_app --settings=settings_dev
</code></pre>

<p>You get a decent error message when you run the <em>validate</em> command like that, but when you run a south command, it'll say the command is unknown :/</p>",3
336,12346033,South: Unknown command 'migrate',"<p>I'm getting a merciless</p>

<pre><code>$ python manage.py migrate
Unknown command: 'migrate'
Type 'manage.py help' for usage.
</code></pre>

<p>I pulled the code from github onto a fresh computer. This code is tested and is working on other computers. The entire code runs fine except for the fact I can't run migrations!</p>

<p>Installed my virtual environment and ran <code>pip install -r requirements.txt</code>. It installs everything, including South. I can check by running</p>

<pre><code>$ python manage.py shell
&gt;&gt;&gt; import south
&gt;&gt;&gt; south.__version__
'0.7.3'
</code></pre>

<p>However, when I run the <code>manage.py help</code>, the <code>migrate</code> and <code>schemamigration</code> commands don't appear listed.</p>

<p>I double checked that my <code>settings.py</code> file has 'south' listed under <code>INSTALLED_APPS</code> (I didn't change this file after pulling).</p>

<p>I tried <code>pip uninstall south</code> and then running <code>pip install -r requirements.txt</code> again, but I still get the same error.</p>

<p>Would really appreciate any help!</p>",python|django|migration|pip|django-south,"<p>I solved this problem by going here <a href=""http://south.readthedocs.org/en/latest/installation.html"" rel=""noreferrer"">http://south.readthedocs.org/en/latest/installation.html</a> and using easy_install south. I then added 'south', to my INSTALLED_APPS and it worked.</p>",5
337,12346033,South: Unknown command 'migrate',"<p>I'm getting a merciless</p>

<pre><code>$ python manage.py migrate
Unknown command: 'migrate'
Type 'manage.py help' for usage.
</code></pre>

<p>I pulled the code from github onto a fresh computer. This code is tested and is working on other computers. The entire code runs fine except for the fact I can't run migrations!</p>

<p>Installed my virtual environment and ran <code>pip install -r requirements.txt</code>. It installs everything, including South. I can check by running</p>

<pre><code>$ python manage.py shell
&gt;&gt;&gt; import south
&gt;&gt;&gt; south.__version__
'0.7.3'
</code></pre>

<p>However, when I run the <code>manage.py help</code>, the <code>migrate</code> and <code>schemamigration</code> commands don't appear listed.</p>

<p>I double checked that my <code>settings.py</code> file has 'south' listed under <code>INSTALLED_APPS</code> (I didn't change this file after pulling).</p>

<p>I tried <code>pip uninstall south</code> and then running <code>pip install -r requirements.txt</code> again, but I still get the same error.</p>

<p>Would really appreciate any help!</p>",python|django|migration|pip|django-south,"<p><strong>This is caused largely by following the 1.7 (DEV version) tutorial when we all get the last stable version (1.6) installed by pip.</strong></p>

<p>Either follow the <a href=""https://docs.djangoproject.com/en/1.6/intro/tutorial01/"" rel=""nofollow"">1.6 tutorial</a> or follow the instructions to install 1.7 dev version of Django.</p>",14
338,12346033,South: Unknown command 'migrate',"<p>I'm getting a merciless</p>

<pre><code>$ python manage.py migrate
Unknown command: 'migrate'
Type 'manage.py help' for usage.
</code></pre>

<p>I pulled the code from github onto a fresh computer. This code is tested and is working on other computers. The entire code runs fine except for the fact I can't run migrations!</p>

<p>Installed my virtual environment and ran <code>pip install -r requirements.txt</code>. It installs everything, including South. I can check by running</p>

<pre><code>$ python manage.py shell
&gt;&gt;&gt; import south
&gt;&gt;&gt; south.__version__
'0.7.3'
</code></pre>

<p>However, when I run the <code>manage.py help</code>, the <code>migrate</code> and <code>schemamigration</code> commands don't appear listed.</p>

<p>I double checked that my <code>settings.py</code> file has 'south' listed under <code>INSTALLED_APPS</code> (I didn't change this file after pulling).</p>

<p>I tried <code>pip uninstall south</code> and then running <code>pip install -r requirements.txt</code> again, but I still get the same error.</p>

<p>Would really appreciate any help!</p>",python|django|migration|pip|django-south,"<p>I had this but it turned out to be an error in my <code>settings.py</code> which got shown up when I tried <code>runserver</code> instead. Fixed the error, and the command came back. Basically none of the management commands for any of the apps were there, so my <code>INSTALLED_APPS</code> must have been overwritten or never written in the first place. In my case, the import of the settings file was failing silently.</p>",0
339,12346033,South: Unknown command 'migrate',"<p>I'm getting a merciless</p>

<pre><code>$ python manage.py migrate
Unknown command: 'migrate'
Type 'manage.py help' for usage.
</code></pre>

<p>I pulled the code from github onto a fresh computer. This code is tested and is working on other computers. The entire code runs fine except for the fact I can't run migrations!</p>

<p>Installed my virtual environment and ran <code>pip install -r requirements.txt</code>. It installs everything, including South. I can check by running</p>

<pre><code>$ python manage.py shell
&gt;&gt;&gt; import south
&gt;&gt;&gt; south.__version__
'0.7.3'
</code></pre>

<p>However, when I run the <code>manage.py help</code>, the <code>migrate</code> and <code>schemamigration</code> commands don't appear listed.</p>

<p>I double checked that my <code>settings.py</code> file has 'south' listed under <code>INSTALLED_APPS</code> (I didn't change this file after pulling).</p>

<p>I tried <code>pip uninstall south</code> and then running <code>pip install -r requirements.txt</code> again, but I still get the same error.</p>

<p>Would really appreciate any help!</p>",python|django|migration|pip|django-south,"<p>In my case. south was already installed but later on requirements was the cause for other libraries:</p>

<pre><code>pip install -r requirements.txt
</code></pre>

<p>I don't know why manage.py didn't complain about them.</p>",0
340,12346033,South: Unknown command 'migrate',"<p>I'm getting a merciless</p>

<pre><code>$ python manage.py migrate
Unknown command: 'migrate'
Type 'manage.py help' for usage.
</code></pre>

<p>I pulled the code from github onto a fresh computer. This code is tested and is working on other computers. The entire code runs fine except for the fact I can't run migrations!</p>

<p>Installed my virtual environment and ran <code>pip install -r requirements.txt</code>. It installs everything, including South. I can check by running</p>

<pre><code>$ python manage.py shell
&gt;&gt;&gt; import south
&gt;&gt;&gt; south.__version__
'0.7.3'
</code></pre>

<p>However, when I run the <code>manage.py help</code>, the <code>migrate</code> and <code>schemamigration</code> commands don't appear listed.</p>

<p>I double checked that my <code>settings.py</code> file has 'south' listed under <code>INSTALLED_APPS</code> (I didn't change this file after pulling).</p>

<p>I tried <code>pip uninstall south</code> and then running <code>pip install -r requirements.txt</code> again, but I still get the same error.</p>

<p>Would really appreciate any help!</p>",python|django|migration|pip|django-south,"<p>Successful import of package is not enough for Django management commands. Python can import a package easy from a zipped egg but Django needs a normal uncompressed file.</p>

<p>Advices that simplify your problem initially:</p>

<ol>
<li>Management commands must exist as files in a normal directory <code>path..to..south/management/commands</code> (not zipped).</li>
<li>Try to find and remove old installations of south manually.
A frequent problem was that one version of some package has been installed by easy_install (zipped) or manually by ""python setup.py install"" but pip didn't uninstall it and installed it for the second time.</li>
<li>Use only absolute directories in python path. Do not change the python path between installer and running Django either in environment or by customized manage or settings.py if possible. Some manage.py or settings.py use different python path than the one used by package intallers, e.g. added ""."" or "".."" before other directories. You should not have other <code>south</code> directory in <code>.</code> or <code>..</code> in your project.</li>
</ol>

<p>The advice 1 is an absolute requirement of Django. The other two are heplful even if I use multiple versions somehow for testing my applications with multiple versions of Python, Django etc.</p>

<p>Example of investigation of the main requirement:</p>

<pre><code>$ python manage.py shell
&gt;&gt;&gt; import os
&gt;&gt;&gt; import south.management.commands.migrate
&gt;&gt;&gt; assert os.path.isfile(south.management.commands.migrate.__file__)
</code></pre>",8
341,18812595,Python script for finding a word in a text and returning text and count,"<p>I have a text file containing a small text. I need a script in python that will allow me to look for a specific word (e.g. ""food"") and which will print the immediate preceding 5 characters and which will also print the total number of occurrences of the word (""food"") at the end.</p>

<p>Example:</p>

<p><strong>""You won't need to bring a lot of food with you. Before packing your food you should run through the wish list. All food will be inspected upon arrival.""</strong></p>

<p>Desired result:</p>

<p><strong>""t of"", ""your "", "" All ""</strong></p>

<p><strong>3</strong></p>

<p>Any help much appreciated.</p>",python|text-files,"<p>Try this if it helps.</p>

<pre><code>&gt;&gt;&gt; s = ""You won't need to bring a lot of food with you. Before packing your food you should run through the wish list. All food will be inspected upon arrival.""
&gt;&gt;&gt; t = ""food""
&gt;&gt;&gt; s.split(t)
[""You won't need to bring a lot of "", ' with you. Before packing your ', ' you should run through the wish list. All ', ' will be inspected upon arrival.']
&gt;&gt;&gt; result = [part[-5:] for part in s.split(t)[:-1]]
&gt;&gt;&gt; print result
['t of ', 'your ', ' All ']
&gt;&gt;&gt; print len(result)
3
</code></pre>",1
342,18812595,Python script for finding a word in a text and returning text and count,"<p>I have a text file containing a small text. I need a script in python that will allow me to look for a specific word (e.g. ""food"") and which will print the immediate preceding 5 characters and which will also print the total number of occurrences of the word (""food"") at the end.</p>

<p>Example:</p>

<p><strong>""You won't need to bring a lot of food with you. Before packing your food you should run through the wish list. All food will be inspected upon arrival.""</strong></p>

<p>Desired result:</p>

<p><strong>""t of"", ""your "", "" All ""</strong></p>

<p><strong>3</strong></p>

<p>Any help much appreciated.</p>",python|text-files,"<p>You can use a regular expression to capture the five preceding characters. </p>

<p><code>(.{5})</code> means capture any (<code>.</code>) five (<code>{5}</code>) characters which are followed by the string <code>""%s"" % word</code> which embeds the string associated with the variable <code>word</code> into the text like so: <code>""%s"" % ""food""</code> -> <code>""food""</code>.</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; word = 'food'
&gt;&gt;&gt; m = re.findall(r'(.{5})%s'%word,t)
&gt;&gt;&gt; print m,len(m)
['t of ', 'your ', ' All '] 3
</code></pre>",1
343,19097057,pip -e: No magic underscore to dash replacement,"<p>Somewhere underscores get changed to dashes, if you install with a git repo with ""pip install -e ..."".</p>

<p>Is there any way to stop this?</p>

<p>I want to automate stuff. I want repo <code>foo_bar</code> to be <code>~/src/foo_bar</code>, not <code>~/src/foo-bar</code>.</p>",python|virtualenv|pip,"<p>Note that the answer above is incorrect. The exact regex from the code is <code>re.sub('[^A-Za-z0-9.]+', '-', name)</code>. But if you try <code>pip install foo!bar</code> you get a big parse error so this isn't really true either.</p>",2
344,19097057,pip -e: No magic underscore to dash replacement,"<p>Somewhere underscores get changed to dashes, if you install with a git repo with ""pip install -e ..."".</p>

<p>Is there any way to stop this?</p>

<p>I want to automate stuff. I want repo <code>foo_bar</code> to be <code>~/src/foo_bar</code>, not <code>~/src/foo-bar</code>.</p>",python|virtualenv|pip,"<p>From what I can see from <a href=""https://mail.python.org/pipermail/distutils-sig/2011-August/017935.html"" rel=""noreferrer"">this question</a> and <a href=""https://mail.python.org/pipermail/distutils-sig/2011-August/017936.html"" rel=""noreferrer"">this response</a> on the Python mailing list it looks like this is due to numerous naming conventions throughout the Python packaging system, and the compatibility between them.</p>

<p>Pythons <code>setuptools</code> runs <a href=""http://nullege.com/codes/search/setuptools.package_index.safe_name"" rel=""noreferrer""><code>safe_name</code></a> which:</p>

<blockquote>
  <p>Convert an arbitrary string to a standard distribution name</p>
  
  <p>Any runs of non-alphanumeric/. characters are replaced with a single '-'.</p>
</blockquote>

<p>Even though <code>pip</code>, <code>easy_install</code> and <code>PyPi</code> may accept the underscore, when installing it is changed to a single '-' for setuptools standards.</p>",18
345,19209398,Create image file from array,"<p>Essentially my problem is just finding an easy way to create an image file from an array.</p>

<p>My problem is unparsing CUPS raster files into images. The CUPS RGB raster file  header is 1800 bytes. If I input the width and height I can read the raster array contained in the file correctly into Photoshop in Mac order, with interleaved 16 bit data 00RRGGBB. I have written a utility which extracts the width and height from the header. </p>

<p>I'd like to write another command-line utility which takes the width, height and file-name as inputs, truncates the first 1800 bytes off the raster file, and creates a Tiff or BMP or whatever is easiest to write image with the array that is contained in the rest - any well-known image format will do. </p>

<p>program should be C or Python, run under Mac, Linux. </p>",python|c|image|bitmap|tiff,"<p>For Python, <a href=""http://www.pythonware.com/products/pil/"" rel=""nofollow"">PIL</a> is the tool for this task. Use the <a href=""http://effbot.org/imagingbook/image.htm"" rel=""nofollow"">putdata()</a> (search the link for putdata) method on image objects to put the pixels from a list into an image.</p>",0
346,19209398,Create image file from array,"<p>Essentially my problem is just finding an easy way to create an image file from an array.</p>

<p>My problem is unparsing CUPS raster files into images. The CUPS RGB raster file  header is 1800 bytes. If I input the width and height I can read the raster array contained in the file correctly into Photoshop in Mac order, with interleaved 16 bit data 00RRGGBB. I have written a utility which extracts the width and height from the header. </p>

<p>I'd like to write another command-line utility which takes the width, height and file-name as inputs, truncates the first 1800 bytes off the raster file, and creates a Tiff or BMP or whatever is easiest to write image with the array that is contained in the rest - any well-known image format will do. </p>

<p>program should be C or Python, run under Mac, Linux. </p>",python|c|image|bitmap|tiff,"<p>You can try <a href=""http://www.gdal.org/"" rel=""nofollow"">GDAL</a>，which supports many image formats.You can use RasterIO(...) method for reading image data.</p>",0
347,19312545,Python HTTP client with request pipelining,"<p>The problem: I need to send many HTTP requests to a server. I can only use one connection (non-negotiable server limit). The server's response time plus the network latency is too high – I'm falling behind.</p>

<p>The requests typically don't change server state and don't depend on the previous request's response. So my idea is to simply send them on top of each other, enqueue the response objects, and depend on the Content-Length: of the incoming responses to feed incoming replies to the next-waiting response object. In other words: Pipeline the requests to the server.</p>

<p>This is of course not entirely safe (any reply without Content-Length: means trouble), but I don't care -- in that case I can always retry any queued requests. (The safe way would be to wait for the header before sending the next bit. That'd might help me enough. No way to test beforehand.)</p>

<p>So, ideally I want the following client code (which uses client delays to mimic network latency) to run in three seconds.</p>

<p>Now for the $64000 question: Is there a Python library which already does this, or do I need to roll my own? My code uses gevent; I could use Twisted if necessary, but Twisted's standard connection pool does not support pipelined requests. I also could write a wrapper for some C library if necessary, but I'd prefer native code.</p>

<pre><code>#!/usr/bin/python

import gevent.pool
from gevent import sleep
from time import time

from geventhttpclient import HTTPClient

url = 'http://local_server/100k_of_lorem_ipsum.txt'
http = HTTPClient.from_url(url, concurrency=1)

def get_it(http):
    print time(),""Queueing request""
    response = http.get(url)
    print time(),""Expect header data""
    # Do something with the header, just to make sure that it has arrived
    # (the greenlet should block until then)
    assert response.status_code == 200
    assert response[""content-length""] &gt; 0
    for h in response.items():
        pass

    print time(),""Wait before reading body data""
    # Now I can read the body. The library should send at
    # least one new HTTP request during this time.
    sleep(2)
    print time(),""Reading body data""
    while response.read(10000):
        pass
    print time(),""Processing my response""
    # The next request should definitely be transmitted NOW.
    sleep(1)
    print time(),""Done""

# Run parallel requests
pool = gevent.pool.Pool(3)
for i in range(3):
    pool.spawn(get_it, http)

pool.join()
http.close()
</code></pre>",python|http|streaming,"<p>I think txrequests could get you most of what you are looking for, using the background_callback to en-queue processing of responses on a separate thread. Each request would still be it's own thread but using a session means by default it would reuse the same connection.</p>

<p><a href=""https://github.com/tardyp/txrequests#working-in-the-background"" rel=""nofollow noreferrer"">https://github.com/tardyp/txrequests#working-in-the-background</a></p>",1
348,19312545,Python HTTP client with request pipelining,"<p>The problem: I need to send many HTTP requests to a server. I can only use one connection (non-negotiable server limit). The server's response time plus the network latency is too high – I'm falling behind.</p>

<p>The requests typically don't change server state and don't depend on the previous request's response. So my idea is to simply send them on top of each other, enqueue the response objects, and depend on the Content-Length: of the incoming responses to feed incoming replies to the next-waiting response object. In other words: Pipeline the requests to the server.</p>

<p>This is of course not entirely safe (any reply without Content-Length: means trouble), but I don't care -- in that case I can always retry any queued requests. (The safe way would be to wait for the header before sending the next bit. That'd might help me enough. No way to test beforehand.)</p>

<p>So, ideally I want the following client code (which uses client delays to mimic network latency) to run in three seconds.</p>

<p>Now for the $64000 question: Is there a Python library which already does this, or do I need to roll my own? My code uses gevent; I could use Twisted if necessary, but Twisted's standard connection pool does not support pipelined requests. I also could write a wrapper for some C library if necessary, but I'd prefer native code.</p>

<pre><code>#!/usr/bin/python

import gevent.pool
from gevent import sleep
from time import time

from geventhttpclient import HTTPClient

url = 'http://local_server/100k_of_lorem_ipsum.txt'
http = HTTPClient.from_url(url, concurrency=1)

def get_it(http):
    print time(),""Queueing request""
    response = http.get(url)
    print time(),""Expect header data""
    # Do something with the header, just to make sure that it has arrived
    # (the greenlet should block until then)
    assert response.status_code == 200
    assert response[""content-length""] &gt; 0
    for h in response.items():
        pass

    print time(),""Wait before reading body data""
    # Now I can read the body. The library should send at
    # least one new HTTP request during this time.
    sleep(2)
    print time(),""Reading body data""
    while response.read(10000):
        pass
    print time(),""Processing my response""
    # The next request should definitely be transmitted NOW.
    sleep(1)
    print time(),""Done""

# Run parallel requests
pool = gevent.pool.Pool(3)
for i in range(3):
    pool.spawn(get_it, http)

pool.join()
http.close()
</code></pre>",python|http|streaming,"<p><a href=""https://pypi.python.org/pypi/dugong/"" rel=""nofollow noreferrer"">Dugong</a> is an HTTP/1.1-only client which claims to support real HTTP/1.1 pipelining. <a href=""https://pythonhosted.org/dugong/tutorial.html"" rel=""nofollow noreferrer"">The tutorial</a> includes several examples on how to use it, including one <a href=""https://pythonhosted.org/dugong/tutorial.html#pipelining-with-threads"" rel=""nofollow noreferrer"">using threads</a> and another <a href=""https://pythonhosted.org/dugong/tutorial.html#pipelining-with-coroutines"" rel=""nofollow noreferrer"">using asyncio</a>.</p>

<p>Be sure to verify that the server you're communicating with actually supports HTTP/1.1 pipelining—some servers claim to support HTTP/1.1 but don't implement pipelining.</p>",3
349,19312545,Python HTTP client with request pipelining,"<p>The problem: I need to send many HTTP requests to a server. I can only use one connection (non-negotiable server limit). The server's response time plus the network latency is too high – I'm falling behind.</p>

<p>The requests typically don't change server state and don't depend on the previous request's response. So my idea is to simply send them on top of each other, enqueue the response objects, and depend on the Content-Length: of the incoming responses to feed incoming replies to the next-waiting response object. In other words: Pipeline the requests to the server.</p>

<p>This is of course not entirely safe (any reply without Content-Length: means trouble), but I don't care -- in that case I can always retry any queued requests. (The safe way would be to wait for the header before sending the next bit. That'd might help me enough. No way to test beforehand.)</p>

<p>So, ideally I want the following client code (which uses client delays to mimic network latency) to run in three seconds.</p>

<p>Now for the $64000 question: Is there a Python library which already does this, or do I need to roll my own? My code uses gevent; I could use Twisted if necessary, but Twisted's standard connection pool does not support pipelined requests. I also could write a wrapper for some C library if necessary, but I'd prefer native code.</p>

<pre><code>#!/usr/bin/python

import gevent.pool
from gevent import sleep
from time import time

from geventhttpclient import HTTPClient

url = 'http://local_server/100k_of_lorem_ipsum.txt'
http = HTTPClient.from_url(url, concurrency=1)

def get_it(http):
    print time(),""Queueing request""
    response = http.get(url)
    print time(),""Expect header data""
    # Do something with the header, just to make sure that it has arrived
    # (the greenlet should block until then)
    assert response.status_code == 200
    assert response[""content-length""] &gt; 0
    for h in response.items():
        pass

    print time(),""Wait before reading body data""
    # Now I can read the body. The library should send at
    # least one new HTTP request during this time.
    sleep(2)
    print time(),""Reading body data""
    while response.read(10000):
        pass
    print time(),""Processing my response""
    # The next request should definitely be transmitted NOW.
    sleep(1)
    print time(),""Done""

# Run parallel requests
pool = gevent.pool.Pool(3)
for i in range(3):
    pool.spawn(get_it, http)

pool.join()
http.close()
</code></pre>",python|http|streaming,"<p>It seems you are running python2.</p>

<p>For python3 >= 3.5 
you could use async/await loop
See <a href=""https://docs.python.org/3/library/asyncio.html"" rel=""nofollow noreferrer"">asyncio</a></p>

<p>Also, there is a library built on top for better, easier use
called <a href=""https://github.com/python-trio/trio"" rel=""nofollow noreferrer"">Trio</a>, available on pip.</p>

<hr>

<p>Another thing I can think of is multiple threads with locks.
I will think on how to better explain this or could it even work.</p>",-4
350,19148729,Three Rail Decrypt,"<p>Im having a ton of trouble trying to figure out how to get my decrypt function to work. It works in ideal cases where the msg is divisible by 3, but after that i am totally lost. I have a vague idea of what i have to do because i was able to get this to work with two rails, but there are more possibilities with three rails. Im quite lost :( Also all those print statements are just to try and help me figure out what is going on within my program. </p>

<pre><code>import sys

def main():
    plaintext=""abcdefgh""
    print(threeRailEncrypt(plaintext))
    print(threeRailDecrypt(threeRailEncrypt(plaintext)))


def threeRailEncrypt(plaintext):
    ciphertext=""""
    rail1=""""
    rail2=""""
    rail3=""""

    for i in range(len(plaintext)):
        if i%3 == 0:
            rail1=rail1+plaintext[i]
        elif i%3 == 1:
            rail2=rail2+plaintext[i]
        else:
            rail3=rail3+plaintext[i]

    ciphertext=rail1+rail2+rail3

    return(ciphertext)

def threeRailDecrypt(msg):
    if len(msg)%3==0:
        third=len(msg)//3
        print(third)
        rail1=msg[:third]
        rail2=msg[third:third*2]
        rail3=msg[third*2:]
        print(rail1,rail2,rail3)
        dm=""""
        for i in range(third):
            dm=dm+rail1[i]
            dm=dm+rail2[i]
            dm=dm+rail3[i]
    else:
        third=(len(msg)//3)+1
        print(third)
        rail1=msg[:third]
        rail2=msg[third:third*2]
        rail3=msg[third*2:]
        print(rail1,rail2,rail3)
        dm=""""
        for i in range(third):
            dm=dm+rail1[i]
            print(dm)
            dm=dm+rail2[i]
            print(dm)
            dm=dm+rail3[i]
            print(dm)
            if  len(rail2)&gt;len(rail3):
                dm=dm+rail2[-1]
        return(dm)
main()
</code></pre>

<p>Progress-</p>

<pre><code>def threeRailDecrypt(cypher, rails = 3):
    length = len (cypher)
    for i in range(rails):
        lens=(length//rails)
        if length % rails &gt; i:
            lens=lens+1
        print(lens)
</code></pre>",python,"<p>I will add a second answer with a completely different approach and more explicit code:</p>

<pre><code>def dec2 (cypher):
    length = len (cypher)
    if length &lt; 4: return cypher
    third = length // 3 + (1 if length % 3 else 0)
    cypher = list (cypher)
    if length % 3 == 1: cypher.insert (third * 2 - 1, '')
    return ''.join (''.join (cypher [i::third] ) for i in range (third) )
</code></pre>

<p>Or just shock your teacher:</p>

<pre><code>enc = lambda p:''.join(p[_::3]for _ in range(3))
dec = lambda c:c if len(c)&lt;4 else(lambda *a:(lambda c,t:
''.join(''.join(c[i::t])for i in range(t)))((lambda c,t,
l:c[:t*2-1]+(['']if l%3==1 else[])+c[t*2-1:])(*a),a [2])
)(*(lambda c:(list(c),len(c),len(c)//3+(1 if len(c)%3
else 0)))(c))
</code></pre>",1
351,19148729,Three Rail Decrypt,"<p>Im having a ton of trouble trying to figure out how to get my decrypt function to work. It works in ideal cases where the msg is divisible by 3, but after that i am totally lost. I have a vague idea of what i have to do because i was able to get this to work with two rails, but there are more possibilities with three rails. Im quite lost :( Also all those print statements are just to try and help me figure out what is going on within my program. </p>

<pre><code>import sys

def main():
    plaintext=""abcdefgh""
    print(threeRailEncrypt(plaintext))
    print(threeRailDecrypt(threeRailEncrypt(plaintext)))


def threeRailEncrypt(plaintext):
    ciphertext=""""
    rail1=""""
    rail2=""""
    rail3=""""

    for i in range(len(plaintext)):
        if i%3 == 0:
            rail1=rail1+plaintext[i]
        elif i%3 == 1:
            rail2=rail2+plaintext[i]
        else:
            rail3=rail3+plaintext[i]

    ciphertext=rail1+rail2+rail3

    return(ciphertext)

def threeRailDecrypt(msg):
    if len(msg)%3==0:
        third=len(msg)//3
        print(third)
        rail1=msg[:third]
        rail2=msg[third:third*2]
        rail3=msg[third*2:]
        print(rail1,rail2,rail3)
        dm=""""
        for i in range(third):
            dm=dm+rail1[i]
            dm=dm+rail2[i]
            dm=dm+rail3[i]
    else:
        third=(len(msg)//3)+1
        print(third)
        rail1=msg[:third]
        rail2=msg[third:third*2]
        rail3=msg[third*2:]
        print(rail1,rail2,rail3)
        dm=""""
        for i in range(third):
            dm=dm+rail1[i]
            print(dm)
            dm=dm+rail2[i]
            print(dm)
            dm=dm+rail3[i]
            print(dm)
            if  len(rail2)&gt;len(rail3):
                dm=dm+rail2[-1]
        return(dm)
main()
</code></pre>

<p>Progress-</p>

<pre><code>def threeRailDecrypt(cypher, rails = 3):
    length = len (cypher)
    for i in range(rails):
        lens=(length//rails)
        if length % rails &gt; i:
            lens=lens+1
        print(lens)
</code></pre>",python,"<p>This should work. You just need to figure out how long the different rails are:</p>

<pre><code>from itertools import zip_longest as zip

def enc (plain, rails = 3):
    return ''.join (plain [i::rails] for i in range (rails) )

def dec (cypher, rails = 3):
    length = len (cypher)
    lens = [length // rails + (1 if length % rails &gt; i else 0) for i in range (rails) ]
    paths = [cypher [sum (lens [:i] ):sum (lens [:i + 1] ) ] for i in range (rails) ]
    return ''.join (''.join (x for x in x if x) for x in zip (*paths) )

plain = 'abcdefghijk'
for i in range (10):
    a = plain [:i]
    b = enc (a)
    c = dec (b)
    print (a, b, c)
</code></pre>

<p>Should work for arbitrary (>0) number of rails used.</p>

<hr>

<p>EDIT: Without zip_longest:</p>

<pre><code>def enc (plain, rails = 3):
    return ''.join (plain [i::rails] for i in range (rails) )

def dec (cypher, rails = 3):
    length = len (cypher)
    lens = [length // rails + (1 if length % rails &gt; i else 0) for i in range (rails) ]
    paths = [cypher [sum (lens [:i]):sum (lens [:i + 1] ) ] for i in range (rails) ]
    maxLen = len (paths [0] )
    paths = [list (path) + ( [] if len (path) == maxLen else [''] ) for path in paths]
    return ''.join (''.join (x) for x in zip (*paths) )
</code></pre>

<hr>

<p>Explanation of the decryption:</p>

<pre><code>length = len (cypher)
</code></pre>

<p>Store the length of the cypher text in a local variable for convenience.</p>

<pre><code>lens = [length // rails + (1 if length % rails &gt; i else 0) for i in range (rails) ]
</code></pre>

<p>Now we calculate the length of each rail. The length of each rail is the length of the cypher text divided by the number of rails (in your case 3), and maybe (the <code>if</code> part) plus <code>1</code> if the length is not exactly divisible.</p>

<pre><code>paths = [cypher [sum (lens [:i] ):sum (lens [:i + 1] ) ] for i in range (rails) ]
</code></pre>

<p>Now slice the cypher text into the different rails, according to the rail lengths we have just calculated.</p>

<pre><code>maxLen = len (paths [0] )
</code></pre>

<p>The maximum length of a rail is equal to the length of the first rail.</p>

<pre><code>paths = [list (path) + ( [] if len (path) == maxLen else [''] ) for path in paths]
</code></pre>

<p>Now add an empty character to the end of each rail which is too short, so all rails have the same length and can be zipped.</p>

<pre><code>return ''.join (''.join (x) for x in zip (*paths) )
</code></pre>

<p>Zip the rails, join each resulting tuple into a string, then join all those strings into one long string and return it.</p>",0
352,19148729,Three Rail Decrypt,"<p>Im having a ton of trouble trying to figure out how to get my decrypt function to work. It works in ideal cases where the msg is divisible by 3, but after that i am totally lost. I have a vague idea of what i have to do because i was able to get this to work with two rails, but there are more possibilities with three rails. Im quite lost :( Also all those print statements are just to try and help me figure out what is going on within my program. </p>

<pre><code>import sys

def main():
    plaintext=""abcdefgh""
    print(threeRailEncrypt(plaintext))
    print(threeRailDecrypt(threeRailEncrypt(plaintext)))


def threeRailEncrypt(plaintext):
    ciphertext=""""
    rail1=""""
    rail2=""""
    rail3=""""

    for i in range(len(plaintext)):
        if i%3 == 0:
            rail1=rail1+plaintext[i]
        elif i%3 == 1:
            rail2=rail2+plaintext[i]
        else:
            rail3=rail3+plaintext[i]

    ciphertext=rail1+rail2+rail3

    return(ciphertext)

def threeRailDecrypt(msg):
    if len(msg)%3==0:
        third=len(msg)//3
        print(third)
        rail1=msg[:third]
        rail2=msg[third:third*2]
        rail3=msg[third*2:]
        print(rail1,rail2,rail3)
        dm=""""
        for i in range(third):
            dm=dm+rail1[i]
            dm=dm+rail2[i]
            dm=dm+rail3[i]
    else:
        third=(len(msg)//3)+1
        print(third)
        rail1=msg[:third]
        rail2=msg[third:third*2]
        rail3=msg[third*2:]
        print(rail1,rail2,rail3)
        dm=""""
        for i in range(third):
            dm=dm+rail1[i]
            print(dm)
            dm=dm+rail2[i]
            print(dm)
            dm=dm+rail3[i]
            print(dm)
            if  len(rail2)&gt;len(rail3):
                dm=dm+rail2[-1]
        return(dm)
main()
</code></pre>

<p>Progress-</p>

<pre><code>def threeRailDecrypt(cypher, rails = 3):
    length = len (cypher)
    for i in range(rails):
        lens=(length//rails)
        if length % rails &gt; i:
            lens=lens+1
        print(lens)
</code></pre>",python,"<p><strong>New</strong>:</p>

<p>You just have to split up the strings again as you did in your encryption function and then iterate over them to put each character back at it's real place. </p>

<pre><code>def decrypt(crypt):
    rails = []
    result = """"
    rails.append(crypt[:(len(crypt)+2)/3])
    rails.append(crypt[(len(crypt)+2)/3:-(len(crypt)-2)/3])
    rails.append(crypt[-(len(crypt)/3):])
    for x in range(len(crypt)):
        result += rails[x%3][:1]
        rails[x%3] = rails[x%3][1:]
    return(result)
</code></pre>

<p>I think Hyperboreus second solution is cooler though!</p>

<p><strong>OLD</strong>(Interesting thought connected to the comments, didn't work as expected for longer strings though):</p>

<p>You will just have to reverse what you do in the encryption, so in the encryption you scramble the text by splitting them up with modulo 3. The simplest way to get the plaintext back again is to simply run the encryption method the length of the string minus two times on the encrypted string and it will be back to plain text.</p>

<pre><code>def threeRailDecrypt(crypt):
    for i in range(len(crypt)-2):
        crypt = threeRailEncrypt(crypt)
    return(crypt)
</code></pre>

<p>Hyperboreus solution is the proper one, but this is a bit simpler to understand I reckon.</p>

<p>Example with the string test:</p>

<blockquote>
  <p>test - untouched</p>
  
  <p>ttes - first iteration (encryption)</p>
  
  <p>tste - second iteration</p>
  
  <p>test - third iteration</p>
</blockquote>",1
353,19163911,Dynamically setting __tablename__ for sharding in SQLAlchemy?,"<p>In order to handle a growing database table, we are sharding on table name. So we could have database tables that are named like this:</p>

<pre><code>table_md5one
table_md5two
table_md5three
</code></pre>

<p>All tables have the exact same schema.</p>

<p>How do we use SQLAlchemy and dynamically specify the <strong>tablename</strong> for the class that corresponds to this? Looks like the declarative_base() classes need to have <strong>tablename</strong> pre-specified. </p>

<p>There will eventually be too many tables to manually specify derived classes from a parent/base class. We want to be able to build a class that can have the tablename set up dynamically (maybe passed as a parameter to a function.) </p>",python|mysql|orm|sqlalchemy,"<p>Instead of using imperative creating Table object, you can use usual declarative_base and make a closure to set a table name as the following:</p>

<pre><code>def make_class(Base, table_name):
    class User(Base):
        __tablename__ = table_name
        id = Column(Integer, primary_key=True)
        name= Column(String)

    return User

Base = declarative_base()
engine = make_engine()
custom_named_usertable = make_class(Base, 'custom_name')
Base.metadata.create_all(engine)

session = make_session(engine)
new_user = custom_named_usertable(name='Adam')
session.add(new_user)
session.commit()
session.close()
engine.dispose()
</code></pre>",0
354,19163911,Dynamically setting __tablename__ for sharding in SQLAlchemy?,"<p>In order to handle a growing database table, we are sharding on table name. So we could have database tables that are named like this:</p>

<pre><code>table_md5one
table_md5two
table_md5three
</code></pre>

<p>All tables have the exact same schema.</p>

<p>How do we use SQLAlchemy and dynamically specify the <strong>tablename</strong> for the class that corresponds to this? Looks like the declarative_base() classes need to have <strong>tablename</strong> pre-specified. </p>

<p>There will eventually be too many tables to manually specify derived classes from a parent/base class. We want to be able to build a class that can have the tablename set up dynamically (maybe passed as a parameter to a function.) </p>",python|mysql|orm|sqlalchemy,"<p>you can write a function with tablename parameter and send back the class with setting appropriate attributes.</p>

<pre><code>def get_class(table_name):

   class GenericTable(Base):

       __tablename__ = table_name

       ID= Column(types.Integer, primary_key=True)
       def funcation(self):
        ......
   return GenericTable
</code></pre>

<p>Then you can create a table using:</p>

<pre><code>get_class(""test"").__table__.create(bind=engine)  # See sqlachemy.engine
</code></pre>",7
355,19163911,Dynamically setting __tablename__ for sharding in SQLAlchemy?,"<p>In order to handle a growing database table, we are sharding on table name. So we could have database tables that are named like this:</p>

<pre><code>table_md5one
table_md5two
table_md5three
</code></pre>

<p>All tables have the exact same schema.</p>

<p>How do we use SQLAlchemy and dynamically specify the <strong>tablename</strong> for the class that corresponds to this? Looks like the declarative_base() classes need to have <strong>tablename</strong> pre-specified. </p>

<p>There will eventually be too many tables to manually specify derived classes from a parent/base class. We want to be able to build a class that can have the tablename set up dynamically (maybe passed as a parameter to a function.) </p>",python|mysql|orm|sqlalchemy,"<p>Try this</p>

<pre><code>import zlib

from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, Integer, BigInteger, DateTime, String

from datetime import datetime

BASE = declarative_base()
ENTITY_CLASS_DICT = {}


class AbsShardingClass(BASE):

    __abstract__ = True

def get_class_name_and_table_name(hashid):
    return 'ShardingClass%s' % hashid, 'sharding_class_%s' % hashid

def get_sharding_entity_class(hashid):
    """"""
    @param hashid: hashid
    @type hashid: int
    @rtype AbsClientUserAuth
    """"""

    if hashid not in ENTITY_CLASS_DICT:
        class_name, table_name = get_class_name_and_table_name(hashid)
        cls = type(class_name, (AbsShardingClass,),
                   {'__tablename__': table_name})
        ENTITY_CLASS_DICT[hashid] = cls

    return ENTITY_CLASS_DICT[hashid]

cls = get_sharding_entity_class(1)
print session.query(cls).get(100)
</code></pre>",4
356,19163911,Dynamically setting __tablename__ for sharding in SQLAlchemy?,"<p>In order to handle a growing database table, we are sharding on table name. So we could have database tables that are named like this:</p>

<pre><code>table_md5one
table_md5two
table_md5three
</code></pre>

<p>All tables have the exact same schema.</p>

<p>How do we use SQLAlchemy and dynamically specify the <strong>tablename</strong> for the class that corresponds to this? Looks like the declarative_base() classes need to have <strong>tablename</strong> pre-specified. </p>

<p>There will eventually be too many tables to manually specify derived classes from a parent/base class. We want to be able to build a class that can have the tablename set up dynamically (maybe passed as a parameter to a function.) </p>",python|mysql|orm|sqlalchemy,"<p>Because I insist to use declarative classes with their <code>__tablename__</code> dynamically specified by given parameter, after days of failing with other solutions and hours of studying SQLAlchemy internals, I come up with the following solution that I believe is simple, elegant and race-condition free.</p>

<pre><code>def get_model(suffix):
    DynamicBase = declarative_base(class_registry=dict())

    class MyModel(DynamicBase):
        __tablename__ = 'table_{suffix}'.format(suffix=suffix)

        id = Column(Integer, primary_key=True)
        name = Column(String)
        ...

    return MyModel
</code></pre>

<p>Since they have their own <code>class_registry</code>, you will not get that warning saying:</p>

<blockquote>
  <p>This declarative base already contains a class with the same class name and module name as mypackage.models.MyModel, and will be replaced in the string-lookup table.</p>
</blockquote>

<p>Hence, you will not be able to reference them from other models with string lookup. However, it works perfectly fine to use these on-the-fly declared models for foreign keys as well:</p>

<pre><code>ParentModel1 = get_model(123)
ParentModel2 = get_model(456)

class MyChildModel(BaseModel):
    __tablename__ = 'table_child'

    id = Column(Integer, primary_key=True)
    name = Column(String)
    parent_1_id = Column(Integer, ForeignKey(ParentModel1.id))
    parent_2_id = Column(Integer, ForeignKey(ParentModel2.id))
    parent_1 = relationship(ParentModel1)
    parent_2 = relationship(ParentModel2)
</code></pre>

<p>If you only use them to query/insert/update/delete without any reference left such as foreign key reference from another table, they, their base classes and also their class_registry will be garbage collected, so no trace will be left.</p>",7
357,19163911,Dynamically setting __tablename__ for sharding in SQLAlchemy?,"<p>In order to handle a growing database table, we are sharding on table name. So we could have database tables that are named like this:</p>

<pre><code>table_md5one
table_md5two
table_md5three
</code></pre>

<p>All tables have the exact same schema.</p>

<p>How do we use SQLAlchemy and dynamically specify the <strong>tablename</strong> for the class that corresponds to this? Looks like the declarative_base() classes need to have <strong>tablename</strong> pre-specified. </p>

<p>There will eventually be too many tables to manually specify derived classes from a parent/base class. We want to be able to build a class that can have the tablename set up dynamically (maybe passed as a parameter to a function.) </p>",python|mysql|orm|sqlalchemy,"<p>In <a href=""https://docs.sqlalchemy.org/en/13/orm/extensions/declarative/mixins.html#augmenting-the-base"" rel=""nofollow noreferrer"">Augmenting the Base</a> you find a way of using a custom <code>Base</code> class that can, for example, calculate the <code>__tablename__</code> attribure dynamically:</p>
<pre><code>class Base(object):
    @declared_attr
    def __tablename__(cls):
        return cls.__name__.lower()
</code></pre>
<p>The only problem here is that I don't know where your hash comes from, but this should give a good starting point.</p>
<p>If you require this algorithm not for all your tables but only for one you could just use the <code>declared_attr</code> on the table you are interested in sharding.</p>",13
358,19163911,Dynamically setting __tablename__ for sharding in SQLAlchemy?,"<p>In order to handle a growing database table, we are sharding on table name. So we could have database tables that are named like this:</p>

<pre><code>table_md5one
table_md5two
table_md5three
</code></pre>

<p>All tables have the exact same schema.</p>

<p>How do we use SQLAlchemy and dynamically specify the <strong>tablename</strong> for the class that corresponds to this? Looks like the declarative_base() classes need to have <strong>tablename</strong> pre-specified. </p>

<p>There will eventually be too many tables to manually specify derived classes from a parent/base class. We want to be able to build a class that can have the tablename set up dynamically (maybe passed as a parameter to a function.) </p>",python|mysql|orm|sqlalchemy,"<p>OK, we went with the custom SQLAlchemy declaration rather than the declarative one. </p>

<p>So we create a dynamic table object like this:</p>

<pre><code>from sqlalchemy import MetaData, Table, Column

def get_table_object(self, md5hash):
    metadata = MetaData()
    table_name = 'table_' + md5hash
    table_object = Table(table_name, metadata,
        Column('Column1', DATE, nullable=False),
        Column('Column2', DATE, nullable=False)
    )
    clear_mappers()
    mapper(ActualTableObject, table_object)
    return ActualTableObject
</code></pre>

<p>Where ActualTableObject is the class mapping to the table.</p>",18
359,34111967,explanation for groupby() in Pandas dataframe object behaviour,"<p>I have a csv file as shown below</p>

<pre><code>Hour,L,Dr,Tag,Code,Vge
0,L5,XI,PS,4R,15
0,L3,St,sst,4R,17
5,L5,XI,PS,4R,12
2,L0,St,v2T,4R,11
8,L2,TI,sst,4R,8
12,L5,XI,PS,4R,18
2,L2,St,PS,4R,9
12,L3,XI,sst,4R,16
</code></pre>

<p>I execute the following script in my <code>ipython</code> notebook.</p>

<pre><code>In[1]
    import pandas as pd
In[2]
    df = pd.read_csv('/python/concepts/pandas/in.csv')
In[3]    
    df.head(n=9)

Out[1]: 

       Hour   L  Dr  Tag Code  Vge
    0     0  L5  XI   PS   4R   15
    1     0  L3  St  sst   4R   17
    2     5  L5  XI   PS   4R   12
    3     2  L0  St  v2T   4R   11
    4     8  L2  TI  sst   4R    8
    5    12  L5  XI   PS   4R   18
    6     2  L2  St   PS   4R    9
    7    12  L3  XI  sst   4R   16

In[4]
    df.groupby(('Hour'))['Vge'].head(n=9)
Out[2]

    0    15
    1    17
    2    12
    3    11
    4     8
    5    18
    6     9
    7    16
    Name: Vge, dtype: int64
</code></pre>

<p>The output doesn't seem to be grouped by <code>Hour</code>.Rather it looks like it is output in the order of <code>dataframe</code> internal index.</p>

<p>I am trying to understand the groupby usage in Pandas dataframe.The usage hasn't cliked yet for me. It would be appreciated if someone could guide me.</p>",python|pandas,"<p>You need to do something with the groups. For example:</p>

<pre><code>&gt;&gt;&gt; df.groupby('Hour').sum()
      Vge
Hour     
0      32
2      20
5      12
8       8
12     34
</code></pre>

<p>or:</p>

<pre><code>&gt;&gt;&gt; df.groupby('Hour').count()['Vge']
Hour
0     2
2     2
5     1
8     1
12    2
Name: Vge, dtype: int64
</code></pre>",1
360,34308153,Should I write else in case when return inside if,"<p>Please consider two approaches:</p>

<pre><code>def test(a):
    if a == True:
        return
    else:
        print('no')

def test(a):
    if a == True:
        return
    print('no')
</code></pre>

<p>What is better way in python? I've heard that explicit is better then implicit, so should I use first one?</p>",python,"<p>These look absolutely the same to the interpreter. (You can use <a href=""https://docs.python.org/3.5/library/dis.html#dis.dis"" rel=""nofollow""><code>dis.dis</code></a> to look into the bytecode of the functions).</p>

<p>So use the shorter one.  </p>",0
361,34308153,Should I write else in case when return inside if,"<p>Please consider two approaches:</p>

<pre><code>def test(a):
    if a == True:
        return
    else:
        print('no')

def test(a):
    if a == True:
        return
    print('no')
</code></pre>

<p>What is better way in python? I've heard that explicit is better then implicit, so should I use first one?</p>",python,"<p>The pythonic way is to write it without the extra <code>else</code>.</p>

<p>Nice <a href=""https://www.youtube.com/all_comments?v=JVVMMULwR4s"" rel=""nofollow"">lightning talk</a> about it (go to minute 5:00).</p>",4
362,34306600,"HTML Scraping with Python, document_fromstring is empty","<p>I am trying to extract some data from a website using python. I found a (<a href=""http://docs.python-guide.org/en/latest/scenarios/scrape/"" rel=""nofollow"">document</a> that exactly fits to my problem.</p>

<p>But when I run the provided code </p>

<pre><code>from lxml import html
import requests


page = requests.get('http://econpy.pythonanywhere.com/ex/001.html')
tree = html.fromstring(page.content)

#This will create a list of buyers:
buyers = tree.xpath('//div[@title=""buyer-name""]/text()')
#This will create a list of prices
prices = tree.xpath('//span[@class=""item-price""]/text()')


print 'Buyers: ', buyers
print 'Prices: ', prices
</code></pre>

<p>I get an error:</p>

<pre><code>  File ""C:\Python27\lib\site-packages\lxml\html\__init__.py"", line 617, in document_fromstring
    ""Document is empty"")

ParserError: Document is empty
</code></pre>

<p>Anyone an idea what the problem could be?</p>",python|web-scraping|lxml,"<p>Your script works fine to me. I got on output:</p>

<pre><code>Buyers:  ['Carson Busses', 'Earl E. Byrd', 'Patty Cakes', 'Derri Anne Connecticut', 'Moe Dess', 'Leda Doggslife', 'Dan Druff', 'Al Fresco', 'Ido Hoe', 'Howie Kisses', 'Len Lease', 'Phil Meup', 'Ira Pent', 'Ben D. Rules', 'Ave Sectomy', 'Gary Shattire', 'Bobbi Soks', 'Sheila Takya', 'Rose Tattoo', 'Moe Tell']
Prices:  ['$29.95', '$8.37', '$15.26', '$19.25', '$19.25', '$13.99', '$31.57', '$8.49', '$14.47', '$15.86', '$11.11', '$15.98', '$16.27', '$7.50', '$50.85', '$14.26', '$5.68', '$15.00', '$114.07', '$10.09']
</code></pre>

<p>I recommend you to try <a href=""https://pypi.python.org/pypi/lxml/3.5.0"" rel=""nofollow"">latest lxml package</a>. And check that <a href=""http://econpy.pythonanywhere.com/ex/001.html"" rel=""nofollow"">desired webpage</a> is available to you at this time.</p>",0
363,40948108,Python TypeError: expected a string or other character buffer object,"<p>I am replacing all the occurrences of 2010 in my JSON file with a random number between 1990 and 2020.</p>

<pre><code>import fileinput
from random import randint
f = fileinput.FileInput('data.json', inplace=True, backup='.bak')
for line in f:
    print(line.replace('2010', randint(1990, 2020)).rstrip())
</code></pre>

<p>I get this error:</p>

<blockquote>
  <p>Traceback (most recent call last):   File ""replace.py"", line 5, in
  
      print(line.replace('2010', randint(1990, 2020)).rstrip()) TypeError: expected a string or other character buffer object</p>
</blockquote>

<p>And here is one example of such an occurrence:</p>

<pre><code>""myDate"" : ""2010_02"",
</code></pre>",python|typeerror,"<blockquote>
<p>string.replace(s, old, new[, maxreplace])</p>
<p>Return a copy of string s
with all occurrences of substring old replaced by new. If the optional
argument maxreplace is given, the first maxreplace occurrences are
replaced.</p>
</blockquote>
<p>The new value must be string, but you are passing a value of type int.</p>
<p>change :</p>
<pre><code>line.replace('2010', randint(1990, 2020)).rstrip())
</code></pre>
<p>to:</p>
<pre><code>line.replace('2010', str(randint(1990, 2020))).rstrip()
</code></pre>",4
364,41211264,TypeError 'str' objects is not callable - Python,"<p>I'm completely new to Python and i'm trying to write a program that essentially works as an alarm clock. I prompt the user for a specific time to set the alarm to and then when that time occurs, a youtube video taken from a list of youtube videos in a txt file will play. However, I'm not quite sure why i'm getting this error, as i'm still largely unfamiliar with python syntax. Here's my code: </p>

<pre><code>import time

def addVideo():
    videoToAdd = raw_input(""Enter the url of the video to add: "")
    with open('alarmVideos.txt', 'w') as f:
        f.write(videoToAdd + '\n')

alarmTime = raw_input(""When would you like to set your alarm to?: \nPlease use this format: 01:00\n"")

localTime = time.strftime(""%H:%M"") 

addVideo = raw_input(""Would you like to add a video to your list? (y/n): \n"")

if addVideo == 'y' or addVideo == 'n':
    addVideo()


print ""Your alarm is set to:"", alarmTime
</code></pre>

<p>I'm getting this error:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Users\bkrause080\Desktop\Free Time Projects\LearningPythonProjects\alarmClock.py"", line 15, in &lt;module&gt;
    addVideo()
TypeError: 'str' object is not callable
</code></pre>

<p>If it helps this error occurs after the user enters y/n to whether not not they want to add a video to their list. Thanks for any help!</p>",python,"<p>Problem is since you named both the function name and variable with the same name(addVideo),Python 'confuses' the function and variable.Rename any one of them:</p>

<pre><code>import time

def addVideo():
    videoToAdd = raw_input(""Enter the url of the video to add: "")
    with open('alarmVideos.txt', 'w') as f:
        f.write(videoToAdd + '\n')

alarmTime =raw_input(""When would you like to set your alarm to?: \nPlease use this format: 01:00\n"")

localTime = time.strftime(""%H:%M"")

add_Video = raw_input(""Would you like to add a video to your list? (y/n): \n"")

if add_Video == 'y' or add_Video == 'n':
    addVideo()


print( ""Your alarm is set to:"", alarmTime)
</code></pre>

<p>Output:</p>

<pre><code>When would you like to set your alarm to?: 
Please use this format: 01:00

Would you like to add a video to your list? (y/n): 
n
Enter the url of the video to add: grg
Your alarm is set to: 
</code></pre>",1
365,41211264,TypeError 'str' objects is not callable - Python,"<p>I'm completely new to Python and i'm trying to write a program that essentially works as an alarm clock. I prompt the user for a specific time to set the alarm to and then when that time occurs, a youtube video taken from a list of youtube videos in a txt file will play. However, I'm not quite sure why i'm getting this error, as i'm still largely unfamiliar with python syntax. Here's my code: </p>

<pre><code>import time

def addVideo():
    videoToAdd = raw_input(""Enter the url of the video to add: "")
    with open('alarmVideos.txt', 'w') as f:
        f.write(videoToAdd + '\n')

alarmTime = raw_input(""When would you like to set your alarm to?: \nPlease use this format: 01:00\n"")

localTime = time.strftime(""%H:%M"") 

addVideo = raw_input(""Would you like to add a video to your list? (y/n): \n"")

if addVideo == 'y' or addVideo == 'n':
    addVideo()


print ""Your alarm is set to:"", alarmTime
</code></pre>

<p>I'm getting this error:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Users\bkrause080\Desktop\Free Time Projects\LearningPythonProjects\alarmClock.py"", line 15, in &lt;module&gt;
    addVideo()
TypeError: 'str' object is not callable
</code></pre>

<p>If it helps this error occurs after the user enters y/n to whether not not they want to add a video to their list. Thanks for any help!</p>",python,"<p>You are overwriting the function addVideo() with a string: <code>addVideo = raw_input(""Would you like ..."")</code></p>

<p>You need to rename the function or the varaible.</p>

<pre><code>addVideoResult = raw_input(""Would..."")

if addVideoResult == 'y' or addVideoResult == 'n':
    addVideo()
</code></pre>",0
366,41211264,TypeError 'str' objects is not callable - Python,"<p>I'm completely new to Python and i'm trying to write a program that essentially works as an alarm clock. I prompt the user for a specific time to set the alarm to and then when that time occurs, a youtube video taken from a list of youtube videos in a txt file will play. However, I'm not quite sure why i'm getting this error, as i'm still largely unfamiliar with python syntax. Here's my code: </p>

<pre><code>import time

def addVideo():
    videoToAdd = raw_input(""Enter the url of the video to add: "")
    with open('alarmVideos.txt', 'w') as f:
        f.write(videoToAdd + '\n')

alarmTime = raw_input(""When would you like to set your alarm to?: \nPlease use this format: 01:00\n"")

localTime = time.strftime(""%H:%M"") 

addVideo = raw_input(""Would you like to add a video to your list? (y/n): \n"")

if addVideo == 'y' or addVideo == 'n':
    addVideo()


print ""Your alarm is set to:"", alarmTime
</code></pre>

<p>I'm getting this error:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Users\bkrause080\Desktop\Free Time Projects\LearningPythonProjects\alarmClock.py"", line 15, in &lt;module&gt;
    addVideo()
TypeError: 'str' object is not callable
</code></pre>

<p>If it helps this error occurs after the user enters y/n to whether not not they want to add a video to their list. Thanks for any help!</p>",python,"<p>You need a different name reference for <code>raw_input(""Would you like to add a video to your list? (y/n): \n"")</code> since you are overriding the function:</p>

<pre><code>run = raw_input(""Would you like to add a video to your list? (y/n): \n"")
if run == 'y' or run == 'n':
    addVideo()
</code></pre>",0
367,41052376,Python List Hierarchy,"<p>I am dealing with some complicated python lists containing tuples and dictionaries. how is it possible to get the hierarchy of a python list like this:</p>

<blockquote>
  <p>[ mean: -17.71262, std: 1.74160, params: {'epsilon': 0, 'C': 1, 'gamma':
  0.0001} mean: -13.05773, std: 2.16184, params: {'epsilon': 0, 'C': 1, 'gamma': 0.0101} mean: -17.64222, std: 1.47564, params: {'epsilon': 4,
  'C': 1, 'gamma': 0.0001} mean: -13.61797, std: 1.95222, params:
  {'epsilon': 4, 'C': 1, 'gamma': 0.0101} ]</p>
</blockquote>

<p>it is a list of 4 items each of them is a tuple of 3 items and the third tuple item is a dictionary with three keys</p>

<p>it is a result of scikit learn grid search with cross validation and this is the used code:</p>

<blockquote>
  <p>param_grid={'C':np.arange(1,50000,25000),'epsilon':np.arange(0,8,4),'gamma':np.arange(0.0001,0.02,0.02)} 
  opt=GridSearchCV(SVR(),param_grid,scoring='neg_mean_absolute_error',n_jobs=8,cv=3, verbose=1) 
  opt.fit(tvr_sets[:,:2],tvr_sets[:,2])
  print(opt.grid_scores_)</p>
</blockquote>

<p>is there a python command that can describe this hierarchy?</p>",python,"<p>This is returned from a grid search and cross-validation. This is not a tuple it is a list as far as I am concerned but it is rather unimportant. You have a list with each output from the grid search.</p>

<p>Each element is the result of that particular <code>params</code></p>

<pre><code> GridSearch &amp; Cross-validation =&gt; {std: float, mean: float, params: {Your grid search params}}
</code></pre>

<p>The <code>std/mean</code> arise from the cross-validation process.</p>

<p>Based on the comments</p>

<blockquote>
  <p>After writing it to a file I want to read it again in the same format and access the items to plot the results</p>
</blockquote>

<p>You can create your own format</p>

<p>hash your params as follows</p>

<pre><code>hash_key = '_'.join(['{0}_{1}'.format(k, v) for (k,v) in params.iteritems() ])
</code></pre>

<p>will produce something like this</p>

<pre><code>'epsilon_0_C_1_gamma_0.0001'
</code></pre>

<p>I would loop over your structure returned as follows</p>

<pre><code> import csv
 with open('output.csv', 'w') as output:
     csvObj = csv.writer(output)
     # write headers
     csvObj = csv.writerow(['params','mean','std'])
     for cv_output in cv_outputs:
         std = cv_output['std']
         mean = cv_output['mean']
         params = cv_output['params']
         hash_params = '_'.join(['{0}_{1}'.format(k, v) for (k,v) in params.iteritems() ])
         csvObj.writerow([hash_params, mean, std])
</code></pre>

<p>Or alternatively you could split the <code>params</code> keys to columns. I will leave that for you to decide.</p>",2
368,40976287,Joins not working in Django,"<p>I`m trying to write an inner join from two models, but I stuck in between.</p>

<p>My <strong>models.py</strong> page is: </p>

<pre><code>class MovieDetails(models.Model):
   moviename = models.CharField(max_length=200)
   movieid = models.CharField(primary_key=True, max_length=20)
   def __str__(self):
      return self.movieid

class TheaterBase(models.Model):
    theatername = models.CharField(max_length=500)
    theaterid = models.CharField(primary_key=True, max_length=20)
    def __str__(self):
       return self.theaterid

class MovieActiveDays(models.Model):
     moviedetails = models.ForeignKey(MovieDetails, on_delete=models.CASCADE)
     theaterbase = models.ForeignKey(TheaterBase, on_delete=models.CASCADE)
     activedayid = models.CharField(primary_key=True, max_length=20)
     def __str__(self):
         return self.activedayid
</code></pre>

<p>In My <strong>Views.py</strong> page: </p>

<pre><code>moviedetails_id = MovieActiveDays.objects.filter(theaterbase=theaterid, ).values('moviedetails_id')
result= MovieDetails.objects.filter(movieid=moviedetails_id)
</code></pre>

<p>The First line filters the movies depending upon the theaters.
The second line will fetch more than 1 row from the database.
And whenever I try to sent the <strong>result</strong> to html <strong>template</strong> then it prints only the moviedetails_id but not the name of the movie or its contents.
How do I need to print all the contents of the moviedetails table.</p>

<p>Thanks in advance</p>",python|django|join|django-models|django-queryset,"<p>The fundamental principle is to deal with these as objects, not as database tables. You need movie details, so start with that. You can then follow the relationships via Django's double-underscore syntax. So:</p>

<pre><code>MovieDetails.objects.filter(movieactivedays__theaterbase_id=theaterid)
</code></pre>

<p>We can make this better by realising that MovieActiveDays is a through table in a many-to-many between MovieDetails and TheaterBase:</p>

<pre><code>class MovieDetails(models.Model):
    ...
    theatres = models.ManyToManyField('TheaterBase', through='MovieActiveDays')
</code></pre>

<p>Now we can shorten the query:</p>

<pre><code>MovieDetails.objects.filter(theatres=theaterid)
</code></pre>

<p>and Django will take care of all the joins for us.</p>",0
369,40976287,Joins not working in Django,"<p>I`m trying to write an inner join from two models, but I stuck in between.</p>

<p>My <strong>models.py</strong> page is: </p>

<pre><code>class MovieDetails(models.Model):
   moviename = models.CharField(max_length=200)
   movieid = models.CharField(primary_key=True, max_length=20)
   def __str__(self):
      return self.movieid

class TheaterBase(models.Model):
    theatername = models.CharField(max_length=500)
    theaterid = models.CharField(primary_key=True, max_length=20)
    def __str__(self):
       return self.theaterid

class MovieActiveDays(models.Model):
     moviedetails = models.ForeignKey(MovieDetails, on_delete=models.CASCADE)
     theaterbase = models.ForeignKey(TheaterBase, on_delete=models.CASCADE)
     activedayid = models.CharField(primary_key=True, max_length=20)
     def __str__(self):
         return self.activedayid
</code></pre>

<p>In My <strong>Views.py</strong> page: </p>

<pre><code>moviedetails_id = MovieActiveDays.objects.filter(theaterbase=theaterid, ).values('moviedetails_id')
result= MovieDetails.objects.filter(movieid=moviedetails_id)
</code></pre>

<p>The First line filters the movies depending upon the theaters.
The second line will fetch more than 1 row from the database.
And whenever I try to sent the <strong>result</strong> to html <strong>template</strong> then it prints only the moviedetails_id but not the name of the movie or its contents.
How do I need to print all the contents of the moviedetails table.</p>

<p>Thanks in advance</p>",python|django|join|django-models|django-queryset,"<p>here result is the object of MovieDetails so you can get </p>

<p>movie_name= result.moviename</p>",0
370,8747865,What's the best strategy for creating a web interface for a python application?,"<p>I've created a simple gstreamer-based python audio application with a GTK+ GUI for picking and playing a webstream from a XML list. Then I connected my PC speakers output to the input of an old stereo receiver with large loudspeakers and presto, I have a pretty good sound system that is heard over most of my home.</p>

<p>Now I'd like to add a web user-interface to remote control the application from a room other than the one with the computer but so far all my attempts have been fruitless.</p>

<p>In particular I wonder if it is possible to create a sort of socket with signals like those of GTK GUIs to run methods that change gstreamer parameters.</p>

<p>Or is there a more realistic/feasible strategy?</p>

<p>Thanks in advance for any help!</p>",python|user-interface,"<p>I would suggest using one of the lighter-weight pure-Python web server options and either write a stand-alone WSGI application or use a micro-framework.</p>

<p>Gevent would be a good option: <a href=""http://www.gevent.org/servers.html"" rel=""nofollow"">http://www.gevent.org/servers.html</a></p>

<p>Here is a sample implementation of a WSGI application using Gevent:
<a href=""https://bitbucket.org/denis/gevent/src/tip/examples/wsgiserver.py#cl-4"" rel=""nofollow"">https://bitbucket.org/denis/gevent/src/tip/examples/wsgiserver.py#cl-4</a></p>

<p>For a micro-framework, I'd suggest using Flask.</p>",0
371,8747865,What's the best strategy for creating a web interface for a python application?,"<p>I've created a simple gstreamer-based python audio application with a GTK+ GUI for picking and playing a webstream from a XML list. Then I connected my PC speakers output to the input of an old stereo receiver with large loudspeakers and presto, I have a pretty good sound system that is heard over most of my home.</p>

<p>Now I'd like to add a web user-interface to remote control the application from a room other than the one with the computer but so far all my attempts have been fruitless.</p>

<p>In particular I wonder if it is possible to create a sort of socket with signals like those of GTK GUIs to run methods that change gstreamer parameters.</p>

<p>Or is there a more realistic/feasible strategy?</p>

<p>Thanks in advance for any help!</p>",python|user-interface,"<p>The fastest and easiest way would probably be using <a href=""http://docs.python.org/release/2.6.7/library/cgi.html?highlight=cgi#module-cgi"" rel=""nofollow"">cgi-scripts</a>. If you want  a more sophisticated approach you could consider using a webframework like django, turbogears or the likes.</p>",1
372,8747865,What's the best strategy for creating a web interface for a python application?,"<p>I've created a simple gstreamer-based python audio application with a GTK+ GUI for picking and playing a webstream from a XML list. Then I connected my PC speakers output to the input of an old stereo receiver with large loudspeakers and presto, I have a pretty good sound system that is heard over most of my home.</p>

<p>Now I'd like to add a web user-interface to remote control the application from a room other than the one with the computer but so far all my attempts have been fruitless.</p>

<p>In particular I wonder if it is possible to create a sort of socket with signals like those of GTK GUIs to run methods that change gstreamer parameters.</p>

<p>Or is there a more realistic/feasible strategy?</p>

<p>Thanks in advance for any help!</p>",python|user-interface,"<p>You could use <a href=""http://bottlepy.org/"" rel=""nofollow"">Bottle</a>, a very simple micro web-framework.</p>

<blockquote>
  <p>Bottle is a fast, simple and lightweight WSGI micro web-framework for Python. It is distributed as a single file module and has no dependencies other than the Python Standard Library.</p>
</blockquote>

<p>Hello world:</p>

<pre><code>from bottle import route, run

@route('/hello/:name')
def index(name='World'):
    return '&lt;b&gt;Hello %s!&lt;/b&gt;' % name

run(host='localhost', port=8080)
</code></pre>",3
373,8892307,Filtering a model in Django based on a condition upon the latest child record,"<p>I have two models like this:</p>

<pre><code>class Store(models.Model):
    name = models.CharField(max_length=255)

class Order(models.Model):
    store = models.ForeignKey(Store)
    date = models.DateTimeField(auto_now_add=True)
    success = models.BooleanField()
</code></pre>

<p>I would like to filter all the records from the <code>Store</code> model whose latest order was successful i.e. <code>success == True</code>.</p>

<p>Although it looks very simple, I'm having issues figuring how I would accomplish this using the ORM query system.</p>

<p>Any help? Thanks.</p>",python|django|django-queryset,"<p>This is just an idea, so dont beat me if I am totally wrong :)
I thought you could do something like this:</p>

<pre><code># first annotate latest order to Store which returns new queryset, filter new qs
# by success = True
stores = Store.objects.annotate(Max('order__date')).filter(order__success=True)
</code></pre>

<p>This is untested to be honest.</p>",1
374,8892307,Filtering a model in Django based on a condition upon the latest child record,"<p>I have two models like this:</p>

<pre><code>class Store(models.Model):
    name = models.CharField(max_length=255)

class Order(models.Model):
    store = models.ForeignKey(Store)
    date = models.DateTimeField(auto_now_add=True)
    success = models.BooleanField()
</code></pre>

<p>I would like to filter all the records from the <code>Store</code> model whose latest order was successful i.e. <code>success == True</code>.</p>

<p>Although it looks very simple, I'm having issues figuring how I would accomplish this using the ORM query system.</p>

<p>Any help? Thanks.</p>",python|django|django-queryset,"<p>My approach is this: do 2 lists, first one with (id_store, last_success_date) tuples and second one with (id_store, last_date) tuples:</p>

<pre><code>l_succ = stores.objects.filter( 
                       order__success = True 
                  ).annotate(
                       last_success=Max('order__date')
                  ).value_list (
                       'id', 'last_success'
                  )
#l_succ = [ (1, '1/1/2011'), (2, '31/12/2010'), ... ] &lt;-l_succ result

l_last = stores.objects.annotate(
                       last_date=Max('order__date')
                  ).value_list (
                       'id', 'last_date'
                  )
#l_last = [ (1, '1/1/2011'), (2, '3/1/2011'), ... ]   &lt;-l_last result
</code></pre>

<p>Then take store ids for stores that last data and last success date are equals, and you have the query:</p>

<pre><code>store_success_ids =  [ k[0] for k in l_succ if k in l_last ]
#store_success_ids = [1, 5, ... ]          &lt;-store_success_ids result
#Cast l_last to dictionary to do lookups if you have a lot of stores.

result = Store.objects.filter( pk__in = store_success_ids)        
</code></pre>

<p>It seems an elegant solution, only four lines of code for a complex query (but with a simple requeriment). Disclaimer, it is not tested.</p>",2
375,8892307,Filtering a model in Django based on a condition upon the latest child record,"<p>I have two models like this:</p>

<pre><code>class Store(models.Model):
    name = models.CharField(max_length=255)

class Order(models.Model):
    store = models.ForeignKey(Store)
    date = models.DateTimeField(auto_now_add=True)
    success = models.BooleanField()
</code></pre>

<p>I would like to filter all the records from the <code>Store</code> model whose latest order was successful i.e. <code>success == True</code>.</p>

<p>Although it looks very simple, I'm having issues figuring how I would accomplish this using the ORM query system.</p>

<p>Any help? Thanks.</p>",python|django|django-queryset,"<p>You can do it in one query.</p>

<p>Use the <a href=""https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra"" rel=""nofollow"">.extra()</a> functionality of QuerySets to write SQL that looks something like this:</p>

<pre><code>Store.objects.extra(where=['id in (select store_id from order where success = true)']) 
</code></pre>",0
376,8892307,Filtering a model in Django based on a condition upon the latest child record,"<p>I have two models like this:</p>

<pre><code>class Store(models.Model):
    name = models.CharField(max_length=255)

class Order(models.Model):
    store = models.ForeignKey(Store)
    date = models.DateTimeField(auto_now_add=True)
    success = models.BooleanField()
</code></pre>

<p>I would like to filter all the records from the <code>Store</code> model whose latest order was successful i.e. <code>success == True</code>.</p>

<p>Although it looks very simple, I'm having issues figuring how I would accomplish this using the ORM query system.</p>

<p>Any help? Thanks.</p>",python|django|django-queryset,"<p>Would this approach work for you? Loop over all of the stores and grab the latest success for each store if one exists.</p>

<p>My original idea that wasn't correct:</p>

<pre><code>latest_successes = []
store_objects = Store.objects.all()
for store_obj in store_objects:
    try:
        latest_success = Order.objects.filter(store=store_obj).filter(success=True).order_by('-date')[0]
    except IndexError:
        pass
    else:
        latest_successes.append(latest_success)
</code></pre>

<p>Edit based on solid comment from @demalexx</p>

<pre><code>latest_successes = []
store_objects = Store.objects.all()
for store_obj in store_objects:
    try:
        is_latest_success = store_obj.order_set.order_by('-date')[0].success
    except IndexError:
        pass
    else:
        latest_successes.append(store_obj)
</code></pre>",0
377,8567366,Getting IOError: [Errno Input overflowed] -9981 when setting PyAudio Stream input and output to True,"<p>I'm trying to run the following code (an example from the PyAudio documentation) on my Mac (OS 10.7.2):</p>

<pre><code>import pyaudio
import sys

chunk = 1024
FORMAT = pyaudio.paInt16
CHANNELS = 1
RATE = 44100
RECORD_SECONDS = 5

p = pyaudio.PyAudio()

stream = p.open(format = FORMAT,
                channels = CHANNELS,
                rate = RATE,
                input = True,
                output = True,
                frames_per_buffer = chunk)

print ""* recording""
for i in range(0, 44100 / chunk * RECORD_SECONDS):
    data = stream.read(chunk)
    stream.write(data, chunk)
print ""* done""

stream.stop_stream()
stream.close()
p.terminate()
</code></pre>

<p>The error that I'm giving is: </p>

<pre><code>Traceback (most recent call last):
  File ""PyAudioExample.py"", line 24, in &lt;module&gt;
data = stream.read(chunk)
  File ""/Library/Python/2.7/site-packages/pyaudio.py"", line 564, in read
return pa.read_stream(self._stream, num_frames)
IOError: [Errno Input overflowed] -9981
</code></pre>

<p>I did a search for this error on Google and found that either making the chunk bigger or smaller could help. I tried this and it made no difference. I also tried adding in the following code to catch an overload exception:</p>

<pre><code>try:
    data = stream.read(chunk)
except IOError as ex:
    if ex[1] != pyaudio.paInputOverflowed:
        raise
    data = '\x00' * chunk
</code></pre>

<p>That avoided the error, but instead of outputting my input audio, I heard a bunch of loud clicking. </p>

<p>To troubleshoot, I commented out the output=True line and the program ran fine, but did not output anything. I commented out the input=True and read in a Wave file instead and the stream was able to output the audio. I tried creating 2 streams, one for input and one for output, and that didn't work either.</p>

<p>Is there something else that I can do to avoid this error?</p>",python|portaudio|pyaudio,"<p>i run into the same situation when i manually install pyaudio (built portaudio from source),
a not so perfect workaround is to download the pyaudio for <a href=""http://people.csail.mit.edu/hubert/pyaudio/"" rel=""nofollow"">Apple Mac OS X (Universal)</a>
install it, which will only install it for python 2.6 and previous version. 
if you run your code with /usr/bin/python2.6, then you are done. 
but if you really want 2.7, copy the installed module (pyaudio.py, _portaudio.so) to the 2.7 folder /Library/Python/2.7/site-packages/. </p>

<p>i donnot know why it does not work building the module from source. </p>",1
378,8567366,Getting IOError: [Errno Input overflowed] -9981 when setting PyAudio Stream input and output to True,"<p>I'm trying to run the following code (an example from the PyAudio documentation) on my Mac (OS 10.7.2):</p>

<pre><code>import pyaudio
import sys

chunk = 1024
FORMAT = pyaudio.paInt16
CHANNELS = 1
RATE = 44100
RECORD_SECONDS = 5

p = pyaudio.PyAudio()

stream = p.open(format = FORMAT,
                channels = CHANNELS,
                rate = RATE,
                input = True,
                output = True,
                frames_per_buffer = chunk)

print ""* recording""
for i in range(0, 44100 / chunk * RECORD_SECONDS):
    data = stream.read(chunk)
    stream.write(data, chunk)
print ""* done""

stream.stop_stream()
stream.close()
p.terminate()
</code></pre>

<p>The error that I'm giving is: </p>

<pre><code>Traceback (most recent call last):
  File ""PyAudioExample.py"", line 24, in &lt;module&gt;
data = stream.read(chunk)
  File ""/Library/Python/2.7/site-packages/pyaudio.py"", line 564, in read
return pa.read_stream(self._stream, num_frames)
IOError: [Errno Input overflowed] -9981
</code></pre>

<p>I did a search for this error on Google and found that either making the chunk bigger or smaller could help. I tried this and it made no difference. I also tried adding in the following code to catch an overload exception:</p>

<pre><code>try:
    data = stream.read(chunk)
except IOError as ex:
    if ex[1] != pyaudio.paInputOverflowed:
        raise
    data = '\x00' * chunk
</code></pre>

<p>That avoided the error, but instead of outputting my input audio, I heard a bunch of loud clicking. </p>

<p>To troubleshoot, I commented out the output=True line and the program ran fine, but did not output anything. I commented out the input=True and read in a Wave file instead and the stream was able to output the audio. I tried creating 2 streams, one for input and one for output, and that didn't work either.</p>

<p>Is there something else that I can do to avoid this error?</p>",python|portaudio|pyaudio,"<p>There was a bug in portaudio that until very recently caused many spurious overflow errors in OS X (see <a href=""http://music.columbia.edu/pipermail/portaudio/2012-June/014167.html"" rel=""nofollow"">http://music.columbia.edu/pipermail/portaudio/2012-June/014167.html</a>).</p>

<p>I have confirmed that the portaudio daily snapshot as of 2012-08-06 fixes the bug.</p>",0
379,8885880,Installing Selenium webdriver error on OS X,"<p>When installing Selenium using the following command line:</p>

<pre><code>pip install -U selenium
</code></pre>

<p>I get the following warnings and errors:</p>

<pre><code>/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'src_root'
  warnings.warn(msg)

warning: no files found matching 'docs/api/py/index.rst'
error: could not create '/Library/Python/2.7/site-packages/selenium': Permission denied
</code></pre>

<p>Any suggestions?</p>",python|selenium|pip,"<p>It looks like you don't have permission to write to the system Library. Could you try with ""sudo pip install -U selenium""? </p>

<p>[moved from comments]</p>",3
380,8885880,Installing Selenium webdriver error on OS X,"<p>When installing Selenium using the following command line:</p>

<pre><code>pip install -U selenium
</code></pre>

<p>I get the following warnings and errors:</p>

<pre><code>/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'src_root'
  warnings.warn(msg)

warning: no files found matching 'docs/api/py/index.rst'
error: could not create '/Library/Python/2.7/site-packages/selenium': Permission denied
</code></pre>

<p>Any suggestions?</p>",python|selenium|pip,"<p>I recently stumbled on the same problem. <code>pip install --user selenium</code> seems like a neater way to install the package, you can find more on the <code>--user</code> option over <a href=""https://pip.pypa.io/en/stable/reference/pip_install/#cmdoption--user"" rel=""nofollow"">here</a></p>",2
381,8421097,Export Python interpreter history to a file?,"<p>Many times I will use the Python interpreter to inspect variables and step through commands before I actually write to a file. However by the end I have around 30 commands in the interpreter, and have to copy/paste them into a file to run. Is there a way I can export/write the Python interpreter history into a file?</p>

<p>For example</p>

<pre><code>&gt;&gt;&gt; a = 5
&gt;&gt;&gt; b = a + 6
&gt;&gt;&gt; import sys
&gt;&gt;&gt; export('history', 'interactions.py') 
</code></pre>

<p>And then I can open the <code>interactions.py</code> file and read:</p>

<pre><code>a = 5
b = a + 6
import sys
</code></pre>",python,"<p>why do you want to write the code from interpreter
to python file? you use interpreters to test your code, and so you can write same code in your program. Or you can create you own interpreter that can save commands in a file.</p>
<pre><code>#shell.py
import code, sys
class Shell(code.InteractiveConsole):
    def write(self, s):
        open(&quot;history.cmd&quot;, &quot;a&quot;).write(f&quot;{s}\n&quot;)
        sys.stderr.write(f&quot;{s}&quot;)
    def raw_input(self, prompt):
        a = input(prompt)
        open(&quot;history.cmd&quot;, &quot;a&quot;).write(f&quot;{prompt}{a}\n&quot;)
        return a
if __name__ == &quot;__main__&quot;: # run the program only if runned
    shell = Shell(filename=&quot;&lt;stdin&gt;&quot;) #you can use your own filename
    shell.interact()
</code></pre>
<p>You can inherit this class in your own class and create your own interpreter!</p>",0
382,8421097,Export Python interpreter history to a file?,"<p>Many times I will use the Python interpreter to inspect variables and step through commands before I actually write to a file. However by the end I have around 30 commands in the interpreter, and have to copy/paste them into a file to run. Is there a way I can export/write the Python interpreter history into a file?</p>

<p>For example</p>

<pre><code>&gt;&gt;&gt; a = 5
&gt;&gt;&gt; b = a + 6
&gt;&gt;&gt; import sys
&gt;&gt;&gt; export('history', 'interactions.py') 
</code></pre>

<p>And then I can open the <code>interactions.py</code> file and read:</p>

<pre><code>a = 5
b = a + 6
import sys
</code></pre>",python,"<p>The following is not my own work, but frankly I don't remember where I first got it... However: place the following file (on a GNU/Linux system) in your home folder (the name of the file should be <code>.pystartup.py</code>):</p>

<pre><code># Add auto-completion and a stored history file of commands to your Python
# interactive interpreter. Requires Python 2.0+, readline. Autocomplete is
# bound to the Esc key by default (you can change it - see readline docs).
#
# Store the file in ~/.pystartup, and set an environment variable to point
# to it, e.g. ""export PYTHONSTARTUP=/max/home/itamar/.pystartup"" in bash.
#
# Note that PYTHONSTARTUP does *not* expand ""~"", so you have to put in the
# full path to your home directory.

import atexit
import os
import readline
import rlcompleter

historyPath = os.path.expanduser(""~/.pyhistory"")
historyTmp = os.path.expanduser(""~/.pyhisttmp.py"")

endMarkerStr= ""# # # histDUMP # # #""

saveMacro= ""import readline; readline.write_history_file('""+historyTmp+""'); \
    print '####&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;'; print ''.join(filter(lambda lineP: \
    not lineP.strip().endswith('""+endMarkerStr+""'),  \
    open('""+historyTmp+""').readlines())[-50:])+'####&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;'""+endMarkerStr

readline.parse_and_bind('tab: complete')
readline.parse_and_bind('\C-w: ""'+saveMacro+'""')

def save_history(historyPath=historyPath, endMarkerStr=endMarkerStr):
    import readline
    readline.write_history_file(historyPath)
    # Now filter out those line containing the saveMacro
    lines= filter(lambda lineP, endMarkerStr=endMarkerStr:
                      not lineP.strip().endswith(endMarkerStr), open(historyPath).readlines())
    open(historyPath, 'w+').write(''.join(lines))

if os.path.exists(historyPath):
    readline.read_history_file(historyPath)

atexit.register(save_history)

del os, atexit, readline, rlcompleter, save_history, historyPath
del historyTmp, endMarkerStr, saveMacro
</code></pre>

<p>You will then get all the goodies that come with bash shell (up and down arrows navigating the history, ctrl-r for reverse search, etc....).</p>

<p><strong>Your complete command history will be stored in a file located at: <code>~/.pyhistory</code>.</strong></p>

<p>I'm using this from ages and I never got a problem.</p>

<p>HTH!</p>",5
383,8421097,Export Python interpreter history to a file?,"<p>Many times I will use the Python interpreter to inspect variables and step through commands before I actually write to a file. However by the end I have around 30 commands in the interpreter, and have to copy/paste them into a file to run. Is there a way I can export/write the Python interpreter history into a file?</p>

<p>For example</p>

<pre><code>&gt;&gt;&gt; a = 5
&gt;&gt;&gt; b = a + 6
&gt;&gt;&gt; import sys
&gt;&gt;&gt; export('history', 'interactions.py') 
</code></pre>

<p>And then I can open the <code>interactions.py</code> file and read:</p>

<pre><code>a = 5
b = a + 6
import sys
</code></pre>",python,"<p>If you are using Linux/Mac and have readline library, you could add the following to a file and export it in your <code>.bash_profile</code> and you will have both completion and history.</p>

<pre><code># python startup file
import readline
import rlcompleter
import atexit
import os
# tab completion
readline.parse_and_bind('tab: complete')
# history file
histfile = os.path.join(os.environ['HOME'], '.pythonhistory')
try:
    readline.read_history_file(histfile)
except IOError:
    pass
atexit.register(readline.write_history_file, histfile)
del os, histfile, readline, rlcompleter
</code></pre>

<p>Export command:</p>

<pre><code>export PYTHONSTARTUP=path/to/.pythonstartup
</code></pre>

<p>This will save your python console history at ~/.pythonhistory</p>",13
384,8421097,Export Python interpreter history to a file?,"<p>Many times I will use the Python interpreter to inspect variables and step through commands before I actually write to a file. However by the end I have around 30 commands in the interpreter, and have to copy/paste them into a file to run. Is there a way I can export/write the Python interpreter history into a file?</p>

<p>For example</p>

<pre><code>&gt;&gt;&gt; a = 5
&gt;&gt;&gt; b = a + 6
&gt;&gt;&gt; import sys
&gt;&gt;&gt; export('history', 'interactions.py') 
</code></pre>

<p>And then I can open the <code>interactions.py</code> file and read:</p>

<pre><code>a = 5
b = a + 6
import sys
</code></pre>",python,"<p>Much has changed over the last 8 years since this question was asked.</p>

<p>It appears that since Python 3.4, history is automatically written to <code>~/.python_history</code> as a plain text file.</p>

<p>If you want to disable that or learn more, check out</p>

<ul>
<li><a href=""https://unix.stackexchange.com/questions/121377/how-can-i-disable-the-new-history-feature-in-python-3-4"">How can I disable the new history feature in Python 3.4? - Unix &amp; Linux Stack Exchange</a></li>
<li><a href=""https://docs.python.org/3/library/site.html#readline-configuration"" rel=""noreferrer"">Readline configuration - Site-specific configuration hook — Python 3.7.2 documentation</a></li>
</ul>

<p>And, of course, as noted by many others, <a href=""https://ipython.org/"" rel=""noreferrer"">IPython</a> has great features for saving, searching and manipulating history. Learn more via <code>%history?</code></p>",6
385,8421097,Export Python interpreter history to a file?,"<p>Many times I will use the Python interpreter to inspect variables and step through commands before I actually write to a file. However by the end I have around 30 commands in the interpreter, and have to copy/paste them into a file to run. Is there a way I can export/write the Python interpreter history into a file?</p>

<p>For example</p>

<pre><code>&gt;&gt;&gt; a = 5
&gt;&gt;&gt; b = a + 6
&gt;&gt;&gt; import sys
&gt;&gt;&gt; export('history', 'interactions.py') 
</code></pre>

<p>And then I can open the <code>interactions.py</code> file and read:</p>

<pre><code>a = 5
b = a + 6
import sys
</code></pre>",python,"<p>Python on Linux should have history support via readline library, see <a href=""http://docs.python.org/tutorial/interactive.html"" rel=""nofollow"">http://docs.python.org/tutorial/interactive.html</a></p>",0
386,8421097,Export Python interpreter history to a file?,"<p>Many times I will use the Python interpreter to inspect variables and step through commands before I actually write to a file. However by the end I have around 30 commands in the interpreter, and have to copy/paste them into a file to run. Is there a way I can export/write the Python interpreter history into a file?</p>

<p>For example</p>

<pre><code>&gt;&gt;&gt; a = 5
&gt;&gt;&gt; b = a + 6
&gt;&gt;&gt; import sys
&gt;&gt;&gt; export('history', 'interactions.py') 
</code></pre>

<p>And then I can open the <code>interactions.py</code> file and read:</p>

<pre><code>a = 5
b = a + 6
import sys
</code></pre>",python,"<p>In ipython shell:</p>

<pre><code>%history 
</code></pre>

<p>The command will print all the commands you have entered in the current python shell.</p>

<pre><code>% history -g 
</code></pre>

<p>The command will print all the commands logged in python shell upto some significant number of lines.</p>

<pre><code>%history -g -f history.log 
</code></pre>

<p>Will write the logged commands along with the line number. you can remove the fixed width line numbers for the commands of interest using gvim. </p>",2
387,8421097,Export Python interpreter history to a file?,"<p>Many times I will use the Python interpreter to inspect variables and step through commands before I actually write to a file. However by the end I have around 30 commands in the interpreter, and have to copy/paste them into a file to run. Is there a way I can export/write the Python interpreter history into a file?</p>

<p>For example</p>

<pre><code>&gt;&gt;&gt; a = 5
&gt;&gt;&gt; b = a + 6
&gt;&gt;&gt; import sys
&gt;&gt;&gt; export('history', 'interactions.py') 
</code></pre>

<p>And then I can open the <code>interactions.py</code> file and read:</p>

<pre><code>a = 5
b = a + 6
import sys
</code></pre>",python,"<p><a href=""http://ipython.scipy.org/moin/"">IPython</a> is extremely useful if you like using interactive sessions. For example for your usecase there is the save command, you just input save my_useful_session 10-20 23 to save input lines 10 to 20 and 23 to my_useful_session.py. (to help with this, every line is prefixed by its number)</p>

<p>Look at the videos on the documentation page to get a quick overview of the features.</p>

<p>::OR::</p>

<p>There is a <a href=""http://docs.python.org/tutorial/interactive.html?highlight=atexit"">way</a> to do it. Store the file in ~/.pystartup</p>

<pre><code># Add auto-completion and a stored history file of commands to your Python
# interactive interpreter. Requires Python 2.0+, readline. Autocomplete is
# bound to the Esc key by default (you can change it - see readline docs).
#
# Store the file in ~/.pystartup, and set an environment variable to point
# to it:  ""export PYTHONSTARTUP=/home/user/.pystartup"" in bash.
#
# Note that PYTHONSTARTUP does *not* expand ""~"", so you have to put in the
# full path to your home directory.

import atexit
import os
import readline
import rlcompleter

historyPath = os.path.expanduser(""~/.pyhistory"")

def save_history(historyPath=historyPath):
    import readline
    readline.write_history_file(historyPath)

if os.path.exists(historyPath):
    readline.read_history_file(historyPath)

atexit.register(save_history)
del os, atexit, readline, rlcompleter, save_history, historyPath
</code></pre>

<p>You can also add this to get autocomplete for free:</p>

<pre><code>readline.parse_and_bind('tab: complete')
</code></pre>

<p>Please note that this will only work on *nix systems. As readline is only available in Unix platform.</p>",26
388,8577459,Why do these two implementations of expmod differ for large values?,"<p>I've written out a couple of functions for doing <a href=""http://www.cs.utoronto.ca/~neto/code/fastexp.scm"" rel=""nofollow""><code>expmod</code></a>, that is, <code>(x ** y) % n</code>. These are both standard functions, I've checked and re-checked both but can't find any silly errors.</p>

<p>Here's the recursive one:</p>

<pre><code>def expmod(x,y,m):
    if y == 0: return 1
    if y % 2 == 0:
        return square(expmod(x,y/2,m)) % m # def square(x): return x*x
    else:
        return (x * expmod(x,y-1,m)) % m
</code></pre>

<p>...and here's the non-recursive one:</p>

<pre><code>def non_recursive_expmod(x,y,m):
    x = x % m
    y = y % m
    result = 1
    while y &gt; 0:
        if(y%2 == 1):
            result = (result * x) % m
        x = (x*x) % m
        y = y/2
    return result
</code></pre>

<p>They agree for small values:</p>

<pre><code>&gt;&gt;&gt; expmod(123,456,789) - non_recursive_expmod(123,456,789)
0
</code></pre>

<p>...but don't for larger ones:</p>

<pre><code>&gt;&gt;&gt; expmod(24354321,5735275,654) - non_recursive_expmod(24354321,5735275,654)
-396L
</code></pre>

<p>What's going on?</p>",python|algorithm,"<p>Non recursive does not decrease y in case it is odd, and even part needs else in case y == 1</p>",0
389,8577459,Why do these two implementations of expmod differ for large values?,"<p>I've written out a couple of functions for doing <a href=""http://www.cs.utoronto.ca/~neto/code/fastexp.scm"" rel=""nofollow""><code>expmod</code></a>, that is, <code>(x ** y) % n</code>. These are both standard functions, I've checked and re-checked both but can't find any silly errors.</p>

<p>Here's the recursive one:</p>

<pre><code>def expmod(x,y,m):
    if y == 0: return 1
    if y % 2 == 0:
        return square(expmod(x,y/2,m)) % m # def square(x): return x*x
    else:
        return (x * expmod(x,y-1,m)) % m
</code></pre>

<p>...and here's the non-recursive one:</p>

<pre><code>def non_recursive_expmod(x,y,m):
    x = x % m
    y = y % m
    result = 1
    while y &gt; 0:
        if(y%2 == 1):
            result = (result * x) % m
        x = (x*x) % m
        y = y/2
    return result
</code></pre>

<p>They agree for small values:</p>

<pre><code>&gt;&gt;&gt; expmod(123,456,789) - non_recursive_expmod(123,456,789)
0
</code></pre>

<p>...but don't for larger ones:</p>

<pre><code>&gt;&gt;&gt; expmod(24354321,5735275,654) - non_recursive_expmod(24354321,5735275,654)
-396L
</code></pre>

<p>What's going on?</p>",python|algorithm,"<p>Your function <code>non_recursive_expmod</code> has some suspicious steps in it: Remove the <code>%m</code> for <code>x</code> and <code>y</code> at the beginning. Both are not needed.</p>

<p>Additionally make sure that the division of <code>y</code> is an integer division by using <code>y = y // 2</code>.</p>

<p>In total the function should look like this:</p>

<pre><code>def non_recursive_expmod(x, y, m):
    result = 1
    while y &gt; 0:
        if y % 2 == 1:
            result = (result * x) % m
        x = (x * x) % m
        y = y // 2
    return result
</code></pre>",2
390,27513597,Key error while using django crispy forms for login,"<p>I was trying to create a login form in django using crispy forms. During login authentication I have two fields: <strong>email_id</strong> and <strong>password</strong>. but in browser it only showing password field, and have following error:</p>

<p>Django version is 1.7</p>

<pre><code>WARNING:root:Could not resolve form field 'email_id'.
Traceback (most recent call last):
  File ""/usr/local/lib/python2.7/dist-packages/crispy_forms/utils.py"", line 74, in render_field
    field_instance = form.fields[field]
KeyError: u'email_id'
</code></pre>

<p>The snapshot of the webpage being rendered is :</p>

<p><img src=""https://i.stack.imgur.com/HyfPY.png"" alt=""Snapshot of page being rendered""></p>

<p>The model of the User for which I am trying to login is : <strong>model.py</strong></p>

<pre><code>class User(models.Model):
    user_id = models.AutoField(primary_key=True)
    title_id = models.ForeignKey('Title')
    first_name = models.CharField(max_length=100)
    middle_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    username = models.CharField(max_length=100, unique=True, default='')
    password = models.CharField(max_length=100)  # will be changed according to hash used
    mobile_number = models.CharField(max_length=10)
    alternate_number = models.CharField(max_length=10)
    email_id = models.EmailField()
    date_of_birth = models.DateField()
    profession_id = models.ForeignKey('Profession')
    house_no = models.CharField(max_length=100)
    city_id = models.ForeignKey('City')
    country_id = models.ForeignKey('Country')
    state_id = models.ForeignKey('State')
    locality_id = models.ForeignKey('Locality')
</code></pre>

<p>The class for login in the file <strong>view.py</strong> is:</p>

<pre><code>class LoginView(generic.FormView):
    form_class = LoginForm
    success_url = reverse_lazy('profile')
    template_name = 'login.html'
    #model = User

    def form_valid(self, form):
        email_id = form.cleaned_data['email_id']
        password = form.cleaned_data['password']
        user = authenticate(email_id=email_id, password=password)
        if user is not None and user.is_active:
            login(self.request, user)
            return super(LoginView, self).form_valid(form)
        else:
            return self.form_invalid(form)
</code></pre>

<p>The class for login form in <strong>forms.py</strong> is:</p>

<pre><code>class LoginForm(AuthenticationForm):
    def __init__(self, *args, **kwargs):
        super(LoginForm, self).__init__(*args, **kwargs)
        self.helper = FormHelper()
        self.helper.layout = Layout(
            'email_id',
            'password',
            ButtonHolder(
                Submit('login', 'Login', css_class= 'btn-primary')
            )
        )
</code></pre>",python|django|django-crispy-forms|django-1.7,"<p>From what I can see (I am taking an educated guess, as you have not included your imports anywhere), you're using <code>django.contrib.auth.forms.AuthenticationForm</code> as the parent class for your <code>LoginForm</code> class, which is being used in <code>LoginView</code>.</p>

<p>The only two fields on the <code>AuthenticationForm</code> class are <code>username</code> and <code>password</code>, but you are trying to access an <code>email_id</code> field in your <code>Layout</code> object in <code>LoginForm.__init__</code>. This will not work, because there is no field named <code>email_id</code> to access.</p>

<p>The <code>password</code> field happens to show up on your page because there is a <code>password</code> field on <code>AuthenticationForm</code>, but if you're wanting to add <code>email_id</code> then you will need to either:</p>

<ul>
<li>add <code>email_id</code> as a form Field on your <code>LoginForm</code> class, or</li>
<li>create a <code>ModelForm</code> using your <code>User</code> model, or</li>
<li>read <a href=""https://docs.djangoproject.com/en/1.7/topics/auth/customizing/#specifying-a-custom-user-model"" rel=""nofollow"">this guide</a> on how to specify a custom user model, and the steps necessary to integrate with django's auth app (I think this is what you want)</li>
</ul>

<p>I am not sure whether you are trying to create a custom user model or not, but since you seem to be using the <code>django.contrib.auth.authenticate</code> function in your view (again, an educated guess, as there are no imports) then it seems that you're not following the correct pattern.</p>",3
391,27866640,Convert function arguments to lists,"<p>I have a function with a definite set of arguments, but that during development the amount of arguments it recieves could change.
Each argument can either be a string, or a list. I want to someway loop trough the arguments of the function, and if they are a string, convert them to a list with that single element.</p>

<p>I tried using <code>locals()</code> to be able to loop trough the arguments, but I don't know how to modify the value during the iteration, so I guess that's not the correct approach:</p>

<pre><code>def function(a, b, c, d):
    for key in locals():
        if type(key) == str:
            # ??? key = list(locals[key])

    # ... more code over here, assuming that a,b,c,d are lists
</code></pre>

<p>What's the correct way to acomplish this?</p>

<p>Thanks!</p>",python,"<pre><code>def function(*args):

    arg_list = list(args)
    for i in range(len(arg_list)):
        if type(arg_list[i]) == str:
            #Do the stuff
        elif type(arg_list[i]) == list:
            #Do the stuff
        else:
            #Do the stuff

function ('a','b', ['c', 'd', 'e'])
</code></pre>",0
392,27866640,Convert function arguments to lists,"<p>I have a function with a definite set of arguments, but that during development the amount of arguments it recieves could change.
Each argument can either be a string, or a list. I want to someway loop trough the arguments of the function, and if they are a string, convert them to a list with that single element.</p>

<p>I tried using <code>locals()</code> to be able to loop trough the arguments, but I don't know how to modify the value during the iteration, so I guess that's not the correct approach:</p>

<pre><code>def function(a, b, c, d):
    for key in locals():
        if type(key) == str:
            # ??? key = list(locals[key])

    # ... more code over here, assuming that a,b,c,d are lists
</code></pre>

<p>What's the correct way to acomplish this?</p>

<p>Thanks!</p>",python,"<p>Use <a href=""https://stackoverflow.com/questions/3394835/args-and-kwargs""><code>*args</code> or <code>**kwargs</code></a>:</p>

<pre><code>def use_args(*args):
    # covert strings to `list` containing them
    new_args = map(lambda x: [x] if isinstance(x, str) else x, args)
    return new_args
print use_args([1, 2], ""3"")
</code></pre>

<p>Output:</p>

<pre><code>[[1, 2], ['3']]
</code></pre>",1
393,27866640,Convert function arguments to lists,"<p>I have a function with a definite set of arguments, but that during development the amount of arguments it recieves could change.
Each argument can either be a string, or a list. I want to someway loop trough the arguments of the function, and if they are a string, convert them to a list with that single element.</p>

<p>I tried using <code>locals()</code> to be able to loop trough the arguments, but I don't know how to modify the value during the iteration, so I guess that's not the correct approach:</p>

<pre><code>def function(a, b, c, d):
    for key in locals():
        if type(key) == str:
            # ??? key = list(locals[key])

    # ... more code over here, assuming that a,b,c,d are lists
</code></pre>

<p>What's the correct way to acomplish this?</p>

<p>Thanks!</p>",python,"<p>You can use <code>isinstance(key, str)</code> to check if a variable is a str or not</p>

<pre><code>def function(a, b, c, d):
    l= locals()
    for i in l:
        key = l[i]
        if isinstance(key, str):
            l[i] = [l[i]]
    l = l.values()
    print (l)
function('one', 'two', ['bla','bla'], ['ble'])
</code></pre>

<p>If you want list, then you need to have a line</p>

<pre><code> l = l.values()
</code></pre>

<p>This will be</p>

<pre><code>[['a'], ['c'], ['b'], ['d']]
</code></pre>

<p><strong>EDIT</strong>: As you have suggested, the correct program is</p>

<pre><code>def function(a, b, c, d):
    l= locals()
    dirty= False
    for i in l:
        key = l[i]
        if isinstance(key, str):
            l[i] = [l[i]]
            dirty= True
    if dirty:
        function(**l)
    else:
        print a, b, c, d
    print (l)

function('one', 'two', ['bla','bla'], ['ble'])
</code></pre>

<p>This will output</p>

<pre><code>['one'], ['bla', 'bla'], ['two'], ['ble']
</code></pre>",1
394,30982712,"How to put an image on another image in python, using ImageTk?","<p>I want to put an image in front of another one, then use this combined image as a button's background image in Tkinter.</p>

<p>How can I do it?</p>

<ul>
<li><p>I am free to <code>import Tkimage, Image</code>.</p></li>
<li><p>Clarify: I want to stick this <img src=""https://i.stack.imgur.com/1luux.png"" alt=""enter image description here""> on the center of this <img src=""https://i.stack.imgur.com/ZZvto.png"" alt=""enter image description here""> so that something like <img src=""https://i.stack.imgur.com/thwyk.png"" alt=""enter image description here""> will be achieved!
(I want to write Candy Crush! as a homework!)</p></li>
</ul>",python|user-interface|tkinter,"<p>Just use photoshop or <a href=""http://www.gimp.org/"" rel=""nofollow"">G.I.M.P.</a>. I assure you, doing it that way will be much simpler and less redundant than essentially getting Tkinter to photo edit for you (not to mention what you're talking about is just bad practice when it comes to coding)</p>

<p>Anyways, I guess if you really want, it would be possible. Create a tkinter button with an image function (image=""path\to\image.png"") then assign it to a .grid(). For the second image, assign it to the <strong>same</strong> .grid() coordinants while making sure the overlay image is transparent. Here's an extremely general example since I've been given very little information to go off of.</p>

<pre><code>Button0 = tk.Button(self, compound=""top"", image=.\path\to\BackgroundImage.png, fg=""black"", command=lambda: ""call your function here""

Button0.grid(row=1, column=1, padx=10, pady=10)

Button1 = tk.Button(self, compound=""top"", image=.\path\to\TransparentCandyImage.png, fg=""black"", command=lambda: ""call your function here""

Button1.grid(row=1, column=1, padx=10, pady=10)
</code></pre>

<p>EDIT: You can also look for Python/scripts that integrate into GIMP (called ""Script-Fu's"") for performing batch photo editing. There are tons of out there that do all sorts of cool things but I don't know one off hand that will do exactly what you need. Here are some quick search results that look promising though:<br><br>
*<a href=""http://www.gimp.org/tutorials/Basic_Batch/"" rel=""nofollow"">http://www.gimp.org/tutorials/Basic_Batch/</a><br>
*<a href=""http://registry.gimp.org/taxonomy/term/176"" rel=""nofollow"">http://registry.gimp.org/taxonomy/term/176</a><br>
*<a href=""http://www.sandyscott.net/2013/08/04/batch-editing-with-gimp-script-fu/"" rel=""nofollow"">http://www.sandyscott.net/2013/08/04/batch-editing-with-gimp-script-fu/</a></p>

<ul>
<li>Code is based off of my own Tkinter GUI: See here for source reference/code template: <a href=""https://github.com/BiTinerary/AutOptimizer"" rel=""nofollow"">https://github.com/BiTinerary/AutOptimizer</a></li>
</ul>",0
395,30971859,Python - Opening and changing large text files,"<p>I have a ~600MB Roblox type .mesh file, which reads like a text file in any text editor. I have the following code below:</p>

<pre><code>mesh = open(""file.mesh"", ""r"").read()
mesh = mesh.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
mesh = ""{""+mesh+""}""
f = open(""p2t.txt"", ""w"")
f.write(mesh)
</code></pre>

<p>It returns:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\TheDirectoryToMyFile\p2t2.py"", line 2, in &lt;module&gt;
    mesh = mesh.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
MemoryError
</code></pre>

<p>Here is a sample of my file:</p>

<pre><code>[-0.00599, 0.001466, 0.006][0.16903, 0.84515, 0.50709][0.00000, 0.00000, 0][-0.00598, 0.001472, 0.00599][0.09943, 0.79220, 0.60211][0.00000, 0.00000, 0]
</code></pre>

<p>What can I do?</p>

<p>Edit:</p>

<p>I'm not sure what the head, follow, and tail commands are in that other thread that marked this as a duplicate. I tried to use it, but couldn't get it to work. The file is also one giant line, it isn't split into lines.</p>",python|replace|out-of-memory|large-files,"<pre><code>import os
f = open('p2f.txt','w')
with open(""file.mesh"") as mesh:
  while True:
    c = mesh.read(1)
    if not c:
      f.seek(-1,os.SEEK_END)
      f.truncate()
      break
    elif c == '[':
        f.write('{')
    elif c == ']':
        f.write('},')
   else:
       f.write(c)
</code></pre>

<p><code>p2f.txt</code>:</p>

<pre><code>{-0.00599, 0.001466, 0.006},{0.16903, 0.84515, 0.50709},{0.00000, 0.00000, 0},{-0.00598, 0.001472, 0.00599},{0.09943, 0.79220, 0.60211},{0.00000, 0.00000, 0}
</code></pre>",0
396,30971859,Python - Opening and changing large text files,"<p>I have a ~600MB Roblox type .mesh file, which reads like a text file in any text editor. I have the following code below:</p>

<pre><code>mesh = open(""file.mesh"", ""r"").read()
mesh = mesh.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
mesh = ""{""+mesh+""}""
f = open(""p2t.txt"", ""w"")
f.write(mesh)
</code></pre>

<p>It returns:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\TheDirectoryToMyFile\p2t2.py"", line 2, in &lt;module&gt;
    mesh = mesh.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
MemoryError
</code></pre>

<p>Here is a sample of my file:</p>

<pre><code>[-0.00599, 0.001466, 0.006][0.16903, 0.84515, 0.50709][0.00000, 0.00000, 0][-0.00598, 0.001472, 0.00599][0.09943, 0.79220, 0.60211][0.00000, 0.00000, 0]
</code></pre>

<p>What can I do?</p>

<p>Edit:</p>

<p>I'm not sure what the head, follow, and tail commands are in that other thread that marked this as a duplicate. I tried to use it, but couldn't get it to work. The file is also one giant line, it isn't split into lines.</p>",python|replace|out-of-memory|large-files,"<p>You could do it line by line:</p>

<pre><code>mesh = open(""file.mesh"", ""r"")
with open(""p2t.txt"", ""w"") as f:
   for line in mesh:
      line= line.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
      line = ""{""+line +""}""
      f.write(line)
</code></pre>",2
397,30971859,Python - Opening and changing large text files,"<p>I have a ~600MB Roblox type .mesh file, which reads like a text file in any text editor. I have the following code below:</p>

<pre><code>mesh = open(""file.mesh"", ""r"").read()
mesh = mesh.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
mesh = ""{""+mesh+""}""
f = open(""p2t.txt"", ""w"")
f.write(mesh)
</code></pre>

<p>It returns:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\TheDirectoryToMyFile\p2t2.py"", line 2, in &lt;module&gt;
    mesh = mesh.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
MemoryError
</code></pre>

<p>Here is a sample of my file:</p>

<pre><code>[-0.00599, 0.001466, 0.006][0.16903, 0.84515, 0.50709][0.00000, 0.00000, 0][-0.00598, 0.001472, 0.00599][0.09943, 0.79220, 0.60211][0.00000, 0.00000, 0]
</code></pre>

<p>What can I do?</p>

<p>Edit:</p>

<p>I'm not sure what the head, follow, and tail commands are in that other thread that marked this as a duplicate. I tried to use it, but couldn't get it to work. The file is also one giant line, it isn't split into lines.</p>",python|replace|out-of-memory|large-files,"<p>You need to read one bite per iteration, analyze it and then write to another file or to <code>sys.stdout</code>. Try this code:</p>

<pre><code>mesh = open(""file.mesh"", ""r"")
mesh_out = open(""file-1.mesh"", ""w"")

c = mesh.read(1)

if c:
    mesh_out.write(""{"")
else:
    exit(0)
while True:
    c = mesh.read(1)
    if c == """":
        break

    if c == ""["":
        mesh_out.write("",{"")
    elif c == ""]"":
        mesh_out.write(""}"")
    else:
        mesh_out.write©
</code></pre>

<p>UPD:</p>

<p>It works really slow (thanks to jamylak). So I've changed it: </p>

<pre><code>import sys
import re


def process_char(c, stream, is_first=False):
    if c == '':
        return False
    if c == '[':
        stream.write('{' if is_first else ',{')
        return True
    if c == ']':
        stream.write('}')
        return True


def process_file(fname):
    with open(fname, ""r"") as mesh:
        c = mesh.read(1)
        if c == '':
            return
        sys.stdout.write('{')

        while True:
            c = mesh.read(8192)
            if c == '':
                return

            c = re.sub(r'\[', ',{', c)
            c = re.sub(r'\]', '}', c)
            sys.stdout.write(c)


if __name__ == '__main__':
    process_file(sys.argv[1])
</code></pre>

<p>So now it's working ~15 sec on 1.4G file. To run it:</p>

<pre><code>$ python mesh.py file.mesh &gt; file-1.mesh
</code></pre>",4
398,30971859,Python - Opening and changing large text files,"<p>I have a ~600MB Roblox type .mesh file, which reads like a text file in any text editor. I have the following code below:</p>

<pre><code>mesh = open(""file.mesh"", ""r"").read()
mesh = mesh.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
mesh = ""{""+mesh+""}""
f = open(""p2t.txt"", ""w"")
f.write(mesh)
</code></pre>

<p>It returns:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\TheDirectoryToMyFile\p2t2.py"", line 2, in &lt;module&gt;
    mesh = mesh.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
MemoryError
</code></pre>

<p>Here is a sample of my file:</p>

<pre><code>[-0.00599, 0.001466, 0.006][0.16903, 0.84515, 0.50709][0.00000, 0.00000, 0][-0.00598, 0.001472, 0.00599][0.09943, 0.79220, 0.60211][0.00000, 0.00000, 0]
</code></pre>

<p>What can I do?</p>

<p>Edit:</p>

<p>I'm not sure what the head, follow, and tail commands are in that other thread that marked this as a duplicate. I tried to use it, but couldn't get it to work. The file is also one giant line, it isn't split into lines.</p>",python|replace|out-of-memory|large-files,"<pre><code>BLOCK_SIZE = 1 &lt;&lt; 15
with open(input_file, 'rb') as fin, open(output_file, 'wb') as fout:
    for block in iter(lambda: fin.read(BLOCK_SIZE), b''):
        # do your replace
        fout.write(block)
</code></pre>",1
399,30971859,Python - Opening and changing large text files,"<p>I have a ~600MB Roblox type .mesh file, which reads like a text file in any text editor. I have the following code below:</p>

<pre><code>mesh = open(""file.mesh"", ""r"").read()
mesh = mesh.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
mesh = ""{""+mesh+""}""
f = open(""p2t.txt"", ""w"")
f.write(mesh)
</code></pre>

<p>It returns:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\TheDirectoryToMyFile\p2t2.py"", line 2, in &lt;module&gt;
    mesh = mesh.replace(""["", ""{"").replace(""]"", ""}"").replace(""}{"", ""},{"")
MemoryError
</code></pre>

<p>Here is a sample of my file:</p>

<pre><code>[-0.00599, 0.001466, 0.006][0.16903, 0.84515, 0.50709][0.00000, 0.00000, 0][-0.00598, 0.001472, 0.00599][0.09943, 0.79220, 0.60211][0.00000, 0.00000, 0]
</code></pre>

<p>What can I do?</p>

<p>Edit:</p>

<p>I'm not sure what the head, follow, and tail commands are in that other thread that marked this as a duplicate. I tried to use it, but couldn't get it to work. The file is also one giant line, it isn't split into lines.</p>",python|replace|out-of-memory|large-files,"<pre><code>def read(afilename):
    with open(""afilename"", ""r"") as file
       lines = file.readlines()
       lines.replace(""["", ""{"")
       #place reset of code here in 
</code></pre>",-2
400,31256469,Python Selenium select xpath with variable,"<p>I am trying to locate a visible element that will change based on what the user enters on the website. I am successful if use the follow with a static xpath search string:</p>

<pre><code>wait.until(EC.visibility_of_element_located((By.XPATH, ""//a[text()='Default-Test']"")))
</code></pre>

<p>Default-Test will change arbitrarily and i have how to get this value but I have not been successful using a variable in the xpath search:</p>

<p>Test method 1 Does not work</p>

<pre><code>dtg_found = ""Default-Test"" 
</code></pre>

<p>Test method 2 does not work, this is the actual method for locating the value</p>

<pre><code>dtg_found = driver.find_element_by_name(""result[0].col[1].stringVal"").get_attribute(""value"")

dtg_opt_1 = wait.until(EC.visibility_of_element_located((By.XPATH, ""\""//a[text()='"" + dtg_found + ""']"" + '""'))) 
</code></pre>",python|selenium|xpath,"<p>This is the solution to the issue I was encountering.  Tried reworking the string and the related escapes '\' but was not successful. Did however get the following working. I am not clear why this worked.</p>

<pre><code>dtg_opt_1 = driver.find_element_by_xpath(""//*[contains(text(),"" + "" '"" + dtg_found + ""'"" + "")]"")
</code></pre>",2
401,30884003,Python AND OR statements,"<p>I am parsing text with Python and I have this final code to write sentences, but it does not work well: </p>

<pre><code>        opt = child.get('desc')
        extent = child.get('extent')
        if opt == 'es':
            opt = ""ESP:""
        elif opt == ""la"":
            opt = ""LAT:""
        elif opt == ""en"":
            opt = ""ENG:""
if opt in [""es"",""la"",""en"",""ar"",""fr""] and extent == ""begin"":
    print time, opt+("" "" + opt).join([c.encode('latin-1') for c in child.tail.split(' ')])
</code></pre>

<p>It works only with the OR statements, but when I add the <code>AND</code> statement (which I really need), nothing changes. Anyone please?</p>",python|if-statement|conditional,"<p>This is an operator precedence problem. You expect the code to work as:</p>

<pre><code>if (opt in [""es"",""la"",""en"",""ar"",""fr""]) and (extent == ""begin""):
    print time, opt+("" "" + opt).join([c.encode('latin-1') for c in child.tail.split(' ')])
</code></pre>

<p>But it works as</p>

<pre><code>if opt in ([""es"",""la"",""en"",""ar"",""fr""] and extent == ""begin""):
    print time, opt+("" "" + opt).join([c.encode('latin-1') for c in child.tail.split(' ')])
</code></pre>

<p>which evaluates to different values than you expect.</p>

<p>Try the parentheses in the first code piece.</p>",0
402,30884003,Python AND OR statements,"<p>I am parsing text with Python and I have this final code to write sentences, but it does not work well: </p>

<pre><code>        opt = child.get('desc')
        extent = child.get('extent')
        if opt == 'es':
            opt = ""ESP:""
        elif opt == ""la"":
            opt = ""LAT:""
        elif opt == ""en"":
            opt = ""ENG:""
if opt in [""es"",""la"",""en"",""ar"",""fr""] and extent == ""begin"":
    print time, opt+("" "" + opt).join([c.encode('latin-1') for c in child.tail.split(' ')])
</code></pre>

<p>It works only with the OR statements, but when I add the <code>AND</code> statement (which I really need), nothing changes. Anyone please?</p>",python|if-statement|conditional,"<p><strong>AND</strong></p>

<p>To become condition True by <strong>AND Operator</strong>, required <strong>True</strong> result from the <strong>all conditions</strong>.</p>

<p><strong>OR</strong></p>

<p>To become condition True by <strong>OR Operator</strong>, required <strong>True</strong> result from the any <strong>one condition</strong>.</p>

<p><strong>E.g.</strong></p>

<pre><code>In [1]: True and True
Out[1]: True

In [2]: True and False
Out[2]: False

In [3]: True or False
Out[3]: True
</code></pre>

<hr>

<p>In your code, print following statements:</p>

<pre><code>print ""Debug 1: opt value"", opt
print ""Debug 2: extent value"", extent
</code></pre>

<p><strong>Why use same variable name again??</strong></p>

<p>If value of <code>opt</code> is <code>es</code> then if condition <code>if opt == 'es':</code> is <code>True</code> and <code>opt</code> variable is again assign to vale <code>ESP:</code>. 
And in your final if statement you check <code>opt in [""es"",""la"",""en"",""ar"",""fr""]</code> , so which is always <code>False</code>.  </p>

<pre><code>    opt = child.get('desc')
#   ^^
    extent = child.get('extent')
    if opt == 'es':
        opt = ""ESP:""
    #   ^^
    elif opt == ""la"":
        opt = ""LAT:""
    elif opt == ""en"":
</code></pre>",1
403,30884003,Python AND OR statements,"<p>I am parsing text with Python and I have this final code to write sentences, but it does not work well: </p>

<pre><code>        opt = child.get('desc')
        extent = child.get('extent')
        if opt == 'es':
            opt = ""ESP:""
        elif opt == ""la"":
            opt = ""LAT:""
        elif opt == ""en"":
            opt = ""ENG:""
if opt in [""es"",""la"",""en"",""ar"",""fr""] and extent == ""begin"":
    print time, opt+("" "" + opt).join([c.encode('latin-1') for c in child.tail.split(' ')])
</code></pre>

<p>It works only with the OR statements, but when I add the <code>AND</code> statement (which I really need), nothing changes. Anyone please?</p>",python|if-statement|conditional,"<p>When <code>opt</code> is one of these: <code>""es"", ""la"", ""en""</code><br/>
then the value of <code>opt</code> is changed, and this:<br/>
<code>if opt in [""es"",""la"",""en"",""ar"",""fr""] and extent == ""begin"":</code><br/>
won't pass, because <code>opt</code> is wrong.<br/></p>

<p>I guess <code>extent</code> is equal <code>""begin""</code>, so if u swap <code>and</code> with <code>or</code> it will pass, as one of the statements is correct. Try to remove this big <code>if/elif/elif</code> and try to run it again with <code>and</code>. It should pass.</p>",1
404,30884003,Python AND OR statements,"<p>I am parsing text with Python and I have this final code to write sentences, but it does not work well: </p>

<pre><code>        opt = child.get('desc')
        extent = child.get('extent')
        if opt == 'es':
            opt = ""ESP:""
        elif opt == ""la"":
            opt = ""LAT:""
        elif opt == ""en"":
            opt = ""ENG:""
if opt in [""es"",""la"",""en"",""ar"",""fr""] and extent == ""begin"":
    print time, opt+("" "" + opt).join([c.encode('latin-1') for c in child.tail.split(' ')])
</code></pre>

<p>It works only with the OR statements, but when I add the <code>AND</code> statement (which I really need), nothing changes. Anyone please?</p>",python|if-statement|conditional,"<p>Your selection list in the first condition of your <code>if</code> statement is the problem.</p>

<p>If <code>opt</code> happens to be <code>es</code>, for example, then</p>

<pre><code>if opt == 'es':
    opt = ""ESP:""
</code></pre>

<p>will change that to  <code>ESP:</code>.</p>

<pre><code>if opt in [""es"",""la"",""en"",""ar"",""fr""] and extent == ""begin"":
</code></pre>

<p>can then never be <code>True</code> (when you're using <code>and</code> instead of <code>or</code>).</p>

<p>If you change that line to something like</p>

<pre><code>if opt in [""ESP:"",""LAT:"",""ENG:"",""ar"",""fr""] and extent == ""begin"":
</code></pre>

<p>it might work (if the code you've shown is all that's relevant to the problem).</p>",2
405,30884003,Python AND OR statements,"<p>I am parsing text with Python and I have this final code to write sentences, but it does not work well: </p>

<pre><code>        opt = child.get('desc')
        extent = child.get('extent')
        if opt == 'es':
            opt = ""ESP:""
        elif opt == ""la"":
            opt = ""LAT:""
        elif opt == ""en"":
            opt = ""ENG:""
if opt in [""es"",""la"",""en"",""ar"",""fr""] and extent == ""begin"":
    print time, opt+("" "" + opt).join([c.encode('latin-1') for c in child.tail.split(' ')])
</code></pre>

<p>It works only with the OR statements, but when I add the <code>AND</code> statement (which I really need), nothing changes. Anyone please?</p>",python|if-statement|conditional,"<p>Unless the output from the first line of code is <code>""ar""</code> or <code>""fr""</code> (or something else not in the <code>if-elif</code> conditions), you are over-writing the <code>opt</code> variable. Consider re-naming the 'new' <code>opt</code> to something else, like follows:</p>

<pre><code>opt = child.get('desc')

extent = child.get('extent')

if opt == 'es':
    opt2 = ""ESP:""
elif opt == ""la"":
    opt2 = ""LAT:""
elif opt == ""en"":
    opt2 = ""ENG:""

# Check variable values
print ""opt: "", opt
print ""opt2: "", opt2

if opt in [""es"",""la"",""en"",""ar"",""fr""] and extent == ""begin"":
    print time, opt2+("" "" + opt2).join([c.encode('latin-1') for c in child.tail.split(' ')])
</code></pre>

<p>I am not sure what exactly you wish to achieve from the code, but the above will at least get your <code>if-else</code> condition met if the original <code>child.get('desc')</code> condition returns a string that exists in the list.</p>",3
406,36455500,Compare some text with difflib and openpyxl Python,"<p>I want to find some words in some cells of a certain column. Those words (use to compare) are stocked in another sheet. I'm trying to use a loop to choose all the cells from this column. </p>

<p>I got this code : </p>

<pre><code>    import difflib 
    import openpyxl 
    from openpyxl import load_workbook

    table = ""C:\Users\Myname\Documents\Python Scripts\TRY.xlsx"" 
    table = load_workbook(table)
    table.get_sheet_names()
    #  [u'Compared', u'To']

    work_sheet = table['Compared'] 
    compare_sheet = table['To']

    row_max = sum(1 for row in work_sheet)
    # count the number of rows 
    print ( row_max) # 8 

    liste = range(1,row_max+1)
    print liste


    for i in liste: 
        a = 'A'
        b = 'B'
        index = a + `i`
        comp = b + `i`
        column1 = ''.join([""'"", index,""'""]) # Ref to the Cell which will be compared
        column2 = ''.join([""'"",comp,""'""]) # Ref to the word I want to find 
        print (column1)
        print (column2)
        diff = difflib.SequenceMatcher(None,work_sheet[{}].format(column1),compare_sheet[{}].value.format(column2)).ratio()
        print diff


    #     ERROR
    #      File ""C:\Users\Myname\AppData\Local\Continuum\Anaconda2\lib\site-packages\openpyxl-2.3.4-py2.7.egg\
#    openpyxl\utils\__init__.py"", line 39, in coordinate_from_string

 #        match = COORD_RE.match(coord_string.upper())
</code></pre>

<p>I've looked at this line 39 in the file ""__ init__.py"" and I have : </p>

<pre><code>def coordinate_from_string(coord_string):
    """"""Convert a coordinate string like 'B12' to a tuple ('B', 12)""""""
    match = COORD_RE.match(coord_string.upper())
    if not match:
        msg = 'Invalid cell coordinates (%s)' % coord_string
        raise CellCoordinatesException(msg)
    column, row = match.groups()
    row = int(row)
    if not row:
        msg = ""There is no row 0 (%s)"" % coord_string
        raise CellCoordinatesException(msg)
    return (column, row)
</code></pre>

<p>but if I do it manually, it works : </p>

<pre><code>diff = difflib.SequenceMatcher(None, work_sheet['A2'].value, compare_sheet['B2'].value).ratio()
print diff
# 0.133333333333
</code></pre>

<p>You can see the table here :  <a href=""https://docs.google.com/spreadsheets/d/1Mckc6YXeWQQ0CrnLKFqH5jeUMUn9CjvW_pTYs1rvw1A/edit?usp=sharing"" rel=""nofollow"">https://docs.google.com/spreadsheets/d/1Mckc6YXeWQQ0CrnLKFqH5jeUMUn9CjvW_pTYs1rvw1A/edit?usp=sharing</a></p>

<p>Can someone explains me where does this error come from ? </p>

<p>(The whole traceback : </p>

<pre><code>    Traceback (most recent call last):

  File ""&lt;ipython-input-14-ed4b6265ee5a&gt;"", line 43, in &lt;module&gt;
    diff = difflib.SequenceMatcher(None,work_sheet[{}].format(column1),compare_sheet[{}].value.format(column2)).ratio()

  File ""C:\Users\Myname\AppData\Local\Continuum\Anaconda2\lib\site-packages\openpyxl-2.3.4-py2.7.egg\openpyxl\worksheet\worksheet.py"", line 338, in __getitem__
    row, column = coordinate_to_tuple(key)

  File ""C:\Users\Myname\AppData\Local\Continuum\Anaconda2\lib\site-packages\openpyxl-2.3.4-py2.7.egg\openpyxl\utils\__init__.py"", line 162, in coordinate_to_tuple
    col, row = coordinate_from_string(coordinate)

  File ""C:\Users\Myname\AppData\Local\Continuum\Anaconda2\lib\site-packages\openpyxl-2.3.4-py2.7.egg\openpyxl\utils\__init__.py"", line 39, in coordinate_from_string
    match = COORD_RE.match(coord_string.upper())
</code></pre>

<p>)</p>",python|excel|openpyxl,"<p>As was pointed out, you don't show the code that causes the traceback, and you don't show the traceback -- you should copy and paste.  Your code has lots of problems.  I edit it below</p>

<pre><code>import difflib
# line below never used 
# import openpyxl 
from openpyxl import load_workbook

table = ""C:\Users\Myname\Documents\Python Scripts\TRY.xlsx"" 
table = load_workbook(table)
table.get_sheet_names()
#  [u'Compared', u'To']

work_sheet = table['Compared'] 
compare_sheet = table['To']

# is there not an easier way to find out how many rows?
row_max = sum(1 for row in work_sheet)
# count the number of rows 
print ( row_max) # 8 

# remove these lines
# liste = range(1,row_max+1)
# print liste


# for i in liste:
for i in range(1, row_max+1): 
    # a = 'A'
    # b = 'B'
    # what do you think index and comp are after these two lines?
    # index = a + `i`
    # comp = b + `i`
    index = 'A' + str(i)
    comp = 'B' + str(i)
    column1 = ''.join([""'"", index,""'""]) # Ref to the Cell which will be compared
    column2 = ''.join([""'"",comp,""'""]) # Ref to the word I want to find 
    print (column1)
    print (column2)
    diff = difflib.SequenceMatcher(None,work_sheet[{}].format(column1),compare_sheet[{}].value.format(column2)).ratio()
    print diff


#     ERROR
#  match = COORD_RE.match(coord_string.upper())
#
#AttributeError: 'dict' object has no attribute 'upper'
</code></pre>",0
407,36688526,Downgrade OpenSSL for Python on Windows,"<p>I am trying to connect to a broken server using Python that only works with OpenSSL 1.0.1. If I connect using OpenSSL 1.0.2 it fails with an EOF error. There's no way around it, trust me.</p>

<p>The latest Python 2.7 (also a requirement) install for Windows - 2.7.11 - ships with OpenSSL 1.0.2:</p>

<pre><code>&gt;python
Python 2.7.11 (v2.7.11:6d1b6a68f775, Dec  5 2015, 20:32:19) [MSC v.1500 32 bit (Intel)] on win32
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import ssl
&gt;&gt;&gt; ssl.OPENSSL_VERSION
'OpenSSL 1.0.2d 9 Jul 2015'
</code></pre>

<p>Ideally I'd like to just switch out the DLLs, but I can't find any OpenSSL DLLs in the Python directory. Is Python statically linked to OpenSSL? Is there any <em>simple</em> way I can downgrade it, other than just using an older version of Python? If not, how do I know which version of Python switched to 1.0.2?</p>

<p>(Please no comments about how this is bad security, or how the server should be fixed, etc.)</p>",python|windows|python-2.7|openssl,"<p>According to <a href=""https://hg.python.org/cpython/raw-file/tip/Misc/NEWS"" rel=""nofollow"">the Python changelog</a> it looks like Python 2.7.9 uses OpenSSL 1.0.1j and 2.7.10 uses 1.0.2a, so that is an option. Still it would be better if I could use the latest OpenSSL 1.0.1 with the latest Python 2.7 so any other answers are still appreciated!</p>",0
408,36494297,Ignoring the slash in a variable that I want to join to file path,"<p>I have a list of currency pairs that I want to create separate folders for and drop a csv into it:
def symbols():</p>

<pre><code>symbols = ['AUD/CAD' 'AUD/JPY' 'AUD/NZD' 'AUD/USD' 'CAD/JPY' 'EUR/AUD' 'EUR/CAD'
           'EUR/CHF' 'EUR/GBP' 'EUR/JPY' 'EUR/NOK' 'EUR/SEK' 'EUR/USD' 'GBP/AUD'
           'GBP/CAD' 'GBP/CHF' 'GBP/JPY' 'GBP/USD' 'NZD/JPY' 'NZD/USD' 'USD/CAD'
           'USD/CHF' 'USD/DKK' 'USD/HKD' 'USD/ILS' 'USD/JPY' 'USD/MXN' 'USD/NOK'
           'USD/SEK' 'USD/SGD' 'USD/ZAR']
</code></pre>

<p>When I run the code below, instead of creating a path similar to ""C:\Symbols\AUD/USD"", it creates a file path that seperates the pair into two folders like this ""C:\Symbols\AUD\USD""</p>

<p>I realize the slash is messing this up, I'm just not sure how to ignore it without replacing the ""/"" with another character.  </p>

<pre><code>def symbols():

    global df
    symbols = np.unique(df[['Symbol']].values)

    for symbol in symbols:
        xs = df[df.Symbol == symbol]
        if not os.path.exists(symbol):
            os.makedirs(symbol)
        with open(symbol + '\\data.csv ', ""a"") as f:
            if os.path.getsize(symbol + '\\data.csv ') &gt; 0:
                xs.to_csv(f, sep="","", index=False, header=False)
            else:
                xs.to_csv(f, sep="","", index=False)
</code></pre>",python|pandas,"<p>As far as I understand your code without seeing  <code>symbols</code>, the line</p>

<pre><code>os.makedirs(symbol)
</code></pre>

<p>will make a directory for  <code>AUD</code> <em>and</em> <code>USD</code> <em>each</em>. If you want this to be <em>one</em> directy, call <code>os.makedirs</code> for a pair, not for a single symbol.</p>",0
409,36494297,Ignoring the slash in a variable that I want to join to file path,"<p>I have a list of currency pairs that I want to create separate folders for and drop a csv into it:
def symbols():</p>

<pre><code>symbols = ['AUD/CAD' 'AUD/JPY' 'AUD/NZD' 'AUD/USD' 'CAD/JPY' 'EUR/AUD' 'EUR/CAD'
           'EUR/CHF' 'EUR/GBP' 'EUR/JPY' 'EUR/NOK' 'EUR/SEK' 'EUR/USD' 'GBP/AUD'
           'GBP/CAD' 'GBP/CHF' 'GBP/JPY' 'GBP/USD' 'NZD/JPY' 'NZD/USD' 'USD/CAD'
           'USD/CHF' 'USD/DKK' 'USD/HKD' 'USD/ILS' 'USD/JPY' 'USD/MXN' 'USD/NOK'
           'USD/SEK' 'USD/SGD' 'USD/ZAR']
</code></pre>

<p>When I run the code below, instead of creating a path similar to ""C:\Symbols\AUD/USD"", it creates a file path that seperates the pair into two folders like this ""C:\Symbols\AUD\USD""</p>

<p>I realize the slash is messing this up, I'm just not sure how to ignore it without replacing the ""/"" with another character.  </p>

<pre><code>def symbols():

    global df
    symbols = np.unique(df[['Symbol']].values)

    for symbol in symbols:
        xs = df[df.Symbol == symbol]
        if not os.path.exists(symbol):
            os.makedirs(symbol)
        with open(symbol + '\\data.csv ', ""a"") as f:
            if os.path.getsize(symbol + '\\data.csv ') &gt; 0:
                xs.to_csv(f, sep="","", index=False, header=False)
            else:
                xs.to_csv(f, sep="","", index=False)
</code></pre>",python|pandas,"<p>Forward slashes <code>/</code> are generally not allowed in folder names. Try replacing it with <code>-</code> or <code>.</code></p>

<p>Have a look at <a href=""https://msdn.microsoft.com/en-in/library/windows/desktop/aa365247(v=vs.85).aspx"" rel=""nofollow"">Special characters in files and folder names</a>.</p>",1
410,36623789,How to convert unicode text to normal text,"<p>I am learning Beautiful Soup in Python.</p>

<p>I am trying to parse a simple webpage with list of books.</p>

<p>E.g</p>

<pre><code>&lt;a href=""https://www.nostarch.com/carhacking""&gt;The Car Hacker’s Handbook&lt;/a&gt;
</code></pre>

<p>I use the below code.</p>

<pre><code>import requests, bs4
res = requests.get('http://nostarch.com')
res.raise_for_status()
nSoup = bs4.BeautifulSoup(res.text,""html.parser"")
elems = nSoup.select('.product-body a')

#elems[0] gives
&lt;a href=""https://www.nostarch.com/carhacking""&gt;The Car Hacker\u2019s Handbook&lt;/a&gt;
</code></pre>

<p>And</p>

<pre><code>#elems[0].getText() gives
u'The Car Hacker\u2019s Handbook'
</code></pre>

<p>But I want the proper text which is given by,</p>

<pre><code>s = elems[0].getText()
print s
&gt;&gt;&gt;The Car Hacker’s Handbook
</code></pre>

<p>How to modify my code in order to give ""The Car Hacker’s Handbook"" output instead of ""u'The Car Hacker\u2019s Handbook'""  ?</p>

<p>Kindly help.</p>",python|unicode|web-scraping|beautifulsoup|ascii,"<p>you can try </p>

<pre><code>import unicodedata

def normText(unicodeText):
return unicodedata.normalize('NFKD', unicodeText).encode('ascii','ignore')
</code></pre>

<p>This will convert unicodetext to plain text and you can write to a file.</p>",-2
411,36623789,How to convert unicode text to normal text,"<p>I am learning Beautiful Soup in Python.</p>

<p>I am trying to parse a simple webpage with list of books.</p>

<p>E.g</p>

<pre><code>&lt;a href=""https://www.nostarch.com/carhacking""&gt;The Car Hacker’s Handbook&lt;/a&gt;
</code></pre>

<p>I use the below code.</p>

<pre><code>import requests, bs4
res = requests.get('http://nostarch.com')
res.raise_for_status()
nSoup = bs4.BeautifulSoup(res.text,""html.parser"")
elems = nSoup.select('.product-body a')

#elems[0] gives
&lt;a href=""https://www.nostarch.com/carhacking""&gt;The Car Hacker\u2019s Handbook&lt;/a&gt;
</code></pre>

<p>And</p>

<pre><code>#elems[0].getText() gives
u'The Car Hacker\u2019s Handbook'
</code></pre>

<p>But I want the proper text which is given by,</p>

<pre><code>s = elems[0].getText()
print s
&gt;&gt;&gt;The Car Hacker’s Handbook
</code></pre>

<p>How to modify my code in order to give ""The Car Hacker’s Handbook"" output instead of ""u'The Car Hacker\u2019s Handbook'""  ?</p>

<p>Kindly help.</p>",python|unicode|web-scraping|beautifulsoup|ascii,"<p>Have you tried using the encode method?</p>

<pre><code>elems[0].getText().encode('utf-8')
</code></pre>

<p>More info about unicode and python can be found in <a href=""https://docs.python.org/2/howto/unicode.html"" rel=""nofollow"">https://docs.python.org/2/howto/unicode.html</a></p>

<p>Moreover, to discover if your string is really utf-8 encoded you can use <a href=""https://pypi.python.org/pypi/chardet"" rel=""nofollow"">chardet</a> and run the following command:</p>

<pre><code>&gt;&gt;&gt; import chardet
&gt;&gt;&gt; chardet.detect(elems[0].getText()) 
{'confidence': 0.5, 'encoding': 'utf-8'}
</code></pre>",3
412,36414172,Recreating sentence in python: List index out of range,"<p>I am trying to write recreate a senetence using the words that make up the sentence and the positiosn of words. When I run my code I get the error 'List index out of range'. I can't seem to figure out what is wrong. I would greatly appreciate any help. Thanks :). All of my code is below. </p>

<pre><code>        def compress():     #function that will compress the inputted sentence/sentences

    sentence = input(""Input the sentence that you wish to be compressed"") #Sentence to be compressed
    sentence.lower()#Puts sentence in lower-case
    sentencelist = sentence.split() #Splits the sentence into a list
    d = {} #Dictionary

    plist = [] #List that contains the positions of the words
    wds = []
    for i in sentencelist: #iterating through the inputted sentence
        if i not in wds: #if item not in list of words...
            wds.append(i) #...append to the list of words
    for i ,j in enumerate(sentencelist):#Enumerates the sentence and gets the positions
        if j in (d): #if the item (j) is in the d 
            plist.append(d[j]) #append the item to the list of positions
        else:
            d[j] =i             #else, append item (i) to position list
            plist.append(i)     #appends to the list of positions 
    print (plist) #print the list containing the positions. 


    with open (""tsk3pos.txt"", ""wt"") as txt: #opens the file

        position_string = "" "".join(str(x) for x in plist)   #makes/recreates sentence using positons and words
        txt.write(position_string)

        txt.close()                     #closes the file
        with open (""tsk3wds.txt"", ""wt"") as txt: #opens the file

            for item in wds:            #iterates through list of words 
                txt.write(""%s\n"" % item)    #puts lists in the file
        txt.close() #closes the file


    print (wds) #prints list that contains words that are in the sentence
    main()  #calls main function



def recreate(compress): #function that will be used to recreate the compressed sentence.

    num = []    #creates list for positions (blank)
    wds = []    #creates list for words (blank)

    with open(""words.txt"", ""r"") as txt: #with statement opening the word text file
        for line in txt: #iterating over each line in the text file.
            wds += line.split() #turning the textfile into a list and appending it to num

    with open(""tsk3pos.txt"", ""r"") as txt:   #opens text file with list of positions in read code
        for line in txt:                    #iterates through
            num += [int(i) for i in line.split()]    #turns the textfile into list and appends to blank list


    recreate = ' '.join(wds[pos] for pos in num)    #makes/recreates sentence using positons and words

    with open(""recreate.txt"", ""wt"") as txt: #opens recreate text file in write mode
        txt.write(recreate)                 #writes sentences to 'recreate' text file

    main()                                  #calls the  main function



def main():                                 #defines main function
    print(""Do you want to compress an input or recreate a compressed input?"") #user input 
    user = input(""Type 'a' if you want to compress an input. Type 'b' if you wan to recreate an input"").lower() #gives user choice ad puts input in lower case
    if user not in (""a"",""b""):                   #if input isn't a or b...
        print (""That's not an option. Please try again"")    #give error message
    elif user == ""a"":           #if input is a...
        compress()              #...call the compress function
    elif user == ""b"":           #if input is b...
        recreate(compress)      #...call recreate function with compress as argument
    main()                      #calls main function

main()                          #Calls main function
</code></pre>",python,"<p>I see two errors:</p>

<p>1) In your recreate function you look for a file words.txt when in your compress function you write the words to tsk3wds.txt</p>

<p>2) In lines 17-18 you are saving the index of the word in the uncompressed sentence when you actually need the index of that word in list wds. You can change those two lines to this and will most likely work:</p>

<pre><code>index = [index for index, x in enumerate(wds) if x == j][0]
d[j] = index
plist.append(index)
</code></pre>",0
413,34686379,Reading python request,"<p>I am new to python and I am trying to run the following code using requests</p>

<pre><code>import requests
import wiringpi2
import time

wiringpi2.wiringPiSetupGpio()
wiringpi2.pinMode(17,1)
wiringpi2.digitalWrite(17,1)

while 1:
    relaystatus = requests.get('http://stevesolarhome.com/WaterControl.txt')
    if relaystatus == ""1"":
        wiringpi2.digitalWrite(17,1)
    elif relaystatus == ""0"":
        wiringpi2.digitalWrite(17,0)
    time.sleep (2)
</code></pre>

<p>the GPIO pins do not react to the file being changed. The file only contains the number 1 or 0 at any time. I know the URL works and the request returns the correct number from the text file. I also know the GPIO pins work but this script does not work. I assume the file being read is not in the correct format to be used in the 'if' line</p>",python,"<p><code>requests.get(url)</code> will return a request object.  To get the underlying content, call the <code>text</code> attribute.</p>

<pre><code>while 1:
    request = requests.get('http://stevesolarhome.com/WaterControl.txt')
    if request.text == ""1"":
          ... do stuff ...
</code></pre>",1
414,34806609,Depth Traversing a graph in Python,"<p>I'm trying to depth traverse a graph in Python, with 11 nodes.</p>

<pre><code>graph = {'A': ['B', 'C'],
        'B': ['A', 'F'],
        'C': ['D', 'E'],
        'D': ['H', 'J', 'C'],
        'E': ['C', 'F'],
        'F': ['B', 'G'],
        'G': ['F', 'H'],
        'H': ['G', 'D', 'I'],
        'I': ['H', 'K'],
        'J': ['D', 'E', 'K'],
        'K': ['I', 'J']}


current_node = []
viewed_nodes = []
   for i in graph.keys():
    print(""I'm at the "" + str(i) + "" node."" + "" The nodes connected to "" +str(i) + "" are "" + str(graph[i]))
    print(""I'm going to mark the "" + str(i) + "" node as visited."")
    viewed_nodes.append(str(i))
</code></pre>

<p>This is my code. I'm trying to figure out how to depth traverse it, meaning go through it all in one line before going back and going down different paths</p>",python,"<p>This below already visits all nodes.</p>

<pre class=""lang-py prettyprint-override""><code>graph = {'A': ['B', 'C'],
        'B': ['A', 'F'],
        'C': ['D', 'E'],
        'D': ['H', 'J', 'C'],
        'E': ['C', 'F'],
        'F': ['B', 'G'],
        'G': ['F', 'H'],
        'H': ['G', 'D', 'I'],
        'I': ['H', 'K'],
        'J': ['D', 'E', 'K'],
        'K': ['I', 'J']}


current_node = []
viewed_nodes = []


def traverse(into):
    if into in viewed_nodes:
        return

    viewed_nodes.append(into)

    for outto in graph[into]:
        if outto not in viewed_nodes:
            traverse(outto)

for node in graph:
    traverse(node)

print(sorted(viewed_nodes))
</code></pre>

<p>Output:</p>



<pre><code>['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K']
</code></pre>",1
415,34642333,Lookup @property methods with inspect module,<p>Is there a way to programmatically lookup the names of all <code>@property</code> decorated methods in a class using the <code>inspect</code> module? </p>,python,"<p>My version:</p>

<pre><code>import inspect


class A(object):
    @property 
    def name():
        return ""Masnun""


def method_with_property(klass):
    props = []

    for x in inspect.getmembers(klass):

        if isinstance(x[1], property):
            props.append(x[0])

    return props

print method_with_property(A)
</code></pre>

<p>Another version from another thread: </p>

<pre><code>import inspect

def methodsWithDecorator(cls, decoratorName):
    sourcelines = inspect.getsourcelines(cls)[0]
    for i,line in enumerate(sourcelines):
        line = line.strip()
        if line.split('(')[0].strip() == '@'+decoratorName: # leaving a bit out
            nextLine = sourcelines[i+1]
            name = nextLine.split('def')[1].split('(')[0].strip()
            yield(name)

class A(object):
    @property 
    def name():
        return ""Masnun""



print list(methodsWithDecorator(A, 'property'))
</code></pre>

<p>The code of <code>methodsWithDecorator</code> is taken from the accepted answer on this thread: <a href=""https://stackoverflow.com/questions/5910703/howto-get-all-methods-of-a-python-class-with-given-decorator"">Howto get all methods of a python class with given decorator</a></p>",3
416,34543737,Find The Minimum Elements That Cover Matrix in Python,"<p>I want to get the minimum elements that cover rows in matrix.</p>

<p>Example input:</p>

<pre><code>lst = [[1, 2, 3], [2, 3], [3]]
</code></pre>

<p>Output:</p>

<pre><code>[3]
</code></pre>

<p>Another example input:</p>

<pre><code>lst = [[1], [2, 3], [2, 3]] 
</code></pre>

<p>Output:</p>

<pre><code>[1, 2], [1, 3]
</code></pre>

<p>I've tried to think about taking combinations of the rows but when we have large matrix it'll take long time and a lot of RAM.</p>",python|matrix,"<p>as user2357112 said about the problem , you can find more information about it on Wikipedia here : 
<a href=""https://en.wikipedia.org/wiki/Set_cover_problem"" rel=""nofollow"">https://en.wikipedia.org/wiki/Set_cover_problem</a>
here I propose this Enhanced Greedy Algorithm to solve this problem only and only if the elements in each row unique (set).</p>

<pre><code>from collections import Counter
matrix = [[1,2,3],[2,3],[2,3]]
minimum =[]
while len(matrix)!=0:
    coun = Counter(reduce(lambda x, y: x+y,matrix))
    value = coun.most_common()[0][0]
    matrix = [s for s in matrix if value not in s]
    minimum.append(value)
print minimum
</code></pre>

<p>this solution will provide only one solution and I believe it's acceptable approximation in most cases.</p>",0
417,42605864,Update a lambda function iteratively in a loop,"<p>I want to update a python lambda function for several times, e.g.,</p>

<pre><code>f = lambda x: 0
for t in range(10):
    g_t = .... # some function independent of f
    f = lambda x: f(x) + g_t(x) # update f for 10 times
</code></pre>

<p>calling f gives me:</p>

<pre><code>...

File ""&lt;stdin&gt;"", line 3, in &lt;lambda&gt;

File ""&lt;stdin&gt;"", line 3, in &lt;lambda&gt;

...

File ""&lt;stdin&gt;"", line 3, in &lt;lambda&gt;

RuntimeError: maximum recursion depth exceeded
</code></pre>

<p>Anyway to get around this?</p>",python|lambda,"<p>If you invoke <code>f</code> after the snippet you've pasted, you'll get unbounded recursion, and will eventually exceed the maximum stack depth. </p>

<p>This is because Python closures are captured lexically, meaning they point at the variable name in scope, not the specific value of the variable at the point in time when the lambda is created. When the final value of <code>f</code> is invoked, the <code>f(x)</code> expression will recursively invoke the final value of <code>f</code>, not the value from the previous iteration.</p>

<p>The workaround is to pass the current value of <code>f</code> as an argument to the new lambda you are creating, instead of closing over it:</p>

<pre><code>f = lambda x: 0
for t in range(10):
    g_t = lambda x: 1 # some function independent of f
    f = lambda x, curr_f=f: curr_f(x) + g_t(x) # pass f as a default argument to the lambda
print(f(0)) # prints 10, no stack overflow
</code></pre>",4
418,42393369,C - Importing Python Module,"<p>I'm using the <code>&lt;Python.h&gt;</code> library, this is the first time that I use it and I did some research. Finally I found what is my problem exactly but don't really know how to fix it.</p>

<p>I want to parse url with Beautifulsoup, the Python code works perfectly but when I want to use <code>PyImport_ImportModule(parser)</code> to import my file (named parser.py) but it doesn't rencogniez the bs4 module from my import <code>from bs4 import BeautifulSoup</code>.</p>

<p>Here is the part of my C program :</p>

<pre><code>    PyObject *return, *module, *function, *args;

    Py_Initialize();

    PySys_SetPath(""."");
    module = PyImport_ImportModule(""parser"");

    if(module == NULL){
        PyErr_Print();
        exit(1);
    }
    fonction = PyObject_GetAttrString(module, ""link_list"");
</code></pre>

<p>Where <code>link_list</code> is my Python function who only takes a string. So I know that I have to import bs4 too with <code>PyImport</code> but nothing work correctly and I still have this error :</p>

<blockquote>
  <p>Traceback (most recent call last):
    File ""./parser.py"", line 2, in 
      from bs4 import BeautifulSoup
  ImportError: No module named bs4</p>
</blockquote>

<p>I insist my parser.py works perfectly with <code>Python2.7</code> and when I'm compiling my C program I use <code>gcc -I/usr/include/python2.7 pars.c -lpython2.7 -o pars -Wall</code> but if you need to see how I'm using it here's my Python program :</p>

<pre><code>#!/usr/local/bin/python3
from bs4 import BeautifulSoup
import urllib2


def link_list(urlString):
    siteFile = urllib2.urlopen(urlString)
    siteHTML = siteFile.read()
    siteFile.close()
    soup = BeautifulSoup(siteHTML, ""html.parser"")
    liste = []
    for links in soup.find_all('a'):
        print(links.get('href'))
        liste.append(links.get('href'))
    return liste
</code></pre>

<h2><strong>Update : Fixed !</strong></h2>

<p>If you encounter a problem when you try to import any module (in my case urllib2) and you can see this error : <code>Symbol not found: __PyCodecInfo_GetIncrementalDecoder</code>this mean you're certainly a mac user who installed Python with homebrew. In my case I did this :</p>

<pre><code>cp /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so /usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so
</code></pre>

<p>It depending of the version of Python you use. If you don't have this use <code>sudo find / -name _io.so</code> and look for the <code>/System</code> path to _io.so and the <code>/usr/local/Cellar/python/</code> with the most recent version of python and use the <code>cp</code>command with them.</p>",python|c|python-2.7|beautifulsoup|python-import,"<p>This has worked for me, please try this:</p>

<pre><code>    /* 1st: Import the module */
    PyObject* ModuleString = PyString_FromString((char*) ""parser"");
    if (!ModuleString) {
        PyErr_Print();
        printf(""Error formating python script\n"");
    }

    PyObject* Module = PyImport_Import(ModuleString);
    if (!Module) {
        PyErr_Print();
        printf(""Error importing python script\n"");
    }

    /* 2nd: Getting reference to the function */
    PyObject* Function = PyObject_GetAttrString(Module, (char*)""link_list"");
    if (!Function) {
        PyErr_Print();
        printf(""Error getting link_list()\n"");
    }
</code></pre>

<p><strong>Update:</strong></p>

<p>I have attached the complete process, compiled on MacOS. </p>

<pre><code>[milinddeore@MDEORE-M-P028: ~/temp ] ls
__init__.py pars.c      parser.py
[milinddeore@MDEORE-M-P028: ~/temp ] vim pars.c

#include &lt;stdio.h&gt;
#include &lt;Python.h&gt;

int main() {
  Py_Initialize();

  /* This is to add the path in the code */
  PyObject *sys = PyImport_ImportModule(""sys"");
  PyObject *path = PyObject_GetAttrString(sys, ""path"");
  PyList_Append(path, PyString_FromString("".""));

  /* 1st: Import the module */
    PyObject* ModuleString = PyString_FromString((char*) ""parser"");
    if (!ModuleString) {
        PyErr_Print();
        printf(""Error formating python script\n"");
    }

    PyObject* Module = PyImport_Import(ModuleString);
    if (!Module) {
        PyErr_Print();
        printf(""Error importing python script\n"");
    }

    /* 2nd: Getting reference to the function */
    PyObject* Function = PyObject_GetAttrString(Module, (char*)""link_list"");
    if (!Function) {
        PyErr_Print();
        printf(""Pass valid argument to link_list()\n"");
    }

    Py_Finalize();
    return 0;
}
[milinddeore@MDEORE-M-P028: ~/temp ] vim parser.py
#!/usr/local/bin/python2.7
from bs4 import BeautifulSoup
import urllib2


def link_list(urlString):
    siteFile = urllib2.urlopen(urlString)
    siteHTML = siteFile.read()
    siteFile.close()
    soup = BeautifulSoup(siteHTML, ""html.parser"")
    liste = []
    for links in soup.find_all('a'):
        print(links.get('href'))
        liste.append(links.get('href'))
    return liste
[milinddeore@MDEORE-M-P028: ~/temp ] gcc -I/usr/include/python2.7 pars.c -lpython2.7 -o pars -Wall
[milinddeore@MDEORE-M-P028: ~/temp ] ls
__init__.py pars        pars.c      parser.py
[milinddeore@MDEORE-M-P028: ~/temp ] ./pars
AttributeError: 'module' object has no attribute 'link_list'
Pass valid argument to link_list()     ===&gt; This is because i have not passed the required argument to the function. 
</code></pre>

<p>Let me know if you need any other details. Hope this helps.</p>",1
419,42456566,Convert python 3.5 to an executable when nothing is working,"<p>Please read before marking as a duplicate</p>

<p>Here is what I have tried:</p>

<h3>Pyinstaller:</h3>

<p>I get the the pyi-rth qt5plugins fatal error whenever I try to run the executable. I get no warnings when actually making the program (during the second run because of all those windows crt things the first time). As far as I can tell the Qt dlls are in the folder too but because I get no warning I don't know what it thinks it is missing.</p>

<p>UPDATE:
So the first time I run pyinstaller I get the huge list of warnings like this</p>

<pre class=""lang-none prettyprint-override""><code>lib not found: api-ms-win-crt-string-l1-1-0.dll dependency of      c:\users\name\appdata\local\programs\python\python35-32\lib\site-    packages\PIL\_imaging.cp35-win32.pyd
</code></pre>

<p>Which I was told (incorrectly?) were just a result of windows having to make those temp files now and that to fix it all I have to do is run the same command again without changing anything (which did seem to work until now).</p>

<p>Running it the second time I get no warnings or anything but trying to run the exe gets this error:</p>

<pre><code>Traceback (most recent call last):
  File ""site-packages\PyInstaller\loader\rthooks\pyi_rth_qt5plugins.py"", line 46, in &lt;module&gt;
  File ""c:\users\cryan\appdata\local\programs\python\python35-32\lib\site-packages\PyInstaller\loader\pyimod03_importers.py"", line 573, in load_module
    module = loader.load_module(fullname)
ImportError: DLL load failed: The specified procedure could not be found.
Failed to execute script pyi_rth_qt5plugins
</code></pre>

<h3>py2exe:</h3>

<p>I get this error</p>

<pre class=""lang-none prettyprint-override""><code>File ""C:\Users\name\AppData\Local\Programs\Python\Python35-32\lib\site-packages\olefile\olefile2.py"", line 225
    raise ValueError, 'Need to fix a bug with 32 bit arrays, please contact author...'
</code></pre>

<h3>cx-freeze:</h3>

<pre class=""lang-none prettyprint-override""><code>method = dis._unpack_opargs if sys.version_info[:2] &gt;= (3, 5) \
AttributeError: module 'dis' has no attribute '_unpack_opargs'
</code></pre>

<p>So I have no idea what else to try. I would like to point out that pyinstaller was working fine a while back and since then I am pretty sure I haven't changed anything one moment I was building and running them fine and then all of a sudden I started getting the error and since then nothing has worked</p>

<p>What else can I try?</p>",python|python-3.x|py2exe|pyinstaller|cx-freeze,"<p>This worked for me with py2exe:</p>

<pre><code>py -m pip install olefile --upgrade
</code></pre>

<p>The bug in olefile has been fixed in the latest version. Once I updated this package, the error went away.</p>",0
420,42456566,Convert python 3.5 to an executable when nothing is working,"<p>Please read before marking as a duplicate</p>

<p>Here is what I have tried:</p>

<h3>Pyinstaller:</h3>

<p>I get the the pyi-rth qt5plugins fatal error whenever I try to run the executable. I get no warnings when actually making the program (during the second run because of all those windows crt things the first time). As far as I can tell the Qt dlls are in the folder too but because I get no warning I don't know what it thinks it is missing.</p>

<p>UPDATE:
So the first time I run pyinstaller I get the huge list of warnings like this</p>

<pre class=""lang-none prettyprint-override""><code>lib not found: api-ms-win-crt-string-l1-1-0.dll dependency of      c:\users\name\appdata\local\programs\python\python35-32\lib\site-    packages\PIL\_imaging.cp35-win32.pyd
</code></pre>

<p>Which I was told (incorrectly?) were just a result of windows having to make those temp files now and that to fix it all I have to do is run the same command again without changing anything (which did seem to work until now).</p>

<p>Running it the second time I get no warnings or anything but trying to run the exe gets this error:</p>

<pre><code>Traceback (most recent call last):
  File ""site-packages\PyInstaller\loader\rthooks\pyi_rth_qt5plugins.py"", line 46, in &lt;module&gt;
  File ""c:\users\cryan\appdata\local\programs\python\python35-32\lib\site-packages\PyInstaller\loader\pyimod03_importers.py"", line 573, in load_module
    module = loader.load_module(fullname)
ImportError: DLL load failed: The specified procedure could not be found.
Failed to execute script pyi_rth_qt5plugins
</code></pre>

<h3>py2exe:</h3>

<p>I get this error</p>

<pre class=""lang-none prettyprint-override""><code>File ""C:\Users\name\AppData\Local\Programs\Python\Python35-32\lib\site-packages\olefile\olefile2.py"", line 225
    raise ValueError, 'Need to fix a bug with 32 bit arrays, please contact author...'
</code></pre>

<h3>cx-freeze:</h3>

<pre class=""lang-none prettyprint-override""><code>method = dis._unpack_opargs if sys.version_info[:2] &gt;= (3, 5) \
AttributeError: module 'dis' has no attribute '_unpack_opargs'
</code></pre>

<p>So I have no idea what else to try. I would like to point out that pyinstaller was working fine a while back and since then I am pretty sure I haven't changed anything one moment I was building and running them fine and then all of a sudden I started getting the error and since then nothing has worked</p>

<p>What else can I try?</p>",python|python-3.x|py2exe|pyinstaller|cx-freeze,"<p>I found out how to solve the pyinstaller problem. Follow the instructions <a href=""https://github.com/pyinstaller/pyinstaller/wiki/How-to-Report-Bugs"" rel=""nofollow noreferrer"">here</a></p>

<p>Esentially delete the following (depending on your OS):</p>

<pre><code>%APPDATA%\pyinstaller
$XDG_DATA_HOME/pyinstaller
~/Library/Application Support/pyinstaller
</code></pre>

<p>and then install the dev version:</p>

<pre><code>pip install https://github.com/pyinstaller/pyinstaller/archive/develop.zip
</code></pre>",0
421,42344679,Pandas converts int values to float in dataframe,"<p>I wrote a script that takes a csv file as an input, manipulates the data by using pandas and creates another csv file.</p>

<p>Everything is OK, however pandas converts integer values to double by default.
e.g.</p>

<p>in csv before:</p>

<pre><code>5f684ee8-7398-914d-9d87-7b44c37ef081,France,44,72000,No,isBool(""true"")
</code></pre>

<p>in csv after:</p>

<pre><code>E84E685F-9873-4D91-9D87-7B44C37EF081,France,44.0,72000.0,No,True
</code></pre>

<p>Here 44 and 72000 are changed to 44.0 and 72000.0</p>

<p>I know how to turn them into int using apply() in dataframe, however this script is going to be generic and I am looking to configure pandas at first.</p>

<p>Basically, I expect pandas not to put .0 if it is not a floating number.</p>

<p>Thanks.</p>",python|csv|pandas|dataframe|floating-point,"<p>As said in comments, some operations in pandas can change dtypes. see for exemple <a href=""http://pandas.pydata.org/pandas-docs/stable/gotchas.html#support-for-integer-na"" rel=""nofollow noreferrer"">this page</a>.</p>

<p>A solution can be :</p>

<pre><code>df.to_csv(float_format=""%.0f"")
</code></pre>

<p>which round every (false) float to an integer format.</p>

<p>An exemple :</p>

<pre><code>In [355]: pd.DataFrame(columns=list(range(6)), 
data=[['E84E685F-9873-4D91-9D87-7B44C37EF081', 'France', 44.0, 72000, 'No', True]]
).to_csv(float_format='%.f')
Out[355]: ',0,1,2,3,4,5\n0,E84E685F-9873-4D91-9D87-7B44C37EF081,France,44,72000,No,True\n'
</code></pre>",1
422,42344679,Pandas converts int values to float in dataframe,"<p>I wrote a script that takes a csv file as an input, manipulates the data by using pandas and creates another csv file.</p>

<p>Everything is OK, however pandas converts integer values to double by default.
e.g.</p>

<p>in csv before:</p>

<pre><code>5f684ee8-7398-914d-9d87-7b44c37ef081,France,44,72000,No,isBool(""true"")
</code></pre>

<p>in csv after:</p>

<pre><code>E84E685F-9873-4D91-9D87-7B44C37EF081,France,44.0,72000.0,No,True
</code></pre>

<p>Here 44 and 72000 are changed to 44.0 and 72000.0</p>

<p>I know how to turn them into int using apply() in dataframe, however this script is going to be generic and I am looking to configure pandas at first.</p>

<p>Basically, I expect pandas not to put .0 if it is not a floating number.</p>

<p>Thanks.</p>",python|csv|pandas|dataframe|floating-point,"<p>Similar to B. M.'s answer, you can parse your floats like the following:</p>

<pre class=""lang-py prettyprint-override""><code>df.to_csv(float_format=""%.10g"")
</code></pre>

<p>This will force numbers to be written without exponent if they have a precision of at most 10 digits. so 2,147,483,647 will render as <code>2147483647</code> and 10<sup>-2</sup> will render as <code>0.01</code>. You will run into issues if you have big integers (bigger than 10 digits) as these will be rendered as exponents instead.</p>",2
423,42582136,Replace file paths with content of files,"<p>I have a json file with a bunch of file paths in it. I want to write a script to replace all those file paths with the contents of the file that the path points to.</p>

<p>For example there is a file:</p>

<pre><code>{
    ""a"": ""stuff"",
    ""b: {
       ""body"": ""/stack/over/flow/file.json""
    },
    ""c"": {
        ""b"": ""stuff"",
        ""body"": ""here is some plain text""
    }
}
</code></pre>

<p>Then the file <code>/stack/over/flow/file.json</code> is:</p>

<pre><code>{
    ""another"": ""json""
}
</code></pre>

<p>and the output file would replace <code>/stack/over/flow/file.json</code> with the contents of that file. Also, since it is a json file, I need to do the proper escapes for it.</p>

<p>So there are really two things I need:</p>

<ol>
<li><p>Replace file paths with contents of the file. I think a regex would be most useful here.</p></li>
<li><p>Adding the proper escapes to the json, so that it can be sent as the body of another json. I was thinking to use pythons json.dumps for this.</p></li>
</ol>

<p>Please let me know if there is a better way to do this, or if you have any other suggestions.</p>",python|json|regex,"<p>You should read the json file, parse it (<code>json.load()</code>), and receive a structure (dictionary, list, string, or number).  This structure you need to tree-traverse (I propose a recursive function for this) and for every found leaf which resembles a link to another file, do the same recursively, and replace the link with the computed contents.</p>

<p>And pray that you do not have circular dependencies! ;-))</p>",0
424,28150234,Wrong convergence using optimize.fmin_l_bfgs_b,"<p>I'm using optimize.fmin_l_bfgs_b to optimize a function written in Fortran. The code is something similar to:</p>

<pre><code>def f(m, *args):
    # Optmization values
    Opt1 = m[0]
    Opt2 = m[1]
    # Rest of arguments:
    Var1 = args[0]
    Var2 = args[1]
    # Fortran Function
    r1, r2 = FortranFunction(Opt1, Opt2)
    # Evaluation of the result
    evaluation = sqrt((r1-Var1)**2 + (r2-Var2)**2)
    return evaluation

initial_values = numpy.array([1.09, 0.0025])
mybounds = [(1, 1.2), (0, 0.1)]
m = optimize.fmin_l_bfgs_b(f, x0 = initial_values, args=(x, file_vars), approx_grad = True, bounds = mybounds)
</code></pre>

<p>The fortran function returns 2 values that are used to evaluate the function using the two desired results (Var1 and Var2). The problem I have is that the algorithm doesn't optimize the first variable. If I print it in each iteration, this is what I obtain: </p>

<pre><code>1.09
1.09
1.09000001
1.09
1.09
1.09
1.09000001
1.09
1.09
1.09
1.09000001
1.09
1.09
1.09
1.09000001
...
</code></pre>

<p>It seems it is only evaluating the function by the difference between 1.09 and 1.09000001, which is too low to obtain a different value in the Fortran function (which may be the reason for what it is not optimized). The second variable doesn't present this problem. Is this a normal behavior? Is there any option to make the algorithm use a higher step?</p>",python|algorithm|optimization|scipy,"<p>There's a broad range of possible fixes depending on what exactly the Fortran function does. I see from your call signature that you're having the minimizer estimate the gradient numerically. Can you calculate the gradient <em>directly</em>? If so, try writing a function that does that, pass it as <code>fprime</code>, and set <code>approx_grad</code> to <code>False</code>. There's a good chance that a proper gradient function will give better results. </p>

<p>Another possibility would be to try different values of <code>epsilon</code>, which controls the step size for numerical gradient approximation. But it looks to me like <a href=""http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_l_bfgs_b.html"" rel=""nofollow""><code>fmin_l_bfgs_b</code></a> only accepts a single floating point value for <code>epsilon</code>, which means that you can't adopt different step sizes for different dimensions. That might not be a problem; if a larger epsilon gives a better gradient estimate for the first dimension, and doesn't throw off estimates for the second dimension, then your problem may be fixed. You could also try passing an array, with an epsilon value for each dimension -- it <em>might</em> work. And finally, you might be able to do something a little bit clunky like optimize one dimension, then adjust epsilon, and then optimize the other dimension. I'll do some experimentation later if I have the time. </p>

<p>A final approach might be to use a different minimization function. Have you tried <code>fmin_cg</code>, for example? I've found that it handles most of the problems I throw at it pretty well. But I've never used it without a hard-coded gradient function before. You might also try other functions on <a href=""http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html#id1"" rel=""nofollow"">this list</a> -- especially ones like <code>Powell</code> and <code>Anneal</code> that are designed to work without using any gradient information.</p>

<p>Which, if any, of these approaches works will depend heavily on the specific nature of the function you're trying to minimize. You may have to do some experimentation! </p>",1
425,28273385,Modify 3rd index of array in json using python,"<p>I have a  file 'test.json' which contains an array ""rows"" and another sub array ""allowed"" in which some alphabets are there like ""A"",""B"" etc.but i want to modify the contents of subarray. how can i do?? </p>

<p>test.json file is following:</p>

<pre><code>{""rows"": [
    {
      ""Company"": ""google"",  
      ""allowed"": [""A"",""B"",""C""]},#array containg 3 variables
    {
      ""Company"": ""Yahoo"", 
      ""allowed"": [""D"",""E"",""F""]#array contanig 3 variables
    }
]}
</code></pre>

<p>But i want to modify ""allowed"" array . and want to update 3rd index as ""LOOK"" instead of ""C"". so that the resultant array should looks like:</p>

<pre><code>{""rows"": [
    {
      ""Company"": ""google"", 
      ""allowed"": [""A"",""B"",""LOOK""]#array containg 3 variables
    }, 
    {
    ""Company"": ""Yahoo"", #array containing 3 variables 
    ""allowed"": [""D"",""E"",""F""] #array containing 3 variables
    }
]}
</code></pre>

<p>My program: </p>

<pre><code>import json 
with open('test.json') as f: 
   data = json.load(f) 
   for row in data['rows']: 
       a_dict = {row['allowed'][1]:""L""} 

with open('test.json') as f: 
    data = json.load(f) 
    data.update(a_dict) 

with open('test.json', 'w') as f: 
    json.dump(data, f,indent=2) 
</code></pre>",python|arrays|json,"<p>There are a couple of problems with your program as it is.</p>

<p>The first issue is you're not looking up the last element of your 'allowed' arrays:</p>

<pre><code>a_dict = {row['allowed'][1]:""L""}
</code></pre>

<p>Remember, array indicies start at zero. eg:</p>

<pre><code>['Index 0', 'Index 1', 'Index 2']
</code></pre>

<p>But the main problem is when you walk over each row, you fetch the contents of
that row, but then don't do anything with it.</p>

<pre><code>import json 
with open('test.json') as f: 
   data = json.load(f) 
   for row in data['rows']: 
       a_dict = {row['allowed'][1]:""L""} 

       # a_dict is twiddling its thumbs here...
       # until it's replaced by the next row's contents
...
</code></pre>

<p>It just gets replaced by the next row of the for loop, until you're left with the
final row all by itself in ""a_dict"", since the last one of course isn't overwritten by
anything.  Which in you sample, would be:</p>

<pre><code>{'E': 'L'}
</code></pre>

<p>Next you load the original json data again (though, you don't need to -- it's 
still in your data variable, unmodified), and add a_dict to it:</p>

<pre><code>with open('test.json') as f: 
    data = json.load(f) 
    data.update(a_dict) 
</code></pre>

<p>This leaves you with this:</p>

<pre><code>{
  ""rows"": [
    {
      ""Company"": ""google"", 
      ""allowed"": [""A"", ""B"", ""C""]
    }, 
    {
      ""Company"": ""Yahoo"", 
      ""allowed"": [""D"", ""E"", ""F""]
    }
  ], 
  ""E"": ""L""
}
</code></pre>

<p>So, to fix this, you need to:</p>

<ol>
<li><p>Point at the correct 'allowed' index (in your case, that'll be [2]), and</p></li>
<li><p>Modify the rows, instead of copying them out and merging them back into data.</p>

<p>In your for loop, each row in data['rows'] is pointing at the value in data, so you can update the contents of row, and your work is done.</p></li>
</ol>

<p>One thing I wasn't clear on was whether you meant to update all rows (implied by your looping over all rows), or just update the first row (as shown in your example desired output).</p>

<p>So here's a sample fix which works in either case:</p>

<pre><code>import json

modify_first_row_only = True

with open('test.json', 'r') as f:
    data = json.load(f)
    rows = data['rows']

    if modify_first_row_only:
        rows[0]['allowed'][2] = 'LOOK'
    else:
        for row in rows:
            row['allowed'][2] = 'LOOK'

with open('test.json', 'w') as f:
    json.dump(data, f, indent=2)
</code></pre>",1
426,28232573,Checking if a string fits a pattern,"<p>Hi I need to check if a string fits a pattern in python. The pattern in question is that of a standard UK car registration. The pattern is</p>

<ul>
<li>two Letters</li>
<li>two Numbers</li>
<li>a space</li>
<li>three Letters</li>
</ul>

<p>For example</p>

<pre><code>AB56 TYR
</code></pre>

<p>How can I get a program to check if the registration that the user has input matches this pattern?</p>",python|string,"<pre><code>import re
if re.match(r'^[A-Z][A-Z]\d\d [A-Z][A-Z][A-Z]$', text):
    # valid
</code></pre>",2
427,28232573,Checking if a string fits a pattern,"<p>Hi I need to check if a string fits a pattern in python. The pattern in question is that of a standard UK car registration. The pattern is</p>

<ul>
<li>two Letters</li>
<li>two Numbers</li>
<li>a space</li>
<li>three Letters</li>
</ul>

<p>For example</p>

<pre><code>AB56 TYR
</code></pre>

<p>How can I get a program to check if the registration that the user has input matches this pattern?</p>",python|string,"<p>Here is what i Came up with</p>

<pre><code> import re
    text = 'AB56 TYR'
    text2='Adfsdf56 TYR'
    m = re.search('^([A-Z]{3}\s?(\d{3}|\d{2}|d{1})\s?[A-Z])|([A-Z]\s?(\d{3}|\d{2}|\d{1})\s?[A-Z]{3})|(([A-HK-PRSVWY][A-HJ-PR-Y])\s?([0][2-9]|[1-9][0-9])\s?[A-HJ-PR-Z]{3})', text)
    n = re.search('^([A-Z]{3}\s?(\d{3}|\d{2}|d{1})\s?[A-Z])|([A-Z]\s?(\d{3}|\d{2}|\d{1})\s?[A-Z]{3})|(([A-HK-PRSVWY][A-HJ-PR-Y])\s?([0][2-9]|[1-9][0-9])\s?[A-HJ-PR-Z]{3})', text2)
    if m:
        print ""NUMBER IS GOOD""
    else:
        print ""BAD NUMBER""

    if n:
        print ""NUMBER IS GOOD""
    else:
        print ""BAD NUMBER""
</code></pre>",0
428,28399664,How does Python handle non-printable characters?,"<p>I'm making a program that encrypts a file using keys.
It can encrypt only numbers, letters, spaces, some symbols.
Etc.</p>

<pre><code>This is text &gt;&gt;&gt; h5D#I2%%&amp;12s
</code></pre>

<p>My program can encrypt a file, too. (At least I'm working on it)
What if file contains characters like this ? - uún‰3«°Ø and also NULL, CAN or SOH characters.</p>

<p>I have an idea: I want to leave these and all other non-ascii characters unencrypted. But I don't know if Python can work with them.</p>

<p>P.S. Here is link to the project: (And It's unfinished, not working)
<a href=""https://www.dropbox.com/sh/lq8j4vmci5c2vmh/AADeSTPVYeV13z5HRHp-NlWPa?dl=0"" rel=""nofollow"">https://www.dropbox.com/sh/lq8j4vmci5c2vmh/AADeSTPVYeV13z5HRHp-NlWPa?dl=0</a></p>",python|encryption|character|ascii,"<p>Python byte strings (type <code>str</code> in Python 2, <code>bytes</code> in Python 3) are just opaque sequences of bytes, where each byte has an integer value between 0 and 255.</p>

<p>How you treat those bytes is up to you. You could treat them as text; printing the text, splitting on whitespace, changing case, etc. Or you can just treat it as binary data, your choice. If you chose to treat the contents as text, then yes, some bytes are 'unprintable' because the ASCII codec hasn't assigned a printable glyph to those codepoints. Python, however, doesn't care.</p>

<p>Open your files in binary mode (<code>'rb'</code>, <code>'wb'</code>, etc.) to make sure that line separators (<code>\n</code>, or <code>\r</code> or <code>\r\n</code> characters) are not translated from and to the platform native form.</p>",3
429,21634733,Finding object in list not working properly in django app,"<p>I want to check if the date a user picked is not already booked. I wrote the codes below, and after inputting a date that has been booked in the db, I was informed that the date is free which is not supposed to be.</p>

<p>Models</p>

<p>property models</p>

<pre><code>class Kip(models.Model):
    user=models.ForeignKey(User)
    name=models.CharField(max_length=250)
    address=models.CharField(max_length=200)
</code></pre>

<p>property owner calender models</p>

<pre><code>class OwnerCalendar(models.Model):
    user=models.ForeignKey(User)
    kip=models.ForeignKey(Kip)
    booked_dates=models.CharField(max_length=1000)
    pub_date=models.DateTimeField()
</code></pre>

<p>booking of property models</p>

<pre><code>class Bookable(models.Model):
    user=models.ForeignKey(User)
    event_date=models.DateField()
    session=models.ForeignKey(Session)
    full_name=models.CharField(max_length=100)
    phone_no=models.CharField(max_length=40)
    kip=models.ForeignKey(Kip)
</code></pre>

<p>Views</p>

<pre><code>def booking_of_space(request, kipid):
    if request.method==""POST"":
        form=BookableForm(request.POST)
        if form.is_valid():
            data=form.cleaned_data
            newbooking=Bookable(
                user=request.user,
                pub_date=datetime.datetime.now(),
                event_date=data['event_date'],
                phone_no=data['phone_no'],
                kip=Kip.objects.get(pk=kipid),
                session=Session.objects.get(session_key=request.session.session_key))
            newbooking.save()
            renter=newbooking.event_date
          owners=OwnerCalendar.objects.filter(kip__id=kipid).values_list('booked_dates')
            if renter in owners:
                return HttpResponse('Booked already')
            else:
                return HttpResponse('Go ahead and book')
        else:
            return HttpResponse('Kindly input the right data')
    else:
        return render_to_response('bookablespace.html',{'BookableForm':BookableForm},context_instance=RequestContext(request))
</code></pre>

<p>what am I missing?</p>",python|django|django-models|django-views,"<p>You are comparing a date object <code>newbooking.event_date</code> against a list of strings <code>booked_dates</code> which will never be true. Why not just do a query to check if there is a <code>Bookable</code> entry already created for a property at a certain time? Something like: </p>

<pre><code>    if form.is_valid():
        data=form.cleaned_data
        requested_date = data['event_date']
        requested_kip = Finapart.objects.get(pk=kipid)
        existing_bookings = Bookable.objects.filter(
            kip = requested_kip,
            event_date = requested_date
        )
        if existing_bookings: 
            return HttpResponse('Booked already')
        newbooking=Bookable(
            user=request.user,
            pub_date=datetime.datetime.now(),
            event_date=requested_date,
            phone_no=data['phone_no'],
            kip=requested_kip,
            session=Session.objects.get(session_key=request.session.session_key))
        newbooking.save()
        return HttpResponse('Booking saved')
    ...
</code></pre>",2
430,21671945,Sublime Text 2/3 shortcut to show/hide/toggle tabs,"<p>I'm searching for a way to toggle tab visibility in Sublime Text 2 or 3.
I've seen the 'hide tabs' plugin, but it doesn't fit my needs, and neither does <a href=""https://www.sublimetext.com/forum/viewtopic.php?f=5&amp;t=1357"" rel=""nofollow"">this script</a> (the API seems to have changed since 2010).</p>

<p>I just want to bind a keyboard shortcut to toggle tab visibility.</p>",python|sublimetext2|sublimetext3|sublimetext,"<p>If you are on Mac OS X, you can go to System Preferences > Keyboard > Shortcuts > App Shortcuts, then add a new key binding for the specific menu item.</p>",2
431,21671945,Sublime Text 2/3 shortcut to show/hide/toggle tabs,"<p>I'm searching for a way to toggle tab visibility in Sublime Text 2 or 3.
I've seen the 'hide tabs' plugin, but it doesn't fit my needs, and neither does <a href=""https://www.sublimetext.com/forum/viewtopic.php?f=5&amp;t=1357"" rel=""nofollow"">this script</a> (the API seems to have changed since 2010).</p>

<p>I just want to bind a keyboard shortcut to toggle tab visibility.</p>",python|sublimetext2|sublimetext3|sublimetext,"<p>Open the console <kbd>Ctrl</kbd>+<kbd>`</kbd> and type:</p>

<pre><code>sublime.log_commands(True)
</code></pre>

<p>Then click View -> Toggle tabs yourself and observe the console:</p>

<pre><code>command: toggle_tabs
</code></pre>

<p>You've got the command name. Now go to Preferences -> Key bindings - User. This opens the JSON config file in the <code>User</code> package where you can set your own setting. Add an entry like:</p>

<pre><code>{ ""keys"": [""ctrl+shift+t""], ""command"": ""toggle_tabs"" }
</code></pre>",31
432,21565445,"Matplotlib says fig.canvas is None, so I can't use fig.canvas.draw","<p>I haven't used Matplotlib much. Based on someone's advice, I'm trying to write some plotting codes using object-oriented paradigms as much as possible---and therefore trying to use pure Matplotlib (i.e. not relying on pyplot) to generate some simple figures.</p>

<p>A stripped-down version of my code looks like this:</p>

<pre><code>import matplotlib as mpl

time = [0,1,2,3,4]
cell = [1,2,1,2,1]
sample = [3,2,3,4,4]

(figHt, figWd) = (5, 8) # in
lBorderWidth = bBorderWidth = rBorderWidth = tBorderWidth = 0.1
lbwh = (lBorderWidth, bBorderWidth,
        (1-lBorderWidth-rBorderWidth),
        (1-tBorderWidth-bBorderWidth)) # left, bottom, width, height

fig = mpl.figure.Figure(figsize=(figHt, figWd))

ax = fig.add_axes(lbwh)
lines1, = ax.plot(time,cell,'k--')
lines2, = ax.plot(time,sample,'k-')

fig.legend([lines1,lines2],['p','q'],'upper left')
fig.canvas.draw()
</code></pre>

<p>But when I run it, Python complains when it reaches <code>fig.canvas.draw()</code> that <code>canvas</code> type is <code>None</code>.</p>

<p>Based on a reading of the <a href=""http://matplotlib.org/users/artists.html"" rel=""nofollow"">Matplotlib Artists tutorial</a>, it seems like <code>pyplot</code> takes care of a few behind-the-scenes setup tasks, most notably establishing the connection between the Figure object and the desired renderer/backend. The tutorial says:</p>

<blockquote>
  <p>In the example below, we create a Figure instance using matplotlib.pyplot.figure(), which is a convenience method for
  instantiating Figure instances and connecting them with your user
  interface or drawing toolkit FigureCanvas. As we will discuss below,
  this is not necessary – you can work directly with PostScript, PDF
  Gtk+, or wxPython FigureCanvas instances, instantiate your Figures
  directly and connect them yourselves – but since we are focusing here
  on the Artist API we’ll let pyplot handle some of those details for us</p>
</blockquote>

<p>Unfortunately, that particular page doesn't proceed beyond generating plots with <code>pyplot.figure()</code>, so I am still trying to discover what the required steps are. Again, I realize pyplot can simplify this task---just trying to grok how all the pieces fit together.</p>

<p>I saw this description of a base class used by backends, <a href=""http://matplotlib.org/api/backend_bases_api.html#matplotlib.backend_bases.FigureCanvasBase"" rel=""nofollow""><code>FigureCanvasBase</code></a>, and I assume that I need to assign <code>fig.canvas</code> one of <code>FigureCanvasBase</code>'s subclasses.</p>

<p>Also, I verified that Python is using a default backend. So I know the problem isn't caused by lack of a backend.</p>

<pre><code>&gt;&gt;&gt; matplotlib.backends.backend
'Qt4Agg'
</code></pre>

<p>Thanks in advance for any help. In summary, two questions:</p>

<ol>
<li>What am I missing that is causing this to fail? Is it because I didn't assign the figure object a renderer?</li>
<li>I mentioned that I suspected I needed a subclass of <code>FigureCanvasBase</code> to move forward. Even if the problem can probably be solved more elegantly, is there a way to search the Python environment for subclasses that inherit from FigureCanvasBase? This might come in handy in other problems. </li>
</ol>",python|canvas|matplotlib|plot|backend,"<p>You need to create a <code>FigureCanvasAgg</code> in order to plot manually, try this:</p>

<pre><code>import matplotlib as mpl
mpl.use('Agg') #setup the backend
import matplotlib.figure as mfigure
from matplotlib.backends.backend_agg import FigureCanvasAgg #canvas

time = [0,1,2,3,4]
cell = [1,2,1,2,1]
sample = [3,2,3,4,4]

(figHt, figWd) = (5, 8) # in
lBorderWidth = bBorderWidth = rBorderWidth = tBorderWidth = 0.1
lbwh = (lBorderWidth, bBorderWidth,
        (1-lBorderWidth-rBorderWidth),
        (1-tBorderWidth-bBorderWidth)) # left, bottom, width, height

fig = mfigure.Figure(figsize=(figHt, figWd))
canvas = FigureCanvasAgg(fig) #create the canvas

ax = fig.add_axes(lbwh)
lines1, = ax.plot(time,cell,'k--')
lines2, = ax.plot(time,sample,'k-')

fig.legend([lines1,lines2],['p','q'],'upper left')
fig.savefig('test.png') #save the figure
</code></pre>

<p>Note: You can find the subclasses of <code>FigureCanvasBase</code> in <code>matplotlib.backends.&lt;your backend&gt;.FigureCanvas&lt;your backend&gt;</code></p>",2
433,21609985,Django: UpdateView with unique field,"<p>I'm trying to create an update profile page for my custom User model.  In my model, my email field is set to be unique.</p>

<pre><code>class User(UserBase):
     ...
     email = models.EmailField(
            max_length=100,
            unique=True,
            blank=True,
            verbose_name='email address',
        )
</code></pre>

<p>Then in my view I have:</p>

<pre><code>class UpdateProfileView(LoginRequiredMixin, UpdateView):
    template_name = 'accounts/update-profile.html'
    form_class = UpdateProfileForm
    model = User
</code></pre>

<p>The only thing that <code>UpdateProfileForm</code> does is check that the old password is different from the new one in the <code>clean</code> method.</p>

<p>My issue is that when I save the form I'm getting the error message <code>User with this Email address already exists.</code>.  Since it's an update view and saving a unique field that hasn't changed shouldn't it not throw this error?  If this is the correct behavior, then how do I save the form and ignore the email address if it hasn't changed.</p>

<p>Thanks for the help in advance.</p>",python|django,"<p>Remove <code>blank=True</code> from your User Model definition. The field definition is <code>null=False</code> by default and additionally you specify the field must be unique—it's a important field—so you don't want your form validation to allow blank values. Here is the Django <a href=""https://docs.djangoproject.com/en/1.6/ref/models/fields/#field-options"" rel=""nofollow"">documentation</a> on those attributes. <code>blank</code> is entirely a form validation thing. That alone might fix the error.</p>

<p>Unless you have custom form logic/validation, you don't need the <code>form_class</code> attribute on your <code>UpdateProfileView</code>. From the <a href=""https://docs.djangoproject.com/en/1.6/topics/class-based-views/generic-editing/#model-forms"" rel=""nofollow"">docs</a>: ""These generic views will automatically create a ModelForm"". (There is even an UpdateView example).</p>

<p>See if the view works without <code>form_class</code> and if it does then examine your <code>UpdateProfileForm</code> code.</p>",2
434,21609985,Django: UpdateView with unique field,"<p>I'm trying to create an update profile page for my custom User model.  In my model, my email field is set to be unique.</p>

<pre><code>class User(UserBase):
     ...
     email = models.EmailField(
            max_length=100,
            unique=True,
            blank=True,
            verbose_name='email address',
        )
</code></pre>

<p>Then in my view I have:</p>

<pre><code>class UpdateProfileView(LoginRequiredMixin, UpdateView):
    template_name = 'accounts/update-profile.html'
    form_class = UpdateProfileForm
    model = User
</code></pre>

<p>The only thing that <code>UpdateProfileForm</code> does is check that the old password is different from the new one in the <code>clean</code> method.</p>

<p>My issue is that when I save the form I'm getting the error message <code>User with this Email address already exists.</code>.  Since it's an update view and saving a unique field that hasn't changed shouldn't it not throw this error?  If this is the correct behavior, then how do I save the form and ignore the email address if it hasn't changed.</p>

<p>Thanks for the help in advance.</p>",python|django,"<p>Here are some suggestions/alternatives:</p>

<ol>
<li><p>If you stop using Generic Views (i.e. UpdateProfileView), you can then do the following steps in your logic view: if the request is a POST, take the data from the form and update your Model (<a href=""https://stackoverflow.com/questions/3681627/django-how-to-update-fields-in-a-model-without-creating-a-new-record"">How to update fields in a model without creating a new record in django?</a>)</p></li>
<li><p>Why don't you use a ModelForm instead? <a href=""https://docs.djangoproject.com/en/dev/topics/forms/modelforms/"" rel=""nofollow noreferrer"">https://docs.djangoproject.com/en/dev/topics/forms/modelforms/</a></p></li>
<li><p>Why don't you work with User from django.contrib.auth.models? <a href=""https://docs.djangoproject.com/en/dev/topics/auth/default/#user-objects"" rel=""nofollow noreferrer"">https://docs.djangoproject.com/en/dev/topics/auth/default/#user-objects</a></p></li>
<li><p>Finally, have you considered working with this already built Django registration app? <a href=""http://www.michelepasin.org/blog/2011/01/14/setting-up-django-registration/"" rel=""nofollow noreferrer"">http://www.michelepasin.org/blog/2011/01/14/setting-up-django-registration/</a></p></li>
</ol>",0
435,21609985,Django: UpdateView with unique field,"<p>I'm trying to create an update profile page for my custom User model.  In my model, my email field is set to be unique.</p>

<pre><code>class User(UserBase):
     ...
     email = models.EmailField(
            max_length=100,
            unique=True,
            blank=True,
            verbose_name='email address',
        )
</code></pre>

<p>Then in my view I have:</p>

<pre><code>class UpdateProfileView(LoginRequiredMixin, UpdateView):
    template_name = 'accounts/update-profile.html'
    form_class = UpdateProfileForm
    model = User
</code></pre>

<p>The only thing that <code>UpdateProfileForm</code> does is check that the old password is different from the new one in the <code>clean</code> method.</p>

<p>My issue is that when I save the form I'm getting the error message <code>User with this Email address already exists.</code>.  Since it's an update view and saving a unique field that hasn't changed shouldn't it not throw this error?  If this is the correct behavior, then how do I save the form and ignore the email address if it hasn't changed.</p>

<p>Thanks for the help in advance.</p>",python|django,"<ol>
<li><p>Never use blank=True and unique=True, its senseless. If you want to make this field is not required in form, just do.</p>

<pre><code>class Form(forms.Form):
     ...

     def __init__(self, *args, **kwargs):
          super().__init__(*args, **kwargs)
          self.fields['unique_field].required = False 
</code></pre></li>
<li><p>In addition to previous answer, when u use blank=True and unique=True, the ""Is already exits ... blah bla"" its correct behavior, coz form accepting empty string as value and its already exists. You need to override clean_field method:</p>

<pre><code>class Form(forms.Form):
    ...

    def clean_unique_id(self):
        """"""
        Take new value or if its '' e.g. None take initial value 
        """"""
        return self.data['unique_id'] or self.initial['unique_id']
</code></pre></li>
</ol>",0
436,22609620,Binding events to widget not working,"<p>I have a function, say foo and it's supposed to bind an event</p>

<pre><code>    def foo:
         for x in widget_list:
              widget.config(command = lambda: self.function(widget_list.index(x))

    def function(index):
         do something here....
         print index
</code></pre>

<p>The widget list contains buttons, and whenever I click corresponding buttons, they're supposed to print to the IDLE their index, but what happens is that all the buttons I click end up printing the last index of widget_list. I'm guessing that while for iterates, the argument of the function also changes thus only the last index is preserved. Is there anyway to bind the previous indexes to the button?</p>",python|tkinter,"<p>The simplest fix is to make sure that your lambda is using the current value of <code>x</code>:</p>

<pre><code>widget.config(command = lambda x=x: self.function(widget_list.index(x))
</code></pre>

<p>This forces <code>x</code> to be a default parameter to the function, and the default value will be the value of <code>x</code> at the time the lambda is defined.</p>",0
437,22697749,"Why does ""for item in list"" loop only go half way?","<p>I'm trying to modify a loop function that contains over a hundred lines of code.</p>

<p>If I have a loop in python that goes through a list, why does a <code>for item in list:</code> loop only finish half way through? Shouldn't it keep looping until all items are popped?</p>

<p>For example if I have this list:</p>

<pre><code> l1 = [1,2,3,4,5,6]


    for item in l1:
        l1.pop(0)
        print l1
</code></pre>

<p>No matter how many items the list contains, it will only finish when 50% of the list has been popped:</p>

<p>OUTPUT FOR CODE ABOVE:</p>

<pre><code>[2, 3, 4, 5, 6]
[3, 4, 5, 6]
[4, 5, 6]

Process finished with exit code 0
</code></pre>

<p>Can I still pop each item in the list without changing the <code>for item in l1:</code> loop?</p>",python,"<p>You could create a copy of the list and pop from the original one:</p>

<pre><code>In [1]: l1 = [1,2,3,4,5,6]

In [2]: for item in l1[:]:
   ...:     l1.pop(0)
   ...:     print l1
   ...:     
[2, 3, 4, 5, 6]
[3, 4, 5, 6]
[4, 5, 6]
[5, 6]
[6]
[]
</code></pre>

<p>However, this is certainly not elegant.</p>",0
438,22698456,Lexical analysis,"<p>I am learning lexers in Python. I am using Ply library for lexical analysis on some strings. I have implemented the following lexical analyzer for some of C++ language syntax.</p>

<p>However, I am facing a strange behavior. When I define the <strong>COMMENT</strong> <code>states function definitions</code> at the end of other function definitions, the code works fine. If I define <strong>COMMENT</strong> <code>state functions</code> before other definitions, I get errors as soon as <code>//</code> sectoin starts in the input string starts. </p>

<p><em>WHAT IS THE REASON BEHIND THAT?</em></p>

<pre><code>import ply.lex as lex

tokens = (
        'DLANGLE',       # &lt;&lt;
        'DRANGLE',       # &gt;&gt;
        'EQUAL',        # =
        'STRING',       # ""144""
        'WORD',         # 'Welcome' in ""Welcome.""
        'SEMICOLON',    # ;

)

t_ignore                = ' \t\v\r' # shortcut for whitespace


states = (
        ('cppcomment', 'exclusive'),   # &lt;!--
)



def t_cppcomment(t): # definition here causes errors
    r'//'
    print 'MyCOm:',t.value

    t.lexer.begin('cppcomment');



def t_cppcomment_end(t):
    r'\n'
    t.lexer.begin('INITIAL');


def t_cppcomment_error(t):
    print ""Error FOUND""
    t.lexer.skip(1)

def t_DLANGLE(t):

    r'&lt;&lt;'
    print 'MyLAN:',t.value
    return t

def t_DRANGLE(t):
    r'&gt;&gt;'
    return t

def t_SEMICOLON(t):

    r';'
    print 'MySemi:',t.value
    return t;

def t_EQUAL(t):
        r'='
        return t

def t_STRING(t):
        r'""[^""]*""'
        t.value = t.value[1:-1] # drop ""surrounding quotes""
        print 'MyString:',t.value
        return t

def t_WORD(t):
        r'[^ &lt;&gt;\n]+'
        print 'MyWord:',t.value
        return t




webpage = ""cout&lt;&lt;\""Hello World\""; // this comment""
htmllexer = lex.lex()
htmllexer.input(webpage)
while True:
        tok = htmllexer.token()
        if not tok: break
        print tok
</code></pre>

<p>Regards</p>",python|lexical-analysis|ply,"<p>Just figured it out. As I have defined comment state as <code>exclusive</code>, it won't use the <code>inclusive</code> state modules (if comment modules are defined at the top, otherwise it uses it for some reason). So you will have <em>redefine</em> all the modules for comment state again. Therefore <strong>ply</strong> provides <strong>error()</strong> modules for skipping characters for which specific modules are not defined.</p>",1
439,22698456,Lexical analysis,"<p>I am learning lexers in Python. I am using Ply library for lexical analysis on some strings. I have implemented the following lexical analyzer for some of C++ language syntax.</p>

<p>However, I am facing a strange behavior. When I define the <strong>COMMENT</strong> <code>states function definitions</code> at the end of other function definitions, the code works fine. If I define <strong>COMMENT</strong> <code>state functions</code> before other definitions, I get errors as soon as <code>//</code> sectoin starts in the input string starts. </p>

<p><em>WHAT IS THE REASON BEHIND THAT?</em></p>

<pre><code>import ply.lex as lex

tokens = (
        'DLANGLE',       # &lt;&lt;
        'DRANGLE',       # &gt;&gt;
        'EQUAL',        # =
        'STRING',       # ""144""
        'WORD',         # 'Welcome' in ""Welcome.""
        'SEMICOLON',    # ;

)

t_ignore                = ' \t\v\r' # shortcut for whitespace


states = (
        ('cppcomment', 'exclusive'),   # &lt;!--
)



def t_cppcomment(t): # definition here causes errors
    r'//'
    print 'MyCOm:',t.value

    t.lexer.begin('cppcomment');



def t_cppcomment_end(t):
    r'\n'
    t.lexer.begin('INITIAL');


def t_cppcomment_error(t):
    print ""Error FOUND""
    t.lexer.skip(1)

def t_DLANGLE(t):

    r'&lt;&lt;'
    print 'MyLAN:',t.value
    return t

def t_DRANGLE(t):
    r'&gt;&gt;'
    return t

def t_SEMICOLON(t):

    r';'
    print 'MySemi:',t.value
    return t;

def t_EQUAL(t):
        r'='
        return t

def t_STRING(t):
        r'""[^""]*""'
        t.value = t.value[1:-1] # drop ""surrounding quotes""
        print 'MyString:',t.value
        return t

def t_WORD(t):
        r'[^ &lt;&gt;\n]+'
        print 'MyWord:',t.value
        return t




webpage = ""cout&lt;&lt;\""Hello World\""; // this comment""
htmllexer = lex.lex()
htmllexer.input(webpage)
while True:
        tok = htmllexer.token()
        if not tok: break
        print tok
</code></pre>

<p>Regards</p>",python|lexical-analysis|ply,"<p>its because you have no rules that accept <code>this</code> or <code>comment</code>
and really you dont care about whats in the comment you can easilly do something like</p>

<pre><code>t_cppcomment_ANYTHING = '[^\r\n]'
</code></pre>

<p>just below your <code>t_ignore</code> rule</p>",0
440,19718442,zip based on true/false tuple in python,"<p>I'd like to have a variable which is made of <code>zip</code>ed lists, but only those selected. That is,</p>

<pre><code>selected = (True, True, False)
mylist1 = [1,2,4]
mylist2 = [4,5,8]
mylist3 = [3,2,7]
</code></pre>

<p>So, what I want is to get <code>mylist = zip(mylist1, mylist2)</code> if <code>selected</code> is like above. Namely, I'd like to <code>zip</code> only those lists which are marked as <code>True</code>. At the moment I have a bunch of if-else's and it looks ugly. I will need to do the same with more than three lists later on and I feel like there must be a more universal solution for it. Is there?</p>",python|list|python-2.7|tuples,"<p>You can use <code>numpy</code>'s indexing.</p>

<pre><code>import numpy as np
selected = np.array([True, True, False])
lists = np.array([mylist1, mylist2, mylist3], dtype = 'object')
zip(*(lists[selected]))
</code></pre>

<p>Note that for this to work, <code>selected</code> needs to be a numpy array, not a tuple.</p>

<p>In fact, you can choose to skip the call to <code>zip</code>. <code>lists[selected]</code> is already an object similar to the result of your call to <code>zip</code> -- it is iterable, and each of the elements is a sequence with N elements (where N is the number of <code>True</code>s in <code>selected</code>).</p>",1
441,19718442,zip based on true/false tuple in python,"<p>I'd like to have a variable which is made of <code>zip</code>ed lists, but only those selected. That is,</p>

<pre><code>selected = (True, True, False)
mylist1 = [1,2,4]
mylist2 = [4,5,8]
mylist3 = [3,2,7]
</code></pre>

<p>So, what I want is to get <code>mylist = zip(mylist1, mylist2)</code> if <code>selected</code> is like above. Namely, I'd like to <code>zip</code> only those lists which are marked as <code>True</code>. At the moment I have a bunch of if-else's and it looks ugly. I will need to do the same with more than three lists later on and I feel like there must be a more universal solution for it. Is there?</p>",python|list|python-2.7|tuples,"<p>More <code>zip</code>!</p>

<pre><code>lists = [mylist1, mylist2, mylist3]
selected_lists = (b for a, b in zip(selected, lists) if a)
result = zip(*selected_lists) # itertools if necessary
</code></pre>",4
442,19718442,zip based on true/false tuple in python,"<p>I'd like to have a variable which is made of <code>zip</code>ed lists, but only those selected. That is,</p>

<pre><code>selected = (True, True, False)
mylist1 = [1,2,4]
mylist2 = [4,5,8]
mylist3 = [3,2,7]
</code></pre>

<p>So, what I want is to get <code>mylist = zip(mylist1, mylist2)</code> if <code>selected</code> is like above. Namely, I'd like to <code>zip</code> only those lists which are marked as <code>True</code>. At the moment I have a bunch of if-else's and it looks ugly. I will need to do the same with more than three lists later on and I feel like there must be a more universal solution for it. Is there?</p>",python|list|python-2.7|tuples,"<p>I like to represent You <code>itertools.compress()</code></p>

<pre><code>lists = [mylist1, mylist2, mylist3]
result = zip(*itertools.compress(lists, selected))
</code></pre>

<blockquote>
  <p>compress make an iterator that filters elements from data returning only those that have a corresponding element in selectors that evaluates to True. Stops when either the data or selectors iterables has been exhausted.</p>
</blockquote>",6
443,19672088,Merging two dataframe using ID and asof,"<p>I have two data frame that I wish to join together where the left dataframe have information index by (date, ID) and the right dataframe has information index by (period, ID), where period is year-month.</p>

<p>I end up doing a group by ID for the left frame, iterating thru the groups, select the same group on the right frame, and then doing and asof operation for the index of the group from the left dataframe, like so:</p>

<pre><code>def merge_func(base_df, si_df):  
    df_list = list()
    by_cusip = base_df.groupby('cusip8')

    for cusip, group in by_cusip:
        si_df_by_cusip = si_df[si_df.cusip==cusip]
        if len( si_df_by_cusip[ pd.notnull(si_df_by_cusip['sif'])]) &gt; 0:
            group['sif'] = si_df_by_cusip['sif'].asof(group.index)
        else:
            group['sif'] = np.nan
        if len( si_df_by_cusip[ pd.notnull(si_df_by_cusip['si_cover'])]) &gt; 0:
            group['sir'] = si_df_by_cusip['si_cover'].asof(group.index)
        else:
            group['sir'] = np.nan
        df_list.append(group)
    return pd.concat(df_list)
</code></pre>

<p>But this function is quite slow. Does anyone have a way to make this merge function faster and more efficient?</p>

<p>You may find these links relevant to what I'm trying to accomplish: <a href=""https://stackoverflow.com/questions/12322289/kdb-like-asof-join-for-timeseries-data-in-pandas/12336039#12336039"">sample for doing asof-join</a> , <a href=""https://stackoverflow.com/questions/14614512/merging-two-tables-with-millions-of-rows-in-python/14617925#14617925"">merging tables with millions of rows</a></p>

<p>Thank you in advance for your comments and help!</p>",python|merge|group-by|pandas|time-series,"<p>You can just use <a href=""http://pandas.pydata.org/pandas-docs/version/0.19.0/whatsnew.html#whatsnew-0190-enhancements-asof-merge"" rel=""nofollow"">the ""asof join"" feature added to pandas 0.19</a>:</p>

<pre><code>pd.merge_asof(df1, df2, left_on='date', right_on='period', by='ID')
</code></pre>",2
444,19622484,Pylint error W0232: class has no __init__ method,"<p>I have the following error with pylint:</p>

<pre><code>Pylint error W0232: class has no __init__ method
</code></pre>

<p>I understand what it means. I have to create the <code>__init__</code> method.
The problem is that this class is inherited from parent class. I know that I'm able to create the <code>__init__</code> method and just use <code>super(myclass, self).__init__()</code> but is it really necessary? I have nothing to add to <code>__init__</code>. I want to know if it is a better practice to create <code>__init__</code> method in any class.</p>",python|class|pylint,"<p>As @Sean pointed out, <code>pylint</code> <a href=""http://pylint-messages.wikidot.com/messages:w0232"" rel=""nofollow""><em>should not</em></a> complain if <code>__init__()</code> is defined in a parent class. Сhances are <code>pylint</code> cannot find that class. Make sure the module defining it is actually loaded when you <a href=""http://docs.pylint.org/run.html"" rel=""nofollow"">invoke</a> <code>pylint</code> (e.g. run it on the containing package).</p>",2
445,15114828,Django testing. Status 200 and 302,"<p>How this work? what is the difference between 302 and 200? What is correctly? </p>

<pre><code>def test_thanks_page(self):
    response = self.client.get('/thanks/')
    self.failUnlessEqual(response.status_code, 302)
</code></pre>

<p>And what is difference between:</p>

<pre><code>self.failUnlessEqual(response.status_code, 302)
</code></pre>

<p>and</p>

<pre><code>self.assertEqual(response.status_code, 302)
</code></pre>",python|django|unit-testing,"<p>I believe 302 (""moved temporarily"") indicates a redirect to another location (with it's URI coming back with the response), while 200 indicates that you got the resource you asked for in the URI you requested.</p>

<p>The <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html"" rel=""nofollow"">W3 Status code definitions</a> says:</p>

<p>For 302: ""The requested resource resides temporarily under a different URI.""</p>

<p>I hope this helped.</p>",1
446,15462680,How can I create flask project using IntelliJ IDEA 12 Ultimate Edition?,"<p>I have <code>IntelliJ IDEA 12 Ultimate Edition</code> and I was watching <a href=""http://www.youtube.com/watch?v=jaFEODzG7B8"" rel=""noreferrer"">this</a> video on Youtube where they have demonstrated to create Flask using PyCharm 2.6</p>

<p>As far as I understand Python Plugin gives same features as PyCharm because they are built form same codebase.</p>

<p>How can I create a flask project with IDEA 12 Ultimate Edition?</p>",python|intellij-idea|flask,"<p>Works fine with IntelliJ IDEA Ultimate 2019.1.3, built on May 28, 2019.</p>",0
447,15462680,How can I create flask project using IntelliJ IDEA 12 Ultimate Edition?,"<p>I have <code>IntelliJ IDEA 12 Ultimate Edition</code> and I was watching <a href=""http://www.youtube.com/watch?v=jaFEODzG7B8"" rel=""noreferrer"">this</a> video on Youtube where they have demonstrated to create Flask using PyCharm 2.6</p>

<p>As far as I understand Python Plugin gives same features as PyCharm because they are built form same codebase.</p>

<p>How can I create a flask project with IDEA 12 Ultimate Edition?</p>",python|intellij-idea|flask,"<p>To clarify wmora's answer, in IntelliJ IDEA, installing the Python plugin is not 100% the same as having PyCharm, and the distinction is one that Jetbrains seems to have struggled with (e.g. usually documentation refers to the language-specific IDE and not to IDEA, and the menu-items/commands/etc. are not the same).  </p>

<p>With IDEA, if the Python plugin is installed, you can create a new project and select ""Python"" as the language.  This may show a few additional libraries and frameworks, e.g. ""Django"", ""Google App Engine (Python)"", and ""SQL Support"" (???), <strong>but notably NOT Flask</strong>.  However, the <em>next screen</em> has the option to ""Create project from template"", and when checked, you should be able to select the ""Flask Project"" template.</p>

<p>And THAT's when it fails silently (per Polyakoff's comment).  The editor doesn't even open up a window.  See the bug: <a href=""https://youtrack.jetbrains.com/issue/PY-25666"" rel=""noreferrer"">https://youtrack.jetbrains.com/issue/PY-25666</a></p>",21
448,15462680,How can I create flask project using IntelliJ IDEA 12 Ultimate Edition?,"<p>I have <code>IntelliJ IDEA 12 Ultimate Edition</code> and I was watching <a href=""http://www.youtube.com/watch?v=jaFEODzG7B8"" rel=""noreferrer"">this</a> video on Youtube where they have demonstrated to create Flask using PyCharm 2.6</p>

<p>As far as I understand Python Plugin gives same features as PyCharm because they are built form same codebase.</p>

<p>How can I create a flask project with IDEA 12 Ultimate Edition?</p>",python|intellij-idea|flask,"<p>If you have the Python plugin already installed, a ""Flask Project"" option will be available under ""Python"" when creating a new project.</p>

<p>I created a virtualenv before creating my Flask project and set it up as the project's SDK.</p>

<p>Hope it helps. </p>",1
449,14984003,PyTables dealing with data with size many times larger than size of memory,"<p>I'm trying to understand how PyTables manage data which size is greater than memory size.
Here is comment in code of PyTables (<a href=""https://github.com/PyTables/PyTables/blob/develop/tables/file.py#L498"" rel=""nofollow"">link to GitHub</a>):</p>

<pre><code># Nodes referenced by a variable are kept in `_aliveNodes`.
# When they are no longer referenced, they move themselves
# to `_deadNodes`, where they are kept until they are referenced again
# or they are preempted from it by other unreferenced nodes.
</code></pre>

<p>Also useful comments can be found inside <a href=""https://github.com/PyTables/PyTables/blob/develop/tables/file.py#L1024"" rel=""nofollow"">_getNode</a> method.<br>
It seems like PyTables have very smart IO buffering system which, as I understand, stores data referenced by user in fast RAM as ""aliveNodes"", keeps referenced before and presently unreferenced data as ""deadNodes"" for fast ""reviving"" it when needed, and reads data from disk if requested key is not present in both dead or alive categories. </p>

<p>I need some expertise about how exactly PyTables handle situations when working with data larger then available memory. My specific questions:</p>

<ol>
<li>How deadNode/aliveNode system working (common picture)?</li>
<li>What the key difference between aliveNodes/deadNodes while they both represent data stored in RAM if im right?</li>
<li>Can limit of RAM for buffering be adjusted manually? Below the comment, there is code which reads a value from        <code>params['NODE_CACHE_SLOTS']</code>. Can it be somehow specified by user? For example if I want to leave some RAM for other applications that need memory too?</li>
<li>In what situations PyTables can crash or significantly slowdown when working with big amount
of data? In my case can exceed memory by 100 times, what are common pitfalls in such situations?</li>
<li>What usage of PyTables in meaning of size, structure of data, and also manipulations with data considered as 'right' for achieving best performance? </li>
<li><a href=""http://pytables.github.com/usersguide/libref/structured_storage.html#tables.tableExtension.Row.append"" rel=""nofollow"">Docs suggests</a> use <code>.flush()</code> after each basic <code>.append()</code> cycle. How long this cycle actually can be?  Im performing a little benchmark, comparing SQLite and PyTables in how they can handle creating a huge table with key-value pairs from big CSV files. And when I use <code>.flush()</code>, less frequently in main cycle, PyTables gains huge speedup. So - is it correct, to <code>.append()</code> relatively big chunks of data, and then use <code>.flush()</code>?</li>
</ol>",python|io|hdf5|pytables,"<h1>Memory Structure</h1>
<p>Never used pytables but looking at the source code:</p>
<pre><code>class _Deadnodes(lrucacheExtension.NodeCache):
    pass
</code></pre>
<p>So it looks like the _deadnodes are implemented using an LRU cache. LRU == &quot;Least Recently Used&quot; which means that it will throw away the least used node first. the source is <a href=""https://github.com/PyTables/PyTables/blob/develop/tables/lrucacheExtension.pyx"" rel=""nofollow noreferrer"">here</a>.</p>
<pre><code>class _AliveNodes(dict):
    ...
</code></pre>
<p>Which they use as a customized dictionary of nodes that are running and represented actually in the program.</p>
<p>very simplified example (nodes are letters, numbers in the cache indicate how stale an entry is):</p>
<pre><code>memory of 4, takes 1 time step
cache with size 2, takes 5 times steps
disk with much much more, takes 50 time steps

get node A //memory,cache miss load from disk t=50
get node B // &quot;&quot; t=100
get node C // &quot;&quot; t=150
get node D // &quot;&quot; t=200
get node E // &quot;&quot; t=250
get node A //cache hit load from cache t=255
get node F //memory, cache miss load from disk t=305
get node G //memory, cache miss load from disk t=355
get node E // in memory t=356 (everything stays the same)

t=200              t=250              t=255
Memory    CACHE    Memory    CACHE    Memory    CACHE
A                  E         A0       E         B0
B                  B                  A
C                  C                  C
D                  D                  D

t=305              t=355              
Memory    CACHE    Memory    CACHE
E         B1       E         G0
A         C0       A         C1
F                  F
D                  G
</code></pre>
<p>As you know in real life these structures are huge and the time it takes to access them is in bus cycles, so 1/(clock of your pc).</p>
<p>Comparatively the time it takes to access the elements is the same. It's pretty negligible for in memory, a little more for cache, and a whole lot more for disk. Reading from disk is the longest part of the whole process. the disk and arm needs to move, etc. It is a physical process rather than an electronic process, as in it is not happening at the speed of light.</p>
<p>Here in pytables they do something similar. They have written their own cache algorithm in Cython that is a middle man between the alive nodes(memory) and the full data(disk). If there is too low of a hit ratio then it looks like the cache will be turned off, and after a certain number of cycles it will turn back on again.</p>
<p>In <a href=""https://github.com/PyTables/PyTables/blob/develop/tables/parameters.py#76"" rel=""nofollow noreferrer"">parameters.py</a> the <code>DISABLE_EVERY_CYCLE</code>, <code>ENABLE EVERY_CYCLE</code> and <code>LOWEST_HIT_RATIO</code> variables are used to define the number of cycles under LOWEST_HIT_RATIO to disable after and the number of cycles to wait to re-enable. Changing these values is discouraged.</p>
<p>The main thing that you should take from this is that if you need to do processing on a big dataset, make sure they are on the same nodes. If you can get away with it, read in a chunk, do processing on that chuck, get your results, then load another chunk. If you load chunk A, get another chunk B, then load chunk A again, this will cause the most delay. Only operate on one chunk of data at a time and keep access and writes to a minimum. Once a value is in <code>_alivenodes</code> it is quick to modify it, <code>_deadnodes</code> is a bit slower, and neither is a lot slower.</p>
<h1>NODE_CACHE_SLOTS</h1>
<p><code>params['NODE_CACHE_SLOTS']</code> defines the size of the set of dead nodes. Tracing it back to <a href=""https://github.com/PyTables/PyTables/blob/develop/tables/parameters.py#L161"" rel=""nofollow noreferrer"">parameters.py</a> it defaults to 64. It states that you can try out different values and report back. You could either change the value in the file or do:</p>
<pre><code>import parameters
parameters.NODE_CACHE_SLOTS = # something else
</code></pre>
<p>This only limits the number of nodes kept in the cache. Past that you are limited by python's heap size, to set that see <a href=""https://stackoverflow.com/questions/2308091/how-to-limit-python-heap-size"">this</a>.</p>
<h1>append/flush</h1>
<p>For <code>append</code>, <code>flush</code> assures the rows are output to the table. The more data you are moving with this the longer it will take for the data to move from the internal buffer to the data structure. It is calling a modified versions of the <a href=""http://www.hdfgroup.org/HDF5/doc/HL/RM_H5TB.html#H5TBwrite_records"" rel=""nofollow noreferrer"">H5TBwrite_records</a> function with other handling code. I'm guessing the the length of the call to that determines how long the output cycle.</p>
<p>Keep in mind this is all from the source code, and not considering any additional magic they are trying to do. I have never used pytables. In theory, it shouldn't crash, but we don't live in a theoretical world.</p>
<p>Edit:</p>
<p>Actually finding a need for pytables myself I have come across <a href=""http://www.pytables.org/moin/FAQ#Ifitisdesignedtodealwithverylargedatasets.2CthenPyTablesshouldconsumealotofmemory.2Cshouldn.27tit.3F"" rel=""nofollow noreferrer"">this question</a> in their faq that might answer some of your concerns.</p>
<p>Thank you for exposing pytables to me, if I had come across <code>.h5</code> files before researching this question I wouldn't have known what to do.</p>",2
450,14984003,PyTables dealing with data with size many times larger than size of memory,"<p>I'm trying to understand how PyTables manage data which size is greater than memory size.
Here is comment in code of PyTables (<a href=""https://github.com/PyTables/PyTables/blob/develop/tables/file.py#L498"" rel=""nofollow"">link to GitHub</a>):</p>

<pre><code># Nodes referenced by a variable are kept in `_aliveNodes`.
# When they are no longer referenced, they move themselves
# to `_deadNodes`, where they are kept until they are referenced again
# or they are preempted from it by other unreferenced nodes.
</code></pre>

<p>Also useful comments can be found inside <a href=""https://github.com/PyTables/PyTables/blob/develop/tables/file.py#L1024"" rel=""nofollow"">_getNode</a> method.<br>
It seems like PyTables have very smart IO buffering system which, as I understand, stores data referenced by user in fast RAM as ""aliveNodes"", keeps referenced before and presently unreferenced data as ""deadNodes"" for fast ""reviving"" it when needed, and reads data from disk if requested key is not present in both dead or alive categories. </p>

<p>I need some expertise about how exactly PyTables handle situations when working with data larger then available memory. My specific questions:</p>

<ol>
<li>How deadNode/aliveNode system working (common picture)?</li>
<li>What the key difference between aliveNodes/deadNodes while they both represent data stored in RAM if im right?</li>
<li>Can limit of RAM for buffering be adjusted manually? Below the comment, there is code which reads a value from        <code>params['NODE_CACHE_SLOTS']</code>. Can it be somehow specified by user? For example if I want to leave some RAM for other applications that need memory too?</li>
<li>In what situations PyTables can crash or significantly slowdown when working with big amount
of data? In my case can exceed memory by 100 times, what are common pitfalls in such situations?</li>
<li>What usage of PyTables in meaning of size, structure of data, and also manipulations with data considered as 'right' for achieving best performance? </li>
<li><a href=""http://pytables.github.com/usersguide/libref/structured_storage.html#tables.tableExtension.Row.append"" rel=""nofollow"">Docs suggests</a> use <code>.flush()</code> after each basic <code>.append()</code> cycle. How long this cycle actually can be?  Im performing a little benchmark, comparing SQLite and PyTables in how they can handle creating a huge table with key-value pairs from big CSV files. And when I use <code>.flush()</code>, less frequently in main cycle, PyTables gains huge speedup. So - is it correct, to <code>.append()</code> relatively big chunks of data, and then use <code>.flush()</code>?</li>
</ol>",python|io|hdf5|pytables,"<p>I'm also not an expert in PyTable, and Simon seems to have covered the concept of swap memory nicely, BUT if you want a concrete example of an algorithm designed to handle data too big to fit in memory, I'd recommend looking at external sort.</p>

<p>The basic idea is this: you can't fit all of your data in memory, but you need to sort it. However, you can fit <em>some</em> of the data in memory, in blocks of size k. Say there are j such blocks.</p>

<ul>
<li>Split the data into blocks of size k.</li>
<li>For each block, bring it into memory and sort it (e.g. using quicksort or whatever) then write its sorted version back to disk.</li>
</ul>

<p>Now, we have j blocks of sorted data that we want to <em>merge</em> into one long sorted piece of data. That problem sounds like mergesort! So,</p>

<ul>
<li>Bring the lowest value from each of the j sorted blocks into memory</li>
<li>Find the smallest of those j values. That's the smallest piece of data! So, write that to disk somewhere as the start of our sorted data set.</li>
<li><em>Replace</em> the newly written value with the next smallest value from its block into memory (this is the 'swapping' bit of swap memory).</li>
</ul>

<p>Now, the data in memory are the smallest j, <em>except for the one we already wrote</em> into the final sorted data set on disk. So, if we repeat that process until all data is written to the final set, it will always end up sorted.</p>

<p>So, that's just an example of an algorithm that uses memory swapping to handle data too large to fit in memory. PyTable's sort methods are probably along these lines.</p>

<p>Bonus: <a href=""https://stackoverflow.com/questions/5100252/external-sorting"">Here</a> are <a href=""http://www.youtube.com/watch?v=YjFI9CJy6x0"" rel=""nofollow noreferrer"">some</a> links <a href=""http://web.eecs.utk.edu/~bvz/bvz/classes/cs302/notes/external-sorting2.html"" rel=""nofollow noreferrer"">to</a> more explanations of external sort.</p>",0
451,14984003,PyTables dealing with data with size many times larger than size of memory,"<p>I'm trying to understand how PyTables manage data which size is greater than memory size.
Here is comment in code of PyTables (<a href=""https://github.com/PyTables/PyTables/blob/develop/tables/file.py#L498"" rel=""nofollow"">link to GitHub</a>):</p>

<pre><code># Nodes referenced by a variable are kept in `_aliveNodes`.
# When they are no longer referenced, they move themselves
# to `_deadNodes`, where they are kept until they are referenced again
# or they are preempted from it by other unreferenced nodes.
</code></pre>

<p>Also useful comments can be found inside <a href=""https://github.com/PyTables/PyTables/blob/develop/tables/file.py#L1024"" rel=""nofollow"">_getNode</a> method.<br>
It seems like PyTables have very smart IO buffering system which, as I understand, stores data referenced by user in fast RAM as ""aliveNodes"", keeps referenced before and presently unreferenced data as ""deadNodes"" for fast ""reviving"" it when needed, and reads data from disk if requested key is not present in both dead or alive categories. </p>

<p>I need some expertise about how exactly PyTables handle situations when working with data larger then available memory. My specific questions:</p>

<ol>
<li>How deadNode/aliveNode system working (common picture)?</li>
<li>What the key difference between aliveNodes/deadNodes while they both represent data stored in RAM if im right?</li>
<li>Can limit of RAM for buffering be adjusted manually? Below the comment, there is code which reads a value from        <code>params['NODE_CACHE_SLOTS']</code>. Can it be somehow specified by user? For example if I want to leave some RAM for other applications that need memory too?</li>
<li>In what situations PyTables can crash or significantly slowdown when working with big amount
of data? In my case can exceed memory by 100 times, what are common pitfalls in such situations?</li>
<li>What usage of PyTables in meaning of size, structure of data, and also manipulations with data considered as 'right' for achieving best performance? </li>
<li><a href=""http://pytables.github.com/usersguide/libref/structured_storage.html#tables.tableExtension.Row.append"" rel=""nofollow"">Docs suggests</a> use <code>.flush()</code> after each basic <code>.append()</code> cycle. How long this cycle actually can be?  Im performing a little benchmark, comparing SQLite and PyTables in how they can handle creating a huge table with key-value pairs from big CSV files. And when I use <code>.flush()</code>, less frequently in main cycle, PyTables gains huge speedup. So - is it correct, to <code>.append()</code> relatively big chunks of data, and then use <code>.flush()</code>?</li>
</ol>",python|io|hdf5|pytables,"<p>I'm not an expert in PyTable<sup>1</sup> but it most likely works like <a href=""https://serverfault.com/questions/48486/what-is-swap-memory"">swap memory</a>.</p>

<p>The <code>aliveNodes</code> live in the RAM while the <code>deadNodes</code> are probably stored on disk in hdf5 files (the binary file format used by PyTables).
Every time you need to access a piece of data, it needs to be in the RAM. So PyTable checks if it is already there (<code>aliveNodes</code>) and returns it to you if it is. Otherwise, it needs to <em>revive</em> the <code>deadNode</code> where the data lives. Since the RAM is limited, it will probably <em>kill</em> (write to disk) an unused <code>aliveNode</code> to make some room beforehand.</p>

<p>The reason for this process is of course the limited size of the RAM.
The consequence is that performances are affected every time you need to swap a node (<em>kill</em> a node and <em>revive</em> another).</p>

<p>To optimize performances, you should try to minimize swapping. For instance, if your data can be processed in parallel, you may be able to load each node only once. Other example: imagine that you need to loop over every element of a huge matrix which is split into a grid of nodes. Then you'd better avoid accessing its elements by row or by column but rather node by node.</p>

<p>Of course PyTable handles this under the hood so you don't necessary have control over what is in each node (but I encourage you to dig around this <code>NODE_CACHE_SLOTS</code> variable, at least to understand how it works). But generally it's faster to access data that is contiguous rather than scattered all around the place. As always, if time performance is an important issue for your application(s), profile your code.</p>

<hr>

<p><sup><sup>1</sup> Translation: <em>I hardly know anything about PyTables</em></sup></p>",1
452,15439055,Is there an accepted way to use API keys for authentication in Flask?,"<p>I have a small API that I'd like to add authentication to.  I'd like to be able to generate API keys for API consumers; the consumers can then use include the keys with their requests requests.</p>

<p>Is there a Flask library which does something like this?  Or is there a typical way to do it?  I did a search and I only really came upon <a href=""https://coderwall.com/p/4qickw"">this</a>, which doesn't really go very much in depth.  I'm looking for a library if there is one.</p>",python|api|flask|api-key,"<p>Here is an function that uses hashlib which has worked fairly well for me:</p>

<pre><code>def generate_hash_key():
    """"""
    @return: A hashkey for use to authenticate agains the API.
    """"""
    return base64.b64encode(hashlib.sha256(str(random.getrandbits(256))).digest(),
                            random.choice(['rA', 'aZ', 'gQ', 'hH', 'hG', 'aR', 'DD'])).rstrip('==')
</code></pre>

<p>A possible solution to implement this in the app could be applying a decorator on each route that you want to protect.</p>

<p>Example:</p>

<pre><code>def get_apiauth_object_by_key(key):
    """"""
    Query the datastorage for an API key.
    @param ip: ip address
    @return: apiauth sqlachemy object.
    """"""
    return model.APIAuth.query.filter_by(key=key).first()

def match_api_keys(key, ip):
    """"""
   Match API keys and discard ip
   @param key: API key from request
   @param ip: remote host IP to match the key.
   @return: boolean
   """"""
   if key is None or ip is None:
      return False
   api_key = get_apiauth_object_by_key(key)
   if api_key is None:
      return False
   elif api_key.ip == ""0.0.0.0"":   # 0.0.0.0 means all IPs.
      return True
   elif api_key.key == key and api_key.ip == ip:
      return True
   return False

def require_app_key(f):
   """"""
   @param f: flask function
   @return: decorator, return the wrapped function or abort json object.
   """"""

   @wraps(f)
   def decorated(*args, **kwargs):
      if match_api_keys(request.args.get('key'), request.remote_addr):
         return f(*args, **kwargs)
      else:
         with log_to_file:
            log.warning(""Unauthorized address trying to use API: "" + request.remote_addr)
         abort(401)
      return decorated
</code></pre>

<p>And then you can use the decorator as such:</p>

<pre><code>@require_app_key
def delete_cake(version, cake_id):
   """"""
   Controller for API Function that gets a cake by ID
   @param cake_id: cake id
   @return: Response and HTTP code
   """"""
</code></pre>

<p>This example uses SQLAlchemy to store keys in database (You could use SQLite).</p>

<p>You can see the implementation here: <a href=""https://github.com/haukurk/flask-restapi-recipe"" rel=""noreferrer"">https://github.com/haukurk/flask-restapi-recipe</a>.</p>",9
453,15439055,Is there an accepted way to use API keys for authentication in Flask?,"<p>I have a small API that I'd like to add authentication to.  I'd like to be able to generate API keys for API consumers; the consumers can then use include the keys with their requests requests.</p>

<p>Is there a Flask library which does something like this?  Or is there a typical way to do it?  I did a search and I only really came upon <a href=""https://coderwall.com/p/4qickw"">this</a>, which doesn't really go very much in depth.  I'm looking for a library if there is one.</p>",python|api|flask|api-key,"<p>The ""typical"" way to generate an API key is to create a UUID (usually by creating an md5 hash of some subset of user information + somewhat random information (like current time)). </p>

<p>All API keys, however, should be UUIDs. The hexadecimal hash created by md5 meets this requirement, but there are certainly other methods.</p>

<p>Once you've created a key for the user, store it in the database as part of the user information and check that their key (stored in a cookie, usually) matches what you have. The actual mechanics of this are (somewhat) described in the page you linked to.</p>",2
454,15439055,Is there an accepted way to use API keys for authentication in Flask?,"<p>I have a small API that I'd like to add authentication to.  I'd like to be able to generate API keys for API consumers; the consumers can then use include the keys with their requests requests.</p>

<p>Is there a Flask library which does something like this?  Or is there a typical way to do it?  I did a search and I only really came upon <a href=""https://coderwall.com/p/4qickw"">this</a>, which doesn't really go very much in depth.  I'm looking for a library if there is one.</p>",python|api|flask|api-key,"<p>For authentication keys, create a random value and store that value in a database. <code>random()</code> provides insufficient entropy for things like this, so use <code>os.urandom()</code>.</p>

<p>The link you posted to has a very good example of how to handle things with a decorator function. In the decorator function, check the appkey value is set in the request, verify it is valid in the database, and then return the function. If the appkey is invalid, <code>raise AuthenticationError(""Invalid appkey"")</code> and you're done.</p>

<p>The example you linked to is a bit confusing. I like the demonstration from <a href=""https://stackoverflow.com/questions/739654/understanding-python-decorators"">How to make a chain of function decorators?</a> better.</p>

<pre><code>def checkAppKey(fn):
    def inner(*args, **kwargs): #appkey should be in kwargs
        try:
            AppKey.get(appkey)
        except KeyError:
            raise AuthenticationError(""Invalid appkey"")
            #Whatever other errors can raise up such as db inaccessible
        #We were able to access that API key, so pass onward.
        #If you know nothing else will use the appkey after this, you can unset it.
        return fn(*args, **kwargs)
    return inner
</code></pre>",14
455,37885638,Test bottle app without running bottle server,"<p>I am following <a href=""http://bottlepy.org/docs/dev/recipes.html#functional-testing-bottle-applications"" rel=""nofollow"">Recipes</a> of <a href=""/questions/tagged/bottle"" class=""post-tag"" title=""show questions tagged &#39;bottle&#39;"" rel=""tag"">bottle</a> framework.</p>

<p>When I try below code</p>

<pre><code>#filename: mywebapp.py
from bottle import Bottle, run, request

app = Bottle()

@app.get('/hello')
def hello():
    return ""Hello "" + request.get_header('name')

if __name__ == '__main__':
    run(app, host='localhost', port=80)
</code></pre>

<p>Function testcase with <a href=""http://webtest.pythonpaste.org/en/latest/testapp.html"" rel=""nofollow""><code>TestApp</code></a></p>

<pre><code>#filename: test_mywebapp.py
from webtest import TestApp
import mywebapp

def test_functional_hello_world():
    app = TestApp(mywebapp.app)
    assert app.get('/hello').status_code == 200
    assert app.get('/hello', headers=dict(name='World!')).text  == 'Hello World!'
</code></pre>

<p>When I run <code>nosetests test_mywebapp.py</code> I got below error.</p>

<pre><code>nosetests test_mywebapp.py
E
======================================================================
ERROR: test_mywebapp.test_functional_hello_world
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/private/tmp/venv/lib/python2.7/site-packages/nose/case.py"", line 197, in runTest
    self.test(*self.arg)
  File ""/private/tmp/test_mywebapp.py"", line 6, in test_functional_hello_world
    assert app.get('/hello').status_code == 200
  File ""/private/tmp/venv/lib/python2.7/site-packages/webtest/app.py"", line 327, in get
    expect_errors=expect_errors)
  File ""/private/tmp/venv/lib/python2.7/site-packages/webtest/app.py"", line 636, in do_request
    self._check_status(status, res)
  File ""/private/tmp/venv/lib/python2.7/site-packages/webtest/app.py"", line 668, in _check_status
    res)
AppError: Bad response: 500 Internal Server Error (not 200 OK or 3xx redirect for http://localhost/hello)

    &lt;!DOCTYPE HTML PUBLIC ""-//IETF//DTD HTML 2.0//EN""&gt;
    &lt;html&gt;
        &lt;head&gt;
            &lt;title&gt;Error: 500 Internal Server Error&lt;/title&gt;
            &lt;style type=""text/css""&gt;
              html {background-color: #eee; font-family: sans;}
              body {background-color: #fff; border: 1px solid #ddd;
                    padding: 15px; margin: 15px;}
              pre {background-color: #eee; border: 1px solid #ddd; padding: 5px;}
            &lt;/style&gt;
        &lt;/head&gt;
        &lt;body&gt;
            &lt;h1&gt;Error: 500 Internal Server Error&lt;/h1&gt;
            &lt;p&gt;Sorry, the requested URL &lt;tt&gt;&amp;#039;http://localhost:80/hello&amp;#039;&lt;/tt&gt;
               caused an error:&lt;/p&gt;
            &lt;pre&gt;Internal Server Error&lt;/pre&gt;
        &lt;/body&gt;
    &lt;/html&gt;


----------------------------------------------------------------------
Ran 1 test in 0.008s

FAILED (errors=1)
</code></pre>

<p><a href=""http://webtest.pythonpaste.org/en/latest/#quick-start"" rel=""nofollow"">QuickStart</a> on <code>TestApp</code> mention.</p>

<blockquote>
  <p>If your WSGI application requires any configuration, you must set that
  up manually in your tests.</p>
</blockquote>

<p>How I can configure this?</p>

<p>It needs, bottle server running, is there any way to test bottle app without running server?</p>",python|paste|functional-testing|bottle|testapp,"<p>Thanks for posting the stack trace.  It clearly indicates that this is the line that is causing the 500:</p>

<pre><code>assert app.get('/hello').status_code == 200
</code></pre>

<p>Why don't you print the value of <code>app.get('/hello').status_code</code> so you can learn what's happening?</p>

<p>I'm also pretty sure that you should be checking <code>status_int</code>, not <code>status_code</code>.</p>

<pre><code>assert app.get('/hello').status_int == 200
</code></pre>",1
456,37662180,interpolate missing values 2d python,"<p>I have a 2d array(or matrix if you prefer) with some missing values represented as 
<code>NaN</code>. The missing values are typically in a strip along one axis, eg:</p>

<pre><code>1   2   3 NaN   5
2   3   4 Nan   6
3   4 Nan Nan   7
4   5 Nan Nan   8
5   6   7   8   9
</code></pre>

<p>where I would like to replace the <code>NaN</code>'s by somewhat sensible numbers. </p>

<p>I looked into delaunay triangulation, but found very little documentation. </p>

<p>I tried using <a href=""http://docs.astropy.org/en/stable/convolution/index.html"" rel=""noreferrer""><code>astropy</code>'s convolve</a> as it supports use of 2d arrays, and is quite straightforward.
The problem with this is that convolution is not interpolation, it moves all values towards the average (which could be mitigated by using a narrow kernel).</p>

<p>This question should be the natural 2-dimensional extension to <a href=""https://stackoverflow.com/questions/6518811/interpolate-nan-values-in-a-numpy-array"">this post</a>. Is there a way to interpolate over <code>NaN</code>/missing values in a 2d-array? </p>",python|numpy|interpolation,"<p>Yes you can use <a href=""http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.interpolate.griddata.html"" rel=""noreferrer""><code>scipy.interpolate.griddata</code></a> and masked array and you can choose the type of interpolation that you prefer using the argument <code>method</code> usually <code>'cubic'</code> do an excellent job:</p>
<pre><code>import numpy as np
from scipy import interpolate


#Let's create some random  data
array = np.random.random_integers(0,10,(10,10)).astype(float)
#values grater then 7 goes to np.nan
array[array&gt;7] = np.nan
</code></pre>
<p>That looks something like this using <code>plt.imshow(array,interpolation='nearest')</code>
:</p>
<p><a href=""https://i.stack.imgur.com/yrxg8.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/yrxg8.png"" alt=""enter image description here"" /></a></p>
<pre><code>x = np.arange(0, array.shape[1])
y = np.arange(0, array.shape[0])
#mask invalid values
array = np.ma.masked_invalid(array)
xx, yy = np.meshgrid(x, y)
#get only the valid values
x1 = xx[~array.mask]
y1 = yy[~array.mask]
newarr = array[~array.mask]

GD1 = interpolate.griddata((x1, y1), newarr.ravel(),
                          (xx, yy),
                             method='cubic')
</code></pre>
<p>This is the final result:</p>
<p><a href=""https://i.stack.imgur.com/Zmti2.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Zmti2.png"" alt=""enter image description here"" /></a></p>
<p>Look that if the nan values are in the edges and are surrounded by nan values thay can't be interpolated and are kept <code>nan</code>. You can change it using the <code>fill_value</code> argument.</p>
<h1>How would this work if there is a 3x3 region of NaN-values, would you get sensible data for the middle point?</h1>
<p>It depends on your kind of data, you have to perform some test. You could for instance mask on purpose some good data try different kind of interpolation e.g. cubic, linear etc. etc. with the array with the masked values and calculuate the difference between the values interpolated and the original values that you had masked before and see which method return you the minor difference.</p>
<p>You can use something like this:</p>
<pre><code>reference = array[3:6,3:6].copy()
array[3:6,3:6] = np.nan
method = ['linear', 'nearest', 'cubic']

for i in method:
    GD1 = interpolate.griddata((x1, y1), newarr.ravel(),
                              (xx, yy),
                                 method=i)
    meandifference = np.mean(np.abs(reference - GD1[3:6,3:6]))
    print ' %s interpolation difference: %s' %(i,meandifference )
</code></pre>
<p>That gives something like this:</p>
<pre><code>   linear interpolation difference: 4.88888888889
   nearest interpolation difference: 4.11111111111
   cubic interpolation difference: 5.99400137377
</code></pre>
<p>Of course this is for random numbers so it's normal that the result may vary a lot. So the best thing to do is to test on &quot;on purpose masked&quot; piece of your dataset and see what happen.</p>",23
457,37662180,interpolate missing values 2d python,"<p>I have a 2d array(or matrix if you prefer) with some missing values represented as 
<code>NaN</code>. The missing values are typically in a strip along one axis, eg:</p>

<pre><code>1   2   3 NaN   5
2   3   4 Nan   6
3   4 Nan Nan   7
4   5 Nan Nan   8
5   6   7   8   9
</code></pre>

<p>where I would like to replace the <code>NaN</code>'s by somewhat sensible numbers. </p>

<p>I looked into delaunay triangulation, but found very little documentation. </p>

<p>I tried using <a href=""http://docs.astropy.org/en/stable/convolution/index.html"" rel=""noreferrer""><code>astropy</code>'s convolve</a> as it supports use of 2d arrays, and is quite straightforward.
The problem with this is that convolution is not interpolation, it moves all values towards the average (which could be mitigated by using a narrow kernel).</p>

<p>This question should be the natural 2-dimensional extension to <a href=""https://stackoverflow.com/questions/6518811/interpolate-nan-values-in-a-numpy-array"">this post</a>. Is there a way to interpolate over <code>NaN</code>/missing values in a 2d-array? </p>",python|numpy|interpolation,"<p>I'd actually manually go through this matrix row by row, and whenever you start encountering a list of Nans, keep track of the number immediately before the Nans and immediately after, and the number of Nans you saw before going back to ordinary numbers.  Once those numbers are found, it would be possible to overwrite Nans with interpolated values yourself.   </p>",-2
458,37662180,interpolate missing values 2d python,"<p>I have a 2d array(or matrix if you prefer) with some missing values represented as 
<code>NaN</code>. The missing values are typically in a strip along one axis, eg:</p>

<pre><code>1   2   3 NaN   5
2   3   4 Nan   6
3   4 Nan Nan   7
4   5 Nan Nan   8
5   6   7   8   9
</code></pre>

<p>where I would like to replace the <code>NaN</code>'s by somewhat sensible numbers. </p>

<p>I looked into delaunay triangulation, but found very little documentation. </p>

<p>I tried using <a href=""http://docs.astropy.org/en/stable/convolution/index.html"" rel=""noreferrer""><code>astropy</code>'s convolve</a> as it supports use of 2d arrays, and is quite straightforward.
The problem with this is that convolution is not interpolation, it moves all values towards the average (which could be mitigated by using a narrow kernel).</p>

<p>This question should be the natural 2-dimensional extension to <a href=""https://stackoverflow.com/questions/6518811/interpolate-nan-values-in-a-numpy-array"">this post</a>. Is there a way to interpolate over <code>NaN</code>/missing values in a 2d-array? </p>",python|numpy|interpolation,"<p>For your convenience, here is a function implementing <a href=""https://stackoverflow.com/a/39596856/2496293"">G M's answer</a>.</p>
<pre><code>from scipy import interpolate
import numpy as np

def interpolate_missing_pixels(
        image: np.ndarray,
        mask: np.ndarray,
        method: str = 'nearest',
        fill_value: int = 0
):
    &quot;&quot;&quot;
    :param image: a 2D image
    :param mask: a 2D boolean image, True indicates missing values
    :param method: interpolation method, one of
        'nearest', 'linear', 'cubic'.
    :param fill_value: which value to use for filling up data outside the
        convex hull of known pixel values.
        Default is 0, Has no effect for 'nearest'.
    :return: the image with missing values interpolated
    &quot;&quot;&quot;
    from scipy import interpolate

    h, w = image.shape[:2]
    xx, yy = np.meshgrid(np.arange(w), np.arange(h))

    known_x = xx[~mask]
    known_y = yy[~mask]
    known_v = image[~mask]
    missing_x = xx[mask]
    missing_y = yy[mask]

    interp_values = interpolate.griddata(
        (known_x, known_y), known_v, (missing_x, missing_y),
        method=method, fill_value=fill_value
    )

    interp_image = image.copy()
    interp_image[missing_y, missing_x] = interp_values

    return interp_image
</code></pre>",2
459,37692777,"Re-write the for loop function in python, need help to understand better","<p>I'm new to python and I need  help to re-write that for loop function with indentations below</p>

<pre><code>y = [g(x,y) for x in xs for y in xs if f(x,y)]
</code></pre>

<p>full code is here</p>

<pre><code>g = lambda x,y:(x-y) 
f = lambda x,y: x&gt;y 
xs = [1,2,3,4] 
y = [g(x,y) for x in xs for y in xs if f(x,y)]
</code></pre>",python,"<pre><code>y = []
for a in xs:
    for b in xs:
        if f(a, b):
            y.append(g(a, b))
</code></pre>",1
460,26288825,Determining the physical height of a gaussian curve (python),"<p>In fitting a Gaussian to a curve, the model of my Gaussian is defined as:</p>

<pre><code>def model(position, width, height):
    return  height * scipy.stats.norm.pdf(x, position, width)
</code></pre>

<p>However, the height variable in the model is not the true height, or peak value, of the curve. For the example shown below, using a height variable of 1.0 and a width of 0.1, the peak value of the Gaussian is 4.0.</p>

<pre><code>import numpy
import pylab
import scipy.stats, scipy
import matplotlib.pyplot as plt

x = numpy.linspace(0, 1, 400)
def model(position, width, height):
    return  height * scipy.stats.norm.pdf(x, position, width)
position = 0.5
height = 1.0
width = 0.1

gauss = model(position, width, height)
plt.plot(x,gauss, '+', color='red')
show()
</code></pre>

<p>Is there some way to determine what the peak value of the Gaussian will be from the width and height variables in my model? I realize this may be more of a mathematical question than a coding question. Nonetheless, any help is appreciated!</p>

<p>EDIT: I am using this model to fit curves that need to be 3*sigma higher than the noise surrounding them. It is unclear to me how to set a lower boundary condition for the height variable that corresponds to the Gaussian model having a peak value of 3*sigma. For example, if I know 3*sigma is 0.1, how do I convert that into a height variable value to define my lower boundary condition correctly? </p>

<p>Cheers,</p>

<p>TFish13</p>",python|gaussian,"<p>The height of the gaussian at any point x is exactly scipy.stats.norm.pdf(x,position,width). If you wanted to scale the whole gaussian up to a certain value, so the peak is at a value, say 4, then try something along the lines of </p>

<pre><code>def model(position, width, height):
    return  (height / scipy.stats.norm.pdf(position,position,width)) * scipy.stats.norm.pdf(x, position, width)
</code></pre>

<p>By dividing the whole distribution by the value at the peak (which occurs at point 'position') the whole distribution is stretched vertically so that the peak has value 1. Then by multiplying by your height parameter, you'll scale the distribution so the peak has value height.</p>

<p>This is indeed a mathematical question, not a programming one, but we see many of these questions here anyway.</p>",0
461,26288825,Determining the physical height of a gaussian curve (python),"<p>In fitting a Gaussian to a curve, the model of my Gaussian is defined as:</p>

<pre><code>def model(position, width, height):
    return  height * scipy.stats.norm.pdf(x, position, width)
</code></pre>

<p>However, the height variable in the model is not the true height, or peak value, of the curve. For the example shown below, using a height variable of 1.0 and a width of 0.1, the peak value of the Gaussian is 4.0.</p>

<pre><code>import numpy
import pylab
import scipy.stats, scipy
import matplotlib.pyplot as plt

x = numpy.linspace(0, 1, 400)
def model(position, width, height):
    return  height * scipy.stats.norm.pdf(x, position, width)
position = 0.5
height = 1.0
width = 0.1

gauss = model(position, width, height)
plt.plot(x,gauss, '+', color='red')
show()
</code></pre>

<p>Is there some way to determine what the peak value of the Gaussian will be from the width and height variables in my model? I realize this may be more of a mathematical question than a coding question. Nonetheless, any help is appreciated!</p>

<p>EDIT: I am using this model to fit curves that need to be 3*sigma higher than the noise surrounding them. It is unclear to me how to set a lower boundary condition for the height variable that corresponds to the Gaussian model having a peak value of 3*sigma. For example, if I know 3*sigma is 0.1, how do I convert that into a height variable value to define my lower boundary condition correctly? </p>

<p>Cheers,</p>

<p>TFish13</p>",python|gaussian,"<p>So, it turns out that I needed to normalize the Gaussian first before multiplying it by a height variable to correctly scale it to the height of the data. As such, the correct model is:</p>

<pre><code>def model(position, width, height):
    return  height * sqrt(2*pi) * width * scipy.stats.norm.pdf(x, position, width)
</code></pre>

<p>Now the height variable in the model will match the peak height of the plotted Gaussian.</p>",2
462,26120632,sphinx remove chapter title in my pdf with latexpdf?,"<p>I generate a documentation from rst to pdf with latexpdf and sphinx.</p>

<p>How can I remove chapter title before every chapter?</p>

<pre><code>-----------

CHAPTER ONE

-----------
</code></pre>",pdf|latex|python-sphinx|restructuredtext,"<p>As noted in the <a href=""http://sphinx-doc.org/config.html"" rel=""noreferrer"">sphinx documentation</a> you can change the <code>latex_documents</code> documentclass to a howto documentclass, which will get rid of the ""Chaper"" before your section. However, this will also change formatting slightly for the whole build.</p>

<blockquote>
  <p>documentclass: Normally, one of 'manual' or 'howto' (provided by Sphinx). Other document classes can be given, but they must include the “sphinx” package in order to define Sphinx’ custom LaTeX commands. “howto” documents will not get appendices. Also, howtos will have a simpler title page.</p>
</blockquote>

<p>Just edit your <code>conf.py</code> and change <code>manual</code> to <code>howto</code>.</p>

<pre><code>latex_documents = [
  ('index', 'foo.tex', u'foo Documentation',
   u'bar', 'howto'),
]
</code></pre>",5
463,26120632,sphinx remove chapter title in my pdf with latexpdf?,"<p>I generate a documentation from rst to pdf with latexpdf and sphinx.</p>

<p>How can I remove chapter title before every chapter?</p>

<pre><code>-----------

CHAPTER ONE

-----------
</code></pre>",pdf|latex|python-sphinx|restructuredtext,"<p>As for the Chapter titles, from the <a href=""https://www.sphinx-doc.org/en/master/usage/configuration.html#latex-options"" rel=""nofollow noreferrer"">Sphinx documentation</a> and <a href=""https://www.sphinx-doc.org/en/master/latex.html"" rel=""nofollow noreferrer"">LaTeX customization</a>:</p>
<blockquote>
<p>Inclusion of the “fncychap” package (which makes fancy chapter
titles), default '\usepackage[Bjarne]{fncychap}' for English
documentation, '\usepackage[Sonny]{fncychap}' for internationalized
docs (because the “Bjarne” style uses numbers spelled out in English).
Other “fncychap” styles you can try include “Lenny”, “Glenn”, “Conny”
and “Rejne”. You can also set this to '' to disable fncychap.</p>
</blockquote>
<pre><code>latex_elements = {
    'fncychap': '\\usepackage[Conny]{fncychap}',
    # ...
}
</code></pre>
<p>Also, I was trying to search for how to remove the <strong>Title page</strong>, and a search brought me here, so I thought I'd add my answer here.</p>
<p>To remove the title page, just set the following options:</p>
<pre><code>latex_elements = {
    'maketitle': '',  # No Title Page
    # ...
}
</code></pre>",4
464,26299305,Need help on a simple quiz with random answers,"<p>This is my code, why won't it work for me? It asks the questions but misses the <code>if</code> statement that I have created.</p>

<pre><code>print(""What is your name?"")
name = input("""")

import time
time.sleep(1)

print(""Hello"", name,("",Welcome to my quiz""))

import time
time.sleep(1)  

import random
ques = ['What is 2 times 2?', 'What is 10 times 7?', 'What is 6 times 2?']
print(random.choice(ques))

# Please note that these are nested IF statements

if ques == ('What is 2 times 2?'):
     print(""What is the answer? "")
     ans = input("""")


     if ans == '4':
         print(""Correct"")

     else:
         print(""Incorrect"")

elif ques == ('What is 10 times 7?'):
    print(""What is the answer? "")
    ans = input("""")

    if ans == '70':
         print(""Correct"")

    else:
        print(""Incorrect"")

elif ques == ('What is 6 times 2?'):
     print(""What is the answer? "")
     ans = input("""")

     if ans == '12':
          print(""Correct"")

     else:
         print(""Incorrect"")

import time
time.sleep(1)

import random
ques = ['What is 55 take away 20?', 'What is 60 devided by 2?', 'What is 500 take away 200']
print(random.choice(ques))


if ques == ('What is 55 take away 20?'):
   print(""What is the answer? "")
   ans = input("""")

   if ans == '35':
       print(""Correct"")

   else:
       print(""Incorrect"")

elif ques == ('What is 60 devided by 2?'):
     print(""What is the answer? "")
     ans = input("""")

     if ans == '30':
        print(""Correct"")

   else:
        print(""Incorrect"")

elif ques == ('What is 500 take away 200'):
    print(""What is the answer? "")
    ans = input("""")

    if ans == '300':
        print(""Correct"")

    else:
        print(""Incorrect"")
</code></pre>",python,"<p>As well as the key error identified by MrHug, your code has the following problems:</p>

<ol>
<li>Enormous amounts of unnecessary repetition;</li>
<li>Incorrect use of <code>import</code>;</li>
<li>Enormous amounts of unnecessary repetition; </li>
<li>A frankly bewildering attempt at string formatting; and</li>
<li>Enormous amounts of unnecessary repetition.</li>
</ol>

<p>Note that the following code does what you are trying to do, but in a much more logical way:</p>

<pre><code># import once, at the top
import random

# use functions to reduce duplication
def ask_one(questions):
    question, answer = random.choice(questions):
    print(question)
    if input("""") == answer:
        print(""Correct"")
    else:
        print(""Incorrect"")

# use proper string formatting
print(""What is your name? "")
name = input("""")
print(""Hello {0}, welcome to my quiz"".format(name))

# store related information together
ques = [('What is 2 times 2?', '4'),
        ('What is 10 times 7?', '70'),
        ('What is 6 times 2?', '12')]

ask_one(ques)
</code></pre>

<p>You could go further by storing the minimum information (i.e. the two numbers and the operator) in the list of <code>ques</code>, then formatting the question and calculating the outputs in the code itself.</p>",1
465,26299305,Need help on a simple quiz with random answers,"<p>This is my code, why won't it work for me? It asks the questions but misses the <code>if</code> statement that I have created.</p>

<pre><code>print(""What is your name?"")
name = input("""")

import time
time.sleep(1)

print(""Hello"", name,("",Welcome to my quiz""))

import time
time.sleep(1)  

import random
ques = ['What is 2 times 2?', 'What is 10 times 7?', 'What is 6 times 2?']
print(random.choice(ques))

# Please note that these are nested IF statements

if ques == ('What is 2 times 2?'):
     print(""What is the answer? "")
     ans = input("""")


     if ans == '4':
         print(""Correct"")

     else:
         print(""Incorrect"")

elif ques == ('What is 10 times 7?'):
    print(""What is the answer? "")
    ans = input("""")

    if ans == '70':
         print(""Correct"")

    else:
        print(""Incorrect"")

elif ques == ('What is 6 times 2?'):
     print(""What is the answer? "")
     ans = input("""")

     if ans == '12':
          print(""Correct"")

     else:
         print(""Incorrect"")

import time
time.sleep(1)

import random
ques = ['What is 55 take away 20?', 'What is 60 devided by 2?', 'What is 500 take away 200']
print(random.choice(ques))


if ques == ('What is 55 take away 20?'):
   print(""What is the answer? "")
   ans = input("""")

   if ans == '35':
       print(""Correct"")

   else:
       print(""Incorrect"")

elif ques == ('What is 60 devided by 2?'):
     print(""What is the answer? "")
     ans = input("""")

     if ans == '30':
        print(""Correct"")

   else:
        print(""Incorrect"")

elif ques == ('What is 500 take away 200'):
    print(""What is the answer? "")
    ans = input("""")

    if ans == '300':
        print(""Correct"")

    else:
        print(""Incorrect"")
</code></pre>",python,"<p><code>ques</code> is at all times still equal to the full list, not to a single element of the list.
If you want use this method, I suggest doing the following:</p>

<pre><code>posedQuestion = random.choice(ques)
print(posedQuestion)
if posedQuestion == ""First question"":

elif ...
</code></pre>

<p>In addition you only need to do your imports once, so only one line saying <code>import time</code> will do ;)</p>",2
466,26289153,How to use ipdb.set_trace in a forked process,"<p>I use <code>ipdb.set_trace()</code> whenever I need to set a break point in my code. Right now, I'm trying to use it in a process that I've created using <code>multiprocessing</code>, while the code does stop, I can't type anything to continue debugging. Is there any way to get my <code>stdin</code> directed properly?</p>

<p>Ideally, I would like to imagine a new console opening everytime a forked process is stopped for debugging, however I don't think this is possible.</p>",python|multiprocessing|ipython|pdb|ipdb,"<p>Sometimes for debugging You can change your code to use <strong>multiprocessing.dummy</strong> . This way, no fork will be done, it will work with threads and be easier to debug.</p>

<p>Later on (after the bug is squashed...) you can switch back to <strong>multiprocessing</strong></p>

<p>multiprocessing.dummy - should offer the same API as multiprocessing so its an easy change...</p>",12
467,26289153,How to use ipdb.set_trace in a forked process,"<p>I use <code>ipdb.set_trace()</code> whenever I need to set a break point in my code. Right now, I'm trying to use it in a process that I've created using <code>multiprocessing</code>, while the code does stop, I can't type anything to continue debugging. Is there any way to get my <code>stdin</code> directed properly?</p>

<p>Ideally, I would like to imagine a new console opening everytime a forked process is stopped for debugging, however I don't think this is possible.</p>",python|multiprocessing|ipython|pdb|ipdb,"<p>According to <a href=""https://stackoverflow.com/questions/4716533/how-to-attach-debugger-to-a-python-subproccess"">How to attach debugger to a python subproccess?</a>, <a href=""http://winpdb.org"" rel=""nofollow noreferrer"">http://winpdb.org</a> supports <code>multiprocessing</code> debugging.</p>

<p>If you'd prefer doing more work for more flexibility, there are some interesting ideas at <a href=""https://gist.github.com/csabahenk/6497709"" rel=""nofollow noreferrer"">https://gist.github.com/csabahenk/6497709</a> (too long to include here).</p>",3
468,26433138,What is under the hood of x = 'y' 'z' in Python?,"<p>If you run <code>x = 'y' 'z'</code> in Python, you get <code>x</code> set to <code>'yz'</code>, which means that some kind of string concatenation is occurring when Python sees multiple strings next to each other.</p>

<p>But what kind of concatenation is this?
Is it actually running <code>'y' + 'z'</code> or is it running <code>''.join('y','z')</code> or something else?</p>",python|string|syntax|concatenation|python-internals,"<p>The strings are being concatenated by the python parser before anything is executed, so its not really like <code>'y' + 'z'</code> or <code>''.join('y','z')</code>, except that it has the same effect.</p>",8
469,26433138,What is under the hood of x = 'y' 'z' in Python?,"<p>If you run <code>x = 'y' 'z'</code> in Python, you get <code>x</code> set to <code>'yz'</code>, which means that some kind of string concatenation is occurring when Python sees multiple strings next to each other.</p>

<p>But what kind of concatenation is this?
Is it actually running <code>'y' + 'z'</code> or is it running <code>''.join('y','z')</code> or something else?</p>",python|string|syntax|concatenation|python-internals,"<p>The Python <em>parser</em> interprets that as one string. This is well documented in the <a href=""https://docs.python.org/2/reference/lexical_analysis.html#string-literal-concatenation"">Lexical Analysis documentation</a>:</p>

<blockquote>
  <h2>String literal concatenation</h2>
  
  <p>Multiple adjacent string literals (delimited by whitespace), possibly using different quoting conventions, are allowed, and their meaning is the same as their concatenation. Thus, <code>""hello"" 'world'</code> is equivalent to <code>""helloworld""</code>.</p>
</blockquote>

<p>The compiled Python code sees just the one string object; you can see this by asking Python to produce an AST of such strings:</p>

<pre><code>&gt;&gt;&gt; import ast
&gt;&gt;&gt; ast.dump(ast.parse(""'hello' 'world'"", mode='eval').body)
""Str(s='helloworld')""
</code></pre>

<p>In fact, it is the very act of building the AST that triggers the concatenation, as the parse tree is traversed, see the <a href=""https://hg.python.org/cpython/file/927cca0b9337/Python/ast.c#l3548""><code>parsestrplus()</code> function</a> in the AST C source.</p>

<p>The feature is specifically aimed at reducing the need for backslashes; use it to break up a string across physical lines when still within a <a href=""https://docs.python.org/2/reference/lexical_analysis.html#logical-lines""><em>logical</em> line</a>:</p>

<pre><code>print('Hello world!', 'This string is spans just one '
      'logical line but is broken across multiple physical '
      'source lines.')
</code></pre>

<p>Multiple physical lines can <a href=""https://docs.python.org/2/reference/lexical_analysis.html#implicit-line-joining"">implicitly be joined</a> into one physical line by using parentheses, square brackets or curly braces.</p>

<p>This <a href=""http://en.wikipedia.org/wiki/String_literal#String_literal_concatenation"">string concatenation feature</a> was copied from C, but <a href=""https://mail.python.org/pipermail/python-ideas/2013-May/020527.html"">Guido van Rossum is on record regretting adding it to Python</a>. That post kicked of a long and very interesting thread, with a lot of support for removing the feature altogether.</p>",58
470,24606531,A simpler way to run a function on dictionary values w/o losing the association to keys?,"<p>I'd like to run a function on all the values in a dictionary. To make things more complicated, the exact transformation each value goes through is not independent, but contingent on the transformations other values before it went through. 
Here's a simple function, defined on a list, to show what I mean:</p>

<pre><code>def new_list_generator(mylist):
    number_of_iterations = 0
    new_list  = []
    for n in mylist:
        if number_of_iterations%2 == 0:
            new_list.append(n**1.25)
            number_of_iterations += 1
        else:
            new_list.append(n**0.5)
            number_of_iterations += 1
    return new_list
</code></pre>

<p>You can see that the power we employ on each value depends on the the history - how many values were modified before it.</p>

<p>Now, that's the function defined for a list. What happens when I want to modify a dictionary's values without disassociating keys and values (that is, I don't want to simply create a list of all the values and feed that list to the function)?</p>

<p>The best solution I could think of (and make it work) was the following cumbersome solution:</p>

<p>step 1: transform the dictionary to a list of tuples. i.e. [(value1,key1), (value2,key2),...]</p>

<p>step 2: run a <strong>modified</strong> function on that list.</p>

<p>step 3: convert the list back to a dictionary with dict().</p>

<p>That is:</p>

<pre><code>some_dict = {""Graham"": 13, ""Eric"": 19, ""Terry G"": 7, ""Terry J"":11, ""John"": 15, ""Michael"": 7}

dict_to_tuples = some_dict.items()

def new_list_generator1(mylist):      # notice it's a new function
    number_of_iterations = 0
    new_list  = []
    for n in mylist:
        if number_of_iterations%2 == 0:
            new_list.append((n[0],n[1]**1.25))   # &lt;== new
            number_of_iterations += 1
        else:
            new_list.append((n[0],n[1]**0.5))    # &lt;== new
            number_of_iterations += 1
    return new_list

tups = new_list_generator1(dict_to_tuples)

print dict(tups)
</code></pre>

<p>I was wondering if there's a less cumbersome way to do that, hopefully without having to modify the original list. I googled around and couldn't find anything informative on Stackoverflow or elsewhere (where the function employed on dict values depends on history).</p>

<p>Thanks for your help.</p>",python|list|python-2.7|dictionary,"<p>As pointed out in the comments, it's quite strange to process values of a dict in terms of the iteration order, because that order is not guaranteed, so it could lead to different values every time you apply the function. That being said, if the only parameter that you take into account when processing is the iteration step, you could simply use a dict comprehension:</p>

<pre><code>{key: some_dict[key]**([1.25, 0.5][i % 2]) for i, key in enumerate(some_dict)}
</code></pre>

<p>Or more generally</p>

<pre><code>def process_value(value, iteration_step):
    # new_value = ...
    return new_value

{key: process_value(some_dict[key], i) for i, key in enumerate(some_dict)}
</code></pre>",0
471,24606531,A simpler way to run a function on dictionary values w/o losing the association to keys?,"<p>I'd like to run a function on all the values in a dictionary. To make things more complicated, the exact transformation each value goes through is not independent, but contingent on the transformations other values before it went through. 
Here's a simple function, defined on a list, to show what I mean:</p>

<pre><code>def new_list_generator(mylist):
    number_of_iterations = 0
    new_list  = []
    for n in mylist:
        if number_of_iterations%2 == 0:
            new_list.append(n**1.25)
            number_of_iterations += 1
        else:
            new_list.append(n**0.5)
            number_of_iterations += 1
    return new_list
</code></pre>

<p>You can see that the power we employ on each value depends on the the history - how many values were modified before it.</p>

<p>Now, that's the function defined for a list. What happens when I want to modify a dictionary's values without disassociating keys and values (that is, I don't want to simply create a list of all the values and feed that list to the function)?</p>

<p>The best solution I could think of (and make it work) was the following cumbersome solution:</p>

<p>step 1: transform the dictionary to a list of tuples. i.e. [(value1,key1), (value2,key2),...]</p>

<p>step 2: run a <strong>modified</strong> function on that list.</p>

<p>step 3: convert the list back to a dictionary with dict().</p>

<p>That is:</p>

<pre><code>some_dict = {""Graham"": 13, ""Eric"": 19, ""Terry G"": 7, ""Terry J"":11, ""John"": 15, ""Michael"": 7}

dict_to_tuples = some_dict.items()

def new_list_generator1(mylist):      # notice it's a new function
    number_of_iterations = 0
    new_list  = []
    for n in mylist:
        if number_of_iterations%2 == 0:
            new_list.append((n[0],n[1]**1.25))   # &lt;== new
            number_of_iterations += 1
        else:
            new_list.append((n[0],n[1]**0.5))    # &lt;== new
            number_of_iterations += 1
    return new_list

tups = new_list_generator1(dict_to_tuples)

print dict(tups)
</code></pre>

<p>I was wondering if there's a less cumbersome way to do that, hopefully without having to modify the original list. I googled around and couldn't find anything informative on Stackoverflow or elsewhere (where the function employed on dict values depends on history).</p>

<p>Thanks for your help.</p>",python|list|python-2.7|dictionary,"<p>Just loop through the keys and modify the values directly.</p>

<pre><code>some_dict = {""Graham"": 13, ""Eric"": 19, ""Terry G"": 7, ""Terry J"":11, ""John"": 15, ""Michael"": 7}


def new_list_generator1(mydict):      # notice it's a new function
    number_of_iterations = 0
    for key in mydict:
        if number_of_iterations%2 == 0:
            mydict[key] = mydict[key]**1.25
        else:
            mydict[key] = mydict[key]**0.5
        number_of_iterations += 1
    return mydict

print new_list_generator1(some_dict)
</code></pre>

<hr>

<p>As @kroolik correctly pointed out below, this can be simplified further with <code>enumerate</code> at least for the <em>current example</em>.</p>

<pre><code>def new_list_generator1(mydict):      # notice it's a new function
    for i, key in enumerate(mydict):
        if i%2 == 0: mydict[key] = mydict[key]**1.25
        else: mydict[key] = mydict[key]**0.5
    return mydict
</code></pre>",1
472,24558361,Change a text between two strings in Python with Regex,"<p>I found several similar questions, but I cannot fit my problem to any of them. I try to find and replace a string between two other strings in a text.</p>

<pre><code>reg = ""%s(.*?)%s"" % (str1,str2)
r = re.compile(reg,re.DOTALL)
result = r.sub(newstring, originaltext)
</code></pre>

<p>The problem is that the code above replace also <code>str1</code> and <code>str2</code>, whereas I want to replace only the text between them. Something obviously that I miss?</p>

<p><strong>Update:</strong></p>

<p>I simplified example:</p>

<pre><code>text = 'abcdefghijklmnopqrstuvwxyz'

str1 = 'gh'
str2 = 'op'

newstring = 'stackexchange'

reg = ""%s(.*?)%s"" % (str1,str2)
r = re.compile(reg,re.DOTALL)
result = r.sub(newstring, text)

print result
</code></pre>

<p>The result is <code>abcdefstackexchangeqrstuvwxyz</code> whereas I need <code>abcdefghstackexchangeopqrstuvwxyz</code></p>",python|regex,"<p>Use a combination of <a href=""http://www.rexegg.com/regex-disambiguation.html#lookaround"" rel=""noreferrer"">lookarounds</a> in your regular expression. </p>

<pre><code>reg = ""(?&lt;=%s).*?(?=%s)"" % (str1,str2)
</code></pre>

<p><strong>Explanation</strong>:</p>

<p>Lookarounds are zero-width assertions. They don't consume any characters on the string. </p>

<pre><code>(?&lt;=    # look behind to see if there is:
  gh    #   'gh'
)       # end of look-behind
.*?     # any character except \n (0 or more times)
(?=     # look ahead to see if there is:
  op    #   'op'
)       # end of look-ahead
</code></pre>

<p><a href=""https://eval.in/169213"" rel=""noreferrer"">Working Demo</a></p>",10
473,24743544,Get a list of lists of the sets which intersect each other in python,"<p>Given a list of sets I would like to get a list of the lists of the sets which intersect each other. Basically what I want is a list of lists s.t. for each list in the output all sets in that list have a non-empty intersection with at least another set in the same list.</p>

<p>I hope I was able to explain my problem. Hopefully the following example and the rest of the post should clarify it even more.</p>

<p>Given,</p>

<pre><code>sets = [
    set([1,3]), # A
    set([2,3,5]), # B
    set([21,22]), # C
    set([1,9]), # D
    set([5]), # E
    set([18,21]), # F
]
</code></pre>

<p>My desired output is:</p>

<pre><code>[
    [
        set([1,3]), # A, shares elements with B
        set([2,3,5]), # B, shares elements with A 
        set([1,9]), # D, shares elements with A
        set([5]), # E shares elements with B
    ],
    [
        set([21,22]), # C shares elements with F
        set([18,21]), # F shares elements with C
    ]
]
</code></pre>

<p>The order of the sets in the output does NOT matter.</p>

<p>I would like to achieve this goal with a very fast algorithm. Performance is my first requirement.</p>

<p>At the moment my solution creates a graph with as many nodes as sets in the original list. Then it creates an edge in this graph between the nodes that represents sets A and B iff these sets have a non empty intersection. Than it calculates the connected components of such a graph which gives me my expected result.</p>

<p>I am wondering if there is a faster way of doing this with an algorithm which does not involve graphs. </p>

<p>Best,
Andrea</p>",python|performance|set|intersection,"<p>I've only seen solutions that make multiple passes on <code>sets</code> (typically O(N^2)). So, out of curiosity I wanted to see if this could be done with only one pass on <code>sets</code> (ie. O(N)).</p>

<p>Using the input set from the original question, here's an example of how this
algorithm iterates through each set in the list.</p>

<pre><code>[
    set([1,3]), # A
    set([2,3,5]), # B
    set([21,22]), # C
    set([1,9]), # D
    set([5]), # E
    set([18,21]), # F
]
</code></pre>

<p>We start at Set A (<code>set([1,3])</code>) and assume it is part of a new result list L1.
We also maintain a Pointer, C1, to our <em>current</em> result list (which is L1 at the moment).
The purpose of this Pointer will be explained later:</p>

<pre><code>L1 = [set([1,3]),]
C1 = Pointer(L1)
</code></pre>

<p>For each integer in Set A, we also update our mapping M:</p>

<pre><code>{
    1: C1, # Pointer(L1)
    3: C1, # Pointer(L1)
}
</code></pre>

<p>The next item is Set B (<code>set([2,3,5])</code>) and we assume it is part of a new result
list L2.</p>

<pre><code>L2 = [set([2,3,5]),]
C2 = Pointer(L2)
</code></pre>

<p>Again, we iterate the members of this set and update our mapping M. Explicitly,
we see that <code>2</code> is not in M and we update it such that we have:</p>

<pre><code>{
    1: C1, # Pointer(L1)
    3: C1, # Pointer(L1)
    2: C2, # Pointer(L2)
}
</code></pre>

<p>However, when we see <code>3</code>, we notice that it already points to another result
list, L1. <strong>This indicates that there's an intersection</strong> and we need to do two
things:</p>

<ol>
<li>Update C2 to point to L1</li>
<li>Add Set B to L1</li>
</ol>

<p>We should end up with M looking like:</p>

<pre><code>{
    1: C1, # Pointer(L1)
    3: C1, # Pointer(L1)
    2: C2, # Pointer(L1)
}
</code></pre>

<p>And L1 should now be:</p>

<pre><code>[[set([1,3]), set([2,3,5])]
</code></pre>

<p>This is why we need the Pointer class: we can't just assign C2 to a new
Pointer() instance. If we do that, then M would look like:</p>

<pre><code>{
    1: C1, # Pointer(L1)
    3: C1, # Pointer(L1)
    2: C2, # Pointer(L2) &lt;-- this should be pointing to L1
}
</code></pre>

<p>Instead, we do somethng like:</p>

<pre><code>C2.set(L1)
</code></pre>

<p>Stepping ahead, after we've processed Set B and Set C, the state of M should
look like:</p>

<pre><code>{
    1: C1, # Pointer(L1)
    3: C1, # Pointer(L1)
    2: C2, # Pointer(L1)
    5: C2, # Pointer(L1)
    21: C3, # Pointer(L3)
    22: C3, # Pointer(L3)
}
</code></pre>

<p>And the result lists:</p>

<pre><code>[set([1,3]), set([2,3,5])] # L1
[set([21,22]), ]           # L3

[set([2,3,5]), ]           # L2 (but nothing in M points to it)
</code></pre>

<p>When we look at Set D, we again assume it's part of a new result list, L4, and
create the corresponding Pointer, C4 which points to L4. However, when we see
see that Set D contains <code>1</code> which intersects with L1, we change C4 to point
to L1 and add Set D to L1.</p>

<p>The state of M is:</p>

<pre><code>{
    1: C1, # Pointer(L1)
    3: C1, # Pointer(L1)
    2: C2, # Pointer(L1)
    5: C2, # Pointer(L1)
    21: C3, # Pointer(L3)
    22: C3, # Pointer(L3)
    9: C4, # Pointer(L1)
}
</code></pre>

<p>And L1 is now:</p>

<pre><code>[set([1,3]), set([2,3,5]), set([1,9])]
</code></pre>

<p>Stepping through all the way to the end, the state of M will look like:</p>

<pre><code>{
    1: C1, # Pointer(L1)
    3: C1, # Pointer(L1)
    2: C2, # Pointer(L1)
    5: C2, # Pointer(L1)
    21: C3, # Pointer(L3)
    22: C3, # Pointer(L3)
    9: C4, # Pointer(L1)
    18: C6, # Pointer(L3)
}
</code></pre>

<p>And the lists look like:</p>

<pre><code>[set([1,3]), set([2,3,5]), set([1,9]), set([5])] # L1
[set([21,22]), set([18, 21]) # L3
</code></pre>

<p>At this point, you can iterate the Pointers in M and find all the unique lists
that are being referenced and that will be your result.</p>

<p>In the original code, I tried to avoid this last step by maintaining the list of
unique result sets on-the-fly. But, I've removed that logic to keep the code simpler
since the performance gain probably isn't that great anyway.</p>

<hr>

<p>Here's the updated code with the fix for the bug mentioned by Andrea in the comments.</p>

<pre><code>class Pointer(object):
    """"""
    Implements a pointer to an object. The actual object can be accessed
    through self.get().
    """"""
    def __init__(self, o): self.o = o
    def __str__(self): return self.o.__str__()
    def __repr__(self): return '&lt;Pointer to %s&gt;' % id(self.o)

    # These two methods make instances hashed on self.o rather than self
    # so Pointers to the same object will be considered the same in
    # dicts, sets, etc.
    def __eq__(self, x): return x.o is self.o
    def __hash__(self): return id(self.o)

    def get(self): return self.o
    def set(self, obj): self.o = obj.o
    def id(self): return id(self.o)

def connected_sets(s):
    M = {}
    for C in s:
        # We assume C belongs to a new result list
        P = Pointer(list())
        added = False # to check if we've already added C to a result list
        for item in C:
            # There was an intersection detected, so the P points to this
            # intersecting set. Also add this C to the intersecting set.
            if item in M:
                # The two pointers point to different objects.
                if P.id() != M[item].id():
                    # If this was a regular assignment of a set to a new set, this
                    # wouldn't work since references to the old set would not be
                    # updated.
                    P.set(M[item])
                    M[item].o.append(C)
                    added = True
            # Otherwise, we can add it to P which, at this point, could point to
            # a stand-alone set or an intersecting set.
            else:
                if not added:
                    P.o.append(C)
                    added = True
                M[item] = P

    return M

if __name__ == '__main__':
    sets = [
        set([1,3]), # A
        set([2,3,5]), # B
        set([21,22]), # C
        set([1,9]), # D
        set([5]), # E
        set([18,21]), # F
    ]

    #sets = [
    #    set([1,5]), # A
    #    set([1,5]), # B
    #]

    M = connected_sets(sets)
    import pprint
    pprint.pprint(
        # create list of unique lists referenced in M
        [x.o for x in set(M.values())]
        )
</code></pre>

<p>And the output for is:</p>

<pre><code>[[set([1, 3]), set([2, 3, 5]), set([1, 9]), set([5])],
 [set([21, 22]), set([18, 21])]]
</code></pre>

<p>It seems to work for me, but I'd be curious how it performs compared to your solution. Using the <code>timeit</code> module, I've compared this to the answer above that uses <code>networkx</code> and my script is almost 3x faster on the same data set.</p>",1
474,24743544,Get a list of lists of the sets which intersect each other in python,"<p>Given a list of sets I would like to get a list of the lists of the sets which intersect each other. Basically what I want is a list of lists s.t. for each list in the output all sets in that list have a non-empty intersection with at least another set in the same list.</p>

<p>I hope I was able to explain my problem. Hopefully the following example and the rest of the post should clarify it even more.</p>

<p>Given,</p>

<pre><code>sets = [
    set([1,3]), # A
    set([2,3,5]), # B
    set([21,22]), # C
    set([1,9]), # D
    set([5]), # E
    set([18,21]), # F
]
</code></pre>

<p>My desired output is:</p>

<pre><code>[
    [
        set([1,3]), # A, shares elements with B
        set([2,3,5]), # B, shares elements with A 
        set([1,9]), # D, shares elements with A
        set([5]), # E shares elements with B
    ],
    [
        set([21,22]), # C shares elements with F
        set([18,21]), # F shares elements with C
    ]
]
</code></pre>

<p>The order of the sets in the output does NOT matter.</p>

<p>I would like to achieve this goal with a very fast algorithm. Performance is my first requirement.</p>

<p>At the moment my solution creates a graph with as many nodes as sets in the original list. Then it creates an edge in this graph between the nodes that represents sets A and B iff these sets have a non empty intersection. Than it calculates the connected components of such a graph which gives me my expected result.</p>

<p>I am wondering if there is a faster way of doing this with an algorithm which does not involve graphs. </p>

<p>Best,
Andrea</p>",python|performance|set|intersection,"<p>As @MartijnPieters rightly said, the problem calls for graphs, and <a href=""http://networkx.lanl.gov/"" rel=""nofollow"">networkx</a> would be at your rescue.</p>

<p>Salient Points</p>

<ol>
<li>Nodes of the graph should be sets</li>
<li>Edges between the graph exist iff the sets intersect </li>
<li>From the resultant graph, find all <a href=""http://networkx.lanl.gov/reference/generated/networkx.algorithms.components.connected.connected_components.html#networkx.algorithms.components.connected.connected_components"" rel=""nofollow"">connected components</a></li>
</ol>

<p><strong>Implementation</strong></p>

<pre><code>def intersecting_sets(sets):
    import networkx as nx
    G = nx.Graph()
    # Nodes of the graph should be hashable
    sets = map(frozenset, sets)
    for to_node in sets:
        for from_node in sets:
            # off-course you don't want a self loop
            # and only interested in intersecting nodes 
            if to_node != from_node and to_node &amp; from_node:
                G.add_edge(to_node, from_node)
    # and remember to convert the frozen sets to sets
    return [map(set, lst) for lst in nx.connected_components(G)]
</code></pre>

<p><strong>Output</strong></p>

<pre><code>&gt;&gt;&gt; intersecting_sets(sets)
[[set([2, 3, 5]), set([1, 3]), set([5]), set([1, 9])], [set([21, 22]), set([18, 21])]]
&gt;&gt;&gt; pprint.pprint(intersecting_sets(sets))
[[set([2, 3, 5]), set([1, 3]), set([5]), set([1, 9])],
 [set([21, 22]), set([18, 21])]]
</code></pre>",1
475,25871092,Equivalent of Ruby nil array in Python,"<p>In Ruby an empty array returns a nil if the first element is accessed:</p>

<pre><code>2.1.2 :005 &gt; arr = []
  =&gt; [] 
2.1.2 :006 &gt; arr.first
  =&gt; nil 
2.1.2 :007 &gt; arr[0]
  =&gt; nil 
</code></pre>

<p>I know Python lists are not exactly the same as Ruby arrays, but if you try the equivalent action, you get an error:</p>

<pre><code>&gt;&gt;&gt; l = []
&gt;&gt;&gt; l[0]
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
</code></pre>

<p>How can I instead of an error get a False or None value?</p>

<p>Ideally I'd like an assignment like this to resolve to None / False if the function call returns nothing, but with an inline check rather than a if block.</p>

<pre><code>tp_journal = self.pool.get('account.journal').browse(cr, uid, tp_ids, context=context)[0]
</code></pre>",python|ruby|arrays|list,"<p>There is no simple way to achieve what you want. The list operations raise an error, period.</p>

<p>However you can work around by:</p>

<ul>
<li>Accessing something else when the list is empty</li>
<li>Not using indexing</li>
</ul>

<p>In the first case you can use the fact that empty lists are false and hence <code>(expression) or [None]</code> will evaluate to <code>[None]</code> when the <code>expression</code> returns an empty list, and hence:</p>

<pre><code>((expression) or [None])[0]
</code></pre>

<p>The alternative is to avoid using indexing but using iteration and <code>next</code> to get the first element:</p>

<pre><code>next(iter(expression), None)
</code></pre>

<p>Unfortunately you must explicitly call <code>iter</code> to get a list iterator.</p>

<p>To extend these methods to any index you can use slicing instead of simple indexing:</p>

<pre><code>((expression)[index:] or [None])[0]
</code></pre>

<p>Or:</p>

<pre><code>next(islice(expression, index, None), None)
# or
next(iter(expression[index:]), None)
</code></pre>

<p>(where <code>islice</code> is <code>itertools.islice</code>).</p>

<p>This works because slicing doesn't raise errors for out-of-bounds indexes.</p>

<hr>

<p>Hoever my preferred alternative would be to use a function, if you use that often in your code:</p>

<pre><code>def get_with_default(seq, index):
    try:
        return seq[index]
    except LookupError:
        return None
</code></pre>",4
476,25871092,Equivalent of Ruby nil array in Python,"<p>In Ruby an empty array returns a nil if the first element is accessed:</p>

<pre><code>2.1.2 :005 &gt; arr = []
  =&gt; [] 
2.1.2 :006 &gt; arr.first
  =&gt; nil 
2.1.2 :007 &gt; arr[0]
  =&gt; nil 
</code></pre>

<p>I know Python lists are not exactly the same as Ruby arrays, but if you try the equivalent action, you get an error:</p>

<pre><code>&gt;&gt;&gt; l = []
&gt;&gt;&gt; l[0]
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
</code></pre>

<p>How can I instead of an error get a False or None value?</p>

<p>Ideally I'd like an assignment like this to resolve to None / False if the function call returns nothing, but with an inline check rather than a if block.</p>

<pre><code>tp_journal = self.pool.get('account.journal').browse(cr, uid, tp_ids, context=context)[0]
</code></pre>",python|ruby|arrays|list,"<p>Perhaps you could make use of the short-circuiting nature of the <code>or</code> operator.</p>

<pre><code>seq = [23,42]
print (seq or [None])[0]
#result: 23

seq = []
print (seq or [None])[0]
#result: None
</code></pre>

<p>In the above code, <code>seq or [None]</code> evaluates to <code>seq</code> if <code>seq</code> contains any elements, and it evaluates to <code>[None]</code> if <code>seq</code> is empty. Then [0] accesses the first element of whichever list is returned.</p>",1
477,25822377,Hyperlink to web page in QLabel using PySide,"<p>I am having troubles displaying a functional hyperlink to a web page in a QLabel using PySide (Python version 3.2.5). Reading the most upvoted answer from this post <a href=""https://stackoverflow.com/questions/8427446/making-qlabel-behave-like-a-hyperlink"">c++ - Making QLabel behave like a hyperlink - Stack Overflow</a>, I was under the impression that this would work:</p>

<pre><code>from PySide.QtCore import Qt
from PySide.QtGui import QApplication, QLabel

app = QApplication([])
window = QLabel()
window.setText(""&lt;a href=\""http://stackoverflow.com/\"" /&gt;Stack Overflow&lt;/a&gt;"")
window.setTextFormat(Qt.RichText)
window.setTextInteractionFlags(Qt.TextBrowserInteraction)
window.setOpenExternalLinks(True)
window.show()
app.exec_()
</code></pre>

<p>Unfortunately, the text does not show up as a link. Can anyone please point me in the right direction?</p>",python|hyperlink|pyside|qlabel,"<p>Your link are broken, Fix it should be fine;</p>

<pre><code>from PyQt4.QtGui import QApplication, QLabel

myQApplication = QApplication([])
myQLabel = QLabel()
myQLabel.setText('''&lt;a href='http://stackoverflow.com'&gt;stackoverflow&lt;/a&gt;''')
myQLabel.setOpenExternalLinks(True)
myQLabel.show()
myQApplication.exec_()
</code></pre>",4
478,25720361,how to use django-admin.py makemessages --all,"<p>I am trying to create messagefile in my django project.</p>
<p>for this, i just wrote this into my home view function:</p>
<pre><code>def startpage(request):
   # Translators: This message appears on the home page only
   output = _(&quot;Welcome to my site.&quot;)
</code></pre>
<p>and in settings.py</p>
<pre><code>from django.utils.translation import ugettext_lazy as _
LANGUAGES = [
   ('de', _('German')),
   ('en', _('English')),
   ('fr', _('French')),
   ('es', _('Spanish')),
   ('pt', _('Portuguese'))
]
</code></pre>
<p>and created <code>locale</code> directory inside my app.</p>
<p>now I am inside my app tree and giving this command:</p>
<pre><code>django-admin.py makemessages --all
</code></pre>
<p>it is spitting out this</p>
<pre><code>#!C:\workspace\newsportal\venv_np\Scripts\python.exe
# EASY-INSTALL-SCRIPT: 'django==1.6','django-admin.py'
__requires__ = 'django==1.6'
import pkg_resources
pkg_resources.run_script('django==1.6', 'django-admin.py')
</code></pre>
<p>and NOT creating messagefiles inside <code>locale</code>.</p>
<p>I tried with:</p>
<pre><code>python manage.py makemessages --all
</code></pre>
<p>but it cannot find <code>manage.py</code> because i am inside my app, not in project tree. how is it done normally?</p>",python|django,"<p>You just need to add your locale directory paths to <code>LOCALE_PATHS</code>. For example:</p>
<pre><code>LOCALE_PATHS = [
    os.path.join(BASE_DIR, &quot;locale&quot;),
    os.path.join(BASE_DIR, &quot;yourapp/locale&quot;), 
]
</code></pre>
<p>Once you have included some text to be translated in your project, just execute this command for each language you want to translate. In your case:</p>
<pre><code>django-admin.py makemessages -l de
django-admin.py makemessages -l en
django-admin.py makemessages -l fr
django-admin.py makemessages -l es
django-admin.py makemessages -l pt
</code></pre>
<p>Then translate all the texts and compile them. I recommend to use <a href=""https://github.com/mbi/django-rosetta"" rel=""nofollow noreferrer"">django-rosetta</a> for this purpose, which is a Django application that eases the translation process of your Django projects.</p>
<pre><code>django-admin.py makemessages --all
</code></pre>
<p>Everything should work now</p>",15
479,25953996,pandas time series and pickling,"<p>I am facing a very strange problem using pandas.</p>

<p>I have a panda time series, that is fine and working. I pickle it with python standard tool, but when I want to unpickle it back, pandas fail to rebuild the object, pretexting that the index is wrong.</p>

<p>Is there a problem with pickling pandas data structure? A prefered way to do it? Is there anything wrong with the way I plan to do it?</p>

<p>Here are the details:</p>

<p>I have some time series, called data, that after some processing, would like to keep as a pickle file, for reuse speedup. My time series look like this:</p>

<pre><code>sample_time
2013-06-03 21:55:40    0.553846
2013-06-03 22:13:25    0.569231
...
2013-07-09 16:55:00    0.430769
2013-07-09 16:57:45    0.430769
2013-07-09 16:59:44    0.384615
Name: fill, Length: 11550
</code></pre>

<p>I pickle the Series object like this:</p>

<pre><code>pickle.dump(data,open(""pickle_file"",""w""))
</code></pre>

<p>and then try to reload it later:</p>

<pre><code>data_back=pickle.load(open(""pickle_file"",'r'))
</code></pre>

<p>I then get the following error:</p>

<pre><code>Traceback (most recent call last):
  File ""/home/antoine/velib/code/project_tools.py"", line 197, in &lt;module&gt;
    test()  
  File ""/home/antoine/velib/code/project_tools.py"", line 172, in test
    data_back=p_l(open(""test_dump"",'r'))
  File ""/home/antoine/program/anaconda/lib/python2.7/pickle.py"", line 1378, in load
    return Unpickler(file).load()
  File ""/home/antoine/program/anaconda/lib/python2.7/pickle.py"", line 858, in load
    dispatch[key](self)
  File ""/home/antoine/program/anaconda/lib/python2.7/pickle.py"", line 1217, in load_build
    setstate(state)
  File ""/home/antoine/program/anaconda/lib/python2.7/site-packages/pandas/core/internals.py"", line 2063, in __setstate__
    placement=self.axes[0].get_indexer(items))
  File ""/home/antoine/program/anaconda/lib/python2.7/site-packages/pandas/core/index.py"", line 1259, in get_indexer
    raise InvalidIndexError('Reindexing only valid with uniquely'
pandas.core.index.InvalidIndexError: Reindexing only valid with uniquely valued Index objects
</code></pre>

<p>Pandas refuse to rebuild the Series, finding that the index might not be unique.
But my time series datetime index is guaranteed to be unique. Proof: if I build a serie from my data's index, I find no duplicate:</p>

<p>I make a new serie containing only the index of my data Series.</p>

<pre><code>data_index=pd.DataFrame(data=data.index)
data_index[""dup""]=data_index.duplicated()

data_index
              sample_time    dup
0     2013-06-03 21:55:40  False
1     2013-06-03 22:13:25  False
2     2013-06-03 22:19:21  False
...                   ...    ...
11547 2013-07-09 16:55:00  False
11548 2013-07-09 16:57:45  False
11549 2013-07-09 16:59:44  False

[11550 rows x 2 columns]
</code></pre>

<p>So for me there is no problem with the time index, it is unique.
The data time serie looks legal, as it exists at the first time. But during the process of pickling and unpickling, pandas refuses to build the time serie back.</p>

<p>Could that be a bug?</p>",python|pandas,"<p>Their was a bug present in 0.14.0, fixed in master (0.15.0), expecting release in early Oct 2014, see <a href=""https://github.com/pydata/pandas/pull/7794"" rel=""nofollow"">here</a>.</p>

<p>Essentially trying to pickle a pandas object with a non-unique index that ONLY had a single dtype (e.g. a Series or a DataFrame only composed of floats), would fail on reconstruction because of some assumptions in the reconstruction code. </p>

<p>The fix is to either use master/0.15.0. (I believe 0.14.1 works as well), or to make your pandas object have a unique index.</p>",2
480,25485326,Python replacing characters in a dictionary of strings using a dictionary,"<p>I have two dictionaries: <code>clues</code> where the key is a letter and the value is its corresponding symbol, and <code>words</code> where the key is a word made up of entirely symbols, and the value is the word with all of the symbols replaced by the correct letters.</p>

<p>For example, clues may look like this:</p>

<pre><code>clues = {'!':'A', '2':'B', '^':'C'}
</code></pre>

<p>And words like this:</p>

<pre><code>words = {'!2^':'ABC', '^12':'CAB'}
</code></pre>

<p>I need to loop through each character of each key in <code>words</code> and replace any character that corresponds to any key in the <code>clues</code> dictionary.</p>",python|dictionary,"<p>Try this:</p>

<pre><code>#!/usr/bin/python
#-*- coding:utf-8 -*-

clues = {'!':'A', '2':'B', '^':'C'}

d = ['!2^', '^!2']

words = {}

for i in d:
    words[i]=''
    for x in i:
        words[i] += clues[x]

print words        
</code></pre>

<p>Don't forget to confirm it as an answer if it helps you. Thanks!</p>",0
481,25485326,Python replacing characters in a dictionary of strings using a dictionary,"<p>I have two dictionaries: <code>clues</code> where the key is a letter and the value is its corresponding symbol, and <code>words</code> where the key is a word made up of entirely symbols, and the value is the word with all of the symbols replaced by the correct letters.</p>

<p>For example, clues may look like this:</p>

<pre><code>clues = {'!':'A', '2':'B', '^':'C'}
</code></pre>

<p>And words like this:</p>

<pre><code>words = {'!2^':'ABC', '^12':'CAB'}
</code></pre>

<p>I need to loop through each character of each key in <code>words</code> and replace any character that corresponds to any key in the <code>clues</code> dictionary.</p>",python|dictionary,"<p>What about:</p>

<pre><code>clues = {'!':'A', '2':'B', '^':'C'}
words = {'!2^':'ABC', '^12':'CAB'}

result = { """".join([clues.get(c,c) for c in k]):v for k,v in words.items() }

from pprint import pprint
pprint(result)
</code></pre>

<p>Producing:</p>

<pre><code>{'ABC': 'ABC', 'C1B': 'CAB'}
</code></pre>",0
482,29825174,python list not showing full elements,"<p>I'm inserting images into Decaf, and want to extract features from 6,7,8th layers. 6th and 7th are supposed to be 4096-dimensions, and 8th is supposed to be 1000.</p>

<p>I'm assuming that the generated output functions like a list, and want to record each element in a separate text file as follows:</p>

<pre><code>def intoDecaf(image):
    img = misc.imread(image)
    fname = str(image)
    fname = fname.replace('.jpg','')
    print fname
    scores = net.classify(img,center_only=True)
    feat6 = net.feature('fc6_cudanet_out')
    feat7 = net.feature('fc7_cudanet_out')
    feat8 = net.feature('fc8_cudanet_out')

    f6name = fname+'-f6.txt'
    f7name = fname+'-f7.txt'
    f8name = fname+'-f8.txt'

    f6 = open(f6name,'w')
    f7 = open(f7name,'w')
    f8 = open(f8name,'w')

    for f in feat6:
        f6.write(str(f))
        f6.write('\t')
   # and the same for f7 and f8
</code></pre>

<p>The f8 file correctly has 1000 files, but f6 and f7 text files have something like the following:</p>

<pre><code>[ -1.63451958  -8.0507412   -1.09678674 ...,  11.38702393   1.99127924
   4.76321936]  
</code></pre>

<p>The dots in the middle are literally like that. What happend to all the numbers? Do those dots signify something? some kind of abridgement?
Is this something that has to do with decaf or python?</p>",python|list|neural-network|caffe,"<p>It looks like <code>feat6</code> is a NumPy array.
If so, instead of </p>

<pre><code>f6name = fname+'-f6.txt'
f6 = open(f6name,'w')
for f in feat6:
    f6.write(str(f))
    f6.write('\t')
f6.close()
</code></pre>

<p>use</p>

<pre><code>import numpy as np

f6name = fname+'-f6.txt'
np.savetxt(f6name, feat6, delimiter='\t')
</code></pre>

<p>This won't include the brackets (<code>[</code> and <code>]</code>), but that is usually more desireable as it makes parsing the data easier.</p>

<hr>

<p>The <code>str</code> representation of NumPy arrays includes ellipses when the number of elements in the array exceed <code>threshold</code> which by default NumPy sets to 1000. You can change this by <a href=""http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html"" rel=""nofollow"">setting <code>threshold</code> to some higher number</a>: </p>

<pre><code>import numpy as np
np.set_printoptions(threshold=10**6)
</code></pre>

<p>With this change, <code>str(f)</code> would return a stringified version of <code>f</code> without ellipses as long as <code>f.size</code> is less than 10**6.</p>

<p>While this explains why you are seeing ellipses, I don't recommend using <code>np.set_printoptions</code> here since <code>np.savetxt</code> solves your problem more simply.</p>",1
483,29654042,Assign values to next digits,"<p>I need to assign a values to the next digits. Code looks like below:</p>

<pre><code>def numerujPoziomy():
    for i in range(0, liczbaPoziomow, 1):
        var = i + 1
        rootValue = 1
        y = rootValue
        print 'Level', var, 'value', y
</code></pre>

<p>Each next level has to be a half smaller than previous. Root has value 1, next level has value 0.5, next level has value o.25 etc. I don't know how to do this.</p>

<p>Result of my code:</p>

<pre><code>Level 1 value 1
Level 2 value 1
Level 3 value 1
Level 4 value 1
Level 5 value 1
Level 6 value 1
</code></pre>

<p>But i need that result:</p>

<pre><code>Level 1 value 1
Level 2 value 0.5
Level 3 value 0.25
Level 4 value 0.125
Level 5 value 0.0625
Level 6 value 0.03125
</code></pre>",python|list|python-2.7|loops|for-loop,"<p>An easy way to do this is this:</p>

<pre><code>def numerujPoziomy():
    rootValue = 1.0
    for i in range(0, liczbaPoziomow, 1):
        var = i + 1
        y = rootValue / 2
        rootValue = y
        print 'Level', var, 'value', y
</code></pre>",-2
484,29654042,Assign values to next digits,"<p>I need to assign a values to the next digits. Code looks like below:</p>

<pre><code>def numerujPoziomy():
    for i in range(0, liczbaPoziomow, 1):
        var = i + 1
        rootValue = 1
        y = rootValue
        print 'Level', var, 'value', y
</code></pre>

<p>Each next level has to be a half smaller than previous. Root has value 1, next level has value 0.5, next level has value o.25 etc. I don't know how to do this.</p>

<p>Result of my code:</p>

<pre><code>Level 1 value 1
Level 2 value 1
Level 3 value 1
Level 4 value 1
Level 5 value 1
Level 6 value 1
</code></pre>

<p>But i need that result:</p>

<pre><code>Level 1 value 1
Level 2 value 0.5
Level 3 value 0.25
Level 4 value 0.125
Level 5 value 0.0625
Level 6 value 0.03125
</code></pre>",python|list|python-2.7|loops|for-loop,"<p>You use the inverse of <code>2**i</code>:</p>

<pre><code>def numerujPoziomy():
    for i in range(0, liczbaPoziomow, 1):
        print 'Level', i+1, 'value', 1./2**i
</code></pre>

<p>Note that in python 2.x it is <strong>very</strong> important that you have <code>1./2**i</code>, rather than <code>1/2**i</code>, because the latter will only return an integer, not a float like you want.  This problem is avoided in Python 3, or by using <code>from __future__ import division</code> at the beginning of your file.</p>",1
485,29654042,Assign values to next digits,"<p>I need to assign a values to the next digits. Code looks like below:</p>

<pre><code>def numerujPoziomy():
    for i in range(0, liczbaPoziomow, 1):
        var = i + 1
        rootValue = 1
        y = rootValue
        print 'Level', var, 'value', y
</code></pre>

<p>Each next level has to be a half smaller than previous. Root has value 1, next level has value 0.5, next level has value o.25 etc. I don't know how to do this.</p>

<p>Result of my code:</p>

<pre><code>Level 1 value 1
Level 2 value 1
Level 3 value 1
Level 4 value 1
Level 5 value 1
Level 6 value 1
</code></pre>

<p>But i need that result:</p>

<pre><code>Level 1 value 1
Level 2 value 0.5
Level 3 value 0.25
Level 4 value 0.125
Level 5 value 0.0625
Level 6 value 0.03125
</code></pre>",python|list|python-2.7|loops|for-loop,"<p>You can raise 1/2 to the ith power.</p>

<pre><code>liczbaPoziomow = 5

def numerujPoziomy():
    for i in range(0, liczbaPoziomow):
        print 'Level', i + 1, 'value',  0.5 ** i

numerujPoziomy()
&gt;&gt;&gt; Level 1 value 1.0
&gt;&gt;&gt; Level 2 value 0.5
&gt;&gt;&gt; Level 3 value 0.25
&gt;&gt;&gt; Level 4 value 0.125
&gt;&gt;&gt; Level 5 value 0.0625
</code></pre>",1
486,29796483,Is there a service that can use google api to monitor changes in google spreadsheet?,"<p>I am very new to JavaScript and Google app script. I want to monitor changes in a sheet. And if there is an edit, I want a script function to run. Triggers are not an option here to use because they have small quota limit. So I can not use onEdit or time driven triggers to call my function. I need some service to use Google API to monitor changes in google sheet and then trigger the function. Is it possible? Can someone please help me with this? 
Thank You :)</p>",javascript|google-apps-script|google-api|google-api-python-client,<p>Here is a way to do it without triggers/onEdit and without polling the spreadsheet api. Beware this is hacky but it has the advantage of not using apps script quotas or spreadsheet api quotas to detect changes<br>1) in the spreadsheet enable email notifications whenever the spreadsheet changes.<br>2) using gmail filters send those notification emails to a label.<br>3) using the gmail api (has larger quotas) look for that email by finding emails with That label.<br>note that this does avoid quota issues with spreadsheets but i really think its much better to just use the regular triggers/onEdit/onChange and just live with the 1minute delay. Quotas will not be exhausted if you simply detect change and call urlfetch.</p>,1
487,2935754,All minimum spanning trees implementation,"<p>I've been looking for an implementation (I'm using <a href=""http://networkx.lanl.gov/"" rel=""noreferrer"">networkx</a> library.) that will find all the minimum spanning trees (MST) of an undirected weighted graph.</p>

<p>I can only find implementations for Kruskal's Algorithm and Prim's Algorithm both of which will only return a single MST.</p>

<p>I've seen papers that address this problem (such as <a href=""http://fano.ics.uci.edu/cites/Publication/Epp-TR-95-50.html"" rel=""noreferrer"">Representing all minimum spanning trees with applications to counting and generation</a>) but my head tends to explode someway through trying to think how to translate it to code.</p>

<p>In fact i've not been able to find an implementation in any language!</p>",python|algorithm|language-agnostic|graph-theory|minimum-spanning-tree,"<p>Ronald Rivest has a nice implementation in Python, <a href=""http://people.csail.mit.edu/rivest/mst.py"" rel=""nofollow"">mst.py</a></p>",0
488,2935754,All minimum spanning trees implementation,"<p>I've been looking for an implementation (I'm using <a href=""http://networkx.lanl.gov/"" rel=""noreferrer"">networkx</a> library.) that will find all the minimum spanning trees (MST) of an undirected weighted graph.</p>

<p>I can only find implementations for Kruskal's Algorithm and Prim's Algorithm both of which will only return a single MST.</p>

<p>I've seen papers that address this problem (such as <a href=""http://fano.ics.uci.edu/cites/Publication/Epp-TR-95-50.html"" rel=""noreferrer"">Representing all minimum spanning trees with applications to counting and generation</a>) but my head tends to explode someway through trying to think how to translate it to code.</p>

<p>In fact i've not been able to find an implementation in any language!</p>",python|algorithm|language-agnostic|graph-theory|minimum-spanning-tree,"<p>You can find an idea in the work of <a href=""http://www.scielo.br/pdf/pope/v25n2/25707.pdf"" rel=""nofollow"">Sorensen and Janssens (2005)</a>.</p>

<p>The idea is to generate the STs in the increasing order, and as soon as you get the bigger value of ST stop the enumeration.</p>",0
489,2935754,All minimum spanning trees implementation,"<p>I've been looking for an implementation (I'm using <a href=""http://networkx.lanl.gov/"" rel=""noreferrer"">networkx</a> library.) that will find all the minimum spanning trees (MST) of an undirected weighted graph.</p>

<p>I can only find implementations for Kruskal's Algorithm and Prim's Algorithm both of which will only return a single MST.</p>

<p>I've seen papers that address this problem (such as <a href=""http://fano.ics.uci.edu/cites/Publication/Epp-TR-95-50.html"" rel=""noreferrer"">Representing all minimum spanning trees with applications to counting and generation</a>) but my head tends to explode someway through trying to think how to translate it to code.</p>

<p>In fact i've not been able to find an implementation in any language!</p>",python|algorithm|language-agnostic|graph-theory|minimum-spanning-tree,"<p>I don't know if this is <strong>the</strong> solution, but it's <strong>a</strong> solution (it's the graph version of a brute force, I would say):  </p>

<ol>
<li>Find the MST of the graph using kruskal's or prim's algorithm. This should be O(E log V).</li>
<li>Generate all spanning trees. This can be done in <code>O(Elog(V) + V + n) for n = number of spanning trees</code>, as I understand from 2 minutes's worth of google, can possibly be improved.</li>
<li>Filter the list generated in step #2 by the tree's weight being equal to the MST's weight. This should be O(n) for n as the number of trees generated in step #2.</li>
</ol>

<p>Note: Do this lazily! Generating all possible trees and then filtering the results will take O(V^2) memory, and polynomial space requirements are evil - Generate a tree, examine it's weight, if it's an MST add it to a result list, if not - discard it.<br>
Overall time complexity: <code>O(Elog(V) + V + n) for G(V,E) with n spanning trees</code></p>",10
490,2768188,Iterating over key and value of defaultdict dictionaries,"<p>The following works as expected:</p>

<pre><code>d = [(1,2), (3,4)]
for k,v in d:
  print ""%s - %s"" % (str(k), str(v))
</code></pre>

<p>But this fails:</p>

<pre><code>d = collections.defaultdict(int)
d[1] = 2
d[3] = 4
for k,v in d:
  print ""%s - %s"" % (str(k), str(v))
</code></pre>

<p>With:</p>

<pre><code>Traceback (most recent call last):  
 File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;  
TypeError: 'int' object is not iterable 
</code></pre>

<p>Why? How can i fix it?</p>",python|dictionary|iterator,"<p>If you want to iterate over individual item on an individual collection:</p>

<pre><code>from collections import defaultdict

for k, values in d.items():
    for value in values:
       print(f'{k} - {value}')
</code></pre>",3
491,2768188,Iterating over key and value of defaultdict dictionaries,"<p>The following works as expected:</p>

<pre><code>d = [(1,2), (3,4)]
for k,v in d:
  print ""%s - %s"" % (str(k), str(v))
</code></pre>

<p>But this fails:</p>

<pre><code>d = collections.defaultdict(int)
d[1] = 2
d[3] = 4
for k,v in d:
  print ""%s - %s"" % (str(k), str(v))
</code></pre>

<p>With:</p>

<pre><code>Traceback (most recent call last):  
 File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;  
TypeError: 'int' object is not iterable 
</code></pre>

<p>Why? How can i fix it?</p>",python|dictionary|iterator,"<p>if you are using Python 3.6</p>

<pre><code>from collections import defaultdict

for k, v in d.items():
    print(f'{k} - {v}')
</code></pre>",24
492,2768188,Iterating over key and value of defaultdict dictionaries,"<p>The following works as expected:</p>

<pre><code>d = [(1,2), (3,4)]
for k,v in d:
  print ""%s - %s"" % (str(k), str(v))
</code></pre>

<p>But this fails:</p>

<pre><code>d = collections.defaultdict(int)
d[1] = 2
d[3] = 4
for k,v in d:
  print ""%s - %s"" % (str(k), str(v))
</code></pre>

<p>With:</p>

<pre><code>Traceback (most recent call last):  
 File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;  
TypeError: 'int' object is not iterable 
</code></pre>

<p>Why? How can i fix it?</p>",python|dictionary|iterator,"<p>you need to iterate over <code>dict.iteritems()</code>:</p>

<pre><code>for k,v in d.iteritems():               # will become d.items() in py3k
  print ""%s - %s"" % (str(k), str(v))
</code></pre>

<p>Update: in py3 V3.6+</p>

<pre><code>for k,v in d.items():
  print (f""{k} - {v}"")
</code></pre>",92
493,2488651,Trouble with this Python newbie exercise. Using Lists and finding if two adjacent elements are the same,"<p>Here's what I got:</p>

<pre><code># D. Given a list of numbers, return a list where
# all adjacent == elements have been reduced to a single element,
# so [1, 2, 2, 3] returns [1, 2, 3]. You may create a new list or
# modify the passed in list.
def remove_adjacent(nums):
  for number in nums:
    numberHolder = number

  # +++your code here+++
  return
</code></pre>

<p>I'm kind of stuck here. What can I do?</p>",python|list,<p>Compare the current number with the previous number. If it's not the same then append it to a new list. Then save it so that the next loop can use it.</p>,0
494,2488651,Trouble with this Python newbie exercise. Using Lists and finding if two adjacent elements are the same,"<p>Here's what I got:</p>

<pre><code># D. Given a list of numbers, return a list where
# all adjacent == elements have been reduced to a single element,
# so [1, 2, 2, 3] returns [1, 2, 3]. You may create a new list or
# modify the passed in list.
def remove_adjacent(nums):
  for number in nums:
    numberHolder = number

  # +++your code here+++
  return
</code></pre>

<p>I'm kind of stuck here. What can I do?</p>",python|list,"<p>This is another solution based on filter(). It's not just for adyacent and equal elements but for equal elements:</p>

<pre><code>def remove_repeated_items(collection):
   uniques = []
   def not_already_added(item):
      if item in uniques:
         return False
      else:
         uniques.append(item)
         return True
   return filter(not_already_added, collection)
</code></pre>

<p>And then:</p>

<pre><code>repeated = [1,2,2,3,3]
print remove_repeated_items(repeated)
</code></pre>",0
495,2488651,Trouble with this Python newbie exercise. Using Lists and finding if two adjacent elements are the same,"<p>Here's what I got:</p>

<pre><code># D. Given a list of numbers, return a list where
# all adjacent == elements have been reduced to a single element,
# so [1, 2, 2, 3] returns [1, 2, 3]. You may create a new list or
# modify the passed in list.
def remove_adjacent(nums):
  for number in nums:
    numberHolder = number

  # +++your code here+++
  return
</code></pre>

<p>I'm kind of stuck here. What can I do?</p>",python|list,"<p>try this:</p>

<pre><code>def remove_adjacent(nums):
  removed_list = []
  numberHolder = None
  for number in nums:
    if number != numberHolder:
       removed_list.append(number)
       numberHolder = number
  return removed_list
</code></pre>",1
496,2488651,Trouble with this Python newbie exercise. Using Lists and finding if two adjacent elements are the same,"<p>Here's what I got:</p>

<pre><code># D. Given a list of numbers, return a list where
# all adjacent == elements have been reduced to a single element,
# so [1, 2, 2, 3] returns [1, 2, 3]. You may create a new list or
# modify the passed in list.
def remove_adjacent(nums):
  for number in nums:
    numberHolder = number

  # +++your code here+++
  return
</code></pre>

<p>I'm kind of stuck here. What can I do?</p>",python|list,"<pre><code>&gt;&gt;&gt; import itertools
&gt;&gt;&gt; [i[0] for i in itertools.groupby([1,2,2,3,3,3,2,2])]
[1, 2, 3, 2]
</code></pre>

<p>Or:</p>

<pre><code>&gt;&gt;&gt; def f(l):
...     r = []
...     last = None
...     for i in l:
...         if i != last:
...             r.append(i)
...             last = i
...     return r        
... 
&gt;&gt;&gt; f([1,2,2,3,3,3,4,4,2,2])
[1, 2, 3, 4, 2]
</code></pre>",5
497,2363602,returning out of for-loop,"<p>I'm pretty new at python and I was wondering if this:</p>

<pre><code>def func(self, foo):
    for foo in self.list:
        if foo.boolfunc(): return True
    return False
</code></pre>

<p>is good practice.</p>

<p>Can I return out of a loop like the above or should i use a while-loop, like so?</p>

<pre><code>def func(self, foo):  
    found = false
    while(not found &amp; i &lt; len(self.list)):
        found = foo.boolfunc()
        ++i
    return found
</code></pre>

<p>My java-professor warns us never to use breaks in our loops, but this technically isn't a break and it's more concise, so... yeah</p>

<p>thanks</p>",python|for-loop|while-loop,"<p>""Breaking out of a loop"" can easily devolve to bad practice because it conceals the terminating condition of the loop.</p>

<p>If your <code>if</code> statement is of moderate complexity, then it can become unclear what post-condition the loop establishes.</p>

<p>If your exit condition is <strong>obvious</strong>, then an early exit is a common syntactic optimization. </p>

<p>If your exit condition is <strong>not obvious</strong>, then a convoluted, nested, hard-to-follow set of <code>if</code> statements is doing you more harm than good. </p>

<p>Indeed, <a href=""https://stackoverflow.com/questions/2356573/python-try-except-function-always-returns-false"">this SO question</a> shows that the presence of a simple <code>try</code> block can lead to conditions so baffling that a clearly incorrect piece of code was produced and could not easily be debugged.</p>

<p>Generally, all ""early-exit"" things (the <code>break</code> statement, in particular) lead to problems creating a formal proof.  (The <code>else</code> statement has similar problems.)</p>

<p>If you develop your program by reasoning out the statements required to create the necessary post-condition, you'll never need <code>break</code> or an early <code>return</code> because you can't easily create these statements using formal methods.</p>

<p>Also, note that any advice to avoid <code>break</code> or <code>else</code> will lead to hate mail and downvoting.  For inexplicable reasons, looking closely at some programming constructs is a bad thing. </p>

<p><a href=""https://stackoverflow.com/questions/865741/else-considered-harmful-in-python"">&quot;else&quot; considered harmful in Python?</a></p>

<p>If the exit condition of a loop with a <code>break</code> (or early <code>return</code>) is not <strong>obvious</strong>, you need to rework things to make it <strong>obvious</strong>.</p>

<p>In this example, they're <strong>obvious</strong>, so there's no issue with the specific example as presented.</p>",-2
498,2363602,returning out of for-loop,"<p>I'm pretty new at python and I was wondering if this:</p>

<pre><code>def func(self, foo):
    for foo in self.list:
        if foo.boolfunc(): return True
    return False
</code></pre>

<p>is good practice.</p>

<p>Can I return out of a loop like the above or should i use a while-loop, like so?</p>

<pre><code>def func(self, foo):  
    found = false
    while(not found &amp; i &lt; len(self.list)):
        found = foo.boolfunc()
        ++i
    return found
</code></pre>

<p>My java-professor warns us never to use breaks in our loops, but this technically isn't a break and it's more concise, so... yeah</p>

<p>thanks</p>",python|for-loop|while-loop,"<p>It is good practice.</p>

<blockquote>
  <p>My java-professor warns us never to use breaks in our loops</p>
</blockquote>

<p>Why is that? “never” is a strong word in computer science and should never (…) be used.<sup>1)</sup></p>

<hr>

<p><sup>1)</sup> Except for “goto” … we all have our pet peeves. ;-)</p>",2
499,2363602,returning out of for-loop,"<p>I'm pretty new at python and I was wondering if this:</p>

<pre><code>def func(self, foo):
    for foo in self.list:
        if foo.boolfunc(): return True
    return False
</code></pre>

<p>is good practice.</p>

<p>Can I return out of a loop like the above or should i use a while-loop, like so?</p>

<pre><code>def func(self, foo):  
    found = false
    while(not found &amp; i &lt; len(self.list)):
        found = foo.boolfunc()
        ++i
    return found
</code></pre>

<p>My java-professor warns us never to use breaks in our loops, but this technically isn't a break and it's more concise, so... yeah</p>

<p>thanks</p>",python|for-loop|while-loop,"<p>Your professor is advocating a practice called ""Single point of Return"", which basically states that any block of code should only have one point of exit. Breaks in loops are somewhat distinct from this, but usually lumped together.</p>

<p>It's a controversial opinion, to say the least, and certainly not as hard and fast a rule as ""never use goto"". It's probably worth doing it his way - you can appease him and also see the benefit of both approaches, but most people probably aren't too strict on single point of return if violating it makes their code more readable.</p>",6
500,2363602,returning out of for-loop,"<p>I'm pretty new at python and I was wondering if this:</p>

<pre><code>def func(self, foo):
    for foo in self.list:
        if foo.boolfunc(): return True
    return False
</code></pre>

<p>is good practice.</p>

<p>Can I return out of a loop like the above or should i use a while-loop, like so?</p>

<pre><code>def func(self, foo):  
    found = false
    while(not found &amp; i &lt; len(self.list)):
        found = foo.boolfunc()
        ++i
    return found
</code></pre>

<p>My java-professor warns us never to use breaks in our loops, but this technically isn't a break and it's more concise, so... yeah</p>

<p>thanks</p>",python|for-loop|while-loop,"<p>It should be mentioned that in Python, <a href=""http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops"" rel=""noreferrer"">for loops can have an else clause</a>. The else clause is only executed when the loop terminates through exhaustion of the list.</p>

<p>So you could write:</p>

<pre><code>def func(self):
    for foo in self.list:
        if foo.boolfunc():
            return True
    else:
        return False
</code></pre>",9
501,2363602,returning out of for-loop,"<p>I'm pretty new at python and I was wondering if this:</p>

<pre><code>def func(self, foo):
    for foo in self.list:
        if foo.boolfunc(): return True
    return False
</code></pre>

<p>is good practice.</p>

<p>Can I return out of a loop like the above or should i use a while-loop, like so?</p>

<pre><code>def func(self, foo):  
    found = false
    while(not found &amp; i &lt; len(self.list)):
        found = foo.boolfunc()
        ++i
    return found
</code></pre>

<p>My java-professor warns us never to use breaks in our loops, but this technically isn't a break and it's more concise, so... yeah</p>

<p>thanks</p>",python|for-loop|while-loop,"<p>""Early exit"" is a perfectly Pythonic style (when warranted: gnibbler's answer correctly points out that for your specific use case there's a built-in [[in Python 2.5 and better]] that's preferable) and often helps realize the Pythonic goal of ""flat is better than nested"".  And <code>for</code> is usually the right way to do looping in Python, at application-level: if there's any complicated loop logic (as might warrant a <code>while</code>), it's often better to push it down to an auxiliary generator anyway.</p>

<p>Advantages sometimes claimed for the alternative ""single point of exit"" include the existence of a single ""exit bottleneck"" at which clean-up can be performed.  But since exceptions are always possible, you don't <strong>know</strong> that your single <code>return</code> is a unique exit bottleneck, even if you have it: the proper way to ensure good cleanup is, instead, the <code>with</code> statement (in 2.6, or 2.5 with an ""import from the future""; for older versions of Python, the clunkier but still useful <code>try</code>/<code>finally</code> instead).</p>

<p>Knuth's article ""Structured Programming With Goto Statements"" <a href=""http://pplab.snu.ac.kr/courses/adv_pl05/papers/p261-knuth.pdf"" rel=""nofollow noreferrer"">(pdf)</a> -- an incredible, visionary article from 1974 by the man that many consider a living legend of computer science, both theoretical and practical -- is well worth reading.  Anybody who doubts the article's applicability to Python should consider the following short quote from it:</p>

<blockquote>
  <p>devices like indentation, rather than
  delimiters, might become feasible for
  expressing local structure in the
  source language.</p>
</blockquote>

<p><strong>twenty years</strong> before Python 1.0 was published, Knuth <em>already</em> foresaw the key syntax aspect that was to become such a hallmark of Python (and, independently, <a href=""http://en.wikibooks.org/wiki/Haskell/Indentation"" rel=""nofollow noreferrer"">Haskell</a>, released a bit earlier than Python -- from personal discussion with Knuth, Peyton Jones, and van Rossum, I can attest they all claim that these three inventions of ""indentation for grouping"" were entirely independent from each other, just a case of ""great minds think alike"" -- or, in Charles Fort's words, ""it was just steam engine time"";-).</p>

<p>Formal proofs of code including early exit are of course not a jot harder than for equivalent code with single point of exit, if nothing else because the famous proof by Corrado Böhm and Giuseppe Jacopini shows how to perform a mechanical transformation from any flowchart to one containing only sequence, selection and repetition (but of course the transformed program -- just like any other program trying to avoid the early-exit style -- is prone to having more nesting than needed, and extra boolean ""status"" variable, which interfere with readability, directness, and efficiency -- making early-exit much superior in languages that support it well).</p>",5
502,2363602,returning out of for-loop,"<p>I'm pretty new at python and I was wondering if this:</p>

<pre><code>def func(self, foo):
    for foo in self.list:
        if foo.boolfunc(): return True
    return False
</code></pre>

<p>is good practice.</p>

<p>Can I return out of a loop like the above or should i use a while-loop, like so?</p>

<pre><code>def func(self, foo):  
    found = false
    while(not found &amp; i &lt; len(self.list)):
        found = foo.boolfunc()
        ++i
    return found
</code></pre>

<p>My java-professor warns us never to use breaks in our loops, but this technically isn't a break and it's more concise, so... yeah</p>

<p>thanks</p>",python|for-loop|while-loop,"<p>There's nothing wrong with your example, but it's better to write</p>

<pre><code>def func(self, foo):
    return any(foo.boolfunc() for foo in self.list)
</code></pre>",14
503,15755500,Pygame Multithreading,"<p>I have a multiplayer game that runs on pygame. I am running the game/client/server in separate threads and have a simple echo server. Each time a player broadcasts a message, every other player will get it. The problem I am experiencing is pygame has a while(true) loop that redraws the screen every 10 milliseconds. This loop causes the game world to not get updated since it cannot do anything outside the loop. I tried using a queue so that in the while loop, it can dequeue and process the commands however that doesnt seem to work (q.put() places nothing in the queue).</p>

<p>Any help appreciated! Thanks</p>

<p>Here is a snippet of the architecture:</p>

<pre><code>class Client(Thread, Observer):
    #waits for notifications from ClientSocket
    #starts the game loop
    #enqueue commands in the Game

class ClientSocket(Thread, Observable):
    #observes the socket and notifies the Client

class Server(Thread):
    #simply broadcasts commands to ClientSocket(s)

class Game(Thread):
    def __init__(self):
        self.q = queue.Queue()

    while True:
        #delay 10 ms
        #redraw
        #see if u need to process queue
</code></pre>",python|multithreading|pygame|multiplayer,"<p>I suggest you to read carefully Queue docs <a href=""http://docs.python.org/2/library/queue.html"" rel=""nofollow"">http://docs.python.org/2/library/queue.html</a> and threading docs <a href=""http://docs.python.org/2/library/threading.html"" rel=""nofollow"">http://docs.python.org/2/library/threading.html</a>. Your decision to use <code>while True:</code> does not look very well. Please read about locks/semaphores/mutex/events and check these simple examples <a href=""http://www.tutorialspoint.com/python/python_multithreading.htm"" rel=""nofollow"">http://www.tutorialspoint.com/python/python_multithreading.htm</a> and I am sure that you will be able to create better multithreading architecture.</p>",-3
504,15909433,Having trouble detirming out to convert raw RFID data to usable string,"<p>I have this <a href=""http://www.parallax.com/Portals/0/Downloads/docs/prod/audiovis/28140-28340-RFIDreader-v2.2.pdf"" rel=""nofollow"">http://www.parallax.com/Portals/0/Downloads/docs/prod/audiovis/28140-28340-RFIDreader-v2.2.pdf</a> RFID reader connected to a raspberry pi. I have tried to get the ID using Java and Python. I am able to get output from both but cannot decipher what the data is and now to convert it into the actual ID. </p>

<p>Java code: <a href=""http://stephenjam.es/wp/wp-content/uploads/java/RFIDReaderBasic.java"" rel=""nofollow"">http://stephenjam.es/wp/wp-content/uploads/java/RFIDReaderBasic.java</a></p>

<p>Java Output: 
0xc2 0xbd 0xc3 0x99 0xc2 0xae 0xc3 0xb6 0x76 0xc3 0x96 0x56 0x45 0xc2 0x8b 0x6b 0x56 0x00 </p>

<p>I think this is hex but I can't tell. </p>

<p>Python Code:</p>

<pre><code>#!/usr/bin/env python
import serial
import time
ser = serial.Serial('/dev/ttyUSB0', 2400, timeout=1)
while True:
    string = ser.read(12)
    if len(string) == 0:
        print ""Please insert a tag""
        continue
    else:
        print string
</code></pre>

<p>Python Output:
?ٮ?v?VE?kV</p>

<p>I would rather use python, but am willing to use the java code I got from that website as well. My biggest question is where to start, am I converting Hex to ascii, hex to decimal or what?</p>",python|hex|rfid,<p>May be the baud_rate is wrong. That's why it is printing garbage. Check the default baud_rate of your RFID reader. May be it's 4800 or 9600. </p>,0
505,15924353,gevent + redis-py: SystemError: NULL result without error in PyObject_Call,"<p>I am using redis-py with redish together with gevent and I have my own class EventBot which inherits from Greenlet.</p>

<p>In the <code>__init__</code> method of this class I am initialising connection to redis using</p>

<pre class=""lang-py prettyprint-override""><code>self._redis = Client(serializer=serialization.JSON(), **self.REDIS_CONFIG)
</code></pre>

<p>Sometimes when I try to run the script, it throws <code>SystemError: NULL result without error in PyObject_Call</code> but sometimes it starts normally. I also tried moving the redis initialization to the <code>_run()</code> method, but it didn't helped.</p>

<p>This is the simplified class I am using:</p>

<pre class=""lang-py prettyprint-override""><code>from gevent import monkey, Greenlet
monkey.patch_all()

from sleekxmpp import ClientXMPP
from redish import serialization
from redish.client import Client


class EventBot(ClientXMPP, Greenlet):
    REDIS_CONFIG = {
        'host': 'localhost',
        'port': 6379,
        'db': """"
    }

    def __init__(self, jid, password, redis_config=None):
        ClientXMPP.__init__(self, jid, password)
        Greenlet.__init__(self)

        # Redis init
        if redis_config is not None:
            self.REDIS_CONFIG.update(redis_config)
        self._redis = Client(serializer=serialization.JSON(), **self.REDIS_CONFIG)

        QUESTIONS_KEY = __name__ + '_questions'
        try:
            self._questions = self._redis[QUESTIONS_KEY]
        except KeyError:
            self._questions = self._redis[QUESTIONS_KEY] = {}

    ## Class simplified for better readability ##

    def _run(self):
        self.connect()
        self.process(block=False)
</code></pre>

<p>Here is the complete traceback:</p>

<pre><code>Traceback (most recent call last):
  File ""start.py"", line 15, in &lt;module&gt;
    bot = EventBot('marie@xxx.com', 'XXXpasswordXXX')
  File ""/tmp/sandbox/gmarie/gmarie/marie/eventbot.py"", line 41, in __init__
    self._questions = self._redis[QUESTIONS_KEY]
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redish/client.py"", line 196, in __getitem__
    value = self.api.get(name)
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/client.py"", line 551, in get
    return self.execute_command('GET', name)
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/client.py"", line 360, in execute_command
    connection.send_command(*args)
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py"", line 301, in send_command
    self.send_packed_command(self.pack_command(*args))
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py"", line 283, in send_packed_command
    self.connect()
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py"", line 228, in connect
    sock = self._connect()
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py"", line 240, in _connect
    sock.connect((self.host, self.port))
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/gevent/socket.py"", line 376, in connect
    wait_readwrite(sock.fileno(), event=self._rw_event)
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/gevent/socket.py"", line 215, in wait_readwrite
    switch_result = get_hub().switch()
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/gevent/hub.py"", line 164, in switch
    return greenlet.switch(self)
SystemError: NULL result without error in PyObject_Call
Exception KeyError: KeyError(21246672,) in &lt;module 'threading' from '/usr/lib64/python2.7/threading.py'&gt; ignored
</code></pre>

<p>Any help would be greatly appreciated.</p>

<hr>

<p><strong>EDIT:</strong></p>

<p>Problem seems to be fixed when using <code>gevent</code> and <code>greenlet</code> system packages (<code>python2-gevent</code> and <code>python2-greenlet</code> in Arch Linux), but according to their PKGBUILD no additional patching is done there. (<a href=""https://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/python2-gevent"" rel=""nofollow"">gevent</a>, <a href=""https://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/python2-greenlet"" rel=""nofollow"">greenlet</a>) Can someone explain what is wrong with installing using pip?</p>",python|python-2.7|redis|gevent,"<p>According to <a href=""https://github.com/python-greenlet/greenlet/issues/28#issuecomment-16496238%20*the%20GitHub%20issue*"" rel=""nofollow noreferrer"">the GitHub issue</a> on this topic, you can also use <code>CFLAGS=""-O2 -fno-tree-dominator-opts""</code> to get regular compiler optimizations but no segfaults.</p>",0
506,15924353,gevent + redis-py: SystemError: NULL result without error in PyObject_Call,"<p>I am using redis-py with redish together with gevent and I have my own class EventBot which inherits from Greenlet.</p>

<p>In the <code>__init__</code> method of this class I am initialising connection to redis using</p>

<pre class=""lang-py prettyprint-override""><code>self._redis = Client(serializer=serialization.JSON(), **self.REDIS_CONFIG)
</code></pre>

<p>Sometimes when I try to run the script, it throws <code>SystemError: NULL result without error in PyObject_Call</code> but sometimes it starts normally. I also tried moving the redis initialization to the <code>_run()</code> method, but it didn't helped.</p>

<p>This is the simplified class I am using:</p>

<pre class=""lang-py prettyprint-override""><code>from gevent import monkey, Greenlet
monkey.patch_all()

from sleekxmpp import ClientXMPP
from redish import serialization
from redish.client import Client


class EventBot(ClientXMPP, Greenlet):
    REDIS_CONFIG = {
        'host': 'localhost',
        'port': 6379,
        'db': """"
    }

    def __init__(self, jid, password, redis_config=None):
        ClientXMPP.__init__(self, jid, password)
        Greenlet.__init__(self)

        # Redis init
        if redis_config is not None:
            self.REDIS_CONFIG.update(redis_config)
        self._redis = Client(serializer=serialization.JSON(), **self.REDIS_CONFIG)

        QUESTIONS_KEY = __name__ + '_questions'
        try:
            self._questions = self._redis[QUESTIONS_KEY]
        except KeyError:
            self._questions = self._redis[QUESTIONS_KEY] = {}

    ## Class simplified for better readability ##

    def _run(self):
        self.connect()
        self.process(block=False)
</code></pre>

<p>Here is the complete traceback:</p>

<pre><code>Traceback (most recent call last):
  File ""start.py"", line 15, in &lt;module&gt;
    bot = EventBot('marie@xxx.com', 'XXXpasswordXXX')
  File ""/tmp/sandbox/gmarie/gmarie/marie/eventbot.py"", line 41, in __init__
    self._questions = self._redis[QUESTIONS_KEY]
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redish/client.py"", line 196, in __getitem__
    value = self.api.get(name)
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/client.py"", line 551, in get
    return self.execute_command('GET', name)
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/client.py"", line 360, in execute_command
    connection.send_command(*args)
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py"", line 301, in send_command
    self.send_packed_command(self.pack_command(*args))
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py"", line 283, in send_packed_command
    self.connect()
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py"", line 228, in connect
    sock = self._connect()
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py"", line 240, in _connect
    sock.connect((self.host, self.port))
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/gevent/socket.py"", line 376, in connect
    wait_readwrite(sock.fileno(), event=self._rw_event)
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/gevent/socket.py"", line 215, in wait_readwrite
    switch_result = get_hub().switch()
  File ""/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/gevent/hub.py"", line 164, in switch
    return greenlet.switch(self)
SystemError: NULL result without error in PyObject_Call
Exception KeyError: KeyError(21246672,) in &lt;module 'threading' from '/usr/lib64/python2.7/threading.py'&gt; ignored
</code></pre>

<p>Any help would be greatly appreciated.</p>

<hr>

<p><strong>EDIT:</strong></p>

<p>Problem seems to be fixed when using <code>gevent</code> and <code>greenlet</code> system packages (<code>python2-gevent</code> and <code>python2-greenlet</code> in Arch Linux), but according to their PKGBUILD no additional patching is done there. (<a href=""https://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/python2-gevent"" rel=""nofollow"">gevent</a>, <a href=""https://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/python2-greenlet"" rel=""nofollow"">greenlet</a>) Can someone explain what is wrong with installing using pip?</p>",python|python-2.7|redis|gevent,"<p>There seems to be a problem with <code>greenlet==0.4.0</code> when using <code>GCC 4.8</code>.</p>

<p>If you don't have older gcc or another compiler available, you can override the problem by using <code>CFLAGS=""-O0"" pip install greenlet==0.4.0</code> or by editing greenlet's <code>setup.py</code> and tweaking <code>os.environ[""CFLAGS""]</code>.</p>

<p>Other solution may be to download and use the binary <code>greenlet.so</code></p>",6
507,15626175,DISTINCT ON in django,"<p>How would I do the following query:</p>

<pre><code>OrderNotes.objects.filter(item=item).distinct('shared_note')
</code></pre>

<p>Basically, I need to get all <code>OrderNotes</code> items, distinct on <code>shared_note</code>. When I try and do this I get:</p>

<pre><code>    raise NotImplementedError('DISTINCT ON fields is not supported by this database backend')

NotImplementedError: DISTINCT ON fields is not supported by this database backend
</code></pre>

<p>I am using mysql and cannot change the db here. What would be the workaround in django?</p>",python|mysql|django,"<p>This is the best I came up with:</p>

<pre><code>&gt;&gt;&gt; items, item_ids = [], []
&gt;&gt;&gt; for item in OrderNotes.objects.filter(shared_note=219):
...     if item.shared_note not in item_ids:
...         items.append(item)
...         item_ids.append(item.shared_note)
</code></pre>",7
508,15626175,DISTINCT ON in django,"<p>How would I do the following query:</p>

<pre><code>OrderNotes.objects.filter(item=item).distinct('shared_note')
</code></pre>

<p>Basically, I need to get all <code>OrderNotes</code> items, distinct on <code>shared_note</code>. When I try and do this I get:</p>

<pre><code>    raise NotImplementedError('DISTINCT ON fields is not supported by this database backend')

NotImplementedError: DISTINCT ON fields is not supported by this database backend
</code></pre>

<p>I am using mysql and cannot change the db here. What would be the workaround in django?</p>",python|mysql|django,"<pre><code>OrderNotes.objects.filter(item=item).values_list('shared_note', flat=True).distinct()
</code></pre>",73
509,31862528,Python appending after updating the line to a file,"<p>I have a text file with content:</p>

<pre><code>pb333u$Paul Barron   $20001:24001:26001:28001$30001:34001:36001:38001$40001:44001:46001:48001::

pk7319$Patrick Val      $20002:24002:26002:28002$30002:34002:36002:38002$40002:44002:46002:48002::

pb348u$Victor Ataler$20003:24003:26003:28003$30003:34003:36003:38003$40003:44003:46003:48003::
</code></pre>

<p>What I want is to append another line to the file, such as:</p>

<pre><code>th3674$Tom Harry$20004:24004:26004:28004$30004:34004:36004:38004$40004:44004:46004:48004::
</code></pre>

<p>Basically, with a new id and name; and each number incremented by 1.</p>

<p>I wrote this python program to achieve the above:</p>

<pre><code>def parse_file1():
   id_dict = {'at_id':'th3674','full_name':'Tom Harry'}
   f=open('ports.dat','a+')
   lines = f.readlines()
   if lines:
       last = lines[-1]
       last = last.replace(last.split('$')[0],id_dict['at_id'])
       last = last.replace(last.split('$')[1],id_dict['full_name'])
       split_colon(last)
       f.write('\n')
       f.write(last)

def split_colon(line):
    for i in range(2,5): 
        key = line.split('$')[i]
        for j in range(4):
            v = key.split(':')[j]
            line = line.replace(v, str(int(v) + 00001))

if __name__=='__main__':
    parse_file1()
</code></pre>

<p>The output I am getting is:</p>

<pre><code>pb333u$Paul Barron   $20001:24001:26001:28001$30001:34001:36001:38001$40001:44001:46001:48001::

pk7319$Patrick Val      $20002:24002:26002:28002$30002:34002:36002:38002$40002:44002:46002:48002::

pb348u$Victor Ataler$20003:24003:26003:28003$30003:34003:36003:38003$40003:44003:46003:48003::

th3674$Tom Harry$20003:24003:26003:28003$30003:34003:36003:38003$40003:44003:46003:48003::
</code></pre>

<p>I am not able to increment the numbers in the last line by 1. Also, is there a better way to achieve the above? I feel my program is a bit too un-generic.</p>",python|python-2.7,"<p>The issue is that strings are immutable , and in your <code>split_colon()</code> function, when you do - </p>

<pre><code>line = line.replace(v, str(int(v) + 00001))
</code></pre>

<p>This does not change the actual <code>last</code> string in your <code>parse_file1()</code> function. You need to return the changed <code>line</code> back, and set it back to <code>last</code> variable, before writing it out to file. Example -</p>

<pre><code>def parse_file1():
   id_dict = {'at_id':'th3674','full_name':'Tom Harry'}
   f=open('ports.dat','a+')
   lines = f.readlines()
   if lines:
       last = lines[-1]
       last = last.replace(last.split('$')[0],id_dict['at_id'])
       last = last.replace(last.split('$')[1],id_dict['full_name'])
       last = split_colon(last)
       f.write('\n')
       f.write(last)

def split_colon(line):
    for i in range(2,5): 
        key = line.split('$')[i]
        for j in range(4):
            v = key.split(':')[j]
            line = line.replace(v, str(int(v) + 1))
    return line

if __name__=='__main__':
    parse_file1()
</code></pre>

<p>Also, just add <code>1</code> to it, no need to define the number as - <code>00001</code> (In Python 2.x , when you start a number with 0 , it becomes an octal literal , though that does not affect your program).</p>",3
510,32078419,Calling different functions in an easier way,"<p>I am fairly new to programming, and at the moment am creating a program with many different functions. At the moment, the user has to type in a command, such as 'time', or 'help', without the function brackets. I would like it to stay that way. </p>

<p>But my code for this is very inefficient:</p>

<pre><code>x=input()
if x=='time':
    time()
elif x=='date':
    date()
</code></pre>

<p>At the moment it seems short, but I plan to have many functions. Is there a way to make a loop which does all of this?</p>",python|loops|for-loop,"<p>Keep all the functions in a list, and traverse through list using for loop.</p>

<p>In your example:</p>

<pre><code>def time():
      print ""this is time function""
def date():
      print ""this is date function""
list1 = [date, time]
x = raw_input()
for foo in list1:
  if foo.__name__ == x:
       foo()
</code></pre>

<p>Output:</p>

<pre><code>$ python new1.txt 
date
this is date function
$ python new1.txt 
time
this is time function
</code></pre>",2
511,31929963,Django - When button is clicked I want to change the dictionary content,"<p>On my html page I have a button, and a number being displayed.  I want the number to increase by 1 every time the button is pressed.  This is the code that I have so far, but for some it doesn't work.     </p>

<pre><code># In mypage.html
&lt;form method='get' action='#'&gt;
    &lt;input type=""submit"" value=""add"" name=""add""/&gt;
&lt;/form&gt;
&lt;h1&gt;{{ p }}&lt;/h1&gt;

# In the views.py file
p = 1
def mypage(request):
    global p
    my_dictionary = {
        ""p"" : p,
    }
    if request.GET.get('add'):
        p = p+1
        my_dictionary = {
            ""p"" : p,
        }
    return render(request, ""mypage.html"", my_dictionary)
</code></pre>",python|html|django|button|dictionary,"<p>The p value needs to be kept track of across requests.</p>

<p>2 possibilities are</p>

<ul>
<li>resend the data every request</li>
<li>store the data in a session and just make increment /decrement requests</li>
</ul>

<p>Should the variable be shared between all users? Or just the current user?</p>",0
512,31929963,Django - When button is clicked I want to change the dictionary content,"<p>On my html page I have a button, and a number being displayed.  I want the number to increase by 1 every time the button is pressed.  This is the code that I have so far, but for some it doesn't work.     </p>

<pre><code># In mypage.html
&lt;form method='get' action='#'&gt;
    &lt;input type=""submit"" value=""add"" name=""add""/&gt;
&lt;/form&gt;
&lt;h1&gt;{{ p }}&lt;/h1&gt;

# In the views.py file
p = 1
def mypage(request):
    global p
    my_dictionary = {
        ""p"" : p,
    }
    if request.GET.get('add'):
        p = p+1
        my_dictionary = {
            ""p"" : p,
        }
    return render(request, ""mypage.html"", my_dictionary)
</code></pre>",python|html|django|button|dictionary,"<p>On every request a new instance of the python script is run which would result in your global variable not being retained.  You should store the count in a database and recall the value on every request.  There are options other than a database but the basic idea of needing some sort of persistent storage still exists.</p>

<p>Alternatively, you can have the requester keep track of the count and provide the current count in the request.  You would then add one to the value provided in the request.  This would require some additional code on the front end to maintain the count, and even then, if the user closes the browser the count will be reset.</p>

<p>As dm03514 pointed out, you can can also use sessions like so:</p>

<pre><code>if 'p' in request.session:    
   request.session['p'] = request.session['p'] + 1
else:
   request.session['p'] = 1
</code></pre>",2
513,31929963,Django - When button is clicked I want to change the dictionary content,"<p>On my html page I have a button, and a number being displayed.  I want the number to increase by 1 every time the button is pressed.  This is the code that I have so far, but for some it doesn't work.     </p>

<pre><code># In mypage.html
&lt;form method='get' action='#'&gt;
    &lt;input type=""submit"" value=""add"" name=""add""/&gt;
&lt;/form&gt;
&lt;h1&gt;{{ p }}&lt;/h1&gt;

# In the views.py file
p = 1
def mypage(request):
    global p
    my_dictionary = {
        ""p"" : p,
    }
    if request.GET.get('add'):
        p = p+1
        my_dictionary = {
            ""p"" : p,
        }
    return render(request, ""mypage.html"", my_dictionary)
</code></pre>",python|html|django|button|dictionary,"<p>It should work if there is a single instance of django running (although it is not the recommended approach like other's have suggested).
It didn't appear to work is because you used <code>action='#'</code>, and the browser refused to resubmit the form when your URL already ends with <code>#</code>. Instead you can use the following template:</p>

<pre><code>&lt;form method='get' action='.'&gt;
    &lt;input type=""submit"" value=""add"" name=""add""/&gt;
&lt;/form&gt;
&lt;h1&gt;{{ p }}&lt;/h1&gt;
</code></pre>",0
514,32149626,How to insert Billion of data to Redis efficiently?,"<p>I have around 2 billion key-value pairs and I want to load them into Redis efficiently. I am currently using Python and used Pipe as documented by the <a href=""https://redis-py.readthedocs.io/en/latest/#redis.Redis.pipeline"" rel=""noreferrer"">redis-py</a>. How can I speed the following approach up?</p>

<pre><code>import redis

def load(pdt_dict):
    """"""
    Load data into redis.

    Parameters
    ----------
    pdt_dict : Dict[str, str]
        To be stored in Redis
    """"""
    redIs = redis.Redis()
    pipe = redIs.pipeline()
    for key in pdt_dict.keys():
        pipe.hmset(self.seller + "":"" + str(key), pdt_dict[key])
    pipe.execute()
</code></pre>",python|redis|redis-py,"<p>A few points regarding the question and sample code.</p>

<ol>
<li><p>Pipelining isn't a silver bullet - you need to understand what it does before you use it. What pipelining does is batch several operations that are sent as bulk, as is their response from the server. What you gain is that the network round trip time for each operation is replaced by that of the batch. But infinitely-sized batches are a real drain on resource - you need to keep their size small enough to be effective. As a rule of thumb I usually try to aim to 60KB per pipeline and since every data is different, so does the number of actual operations in a pipeline. Assuming that your key and its value are ~1KB, you need to call <code>pipeline.execute()</code> every 60 operations or so.</p></li>
<li><p>Unless I grossly misunderstand, this code shouldn't run. You're using <code>HMSET</code> as if it is <code>SET</code>, so you're basically missing the field->value mapping of Hashes. Hashs (<code>HMSET</code>) and Strings (<code>SET</code>) are different data types and should therefore be used accordingly.</p></li>
<li><p>It appears as if this one little loop is in charge of the entire ""Billion of data"" - if that is the case, not only would your server running the code be swapping like crazy unless it has a lot of RAM to hold the dictionary, it would also be very ineffective (regardless Python's speed). You need to parallelize the data insertion by running multiple instances of this process.</p></li>
<li><p>Are you connecting to Redis remotely? If so, the network may be limiting your performance.</p></li>
<li><p>Consider your Redis' settings - perhaps these can be tweaked/tuned for better performance for this task, assuming that it is indeed a bottleneck.</p></li>
</ol>",18
515,32149626,How to insert Billion of data to Redis efficiently?,"<p>I have around 2 billion key-value pairs and I want to load them into Redis efficiently. I am currently using Python and used Pipe as documented by the <a href=""https://redis-py.readthedocs.io/en/latest/#redis.Redis.pipeline"" rel=""noreferrer"">redis-py</a>. How can I speed the following approach up?</p>

<pre><code>import redis

def load(pdt_dict):
    """"""
    Load data into redis.

    Parameters
    ----------
    pdt_dict : Dict[str, str]
        To be stored in Redis
    """"""
    redIs = redis.Redis()
    pipe = redIs.pipeline()
    for key in pdt_dict.keys():
        pipe.hmset(self.seller + "":"" + str(key), pdt_dict[key])
    pipe.execute()
</code></pre>",python|redis|redis-py,"<p>To feed large volumes of data to Redis consider using the redis mass insertion feature described <a href=""https://redis.io/topics/mass-insert"" rel=""nofollow noreferrer"">here</a>. </p>

<p>For this to work you'll need to have access to redis-cli.</p>",0
516,32149626,How to insert Billion of data to Redis efficiently?,"<p>I have around 2 billion key-value pairs and I want to load them into Redis efficiently. I am currently using Python and used Pipe as documented by the <a href=""https://redis-py.readthedocs.io/en/latest/#redis.Redis.pipeline"" rel=""noreferrer"">redis-py</a>. How can I speed the following approach up?</p>

<pre><code>import redis

def load(pdt_dict):
    """"""
    Load data into redis.

    Parameters
    ----------
    pdt_dict : Dict[str, str]
        To be stored in Redis
    """"""
    redIs = redis.Redis()
    pipe = redIs.pipeline()
    for key in pdt_dict.keys():
        pipe.hmset(self.seller + "":"" + str(key), pdt_dict[key])
    pipe.execute()
</code></pre>",python|redis|redis-py,"<p>Another consideration, setting <code>transaction=False</code> in your pipeline construction can help provide performance increase if the following conditions apply (from <a href=""https://redislabs.com/ebook/part-2-core-concepts/chapter-4-keeping-data-safe-and-ensuring-performance/4-5-non-transactional-pipelines/"" rel=""nofollow noreferrer"">Redis Labs</a>):</p>

<blockquote>
  <p>For situations where we want to send more than one command to Redis,
  the result of one command doesn’t affect the input to another, and we
  don’t need them all to execute transactionally, passing False to the
  pipeline() method can further improve overall Redis performance.</p>
</blockquote>",1
517,32149626,How to insert Billion of data to Redis efficiently?,"<p>I have around 2 billion key-value pairs and I want to load them into Redis efficiently. I am currently using Python and used Pipe as documented by the <a href=""https://redis-py.readthedocs.io/en/latest/#redis.Redis.pipeline"" rel=""noreferrer"">redis-py</a>. How can I speed the following approach up?</p>

<pre><code>import redis

def load(pdt_dict):
    """"""
    Load data into redis.

    Parameters
    ----------
    pdt_dict : Dict[str, str]
        To be stored in Redis
    """"""
    redIs = redis.Redis()
    pipe = redIs.pipeline()
    for key in pdt_dict.keys():
        pipe.hmset(self.seller + "":"" + str(key), pdt_dict[key])
    pipe.execute()
</code></pre>",python|redis|redis-py,"<p>I hope you've installed hiredis python package next to redis python package too. See <a href=""https://github.com/andymccurdy/redis-py#parsers"" rel=""nofollow"">https://github.com/andymccurdy/redis-py#parsers</a> It should give you a performance boost too.</p>

<p>What did <code>self.seller</code> do? Maybe this is a bottleneck?</p>

<p>As @Itamar said, try to execute the pipeline periodically</p>

<pre><code>def load(pdtDict):
    redIs = redis.Redis()
    pipe = redIs.pipeline()
    n = 1
    for key in pdtDict.keys():
        pipe.hmset(self.seller+"":""+str(key),pdtDict[key])
        n = n + 1
        if (n % 64) == 0:
            pipe.execute()
            pipe = redIs.pipeline()
</code></pre>",1
518,32149626,How to insert Billion of data to Redis efficiently?,"<p>I have around 2 billion key-value pairs and I want to load them into Redis efficiently. I am currently using Python and used Pipe as documented by the <a href=""https://redis-py.readthedocs.io/en/latest/#redis.Redis.pipeline"" rel=""noreferrer"">redis-py</a>. How can I speed the following approach up?</p>

<pre><code>import redis

def load(pdt_dict):
    """"""
    Load data into redis.

    Parameters
    ----------
    pdt_dict : Dict[str, str]
        To be stored in Redis
    """"""
    redIs = redis.Redis()
    pipe = redIs.pipeline()
    for key in pdt_dict.keys():
        pipe.hmset(self.seller + "":"" + str(key), pdt_dict[key])
    pipe.execute()
</code></pre>",python|redis|redis-py,"<p>You could use redis-cli in pipe mode, first you prepare a file like (note that the lines should be terminated by cr/lf or set by <code>-d &lt;dilimiter&gt;</code> option):</p>

<pre><code>SET Key0 Value0
SET Key1 Value1
...
SET KeyN ValueN
</code></pre>

<p>then pipe it to redis-cli:</p>

<pre><code>cat data.txt | redis-cli --pipe
</code></pre>

<p><a href=""https://redis.io/topics/mass-insert"" rel=""nofollow noreferrer"">https://redis.io/topics/mass-insert</a></p>",4
519,32103424,Python Recursive function missing results,"<p>Coming from <a href=""https://stackoverflow.com/questions/32102420/python-recursively-appending-list-function"">Python recursively appending list function</a> 
Trying to recursively get a list of permissions associated with a file structure.</p>

<p>I have this function:</p>

<pre><code>def get_child_perms(self, folder, request, perm_list):
        # Folder contains other folders
        if folder.get_children():
            # For every sub-folder
            return [self.get_child_perms(subfolder, request, perm_list) for subfolder in folder.get_children()]
        return folder.has_read_permission(request)
</code></pre>

<p>That returns all the results except the folders that contain other folders.</p>

<pre><code>folder &lt;- Missing (allowed)
    subfolder &lt;- Missing (restricted)
        subsubfolder &lt;- Get this (restricted)
            files
</code></pre>

<p>Output from function would be 
[True, False, False]</p>

<p>another case would be, where A = allowed, R = restricted</p>

<pre><code>folder  A
    subfolder   A
        subsubfolder    R
            files
        files
    subfolder   R
        files
    subfolder   A
        subsubfolder    A
            files
        files
    subfolder   A
        files
    files
</code></pre>

<p>Output would be 
[True,True,False,False,True,True,True]</p>",python|recursion,"<p>The basic issue occurs you are only returning the <code>folder permission</code> , when folder does not have any children , when it has children, you are not including the <code>folder.has_read_permission(request)</code> in your return result , which is most probably causing you issue. You need to do -</p>

<pre><code>def get_child_perms(self, folder, request, perm_list):
        # Folder contains other folders
        if folder.get_children():
            # For every sub-folder
            return [folder.has_read_permission(request)] + [self.get_child_perms(subfolder, request, perm_list) for subfolder in folder.get_children()]
        return [folder.has_read_permission(request)]
</code></pre>

<p>This should result in (not tested) -</p>

<pre><code>[folderperm [subfolderperm [subsubfolderperm]]
</code></pre>

<hr>",3
520,32103424,Python Recursive function missing results,"<p>Coming from <a href=""https://stackoverflow.com/questions/32102420/python-recursively-appending-list-function"">Python recursively appending list function</a> 
Trying to recursively get a list of permissions associated with a file structure.</p>

<p>I have this function:</p>

<pre><code>def get_child_perms(self, folder, request, perm_list):
        # Folder contains other folders
        if folder.get_children():
            # For every sub-folder
            return [self.get_child_perms(subfolder, request, perm_list) for subfolder in folder.get_children()]
        return folder.has_read_permission(request)
</code></pre>

<p>That returns all the results except the folders that contain other folders.</p>

<pre><code>folder &lt;- Missing (allowed)
    subfolder &lt;- Missing (restricted)
        subsubfolder &lt;- Get this (restricted)
            files
</code></pre>

<p>Output from function would be 
[True, False, False]</p>

<p>another case would be, where A = allowed, R = restricted</p>

<pre><code>folder  A
    subfolder   A
        subsubfolder    R
            files
        files
    subfolder   R
        files
    subfolder   A
        subsubfolder    A
            files
        files
    subfolder   A
        files
    files
</code></pre>

<p>Output would be 
[True,True,False,False,True,True,True]</p>",python|recursion,"<p>why not <a href=""https://docs.python.org/3/library/os.html?highlight=walk#os.walk"" rel=""nofollow""> os.walk</a></p>

<blockquote>
  <p>When topdown is True, the caller can modify the dirnames list in-place
  (perhaps using del or slice assignment), and walk() will only recurse
  into the subdirectories whose names remain in dirnames; this can be
  used to prune the search, impose a specific order of visiting, or even
  to inform walk() about directories the caller creates or renames
  before it resumes walk() again. Modifying dirnames when topdown is
  False is ineffective, because in bottom-up mode the directories in
  dirnames are generated before dirpath itself is generated.</p>
</blockquote>

<p>for example you can build generator (lazy list) that generates only non restricted directories</p>

<pre><code>for (dirpath, dirnames, filenames) in os.walk(""top_path""):
    if restricted(dirpath):
        del dirnames
        continue
    yield (dirpath,tuple(filenames))
</code></pre>",0
521,31886554,"trying to create a deep array in python, able to get the output below line is executed in shell, but not when I run from the Program","<p>My Code:</p>

<pre><code>output =[]

[[[output.append("""") for counter1 in range(0,len(Total_columns)+16,1)]for counter2 in range(0,deprication_range,1)]for counter3 in range(0,len(Total_data),1)]
</code></pre>

<p>Total_columns and Total_data are arrays which have their lengths as 21 and 2 respectively and deprication_range is an integer 7</p>

<p>please let me know if I am making any kind of silly mistake. This really beats me..I suppose I am doing something fundamentally incorrect which I am not able to identify..</p>

<p>Thanks in advance.</p>

<p>Cheers,
Ajay</p>",python,"<p>you wouldn't append to output inside of the list comprehension. so you can change output.append("""") to just """" and that will run</p>

<pre><code>output = [[["""" for counter1 in range(0,len(Total_columns)+16,1)]for counter2 in range(0,deprication_range,1)]for counter3 in range(0,len(Total_data),1)]
</code></pre>",0
522,32106869,Finding paths in a json tree in python,"<p>I have a json tree of the form</p>

<pre><code>{""reply"": 0, ""id"": 30, ""children"": [{""reply"": 0, ""id"": 451, ""children"": []}, {""reply"": 0, ""id"": 307, ""children"": []}, {""reply"": 0, ""id"": 276, ""children"": []}, {""reply"": 0, ""id"": 253, ""children"": []}]}
</code></pre>

<p>I want to get all the paths starting from root to the leaf of the json tree.
For this I am using </p>

<pre><code>import json
f=open('tree_json','r')
def paths(tree, cur=()):
         if not tree:
            yield cur
         else:
            for n, s in tree.items():
                for path in paths(s, cur+(n,)):
                   yield path
for line in f:
    tree=json.loads(line)
   print list(paths(tree,(0,)))
</code></pre>

<p>But, I am not able to print the paths in a tree. The output I want is:
     {30,451},{30,307},{30,276}. I am getting </p>

<pre><code>    for n, s in tree.items():
     AttributeError: 'int' object has no attribute 'items'
</code></pre>",python|json,"<p>There are several problems with your code, but the ""error"" you were getting isn't an error; it's the value returned by <code>path(tree, 0)</code>, which is a generator. You need to wrap it in <code>list()</code> to force it to evaluate itself. That said, if you do that, you're going to run into several bugs. And even if you fix the surface bugs, your code isn't going to give you the result you want.</p>

<p>This code will do what you're trying to do:</p>

<pre><code>import pprint


def paths(tree):
    if not tree['children']:
        yield (tree['id'],)
    else:
        for child in tree['children']:
            for descendant in paths(child):
                yield (tree['id'],) + descendant

tree = {
    'reply': 0,
    'id': 30,
    'children': [
        {'reply': 0, 'id': 451, 'children': []},
        {'reply': 0, 'id': 307, 'children': []},
        {'reply': 0, 'id': 276, 'children': []},
        {'reply': 0, 'id': 253, 'children': [
            {'reply': 0, 'id': 600, 'children': []},
            {'reply': 0, 'id': 700, 'children': []},
            {'reply': 0, 'id': 800, 'children': []},
            {'reply': 0, 'id': 900, 'children': []},
        ]}
        ]
    }

pprint.pprint(list(paths(tree)))
</code></pre>

<p>Output:</p>

<pre><code>[(30, 451),
 (30, 307),
 (30, 276),
 (30, 253, 600),
 (30, 253, 700),
 (30, 253, 800),
 (30, 253, 900)]
</code></pre>",0
523,30311997,Python socket file server,"<p>There are many questions on stackoverflow discussing the client server model for sending and receiving files with python.</p>

<p>My question is a little different in that I want to create a python 'server socket', which listens on some port and then pushes a file to whoeever connects to that port.</p>

<p>I'm using the code below, however when I connect to the socket I do not receive the file.</p>

<pre><code>s = socket.socket()        
s.bind((socket.gethostname(), 2048))
f = open('/tmp/test','rb')
s.listen(5)           
while True:
    c, addr = s.accept()
    print 'Connection from ', addr
    l = f.read(1024)
    while (l):
       print ""Sending""
       s.send(l)
       l = f.read(1024)
    f.close()
    s.shutdown(socket.SHUT_WR)
    c.close()
</code></pre>

<p>Can anyone explain why this doesn't work?</p>",python|sockets,"<p>You are trying to send on the server socket <code>s</code>, while you need to do that on the newly accepted client socket <code>c</code>.</p>

<p><strong><code>Listening</code></strong> socket (<code>s</code> here) can only accept new connections. By definition it does not have the other end to exchange data with.</p>",0
524,30311997,Python socket file server,"<p>There are many questions on stackoverflow discussing the client server model for sending and receiving files with python.</p>

<p>My question is a little different in that I want to create a python 'server socket', which listens on some port and then pushes a file to whoeever connects to that port.</p>

<p>I'm using the code below, however when I connect to the socket I do not receive the file.</p>

<pre><code>s = socket.socket()        
s.bind((socket.gethostname(), 2048))
f = open('/tmp/test','rb')
s.listen(5)           
while True:
    c, addr = s.accept()
    print 'Connection from ', addr
    l = f.read(1024)
    while (l):
       print ""Sending""
       s.send(l)
       l = f.read(1024)
    f.close()
    s.shutdown(socket.SHUT_WR)
    c.close()
</code></pre>

<p>Can anyone explain why this doesn't work?</p>",python|sockets,"<p>You have four problems here.</p>

<pre><code>s.bind((socket.gethostname(), 2048))
</code></pre>

<p><code>gethostname()</code> returns the name of your machine, not an address you can bind to. If you want to bind to all interfaces, just like <code>s.bind(('', 2048))</code>.</p>

<pre><code>s.send(l)
</code></pre>

<p>You're trying to send on the listener socket, not the connected client socket. Use <code>c.send(l)</code>. You make the same mistake later by calling <code>s.shutdown</code> instead of <code>c.shutdown</code>; you need it to fix it there, too.</p>

<pre><code>s.send(l)
</code></pre>

<p>You're using <code>send</code> instead of <code>sendall</code>, and not checking the return value. You'll usually get away with this when your buffers are this small, but why accept ""usually""?</p>

<pre><code>f.close()
</code></pre>

<p>Since you only <code>open</code> the file once, before accepting the first connection, and then you <code>close</code> it for each connection, the second client is just going to cause an exception as you try to read from a closed file. Either move the <code>open</code> into the loop, or replace the <code>f.close()</code> with <code>f.seek(0)</code>.</p>",1
525,30128592,Python: Iterating through a csv in a while loop,"<p>I have a csv file that I'm trying to iterate through and have it do something only when a timestamp in it falls within a specified range. I'm using a while loop to do this where I'm adding 30 seconds each time through, but for some reason it only iterates through the csv the first time it does the loop and not each addition time (although I know it is successfully completing the while loop itself). I'm not sure what the problem is though.</p>

<pre><code>try:
    csvfilename = sys.argv[1]
except:
    csvfilename = ""myCSVfile.csv""


csvfile = csv.DictReader(open(csvfilename,'rb'),delimiter=',')

startTime = 1402617311
endTime = 1419544361
while startTime &lt; endTime:
    for line in csvfile:
        if (startTime + 30) &gt; timeToEpoch(line['EnterTime']) &gt;= startTime:
            output = calcFunction(line['EnterN'],line['ExitN'],line['user'])
    startTime = startTime + 30
</code></pre>

<p>Per request here are a few lines of the csv file printed using the csv module (formatted a bit for readability, also the differences in the names and my example are because I changed them slightly):</p>

<pre><code>{
'Time Exit': '17:02:04', 
'Duration': '0:02:34', 
'Date': '12/7/14', 
'ExitN': '12/7/14 17:02', 
'PlayerSpace': '1', 
'EnterN': '12/7/14 16:59', 
'Time Enter': '16:59:30'
}
{
'Time Exit': '17:08:18', 
'Duration': '0:08:46', 
'Date': '12/7/14', 
'ExitN': '12/7/14 17:08', 
'PlayerSpace': '2', 
'EnterN': '12/7/14 16:59', 
'Time Enter': '16:59:32'
}
{
'Time Exit': '17:06:49', 
'Duration': '0:04:20', 
'Date': '12/7/14', 
'ExitN': '12/7/14 17:06', 
'PlayerSpace': '3', 
'EnterN': '12/7/14 17:02', 
'Time Enter': '17:02:29'
}
</code></pre>",python|csv,"<p>So this was based on Andrea's suggestion I moved it to a list(), which worked great, but what I really needed to do was to check the condition every 30 seconds, which made it iterate through everything every 30 seconds (making it really slow) so I adapted it and slightly making it much quicker since all my times are sequential this works:</p>

<pre><code>line = list(csv_data) #Convert into a list

lineCount = line[n] # Done so I can iterate line by line

while (startTime + 30) &gt; timeToEpoch(lineCount['EnterN']) &gt;= startTime:
    print ""time on""
    pc = playerCount(lineCount['EnterN'],lineCount['ExitN'],lineCount['Player'])
    n += 1
    lineCount = line[n]
</code></pre>

<p>Note: sorry there were some small errors in my original code with endTime/startTime which didn't affect people's answers, but I changed in my final answer (some of this was because I renamed variables in an attempt to reduce confusion)</p>",0
526,30128592,Python: Iterating through a csv in a while loop,"<p>I have a csv file that I'm trying to iterate through and have it do something only when a timestamp in it falls within a specified range. I'm using a while loop to do this where I'm adding 30 seconds each time through, but for some reason it only iterates through the csv the first time it does the loop and not each addition time (although I know it is successfully completing the while loop itself). I'm not sure what the problem is though.</p>

<pre><code>try:
    csvfilename = sys.argv[1]
except:
    csvfilename = ""myCSVfile.csv""


csvfile = csv.DictReader(open(csvfilename,'rb'),delimiter=',')

startTime = 1402617311
endTime = 1419544361
while startTime &lt; endTime:
    for line in csvfile:
        if (startTime + 30) &gt; timeToEpoch(line['EnterTime']) &gt;= startTime:
            output = calcFunction(line['EnterN'],line['ExitN'],line['user'])
    startTime = startTime + 30
</code></pre>

<p>Per request here are a few lines of the csv file printed using the csv module (formatted a bit for readability, also the differences in the names and my example are because I changed them slightly):</p>

<pre><code>{
'Time Exit': '17:02:04', 
'Duration': '0:02:34', 
'Date': '12/7/14', 
'ExitN': '12/7/14 17:02', 
'PlayerSpace': '1', 
'EnterN': '12/7/14 16:59', 
'Time Enter': '16:59:30'
}
{
'Time Exit': '17:08:18', 
'Duration': '0:08:46', 
'Date': '12/7/14', 
'ExitN': '12/7/14 17:08', 
'PlayerSpace': '2', 
'EnterN': '12/7/14 16:59', 
'Time Enter': '16:59:32'
}
{
'Time Exit': '17:06:49', 
'Duration': '0:04:20', 
'Date': '12/7/14', 
'ExitN': '12/7/14 17:06', 
'PlayerSpace': '3', 
'EnterN': '12/7/14 17:02', 
'Time Enter': '17:02:29'
}
</code></pre>",python|csv,"<p>When you iterate the <code>csvfile</code> the first time, you exhaust it, so that it'll never yield more values.</p>

<p>One solution to your problem may be copying all the lines to a list, which can be iterated multiple times:</p>

<pre><code>startTime = 1402617311
endTime = 1419544361
csv_lines = list(csvfile)   # &lt;-
while startTime &lt; endTime:
    for line in csv_lines:  # &lt;-
        if (startTime + 30) &gt; timeToEpoch(line['EnterTime']) &gt;= endTime:
            output = calcFunction(line['EnterN'],line['ExitN'],line['user'])
    startTime = startTime + 30
</code></pre>",2
527,32760681,Django - Server error 500 with URL tag,"<p>I have an issue when I put online my <strong>Django</strong> Project. 
If I have an <code>{% url ... %}</code> tag in my main html file (base.html), I see ""<code>Server Error 500</code>"".</p>

<p>If I remove all these lines with <code>{% url ... %}</code>, my django website works fine and the ""<code>Server Error 500</code>"" disappears !  I have this issue only with the URL tag.</p>

<p>For information, I have no issue when I work locally (127.0.0.1) on my computer. My hosting (<strong>Alwaysdata.com</strong>) use <code>python 2.6 and Django 1.6.4</code></p>

<p>Could you help me please ? :) </p>",python|django|url|tags|server-error,"<p>I solved the issue by adding <code>#-*- coding: utf-8 -*-</code> at the begenning of all my Python <code>(*.py)</code> files because it's an old version about python (2.6)</p>

<p>Thank's to all :)</p>",1
528,32995897,Python multiprocessing pool hangs on map call,"<p>I have a function that parses a file and inserts the data into MySQL using SQLAlchemy. I've been running the function sequentially on the result of <code>os.listdir()</code> and everything works perfectly.</p>

<p>Because most of the time is spent reading the file and writing to the DB, I wanted to use multiprocessing to speed things up. Here is my pseduocode as the actual code is too long:</p>

<pre><code>def parse_file(filename):
    f = open(filename, 'rb')
    data = f.read()
    f.close()

    soup = BeautifulSoup(data,features=""lxml"", from_encoding='utf-8')

    # parse file here

    db_record = MyDBRecord(parsed_data)

    session.add(db_record)
    session.commit()

pool = mp.Pool(processes=8)

pool.map(parse_file, ['my_dir/' + filename for filename in os.listdir(""my_dir"")])
</code></pre>

<p>The problem I'm seeing is that the script hangs and never finishes. I usually get 48 of 63 records into the database. Sometimes it's more, sometimes it's less.</p>

<p>I've tried using <code>pool.close()</code> and in combination with <code>pool.join()</code> and neither seems to help.</p>

<p>How do I get this script to complete? What am I doing wrong? I'm using Python 2.7.8 on a Linux box.</p>",python|mysql|multiprocessing,"<p>You need to put all code which uses multiprocessing, inside its own function. This stops it recursively launching new pools when multiprocessing re-imports your module in separate processes:</p>

<pre><code>def parse_file(filename):
    ...

def main():
    pool = mp.Pool(processes=8)
    pool.map(parse_file, ['my_dir/' + filename for filename in os.listdir(""my_dir"")])

if __name__ == '__main__:
    main()
</code></pre>

<p>See the documentation about <a href=""https://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers"" rel=""noreferrer"">making sure your module is importable</a>, also the <a href=""https://docs.python.org/2/library/multiprocessing.html#windows"" rel=""noreferrer"">advice for running on Windows(tm)</a></p>",9
529,32995897,Python multiprocessing pool hangs on map call,"<p>I have a function that parses a file and inserts the data into MySQL using SQLAlchemy. I've been running the function sequentially on the result of <code>os.listdir()</code> and everything works perfectly.</p>

<p>Because most of the time is spent reading the file and writing to the DB, I wanted to use multiprocessing to speed things up. Here is my pseduocode as the actual code is too long:</p>

<pre><code>def parse_file(filename):
    f = open(filename, 'rb')
    data = f.read()
    f.close()

    soup = BeautifulSoup(data,features=""lxml"", from_encoding='utf-8')

    # parse file here

    db_record = MyDBRecord(parsed_data)

    session.add(db_record)
    session.commit()

pool = mp.Pool(processes=8)

pool.map(parse_file, ['my_dir/' + filename for filename in os.listdir(""my_dir"")])
</code></pre>

<p>The problem I'm seeing is that the script hangs and never finishes. I usually get 48 of 63 records into the database. Sometimes it's more, sometimes it's less.</p>

<p>I've tried using <code>pool.close()</code> and in combination with <code>pool.join()</code> and neither seems to help.</p>

<p>How do I get this script to complete? What am I doing wrong? I'm using Python 2.7.8 on a Linux box.</p>",python|mysql|multiprocessing,"<p>The problem was a combination of 2 things:</p>

<ol>
<li>my pool code being called multiple times (thanks @Peter Wood)</li>
<li>my DB code opening too many sessions (and/or) sharing sessions</li>
</ol>

<p>I made the following changes and everything works now:
<em>Original File</em></p>

<pre><code>def parse_file(filename):
    f = open(filename, 'rb')
    data = f.read()
    f.close()

    soup = BeautifulSoup(data,features=""lxml"", from_encoding='utf-8')

    # parse file here

    db_record = MyDBRecord(parsed_data)

    session = get_session() # see below
    session.add(db_record)
    session.commit()

pool = mp.Pool(processes=8)

pool.map(parse_file, ['my_dir/' + filename for filename in os.listdir(""my_dir"")])
</code></pre>

<p><em>DB File</em></p>

<pre><code>def get_session():
    engine = create_engine('mysql://root:root@localhost/my_db')

    Base.metadata.create_all(engine)
    Base.metadata.bind = engine

    db_session = sessionmaker(bind=engine)

    return db_session()
</code></pre>",3
530,32999098,"Why is ""tuple([0])"" printed as ""(0, )""?","<p>While converting lists to tuples in python 2, I noticed that converting any list with a single item to a tuple produces a comma after the item.</p>

<pre><code>&gt;&gt;&gt; tuple([0])
(0,)
&gt;&gt;&gt; tuple(['i'])
('i',)
</code></pre>

<p>What is the reason for the comma being shown?<br>
Does it cause any unexpected behaviour other than how it is printed?</p>

<p>I also noticed that a single tuple must be declared with a comma.</p>

<pre><code>&gt;&gt;&gt; (0)
0
&gt;&gt;&gt; (0,)
(0,)
</code></pre>

<p>Presumably this is to make an expression like</p>

<pre><code>&gt;&gt;&gt; 5 * (2 + 3)
25
</code></pre>

<p>instead of</p>

<pre><code>&gt;&gt;&gt; 5 * (2 + 3)
(5, 5, 5, 5, 5)
</code></pre>",python,"<p>It's so that the output is a valid Python representation of the object, which is what <code>repr</code> is supposed to produce. (<code>str</code> is the same as <code>repr</code> in the case of tuple, since there's no compelling reason for them to differ.) The trailing comma is necessary, otherwise it is not actually a representation of a tuple.</p>

<p>From the Python docs about <code>repr</code>:</p>

<blockquote>
  <p>Return a string containing a printable representation of an object. This is the same value yielded by conversions (reverse quotes). It is sometimes useful to be able to access this operation as an ordinary function. For many types, this function makes an attempt to return a string that would yield an object with the same value when passed to eval(), otherwise the representation is a string enclosed in angle brackets that contains the name of the type of the object together with additional information often including the name and address of the object.</p>
</blockquote>

<pre><code>&gt;&gt;&gt; eval(repr(tuple([0])))
(0,)
</code></pre>

<p>If the comma was not produced, this would not hold.</p>",2
531,32935434,"TypeError: not all arguments converted during string formatting, Python","<p>I dont know why the error is coming up. Its a program to show the numbers that include a 7 and are a multiple of 7.</p>

<pre><code>import sys
Numbers = raw_input()
Answer = 0
NumbersList = Numbers.split()
Length = len(NumbersList)
for num in range(0, Length):
    N = NumbersList [num-1]
    ListNumber = list(str(N))
    if (N == 0):
        print(Answer)
    elif (num == Length):
    print(Answer)
    elif (N % 7 == 0):
        Answer = Answer + 1
    elif 7 in ListNumber:
        Answer = Answer + 1


sys.stdout.flush()
</code></pre>

<p>New Question. My elif statement at the bottom doesnt seem to work.
The input is a list of numbers from 0-100. Stop at a 0. Answer = Numbers with %7 = 0 or with a 7 in it</p>

<pre><code>import sys
Numbers = raw_input()
Answer = 0
NumbersList = Numbers.split()
Length = len(NumbersList)
for num in range(0, Length):
    N = NumbersList [num]
    ListNumber = list(str(N))
    if (int(N) == 0):
        print(Answer)
        break
    elif (num == Length):
        if (int(N) % 7 == 0):
            Answer = Answer + 1
        elif 7 in ListNumber:
            Answer = Answer + 1
        print(Answer)
    elif (int(N) % 7 == 0):
        Answer = Answer + 1
    elif 7 in ListNumber:
        Answer = Answer + 1


sys.stdout.flush()
</code></pre>",python,"<p>Stealing @PeterWood's comment, you need to convert the input to an integer first.</p>

<pre><code> N = int( NumbersList [num-1] )
</code></pre>

<p>You may also want to consider using <code>for num in NumberList</code> and reading <a href=""https://www.python.org/dev/peps/pep-0008/"" rel=""nofollow"">https://www.python.org/dev/peps/pep-0008/</a> for a guide to good practice.</p>

<p>This works for me (or doesn't error):</p>

<pre><code>import sys
Numbers = raw_input()
Answer = 0
NumbersList = Numbers.split()
Length = len(NumbersList)
for num in range(0, Length):
    N = int( NumbersList [num-1])
    ListNumber = list(str(N))
    if (N == 0):
        print(Answer)
    elif (num == Length):
        print(Answer)
    elif (N % 7 == 0):
        Answer = Answer + 1
    elif 7 in ListNumber:
        Answer = Answer + 1

print Answer
sys.stdout.flush()
</code></pre>",0
532,33052551,Explain the function,"<pre><code>lloyd = {
    ""name"": ""Lloyd"",
    ""homework"": [90.0, 97.0, 75.0, 92.0],
    ""quizzes"": [88.0, 40.0, 94.0],
    ""tests"": [75.0, 90.0]
}
alice = {
    ""name"": ""Alice"",
    ""homework"": [100.0, 92.0, 98.0, 100.0],
    ""quizzes"": [82.0, 83.0, 91.0],
    ""tests"": [89.0, 97.0]
}
tyler = {
    ""name"": ""Tyler"",
    ""homework"": [0.0, 87.0, 75.0, 22.0],
    ""quizzes"": [0.0, 75.0, 78.0],
    ""tests"": [100.0, 100.0]
}

# Add your function below!
def average(numbers):
    total = sum(numbers)
    total = float(total)
    total /= len(numbers)
    return total
def get_average(student):
    homework = average(student[""homework""])
    quizzes = average(student[""quizzes""])
    tests = average(student[""tests""])
    total = 0.1*homework + 0.3*quizzes + 0.6*tests
    return total
def get_letter_grade(score):
    if score &gt;= 90:
        return ""A""
    elif score &gt;= 80:
        return ""B""
    elif score &gt;= 70:
        return ""C""
    elif score &gt;= 60:
        return ""D""
    else:
        return ""F""

print get_letter_grade(lloyd)
</code></pre>

<p>My question is, how does the function get_letter_grade know to use functions average and get_average if we do not specify them? We input a dictionary as an argument to a function that has no use for them but only for compariisment.</p>",python,"<p>The function get_letter_grade doesn't ""know"" to use the average and get_average functions.</p>

<p>What you are probably trying to achieve is more something like this:</p>

<pre><code>print get_letter_grade(get_average(lloyd))
</code></pre>

<p>or easier to read:</p>

<pre><code># get lloyds average score
lloyd_score = get_average(lloyd)

# get the letter grade corresponding to lloyd's average score
lloyd_letter_grade = get_letter_grade(lloyd_score)

# print that letter grade
print lloyd_letter_grade
</code></pre>",2
533,13585840,How to create a Mapping Table in Django?,"<p>Consider i have 3 tables (User, Designation, Department). I have created Department table with Designation as manytomanyField(), so i know a map table Department_Designation is created and data will be auto populating in this table, when data is fed in Department Table. Now i need a Map between this  Department_Designation Map table and User table, so that i can relate the user to his Department and designation, how can i create that relation?. Is that approach a right way. Please do advice and suggest better way if any, with examples and documentation.
I am using python 2.7, Django 1.3, MySQL5.5 on windows.
Thanks</p>",mysql|django|django-models|django-forms|python-2.7,"<p>See the documentation on <a href=""https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships"" rel=""nofollow"">Extra fields on many-to-many relationships</a>.</p>",0
534,13795010,Is there a way to write a Python script that creates and executes code?,"<p>Is there a way in Python to create Python code inside the Python script and then execute/test it?</p>

<p>My function has the following type of form (as an example)</p>

<pre><code>def f(n):
    if n&lt;=3: return [0, 0, 6, 12][n]
    return 2*f(n-1) - 4*f(n-2) - 5*f(n-3) + 15*f(n-4)
</code></pre>

<p>But I want to be able to create these kinds of functions dynamically (or any arbitrary function for that matter) and then test their outputs during runtime (as opposed to copying/pasting this function into the script and then manually testing it). </p>

<p>Not sure if this makes sense, please ask for elaboration if needed. I've already looked into eval and exec but couldn't get them to work with entire function definitions, just basic statements like 1+2, etc.</p>",python,"<p>It makes perfect sense. Python even has a <a href=""http://docs.python.org/2/library/language.html"" rel=""nofollow"">set of modules</a> explicitly for this purpose. Make sure you walk the AST and validate the nodes before executing the function though, to make sure that someone hasn't snuck in a <code>os.system('rm -rf /')</code> in there.</p>",2
535,13795010,Is there a way to write a Python script that creates and executes code?,"<p>Is there a way in Python to create Python code inside the Python script and then execute/test it?</p>

<p>My function has the following type of form (as an example)</p>

<pre><code>def f(n):
    if n&lt;=3: return [0, 0, 6, 12][n]
    return 2*f(n-1) - 4*f(n-2) - 5*f(n-3) + 15*f(n-4)
</code></pre>

<p>But I want to be able to create these kinds of functions dynamically (or any arbitrary function for that matter) and then test their outputs during runtime (as opposed to copying/pasting this function into the script and then manually testing it). </p>

<p>Not sure if this makes sense, please ask for elaboration if needed. I've already looked into eval and exec but couldn't get them to work with entire function definitions, just basic statements like 1+2, etc.</p>",python,"<p>There are a number of ways to do this kind of thing.</p>

<p>If the function can be described without ""stepping outside the language"", you can just define a local function and return it, as in Blender's answer. This is usually what you want when you think you need to define new functions (borrowing Blender's example):</p>

<pre><code>def make_func(a, b):
    def f(n):
        return n**a + b
    return f
</code></pre>

<p>Sometimes, you can do even better, and represent the functions as data. For example, how do you create an arbitrary polynomial function? Well, you don't have to; you can have a <em>generic</em> polynomial function that takes a list of coefficients and a value and evaluates it; then all you need to do is create coefficient lists.</p>

<p>In fact, I think this is the one you want here. As you say:</p>

<blockquote>
  <p>It may be return 2*f(n-1) - 4*f(n-2) - 5*f(n-3) + 15*f(n-4) one minute, or return f(n-1) + 3*f(n-2) another, or f(n-1)+f(n-2)+f(n-3)+f(n-4)+5*f(n-5) depending on what I need it to be.</p>
</blockquote>

<p>This can definitely be represented as a list of coefficients:</p>

<pre><code>def make_recursive_func(coefficients, baseval):
    def f(n):
        if n &lt; len(coefficients): return baseval[n]
        return sum(coefficient * f(n-i-1) for i, coefficient in enumerate(coefficients))
    return f
</code></pre>

<p>But it's probably even simpler to write a single <code>eval_recursive_func(coefficients, baseval)</code>, if all you're ever going to do with the returned function is call it immediately and then forget it.</p>

<p>Sometimes—rarely, but not never—you really do need to execute code on the fly. As Himanshu says, <code>eval</code> and <code>exec</code> and friends are the way to do this. For example:</p>

<pre><code>newcode = '''
def f(n):
    if n&lt;=3: return [0, 0, 6, 12][n]
    return 2*f(n-1) - 4*f(n-2) - 5*f(n-3) + 15*f(n-4)
'''
exec(newcode)
</code></pre>

<p>Now the <code>f</code> function has been defined, exactly as if you'd just done this:</p>

<pre><code>def f(n):
    if n&lt;=3: return [0, 0, 6, 12][n]
    return 2*f(n-1) - 4*f(n-2) - 5*f(n-3) + 15*f(n-4)
</code></pre>

<p>It's a bit different in Py3 than Py2, and there are variations depending on what context you want things executed in, or whether you just want it executed or evaluated or compiled or treated like an import, etc. But this is the basic idea.</p>

<p>If you can't think of why you'd want to write the first instead of the second, then you don't need this.</p>

<p>And if you can't figure out how to generate the right string on the fly, you shouldn't be doing this.</p>

<p>And, as Ignacio Vazquez-Abrams points out, if these functions can be built out of user input, you need to do something to validate that they're safe, usually by compiling iteratively and walking the AST.</p>

<p>Finally, even more rarely, you need to use the <code>new</code> module (and/or <code>inspect</code>) to create a new function object on the fly out of bits of other function objects (or even out of hand-crafted bytecode). But if you need to know how to do that, you probably already know how.</p>",4
536,13795010,Is there a way to write a Python script that creates and executes code?,"<p>Is there a way in Python to create Python code inside the Python script and then execute/test it?</p>

<p>My function has the following type of form (as an example)</p>

<pre><code>def f(n):
    if n&lt;=3: return [0, 0, 6, 12][n]
    return 2*f(n-1) - 4*f(n-2) - 5*f(n-3) + 15*f(n-4)
</code></pre>

<p>But I want to be able to create these kinds of functions dynamically (or any arbitrary function for that matter) and then test their outputs during runtime (as opposed to copying/pasting this function into the script and then manually testing it). </p>

<p>Not sure if this makes sense, please ask for elaboration if needed. I've already looked into eval and exec but couldn't get them to work with entire function definitions, just basic statements like 1+2, etc.</p>",python,"<p>If your functions are similar, you can create them using another function:</p>

<pre><code>def make_func(a, b):
    def f(n):
        return n**a + b

    return f
</code></pre>

<p>Using <code>make_func</code> transforms this function definition:</p>

<pre><code>def g(n):
     return n**2 + 1
</code></pre>

<p>Into just this:</p>

<pre><code>g = make_func(2, 1)
</code></pre>

<hr>

<p>In your case, something like this should work:</p>

<pre><code>def create_f(start_condition, vars, coeff_pairs):
    def x(n):
        if n &lt;= start_condition:
            return vars[n]

        result = 0.0

        for coeff, shift in coeff_pairs:
            result += coeff * x(n + shift)

        return result

    return x
</code></pre>

<p>And you can call it with:</p>

<pre><code>f = create_f(3, [0, 0, 6, 12], [(2, -1), (-4, -2), (-5, -3), (15, -4)])
</code></pre>

<p>The output matches your hardcoded function's output.</p>",3
537,13426793,python decorated function with multiple args (Tornado),"<p>I have written a decorator to authenticate calls. It works fine with only one argument, but with more it doesn't, triggering off a <code>inner() takes exactly 1 argument (2 given)</code>. I have a bit of a callback spaghetti since I'm using Tornado, but I'm not sure what's the best way to do this.</p>

<pre><code>#this works
class FirstHandler(BaseHandler):

    @asynchronous
    @oauth_machine.auth
    def post(self):
        print self.user
        self.finish()

#this now also does
class SecondHandler(BaseHandler):

    @asynchronous
    @oauth_machine.auth
    def get(self, args):
        self.write(""ok"")
        self.finish()
</code></pre>

<p>The decorator function(s)</p>

<pre><code>def auth(fn):
    def inner(self, *args):
        res = get_user_by_credentials(self, fn, args, callback=done_auth)
    return inner

def get_user_by_credentials(self, fn, callback):

    def onFetchUserCredentials(result, error):
        self.user = result
        callback(self, fn, args)

    email = self.get_argument(""email"")
    password = self.get_argument(""password"")
    settings.DB.users.find_one({'email': email, 'password': password }, callback=onFetchUserCredentials)

def done_auth(result, fn, args):
    return fn(result, args)
</code></pre>

<p>EDIT : </p>

<p>Updated code to working version.</p>

<p>Thanks!</p>",python|arguments|decorator|tornado,"<p>I thought at first that the problem was quite simple, but then you posted a traceback contradicting the original error message. However, I think the problem is still pretty straightforward, assuming that the <em>traceback</em> error is the correct one. Recall that this:</p>

<pre><code>@decorator
def foo(x):
    return x + 1
</code></pre>

<p>Is simply syntactic sugar for this:</p>

<pre><code>def foo(x):
    return x + 1
foo = oauth_machine.auth(foo)
</code></pre>

<p>So when you use <code>@oauth_machine.auth</code> on <code>get</code>, it's passed via a closure into <code>inner</code> as <code>fn</code>.</p>

<pre><code>def auth(fn):
    def inner(self):
        res = get_user_by_credentials(self, fn, callback=done_auth)
    return inner
</code></pre>

<p>It's then passed into <code>get_user_by_credentials</code>, again as <code>fn</code>, which in turn produces another closure, which passes <code>fn</code> to <code>callback</code>. </p>

<pre><code>def get_user_by_credentials(self, fn, callback):

    def onFetchUserCredentials(result, error):
        self.user = result
        callback(self, fn)
</code></pre>

<p><code>callback</code> was defined as <code>done_auth</code> back in <code>inner</code>, so that menas that <code>fn</code> (i.e. the original <code>get</code>) is passed there, and then called on <code>result</code>:</p>

<pre><code>def done_auth(result, fn):
    return fn(result)
</code></pre>

<p>But <code>fn</code> (i.e. <code>get</code>) takes two arguments. You pass it only one, causing an error. </p>",2
538,13455675,getPage inside of deferred object printing?,"<p>I'd like to create a callback that does a <code>getPage</code> on a specific url and prints that out when the operation is complete. Currently when I print <code>d</code> or <code>page</code> (see code below), I get a reference to the deferred object vs. the contents of <code>page</code>.</p>

<p>Why does the memory location of the deferred object change between print <code>page</code> and print <code>d</code>?</p>

<p>Eventually I'd like this program to cycle through a list of 4 of my websites, create callbacks for each of those individual connections, fire them off, and print each page as they are ready.  If it's not too much to ask, can this be demonstrated?</p>

<pre><code>from twisted.web.client import getPage
from twisted.internet import reactor
from twisted.internet.defer import Deferred

def connect(url):
    page = getPage(url)
</code></pre>

<p><code>print page</code> returns <code>&lt;Deferred object at 0x23dcc68&gt;</code>.</p>

<p><code>print d</code> returns <code>&lt;Deferred object at 0x7f1bacacc3b0&gt;</code>.</p>

<p>Current result (using 'http://www.example.com' as an example):</p>

<pre><code>d = Deferred()

d.addCallback(connect)

reactor.callWhenRunning(d.callback, 'http://www.example.com')

reactor.callLater(4, reactor.stop)

reactor.run()
</code></pre>",python|asynchronous|twisted|addcallback,"<p>You should probably be using the newer, spiffier <a href=""http://twistedmatrix.com/documents/12.2.0/api/twisted.web.client.Agent.html"" rel=""nofollow""><code>twisted.web.client.Agent</code></a> rather than the older and somewhat limited <code>getPage</code>.  Lucky for you there is <a href=""http://twistedmatrix.com/documents/12.2.0/web/howto/client.html"" rel=""nofollow"">a very thorough tutorial on how to use <code>Agent</code></a>, as well as some of its companion classes like <code>ProxyAgent</code>, <code>RedirectAgent</code>, <code>CookieAgent</code>, and <code>ContentDecoderAgent</code>.</p>

<p>First, though, you may want to familiarize yourself with the documentation on <a href=""http://twistedmatrix.com/documents/12.2.0/core/howto/defer.html"" rel=""nofollow"">how to use <code>Deferred</code>s</a>.</p>",0
539,13708253,Making combinations in python,"<p>I have four values</p>

<pre><code>age = 23
gender = ""M""
city =""Delhi""
religion = ""Muslim""
</code></pre>

<p>I need these arranged by every combination with empty values like -</p>

<pre><code>23 * * *
23 M * *
23 M Delhi *
23 M Delhi Muslim
* M * *
* M Delhi *
* M Delhi Muslim
* * Delhi *
* * Delhi Muslim
* * * Muslim
* * * *
</code></pre>

<p>I need this arranged by the number of dimensions in ascending order in a list. So combinations with one value should be on top. I have some 30+ attributes, so i need an automated way to do this in Python</p>

<p>Any ideas ?</p>",python|algorithm|sorting|combinations|combinatorics,"<p><a href=""https://stackoverflow.com/a/13708330/68063"">NPE's answer</a> solves the problem by constructing the full list of subsets in memory and then sorting it. This requires O(2<sup><em>n</em></sup>) space and O(<em>n</em><sup>2</sup> 2<sup><em>n</em></sup>) time. If this is unacceptable, then here's a way to generate the subsets in O(<em>n</em>) space and O(<em>n</em> 2<sup><em>n</em></sup>) time.</p>

<pre><code>from itertools import combinations

def subsets(s, placeholder = None):
    """"""
    Generate the subsets of `s` in order of size.
    Use `placeholder` for missing elements (default: None).
    """"""
    s = list(s)
    n = len(s)
    r = range(n)
    for i in range(n + 1):
        for c in combinations(r, i):
            result = [placeholder] * n
            for j in c:
                result[j] = s[j]
            yield result

&gt;&gt;&gt; from pprint import pprint
&gt;&gt;&gt; pprint(list(subsets([23, 'M', 'Delhi', 'Muslim'])))
[[None, None, None, None],
 [23, None, None, None],
 [None, 'M', None, None],
 [None, None, 'Delhi', None],
 [None, None, None, 'Muslim'],
 [23, 'M', None, None],
 [23, None, 'Delhi', None],
 [23, None, None, 'Muslim'],
 [None, 'M', 'Delhi', None],
 [None, 'M', None, 'Muslim'],
 [None, None, 'Delhi', 'Muslim'],
 [23, 'M', 'Delhi', None],
 [23, 'M', None, 'Muslim'],
 [23, None, 'Delhi', 'Muslim'],
 [None, 'M', 'Delhi', 'Muslim'],
 [23, 'M', 'Delhi', 'Muslim']]
</code></pre>",4
540,13708253,Making combinations in python,"<p>I have four values</p>

<pre><code>age = 23
gender = ""M""
city =""Delhi""
religion = ""Muslim""
</code></pre>

<p>I need these arranged by every combination with empty values like -</p>

<pre><code>23 * * *
23 M * *
23 M Delhi *
23 M Delhi Muslim
* M * *
* M Delhi *
* M Delhi Muslim
* * Delhi *
* * Delhi Muslim
* * * Muslim
* * * *
</code></pre>

<p>I need this arranged by the number of dimensions in ascending order in a list. So combinations with one value should be on top. I have some 30+ attributes, so i need an automated way to do this in Python</p>

<p>Any ideas ?</p>",python|algorithm|sorting|combinations|combinatorics,"<p>How about the following:</p>

<pre><code>In [21]: attrib = (23, ""M"", ""Delhi"", ""Muslim"")

In [25]: comb = list(itertools.product(*((a, None) for a in attrib)))

In [26]: comb
Out[26]: 
[(23, 'M', 'Delhi', 'Muslim'),
 (23, 'M', 'Delhi', None),
 (23, 'M', None, 'Muslim'),
 (23, 'M', None, None),
 (23, None, 'Delhi', 'Muslim'),
 (23, None, 'Delhi', None),
 (23, None, None, 'Muslim'),
 (23, None, None, None),
 (None, 'M', 'Delhi', 'Muslim'),
 (None, 'M', 'Delhi', None),
 (None, 'M', None, 'Muslim'),
 (None, 'M', None, None),
 (None, None, 'Delhi', 'Muslim'),
 (None, None, 'Delhi', None),
 (None, None, None, 'Muslim'),
 (None, None, None, None)]
</code></pre>

<p>Now, if I understood your sorting requirements correctly, the following should do it:</p>

<pre><code>In [27]: sorted(comb, key=lambda x:sum(v is not None for v in x))
Out[27]: 
[(None, None, None, None),
 (23, None, None, None),
 (None, 'M', None, None),
 (None, None, 'Delhi', None),
 (None, None, None, 'Muslim'),
 (23, 'M', None, None),
 (23, None, 'Delhi', None),
 (23, None, None, 'Muslim'),
 (None, 'M', 'Delhi', None),
 (None, 'M', None, 'Muslim'),
 (None, None, 'Delhi', 'Muslim'),
 (23, 'M', 'Delhi', None),
 (23, 'M', None, 'Muslim'),
 (23, None, 'Delhi', 'Muslim'),
 (None, 'M', 'Delhi', 'Muslim'),
 (23, 'M', 'Delhi', 'Muslim')]
</code></pre>

<p>I've used <code>None</code> where you used <code>*</code>, but it's trivial to use the latter.</p>

<p>Of course with 30 attributes you're looking at ~1 billion combinations, so the flattening of the list with subsequent sorting probably won't work. However, what can you usefully do with 1 billion entries anyway?</p>",5
541,13708253,Making combinations in python,"<p>I have four values</p>

<pre><code>age = 23
gender = ""M""
city =""Delhi""
religion = ""Muslim""
</code></pre>

<p>I need these arranged by every combination with empty values like -</p>

<pre><code>23 * * *
23 M * *
23 M Delhi *
23 M Delhi Muslim
* M * *
* M Delhi *
* M Delhi Muslim
* * Delhi *
* * Delhi Muslim
* * * Muslim
* * * *
</code></pre>

<p>I need this arranged by the number of dimensions in ascending order in a list. So combinations with one value should be on top. I have some 30+ attributes, so i need an automated way to do this in Python</p>

<p>Any ideas ?</p>",python|algorithm|sorting|combinations|combinatorics,"<p>Look at <a href=""http://docs.python.org/2/library/itertools.html"" rel=""nofollow""><code>itertools</code></a>, it has a method for <a href=""http://docs.python.org/2/library/itertools.html#itertools.combinations"" rel=""nofollow""><code>combinations</code></a></p>",1
542,13353462,Python/ctypes file handle difference between Mac OS X and Ubuntu,"<p>I am currently attempting to port some code between my linux machine (Ubuntu 12.04.1 LTS) and my new Mac (OS X 10.7.4) and I have come across some confusing behavior when using python's ctypes module to access the C standard library on the Mac.</p>

<p>To illustrate the problem, the following is a minimal example:</p>

<pre><code>import ctypes as C
import numpy as np

libc = C.CDLL(""/usr/lib/libc.dylib"")   #/usr/lib/libc.so.6 on ubuntu

np.arange(10,dtype=""ubyte"").tofile(""test.bin"") # create some test data

buffer_array = np.empty(10,dtype=""ubyte"") # create a reading buffer

buffer_array_c = np.ctypeslib.as_ctypes(buffer_array) # get the ctypes version of the buffer 

c_file = libc.fopen(""test.bin"",""r"") # open the file through libc   

libc.fread(buffer_array_c, 1, 10, c_file) # read from the file

libc.fclose(c_file)

print ""Desired output:""
print np.fromfile(""test.bin"",dtype=""ubyte"")
print
print ""Actual output:""
print buffer_array
</code></pre>

<p>On Linux, this works as expected, producing the following:</p>

<pre><code>Desired output:
[0 1 2 3 4 5 6 7 8 9]

Actual output:
[0 1 2 3 4 5 6 7 8 9]
</code></pre>

<p>On the Mac however, I just get `Segmentation fault: 11'.</p>

<p>I have experimented with this a bit, swapping out the fopen call with:</p>

<pre><code>py_file = open(""test.bin"",""r"")

c_file = C.pythonapi.PyFile_AsFile(C.py_object(py_file))
</code></pre>

<p>Which also works on Linux but not on Mac.</p>

<p>I think the problem is coming from calling fread using c_file, as if I write a minimal C function to open the file then call fread using the previously allocated buffer, the code performs as expected.</p>

<p>I am not normally a Mac user, so the problem may be obvious, but any help would be very useful. </p>

<p>For reference, I am using:</p>

<p>Python 2.7.3,  Numpy 1.4.0 and Ctypes 1.1.0</p>

<h2>Edit:</h2>

<p>To give this some context, I am experimenting with fast methods to read very large binary files (~40-200 GB) into python, piece by piece. As a commenter points out below, there is not really any performance increase to be had from directly accessing the standard library fread and fwrite functions. This is true, but I am confused as to why. If I were to use numpy.fromfile to read a large file in chunks, wouldn't I be creating a new memory allocation with each read?  </p>

<h2>Solution:</h2>

<p>The problem seems to stem from the 64bit/32bit difference in storage of file handles.
The solution is simply to explicitly set the restype and argtypes of each c function prior to use.</p>

<p>i.e on a 64-bit machine we put this after the C.CDLL call:</p>

<pre><code>lib.fopen.restype = C.c_long
lib.fread.argtypes = [C.c_void_p, C.c_size_t, C.c_size_t, C.c_long]
lib.fclose.argtypes = [C.c_long]
</code></pre>

<p>While on a 32-bit machine:</p>

<pre><code>lib.fopen.restype = C.c_int
lib.fread.argtypes = [C.c_void_p, C.c_size_t, C.c_size_t, C.c_int]
lib.fclose.argtypes = [C.c_int]
</code></pre>",python|ctypes,"<p>Are you trying on a 32-bit Ubuntu versus a 64-bit OS/X?  I think the issue is that your version of libc.fopen() returns a C ""int"", which is almost always a 32-bit value --- but the real fopen() returns a pointer.  So on a 64-bit operating system, the c_file that you get is truncated to a 32-bit integer.  On a 32-bit operating system, it works anyway because the 32-bit integer can be passed back to the fread() and fclose(), which will interpret it again as a pointer.  To fix it, you need to declare the restype of libc.fopen().</p>

<p>(I can only recommend <a href=""http://cffi.readthedocs.org/en/latest/"" rel=""noreferrer"">CFFI</a> as an alternative to ctypes with saner defaults, but of course I'm partial there, being one of the authors :-)</p>",6
543,13691740,"How to determine the amplitude and the frequency of an ""oscillating"" trajectory","<p>This is the trajectory of a pedestrian moving in jam
<img src=""https://i.stack.imgur.com/FpkaL.png"" alt=""enter image description here""></p>

<p>As you can see, his/her head perform an oscillation-like movement. So not a perfect sinus curve but neither a line.</p>

<p>Is it possible to define for this irregular curve  an ""amplitude"" and a ""frequency""? </p>

<p><strong>UPDATE</strong>:</p>

<p>So far I tried two different approaches:</p>

<ol>
<li>The first one is based on calculating the turning points and then make a spline with them.</li>
<li>The second approach is based on the suggestion of <a href=""https://stackoverflow.com/users/190597/unutbu"">unutbu</a> and uses the  Ramer-Douglas-Peucker algorithm.</li>
</ol>

<p>The results are as follows:</p>

<p><img src=""https://i.stack.imgur.com/jI1uc.png"" alt=""enter image description here""></p>

<p>The problem that I see with the RDP is the free parameter <code>dist</code>. low values (means more details) imply oscillations in the resulting trajectories. So I'm forced to be careful with this parameter. Besides, the <code>splin</code>ed curve is much more smoother. </p>

<p>What do you think?</p>",python|simulation,"<p>Here is an update to RDP module you were linked to that should work with Python 3.x using Vectors:</p>

<pre><code>import functools

def autocast(function):
    @functools.wraps(function)
    def wrapper(self, other):
        if isinstance(other, self.__class__):
            if len(other) != len(self):
                raise ValueError('Object dimensions are not equivalent!')
            return function(self, other)
        return function(self, self.__class__(size=len(self), init=other))
    return wrapper

class Vector:

    __slots__ = '__data'

    def __init__(self, *args, size=0, init=0):
        self.__data = list(map(float, args if args else [init] * size))

    def __repr__(self):
        return self.__class__.__name__ + repr(tuple(self))

    @autocast
    def __cmp__(self, other):
        return (self.__data &gt; other.__data) - (self.__data &lt; other.__data)

    def __lt__(self, other):
        return self.__cmp__(other) &lt; 0

    def __le__(self, other):
        return self.__cmp__(other) &lt;= 0

    def __eq__(self, other):
        return self.__cmp__(other) == 0

    def __ne__(self, other):
        return self.__cmp__(other) != 0

    def __gt__(self, other):
        return self.__cmp__(other) &gt; 0

    def __ge__(self, other):
        return self.__cmp__(other) &gt;= 0

    def __bool__(self):
        return any(self)

    def __len__(self):
        return len(self.__data)

    def __getitem__(self, key):
        return self.__data[key]

    def __setitem__(self, key, value):
        self.__data[key] = float(value)

    def __delitem__(self, key):
        self[key] = 0

    def __iter__(self):
        return iter(self.__data)

    def __reversed__(self):
        return reversed(self.__data)

    def __contains__(self, item):
        return item in self.__data

    @autocast
    def __add__(self, other):
        return Vector(*(a + b for a, b in zip(self, other)))

    @autocast
    def __sub__(self, other):
        return Vector(*(a - b for a, b in zip(self, other)))

    @autocast
    def __mul__(self, other):
        return Vector(*(a * b for a, b in zip(self, other)))

    @autocast
    def __truediv__(self, other):
        return Vector(*(a / b for a, b in zip(self, other)))

    @autocast
    def __floordiv__(self, other):
        return Vector(*(a // b for a, b in zip(self, other)))

    @autocast
    def __mod__(self, other):
        return Vector(*(a % b for a, b in zip(self, other)))

    @autocast
    def __divmod__(self, other):
        result = tuple(divmod(a, b) for a, b in zip(self, other))
        return Vector(*(a for a, b in result)), Vector(*(b for a, b in result))

    @autocast
    def __pow__(self, other):
        return Vector(*(a ** b for a, b in zip(self, other)))

    @autocast
    def __radd__(self, other):
        return Vector(*(a + b for a, b in zip(other, self)))

    @autocast
    def __rsub__(self, other):
        return Vector(*(a - b for a, b in zip(other, self)))

    @autocast
    def __rmul__(self, other):
        return Vector(*(a * b for a, b in zip(other, self)))

    @autocast
    def __rtruediv__(self, other):
        return Vector(*(a / b for a, b in zip(other, self)))

    @autocast
    def __rfloordiv__(self, other):
        return Vector(*(a // b for a, b in zip(other, self)))

    @autocast
    def __rmod__(self, other):
        return Vector(*(a % b for a, b in zip(other, self)))

    @autocast
    def __rdivmod__(self, other):
        result = tuple(divmod(a, b) for a, b in zip(other, self))
        return Vector(*(a for a, b in result)), Vector(*(b for a, b in result))

    @autocast
    def __rpow__(self, other):
        return Vector(*(a ** b for a, b in zip(other, self)))

    @autocast
    def __iadd__(self, other):
        for key in range(len(self)):
            self[key] += other[key]
        return self

    @autocast
    def __isub__(self, other):
        for key in range(len(self)):
            self[key] -= other[key]
        return self

    @autocast
    def __imul__(self, other):
        for key in range(len(self)):
            self[key] *= other[key]
        return self

    @autocast
    def __itruediv__(self, other):
        for key in range(len(self)):
            self[key] /= other[key]
        return self

    @autocast
    def __ifloordiv__(self, other):
        for key in range(len(self)):
            self[key] //= other[key]
        return self

    @autocast
    def __imod__(self, other):
        for key in range(len(self)):
            self[key] %= other[key]
        return self

    @autocast
    def __ipow__(self, other):
        for key in range(len(self)):
            self[key] **= other[key]
        return self

    def __neg__(self):
        return Vector(*(-value for value in self))

    def __pos__(self):
        return Vector(*(+value for value in self))

    def __abs__(self):
        return Vector(*(abs(value) for value in self))

    def __get_magnitude(self):
        return sum(value ** 2 for value in self) ** 0.5

    def __set_magnitude(self, value):
        self *= value / self.magnitude

    magnitude = property(__get_magnitude, __set_magnitude)

###############################################################################

def point_line_distance(point, start, end):
    if start == end:
        return (point - start).magnitude
    es, sp = end - start, start - point
    return abs(es[0] * sp[1] - es[1] * sp[0]) / es.magnitude

def rdp(points, epsilon):
    dmax = index = 0
    start, *middle, end = points
    for i in range(1, len(points) - 1):
        d = point_line_distance(points[i], start, end)
        if d &gt; dmax:
            index, dmax = i, d
    if dmax &gt;= epsilon:
        return rdp(points[:index+1], epsilon)[:-1] + \
               rdp(points[index:], epsilon)
    return start, end
</code></pre>

<p>Similar to the demonstration given by the original module, the following is an example usage scenario:</p>

<pre><code>&gt;&gt;&gt; from pprint import pprint
&gt;&gt;&gt; line = [Vector(0.0, 0.0),
            Vector(1.0, 0.0),
            Vector(2.0, 0.0),
            Vector(2.0, 1.0),
            Vector(2.0, 2.0),
            Vector(1.0, 2.0),
            Vector(0.0, 2.0),
            Vector(0.0, 1.0),
            Vector(0.0, 0.0)]
&gt;&gt;&gt; pprint(rdp(line, 1.0))
(Vector(0.0, 0.0),
 Vector(2.0, 0.0),
 Vector(2.0, 2.0),
 Vector(0.0, 2.0),
 Vector(0.0, 0.0))
&gt;&gt;&gt; 
</code></pre>",1
544,13691740,"How to determine the amplitude and the frequency of an ""oscillating"" trajectory","<p>This is the trajectory of a pedestrian moving in jam
<img src=""https://i.stack.imgur.com/FpkaL.png"" alt=""enter image description here""></p>

<p>As you can see, his/her head perform an oscillation-like movement. So not a perfect sinus curve but neither a line.</p>

<p>Is it possible to define for this irregular curve  an ""amplitude"" and a ""frequency""? </p>

<p><strong>UPDATE</strong>:</p>

<p>So far I tried two different approaches:</p>

<ol>
<li>The first one is based on calculating the turning points and then make a spline with them.</li>
<li>The second approach is based on the suggestion of <a href=""https://stackoverflow.com/users/190597/unutbu"">unutbu</a> and uses the  Ramer-Douglas-Peucker algorithm.</li>
</ol>

<p>The results are as follows:</p>

<p><img src=""https://i.stack.imgur.com/jI1uc.png"" alt=""enter image description here""></p>

<p>The problem that I see with the RDP is the free parameter <code>dist</code>. low values (means more details) imply oscillations in the resulting trajectories. So I'm forced to be careful with this parameter. Besides, the <code>splin</code>ed curve is much more smoother. </p>

<p>What do you think?</p>",python|simulation,"<p>There is no absolute correct way to do this. Below is just one way.</p>

<p>Let's start with the assumption/claim that people generally intend to walk in straight lines. So you could use the <a href=""http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm"" rel=""nofollow"">Ramer-Douglas-Peucker algorithm</a> to estimate the intended path of the person with a small set of line segments. (There is a <a href=""https://github.com/sebleier/RDP/"" rel=""nofollow"">Python implementation of the algorithm here</a>.)</p>

<p>Then generate the <a href=""http://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line"" rel=""nofollow"">distances of the true data points from the line segments</a>.</p>

<pre><code>timeseries = []
for point in  points: 
    timeseries.append(
        min((distance between point and segment) 
             for segment in segments))
</code></pre>

<p>This array of distances is a timeseries. You could then take the <a href=""http://en.wikipedia.org/wiki/Root_mean_square"" rel=""nofollow"">root-mean-squared</a> of the timeseries as a measure of amplitude, and take a <a href=""http://docs.scipy.org/doc/scipy/reference/generated/scipy.fftpack.rfft.html#scipy-fftpack-rfft"" rel=""nofollow"">Fourier transform</a> to find its dominant frequency (or frequencies).</p>",6
545,13806088,python lxml inkscape namespace tags,"<p>I am generating an SVG file that's intended to include Inkscape-specific tags. For example, <code>inkscape:label</code> and <code>inkscape:groupmode</code>. I am using lxml etree as my parser/generator. I'd like to add the <code>label</code> and <code>groupmode</code> tags to the following instance:</p>

<pre><code>layer = etree.SubElement(svg_instance, 'g', id=""layer-id"")
</code></pre>

<p>My question is how do I achieve that in order to get the correct output form in the SVG, for example:</p>

<pre><code>&lt;g inkscape:groupmode=""layer"" id=""layer-id"" inkscape:label=""layer-label""&gt;
</code></pre>",python|svg|lxml|inkscape,"<p>First, remember that <code>inkscape:</code> isnt' a namespace, it's just a convenient way of referring to a namespace that is defined in your XML root element.  The namespace is <code>http://www.inkscape.org/namespaces/inkscape</code>, and depending on your XML, <code>inkscape:groupmode</code> might be identical to <code>foo:groupmode</code>.  And of course, your <code>&lt;g&gt;</code> element is part of the SVG namespace, <code>http://www.w3.org/2000/svg</code>.  To generate appropriate output with LXML, you would start with something like this:</p>

<pre><code>from lxml import etree
root = etree.Element('{http://www.w3.org/2000/svg}svg')
g = etree.SubElement(root, '{http://www.w3.org/2000/svg}g', id='layer-id')
</code></pre>

<p>Which would get you:</p>

<pre><code>&lt;ns0:svg xmlns:ns0=""http://www.w3.org/2000/svg""&gt;
  &lt;ns0:g id=""layer-id""/&gt;
&lt;/ns0:svg&gt;
</code></pre>

<p>To add in the inkscape-specific attributes, you would do this:</p>

<pre><code>g.set('{http://www.inkscape.org/namespaces/inkscape}groupmode', 'layer')
g.set('{http://www.inkscape.org/namespaces/inkscape}label', 'layer-label')
</code></pre>

<p>Which would get you:</p>

<pre><code>&lt;ns0:svg xmlns:ns0=""http://www.w3.org/2000/svg""&gt;
  &lt;ns0:g xmlns:ns1=""http://www.inkscape.org/namespaces/inkscape"" id=""layer-id"" ns1:groupmode=""layer"" ns1:label=""layer-label""/&gt;
&lt;/ns0:svg&gt;
</code></pre>

<p>Which believe it or not is exactly what you want.  You can clean up the namespace labels a bit by passing an <code>nsmap=</code> parameter when creating your root element.  Like this:</p>

<pre><code>NSMAP = {
  None: 'http://www.w3.org/2000/svg',
'inkscape': 'http://www.inkscape.org/namespaces/inkscape',
}

root = etree.Element('{http://www.w3.org/2000/svg}svg', nsmap=NSMAP)
</code></pre>

<p>With this in place, the final output would look like this:</p>

<pre><code>&lt;svg xmlns:inkscape=""http://www.inkscape.org/namespaces/inkscape"" xmlns=""http://www.w3.org/2000/svg""&gt;
  &lt;g id=""layer-id"" inkscape:label=""layer-label"" inkscape:groupmode=""layer""/&gt;
&lt;/svg&gt;
</code></pre>

<p>More information in the <a href=""http://lxml.de/tutorial.html#namespaces"" rel=""noreferrer"">LXML documentation</a>.</p>",9
546,13675296,How to overcome TypeError: unhashable type: 'list',"<p>I'm trying to take a file that looks like this:</p>
<pre class=""lang-none prettyprint-override""><code>AAA x 111
AAB x 111
AAA x 112
AAC x 123
...
</code></pre>
<p>And use a dictionary to so that the output looks like this</p>
<pre><code>{AAA: ['111', '112'], AAB: ['111'], AAC: [123], ...}
</code></pre>
<p>This is what I've tried</p>
<pre><code>file = open(&quot;filename.txt&quot;, &quot;r&quot;) 
readline = file.readline().rstrip()
while readline!= &quot;&quot;:
    list = []
    list = readline.split(&quot; &quot;)
    j = list.index(&quot;x&quot;)
    k = list[0:j]
    v = list[j + 1:]
    d = {}
    if k not in d == False:
        d[k] = []
    d[k].append(v)
    readline = file.readline().rstrip()
</code></pre>
<p>I keep getting a <code>TypeError: unhashable type: 'list'</code>. I know that keys in a dictionary can't be lists but I'm trying to make my value into a list not the key. I'm wondering if I made a mistake somewhere.</p>",python|list|dictionary|typeerror,"<blockquote>
  <p><b>Note:</b>
  This answer does not explicitly answer the asked question. the other  answers do it. Since the question is specific <em>to a scenario</em> and the raised <strong>exception is general</strong>, This answer points to the general case.</p>
</blockquote>

<p>Hash values are just integers which are used to compare dictionary keys during a dictionary lookup quickly.</p>

<p>Internally, <code>hash()</code> method calls <code>__hash__()</code> method of an object which are set by default for any object.</p>

<h3>Converting <em>a nested list to a set</em></h3>

<pre><code>&gt;&gt;&gt; a = [1,2,3,4,[5,6,7],8,9]
&gt;&gt;&gt; set(a)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: unhashable type: 'list'
</code></pre>

<p>This happens because of the list inside a list which is a list which cannot be hashed. Which can be solved by <em>converting the internal nested lists to a tuple</em>,</p>

<pre><code>&gt;&gt;&gt; set([1, 2, 3, 4, (5, 6, 7), 8, 9])
set([1, 2, 3, 4, 8, 9, (5, 6, 7)])
</code></pre>

<h3>Explicitly hashing <em>a nested list</em></h3>

<pre><code>&gt;&gt;&gt; hash([1, 2, 3, [4, 5,], 6, 7])
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: unhashable type: 'list'


&gt;&gt;&gt; hash(tuple([1, 2, 3, [4, 5,], 6, 7]))
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: unhashable type: 'list'

&gt;&gt;&gt; hash(tuple([1, 2, 3, tuple([4, 5,]), 6, 7]))
-7943504827826258506
</code></pre>

<blockquote>
  <p><strong>The solution to avoid this error is to restructure the list to have nested tuples instead of lists.</strong></p>
</blockquote>",65
547,13675296,How to overcome TypeError: unhashable type: 'list',"<p>I'm trying to take a file that looks like this:</p>
<pre class=""lang-none prettyprint-override""><code>AAA x 111
AAB x 111
AAA x 112
AAC x 123
...
</code></pre>
<p>And use a dictionary to so that the output looks like this</p>
<pre><code>{AAA: ['111', '112'], AAB: ['111'], AAC: [123], ...}
</code></pre>
<p>This is what I've tried</p>
<pre><code>file = open(&quot;filename.txt&quot;, &quot;r&quot;) 
readline = file.readline().rstrip()
while readline!= &quot;&quot;:
    list = []
    list = readline.split(&quot; &quot;)
    j = list.index(&quot;x&quot;)
    k = list[0:j]
    v = list[j + 1:]
    d = {}
    if k not in d == False:
        d[k] = []
    d[k].append(v)
    readline = file.readline().rstrip()
</code></pre>
<p>I keep getting a <code>TypeError: unhashable type: 'list'</code>. I know that keys in a dictionary can't be lists but I'm trying to make my value into a list not the key. I'm wondering if I made a mistake somewhere.</p>",python|list|dictionary|typeerror,"<p>The reason you're getting the <code>unhashable type: 'list'</code> exception is because <code>k = list[0:j]</code> sets <code>k</code> to be a &quot;slice&quot; of the list, which is logically another, often shorter, list. What you need is to get just the first item in list, written like so <code>k = list[0]</code>. The same for <code>v = list[j + 1:]</code> which should just be <code>v = list[2]</code> for the third element of the list returned from the call to <code>readline.split(&quot; &quot;)</code>.</p>
<p>I noticed several other likely problems with the code, of which I'll mention a few. A big one is you don't want to (re)initialize <code>d</code> with <code>d = {}</code> for each line read in the loop. Another is it's generally not a good idea to name variables the same as any of the built-ins types because it'll prevent you from being able to access one of them if you need it — and it's confusing to others who are used to the names designating one of these standard items. For that reason, you ought to rename your variable <code>list</code> variable something different to avoid issues like that.</p>
<p>Here's a working version of your with these changes in it, I also replaced the <code>if</code> statement expression you used to check to see if the key was already in the dictionary and now make use of a dictionary's <a href=""https://docs.python.org/3/library/stdtypes.html#dict.setdefault"" rel=""nofollow noreferrer""><code>setdefault()</code></a> method to accomplish the same thing a little more succinctly.</p>
<pre><code>d = {}
with open(&quot;nameerror.txt&quot;, &quot;r&quot;) as file:
    line = file.readline().rstrip()
    while line:
        lst = line.split() # Split into sequence like ['AAA', 'x', '111'].
        k, _, v = lst[:3]  # Get first and third items.
        d.setdefault(k, []).append(v)
        line = file.readline().rstrip()

print('d: {}'.format(d))
</code></pre>
<p>Output:</p>
<pre class=""lang-none prettyprint-override""><code>d: {'AAA': ['111', '112'], 'AAC': ['123'], 'AAB': ['111']}
</code></pre>",6
548,13675296,How to overcome TypeError: unhashable type: 'list',"<p>I'm trying to take a file that looks like this:</p>
<pre class=""lang-none prettyprint-override""><code>AAA x 111
AAB x 111
AAA x 112
AAC x 123
...
</code></pre>
<p>And use a dictionary to so that the output looks like this</p>
<pre><code>{AAA: ['111', '112'], AAB: ['111'], AAC: [123], ...}
</code></pre>
<p>This is what I've tried</p>
<pre><code>file = open(&quot;filename.txt&quot;, &quot;r&quot;) 
readline = file.readline().rstrip()
while readline!= &quot;&quot;:
    list = []
    list = readline.split(&quot; &quot;)
    j = list.index(&quot;x&quot;)
    k = list[0:j]
    v = list[j + 1:]
    d = {}
    if k not in d == False:
        d[k] = []
    d[k].append(v)
    readline = file.readline().rstrip()
</code></pre>
<p>I keep getting a <code>TypeError: unhashable type: 'list'</code>. I know that keys in a dictionary can't be lists but I'm trying to make my value into a list not the key. I'm wondering if I made a mistake somewhere.</p>",python|list|dictionary|typeerror,"<p>You're trying to use <code>k</code> (which is a list) as a key for <code>d</code>. Lists are mutable and can't be used as dict keys.</p>

<p>Also, you're never initializing the lists in the dictionary, because of this line:</p>

<pre><code>if k not in d == False:
</code></pre>

<p>Which should be:</p>

<pre><code>if k not in d == True:
</code></pre>

<p>Which should actually be:</p>

<pre><code>if k not in d:
</code></pre>",27
549,13675296,How to overcome TypeError: unhashable type: 'list',"<p>I'm trying to take a file that looks like this:</p>
<pre class=""lang-none prettyprint-override""><code>AAA x 111
AAB x 111
AAA x 112
AAC x 123
...
</code></pre>
<p>And use a dictionary to so that the output looks like this</p>
<pre><code>{AAA: ['111', '112'], AAB: ['111'], AAC: [123], ...}
</code></pre>
<p>This is what I've tried</p>
<pre><code>file = open(&quot;filename.txt&quot;, &quot;r&quot;) 
readline = file.readline().rstrip()
while readline!= &quot;&quot;:
    list = []
    list = readline.split(&quot; &quot;)
    j = list.index(&quot;x&quot;)
    k = list[0:j]
    v = list[j + 1:]
    d = {}
    if k not in d == False:
        d[k] = []
    d[k].append(v)
    readline = file.readline().rstrip()
</code></pre>
<p>I keep getting a <code>TypeError: unhashable type: 'list'</code>. I know that keys in a dictionary can't be lists but I'm trying to make my value into a list not the key. I'm wondering if I made a mistake somewhere.</p>",python|list|dictionary|typeerror,"<p>As indicated by the other answers, the error is to due to <code>k = list[0:j]</code>, where your key is converted to a list. One thing you could try is reworking your code to take advantage of the <code>split</code> function:</p>

<pre><code># Using with ensures that the file is properly closed when you're done
with open('filename.txt', 'rb') as f:
  d = {}
  # Here we use readlines() to split the file into a list where each element is a line
  for line in f.readlines():
    # Now we split the file on `x`, since the part before the x will be
    # the key and the part after the value
    line = line.split('x')
    # Take the line parts and strip out the spaces, assigning them to the variables
    # Once you get a bit more comfortable, this works as well:
    # key, value = [x.strip() for x in line] 
    key = line[0].strip()
    value = line[1].strip()
    # Now we check if the dictionary contains the key; if so, append the new value,
    # and if not, make a new list that contains the current value
    # (For future reference, this is a great place for a defaultdict :)
    if key in d:
      d[key].append(value)
    else:
      d[key] = [value]

print d
# {'AAA': ['111', '112'], 'AAC': ['123'], 'AAB': ['111']}
</code></pre>

<p>Note that if you are using Python 3.x, you'll have to make a minor adjustment to get it work properly. If you open the file with <code>rb</code>, you'll need to use <code>line = line.split(b'x')</code> (which makes sure you are splitting the byte with the proper type of string). You can also open the file using <code>with open('filename.txt', 'rU') as f:</code> (or even <code>with open('filename.txt', 'r') as f:</code>) and it should work fine.</p>",72
550,13675296,How to overcome TypeError: unhashable type: 'list',"<p>I'm trying to take a file that looks like this:</p>
<pre class=""lang-none prettyprint-override""><code>AAA x 111
AAB x 111
AAA x 112
AAC x 123
...
</code></pre>
<p>And use a dictionary to so that the output looks like this</p>
<pre><code>{AAA: ['111', '112'], AAB: ['111'], AAC: [123], ...}
</code></pre>
<p>This is what I've tried</p>
<pre><code>file = open(&quot;filename.txt&quot;, &quot;r&quot;) 
readline = file.readline().rstrip()
while readline!= &quot;&quot;:
    list = []
    list = readline.split(&quot; &quot;)
    j = list.index(&quot;x&quot;)
    k = list[0:j]
    v = list[j + 1:]
    d = {}
    if k not in d == False:
        d[k] = []
    d[k].append(v)
    readline = file.readline().rstrip()
</code></pre>
<p>I keep getting a <code>TypeError: unhashable type: 'list'</code>. I know that keys in a dictionary can't be lists but I'm trying to make my value into a list not the key. I'm wondering if I made a mistake somewhere.</p>",python|list|dictionary|typeerror,"<pre><code>    python 3.2

    with open(""d://test.txt"") as f:
              k=(((i.split(""\n""))[0].rstrip()).split() for i in f.readlines())
              d={}
              for i,_,v in k:
                      d.setdefault(i,[]).append(v)
</code></pre>",-1
551,13675296,How to overcome TypeError: unhashable type: 'list',"<p>I'm trying to take a file that looks like this:</p>
<pre class=""lang-none prettyprint-override""><code>AAA x 111
AAB x 111
AAA x 112
AAC x 123
...
</code></pre>
<p>And use a dictionary to so that the output looks like this</p>
<pre><code>{AAA: ['111', '112'], AAB: ['111'], AAC: [123], ...}
</code></pre>
<p>This is what I've tried</p>
<pre><code>file = open(&quot;filename.txt&quot;, &quot;r&quot;) 
readline = file.readline().rstrip()
while readline!= &quot;&quot;:
    list = []
    list = readline.split(&quot; &quot;)
    j = list.index(&quot;x&quot;)
    k = list[0:j]
    v = list[j + 1:]
    d = {}
    if k not in d == False:
        d[k] = []
    d[k].append(v)
    readline = file.readline().rstrip()
</code></pre>
<p>I keep getting a <code>TypeError: unhashable type: 'list'</code>. I know that keys in a dictionary can't be lists but I'm trying to make my value into a list not the key. I'm wondering if I made a mistake somewhere.</p>",python|list|dictionary|typeerror,"<p>The reason behind this is the list contains list of values. Like:</p>
<pre><code>a = [[1,2],[1,2],[3,4]]
</code></pre>
<p>And this won't work with something like this:</p>
<pre><code>list(set(a))
</code></pre>
<p>To fix this you can transform the interior list to tuple, like :</p>
<pre><code>a = [(1,2),(1,2),(3,4)]
</code></pre>
<p>This will work !</p>",2
552,13675296,How to overcome TypeError: unhashable type: 'list',"<p>I'm trying to take a file that looks like this:</p>
<pre class=""lang-none prettyprint-override""><code>AAA x 111
AAB x 111
AAA x 112
AAC x 123
...
</code></pre>
<p>And use a dictionary to so that the output looks like this</p>
<pre><code>{AAA: ['111', '112'], AAB: ['111'], AAC: [123], ...}
</code></pre>
<p>This is what I've tried</p>
<pre><code>file = open(&quot;filename.txt&quot;, &quot;r&quot;) 
readline = file.readline().rstrip()
while readline!= &quot;&quot;:
    list = []
    list = readline.split(&quot; &quot;)
    j = list.index(&quot;x&quot;)
    k = list[0:j]
    v = list[j + 1:]
    d = {}
    if k not in d == False:
        d[k] = []
    d[k].append(v)
    readline = file.readline().rstrip()
</code></pre>
<p>I keep getting a <code>TypeError: unhashable type: 'list'</code>. I know that keys in a dictionary can't be lists but I'm trying to make my value into a list not the key. I'm wondering if I made a mistake somewhere.</p>",python|list|dictionary|typeerror,"<p>The <code>TypeError</code> is happening because <code>k</code> is a list, since it is created using a slice from another list with the line <code>k = list[0:j]</code>.  This should probably be something like <code>k = ' '.join(list[0:j])</code>, so you have a string instead.</p>

<p>In addition to this, your <code>if</code> statement is incorrect as noted by Jesse's answer, which should read <code>if k not in d</code> or <code>if not k in d</code> (I prefer the latter).</p>

<p>You are also clearing your dictionary on each iteration since you have <code>d = {}</code> inside of your <code>for</code> loop.</p>

<p>Note that you should also not be using <code>list</code> or <code>file</code> as variable names, since you will be masking builtins.</p>

<p>Here is how I would rewrite your code:</p>

<pre><code>d = {}
with open(""filename.txt"", ""r"") as input_file:
    for line in input_file:
        fields = line.split()
        j = fields.index(""x"")
        k = "" "".join(fields[:j])
        d.setdefault(k, []).append("" "".join(fields[j+1:]))
</code></pre>

<p>The <code>dict.setdefault()</code> method above replaces the <code>if k not in d</code> logic from your code.</p>",0
553,13472479,find indices where 2 list differ,"<p>I have two list. i have to find the indexes where these list differ. </p>

<pre><code>case 1: 
a = ""node1 ip up ether 40  46 server low"".split()
b = ""node1 ip &lt;down&gt; ether &lt;number(s)&gt; server &lt;status&gt;"".split()
output = [ [[2],[2]], 
           [[4,5],[4]],
           [[7],[6]]  ]

case 2:
a = ' label 0 12000 '.split()
b = ' label  &lt;number&gt;  &lt;number&gt;'.split()
output = [ [[1,2],[1,2]] ]
</code></pre>

<p>a,b are input list and output is a result list. 
Element in b which differ with a are in enclosed in <code>&lt;&gt;</code> for eg. <code>&lt;blabla&gt;</code> 
In case 1 and case 2, <code>output[i][0]</code> gives indices for <code>a</code> and <code>output[i][1]</code> gives indices for <code>b</code>.</p>

<ol>
<li>In case 1, <code>up</code> and <code>&lt;down&gt;</code> differ at position <code>[2,2]</code>. <code>40, 46</code> and <code>&lt;number(s)&gt;</code> differ at position <code>[4,5],[4]</code> and so on.</li>
<li>In case 2, <code>output[0][0] = [1,2]</code> corresponds to <code>0 12000</code> and <code>output[0][1] =[1,2]</code> corresponds to <code>&lt;number&gt; &lt;number&gt;</code>. </li>
</ol>",python|list,"<p>This gives the requested output for the given two cases. </p>

<pre><code>import difflib

def diff_indices(a, b):
    sm = difflib.SequenceMatcher(a=a, b=b)
    res = []
    for tag, i1, i2, j1, j2 in sm.get_opcodes():
        if tag == 'replace':
            res.append([range(i1,i2), range(j1,j2)])
    return res

print diff_indices(
    a=""node1 ip up ether 40  46 server low"".split(),
    b=""node1 ip &lt;down&gt; ether &lt;number(s)&gt; server &lt;status&gt;"".split())
#[[[2], [2]], [[4, 5], [4]], [[7], [6]]]
print diff_indices(
    a=' label 0 12000 '.split(),
    b=' label  &lt;number&gt;  &lt;number&gt;'.split())
#[[[1, 2], [1, 2]]]
</code></pre>

<p>It is not clear what you expect in e.g. this case:</p>

<pre><code>a = ""node1 ip up ether 40  46 server low"".split()
b = ""node1 ip &lt;down&gt; ether server &lt;status&gt;"".split()
</code></pre>",1
554,13472479,find indices where 2 list differ,"<p>I have two list. i have to find the indexes where these list differ. </p>

<pre><code>case 1: 
a = ""node1 ip up ether 40  46 server low"".split()
b = ""node1 ip &lt;down&gt; ether &lt;number(s)&gt; server &lt;status&gt;"".split()
output = [ [[2],[2]], 
           [[4,5],[4]],
           [[7],[6]]  ]

case 2:
a = ' label 0 12000 '.split()
b = ' label  &lt;number&gt;  &lt;number&gt;'.split()
output = [ [[1,2],[1,2]] ]
</code></pre>

<p>a,b are input list and output is a result list. 
Element in b which differ with a are in enclosed in <code>&lt;&gt;</code> for eg. <code>&lt;blabla&gt;</code> 
In case 1 and case 2, <code>output[i][0]</code> gives indices for <code>a</code> and <code>output[i][1]</code> gives indices for <code>b</code>.</p>

<ol>
<li>In case 1, <code>up</code> and <code>&lt;down&gt;</code> differ at position <code>[2,2]</code>. <code>40, 46</code> and <code>&lt;number(s)&gt;</code> differ at position <code>[4,5],[4]</code> and so on.</li>
<li>In case 2, <code>output[0][0] = [1,2]</code> corresponds to <code>0 12000</code> and <code>output[0][1] =[1,2]</code> corresponds to <code>&lt;number&gt; &lt;number&gt;</code>. </li>
</ol>",python|list,"<p>Following should work. </p>

<pre><code>lista=""abcd""
listb=""accd""
print [ i for i in xrange(min(len(lista),len(listb))) if lista[i] != listb[i] ]
</code></pre>",0
555,13472479,find indices where 2 list differ,"<p>I have two list. i have to find the indexes where these list differ. </p>

<pre><code>case 1: 
a = ""node1 ip up ether 40  46 server low"".split()
b = ""node1 ip &lt;down&gt; ether &lt;number(s)&gt; server &lt;status&gt;"".split()
output = [ [[2],[2]], 
           [[4,5],[4]],
           [[7],[6]]  ]

case 2:
a = ' label 0 12000 '.split()
b = ' label  &lt;number&gt;  &lt;number&gt;'.split()
output = [ [[1,2],[1,2]] ]
</code></pre>

<p>a,b are input list and output is a result list. 
Element in b which differ with a are in enclosed in <code>&lt;&gt;</code> for eg. <code>&lt;blabla&gt;</code> 
In case 1 and case 2, <code>output[i][0]</code> gives indices for <code>a</code> and <code>output[i][1]</code> gives indices for <code>b</code>.</p>

<ol>
<li>In case 1, <code>up</code> and <code>&lt;down&gt;</code> differ at position <code>[2,2]</code>. <code>40, 46</code> and <code>&lt;number(s)&gt;</code> differ at position <code>[4,5],[4]</code> and so on.</li>
<li>In case 2, <code>output[0][0] = [1,2]</code> corresponds to <code>0 12000</code> and <code>output[0][1] =[1,2]</code> corresponds to <code>&lt;number&gt; &lt;number&gt;</code>. </li>
</ol>",python|list,"<pre><code>a = ""node1 ip up ether 40  46 server low"".split()
b = ""node1 ip &lt;down&gt; ether &lt;number(s)&gt; server &lt;status&gt;"".split()

if len(a) &gt; len(b):
    b,a = a,b

a_it = iter(a)
b_it = iter(b)

diffs = []
a_diff = []
b_diff = []

i = 0
start = 0
while i &lt; len(a):
    j = i
    while j &lt; len(b):
        if a[i] == b[j]:
            if a_diff:
                b_diff = range(start,j)
                diffs.append([a_diff,b_diff])
                a_diff = []
                b_diff = []
            i = i + 1
            start = j + 1
        j = j + 1
    a_diff.append(i)
    i = i + 1


if a_diff:
    b_diff = range(start,j)
    diffs.append([a_diff,b_diff])

print diffs
</code></pre>",0
556,13472479,find indices where 2 list differ,"<p>I have two list. i have to find the indexes where these list differ. </p>

<pre><code>case 1: 
a = ""node1 ip up ether 40  46 server low"".split()
b = ""node1 ip &lt;down&gt; ether &lt;number(s)&gt; server &lt;status&gt;"".split()
output = [ [[2],[2]], 
           [[4,5],[4]],
           [[7],[6]]  ]

case 2:
a = ' label 0 12000 '.split()
b = ' label  &lt;number&gt;  &lt;number&gt;'.split()
output = [ [[1,2],[1,2]] ]
</code></pre>

<p>a,b are input list and output is a result list. 
Element in b which differ with a are in enclosed in <code>&lt;&gt;</code> for eg. <code>&lt;blabla&gt;</code> 
In case 1 and case 2, <code>output[i][0]</code> gives indices for <code>a</code> and <code>output[i][1]</code> gives indices for <code>b</code>.</p>

<ol>
<li>In case 1, <code>up</code> and <code>&lt;down&gt;</code> differ at position <code>[2,2]</code>. <code>40, 46</code> and <code>&lt;number(s)&gt;</code> differ at position <code>[4,5],[4]</code> and so on.</li>
<li>In case 2, <code>output[0][0] = [1,2]</code> corresponds to <code>0 12000</code> and <code>output[0][1] =[1,2]</code> corresponds to <code>&lt;number&gt; &lt;number&gt;</code>. </li>
</ol>",python|list,"<p>Try</p>

<pre><code>[k for k, v in enumerate(zip(a,b)) if not v[0] == v[1]]
</code></pre>",1
557,10961484,Variables scope in python,"<p>My question might be simple but I really cannot figure out where I went wrong.
I would like to pass one variable from a function to another function. I use return therefore but I'm always getting an error message, that my variable is not defined.</p>

<p>My code is:</p>

<pre><code>url = ""http://www.419scam.org/emails/2004-01/30/001378.7.htm""

def FirstStrike(url):
    ...
    return tokens

def analyze(tokens):
    ...

if __name__ == ""__main__"":
    FirstStrike(url)
    analyze(tokens)
</code></pre>

<p>If I run this I got an error message: NameError: name 'tokens' is not defined.</p>",python|variables|scope,"<pre><code>tokens = FirstStrike(url)
</code></pre>

<p>You must assign FirstStrike return value to tokens variable before calling analyze(tokens)</p>",4
558,10961484,Variables scope in python,"<p>My question might be simple but I really cannot figure out where I went wrong.
I would like to pass one variable from a function to another function. I use return therefore but I'm always getting an error message, that my variable is not defined.</p>

<p>My code is:</p>

<pre><code>url = ""http://www.419scam.org/emails/2004-01/30/001378.7.htm""

def FirstStrike(url):
    ...
    return tokens

def analyze(tokens):
    ...

if __name__ == ""__main__"":
    FirstStrike(url)
    analyze(tokens)
</code></pre>

<p>If I run this I got an error message: NameError: name 'tokens' is not defined.</p>",python|variables|scope,"<p>When you run the code, you haven't assigned the result of <code>FirstStrike</code> to a variable:</p>

<pre><code>if __name__ == ""__main__"":
    tokens = FirstStrike(url)
    analyze(tokens)
</code></pre>

<p>This is necessary because otherwise <code>tokens</code> is not defined when you call <code>analyze</code>.</p>",9
559,10883744,uWSGI [+ nginx] file descriptor error (no such file or directory),"<p>I'm trying to configure uWSGI for a Django project. Unfortunately when I run the uwsgi executable it fails with a weird error:</p>

<pre><code>$ bin/uwsgi -s sock/uwsgi.sock --chdir testit --vacuum \
--env DJANGO_SETTINGS_MODULE=testit.testit.settings --wsgi-file testit/wsgi.py --master
*** Starting uWSGI 1.2.3 (32bit) on [Mon Jun  4 17:14:52 2012] ***
compiled with version: 4.7.0 20120414 (prerelease) on 04 June 2012 16:20:49
detected number of CPU cores: 2
current working directory: /home/miki/sites/testit
detected binary path: /home/miki/sites/testit/bin/uwsgi
your memory page size is 4096 bytes
detected max file descriptor number: 1024
lock engine: pthread robust mutexes
bind(): No such file or directory [socket.c line 107]
</code></pre>

<p>I haven't the foggiest idea of what to do... I tried with <code>ulimit</code> and it didn't work.</p>",python|uwsgi,"<p>It seems that the <code>chdir</code> command is executed before anything else, so it can't find the files if you use relative paths. Try using the full path in your arguments:</p>

<pre><code>bin/uwsgi -s $PWD/sock/uwsgi.sock --chdir testit --vacuum \
--env DJANGO_SETTINGS_MODULE=testit.testit.settings \
--wsgi-file $PWD/testit/wsgi.py --master
</code></pre>",2
560,11377444,cannot follow the python git tutorials,"<p>I have lately installed python-git package, and when trying to follow the tutorials over at the following link, I find that certain methods are missing...</p>

<p><a href=""http://packages.python.org/GitPython/0.3.2/tutorial.html#tutorial-label"" rel=""nofollow"">http://packages.python.org/GitPython/0.3.2/tutorial.html#tutorial-label</a></p>

<p>Here is what came out of my interpreter:</p>

<pre><code>&gt;&gt;&gt; from git import *
&gt;&gt;&gt; repo = Repo.init('/home/deostroll/scripts/synchost')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
AttributeError: type object 'Repo' has no attribute 'init'
&gt;&gt;&gt; repo = Repo('/home/deostroll/scripts/synchost')
&gt;&gt;&gt; repo.is_dirty()
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: 'bool' object is not callable
&gt;&gt;&gt; 
</code></pre>",python|git|gitpython,"<p>It seems likely that you're using a very outdated verison of <code>GitPython</code>. In version 0.3, <a href=""https://github.com/gitpython-developers/GitPython/blob/0.3/git/repo/base.py#L486"" rel=""nofollow""><code>is_dirty</code></a> is a method, and <a href=""https://github.com/gitpython-developers/GitPython/blob/0.3/git/repo/base.py#L636"" rel=""nofollow""><code>init</code></a> exists. </p>

<p>In version 0.1, <code>is_dirty</code> is a <a href=""https://github.com/gitpython-developers/GitPython/blob/0.1/lib/git/repo.py#L483"" rel=""nofollow"">property</a>, and <a href=""https://github.com/gitpython-developers/GitPython/blob/0.1/lib/git/repo.py#L302"" rel=""nofollow""><code>init_bare</code></a> is defined, but not <code>init</code>.</p>",2
561,11377444,cannot follow the python git tutorials,"<p>I have lately installed python-git package, and when trying to follow the tutorials over at the following link, I find that certain methods are missing...</p>

<p><a href=""http://packages.python.org/GitPython/0.3.2/tutorial.html#tutorial-label"" rel=""nofollow"">http://packages.python.org/GitPython/0.3.2/tutorial.html#tutorial-label</a></p>

<p>Here is what came out of my interpreter:</p>

<pre><code>&gt;&gt;&gt; from git import *
&gt;&gt;&gt; repo = Repo.init('/home/deostroll/scripts/synchost')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
AttributeError: type object 'Repo' has no attribute 'init'
&gt;&gt;&gt; repo = Repo('/home/deostroll/scripts/synchost')
&gt;&gt;&gt; repo.is_dirty()
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: 'bool' object is not callable
&gt;&gt;&gt; 
</code></pre>",python|git|gitpython,"<p>Those commands work for me, so I agree with the other answer that you're probably using an outdated version.  If you're on linux and have <a href=""http://pypi.python.org/pypi/pip/"" rel=""nofollow"">PIP</a>, installed, on the command line you can do:</p>

<pre><code>pip install --upgrade GitPython
</code></pre>

<p>to upgrade to the latest version.  (Sidenote: for me on Fedora, the command is actually pip-python, so it depends on your distro).</p>",2
562,11404229,retrieve local html form,"<p>I have a html page that contains a form and I would like a user to be able to input some data in the form. I would then retrieve this data with a python script. </p>

<p>I don't understand how to make the html and python communicate. How can the python retrieve the form after the user has clicked on post? Is there a basic example I can use to demonstrate this?</p>",python|html|forms,"<p>What you need is an HTTP server. Python can be used to make a server, or you could get one such as Apache or Lighttpd. I wrote an example application (Rock, Paper, Scissors) based off of this a while ago: <a href=""https://dl.dropboxusercontent.com/u/95437705/RPS_Web.tgz"" rel=""nofollow"">https://dl.dropboxusercontent.com/u/95437705/RPS_Web.tgz</a></p>",2
563,11404229,retrieve local html form,"<p>I have a html page that contains a form and I would like a user to be able to input some data in the form. I would then retrieve this data with a python script. </p>

<p>I don't understand how to make the html and python communicate. How can the python retrieve the form after the user has clicked on post? Is there a basic example I can use to demonstrate this?</p>",python|html|forms,"<p>C0deH4cker is right that you should have your python program running somewhere in some kind of web server. </p>

<p>A proper way to do this for larger projects is to use a web framework like Django or Web2py. These frameworks have excellent documentation and tutorial pages that are well worth the effort of consuming. A smaller benefit is that both have their own built-in webserver for development an small deployment.</p>

<p>Another way is to write python code that has a web server of its own. You could have a look at Twisted, the networking framework for python. Good info is at <a href=""http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html"" rel=""nofollow"">http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html</a>. </p>

<p>Finally -- but this is considered a bit outdated, I guess (??) -- there is the CGI option you describe. Most web servers like apache and lighttpd have the option to run CGI scripts. CGI scripts are very simple programs that, in their simplest form, when run, output HTML code on their stdout. The webserver looks at the first (""shebang"") line in the script to determine the script interpreter, executes the script, picks up the output and serves it over HTTP.</p>

<p>Specific provisions have been made in CGI for parameter passing. In the Python CGI module, these are obtainable through cgi.FieldStorage()</p>

<p>First for some HTML:</p>

<p>An HTML form has an ""action"" and a ""method"" attribute. Action is the URL (absolute, or relative to the current path) where it will send the form data to; Method is the method to use, usually for a form with a submit button this is ""POST"".</p>

<p>So if you have this HTML code running somewhere:</p>

<pre><code>&lt;html&gt;
&lt;body&gt;
  &lt;form name=""sample"" action=""cgi-bin/myscript.cgi"" method=""post""&gt;
    Name: &lt;input type=""text"" name=""name""/&gt;
    &lt;input type=""submit"" value=""Submit""/&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>When the user presses the submit button, all input values are posted to the URL ""myprogram.cgi"". </p>

<p>A good text on what CGI code should look like is in <a href=""http://docs.python.org/library/cgi.html"" rel=""nofollow"">http://docs.python.org/library/cgi.html</a> .</p>

<p>Some code that should work is:</p>

<pre><code>import cgi

print ""Content-Type: text/html""     # HTML is following
print                               # blank line, end of headers

print ""&lt;TITLE&gt;CGI script output&lt;/TITLE&gt;""
print ""&lt;body&gt;\n""
print ""&lt;H1&gt;This is my first CGI script&lt;/H1&gt;""
print ""Hello, world!""

form = cgi.FieldStorage()
if ""name"" not in form: 
    print ""&lt;H1&gt;Error&lt;/H1&gt;""
    print ""Please fill in the name fields""
else:
    print ""&lt;p&gt;name:"", form[""name""].value
print ""&lt;/body&gt;""
</code></pre>

<p>Now, it is important that you realize that you have to make this code available on the specified URL from a web server. How you should do this depends on your web server.</p>

<p>On apache under linux, you would normally put the script in /var/www/cgi-bin. Possibly you should enable cgi execution in the apache configuration, as it may be switched off for security reasons.</p>",1
564,11059330,"Best way to eliminate duplicates in a list, but keep previous relative order","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/480214/how-do-you-remove-duplicates-from-a-list-in-python-whilst-preserving-order"">How do you remove duplicates from a list in Python whilst preserving order?</a><br>
  <a href=""https://stackoverflow.com/questions/1653970/does-python-have-an-ordered-set"">Does Python have an ordered set?</a>  </p>
</blockquote>



<p>I find myself doing the following quite frequently:</p>

<pre><code>list_of_items # I have a list of items
set(list_of_items) # I want to remove duplicates
</code></pre>

<p>However, in converting to a <code>set</code>, I lose the initial ordering I had in the list, which is important.</p>

<p>What is the best way to remove duplicates in a list AND keep the initial (relative) ordering of the list?</p>",python,"<p>Use a dictionary to remove duplicates, use the data as keys and anything as values. If it's in the dict, don't add it again.</p>

<pre><code>d = dict()
for i in range(0, len(list_of_items)):
    if(list_of_items[i] not in d):
        d[list_of_items[i]] = i
        list_of_items2.append(list_of_items[i])
</code></pre>",0
565,11059330,"Best way to eliminate duplicates in a list, but keep previous relative order","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/480214/how-do-you-remove-duplicates-from-a-list-in-python-whilst-preserving-order"">How do you remove duplicates from a list in Python whilst preserving order?</a><br>
  <a href=""https://stackoverflow.com/questions/1653970/does-python-have-an-ordered-set"">Does Python have an ordered set?</a>  </p>
</blockquote>



<p>I find myself doing the following quite frequently:</p>

<pre><code>list_of_items # I have a list of items
set(list_of_items) # I want to remove duplicates
</code></pre>

<p>However, in converting to a <code>set</code>, I lose the initial ordering I had in the list, which is important.</p>

<p>What is the best way to remove duplicates in a list AND keep the initial (relative) ordering of the list?</p>",python,"<p>Slightly hackish, but ...</p>

<pre><code>item_list = [x[1] for x in sorted(x[::-1] for x in dict(zip(item_list[::-1],range(len(item_list)))).items())][::-1]
</code></pre>",0
566,11059330,"Best way to eliminate duplicates in a list, but keep previous relative order","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/480214/how-do-you-remove-duplicates-from-a-list-in-python-whilst-preserving-order"">How do you remove duplicates from a list in Python whilst preserving order?</a><br>
  <a href=""https://stackoverflow.com/questions/1653970/does-python-have-an-ordered-set"">Does Python have an ordered set?</a>  </p>
</blockquote>



<p>I find myself doing the following quite frequently:</p>

<pre><code>list_of_items # I have a list of items
set(list_of_items) # I want to remove duplicates
</code></pre>

<p>However, in converting to a <code>set</code>, I lose the initial ordering I had in the list, which is important.</p>

<p>What is the best way to remove duplicates in a list AND keep the initial (relative) ordering of the list?</p>",python,"<p>This is somewhat of an abuse of list comprehensions, but:</p>

<pre><code>seen = set()
item_list = [seen.add(item) or item for item in item_list if item not in seen]
</code></pre>",7
567,10884253,Python for loop with a more intuitive upper bound?,<p>Sometimes it is a little confusing for me to keep in mind that the upperbound for a for loop is excluded by default. Is there any way to make it inclusive?</p>,python|for-loop,"<p>Nine times out of ten, if you are writing a Python <code>for</code> loop that iterates through a range of numbers and then use those numbers to index into a list or other container, you're doing it wrong.  In other words, instead of doing this:</p>

<pre><code>for i in range(len(container)):
    print container[i]
</code></pre>

<p>You should be doing this:</p>

<pre><code>for item in container:
    print item
</code></pre>

<p>But wait! you object. What if I need the index because I'm going to modify the items in some way?  The Pythonic way to do this is with the <code>enumerate()</code> built-in function.</p>

<pre><code>for i, item in enumerate(container):
    print item
    container[i] += 1
</code></pre>

<p>If you don't mind making a copy of your list, then the list comprehension often is the best choice:</p>

<pre><code>container = [item + 1 for item in container]
</code></pre>

<p>Or if you need to modify the list in place, try this, which combines a slice assignment (to replace the existing list) and a generator expression (to lazily modify the items):</p>

<pre><code> container[:] = (item + 1 for item in container)
</code></pre>",11
568,10884253,Python for loop with a more intuitive upper bound?,<p>Sometimes it is a little confusing for me to keep in mind that the upperbound for a for loop is excluded by default. Is there any way to make it inclusive?</p>,python|for-loop,"<p>You could define one without too much pain:</p>

<pre><code>def fullrange(lower, upper, step = 1):
    return range(lower, upper + 1, step)
</code></pre>

<p>But as others have said, it may just be better to get used to<code>range(lower, upper + 1)</code>.  I'd say the intentions with the <code>+ 1</code> are pretty clear.</p>",0
569,10884253,Python for loop with a more intuitive upper bound?,<p>Sometimes it is a little confusing for me to keep in mind that the upperbound for a for loop is excluded by default. Is there any way to make it inclusive?</p>,python|for-loop,<p>You'll get used to it. Just add one to the upper bound.</p>,2
570,10884253,Python for loop with a more intuitive upper bound?,<p>Sometimes it is a little confusing for me to keep in mind that the upperbound for a for loop is excluded by default. Is there any way to make it inclusive?</p>,python|for-loop,"<p>Yes, <code>for i in range(upper + 1)</code> or if you like, <code>for i in range(lower, upper + 1)</code> will work,</p>

<p>A lot of programming languages use zero-based indexing, so the non-inclusive upper bound is a common practice (this is due to memory addressing and adding an offset)</p>

<p>Just an example: If you had an array of size 5, <code>ar</code>, starting with index <strong>0</strong>, <em>your largest valid index</em> value would be <strong>4</strong> (i.e., 0, 1, 2, 3, 4), but your loop construct would refer to the size of the array (5) like so:</p>

<p><code>for i in range(5):</code> </p>

<p>or more common and better:</p>

<p><code>for i in range(len(ar)):</code></p>

<p>.. ensuring you only get legal index values 0 .. 4.</p>",7
571,11391700,Heroku raising 500 instead of 404 with Django app,"<p>I have designed my app's <code>URLS</code> to match all the criteria and find it works perfectly on my local machine with <code>DEBUG=FALSE</code> however when deployed to <a href=""http://heroku.com/"" rel=""nofollow"">Heroku</a> I seem to have a problem where all urls that should raise a <strong>404</strong> ends up raising a <strong>500</strong> ?</p>

<p>Has anyone encountered this before? </p>

<p>my URL pattern</p>

<pre><code>url(r'^$', 'index', name='dashboard_index'),
</code></pre>

<p>when retrieving <code>http://localhost:5000/123/</code> it raises a 404 page</p>

<p>when retrieving <code>http://myapp.com/123/</code> it raises a 500 page</p>",python|django|heroku|django-urls,"<p>In my experience, 90% of the time, 500 on 404 is caused by missing 404.html template. You're saying that you have it working locally, but I would still check if that template made to heroku, and if can cause any kind of error.</p>",2
572,11391700,Heroku raising 500 instead of 404 with Django app,"<p>I have designed my app's <code>URLS</code> to match all the criteria and find it works perfectly on my local machine with <code>DEBUG=FALSE</code> however when deployed to <a href=""http://heroku.com/"" rel=""nofollow"">Heroku</a> I seem to have a problem where all urls that should raise a <strong>404</strong> ends up raising a <strong>500</strong> ?</p>

<p>Has anyone encountered this before? </p>

<p>my URL pattern</p>

<pre><code>url(r'^$', 'index', name='dashboard_index'),
</code></pre>

<p>when retrieving <code>http://localhost:5000/123/</code> it raises a 404 page</p>

<p>when retrieving <code>http://myapp.com/123/</code> it raises a 500 page</p>",python|django|heroku|django-urls,"<p>When you set <code>DEBUG</code> to <code>False</code>, you need to provide a <code>404.html</code> and a <code>500.html</code> somewhere that is in <code>TEMPLATE_DIRS</code>. If you don't provide these, it raises a <code>TemplateDoesNotExist</code> exception, which is caught as a <code>500</code> error.</p>",4
573,20128650,Issue with my 'very simple' Python Calculator,"<p>I have written another simple program that I call my basic 'Python Calculator.' So far, I have found a problem with some of the code that I have written in Python 3.3.2. Here is the code below so you can read it before I state my problem...</p>

<pre><code>def startup_screen():
    user_input_1 = int(input(""Please enter your first number.\n""))
    user_input_2 = int(input(""Now please enter your second number.\n""))
    command_list()

def command_list():
    user_command = input(""Now what would you like to do with these two numbers?\n"").lower()

    if user_command == ""add"":
        calc_add()
    elif user_command == ""subtract"":
        calc_subtract()
    elif user_command == ""multiply"":
        calc_multiply()
    elif user_command == ""divide"":
        calc_divide
    else:
        print(""Please try again."")
        user_command

def calc_add():
    add_result = (user_input_1+user_input_2)
    print(add_result)
    command_list()

def calc_subtract():
    subtract_result = (user_input_1-user_input_2)
    print(subtract_result)
    command_list()

def calc_multiply():
    multiply_result = (user_input_1*user_input_2)
    print(multiply_result)
    command_list()

def calc_divide():
    divide_result = (user_input_1/user_input_2)
    print(divide_result)
    command_list()

startup_screen()
</code></pre>

<p>Here, you can see that I have defined the <code>startup_screen</code>, which collects user input as an integer and then stores it respectively in <code>user_1</code> and <code>user_2</code>. Then, the user is taken to the command home screen where they can choose to either add, subtract, multiply or divide both numbers. The command is then determined from the user input, so if the user wants to add two numbers, they type in 'add' and they are taken to the add function - as defined above.</p>

<p><strong>However</strong>, in the add function, the user_1 and user_2 inputs are not recognized, as well as in the other programs... so it causes an error in the in the program. I have no idea what to do. Could you please help me?</p>

<p>Thank you very much...</p>",python|function,"<p>Give the inputs as arguments to the functions that follow, the values are not global variables (not immediately accessible by any function) if they are defined within a function. </p>

<pre><code>def loadscreen():
    ...
    command_home(user_input_1,user_input_2)

def command_home(user_input_1,user_input_2):
    ...
    calc_add(user_input_1,user_input_2)

def calc_add(user_input_1,user_input_2)
    add_result = (user_input_1 + user_input_2)
    print(add_result)
</code></pre>",0
574,20128650,Issue with my 'very simple' Python Calculator,"<p>I have written another simple program that I call my basic 'Python Calculator.' So far, I have found a problem with some of the code that I have written in Python 3.3.2. Here is the code below so you can read it before I state my problem...</p>

<pre><code>def startup_screen():
    user_input_1 = int(input(""Please enter your first number.\n""))
    user_input_2 = int(input(""Now please enter your second number.\n""))
    command_list()

def command_list():
    user_command = input(""Now what would you like to do with these two numbers?\n"").lower()

    if user_command == ""add"":
        calc_add()
    elif user_command == ""subtract"":
        calc_subtract()
    elif user_command == ""multiply"":
        calc_multiply()
    elif user_command == ""divide"":
        calc_divide
    else:
        print(""Please try again."")
        user_command

def calc_add():
    add_result = (user_input_1+user_input_2)
    print(add_result)
    command_list()

def calc_subtract():
    subtract_result = (user_input_1-user_input_2)
    print(subtract_result)
    command_list()

def calc_multiply():
    multiply_result = (user_input_1*user_input_2)
    print(multiply_result)
    command_list()

def calc_divide():
    divide_result = (user_input_1/user_input_2)
    print(divide_result)
    command_list()

startup_screen()
</code></pre>

<p>Here, you can see that I have defined the <code>startup_screen</code>, which collects user input as an integer and then stores it respectively in <code>user_1</code> and <code>user_2</code>. Then, the user is taken to the command home screen where they can choose to either add, subtract, multiply or divide both numbers. The command is then determined from the user input, so if the user wants to add two numbers, they type in 'add' and they are taken to the add function - as defined above.</p>

<p><strong>However</strong>, in the add function, the user_1 and user_2 inputs are not recognized, as well as in the other programs... so it causes an error in the in the program. I have no idea what to do. Could you please help me?</p>

<p>Thank you very much...</p>",python|function,"<p>Lets look at you program from the point of view of the <code>def calc_add():</code> function. </p>

<p>In the first line,</p>

<pre><code>add_result = (user_input_1 + user_input_2)
</code></pre>

<p>you say, take the value of <code>user_input_1</code> add it to <code>user_input_2</code> and make that into the variable <code>add_result</code>. Okay that makes sense. </p>

<p>Now lets get the first value <code>user_input_1</code>... lets see, first place to check is the 'local scope'. That is the function i am currently in. </p>

<pre><code>def calc_add():
    add_result = (user_input_1 + user_input_2)
    print(add_result)
</code></pre>

<p>Okay nope, nothing there... okay maybe it was one of the input parameters ? </p>

<pre><code>def calc_add():
</code></pre>

<p>Nope no input parameters were passed to this function. Okay it must be global ... but wait crap... no global parameters are ever decalred! especially not <code>user_input_1</code>. Well dang it, im supposed to add two parameters but one of the parameters doesnt exist! Thats not possible I better throw an error! </p>

<p>Maybe if the programmer had passed me the information i needed it would work better,
Maybe something like this :</p>

<pre><code>def load_screen():
    user_1 = int(input(""Please enter your first number.\n""))
    user_2 = int(input(""Now please enter your second number.\n""))
    command_home( user_1, user_2) # Okay command_home I took 2 inputs! 
                                  # Here they are work your magic!



def command_home(in1, in2): # Hey I need 2 varaibles to work, Ill call them in1 and in2.
                            # so based on the way command_home( user_1, user_2) is called
                            # in1 = user_1, in2 = user_2 
    command = input(""Now what would you like to do with these two numbers?\n"").lower()
    if command == ""add"":
        calc_add(in1, in2) #Okay, now i need to add my two inputs,
                           # but calc_add is another function it wont be able to see MY
                           # in1, in2 ...  i better pass them over as parameters.
    elif command == ""subtract"":
        calc_subtract()
    elif command == ""multiply"":
        calc_multiply()
    elif command == ""divide"":
        calc_divide()



def calc_add(user_input_1,user_input_2 ): # Okay now i know where to look for user_input_1 
                                          # and user_input_2, they will be passed to me
                                          # when someone calls me! Now i can find my varables
                                          # and i wont throw an error!
    add_result = (user_input_1 + user_input_2)
    print(add_result)
</code></pre>",0
575,20128650,Issue with my 'very simple' Python Calculator,"<p>I have written another simple program that I call my basic 'Python Calculator.' So far, I have found a problem with some of the code that I have written in Python 3.3.2. Here is the code below so you can read it before I state my problem...</p>

<pre><code>def startup_screen():
    user_input_1 = int(input(""Please enter your first number.\n""))
    user_input_2 = int(input(""Now please enter your second number.\n""))
    command_list()

def command_list():
    user_command = input(""Now what would you like to do with these two numbers?\n"").lower()

    if user_command == ""add"":
        calc_add()
    elif user_command == ""subtract"":
        calc_subtract()
    elif user_command == ""multiply"":
        calc_multiply()
    elif user_command == ""divide"":
        calc_divide
    else:
        print(""Please try again."")
        user_command

def calc_add():
    add_result = (user_input_1+user_input_2)
    print(add_result)
    command_list()

def calc_subtract():
    subtract_result = (user_input_1-user_input_2)
    print(subtract_result)
    command_list()

def calc_multiply():
    multiply_result = (user_input_1*user_input_2)
    print(multiply_result)
    command_list()

def calc_divide():
    divide_result = (user_input_1/user_input_2)
    print(divide_result)
    command_list()

startup_screen()
</code></pre>

<p>Here, you can see that I have defined the <code>startup_screen</code>, which collects user input as an integer and then stores it respectively in <code>user_1</code> and <code>user_2</code>. Then, the user is taken to the command home screen where they can choose to either add, subtract, multiply or divide both numbers. The command is then determined from the user input, so if the user wants to add two numbers, they type in 'add' and they are taken to the add function - as defined above.</p>

<p><strong>However</strong>, in the add function, the user_1 and user_2 inputs are not recognized, as well as in the other programs... so it causes an error in the in the program. I have no idea what to do. Could you please help me?</p>

<p>Thank you very much...</p>",python|function,"<p>You are not passing the user's input into the later functions which rely on it, such as calc_add().</p>

<p>The way to fix this problems would be to modify your code like so:</p>

<pre><code>def startup_screen():
    user_1 = int(input(""Please enter your first number.\n""))
    user_2 = int(input(""Now please enter your second number.\n""))
    command_home(user_1,user_2)

def command_home(u1,u2):
    command = input(""Now what would you like to do with these two numbers?\n"").lower()
    if command == ""add"":
        calc_add(u1,u2)
    elif command == ""subtract"":
        calc_subtract(u1,u2)
    elif command == ""multiply"":
        calc_multiply(u1,u2)
    elif command == ""divide"":
        calc_divide(u1,u2)

def calc_add(user_input_1,user_input_2):
    add_result = (user_input_1 + user_input_2)
    print(add_result)

""""""the rest of the functions go here, must be defined to take the inputs passed""""""

startup_screen()
</code></pre>

<p>We have redefined command_home to take two objects as inputs (which should be the <code>user_1</code> and <code>user_2</code> from <code>load_screen</code>). You could call them anything but I called them <code>u1</code> and <code>u2</code> so I wouldn't have to type so much. Now, <code>command_home</code> has these values and can, in turn, pass them into the functions which it calls that need them. We have also changed all of the function calls inside the <code>if</code>/<code>elif</code> block so that <code>u1</code> and <code>u2</code> are passed into those functions.</p>

<p>Then, we have redifined <code>calc_add</code> to take two inputs, and I called them the same as you did already inside the function, so I would have one less line to change - <code>user_input_1</code> and <code>user_input_2</code>.</p>

<p>Now when you ask for them to be added together into <code>add_result</code>, they exist and have the expected values, so everything now works.</p>",0
576,20035655,"Can I use the ""as"" mechanism in an if statement","<p>Is it possible to use <code>as</code> in <code>if</code> statement like <code>with</code> that we use, for example:</p>

<pre><code>with open(""/tmp/foo"", ""r"") as ofile:
    # do_something_with_ofile
</code></pre>

<p>This is my code:</p>

<pre><code>def my_list(rtrn_lst=True):
    if rtrn_lst:
        return [12, 14, 15]
    return []

if my_list():
      print(my_list()[2] * mylist()[0] / mylist()[1])
</code></pre>

<p>Can I use <code>if</code> in this type:</p>

<pre><code>if my_list() as lst:
     print(lst[2] * lst[0] / lst[1])
</code></pre>

<p>In first <code>if</code> I called <code>my_list</code> four times. I can use a variable but I want to know is there any way to use <code>as</code>?</p>",python|if-statement,"<p>No.  The Python grammar does not allow using ""<code>as</code>"" outside of <code>with</code>, <code>except</code>, or <code>import</code> constructs.  You should instead do:</p>

<pre><code>lst = my_list()
if lst:
     print(lst[2] * lst[0] / lst[1])
</code></pre>",1
577,20035655,"Can I use the ""as"" mechanism in an if statement","<p>Is it possible to use <code>as</code> in <code>if</code> statement like <code>with</code> that we use, for example:</p>

<pre><code>with open(""/tmp/foo"", ""r"") as ofile:
    # do_something_with_ofile
</code></pre>

<p>This is my code:</p>

<pre><code>def my_list(rtrn_lst=True):
    if rtrn_lst:
        return [12, 14, 15]
    return []

if my_list():
      print(my_list()[2] * mylist()[0] / mylist()[1])
</code></pre>

<p>Can I use <code>if</code> in this type:</p>

<pre><code>if my_list() as lst:
     print(lst[2] * lst[0] / lst[1])
</code></pre>

<p>In first <code>if</code> I called <code>my_list</code> four times. I can use a variable but I want to know is there any way to use <code>as</code>?</p>",python|if-statement,"<p>You need to use a variable. <code>with</code> supports the <code>as</code>-variable because the object assigned to it is <em>not</em> the result of evaluating the <code>with</code>-expression. (It is the value returned by that result's <code>__enter__</code> method, see <a href=""http://docs.python.org/release/2.5/whatsnew/pep-352.html"" rel=""nofollow"">http://docs.python.org/release/2.5/whatsnew/pep-352.html</a>. With (most) other statements, it's easy enough to catch the expression in a variable. I.e., <code>with expr as v</code> is (partly) equivalent to:</p>

<pre><code>_context = expr
v = _context.__enter__()
...
</code></pre>",1
578,20035655,"Can I use the ""as"" mechanism in an if statement","<p>Is it possible to use <code>as</code> in <code>if</code> statement like <code>with</code> that we use, for example:</p>

<pre><code>with open(""/tmp/foo"", ""r"") as ofile:
    # do_something_with_ofile
</code></pre>

<p>This is my code:</p>

<pre><code>def my_list(rtrn_lst=True):
    if rtrn_lst:
        return [12, 14, 15]
    return []

if my_list():
      print(my_list()[2] * mylist()[0] / mylist()[1])
</code></pre>

<p>Can I use <code>if</code> in this type:</p>

<pre><code>if my_list() as lst:
     print(lst[2] * lst[0] / lst[1])
</code></pre>

<p>In first <code>if</code> I called <code>my_list</code> four times. I can use a variable but I want to know is there any way to use <code>as</code>?</p>",python|if-statement,"<p>No. The <code>if</code> statement is defined as:</p>

<pre><code>if_stmt: 'if' test ':' suite ('elif' test ':' suite)* ['else' ':' suite]
</code></pre>

<p>... where <code>test</code> is a suite of test expression combined with or/and.</p>

<p>For more information, see: <a href=""http://docs.python.org/3.3/reference/grammar.html"" rel=""nofollow"">http://docs.python.org/3.3/reference/grammar.html</a></p>

<p>You can defined your variable before and then test its value:</p>

<pre><code>lst = my_list()
if lst:
     print(lst[2] * lst[0] / lst[1])
</code></pre>

<p>If you want some challenge (and for expiremental stuff only), you can change the Python grammar, have fun: <a href=""http://www.python.org/dev/peps/pep-0306/"" rel=""nofollow"">http://www.python.org/dev/peps/pep-0306/</a></p>",4
579,20045395,Marshal loading and exec-ing,"<p>I have this Python code:</p>

<pre><code>import marshal, imp
if imp.get_magic() == '\x03\xf3\r\n':
    __code = marshal.loads('c\x00\x00\x00\x00.....\x00d\x01\x00k\x00.....\t\t\r\x01')
del marshal, imp
exec __code
</code></pre>

<p>The <code>if</code> condition checks wheter the Python version is the ""right"" version. Then <code>marshal</code> is used to load a string containing some code. </p>

<p>First question: How was that string generated? Maybe <code>compile()</code>? But how exactly?
and second question: Can I decompile that string? How?</p>",python|bytecode|decompiling,"<p>As far as how its created, its something like this</p>

<pre><code>a = marshal.dumps(compile(""def test(): return 0"", ""&lt;source&gt;"", ""exec""))
</code></pre>

<p>As far as working out what it does? You should never unmarshal it. You don't know what nugget of horror is hidden in there and will get executed when you load it in. </p>

<p>You could probably use dis</p>

<pre><code>print dis.disassemble_string(a)
</code></pre>

<p>This will give you each operation in the code. </p>

<p>The output of dis'ing the test function </p>

<pre><code>&gt;&gt;    0 DUP_TOPX            0
      3 STOP_CODE      
&gt;&gt;    4 STOP_CODE      
      5 STOP_CODE      
      6 STOP_CODE      
      7 STOP_CODE      
&gt;&gt;    8 STOP_CODE      
      9 POP_TOP        
     10 STOP_CODE      
     11 STOP_CODE      
     12 STOP_CODE      
&gt;&gt;   13 BINARY_AND     
     14 STOP_CODE      
     15 STOP_CODE      
     16 STOP_CODE      
     17 POP_JUMP_IF_TRUE    13
     20 STOP_CODE      
     21 STOP_CODE      
     22 LOAD_CONST          0 (0)
     25 MAKE_FUNCTION       0
     28 STORE_NAME          0 (0)
     31 LOAD_CONST          1 (1)
... etc etc
</code></pre>

<p>Its down to you to work through each operation and identify what it is doing. I can spot a few instructions I understand like <code>34 RETURN_VALUE</code> but the <a href=""http://docs.python.org/2/library/dis.html"" rel=""nofollow"">documentation</a> here should help identify the rest</p>",1
580,20189048,NoneType Error in python,"<p>I run this code but i got the typeError: 'NoneType' object is not iterable
what is problem ??</p>

<pre><code>import bibtex
import unittest

class TestAuthorExtract(unittest.TestCase):
   def setUp(self):
       self.simple_author_1 = ""Smith""

   def test_author_1(self):
       # Test only surname
       (Surname , FirstNames) = bibtex.extract_author(self.simple_author_1)
       self.assertEqual((Surname , FirstNames) , (""Smith"", """"))

if __name__=='__main__':
    unittest.main()
</code></pre>

<p>Here is the error message:</p>

<pre><code>====================================================================== 
ERROR: test_author_1 (main.TestAuthorExtract)
----------------------------------------------------------------------
Traceback (most recent call last): 
  File ""div.py"", line 10, in test_author_1 
    (Surname , FirstNames) = bibtex.extract_author(self.simple_author_1) 
  TypeError: 'NoneType' object is not iterable
---------------------------------------------------------------------- 
Ran 1 test in 0.001s FAILED (errors=1)
</code></pre>",python|testing,"<p>This means, that <code>bibtex.extract_author()</code> returns <code>None</code>. After that, the interpreter tried to assign the value to the tuple <code>(Surname, Firstname)</code>, which can be done only with iterables of the length 2 (that's called <a href=""http://en.wikibooks.org/wiki/Python_Programming/Tuples#Packing_and_Unpacking"" rel=""nofollow"">unpacking</a>).</p>",2
581,19937233,Syntactic sugar for multiple dictionary lookups in one operation,"<p>Say I have a dictionary as follows:</p>

<pre><code>example_dict = {""foo"": 1, ""bar"": 2}
</code></pre>

<p>And I want to do multiple lookups semantically equivalent to:</p>

<pre><code>foo = example_dict[""foo""]
bar = example_dict[""bar""]
</code></pre>

<p>Is there any way of doing multiple lookups at once? The closest I have got is using a list comprehension or a generator expression, like:</p>

<pre><code>foo, bar = [example_dict[key] for key in [""foo"", ""bar""]]
foo, bar = (example_dict[key] for key in [""foo"", ""bar""])
</code></pre>

<p>Ideally what I'd like to do is something like:</p>

<pre><code>foo, bar = example_dict.getmany([""foo"", ""bar""])
</code></pre>

<p>Or even:</p>

<pre><code>foo, bar = example_dict[""foo"", ""bar""]
</code></pre>

<p>In a similar way to what you would do with a list or tuple:</p>

<pre><code>foo, bar = ""foo"", ""bar""
</code></pre>

<p>Obviously I could define my own function to do this by returning the list comprehension or generator expression above. Or I could create my own dictionary class which if given an iterable to look up, does a lookup per key and returns an iterable. In other data structures (i.e. not a hash), looking up several keys at once feels like it could theoretically provide better performance than many individual lookups. Is there any way to do this?</p>",python|dictionary,"<p>you could use map, i think, though i'm not sure it is really any easier:</p>

<pre><code>In [112]: example_dict = {""foo"": 1, ""bar"": 2}
In [113]: map(example_dict.__getitem__, ['foo', 'bar'])
[0x1,
 0x2]
</code></pre>

<p>However, there's not really even theoretically any way to get a speedup from this... each lookup is already more or less constant time (it's a hash lookup) so there's not really an opportunity for collating lookups to have any speedup....</p>",3
582,19937233,Syntactic sugar for multiple dictionary lookups in one operation,"<p>Say I have a dictionary as follows:</p>

<pre><code>example_dict = {""foo"": 1, ""bar"": 2}
</code></pre>

<p>And I want to do multiple lookups semantically equivalent to:</p>

<pre><code>foo = example_dict[""foo""]
bar = example_dict[""bar""]
</code></pre>

<p>Is there any way of doing multiple lookups at once? The closest I have got is using a list comprehension or a generator expression, like:</p>

<pre><code>foo, bar = [example_dict[key] for key in [""foo"", ""bar""]]
foo, bar = (example_dict[key] for key in [""foo"", ""bar""])
</code></pre>

<p>Ideally what I'd like to do is something like:</p>

<pre><code>foo, bar = example_dict.getmany([""foo"", ""bar""])
</code></pre>

<p>Or even:</p>

<pre><code>foo, bar = example_dict[""foo"", ""bar""]
</code></pre>

<p>In a similar way to what you would do with a list or tuple:</p>

<pre><code>foo, bar = ""foo"", ""bar""
</code></pre>

<p>Obviously I could define my own function to do this by returning the list comprehension or generator expression above. Or I could create my own dictionary class which if given an iterable to look up, does a lookup per key and returns an iterable. In other data structures (i.e. not a hash), looking up several keys at once feels like it could theoretically provide better performance than many individual lookups. Is there any way to do this?</p>",python|dictionary,"<p>This question sounds like it is coming from a place of premature optimization, but for the sake of this answer I'll assume the premature bit is not true.</p>

<p>The short answer is that there is no way to do this with stock Python dictionaries.  The longer answer is that if there are lookup patterns that are common, you can exploit those to limit the number of lookups.  For example, if you always look up ""foo"" and then ""bar"" you can instead use a compound key -- perhaps the tuple (""foo"", ""bar"") -- and store the values in a tuple.</p>

<p>The code to store the values would look like</p>

<pre><code>d[""foo"", ""bar""] = (42, 47)
</code></pre>

<p>The code to retrieve the values would be so</p>

<pre><code>foo_value, bar_value = d[""foo"", ""bar""]
</code></pre>",0
583,19972701,Retain only specified content in a string,"<p>I have data in the following form in a file:</p>

<pre><code> &lt;string1&gt;   abc:string2    &lt;http://yago-knowledge.org/resource/wikicategory_Sports_clubs_established&lt;/text\u003e\n______&lt;sha1\u003eqwjfowt5my8t6yuszdb88k2ehskjuh0&lt;/sha1\u003e\n____&lt;/revision\u003e\n__&lt;/page\u003e\n__&lt;page\u003e\n____&lt;title\u003ePortal:Tropical_cyclones/Anniversaries/August_22&lt;/title\u003e\n____&lt;ns\u003e100&lt;/ns\u003e\n____&lt;id\u003e7957689&lt;/id\u003e\n____&lt;revision\u003e\n______&lt;id\u003e446349886&lt;/id\u003e\n______&lt;timestamp\u003e2011-08-23T17:38:19Z&lt;/timestamp\u003e\n______&lt;contributor\u003e\n________&lt;username\u003eLightbot&lt;/username\u003e\n________&lt;id\u003e7178666&lt;/id\u003e\n______&lt;/contributor\u003e\n______&lt;comment\u003eDelink_non-obscure_units._Conversions._Report_bugs_to_[[User_talk:Lightmouse&gt;.
</code></pre>

<p>The delimiter in the above file is a tab (<code>\t</code>) i.e. <code>string1</code> is separated from <code>abc:string2</code>by <code>\t</code>. Similarly for the rest of the strings. </p>

<p>Now I want to retain just alphabets, numbers, <code>/</code>, <code>:</code>,'.' and <code>_</code> within the strings which are enclosed within <code>&lt;&gt;</code>.  I want to delete all the characters apart from the specified ones from the strings which are enlosed in <code>&lt;&gt;</code>.</p>

<p>Is there some way by which I may achieve this using linux commands or python? I want to replace all the unwanted characters by an underscore.</p>

<pre><code> &lt;string1&gt;   abc:string2    &lt;http://yago-knowledge.org/resource/wikicategory_Sports_clubs_established_text_u003e_n_______sha1_u003eqwjfowt5my8t6yuszdb88k2ehskjuh0_sha1_u003e_n_____revision_u003e_n___/page_u003e_n___page_u003e_n_____title_u003ePortal:Tropical_cyclones/Anniversaries/August_22_/title_u003e_n_____ns_u003e100_/ns_u003e_n_____id_u003e7957689_/id_u003e_n_____revision_u003e_n_______id_u003e446349886_/id_u003e_n_______timestamp_u003e2011-08-23T17:38:19Z_/timestamp_u003e_n_______contributor_u003e_n_________username_u003eLightbot_/username_u003e_n_________id_u003e7178666_/id_u003e_n_______/contributor_u003e_n_______comment_u003eDelink_non-obscure_units._Conversions._Report_bugs_to___User_talk:Lightmouse&gt;.
</code></pre>

<p>Is there some way by which I may achieve this?</p>",python|regex|python-2.7,"<p>You can probably achieve this just with UNIX tools and some crazy regular expression, but I would write a small Python script for this:</p>

<ul>
<li>Open two files (input and output) with <code>open()</code></li>
<li>Iterate over the input file line by line: <code>for line in input_file:</code></li>
<li>Split the line at tab: <code>for part in line.split('\t'):</code></li>
<li>Check if a part is enclosed in <code>&lt;&gt;</code>: <code>if part.startswith('&lt;') and line.endswith('&gt;'):</code></li>
<li>Filter characters with a regular expression: <code>filtered_part = re.sub(r'[^a-zA-Z0-9/:._]', '', part)</code></li>
<li>Join the filtered parts back together: <code>filtered_line = '\t'.join(filtered_parts)</code></li>
<li>Write the filtered line to the output file: <code>output_file.write(filtered_line + '\n')</code></li>
</ul>

<p>Following this outline, it should be easy for you to write a working script.</p>",0
584,20349981,Tkinter function print in GUI,"<p>I have done a program with 2 apis that show forecast and city info of diffrent citys that the user choose. But now I need help cause Im stuck on how to get my make_request, make_requests and city_data to print the info in the GUI! I think I need a Label but I dont know how to do it, any tips/help would be great! Thanks:</p>

<pre><code>from tkinter import *
import requests
import json

    class Application(Frame):

        def __init__(self, master=None):
            Frame.__init__(self, master)
            self.root = master
            self.pack()
            self.create_widgets()


        def create_widgets(self):
            self.var = StringVar()
            self.countryImage = Label(self, textvariable=self.var, text=self.var.get)
            self.countryImage.pack(side=""top"")

            self.var.set(""The Tripinator"" '\n' ""Welcome to Tripinator!"" '\n' ""To get forecast, enter a country and city then press forecast."" '\n'""To get tips, JUST enter city then choose beetween Eat / Drink / Party / Shop / Outdoor!"")
            self.var.get()

            self.enterCountry = StringVar()
            self.inputCountry = Entry(self, textvariable=self.enterCountry)
            self.inputCountry.pack(side=""left"")

            self.enterCountry.set(""Enter Country"")
            self.enterCountry.get()
            self.inputCountry.focus_set()

            self.v = StringVar()
            self.e = Entry(self, textvariable=self.v)
            self.e.pack(side=""left"")

            self.v.set(""Enter City"")
            self.v.get()
            self.e.focus_set()

            self.preCategory = StringVar()
            self.enterCategory = Entry(self, textvariable=self.preCategory)
            self.enterCategory.pack(side=""left"")

            self.preCategory.set(""Eat/Drink/Party/Shop/Outdoor"")
            self.preCategory.get()
            self.enterCategory.focus_set()

            self.preDay = StringVar()
            self.enterDay = Entry(self, textvariable=self.preDay)
            self.enterDay.pack(side=""left"")

            self.preDay.set(""Enter day"")
            self.preDay.get()
            self.enterDay.focus_set()

            self.preTime = StringVar()
            self.enterTime = Entry(self, textvariable=self.preTime)
            self.enterTime.pack(side=""left"")

            self.preTime.set(""morning/midday/evening/night/latenight"")
            self.preTime.get()
            self.enterTime.focus_set()

            # Knappen utlöser funktionen make_request som skriver ut väderprognosen
            self.butn = Button(self)
            self.butn[""text""] = ""Forecast""
            self.butn[""command""] = self.make_request
            self.butn.pack(side=""left"")

            self.b = Button(self)
            self.b[""text""] = ""City info""
            self.b[""command""] = self.make_requests
            self.b.pack(side=""left"")

            self.getButton = Button(self)
            self.getButton[""text""] = ""City list""
            self.getButton[""command""] = self.city_data
            self.getButton.pack(side=""left"")

            self.QUIT = Button(self, text=""QUIT"", command=self.root.destroy)
            self.QUIT.pack(side=""left"")

        def make_request(self):
            r = requests.get(""http://api.wunderground.com/api/61418d709872f773/forecast/q/"" + self.enterCountry.get() +""/"" + self.v.get() +"".json"")
            data = r.json()
            for day in data['forecast']['simpleforecast']['forecastday']:
                print (day['date']['weekday'] + "":"")
                print (""Conditions: "", day['conditions'])
                print (""High: "", day['high']['celsius'] + ""C"", ""Low: "", day['low']['celsius'] + ""C"", '\n')
            return data

        def make_requests(self):
            c = requests.get(""http://api.v1.trippinin.com/City/"" + self.v.get() + ""/"" + self.preCategory.get() + ""?day="" + self.preDay.get() +""&amp;time="" + self.preTime.get() + ""&amp;limit=10&amp; offset=2&amp;KEY=58ffb98334528b72937ce3390c0de2b7"")
            datan = c.json()
            for info in datan['response']['data']:
                print (""Place:"", info['title'])
                print (""Category:"", info['maincategory'])
                print (""Likes:"", info['totallikes'], '\n')
            return datan

        def city_data(self):
            cityList = requests.get (""http://api.v1.trippinin.com/citylist?key=58ffb98334528b72937ce3390c0de2b7"")
            cityData = cityList.json()
            for cityInfo in cityData['response']['data']:
                print (""City:"", cityInfo['title'])
                print (""Places we cover:"", cityInfo['totalPlaces'], '\n')
            return cityData






    rot = Tk()
    rot.geometry(""900x650+200+50"")
    rot.title(""The Tripinator"")

    app = Application(master=rot)
    app.mainloop()
</code></pre>",user-interface|python-3.x|tkinter|labels,"<p>Example - I use existing label with title to set information from request</p>

<pre><code>def make_request(self):
    r = requests.get(""http://api.wunderground.com/api/61418d709872f773/forecast/q/"" + self.enterCountry.get() +""/"" + self.v.get() +"".json"")
    data = r.json()
    for day in data['forecast']['simpleforecast']['forecastday']:
        self.var.set( day['date']['weekday'] + "":"" + ""\n"" + ""Conditions: "" + day['conditions'] + ""\n"" + ""High: "" + day['high']['celsius'] + ""C "" + ""Low: "" + day['low']['celsius'] + ""C"" )
    return data
</code></pre>",0
585,20349981,Tkinter function print in GUI,"<p>I have done a program with 2 apis that show forecast and city info of diffrent citys that the user choose. But now I need help cause Im stuck on how to get my make_request, make_requests and city_data to print the info in the GUI! I think I need a Label but I dont know how to do it, any tips/help would be great! Thanks:</p>

<pre><code>from tkinter import *
import requests
import json

    class Application(Frame):

        def __init__(self, master=None):
            Frame.__init__(self, master)
            self.root = master
            self.pack()
            self.create_widgets()


        def create_widgets(self):
            self.var = StringVar()
            self.countryImage = Label(self, textvariable=self.var, text=self.var.get)
            self.countryImage.pack(side=""top"")

            self.var.set(""The Tripinator"" '\n' ""Welcome to Tripinator!"" '\n' ""To get forecast, enter a country and city then press forecast."" '\n'""To get tips, JUST enter city then choose beetween Eat / Drink / Party / Shop / Outdoor!"")
            self.var.get()

            self.enterCountry = StringVar()
            self.inputCountry = Entry(self, textvariable=self.enterCountry)
            self.inputCountry.pack(side=""left"")

            self.enterCountry.set(""Enter Country"")
            self.enterCountry.get()
            self.inputCountry.focus_set()

            self.v = StringVar()
            self.e = Entry(self, textvariable=self.v)
            self.e.pack(side=""left"")

            self.v.set(""Enter City"")
            self.v.get()
            self.e.focus_set()

            self.preCategory = StringVar()
            self.enterCategory = Entry(self, textvariable=self.preCategory)
            self.enterCategory.pack(side=""left"")

            self.preCategory.set(""Eat/Drink/Party/Shop/Outdoor"")
            self.preCategory.get()
            self.enterCategory.focus_set()

            self.preDay = StringVar()
            self.enterDay = Entry(self, textvariable=self.preDay)
            self.enterDay.pack(side=""left"")

            self.preDay.set(""Enter day"")
            self.preDay.get()
            self.enterDay.focus_set()

            self.preTime = StringVar()
            self.enterTime = Entry(self, textvariable=self.preTime)
            self.enterTime.pack(side=""left"")

            self.preTime.set(""morning/midday/evening/night/latenight"")
            self.preTime.get()
            self.enterTime.focus_set()

            # Knappen utlöser funktionen make_request som skriver ut väderprognosen
            self.butn = Button(self)
            self.butn[""text""] = ""Forecast""
            self.butn[""command""] = self.make_request
            self.butn.pack(side=""left"")

            self.b = Button(self)
            self.b[""text""] = ""City info""
            self.b[""command""] = self.make_requests
            self.b.pack(side=""left"")

            self.getButton = Button(self)
            self.getButton[""text""] = ""City list""
            self.getButton[""command""] = self.city_data
            self.getButton.pack(side=""left"")

            self.QUIT = Button(self, text=""QUIT"", command=self.root.destroy)
            self.QUIT.pack(side=""left"")

        def make_request(self):
            r = requests.get(""http://api.wunderground.com/api/61418d709872f773/forecast/q/"" + self.enterCountry.get() +""/"" + self.v.get() +"".json"")
            data = r.json()
            for day in data['forecast']['simpleforecast']['forecastday']:
                print (day['date']['weekday'] + "":"")
                print (""Conditions: "", day['conditions'])
                print (""High: "", day['high']['celsius'] + ""C"", ""Low: "", day['low']['celsius'] + ""C"", '\n')
            return data

        def make_requests(self):
            c = requests.get(""http://api.v1.trippinin.com/City/"" + self.v.get() + ""/"" + self.preCategory.get() + ""?day="" + self.preDay.get() +""&amp;time="" + self.preTime.get() + ""&amp;limit=10&amp; offset=2&amp;KEY=58ffb98334528b72937ce3390c0de2b7"")
            datan = c.json()
            for info in datan['response']['data']:
                print (""Place:"", info['title'])
                print (""Category:"", info['maincategory'])
                print (""Likes:"", info['totallikes'], '\n')
            return datan

        def city_data(self):
            cityList = requests.get (""http://api.v1.trippinin.com/citylist?key=58ffb98334528b72937ce3390c0de2b7"")
            cityData = cityList.json()
            for cityInfo in cityData['response']['data']:
                print (""City:"", cityInfo['title'])
                print (""Places we cover:"", cityInfo['totalPlaces'], '\n')
            return cityData






    rot = Tk()
    rot.geometry(""900x650+200+50"")
    rot.title(""The Tripinator"")

    app = Application(master=rot)
    app.mainloop()
</code></pre>",user-interface|python-3.x|tkinter|labels,"<p>If you just want to simulate printing to the console, you should use a text widget. The text widget is the right choice for showing multi-line data. Instead of calling print, you call insert:</p>

<pre><code>def create_widgets(self):
    ...
    self.out = Text(self)
    ...

def make_request(self):
    r = requests.get(...)
    data = r.json()
    self.out.insert(""end"", data)
    ...
</code></pre>

<p>If you want to show just a few pieces of data, you can use label widgets, and change what appears in them using the <code>config</code> method. For example:</p>

<pre><code>def create_widgets(self):
    ...
    self.label1 = Label(self, ...)
    self.label2 = Label(self, ...)

def make_request(self):
    ...
    self.label1.configure(text=something)
    self.label2.configure(text=something_else)
</code></pre>",1
586,28825116,Fetching element by index in list is faster than fetching element by key in dictionary,"<p>I have the following script to test which is faster</p>

<p>1.Fetching element by index in list, or</p>

<p>2.Fetching element by key in dictionary</p>

<pre><code>import timeit
import random

lis1 = [random.randint(1,10000) for x in xrange(0,10001)]
dict1 = {x:random.randint(1,10000) for x in xrange(0,10001)}

def list_lookup():
    index = random.randint(0,10000)
    x = lis1[index]

def dict_lookup():
    index = random.randint(0,10000)
    x = dict1[index]


def main():
  print timeit.repeat(""list_lookup()"", ""from __main__ import list_lookup"",number=1000000)
  print timeit.repeat(""dict_lookup()"", ""from __main__ import dict_lookup"",number=1000000)

if __name__ == '__main__':
  main()
</code></pre>

<p>It is giving the following output</p>

<pre><code>[1.208083152770996, 1.1942389011383057, 1.1882140636444092]
[1.2461788654327393, 1.2427518367767334, 1.2414629459381104]
</code></pre>

<p>Although the difference seems to be negligible but it seems like dictionary look-up takes slightly longer time</p>

<p>Is it because fetching element in dictionary involves 2 steps -- first hashing the key and then fetching the value (second), while in list we are just fetching the value from the memory address of that particular location of the  list </p>",python|list|dictionary,"<p>Three steps actually, it also needs to compare (<code>==</code>) the key it finds with the given key, to make sure it retuns the correct value, and not another value which happen to be mapped to the same bucket.</p>

<p>On top of that, inefficient hashing / collisions can cause further slowness (for this reason, dict lookup is O(N) worst case).</p>",2
587,28825116,Fetching element by index in list is faster than fetching element by key in dictionary,"<p>I have the following script to test which is faster</p>

<p>1.Fetching element by index in list, or</p>

<p>2.Fetching element by key in dictionary</p>

<pre><code>import timeit
import random

lis1 = [random.randint(1,10000) for x in xrange(0,10001)]
dict1 = {x:random.randint(1,10000) for x in xrange(0,10001)}

def list_lookup():
    index = random.randint(0,10000)
    x = lis1[index]

def dict_lookup():
    index = random.randint(0,10000)
    x = dict1[index]


def main():
  print timeit.repeat(""list_lookup()"", ""from __main__ import list_lookup"",number=1000000)
  print timeit.repeat(""dict_lookup()"", ""from __main__ import dict_lookup"",number=1000000)

if __name__ == '__main__':
  main()
</code></pre>

<p>It is giving the following output</p>

<pre><code>[1.208083152770996, 1.1942389011383057, 1.1882140636444092]
[1.2461788654327393, 1.2427518367767334, 1.2414629459381104]
</code></pre>

<p>Although the difference seems to be negligible but it seems like dictionary look-up takes slightly longer time</p>

<p>Is it because fetching element in dictionary involves 2 steps -- first hashing the key and then fetching the value (second), while in list we are just fetching the value from the memory address of that particular location of the  list </p>",python|list|dictionary,"<p>Lookups in lists are O(n), lookups in dictionaries are amortized O(1), with regard to the number of items in the data structure.</p>

<p>For more info refer this answer <a href=""https://stackoverflow.com/questions/513882/python-list-vs-dict-for-look-up-table"">Here</a></p>",0
588,40260901,Changing how values from object's attribute are displayed on print within a class,"<p>I have a class where I initialize a deck of 52 cards for a game of Texas Holdem Poker, and then draw a random number of cards from the deck, dependant on the number of players:</p>

<pre><code>class Cards:
    def __init__(self):
        suits = ['s', 'c', 'd', 'h']
        values = [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
        deck = set(itertools.product(values, suits))
        self.drawn_cards = random.sample(deck,(5 + 2 * number_of_players))
</code></pre>

<p>However when printing the cards, I would like for 11 to be replaced with 'J', for 12 to be replaced with 'Q', and so on. I'm at a loss as to how to do it. After doing some searching on here I ended up adding this to the class:</p>

<pre><code>def __str__(self):
        text = """"
        for x, y in self.drawn_cards:            
            if x == 11:
                text = ""J""
            elif x == 12:
                text = ""Q""
            elif x == 13:
                text = ""K""
            elif x == 14:
                text = ""A""
            else:
                text = x
</code></pre>

<p>But when I initialize an object (dealer):</p>

<pre><code>dealer = Cards()
</code></pre>

<p>And then print the drawn cards:</p>

<pre><code>print(dealer.drawn_cards)
</code></pre>

<p>I just get:</p>

<pre><code>[(4, 'h'), (14, 'd'), (13, 's')........]
</code></pre>

<p>Instead of the desired:</p>

<pre><code>[(4, 'h'), ('A', 'd'), ('K', 's')........]
</code></pre>

<p>Would appreciate any pointers.</p>",python|class|python-3.x,"<p>You're printing the cards and not invoking its <code>__str__</code>; either way, since <code>__str__</code> isn't returning a string in your implementation, it's going be an error.</p>

<p>The easiest solution would be to create a class level mapping that holds numbers-cards for the range <code>[11, 14]</code> and then create an intermediate translated list of tuples in its <code>__str__</code> and return its string representation:</p>

<pre><code>class Cards:

    # translate numbers to cards
    _tr = {11: 'J', 12 :'Q', 13: 'K', 14: 'A'}

    def __init__(self):
        suits = ['s', 'c', 'd', 'h']
        values = [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
        deck = set(itertools.product(values, suits))
        self.drawn_cards = random.sample(deck,(5 + 2 * number_of_players))

    def __str__(self):
        r = [(x, y) if x not in self._tr else (self._tr[x], y) for x,y in self.drawn_cards]
        return str(r)
</code></pre>

<p>Now, printing your instance will yield the desired  result:</p>

<pre><code>dealer = Cards()

print(dealer)
[(9, 'c'), ('A', 'c'), (4, 'd'), (5, 'd'), (4, 's'), ('J', 'c'), (6, 'h'), ('A', 's'), (10, 'c')]
</code></pre>",1
589,40311527,Taking data from a data.txt file in JSON format and displaying it randomly on the GUI,"<p>I have to import the data.txt file currently having 3 dictionaries (can have more as well) and to randomly select the name of an item and print it on the GUI. The code above is designed to do the required but it doesn't do anything. Can you please help me with this.    </p>

<pre><code>with open('data.txt') as data_file:
        data = json.load(data_file)
        data_file.close()
self.firstPrompt = tkinter.Label(self.top, width=7, \
                       text=random.sample(data['name'], 1), fg='blue', font=(""Helvetica"", 16))
</code></pre>

<p>Immediate help will be appreciated</p>",python|json|random,"<p>Here's an MCVE:</p>

<pre><code>import Tkinter
from Tkinter import Label, mainloop, Tk
import json
import random

class myGUI:
    def __init__(self):
        self.top = Tk()
        with open('data.txt') as data_file:
                data = json.load(data_file)
                data_file.close()
        self.firstPrompt = Tkinter.Label(self.top, width=7, \
                       text=random.sample(data['name'], 1), fg='blue', font=(""Helvetica"", 16))
        self.firstPrompt.pack()

myGUI()
mainloop()
</code></pre>

<p>using <code>data.txt</code>:   </p>

<pre><code>{  
   ""name"":{  
      ""name_0"":"""",
      ""name_1"":""""
   }
}
</code></pre>

<p>Should pop-up a tkinter label window showing <code>name_1</code> in blue, Helvectica, 16, etc.</p>",0
590,40114876,Validating a Django model field based on another field's value?,"<p>I have a Django app with models accessible by both Django REST Framework and a regular form interface. The form interface has some validation checks before saving changes to the model, but not using any special Django framework, just a simple local change in the view.</p>

<p>I'd like to apply the same validation to forms and REST calls, so I want to move my validation into the model. I can see how to do that for simple cases using the validators field of the Field, but in one case I have a name/type/value model where the acceptable values for 'value' change depending on which type is selected. The validator doesn't get sent any information about the model that the field is in, so it doesn't have access to other fields.</p>

<p>How can I perform this validation, without having essentially the same code in a serializer for DRF and my POST view for the form?</p>",python|django|forms|validation|django-rest-framework,"<p>I dug around codebase of drf a little bit. You can get values of all fields using following  approach. Doing so, you can throw serialization error as
<code>{'my_field':'error message}</code> instead of <code>{'non_field_error':'error message'}</code>.</p>
<pre><code>def validate_myfield(self, value):
   data = self.get_initial() # data for all the fields
   #do your validation
</code></pre>
<p>However, if you wish to do it for ListSerializer, i.e for <code>serializer = serializer_class(many=True)</code>, this won't work. You will get list of empty values.
In that scenario, you could write your validations in <code>def validate</code> function and to avoid <code>non_field_errors</code> in your serialization error, you can raise <code>ValidationError</code> with error message as a dictionary instead of string.</p>
<pre><code>def validate(self, data):
    # do your validation
    raise serializers.ValidationError({&quot;your_field&quot;: &quot;error_message&quot;})
 
</code></pre>",12
591,40114876,Validating a Django model field based on another field's value?,"<p>I have a Django app with models accessible by both Django REST Framework and a regular form interface. The form interface has some validation checks before saving changes to the model, but not using any special Django framework, just a simple local change in the view.</p>

<p>I'd like to apply the same validation to forms and REST calls, so I want to move my validation into the model. I can see how to do that for simple cases using the validators field of the Field, but in one case I have a name/type/value model where the acceptable values for 'value' change depending on which type is selected. The validator doesn't get sent any information about the model that the field is in, so it doesn't have access to other fields.</p>

<p>How can I perform this validation, without having essentially the same code in a serializer for DRF and my POST view for the form?</p>",python|django|forms|validation|django-rest-framework,"<p>You can use the <a href=""https://github.com/shezadkhan137/required"" rel=""nofollow noreferrer"">required</a> package for your cross-field validation. It allows you to express your validation rules declaratively in python. You would have something like this with DRF:</p>

<pre><code>class MySerializer(serializers.Serializer):

    REQUIREMENTS = (
        Requires(""end_date"", ""start_date"") +
        Requires(""end_date"", R(""end_date"") &gt; R(""start_date"")) + 
        Requires(""end_date"", R(""end_date"") &lt; today.date() + one_year) + 
        Requires(""start_date"", R(""start_date"") &lt; today.date() + one_year)
     )

    start_date = serializers.DateField(required=False, null=True, blank=True)
    end_date = serializers.DateField(required=False, null=True, blank=True)

    def validate(self, data):
        self.REQUIREMENTS.validate(data)  # handle validation error
</code></pre>

<p>You could put the <code>REQUIREMENTS</code> on your Model and have both your DRF and Django Form validate your data using it.</p>

<p><a href=""https://shezadkhan.com/required-a-easy-dependency-validator/"" rel=""nofollow noreferrer"">Here</a> is a blog post explaining more </p>",2
592,40114876,Validating a Django model field based on another field's value?,"<p>I have a Django app with models accessible by both Django REST Framework and a regular form interface. The form interface has some validation checks before saving changes to the model, but not using any special Django framework, just a simple local change in the view.</p>

<p>I'd like to apply the same validation to forms and REST calls, so I want to move my validation into the model. I can see how to do that for simple cases using the validators field of the Field, but in one case I have a name/type/value model where the acceptable values for 'value' change depending on which type is selected. The validator doesn't get sent any information about the model that the field is in, so it doesn't have access to other fields.</p>

<p>How can I perform this validation, without having essentially the same code in a serializer for DRF and my POST view for the form?</p>",python|django|forms|validation|django-rest-framework,"<p>The validation per-field doesn't get sent any information about other fields, when it is defined like this:</p>

<pre><code>def validate_myfield(self, value):
    ...
</code></pre>

<p>However, if you have a method defined like this:</p>

<pre><code>def validate(self, data):
    ...
</code></pre>

<p>Then you get all the data in a dict, and you can do cross-field validation.  </p>",7
593,40124914,Logout with python-social-auth,"<p>I am using <code>python-social-auth</code> for my third-party login and logout. Sign in with Facebook, Twitter and Google Plus were a success at first (it will ask my username/email and password). My problem is when I log out and then sign in again through either of them, I will be signed in automatically without even asking my username/email and password again. Am I not logged out? </p>

<p>This is my <code>disconnect pipeline</code>:</p>

<pre><code>SOCIAL_AUTH_DISCONNECT_PIPELINE = (
    'social.pipeline.disconnect.allowed_to_disconnect',
    'social.pipeline.disconnect.get_entries',
    'social.pipeline.disconnect.revoke_tokens',
    'social.pipeline.disconnect.disconnect',
)
</code></pre>

<p>This is my logout view:</p>

<pre><code>from django.contrib.auth import logout as auth_logout

def logout(request):
    auth_logout(request)
    return render_to_response('logged-out.html', {}, RequestContext(request))
</code></pre>",python|django|authentication|python-social-auth|django-socialauth,"<p>So I have tested this in my website. Here is the link that explains logout and disconnect behaviors:
<a href=""http://python-social-auth.readthedocs.io/en/latest/logging_out.html"" rel=""nofollow"">http://python-social-auth.readthedocs.io/en/latest/logging_out.html</a>
As you can see to disconnect from social apps you need to use disconnect(Disconnect is the way that your users can ask your project to “forget about my account”. ). By that you are deleting user association in <strong>social_auth_usersocialauth</strong> table in your DB. To accomplish this here is what you need to do:</p>

<pre><code>**settings.py:**
SOCIAL_AUTH_DISCONNECT_PIPELINE = (
# Verifies that the social association can be disconnected from the current
# user (ensure that the user login mechanism is not compromised by this
# disconnection).
#'social.pipeline.disconnect.allowed_to_disconnect',

# Collects the social associations to disconnect.
'social.pipeline.disconnect.get_entries',

# Revoke any access_token when possible.
'social.pipeline.disconnect.revoke_tokens',

# Removes the social associations.
'social.pipeline.disconnect.disconnect',
)
</code></pre>

<p><strong>in Templates:</strong></p>

<pre><code>&lt;form id=""myform"" method=""post"" action=""{% url 'social:disconnect' 'google-oauth2' %}5/?next={{request.path }}""&gt;
    {% csrf_token %}
    &lt;input type=""hidden"" name=""name"" value=""value"" /&gt; 
    &lt;a onclick=""document.getElementById('myform').submit();""&gt;discon&lt;/a&gt;
&lt;/form&gt;
</code></pre>

<p>In first line the Number 5 after google-oatuh2 indicates the user ID in DB table. So the first user in picture below will be deleted/disconnected from my app.
To check if disconnect feature works or not, see your <strong>social_auth_usersocialauth</strong> table whether user association has been deleted.
<a href=""https://i.stack.imgur.com/NamX4.jpg"" rel=""nofollow""><img src=""https://i.stack.imgur.com/NamX4.jpg"" alt=""enter image description here""></a>
But the thing is that whenever you connect via google, facebook to you own application, it means that you are logging-in to google or facebook website too.(as during first login it opens facebook or google's login page). Even after you disconnect from your own app you need to logout from facebook or google website too. Otherwise your browser will keep you signed in, and when you try to connect to your web app again, you will be automatically logged in. </p>",1
594,39942002,Possible to use FLASK inside AngularJS ng-app <html ng-app>?,"<ul>
<li>I have a project that was developed with FLASK,Jinja2 templates. It is a simple webapp that allows user to login and see their online profile

<ul>
<li>Currently I am trying to improve the project by adding in AngularJS&amp;BootStrap for client-side, because I want to use ngMessages and some other angular dependencies</li>
<li>The flask_wtf form submit button will work outside &lt; html ng-app> tag but it doesn't work when I put the flask_wtf form inside &lt; html ng-app> tag</li>
<li><strong>Update:</strong> <strong>Hello davidism, how is this a duplicate question when my issue is not related. Please note that I am not asking about how to fix the delimiter notation, not asking about how to use angularJS {{var}} inside Jinja2. I am trying to know if I could use flask_wtf inside the AngularJS &lt; html ng-app> tag. As i tried to put the flask_Wtf form inside &lt; html ng-app> tag and it doesnt work, it works outside the tag though.</strong></li>
</ul></li>
</ul>

<blockquote>
  <p>form.py</p>
</blockquote>

<pre><code>class LoginForm(Form):
   """"""
   For user to login.
   """"""
   username = StringField(u'User Name:',validators=[
         InputRequired(),
         Regexp(ConfigRegex.RE_LOGIN_ID, message=ConfigRegex.RE_DESC_LOGIN_ID)])

   passwd = PasswordField(u'Password:', validators=[
         InputRequired(),
         Regexp(ConfigRegex.RE_PASSWD, message=ConfigRegex.RE_DESC_PASSWD)])

   submit = SubmitField(u'Log sIn')
</code></pre>

<blockquote>
  <p>login.html with flask_wtf (submit button is working)</p>
</blockquote>

<pre><code>&lt;form method=""POST""&gt;
  {{ form.hidden_tag() }}{# Render any hidden fields, including the CSRF #}

  &lt;div class=""field""&gt;{{ form.username.label }} {{ form.username }}&lt;/div&gt;
  {{ macros.show_field_errors(form.username.errors) }}

  &lt;div class=""field""&gt;{{ form.passwd.label }} {{ form.passwd }}&lt;/div&gt;
  {{ macros.show_field_errors(form.passwd.errors) }}

  &lt;div class=""field""&gt;{{ form.submit }}&lt;/div&gt;
&lt;/form&gt; 
</code></pre>

<blockquote>
  <p>login.html with flask_wtf inside AngularJS &lt; html ng-app> tag (submit button not working)</p>
</blockquote>

<pre><code>&lt;html ng-app=""loginApp""&gt;
////////////////////////////////////////////////////
//test form with flask (inside ng-app not working)
////////////////////////////////////////////////////
&lt;form method=""POST""&gt;
  {{ form.hidden_tag() }}{# Render any hidden fields, including the CSRF #}

  &lt;div class=""field""&gt;{{ form.username.label }} {{ form.username }}&lt;/div&gt;
  {{ macros.show_field_errors(form.username.errors) }}

  &lt;div class=""field""&gt;{{ form.passwd.label }} {{ form.passwd }}&lt;/div&gt;
  {{ macros.show_field_errors(form.passwd.errors) }}

  &lt;div class=""field""&gt;{{ form.submit }}&lt;/div&gt;
&lt;/form&gt; 

///////////////// END //////////////////


&lt;form name=""editForm"" method=""post"" id=""login"" class=""form-signin"" novalidate&gt;
.....
.....
           &lt;span ng-class=""{ 'has-error': editForm.password.$touched &amp;&amp; editForm.password.$invalid }""&gt;
            &lt;div class=""form-group input-group""&gt;
              &lt;input class=""form-control"" placeholder=""Password"" name=""password"" type=""password"" name='password' ng-model=""password"" g-maxlength=""20"" required&gt;
            &lt;/div&gt;
            &lt;div class=""help-block"" ng-messages=""editForm.password.$error"" ng-if=""editForm.password.$touched""&gt;
             &lt;p ng-message=""required""&gt;Password is required&lt;/p&gt;
             &lt;p ng-message=""maxlength""&gt;Password is too long&lt;/p&gt;
           &lt;/div&gt;
         &lt;/span&gt;


         &lt;button class=""btn btn-lg btn-danger btn-block"" type=""submit"" ng-disabled=""!editForm.$valid""&gt;Login&lt;/button&gt;

       &lt;/form&gt;
&lt;/html&gt;
</code></pre>",python|angularjs|flask|jinja2|flask-wtforms,"<blockquote>
  <p>How to use AngularJS inside Flask [Jinja2]?</p>
</blockquote>

<p>Using AngularJS to render the same portions of a page inside Jinja2 isn't going to work well by default, because they both use the tokens <code>{{</code> and <code>}}</code> to interpolate the variables in the templates. So your angular <code>{{varX}}</code> expressions will be rendered by Jinja2 server first. </p>

<p>Consider using <code>{% raw %}</code> in Jinja2, as it makes it skip the interpolation:</p>

<pre><code>{% raw %}
    {{you can use your ng vars here}}
    {{varX}}             &lt;--- Jinja2 won't interpolate this
{% endraw %}
</code></pre>

<p>Or you can change the tokens for AngularJS to something else, e.g. <code>{$</code> and <code>$}</code>:</p>

<pre><code>angular.module('myapp', []).config(function($interpolateProvider) {
    $interpolateProvider.startSymbol('{$');
    $interpolateProvider.endSymbol('$}');
});
</code></pre>

<p>and:</p>

<pre><code>{$varX$} &lt;--- Jinja2 won't interpolate,
              because Jinja2 looks for `{{` and `}}` by default.
</code></pre>",0
595,40223114,NumPy: fill fields surrounding a 1 in an array,"<p>Suppose I have a 4x4 matrix that looks like the following:</p>

<pre><code>[[0, 0, 0, 0]
 [0, 0, 1, 0]
 [0, 0, 0, 0]
 [0, 0, 0, 0]]
</code></pre>

<p>I want to write a function that takes all 4 surrounding fields of the one and turns them into a 1 as well.</p>

<p>The above matrix would become:</p>

<pre><code>[[0, 0, 1, 0]
 [0, 1, 1, 1]
 [0, 0, 1, 0]
 [0, 0, 0, 0]]
</code></pre>

<p>I know that this is possible using if-statements, but I really want to optimize my code.</p>

<p>The matrix only contains 0's and 1's. If the 1 is at the edge of the matrix, the 1's should not wrap around, i.e. if the most left field is a 1, the most right field still stays at 0. Also, I am using Python 3.5</p>

<p>Is there a more mathematical or concise way to do this?</p>",python|arrays|numpy|matrix,"<p>This looks like binary dilation. There's a function available in SciPy that implements this efficiently:</p>

<pre><code>&gt;&gt;&gt; from scipy.ndimage import binary_dilation
&gt;&gt;&gt; x
array([[0, 0, 0, 0],
       [0, 0, 1, 0],
       [0, 0, 0, 0],
       [0, 0, 0, 0]])

&gt;&gt;&gt; binary_dilation(x).astype(int)
array([[0, 0, 1, 0],
       [0, 1, 1, 1],
       [0, 0, 1, 0],
       [0, 0, 0, 0]])
</code></pre>

<p>1s at the edges are handled as you've specified they should be (i.e. no wrapping).</p>

<p>See the <a href=""https://docs.scipy.org/doc/scipy-0.18.1/reference/generated/scipy.ndimage.binary_dilation.html#scipy.ndimage.binary_dilation"" rel=""nofollow"">documentation</a> for further options and arguments.</p>",6
596,40223114,NumPy: fill fields surrounding a 1 in an array,"<p>Suppose I have a 4x4 matrix that looks like the following:</p>

<pre><code>[[0, 0, 0, 0]
 [0, 0, 1, 0]
 [0, 0, 0, 0]
 [0, 0, 0, 0]]
</code></pre>

<p>I want to write a function that takes all 4 surrounding fields of the one and turns them into a 1 as well.</p>

<p>The above matrix would become:</p>

<pre><code>[[0, 0, 1, 0]
 [0, 1, 1, 1]
 [0, 0, 1, 0]
 [0, 0, 0, 0]]
</code></pre>

<p>I know that this is possible using if-statements, but I really want to optimize my code.</p>

<p>The matrix only contains 0's and 1's. If the 1 is at the edge of the matrix, the 1's should not wrap around, i.e. if the most left field is a 1, the most right field still stays at 0. Also, I am using Python 3.5</p>

<p>Is there a more mathematical or concise way to do this?</p>",python|arrays|numpy|matrix,"<p>FWIW, here's a way to do it just using Numpy. We pad the original data with rows &amp; columns of zeros, and then bitwise-OR offset copies of the padded array together. </p>

<pre><code>import numpy as np

def fill(data):
    rows, cols = data.shape
    padded = np.pad(data, 1, 'constant', constant_values=0)
    result = np.copy(data)
    for r, c in ((0, 1), (1, 0), (1, 2), (2, 1)):
        result |= padded[r:r+rows, c:c+cols]
    return result

data = np.asarray(
    [
        [0, 0, 0, 0],
        [0, 0, 1, 0],
        [0, 0, 0, 0],
        [0, 0, 0, 0],
    ], dtype='uint8')
print(data, '\n')

result = fill(data)
print(result)
</code></pre>

<p><strong>output</strong></p>

<pre><code>[[0 0 0 0]
 [0 0 1 0]
 [0 0 0 0]
 [0 0 0 0]] 

[[0 0 1 0]
 [0 1 1 1]
 [0 0 1 0]
 [0 0 0 0]]
</code></pre>",1
597,40354486,Django page no found,"<p>views.py</p>

<pre><code>def search_author(request):
   if 'q' in request.GET and request.GET['q']:
    q = request.GET['q']
    authors =User.objects.filter(username=q)
    return render_to_response('search_results.html',
        {'authors': author, 'query': q})
   else:
    return HttpResponse('Please submit a search term.')
def search_form(request):
    return render_to_response('search_form.html')
</code></pre>

<p>urls.py</p>

<pre><code>url(r'^search_author$',app.views.search_author),
url(r'^search_form$', app.views.search_form)
</code></pre>

<p>search_form.html</p>

<pre><code>{% extends ""app/layout.html"" %}
{% block content %}

&lt;form action=""/search_author/"" method=""get""&gt;
    &lt;input type=""text"" name=""q""&gt;
    &lt;input type=""submit"" value=""Search""&gt;
&lt;/form&gt;
</code></pre>

<p>search_results.html</p>

<pre><code>{% extends ""app/layout.html"" %}
{% block content %}


&lt;p&gt;You searched for: &lt;strong&gt;{{ query }}&lt;/strong&gt;&lt;/p&gt;

{% if authors%}
   &lt;p&gt;Found {{ authors|length }} author{{ authors|pluralize }}.&lt;/p&gt;
   &lt;ul&gt;
      {% for author in authors %}
      &lt;li&gt;{{ author.username }}&lt;/li&gt;
      {% endfor %}
   &lt;/ul&gt;
{% else %}
    &lt;p&gt;No authors matched your search criteria.&lt;/p&gt;
{% endif %}
</code></pre>

<p>loginparitial.html</p>

<pre><code>{% if user.is_authenticated %}
&lt;form id=""logoutForm"" action=""/logout"" method=""post"" class=""navbar-right""&gt;
{% csrf_token %}
&lt;ul class=""nav navbar-nav navbar-right""&gt;
    &lt;li&gt;&lt;span class=""navbar-brand""&gt;您好 {{ user.username }}!&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=""search_form""&gt;查询作者&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=""upload_book""&gt; 发布旧书&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=""user_book_detail"" &gt;查看我的书籍&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=""javascript:document.getElementById('logoutForm').submit()""&gt;    登出&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p></p>

<p>when l click the '查询作者'  in the home page,the error says
    Page not found (404)
    Request Method: GET
    Request URL:    <a href=""http://127.0.0.1:8000/search_form/"" rel=""nofollow"">http://127.0.0.1:8000/search_form/</a></p>

<p>Can anyone help me with my problem ? Thanks in advance</p>",python|django|web,"<p>I think you giving wrong routing to templates.</p>

<p>In settings.py you giving templates directory route like this</p>

<pre><code>TEMPLATES = [
{
    'BACKEND': 'django.template.backends.django.DjangoTemplates',
    'DIRS': [os.path.join(BASE_DIR, 'templates')],
    'APP_DIRS': True,
    'OPTIONS': {
        'context_processors': [
            'django.template.context_processors.debug',
            'django.template.context_processors.request',
            'django.contrib.auth.context_processors.auth',
            'django.contrib.messages.context_processors.messages',
        ],
    },
},
</code></pre>

<p>]</p>

<p>then your templates loaded from main app folder --> templates folder.
You can call templates directly in views.</p>

<p>If you save your templates in another folder in templates folder,then you need to give the template route upto that folder.</p>

<p>For example:
  you saved your templates in main app folder -->templates --> app folder.
then you have to give the route upto to app folder.</p>

<p>like this:</p>

<pre><code>def search_form(request):
   return render_to_response('app/search_form.html').
</code></pre>

<p>Try once..!</p>",1
598,40354486,Django page no found,"<p>views.py</p>

<pre><code>def search_author(request):
   if 'q' in request.GET and request.GET['q']:
    q = request.GET['q']
    authors =User.objects.filter(username=q)
    return render_to_response('search_results.html',
        {'authors': author, 'query': q})
   else:
    return HttpResponse('Please submit a search term.')
def search_form(request):
    return render_to_response('search_form.html')
</code></pre>

<p>urls.py</p>

<pre><code>url(r'^search_author$',app.views.search_author),
url(r'^search_form$', app.views.search_form)
</code></pre>

<p>search_form.html</p>

<pre><code>{% extends ""app/layout.html"" %}
{% block content %}

&lt;form action=""/search_author/"" method=""get""&gt;
    &lt;input type=""text"" name=""q""&gt;
    &lt;input type=""submit"" value=""Search""&gt;
&lt;/form&gt;
</code></pre>

<p>search_results.html</p>

<pre><code>{% extends ""app/layout.html"" %}
{% block content %}


&lt;p&gt;You searched for: &lt;strong&gt;{{ query }}&lt;/strong&gt;&lt;/p&gt;

{% if authors%}
   &lt;p&gt;Found {{ authors|length }} author{{ authors|pluralize }}.&lt;/p&gt;
   &lt;ul&gt;
      {% for author in authors %}
      &lt;li&gt;{{ author.username }}&lt;/li&gt;
      {% endfor %}
   &lt;/ul&gt;
{% else %}
    &lt;p&gt;No authors matched your search criteria.&lt;/p&gt;
{% endif %}
</code></pre>

<p>loginparitial.html</p>

<pre><code>{% if user.is_authenticated %}
&lt;form id=""logoutForm"" action=""/logout"" method=""post"" class=""navbar-right""&gt;
{% csrf_token %}
&lt;ul class=""nav navbar-nav navbar-right""&gt;
    &lt;li&gt;&lt;span class=""navbar-brand""&gt;您好 {{ user.username }}!&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=""search_form""&gt;查询作者&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=""upload_book""&gt; 发布旧书&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=""user_book_detail"" &gt;查看我的书籍&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=""javascript:document.getElementById('logoutForm').submit()""&gt;    登出&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p></p>

<p>when l click the '查询作者'  in the home page,the error says
    Page not found (404)
    Request Method: GET
    Request URL:    <a href=""http://127.0.0.1:8000/search_form/"" rel=""nofollow"">http://127.0.0.1:8000/search_form/</a></p>

<p>Can anyone help me with my problem ? Thanks in advance</p>",python|django|web,"<p>It's because of your regex pattern. </p>

<p><code>/search_form/</code> is different from your specified <code>^search_form$</code>. That maps to <code>/search_form</code> (No trailing slash). To make it <code>/search_form/</code>, just use <code>^search_form/$</code>. </p>",1
599,69512857,Web3-Py : Nonce Transaction Overwriting Problem,"<p>hello I am using python web3 to send transactions but nonce is the problem my code is</p>
<pre><code>w3 = Web3(Web3.HTTPProvider(&quot;https://rpc.tomochain.com/&quot;))
mainWallet = '0xAad6a88877E6AB7FbC33fdAce672780A85Fc88a8'
nonce = w3.eth.getTransactionCount(mainWallet)
amount_to_send = 0.01
private_key = 'xxxxxxxx'

tx = {
        'nonce': nonce,
        'to': to_address,
        'value': w3.toWei(amount_to_send, 'ether'),
        'gas': 21000,
        'gasPrice': w3.toWei('0.3', 'gwei')
    }

sign_tx = w3.eth.account.signTransaction(tx, private_key)
tran_hash = w3.eth.sendRawTransaction(sign_tx.rawTransaction)
txn = w3.toHex(tran_hash)
print(txn)
</code></pre>
<p><strong>The Above code handle transactions well</strong> but the problem is when more than 1 user tries to withdraw nonce problem come suppose
user 1 request withdraw of 0.001 &amp; user 2 request withdraw of 0.002 and both of them request at the same time then the 0.001 transactions got canceled and only 0.002 passed</p>
<p><strong>What can I do so the both of them pass</strong></p>",python|blockchain|ethereum|web3py,"<p>Maintain a local <a href=""https://en.wikipedia.org/wiki/ACID"" rel=""nofollow noreferrer"">ACID-compliant</a> of transactions and used nonces before broadcasting them out. <a href=""https://github.com/miohtama/sto/blob/master/sto/models/broadcastaccount.py#L10"" rel=""nofollow noreferrer"">An example here</a>.</p>",1
600,69525990,How to build our custom chromium based lightweight browser with does not require installation to launch,"<p>I need to create a browser which is chromium based and do not require any kind of dependencies or installation to launch, and <strong>do not allow</strong> browser specific functionalities like reloading, open in new tab, back and next button, developer tools and also want to hide the address bar.</p>
<p>While looking out for options we have already tried JavaFx web view with JxBrowser, it serves the purpose, but firstly it is dependent on Java and also the size of JRE files is about 170 MB which is large for our requirements, so was looking out for option for which size should be less than 50 MB.</p>
<p>So, please let know what would be best approach for creating this browser.</p>",python|java|visual-c++|chromium|chromium-embedded,<p>With jlink and jpackage you can reduce the size of the Java solution.</p>,0
601,69314506,Problem setting variable to zero when statement is met,"<p>I am trying to make a simple cleaning scheduling tool for when to conduct chemical cleaning in a heat exchanger network. But when I, correctly, find the optimal time for cleaning (x-variable) I cannot set the scaling thickness to zero (sigma) at time t, I have tried using m.if3 but to no avail. I have added a simple version of my problem below. Any feedback is appreciated.</p>
<pre><code>from gekko import GEKKO
import numpy as np
import matplotlib.pyplot as plt
def LN(x):
            return m.log(x)/np.log(2.718)
m = GEKKO(remote=False)
lambdag=0.1 #[W/mK]
days_to_consider = 1
m.time=np.linspace(0, 24*days_to_consider, 24*days_to_consider+1)
N = 6 #Number of heat exchanger
sigm = m.Array(m.Var,N,value=0.0,lb=0)
Rf = m.Array(m.Var,N,value=0.0,lb=0) #[m2K/W]
U = m.Array(m.Param,N,lb=0)
LMTD = m.Array(m.Param,N,lb=0)
Tco = m.Array(m.Param,N,lb=0)
Tci = m.Array(m.Param,N,lb=0)
Q = m.Array(m.Param,N,value=0.0)
dQ = m.Array(m.Var,N,value=0.0)
x = m.Array(m.MV,N,value=0,lb=0,ub=1,integer=True)
x[0].STATUS=1
x[1].STATUS=1
x[2].STATUS=1
x[3].STATUS=1
x[4].STATUS=1
x[5].STATUS=1
EL = m.Array(m.Param,N,value=0)
ELchc = m.Array(m.Param,N,value=0)

Thilist = [105,116,125,129,136,142] #Hot vapor entering [degC] -&gt;Condensing
mdotlist = [582.5,582.5,582.5,582.5,582.5,582.5] # Solution flow [t/h]
Arealist = [600,400,200,300,200,300] #Heating surface [m2]
kglist = [0.0094,0.0003,0.0007,4.5019e-05,0.0003,4.6977e-05] # Deposit rate
Ucllist = [1700,2040,3300,3300,3200,2300] # Cleaned Heat transfer Coefficient [W/m2K]
Qcllist = [10036.4,9336.6,7185.8,5255.4,5112.5,5678.8]
CE = 0.5 #fuel cost[EUR/kWh]
Cchc = 500 #Cleaning cost [EUR/CIP]
#Temperature into heat exchanger network (HEN)
Tci[0] = 90 # degC
#Loop through HEN
for u in range(0,N):
    Thi = Thilist[u]
    Tci = Thi-8 
    mdot = mdotlist[u]
    Area=Arealist[u]
    # Scaling kinematics
    kg = kglist[u]
    Ucl = Ucllist[u]
    Qcl = Qcllist[u]
    m.Equation(sigm[u].dt()==kg*lambdag)
    #TODO PROBLEM: cannot set sigma to zero at time t when x(t) is 1
    #b = m.if3(x[u]-1,1,0)         # binary switch
    m.Equation(sigm[u]==(1)*Rf[u]*lambdag) 
    U[u] = m.Intermediate(Ucl/(1+Ucl*Rf[u]))
    # Thermodynamics 
    LMTD[u]=m.Intermediate(((Thi-Tci)-(Thi-Tco[u]))/LN((Thi-Tci)/(Thi-Tco[u])))
    Tco[u]=m.Intermediate(LMTD[u]*U[u]*Area/(mdot/3.6*3300*1000)+Tci)
    Q[u]=m.Intermediate(U[u]*Area*LMTD[u]/1000)  
    m.Equation(dQ[u].dt()==1/6*(Qcl - Q[u])) 
    EL[u]=m.Intermediate(CE*dQ[u]) 
    ELchc[u]=m.Intermediate(CE*(Q[u] -1/6*Q[u] )*2.44+Cchc) 
    u +=1 
m.Minimize(m.sum([EL[u]*(1-x[u])+(ELchc[u]*x[u]) for u in range(0,len(x))]))
#Constrains
m.Equation(m.sum(x)&lt;=1.0) # Only one clean at time

m.options.IMODE=6
m.solver_options = ['minlp_maximum_iterations 500', \
                                            'minlp_gap_tol 0.01',\
                                            'nlp_maximum_iterations 500']
m.options.SOLVER = 1
m.solve(debug=True,disp=True)

plt.figure(figsize=(12, 6))
plt.subplot(141)
for i in range(0,5):
    plt.bar(m.time,x[i].value,label='CIP'+str(i), width=1.0)
plt.legend()
plt.subplot(142)
plt.plot(m.time,EL[0].value,label='Energy cost')
plt.plot(m.time,ELchc[0].value,label='CIP cost')
plt.legend()
plt.subplot(143)
for i in range(0,5):
    plt.plot(m.time,U[i].value,label='U'+str(i))
plt.legend()
plt.subplot(144)
for i in range(0,5):
    plt.plot(m.time,sigm[i].value,label='scaling'+str(i))
plt.legend()
plt.show()
</code></pre>",python|gekko,"<p>If the simulation does not need to proceed past that condition then there is a variable time method that divides derivatives by a final time variable (<code>tf</code>). This adjusts the final time, similar to the method show for the <a href=""https://apmonitor.com/do/index.php/Main/MinimizeFinalTime"" rel=""nofollow noreferrer"">Jennings benchmark problem</a>. Here is a simplified problem:</p>
<p><a href=""https://i.stack.imgur.com/rCXJx.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/rCXJx.png"" alt=""Variable final time"" /></a></p>
<pre class=""lang-py prettyprint-override""><code>import numpy as np
from gekko import GEKKO
import matplotlib.pyplot as plt

m = GEKKO()

m.time = np.linspace(0,1,101)
x = m.Var(0,lb=0,ub=1)
tf = m.FV(1,lb=0.1,ub=10); tf.STATUS=1
m.Equation(x.dt()/tf==0.2)
m.Maximize(tf)

m.options.IMODE=6
m.options.SOLVER=1
m.solve()

t = [ti*tf.value[0] for ti in m.time]

plt.plot(t,x.value,label='x')
plt.legend()
plt.show()
</code></pre>
<p>The final time is adjusted to maximize <code>tf</code> while observing the constraint that <code>x&lt;1</code>. The differential equation is <code>dx/dt=0.2</code> so the terminal constraint is reached at <code>t=5</code>. Could a similar strategy be used for the heat exchanger problem? There are methods to simulate a heat exchanger cleanout but a change to variable time may be the simplest solution.</p>",0
602,69375540,"Why is this list not being assigned, even though the conditions should be met?","<pre><code>def retrieveSong(): # Function that retrieves a random song from the file.
    file = open(&quot;Songs.csv&quot;, &quot;r&quot;)
    count = 0

    for line in file:   # Finds out how many lines (and therefore songs) there are.
        count += 1

    length = count
    print(length)

    randomIndex = randint(0, length) # Picks a random line. 
    print(randomIndex)
    count = 0
    print(count)
     
    for line in file:   # Loops through the file until it finds the right line.
        if count == randomIndex:
            song = line.split(&quot;,&quot;)
        count += 1

    for item in song: # Gets rid of the \n at the end of each line.
        item = str.strip(item)
    file.close()
    return song    # Returns the song name and artist, in a list where song[0] is the name and song[1] is the artist.
</code></pre>
<p>The program is supposed to retrieve a random song from a CSV file. The song is retrieved into a list, split at each comma, so that it will be <code>['song name', 'artist']</code>. Most of it works fine - the only parts that don't seem to work are the final two 'paragraphs':</p>
<pre><code>for line in file:   # Loops through the file until it finds the right line.
    if count == randomIndex:
        song = line.split(&quot;,&quot;)
    count += 1

for item in song: # Gets rid of the \n at the end of each line.
    item = str.strip(item)
file.close()
return song    # Returns the song name and artist, in a list where song[0] is the name and song[1] is the artist.
</code></pre>
<p>I keep getting an error telling me that the line that says <code>return song</code> is trying to return a variable that has never been assigned, which leads me to believe that something is wrong with the following lines.</p>
<pre><code>for line in file:   # Iterates through the file until it finds the right line.
    if count == randomIndex:
        song = line.split(&quot;,&quot;)
    count += 1
</code></pre>
<p>I'm fairly certain that, for some reason, the program doesn't ever recognise <code>count == randomIndex</code> as True, even though it's supposed to. I've added print statements everywhere to (attempt to) work out what parts aren't working as expected, but I have no idea why. I'm not a Python expert, so I don't really know what to do.</p>",python|python-3.x|list|file,"<p>You need to seek back to the beginning of the file if you want to iterate over it twice:</p>
<pre class=""lang-py prettyprint-override""><code>def retrieveSong(): # Function that retrieves a random song from the file.
    file = open(&quot;Songs.csv&quot;, &quot;r&quot;)
    count = 0

    # Iterates once
    for line in file:   
        count += 1

    # file is now empty
    # so go back to the beginning
    _ = file.seek(0)

    # now you can iterate over it again
    for line in file:
        if count == randomIndex:
           song = [item.strip() for item in line.split(',')]
           break # break out of the loop
        count += 1
</code></pre>
<p>While we're here though, it's better to use <code>with</code> when opening files:</p>
<pre class=""lang-py prettyprint-override""><code>with open(path) as fh:
    for line in fh:
        # do things
</code></pre>
<p>And when counting, use <code>enumerate</code>:</p>
<pre class=""lang-py prettyprint-override""><code>length = sum(1 for _ in file)

for i, line in enumerate(file):
    if i == randomIndex:
        # do things
</code></pre>",3
603,69375540,"Why is this list not being assigned, even though the conditions should be met?","<pre><code>def retrieveSong(): # Function that retrieves a random song from the file.
    file = open(&quot;Songs.csv&quot;, &quot;r&quot;)
    count = 0

    for line in file:   # Finds out how many lines (and therefore songs) there are.
        count += 1

    length = count
    print(length)

    randomIndex = randint(0, length) # Picks a random line. 
    print(randomIndex)
    count = 0
    print(count)
     
    for line in file:   # Loops through the file until it finds the right line.
        if count == randomIndex:
            song = line.split(&quot;,&quot;)
        count += 1

    for item in song: # Gets rid of the \n at the end of each line.
        item = str.strip(item)
    file.close()
    return song    # Returns the song name and artist, in a list where song[0] is the name and song[1] is the artist.
</code></pre>
<p>The program is supposed to retrieve a random song from a CSV file. The song is retrieved into a list, split at each comma, so that it will be <code>['song name', 'artist']</code>. Most of it works fine - the only parts that don't seem to work are the final two 'paragraphs':</p>
<pre><code>for line in file:   # Loops through the file until it finds the right line.
    if count == randomIndex:
        song = line.split(&quot;,&quot;)
    count += 1

for item in song: # Gets rid of the \n at the end of each line.
    item = str.strip(item)
file.close()
return song    # Returns the song name and artist, in a list where song[0] is the name and song[1] is the artist.
</code></pre>
<p>I keep getting an error telling me that the line that says <code>return song</code> is trying to return a variable that has never been assigned, which leads me to believe that something is wrong with the following lines.</p>
<pre><code>for line in file:   # Iterates through the file until it finds the right line.
    if count == randomIndex:
        song = line.split(&quot;,&quot;)
    count += 1
</code></pre>
<p>I'm fairly certain that, for some reason, the program doesn't ever recognise <code>count == randomIndex</code> as True, even though it's supposed to. I've added print statements everywhere to (attempt to) work out what parts aren't working as expected, but I have no idea why. I'm not a Python expert, so I don't really know what to do.</p>",python|python-3.x|list|file,"<p>Your code with minute changes should work fine</p>
<pre class=""lang-py prettyprint-override""><code>def retrieveSong():  # Function that retrieves a random song from the file.
    filename = &quot;tmp.txt&quot;
    # Finds out how many lines (and therefore songs) there are.
    with open(filename) as f:
        length = sum(1 for line in f)

    randomIndex = randint(0, length)  # Picks a random line.
    count = 0
    file = open(filename, &quot;r&quot;)
    for line in file:  # Loops through the file until it finds the right line.
        print(line)
        if count == randomIndex:
            song = line.split(&quot;,&quot;)
        count += 1

    for item in song:  # Gets rid of the \n at the end of each line.
        item = str.strip(item)
    file.close()
    return song  # Returns the song name and artist, in a list where song[0] is the name and song[1] is the artist.
</code></pre>",0
604,69350413,Parsing multiple lines from a txt output,"<p>I need to parse a part of my output file that looks like this (Image is also attached for clarity)</p>
<p>y,mz) = (-.504D-04,-.543D-04,-.538D-03)</p>
<pre><code>






The expected output is : 
</code></pre>
<pre><code>the code I have so far looks like below: 

</code></pre>
<p>class NACParser(ParseSection):
name = &quot;coupling&quot;</p>
<p>which is good but there are some issues:</p>
<ol>
<li><p>It only prints from the very last line and this, I think, is because it overwrites due to similar other lines.</p>
</li>
<li><p>This code will only work for this specific molecule and I want something that can work for any molecule. What I mean is : in this example - I have a molecule with 15 atoms and the first atom is c (carbon) , 5th atom is h (hydrogen) and 11th atom is s (sulfur) but the total number of atoms (which is currently 15 ) and the name of atoms can be different when I have different molecule.</p>
</li>
</ol>
<p>So I am wondering how can I write a general code that can work for a general molecule . Any help?</p>",python|regex|parsing,"<p>This will to literally what you asked.  Maybe you can use this as a basis.  I just gather all the atom IDs when I find a line with &quot;ATOM&quot;, and create the dict entries when I find a line with &quot;d/d&quot;.  I would show the output, but I just typed in faked data because I didn't want to retype all of that.</p>
<pre><code>import re
from pprint import pprint

header = r&quot;(\d+ [a-z]{1,2})&quot;

atoms = []
gather = {}
for line in open('x.txt'):
    if len(line) &lt; 5:
        continue
    if 'ATOM' in line:
        atoms = re.findall( header, line )
        atoms = [s.replace(' ','') for s in atoms]
        continue
    if '/d' in line:
        parts = line.split()
        row = parts[0].replace('/','')
        for at,val in zip(atoms,parts[1:]):
            gather[at+'_'+row] = val
pprint(gather)
</code></pre>
<p>Here's the output from your test data.  I hope you realize that the cut-and-paste data doesn't match the image.  The image uses <code>d/dx</code>, but the cut and paste uses <code>dE/dx</code>.  I have assumed you want the &quot;E&quot; in the dict tag too, but that's easy to fix if you don't.</p>
<pre><code>{'10c_dEdx': '0.8337613D-02',
 '10c_dEdy': '-0.8171767D-01',
 '10c_dEdz': '-0.4316928D-02',
 '11s_dEdx': '0.3138990D-01',
 '11s_dEdy': '0.3893252D-01',
 '11s_dEdz': '0.2767787D-02',
 '12h_dEdx': '0.8416159D-02',
 '12h_dEdy': '0.3335059D-02',
 '12h_dEdz': '0.1357569D-01',
 '13h_dEdx': '0.1128067D-02',
 '13h_dEdy': '-0.1457401D-01',
 '13h_dEdz': '-0.7834375D-03',
 '14h_dEdx': '0.8941240D-02',
 '14h_dEdy': '0.4869915D-02',
 '14h_dEdz': '-0.1273530D-01',
 '15h_dEdx': '0.4292434D-03',
 '15h_dEdy': '-0.1418384D-01',
 '15h_dEdz': '-0.7764904D-03',
 '1c_dEdx': '-0.1150239D-01',
 '1c_dEdy': '0.4798462D-02',
 '1c_dEdz': '0.6015413D-05',
 '2c_dEdx': '0.2259669D-01',
 '2c_dEdy': '0.5902019D-01',
 '2c_dEdz': '0.3707704D-02',
 '3c_dEdx': '-0.3153006D-02',
 '3c_dEdy': '-0.4060517D-01',
 '3c_dEdz': '-0.2306249D-02',
 '4n_dEdx': '-0.2718508D-01',
 '4n_dEdy': '0.3404657D-01',
 '4n_dEdz': '0.1334956D-02',
 '5h_dEdx': '-0.1064344D-01',
 '5h_dEdy': '-0.1054522D-01',
 '5h_dEdz': '-0.8032586D-03',
 '6c_dEdx': '0.3017851D-01',
 '6c_dEdy': '-0.2805275D-01',
 '6c_dEdz': '-0.9413310D-03',
 '7s_dEdx': '-0.2253417D-01',
 '7s_dEdy': '0.1196856D-01',
 '7s_dEdz': '0.2069422D-03',
 '8n_dEdx': '-0.3195785D-01',
 '8n_dEdy': '0.1888257D-01',
 '8n_dEdz': '0.3914382D-03',
 '9h_dEdx': '-0.4441489D-02',
 '9h_dEdy': '0.1382483D-01',
 '9h_dEdz': '0.6724659D-03'}
</code></pre>",1
605,69469377,console commands py and python is not working Windows,"<p>Firstly I am a windows 10 user.
I had downloaded python 3.10. As normal to <code>C:\Program Files\Python310</code>. Next as in the <a href=""https://phoenixnap.com/kb/install-pip-windows"" rel=""nofollow noreferrer"">tutorial</a> I tried to use py and python commands(py help, python help, python get-pip.py). But when I write it I see an error:</p>
<pre><code>python: can't open file 'c:\\Program Files\\Python310\\help': [Errno 2] No such file or directory
</code></pre>
<p>or</p>
<pre><code>python: can't open file 'c:\\Program Files\\Python310\\get-pip.py': [Errno 2] No such file or directory
</code></pre>
<p>After I reinstall python 3.10. Even delete old exe, and download new from the official site. After uninstalling old Python 3.10 through new exe. And after I have installed Python 3.10 again through new exe in custom mode. Everywhere put a tick. After this again tried to write this command and again commands are not working(similar errors).</p>
<p>Edit. The most strange thing is that <code>pip</code> is working, BUT I installed pip with python.exe. So it isn't an exe problem. It is sth other</p>
<p>P.S. I have founded before a few answers for this problem, but or it is only for Mac/Linux or it doesn't help me.</p>",python|windows|console,"<p>I believe it is not in <code>C:\Program Files\Python310</code>. I think it is in <code>C:\Python310</code>, or your main drive.</p>
<p>If that way isn't working, I'd try downloading the Python version from the Microsoft store. It automatically sets up the PATH variable for you, so you can just write <code>python</code> and it should work.</p>
<p>If it still doesn't work, tell me and I'll delete my useless answer.</p>",0
606,69306442,Stacked bar showing percentage values for 2 variables in Matplotlib?,"<p>I saw a code for a stacked percentage bar plot in another post, however, am having trouble adopting it for my plot.
<a href=""https://stackoverflow.com/questions/51495982/display-totals-and-percentage-in-stacked-bar-chart-using-dataframe-plot"">Display totals and percentage in stacked bar chart using DataFrame.plot</a></p>
<pre><code>
data = {'Paid':[8045],'Not Paid':[1533]}
df = pd.DataFrame(data, index = [''])
df['Total'] = df['Paid']+df['Not Paid']

df_rel = (df[df.columns[0:2]].div(df.iloc[0, 2])*100).round(2)
df_rel
</code></pre>
<p>So I want to build a stacked bar showing the percentage values for each of my two variables on it:</p>
<pre><code>df_rel.plot( kind='bar',stacked = True,mark_right = True) # this is ok

for n in df_rel:
    for i, (a,b,c) in enumerate(zip(df_rel.iloc[:,:][n], df[n], df_rel[n])):
         plt.text(a -b / 2, i, str(c) + '%', va = 'center', ha = 'center')  # this gives an error.

</code></pre>
<p>Can somebody help me figure out whats wrong?  I'm getting 'ValueError: Image size of 1318810x237 pixels is too large.'</p>
<p>Also this approach seems complicated maybe someone knows a better way.</p>",python-3.x|pandas|plot|bar-chart,"<p>No need for the inner loop, just calculate the cummulated bar height and add text there:</p>
<p><a href=""https://akuiper.com/console/SHDHhyWlBjIt"" rel=""nofollow noreferrer"">Full example</a></p>
<pre><code>df_rel.plot( kind='bar',stacked = True,mark_right = True) # this is ok
h = 0
for col in df_rel:
    h += (p := df_rel[col].iat[0])      # calculate current bar height
    plt.text(0, h - p / 2, f'{p}%', va='center', ha='center')
plt.show()
</code></pre>
<p><a href=""https://i.stack.imgur.com/FwOwY.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/FwOwY.png"" alt=""enter image description here"" /></a></p>",2
607,69319579,I need help using string formatting for two pieces of information a user inputs in Python,"<p>I am trying to learn Python and an assignment I am doing has the following prompt. I'm in the third chapter and so far this chapter has gone over strings, lists, tuples, sets, dictionaries, data type and type conversions.</p>
<blockquote>
<p>Write a single statement to print: user_word,user_number. Note that there is no space between the comma and user_number.</p>
</blockquote>
<p>The inputs I am supposed to test with are <code>Amy</code> and <code>5</code></p>
<p>The code is prewritten and below. I am not allowed to edit the first two lines. The corrections/working code must be added afterwards.</p>
<pre><code>    user_word = input()
    user_number = int(input())
    
    ''''Your Solution goes here''''
    
</code></pre>
<p>So far I have added to where Your Solution goes here is</p>
<pre><code>    print((user_word), (user_number))
</code></pre>
<p>When I added this and used <code>Amy</code> and <code>5</code> as inputs my output is almost identical. But It needs to show as <code>Amy,5</code> with a comma and no spaces. The problem is <code>,</code> is the only way I know to separate the variables, comma also adds a space by default giving me <code>Amy 5</code> and this is not the solution I need. <code>[]</code> and curly <code>{}</code> seem to be used for multiple different operations and the context seems to determine how it works. The comma will not show. even when I add it.</p>
<pre><code>   print((user_word), ',', (user_number))
</code></pre>
<p>This goes and adds a bunch of spaces also. If I use apostrophe <code>'</code> it prints the string and not the value of the variables the user typed in. If I remove all the spaces and commas I get errors after the IDLE interpreter runs. Also I can't eve get a <code>.</code> to show up right after the last letter there is always a space.</p>
<p>I also tried to use</p>
<pre><code>   print('{:s}'.format(user_word), '{:d}'.format(user_number)) 
</code></pre>
<p>but again it seems to miss the comma. The &quot;user&quot; the program that my work is ran through is never going to add &quot;Amy,&quot;.</p>",python,"<p>You can use an <code>fstring</code>, which is a string that allows you to format it very easily, like this -</p>
<pre class=""lang-py prettyprint-override""><code>print(f&quot;{user_word},{user_number}&quot;)
</code></pre>
<p>or you can use string concatenation, like this -</p>
<pre class=""lang-py prettyprint-override""><code>print(user_word + &quot;,&quot; + user_number)
</code></pre>
<p>another way is to set the print separator string to an empty string</p>
<pre><code>print(user_word, &quot;,&quot;, user_number, sep='')
</code></pre>
<p>Anyways, I suggest you read about f-string and string formatting in general.</p>",1
608,69315996,Multiplication table with for loops,"<p>I've been trying to make a multiplication table with for loops in Python.</p>
<pre class=""lang-py prettyprint-override""><code>
for i in range(1,11):
    print(&quot;\t&quot;, i)
print(&quot;\n&quot;)
print(&quot;-------------------------------&quot;)
for a in range(1, 11):
    print(a)
    for t in range(1,11):
        print(&quot;\t&quot;, a * t, end=&quot;\t&quot;)
</code></pre>
<p>The problem I have is the output puts every vertical factor on the wrong side of the products, and I would like to have them like <code>1</code> is.</p>
<p>This is a picture of what I mean:</p>
<p><img src=""https://i.stack.imgur.com/Mzf86.png"" alt="""" /></p>
<p>Any solutions? I've been trying and trying to move the <code>\t</code> and <code>\n</code> in other places to make it work but it never seems to work for me to get them the way I want.</p>
<p>Thanks in advance.</p>",python|for-loop|nested-for-loop,"<pre><code>#          all column titles at once
print('', *range(1, 11), sep='\t')  # includes tailing newline
#      dummy first column placeholder

print('-------------------------------')

for a in range(1, 11):
    print(a, end='\t')  # first column, tab instead of newline at end

    for t in range(1, 11):
        print(a * t, end='\t')  # each number, tab instead of newline at end

    print()  # final newline to end row
</code></pre>
<p>Produces:</p>
<pre><code>    1   2   3   4   5   6   7   8   9   10
-------------------------------
1   1   2   3   4   5   6   7   8   9   10  
2   2   4   6   8   10  12  14  16  18  20  
3   3   6   9   12  15  18  21  24  27  30  
4   4   8   12  16  20  24  28  32  36  40  
5   5   10  15  20  25  30  35  40  45  50  
6   6   12  18  24  30  36  42  48  54  60  
7   7   14  21  28  35  42  49  56  63  70  
8   8   16  24  32  40  48  56  64  72  80  
9   9   18  27  36  45  54  63  72  81  90  
10  10  20  30  40  50  60  70  80  90  100 
</code></pre>",0
609,69315996,Multiplication table with for loops,"<p>I've been trying to make a multiplication table with for loops in Python.</p>
<pre class=""lang-py prettyprint-override""><code>
for i in range(1,11):
    print(&quot;\t&quot;, i)
print(&quot;\n&quot;)
print(&quot;-------------------------------&quot;)
for a in range(1, 11):
    print(a)
    for t in range(1,11):
        print(&quot;\t&quot;, a * t, end=&quot;\t&quot;)
</code></pre>
<p>The problem I have is the output puts every vertical factor on the wrong side of the products, and I would like to have them like <code>1</code> is.</p>
<p>This is a picture of what I mean:</p>
<p><img src=""https://i.stack.imgur.com/Mzf86.png"" alt="""" /></p>
<p>Any solutions? I've been trying and trying to move the <code>\t</code> and <code>\n</code> in other places to make it work but it never seems to work for me to get them the way I want.</p>
<p>Thanks in advance.</p>",python|for-loop|nested-for-loop,"<p>Here is the edited version of your code, if you find this to solve your question then consider accepting the solution.</p>
<pre><code> for i in range(1,11):
    print(&quot;\t&quot;, i, end=&quot; &quot;)

print(&quot;\n&quot;)
print(&quot;        &quot;,&quot;--------------------------------------------------------------------------&quot;)

for a in range(1, 11):
    #print(&quot;\n&quot;)
    print(&quot;\n&quot;, a, end=&quot;&quot;)
    for t in range(1,11):
        print(&quot;\t&quot;, a * t, end=&quot;&quot;)
</code></pre>
<p><a href=""https://i.stack.imgur.com/grxrF.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/grxrF.png"" alt=""enter image description here"" /></a></p>",-1
610,69559398,Test if desired type or None is in list of objects,"<p>I want to check if every object in my list is of type str or is None</p>
<p>The following code fails</p>
<pre><code>str or None in (type(&quot;hi&quot;), type(&quot;ho&quot;), type(&quot;hey&quot;), None)
</code></pre>
<p>output:</p>
<pre><code>str
</code></pre>
<p>My desired outcome should be True</p>
<p>and for the code:</p>
<pre><code>str or None in (type(&quot;hi&quot;), type(&quot;ho&quot;), type(&quot;hey&quot;), type(2))
</code></pre>
<p>The outcome should be False</p>",python|types,"<p>You could try this given that all the variables are given in a list like this.</p>
<pre><code>lst = ['hi', 'ho', None]
ans = all(isinstance(i, (str, type(None))) for i in lst)
print(ans)
</code></pre>
<p><strong>Output</strong></p>
<pre><code>True
</code></pre>",3
611,69559398,Test if desired type or None is in list of objects,"<p>I want to check if every object in my list is of type str or is None</p>
<p>The following code fails</p>
<pre><code>str or None in (type(&quot;hi&quot;), type(&quot;ho&quot;), type(&quot;hey&quot;), None)
</code></pre>
<p>output:</p>
<pre><code>str
</code></pre>
<p>My desired outcome should be True</p>
<p>and for the code:</p>
<pre><code>str or None in (type(&quot;hi&quot;), type(&quot;ho&quot;), type(&quot;hey&quot;), type(2))
</code></pre>
<p>The outcome should be False</p>",python|types,"<p>Change your condition to</p>
<pre><code>types_tuple = (type(&quot;hi&quot;), type(&quot;ho&quot;), type(&quot;hey&quot;), type(2))
print(str in types_tuple or None in types_tuple)
</code></pre>
<p>Output:</p>
<p><code>True</code></p>",0
612,69559398,Test if desired type or None is in list of objects,"<p>I want to check if every object in my list is of type str or is None</p>
<p>The following code fails</p>
<pre><code>str or None in (type(&quot;hi&quot;), type(&quot;ho&quot;), type(&quot;hey&quot;), None)
</code></pre>
<p>output:</p>
<pre><code>str
</code></pre>
<p>My desired outcome should be True</p>
<p>and for the code:</p>
<pre><code>str or None in (type(&quot;hi&quot;), type(&quot;ho&quot;), type(&quot;hey&quot;), type(2))
</code></pre>
<p>The outcome should be False</p>",python|types,"<p>Use <code>any</code> built-in function to check using a logical <strong>or</strong> condition, and similarly the <code>all</code> built-in function to check using a logical <strong>and</strong> condition.</p>
<pre class=""lang-py prettyprint-override""><code>&gt;&gt;&gt; result1 = all(typ in (str, None) for typ in (type(&quot;hi&quot;), type(&quot;ho&quot;), type(&quot;hey&quot;), None))
&gt;&gt;&gt; result1
True

&gt;&gt;&gt; result2 = all(typ in (str, None) for typ in (type(&quot;hi&quot;), type(&quot;ho&quot;), type(&quot;hey&quot;), type(2)))
&gt;&gt;&gt; result2
False
</code></pre>",0
613,69844443,Find all instances of a sub-string in a list of strings and return the index of the string where the sub-string is found,"<p>How would I find all instances of a sub-string in a list of strings and return the index of the string where the sub-string is found in Python?</p>
<p>For example:</p>
<pre><code>sub_string = &quot;tree&quot;
my_list = [&quot;banana&quot;, &quot;tree&quot;, &quot;trees&quot;, &quot;street&quot;]
</code></pre>
<p>The desired output would be: <code>[1,2,3]</code> as tree is found within the strings at the indices of 1, 2, 3.</p>
<p>I have this in the form of a function but it only returns the first instance of the sub-strings index and doesn't recognize the sub-string in a string (tree in street for example).</p>
<pre><code>def inside_search(a_list, search_term):
    if search_term in a_list:
        index = a_list.index(search_term, 0, -1)
        return [index]
    else:
        return []

cats_and_dogs_list = [&quot;cat&quot;, &quot;cats&quot;, &quot;dog&quot;, &quot;dogs&quot;, &quot;catsup&quot;]
print(inside_search(cats_and_dogs_list, &quot;cat&quot;))
</code></pre>
<p>My function returns <code>[0]</code> but I want it to return <code>[0,1,4]</code></p>
<p>I have tried and solved this several ways using several methods but I can't seem to return anything but <code>[0]</code>.</p>",python|list|indexing,"<p>Use list comprehension with <a href=""https://docs.python.org/3/library/functions.html#enumerate"" rel=""nofollow noreferrer""><code>enumerate</code></a>:</p>
<pre><code>&gt;&gt;&gt; [i for i, w in enumerate(my_list) if sub_string in w]
[1, 2, 3]
</code></pre>
<p>If you want to use a function:</p>
<pre><code>def inside_search(a_list, search_term):
    result = list()
    for i, word in enumerate(a_list):
        if search_term in word:
            result.append(i)
    return result

&gt;&gt;&gt; inside_search(cats_and_dogs_list, &quot;cat&quot;)
[0, 1, 4]
</code></pre>",0
614,69844443,Find all instances of a sub-string in a list of strings and return the index of the string where the sub-string is found,"<p>How would I find all instances of a sub-string in a list of strings and return the index of the string where the sub-string is found in Python?</p>
<p>For example:</p>
<pre><code>sub_string = &quot;tree&quot;
my_list = [&quot;banana&quot;, &quot;tree&quot;, &quot;trees&quot;, &quot;street&quot;]
</code></pre>
<p>The desired output would be: <code>[1,2,3]</code> as tree is found within the strings at the indices of 1, 2, 3.</p>
<p>I have this in the form of a function but it only returns the first instance of the sub-strings index and doesn't recognize the sub-string in a string (tree in street for example).</p>
<pre><code>def inside_search(a_list, search_term):
    if search_term in a_list:
        index = a_list.index(search_term, 0, -1)
        return [index]
    else:
        return []

cats_and_dogs_list = [&quot;cat&quot;, &quot;cats&quot;, &quot;dog&quot;, &quot;dogs&quot;, &quot;catsup&quot;]
print(inside_search(cats_and_dogs_list, &quot;cat&quot;))
</code></pre>
<p>My function returns <code>[0]</code> but I want it to return <code>[0,1,4]</code></p>
<p>I have tried and solved this several ways using several methods but I can't seem to return anything but <code>[0]</code>.</p>",python|list|indexing,"<p>This is what you're looking for:</p>
<pre><code>print([my_list.index(item) for item in my_list if sub_string in item])
</code></pre>
<p>Hope this helped :) Cheers!</p>",0
615,69730077,How to get value from indicator in tradingview using python,"<p>greeting everyone.
I am using a popular indicator in tradingview called <code>CM_Ult_MacD_MTF by ChrisMoody</code> where its combination many indicators and blinks <code>red</code> or <code>green</code> dot on the graph to tell when its good to long or short.
I want to somehow <strong>scrape</strong> or get that blink in python and don't know how to achieve that.</p>
<p><a href=""https://i.stack.imgur.com/EnFVT.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/EnFVT.png"" alt=""Image"" /></a></p>
<p>Here in the image where i circled the blinking dots.</p>
<p>My idea is to create a script where somehow i can <strong>scrape</strong> or get exact information as this one to give me notification (using telegram bot) but i don't know how to get that if you can give me idea or something.
Also source code of the indicator is available but it's written in pine script.</p>
<p>I had idea where i can get chart data and somehow create exact same of this indicator in python (&quot;Not visual just numbers&quot;) but its really looking complicated and probably i will find not exact results as this one.
So what can i do, screenshot every minute and train a AI [Looks really hard work.]
Somehow get value by request.get the page (don't know how)
So I am open and thanks a lot.</p>",python|web-scraping|scripting|cryptography|binance,"<p>I'm trying the same but for a different indicator. If it is possible to you I would look into the pine script of the indicator and try to figure out, how it works. At least that's what I'm doing. In Python you can then use TA-Lib or Tulipy Library to replicate the results. For data gathering use your brokers' API and save it to a &quot;.csv&quot;.
Good luck buddy.</p>",1
616,69753411,Bulk Mailing multiple Attachments result in corrupted files in Flask,"<p>I am writing a FlaskMail application with attachments which is a WTForm's<code>MultipleFileField</code>. I am also reading the emails from a xlsx file and sending the emails in bulk with multiple attachments.
However only the first person in the list is able to read the attachments and the rest get a corrupted version of the files.</p>
<p>Here is my Code :</p>
<h2>Code</h2>
<pre><code>    with mail.connect() as conn:
        for contact in contacts:
            message = &quot;Hi %s \n\n&quot; % (contact['name']).capitalize()
            message += body
            subject = subject
            msg = Message(recipients=(contact['email']).split(),
                          sender=sender,
                          html=message,
                          subject=subject,
                          )
            for f in request.files.getlist('attachment'):
                msg.attach(filename=f.filename,
                           content_type=f.content_type,
                           data=f.read())
            conn.send(msg)
        return Response(&quot;Success&quot;)
</code></pre>",python|flask|flask-mail,"<p>I was able to solve it by referring to <a href=""https://stackoverflow.com/questions/28654319/why-is-lenfile-read-giving-me-a-value-of-zero"">this</a> post.</p>
<pre><code>with mail.connect() as conn:
    for contact in contacts:
        message = &quot;Hi %s \n\n&quot; % (contact['name']).capitalize()
        message += body
        subject = subject
        msg = Message(recipients=(contact['email']).split(),
                      sender=sender,
                      html=message,
                      subject=subject,
                      )
        for f in request.files.getlist('attachment'):
            msg.attach(filename=f.filename,
                       content_type=f.content_type,
                       data=f.read())
        conn.send(msg)
        f.seek(0)
    return Response(&quot;Success&quot;)
</code></pre>
<p>The only change in the code is the addition of the following statement.</p>
<pre><code>f.seek(0)
</code></pre>",0
617,69737414,"I have a problem with the base SQLITE3, how to solve it?","<p>I have such a code Python:</p>
<p><code>conn.execute((&quot;UPDATE instagram SET description_photo =? WHERE id=&quot;),self.inputDescriptionInstagram,self.idPhoto)</code></p>
<p>an error pops up:
conn.execute((&quot;UPDATE instagram SET description_photo =? WHERE id=?&quot;),self.inputDescriptionInstagram,self.idPhoto)
TypeError: function takes at most 2 arguments (3 given)</p>
<p>what am I doing wrong, where is the mistake?</p>
<p>self.inputDescriptionInstagram,self.idPhoto to the data transferred using the to definition button. All code is located in the class.</p>",python|sqlite,"<p>You also missed '?' after <code>id=</code>There should be 2 arguments, 1st sql query , 2nd the parameters I think you should try</p>
<pre><code>conn.execute(&quot;UPDATE instagram SET description_photo =? WHERE id=?&quot;, (self.inputDescriptionInstagram,self.idPhoto))
</code></pre>
<p>or you can also do like this</p>
<pre><code>conn.execute(&quot;UPDATE instagram SET description_photo =&quot; + self.inputDescriptionInstagram + &quot; WHERE id= &quot; + self.idPhoto+ )
</code></pre>",1
618,69766508,Fill in Date when only knowing startdate and continous hours? Pandas,"<p>I have a dataframe which is from a license log file. The log file logs only by continueous hours. In the header of the logfile is a startdate. So everytime the hour starts with 0 a new day should begin. How can i solve this in python?</p>
<p>Here is a Example of which i got.
Left is current structe, right is expected output:</p>
<p><a href=""https://i.stack.imgur.com/7g7z5.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7g7z5.png"" alt=""enter image description here"" /></a>
<a href=""https://i.stack.imgur.com/t7QJj.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/t7QJj.png"" alt=""enter image description here"" /></a></p>",python|pandas|date|date-conversion,"<p>I immediately thought of a loop solution; there might be more pythonic ways though.</p>
<pre><code>import pandas as pd
from datetime import timedelta

df=pd.read_csv('date_example.csv', parse_dates=['Date'])

for idx, row in df.iloc[1:].iterrows():
    if df.loc[idx,'Hour'] == 0:
        df.loc[idx,'Date']= df.loc[idx-1,'Date']+timedelta(days=1)
    else:
        df.loc[idx,'Date'] = df.loc[idx-1, 'Date']
</code></pre>",0
619,69766508,Fill in Date when only knowing startdate and continous hours? Pandas,"<p>I have a dataframe which is from a license log file. The log file logs only by continueous hours. In the header of the logfile is a startdate. So everytime the hour starts with 0 a new day should begin. How can i solve this in python?</p>
<p>Here is a Example of which i got.
Left is current structe, right is expected output:</p>
<p><a href=""https://i.stack.imgur.com/7g7z5.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7g7z5.png"" alt=""enter image description here"" /></a>
<a href=""https://i.stack.imgur.com/t7QJj.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/t7QJj.png"" alt=""enter image description here"" /></a></p>",python|pandas|date|date-conversion,"<p>you didn't add the raw data so I created a similar example
this solution assumes there are no days without data.</p>
<pre><code>import pandas as pd
import datetime
import numpy as np

# example data
data = [[datetime.datetime(2021,10,28), 0,5], [np.nan, 1, 6], [np.nan, 23, 7], [np.nan, 1, 8]]
df = pd.DataFrame(data, columns = [['Date', 'Hour','License_Count']])

for i in range(1, len(df)):
    if df.iat[i,1] &gt;= df.iat[i-1,1]:
        df.loc[i,'Date'] = df.iat[i-1,0]
    if df.iat[i,1] &lt;= df.iat[i-1,1]:
        df.loc[i,'Date'] = df.iat[i-1,0] + datetime.timedelta(days=1)
</code></pre>",0
620,69766508,Fill in Date when only knowing startdate and continous hours? Pandas,"<p>I have a dataframe which is from a license log file. The log file logs only by continueous hours. In the header of the logfile is a startdate. So everytime the hour starts with 0 a new day should begin. How can i solve this in python?</p>
<p>Here is a Example of which i got.
Left is current structe, right is expected output:</p>
<p><a href=""https://i.stack.imgur.com/7g7z5.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7g7z5.png"" alt=""enter image description here"" /></a>
<a href=""https://i.stack.imgur.com/t7QJj.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/t7QJj.png"" alt=""enter image description here"" /></a></p>",python|pandas|date|date-conversion,"<p>I used an Excelsheet as input.xlsx that is similiar to your input. The date automatically starts with the hour 0, therefore I didn't use the column with the hours.
The output is then stored in the output.xlsx.</p>
<pre><code>import pandas as pd
from datetime import timedelta

df = pd.read_excel(&quot;input.xlsx&quot;)
date = df['Date'][0]

for index, row in df.iterrows():
    df['Date'][index] = date
    date += timedelta(hours=1)

df.to_excel(&quot;output.xlsx&quot;)
</code></pre>",0
621,69766508,Fill in Date when only knowing startdate and continous hours? Pandas,"<p>I have a dataframe which is from a license log file. The log file logs only by continueous hours. In the header of the logfile is a startdate. So everytime the hour starts with 0 a new day should begin. How can i solve this in python?</p>
<p>Here is a Example of which i got.
Left is current structe, right is expected output:</p>
<p><a href=""https://i.stack.imgur.com/7g7z5.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7g7z5.png"" alt=""enter image description here"" /></a>
<a href=""https://i.stack.imgur.com/t7QJj.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/t7QJj.png"" alt=""enter image description here"" /></a></p>",python|pandas|date|date-conversion,"<p>I have done this by applying the below function.</p>
<pre><code>import pandas as pd
from datetime import timedelta

df[&quot;Date&quot;] = pd.to_datetime(df[&quot;Date&quot;])
temp=df.copy()

def func(x):
    if x['Hours'] == 0:
        if x.name == 0:
            temp.loc[x.name, 'Date'] = temp.loc[0, 'Date'] + timedelta(days=1)
        
        else: 
            temp.loc[x.name, 'Date'] = temp.loc[x.name - 1, 'Date'] + timedelta(days=1)
        
    else:
        temp.loc[x.name, 'Date'] = temp.loc[x.name - 1, 'Date']

df.apply(func, axis = 1)
print(temp)
</code></pre>
<p>&quot;temp&quot; is your desired output.</p>",0
622,69778921,Moving up directory to access file not using raw path in Python,"<p>I have a project named <code>testrequest</code> and I am working on a file named <code>test_function_pack.py</code>. The working code within the said file is below:</p>
<pre><code>service = Service(r'C:\user\Dev\Selenium\testrequest\drivers\chromedriver.exe')
</code></pre>
<p>I wish to try accessing the chromedriver.exe file using <code>..</code> or <code>.</code> dots and by my understanding, the distance of the two file is two directories upward. I tested using the below code</p>
<pre><code>import os
os.chdir('..')
service = Service(r'../../drivers/chromedriver.exe')
</code></pre>
<p>But the code above does not work, am I missing anything here? Any help is appreciated.</p>
<p>Here is the folder by the way:</p>
<p><a href=""https://i.stack.imgur.com/kOA4B.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/kOA4B.png"" alt=""enter image description here"" /></a></p>",python-3.x|directory|selenium-chromedriver,"<p>I guess something like this should work.</p>
<pre><code>import os
stepups = 2
a = '/'.join(os.path.dirname(__file__).split('\\')[:stepups]) + '/drivers/chromedriver.exe'
print(a)
</code></pre>
<p>Do your own work regarding the step-ups you require, and change that accordingly.</p>",1
623,69760819,Convert line coordinate data to list of tuples for plotting,"<p>I am trying to plot a set of shape outlines. I have a dataframe where each shape is a row and the coordinates are in columns. I have 10 groups of (x,y) coordinates and I want to be able to plot each of the shapes on the same graph.</p>
<p>I was able to plot a single shape if I turned it into a list of tuples, but I want to be able to automate the process instead of doing it by hand.</p>
<p>Is there a way to do this or a better way of plotting the shape outlines?</p>
<p><a href=""https://i.stack.imgur.com/M5ThP.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/M5ThP.png"" alt=""enter image description here"" /></a></p>",python|mathematical-morphology,"<p>I generated some fake data to show a startegy but you can first read this table into pandas using <code>pd.read_csv()</code>. I only put 4 coordinates (X1-4, Y1-4) for simplicity.</p>
<pre><code>import numpy as np
import pandas as pd

# read in the tabular data
# df = pd.read_csv(filename) 

df = pd.DataFrame({'Species': ['B6','B6','B6','FVBN'],
                   'Age': ['P28', 'P28', 'P28', 'P28'],
                   'Brain': [1,2,3,4],
                  'ID': ['A', 'B', 'C', 'D'],
                  'X1': np.random.randint(0,10,4),
                  'Y1': np.random.randint(0,10,4),
                  'X2': np.random.randint(0,10,4),
                  'Y2': np.random.randint(0,10,4),
                  'X3': np.random.randint(0,10,4),
                  'Y3': np.random.randint(0,10,4),
                  'X4': np.random.randint(0,10,4),
                  'Y4': np.random.randint(0,10,4)}
                  )
</code></pre>
<p>Then you can iterate the rows of your dataframe <code>df</code>, collect (x,y) (notice that I repeated X1,Y1 at the end so the polygon is closed) and plot on an existing axis.</p>
<pre><code>import matplotlib.pyplot as plt
fig = plt.figure()
ax = fig.add_subplot()
for i, row in df.iterrows():
    x = row[['X1', 'X2', 'X3', 'X4', 'X1']]
    y = row[['Y1', 'Y2', 'Y3', 'Y4', 'Y1']]
    ax.plot(x,y)
fig.show()
</code></pre>",1
624,69692500,df.dropna() modify rows indices,"<p>I was trying to remove the rows with nan values in a python dataframe and when i do so, i want the row identifiers to shift in such way that the identifiers in the new data frame start from 0 and are one number away from each other. By identifiers i mean the numbers at the left of the following example. Notice that this is not an actual column of my df. This is rather placed by default in every dataframe.</p>
<p>If my Df is like:</p>
<pre><code>        name   toy   born
    0   a      1    2020
    1   na     2    2020
    2   c      5    2020
    3   na     1    2020
    4   asf    1    2020
</code></pre>
<p>i want after <code>dropna()</code></p>
<pre><code>        name   toy   born
    0   a      1    2020
    1   c      5    2020
    2   asf    1    2020
</code></pre>
<p>I dont want, but this is what i get:</p>
<pre><code>        name   toy   born
    0   a      1    2020
    2   c      5    2020
    4   asf    1    2020
</code></pre>",python|pandas|dataframe,"<p>By default, <a href=""https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.dropna.html"" rel=""nofollow noreferrer""><code>df.dropna</code></a> and <a href=""https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.reset_index.html"" rel=""nofollow noreferrer""><code>df.reset_index</code></a> are not performed in place. Therefore, the complete answer would be as follows.</p>
<pre class=""lang-py prettyprint-override""><code>df = df.dropna().reset_index(drop=True)
</code></pre>
<h2>Results and Explanations</h2>
<p>The above code yields the following result.</p>
<pre class=""lang-py prettyprint-override""><code>&gt;&gt;&gt; df = df.dropna().reset_index(drop=True)
&gt;&gt;&gt; df

  name  toy  born
0    a    1  2020
1    c    5  2020
2  asf    1  2020
</code></pre>
<hr />
<p>We use the argument <code>drop=True</code> to drop the index column. Otherwise, the result would look like this.</p>
<pre class=""lang-py prettyprint-override""><code>&gt;&gt;&gt; df = df.dropna().reset_index()
&gt;&gt;&gt; df

   index name  toy  born
0      0    a    1  2020
1      2    c    5  2020
2      4  asf    1  2020
</code></pre>",0
625,69692500,df.dropna() modify rows indices,"<p>I was trying to remove the rows with nan values in a python dataframe and when i do so, i want the row identifiers to shift in such way that the identifiers in the new data frame start from 0 and are one number away from each other. By identifiers i mean the numbers at the left of the following example. Notice that this is not an actual column of my df. This is rather placed by default in every dataframe.</p>
<p>If my Df is like:</p>
<pre><code>        name   toy   born
    0   a      1    2020
    1   na     2    2020
    2   c      5    2020
    3   na     1    2020
    4   asf    1    2020
</code></pre>
<p>i want after <code>dropna()</code></p>
<pre><code>        name   toy   born
    0   a      1    2020
    1   c      5    2020
    2   asf    1    2020
</code></pre>
<p>I dont want, but this is what i get:</p>
<pre><code>        name   toy   born
    0   a      1    2020
    2   c      5    2020
    4   asf    1    2020
</code></pre>",python|pandas|dataframe,<p>You can simply add <code>df.reset_index(drop=True)</code></p>,1
626,69855356,"recursion is detected during loading of ""cv2"" binary extensions","<p>I have a small program which return opencv error after compilation by pyinstaller.
But without compilation it's work!</p>
<p>I use Python 3.8.10 on Windows 10</p>
<p><strong>Program:</strong></p>
<p>import pyautogui<br>
import numpy as np<br>
import cv2<br>
try:<br>
from PIL import Image<br>
except ImportError:<br>
import Image<br><br></p>
<p>screenshot = pyautogui.screenshot('screenshot.png', region=(970, 591, 184, 101)) # start <br>
img = cv2.imread('screenshot.png')<br>
img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)<br>
img = cv2.bitwise_not(img)<br><br></p>
<p><strong>Error:</strong> <br></p>
<p>['C:\Users\n1kro\AppData\Local\Temp\_MEI83642\base_library.zip', 'C:\Users\n1kro\AppData\Local\Temp\<em>MEI83642\lib-dynload', 'C:\Users\n1kro\AppData\Local\Temp\<em>MEI83642']  <br>                                                Traceback (most recent call last):     <br>                                                                                   File &quot;test.py&quot;, line 3, in           <br>                                                                           File &quot;PyInstaller\loader\pyimod03_importers.py&quot;, line 476, in exec_module   <br>                                            File &quot;cv2_<em>init</em></em>.py&quot;, line 180, in                <br>                                                            File &quot;cv2_<em>init</em></em>.py&quot;, line 75, in bootstrap               <br>                                                          ImportError: ERROR: recursion is detected during loading of &quot;cv2&quot; binary extensions. Check OpenCV installation.         [3416] Failed to execute script 'test' due to unhandled exception! <br></p>
<p>I tried to reinstall all, but it is not helped!</p>
<p>Find this post: <a href=""https://github.com/opencv/opencv/issues/13202"" rel=""nofollow noreferrer"">https://github.com/opencv/opencv/issues/13202</a>
But dont understand, what to do :(
Need your help, please!</p>",python|opencv|windows-10|pyinstaller|cv2,<p>I was able to resolve this by uninstalling opencv and installing an older version. Version 4.5.3 worked well.</p>,0
627,69855356,"recursion is detected during loading of ""cv2"" binary extensions","<p>I have a small program which return opencv error after compilation by pyinstaller.
But without compilation it's work!</p>
<p>I use Python 3.8.10 on Windows 10</p>
<p><strong>Program:</strong></p>
<p>import pyautogui<br>
import numpy as np<br>
import cv2<br>
try:<br>
from PIL import Image<br>
except ImportError:<br>
import Image<br><br></p>
<p>screenshot = pyautogui.screenshot('screenshot.png', region=(970, 591, 184, 101)) # start <br>
img = cv2.imread('screenshot.png')<br>
img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)<br>
img = cv2.bitwise_not(img)<br><br></p>
<p><strong>Error:</strong> <br></p>
<p>['C:\Users\n1kro\AppData\Local\Temp\_MEI83642\base_library.zip', 'C:\Users\n1kro\AppData\Local\Temp\<em>MEI83642\lib-dynload', 'C:\Users\n1kro\AppData\Local\Temp\<em>MEI83642']  <br>                                                Traceback (most recent call last):     <br>                                                                                   File &quot;test.py&quot;, line 3, in           <br>                                                                           File &quot;PyInstaller\loader\pyimod03_importers.py&quot;, line 476, in exec_module   <br>                                            File &quot;cv2_<em>init</em></em>.py&quot;, line 180, in                <br>                                                            File &quot;cv2_<em>init</em></em>.py&quot;, line 75, in bootstrap               <br>                                                          ImportError: ERROR: recursion is detected during loading of &quot;cv2&quot; binary extensions. Check OpenCV installation.         [3416] Failed to execute script 'test' due to unhandled exception! <br></p>
<p>I tried to reinstall all, but it is not helped!</p>
<p>Find this post: <a href=""https://github.com/opencv/opencv/issues/13202"" rel=""nofollow noreferrer"">https://github.com/opencv/opencv/issues/13202</a>
But dont understand, what to do :(
Need your help, please!</p>",python|opencv|windows-10|pyinstaller|cv2,"<p>open cmd and use pip to install a different version:</p>
<pre><code> pip install opencv-python==4.5.3.56
</code></pre>
<p>no problems with pyinstaller after it</p>",1
628,69838461,AttributeError: module 'discord.ext.commands' has no attribute 'has_premissions`,"<p>im trying to make mute command but it shows this error &quot;Traceback (most recent call last):
File &quot;main.py&quot;, line 23, in 
@commands.has_premissions(kick_member=True)
AttributeError: module 'discord.ext.commands' has no attribute 'has_premissions'&quot; the code:</p>
<pre><code>import os
import discord
from discord.ext import commands
from discord.ext.commands import Bot
from discord.ext.commands import has_permissions, MissingPermissions, is_owner
import json

client = commands.Bot(command_prefix='/')
status=discord.Status.idle

@client.command()
async def ban(ctx, member: discord.Member, reason=None):
    await member.ban(reason=reason)
    await ctx.send(f&quot;{member} was banned by {ctx.author.name} for reason {reason}&quot;)

    
@client.command()
async def kick(ctx, member: discord.Member,reason=None):
  await member.kick(reason=reason)
  await ctx.send(f&quot;{member} was kicked by {ctx.author.name} for reason {reason}&quot;)

@client.command(aliases=['m'])
@commands.has_premissions(kick_member=True)
async def mute(ctx,member : discord.Member):
  muted_role = ctx.guild.get_role(905765835791036477)
  
@client.event
async def on_ready():
 print('we have logged in as {0.user}'.format(client))


my_secret = os.environ['Token']

client.run(my_secret)



</code></pre>",python|discord.py,"<p>You've written <code>has_premissions</code>, not <code>has_permissions</code>, and the correct syntax seems to be <code>kick_members</code>, not <code>kick_member</code>, as per <a href=""https://discordpy.readthedocs.io/en/rewrite/api.html#discord.Permissions"" rel=""nofollow noreferrer"">https://discordpy.readthedocs.io/en/rewrite/api.html#discord.Permissions</a></p>",0
629,69838461,AttributeError: module 'discord.ext.commands' has no attribute 'has_premissions`,"<p>im trying to make mute command but it shows this error &quot;Traceback (most recent call last):
File &quot;main.py&quot;, line 23, in 
@commands.has_premissions(kick_member=True)
AttributeError: module 'discord.ext.commands' has no attribute 'has_premissions'&quot; the code:</p>
<pre><code>import os
import discord
from discord.ext import commands
from discord.ext.commands import Bot
from discord.ext.commands import has_permissions, MissingPermissions, is_owner
import json

client = commands.Bot(command_prefix='/')
status=discord.Status.idle

@client.command()
async def ban(ctx, member: discord.Member, reason=None):
    await member.ban(reason=reason)
    await ctx.send(f&quot;{member} was banned by {ctx.author.name} for reason {reason}&quot;)

    
@client.command()
async def kick(ctx, member: discord.Member,reason=None):
  await member.kick(reason=reason)
  await ctx.send(f&quot;{member} was kicked by {ctx.author.name} for reason {reason}&quot;)

@client.command(aliases=['m'])
@commands.has_premissions(kick_member=True)
async def mute(ctx,member : discord.Member):
  muted_role = ctx.guild.get_role(905765835791036477)
  
@client.event
async def on_ready():
 print('we have logged in as {0.user}'.format(client))


my_secret = os.environ['Token']

client.run(my_secret)



</code></pre>",python|discord.py,"<ul>
<li>You've written &quot;p<code>er</code>missions&quot; as &quot;p<code>re</code>missions&quot;;</li>
<li>You've written &quot;kick_member<code>s</code>&quot; as &quot;kick_member&quot;.</li>
</ul>
<h2>Picture:</h2>
<p><a href=""https://i.stack.imgur.com/LYmvk.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/LYmvk.jpg"" alt="""" /></a></p>
<h2>Links:</h2>
<ul>
<li><a href=""https://discordpy.readthedocs.io/en/stable/api.html#discord.Permissions.kick_members"" rel=""nofollow noreferrer""><code>discord.Permissions.kick_members</code></a></li>
<li><a href=""https://discordpy.readthedocs.io/en/stable/ext/commands/api.html?highlight=has_perms#discord.ext.commands.has_permissions"" rel=""nofollow noreferrer""><code>@commands.has_permissions()</code></a></li>
</ul>
<h3>Suggestion</h3>
<p>I suggest you to add the <code>has_permissions</code> check to the kick and ban commands too…</p>",1
630,69961489,Python loop to return one value from list,"<p>I'm having a bit of a problem understanding exactly how it works. let's say that I have a list of students with their IDs, names and grades as following, and I would like to make a program that lets you input the student's ID and prints out the average grade:</p>
<pre><code>students = [ #list of id, name and grades
    (&quot;123&quot;, &quot;Adam&quot;, [58, 68, 74]), \
    (&quot;925&quot;, &quot;Bob&quot;, []), \
    (&quot;456&quot;, &quot;Carly&quot;, [68, 72, 100]), \
    (&quot;888&quot;, &quot;Deborah&quot;, [68, 99, 100]), \
    (&quot;789&quot;, &quot;Ethan&quot;, [52, 88, 73])
]
input_id = str(input(&quot;Enter Student id: &quot;))
student_num = 0
while student_num &lt; len(students):
  student = students[student_num]
  student_id = student[0]
  student_name = student[1]
  student_grades = student[2]
  if input_id == student_id:
    print(student_name, sum(student_grades)/len(student_grades))
  elif student_grades == []:
    print(student_name, &quot;has no grades&quot;)
  else: print(input_id, &quot;not found&quot;)
  student_num += 1
</code></pre>
<p>this outputs this result</p>
<pre><code>&gt; Enter Student id: 456
&gt; 456 not found
&gt; Bob has no grades
&gt; Carly 80.0
&gt; 456 not found
&gt; 456 not found
</code></pre>
<p>How do I make it only print Carly?
thanks in advance!</p>",python|while-loop,"<p>Your code needed some restructuring and some extra logic</p>
<pre><code>students = [ #list of id, name and grades
    (&quot;123&quot;, &quot;Adam&quot;, [58, 68, 74]), \
    (&quot;925&quot;, &quot;Bob&quot;, []), \
    (&quot;456&quot;, &quot;Carly&quot;, [68, 72, 100]), \
    (&quot;888&quot;, &quot;Deborah&quot;, [68, 99, 100]), \
    (&quot;789&quot;, &quot;Ethan&quot;, [52, 88, 73])
]
input_id = str(input(&quot;Enter Student id: &quot;))
student_num = 0
found = False
while student_num &lt; len(students):
    student = students[student_num]
    student_id = student[0]
    if input_id == student_id:
        found = True
        student_name = student[1]
        student_grades = student[2]
        if student_grades == []:
            print(student_name, &quot;has no grades&quot;)
            
        else:
            print(student_name, sum(student_grades)/len(student_grades))
            
    
    student_num += 1
if found == False:
    print(input_id, &quot;not found&quot;)
    
</code></pre>",0
631,69961489,Python loop to return one value from list,"<p>I'm having a bit of a problem understanding exactly how it works. let's say that I have a list of students with their IDs, names and grades as following, and I would like to make a program that lets you input the student's ID and prints out the average grade:</p>
<pre><code>students = [ #list of id, name and grades
    (&quot;123&quot;, &quot;Adam&quot;, [58, 68, 74]), \
    (&quot;925&quot;, &quot;Bob&quot;, []), \
    (&quot;456&quot;, &quot;Carly&quot;, [68, 72, 100]), \
    (&quot;888&quot;, &quot;Deborah&quot;, [68, 99, 100]), \
    (&quot;789&quot;, &quot;Ethan&quot;, [52, 88, 73])
]
input_id = str(input(&quot;Enter Student id: &quot;))
student_num = 0
while student_num &lt; len(students):
  student = students[student_num]
  student_id = student[0]
  student_name = student[1]
  student_grades = student[2]
  if input_id == student_id:
    print(student_name, sum(student_grades)/len(student_grades))
  elif student_grades == []:
    print(student_name, &quot;has no grades&quot;)
  else: print(input_id, &quot;not found&quot;)
  student_num += 1
</code></pre>
<p>this outputs this result</p>
<pre><code>&gt; Enter Student id: 456
&gt; 456 not found
&gt; Bob has no grades
&gt; Carly 80.0
&gt; 456 not found
&gt; 456 not found
</code></pre>
<p>How do I make it only print Carly?
thanks in advance!</p>",python|while-loop,"<p>Use a for loop and unpacking would make the code easier to read, then the 2 prints relative to the found person should be put after the <code>if input_id == student_id</code>, and the <code>for/else</code> structure can be used very nicely, if you didn't find the person you didn't use the <code>break</code> instruction (stop loop) so you go in the final <code>else</code></p>
<pre><code>input_id = input(&quot;Enter Student id: &quot;)
for student_id, student_name, student_grades in students:
    if input_id == student_id:
        if not student_grades:
            print(student_name, &quot;has no grades&quot;)
        else:
            print(student_name, sum(student_grades) / len(student_grades))
        break
else:
    print(input_id, &quot;not found&quot;)
</code></pre>

<pre><code>Enter Student id: 456
Carly 80.0
</code></pre>",0
632,69727106,Return an instance of a Class in Python,"<p>I am trying to learn about Object-oriented Programming in Python but I am a bit confuse with how to return an instance of a class.</p>
<p>Some background for the code I have:
The Contact class is meant to have a (full) name which is required, zero or more phone numbers, and zero or more email addresses for the contact.
The AddressBook class which takes a list of contacts (defined as above), and the &quot;add_contact&quot; method is suppose to add a contact to the address book even after creating one.</p>
<pre><code>class Contact:
    def __init__(self, name = None, addresses = False, email_addresses = False):
        self.name = name
        self.addresses = addresses
        self.email_addresses = email_addresses
class AddressBook:
    def __init__(self, contacts = []):
        self.contacts = contacts
    def add_contact(self,new_contact):
        self.contacts.append(new_contact)
    def contact_by_name(self, person):
        return Contact(name = person)
</code></pre>
<p>So what I am trying to implement is that the &quot;contact_by_name&quot; method will take a name(string) and returns the contact with the given name -- i.e. it returns an instance of Contact.</p>
<p>Example:</p>
<pre><code>julian = Contact(name=&quot;Julian Berman&quot;)
book = AddressBook(contacts=[julian])
</code></pre>
<p>What I want:</p>
<pre><code>book.contact_by_name(&quot;Julian Berman&quot;) == julian
</code></pre>
<p>I tried my best to come out with the code for the &quot;contact_by_name&quot; method but it keeps giving me errors, can someone please send help! Thanks!</p>",python|class,"<p>So are you just looking for a simple search?</p>
<pre><code>    def contact_by_name( self, person ):
        for c in self.contacts:
            if c.name == person:
                return c
        return None
</code></pre>
<p>Be sure to handle the case where the name is not found.</p>",5
633,65665423,Removing ndarray from list in python,"<p>Very strange issue, giving you details for you to reproduce.</p>
<p>I have an ndarray <code>x = [[  58.0376135 ], [4739.44845915]]</code> which is defined as ndarray size (2,1)</p>
<p>I also have this list</p>
<pre><code>lst = [array([[11120.19965669],[ 1036.7331153 ]]), 
       array([[  58.0376135 ],[4739.44845915]]), 
       array([[ 766.38433838],[5524.3418457 ]])]
</code></pre>
<p>list of (2,1) ndarrays. As you can see, <code>x == lst[1]</code>.</p>
<p>However, when I write <code>lst.remove(x)</code> or <code>x in lst</code> I get value error that the truth value of an array with more than one element is ambiguous. Strangely, on other examples it does work.</p>
<p>How can I make it work here too?</p>",python|list|numpy,"<p>For a NumPy array <code>arr</code>, the expression <code>arr in seq</code> returns the element-wise <code>in seq</code> operation, i.e., an array of booleans.</p>
<p>If the resulting array has only one element, then the expression is evaluated as <code>True</code> or <code>False</code> depending on the boolean value of that element. However, whenever you try to evaluate an array with more than one element in boolean context you get a <code>ValueError</code>, as in this case the truth value is ambiguous. You can remove ambiguity through <code>any</code> or <code>all</code>. Run this code to convince yourself:</p>
<pre class=""lang-py prettyprint-override""><code>In [1282]: x = np.array([0])

In [1283]: y = np.array([0, 1])

In [1284]: bool(x)
Out[1284]: False

In [1285]: bool(y)
Traceback (most recent call last):

  File &quot;&lt;ipython-input-1285-c0cc820b77c4&gt;&quot;, line 1, in &lt;module&gt;
    bool(y)

ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()


In [1286]: any(y)
Out[1286]: True

In [1287]: all(y)
Out[1287]: False
</code></pre>
<p>If you want to check whether an array is contained in a list you could use NumPy's <a href=""https://numpy.org/doc/stable/reference/generated/numpy.array_equal.html"" rel=""nofollow noreferrer""><code>array_equal</code></a> like this:</p>
<pre class=""lang-py prettyprint-override""><code>In [1295]: def array_in_list(arr, alist):
      ...:     for item in alist:
      ...:         if np.array_equal(arr, item):
      ...:             return True
      ...:     return False

In [1296]: array_in_list(x, lst)
Out[1296]: True

In [1297]: array_in_list(2*x, lst)
Out[1297]: False
</code></pre>
<p>It may be convenient to replace <code>array_equal</code> by <a href=""https://numpy.org/doc/stable/reference/generated/numpy.allclose.html#numpy.allclose"" rel=""nofollow noreferrer""><code>allclose</code></a> in order to avoid the issues associated to floating point comparison.</p>",0
634,65665423,Removing ndarray from list in python,"<p>Very strange issue, giving you details for you to reproduce.</p>
<p>I have an ndarray <code>x = [[  58.0376135 ], [4739.44845915]]</code> which is defined as ndarray size (2,1)</p>
<p>I also have this list</p>
<pre><code>lst = [array([[11120.19965669],[ 1036.7331153 ]]), 
       array([[  58.0376135 ],[4739.44845915]]), 
       array([[ 766.38433838],[5524.3418457 ]])]
</code></pre>
<p>list of (2,1) ndarrays. As you can see, <code>x == lst[1]</code>.</p>
<p>However, when I write <code>lst.remove(x)</code> or <code>x in lst</code> I get value error that the truth value of an array with more than one element is ambiguous. Strangely, on other examples it does work.</p>
<p>How can I make it work here too?</p>",python|list|numpy,"<p>This is a way to do it:</p>
<pre><code>[arr for arr in lst if not np.all(x==arr)]
</code></pre>
<p>Since <code>x</code> is multidimensional you need to use <code>np.all()</code> instead of element-wise comparisons like <code>x in arr</code></p>",1
635,65937620,Pyspark Create New Categoric Column Based on a New Condition,"<p>My input spark data frame is;</p>
<pre><code>    Year  Month        Client  Value 
    2019  1            1       5 
    2019  2            1       3  
    2019  3            1       4  
    2019  4            1       0  
    2019  5            1       3  
    2019  6            1       15 
    2019  7            1       45 
    2019  8            1       50 
    2019  9            1       64  
    2019  10           1       91   
    2019  11           1       1 
    2019  12           1       34  
    2019  1            2       0 
    2019  2            2       0  
    2019  3            2       0  
    2019  4            2       0  
    2019  5            2       1  
    2019  6            2       2 
    2019  7            2       10 
    2019  8            2       1 
    2019  9            2       4  
    2019  10           2       7 
    2019  11           2       1 
    2019  12           2       34  
</code></pre>
<p>Dataframe is ordered by client, year, and month.</p>
<p>&quot;Target&quot; column is 3 if the maximum value in the last 6 months (from 2019-06 to 2019-12) is greater than 90.</p>
<p>&quot;Target&quot; column is 2 if the maximum value in the last 6 months (from 2019-06 to 2019-12) is greater than 15 and less than 90.</p>
<p>&quot;Target&quot; column is 1 if the maximum value in the last 6 months (from 2019-06 to 2019-12) is less than 15.</p>
<p>I shared the desired output according to the data above;</p>
<pre><code>    Year  Month        Client  Value Target
    2019  1            1       5     3
    2019  2            1       3     3
    2019  3            1       4     3
    2019  4            1       0     3 
    2019  5            1       3     3
    2019  6            1       15    3
    2019  7            1       45    3 
    2019  8            1       50    3
    2019  9            1       64    3 
    2019  10           1       91    3
    2019  11           1       1     3
    2019  12           1       34    3
    2019  1            2       0     2
    2019  2            2       0     2
    2019  3            2       0     2
    2019  4            2       0     2
    2019  5            2       1     2
    2019  6            2       2     2
    2019  7            2       10    2
    2019  8            2       1     2
    2019  9            2       4     2
    2019  10           2       7     2
    2019  11           2       1     2
    2019  12           2       34    2
</code></pre>
<p>Could you please help me with this?</p>",python|apache-spark|pyspark|apache-spark-sql,"<p>You can filter out all months before June and get maximal value for each client:</p>
<pre><code>(
    df.filter(F.col('Month') &gt;= 6)
    .groupby('Client')
    .agg(F.when(F.max('Value') &gt; 90, 3)
         .when(F.max('Value') &gt; 15, 2)
         .otherwise(1)
         .alias('Target'))
    .join(df, 'Client')
    .select(*df.columns, 'Target')
).show()
</code></pre>
<p>Output:</p>
<pre><code>+----+-----+------+-----+------+
|Year|Month|Client|Value|Target|
+----+-----+------+-----+------+
|2019|    1|     1|    5|     3|
|2019|    2|     1|    3|     3|
|2019|    3|     1|    4|     3|
|2019|    4|     1|    0|     3|
|2019|    5|     1|    3|     3|
|2019|    6|     1|   15|     3|
|2019|    7|     1|   45|     3|
|2019|    8|     1|   50|     3|
|2019|    9|     1|   64|     3|
|2019|   10|     1|   91|     3|
|2019|   11|     1|    1|     3|
|2019|   12|     1|   34|     3|
|2019|    1|     2|    0|     2|
|2019|    2|     2|    0|     2|
|2019|    3|     2|    0|     2|
|2019|    4|     2|    0|     2|
|2019|    5|     2|    1|     2|
|2019|    6|     2|    2|     2|
|2019|    7|     2|   10|     2|
|2019|    8|     2|    1|     2|
+----+-----+------+-----+------+
only showing top 20 rows
</code></pre>",1
636,65937620,Pyspark Create New Categoric Column Based on a New Condition,"<p>My input spark data frame is;</p>
<pre><code>    Year  Month        Client  Value 
    2019  1            1       5 
    2019  2            1       3  
    2019  3            1       4  
    2019  4            1       0  
    2019  5            1       3  
    2019  6            1       15 
    2019  7            1       45 
    2019  8            1       50 
    2019  9            1       64  
    2019  10           1       91   
    2019  11           1       1 
    2019  12           1       34  
    2019  1            2       0 
    2019  2            2       0  
    2019  3            2       0  
    2019  4            2       0  
    2019  5            2       1  
    2019  6            2       2 
    2019  7            2       10 
    2019  8            2       1 
    2019  9            2       4  
    2019  10           2       7 
    2019  11           2       1 
    2019  12           2       34  
</code></pre>
<p>Dataframe is ordered by client, year, and month.</p>
<p>&quot;Target&quot; column is 3 if the maximum value in the last 6 months (from 2019-06 to 2019-12) is greater than 90.</p>
<p>&quot;Target&quot; column is 2 if the maximum value in the last 6 months (from 2019-06 to 2019-12) is greater than 15 and less than 90.</p>
<p>&quot;Target&quot; column is 1 if the maximum value in the last 6 months (from 2019-06 to 2019-12) is less than 15.</p>
<p>I shared the desired output according to the data above;</p>
<pre><code>    Year  Month        Client  Value Target
    2019  1            1       5     3
    2019  2            1       3     3
    2019  3            1       4     3
    2019  4            1       0     3 
    2019  5            1       3     3
    2019  6            1       15    3
    2019  7            1       45    3 
    2019  8            1       50    3
    2019  9            1       64    3 
    2019  10           1       91    3
    2019  11           1       1     3
    2019  12           1       34    3
    2019  1            2       0     2
    2019  2            2       0     2
    2019  3            2       0     2
    2019  4            2       0     2
    2019  5            2       1     2
    2019  6            2       2     2
    2019  7            2       10    2
    2019  8            2       1     2
    2019  9            2       4     2
    2019  10           2       7     2
    2019  11           2       1     2
    2019  12           2       34    2
</code></pre>
<p>Could you please help me with this?</p>",python|apache-spark|pyspark|apache-spark-sql,"<p>You can filter the relevant rows using <code>row_number</code>, get the maximum value and thus the target, and join it back to the original dataframe.</p>
<pre><code>from pyspark.sql import functions as F, Window

df2 = df.withColumn(
    'rn', 
    F.row_number().over(Window.partitionBy('Client').orderBy(F.desc('year'), F.desc('month')))
).filter('rn &lt;= 7').drop('rn').groupBy('Client').agg(
    F.when(F.max('Value') &gt; 90, 3)
     .when(F.max('Value') &gt; 15, 2)
     .otherwise(1)
     .alias('Target')
).join(df, 'Client').select(*df.columns, 'Target')

df2.show(99)
+----+-----+------+-----+------+
|Year|Month|Client|Value|Target|
+----+-----+------+-----+------+
|2019|    1|     1|    5|     3|
|2019|    2|     1|    3|     3|
|2019|    3|     1|    4|     3|
|2019|    4|     1|    0|     3|
|2019|    5|     1|    3|     3|
|2019|    6|     1|   15|     3|
|2019|    7|     1|   45|     3|
|2019|    8|     1|   50|     3|
|2019|    9|     1|   64|     3|
|2019|   10|     1|   91|     3|
|2019|   11|     1|    1|     3|
|2019|   12|     1|   34|     3|
|2019|    1|     2|    0|     2|
|2019|    2|     2|    0|     2|
|2019|    3|     2|    0|     2|
|2019|    4|     2|    0|     2|
|2019|    5|     2|    1|     2|
|2019|    6|     2|    2|     2|
|2019|    7|     2|   10|     2|
|2019|    8|     2|    1|     2|
|2019|    9|     2|    4|     2|
|2019|   10|     2|    7|     2|
|2019|   11|     2|    1|     2|
|2019|   12|     2|   34|     2|
+----+-----+------+-----+------+
</code></pre>",2
637,65867768,could not convert string to float: 'Runny_nose',"<pre><code>import pandas as pd
from sklearn.tree import DecisionTreeClassifier

Disease_data = pd.read_csv(&quot;Disease_dataset.csv&quot;)

X = Disease_data.drop(columns='Diseases')
y = Disease_data['Diseases']

model = DecisionTreeClassifier() 
model.fit(X, y)
</code></pre>
<p>I get this error:</p>
<pre><code>ValueError: could not convert string to float: 'Runny_nose'
</code></pre>
<p>I tried</p>
<pre><code>Disease_data = Disease_data['Diseases'].astype(float)
</code></pre>
<p>and</p>
<pre><code>music_data = pd.to_numeric(music_data, errors='coerce')
</code></pre>
<p>instead I get empty columns</p>",python|pandas|scikit-learn,"<p>Some of your lines might don't have valid float data.</p>
<p>Visit <a href=""https://stackoverflow.com/questions/8420143/valueerror-could-not-convert-string-to-float-id"">this</a> thread for more info.</p>",0
638,65767148,Nothing is drawn after pygame instantiation,"<p>I'm trying to create a 2d video game with pygame.</p>
<p>After executing the following code:</p>
<pre><code>from ship import Ship
from settings import Settings
import sys
import pygame


class Alien_invasion:
    &quot;&quot;&quot;class to manage the game&quot;&quot;&quot;

    def __init__(self):
        &quot;&quot;&quot;initialise the game and create game ressources&quot;&quot;&quot;
        pygame.init()
        #print(&quot;ouzou&quot;)
        self.settings=Settings()
        self.screen = pygame.display.set_mode(self.settings.screen_height,self.settings.screen_width)
        
        pygame.display.set_caption(&quot;Alien invasion&quot;)
        self.ship = Ship(self)
        
    def run_game(self):
        &quot;&quot;&quot;start the game by calling a main loop&quot;&quot;&quot;
        while True:
            print(&quot;izann&quot;)
             # wait keyboard or mouse event
            for event in pygame.event:
                if event.type == pygame.quit():
                    sys.exit()
                # draw the screen after all the changes occured
                self.screen.fill(self.settings.bg_color)
                self.ship.blitme()
                print(&quot;izan&quot;)
                pygame.display.flip()
                print(&quot;izan ssin&quot;)

if __name__ == &quot;main&quot;:
    partie = Alien_invasion()
    partie.run_game()
</code></pre>
<p>I'm expecting to have a pygame window but instead the console prints:</p>
<pre class=""lang-none prettyprint-override""><code>pygame 2.0.1 (SDL 2.0.14, Python 3.9.0)
Hello from the pygame community. https://www.pygame.org/contribute.html
</code></pre>
<p>and nothing happens after!</p>",python|python-3.x|pygame,"<p>the lines with '###' are my corrections.</p>
<pre><code>from ship import Ship
from settings import Settings
import sys
import pygame


class Alien_invasion:
    &quot;&quot;&quot;class to manage the game&quot;&quot;&quot;

    def __init__(self):
        &quot;&quot;&quot;initialise the game and create game ressources&quot;&quot;&quot;
        pygame.init()
        #print(&quot;ouzou&quot;)
        self.settings=Settings()
        self.screen = 
           pygame.display.set_mode(self.settings.screen_height,self.settings.screen_width)
        
        pygame.display.set_caption(&quot;Alien invasion&quot;)
        self.ship = Ship(self)
        
    def run_game(self):
        &quot;&quot;&quot;start the game by calling a main loop&quot;&quot;&quot;
        while True:
            print(&quot;izann&quot;)
             # wait keyboard or mouse event
            for event in pygame.event.get():      ###syntax
                if event.type == pygame.QUIT:     ###syntax
                    sys.exit()
           # draw the screen after all the changes occurred   ###the following should not in the pygame event get loop
           self.screen.fill(self.settings.bg_color)
           self.ship.blitme()
           print(&quot;izan&quot;)
           pygame.display.flip()
           print(&quot;izan ssin&quot;)

if __name__ == &quot;__main__&quot;:       ###syntax wrong
    partie = Alien_invasion()
    partie.run_game()
</code></pre>",0
639,65767148,Nothing is drawn after pygame instantiation,"<p>I'm trying to create a 2d video game with pygame.</p>
<p>After executing the following code:</p>
<pre><code>from ship import Ship
from settings import Settings
import sys
import pygame


class Alien_invasion:
    &quot;&quot;&quot;class to manage the game&quot;&quot;&quot;

    def __init__(self):
        &quot;&quot;&quot;initialise the game and create game ressources&quot;&quot;&quot;
        pygame.init()
        #print(&quot;ouzou&quot;)
        self.settings=Settings()
        self.screen = pygame.display.set_mode(self.settings.screen_height,self.settings.screen_width)
        
        pygame.display.set_caption(&quot;Alien invasion&quot;)
        self.ship = Ship(self)
        
    def run_game(self):
        &quot;&quot;&quot;start the game by calling a main loop&quot;&quot;&quot;
        while True:
            print(&quot;izann&quot;)
             # wait keyboard or mouse event
            for event in pygame.event:
                if event.type == pygame.quit():
                    sys.exit()
                # draw the screen after all the changes occured
                self.screen.fill(self.settings.bg_color)
                self.ship.blitme()
                print(&quot;izan&quot;)
                pygame.display.flip()
                print(&quot;izan ssin&quot;)

if __name__ == &quot;main&quot;:
    partie = Alien_invasion()
    partie.run_game()
</code></pre>
<p>I'm expecting to have a pygame window but instead the console prints:</p>
<pre class=""lang-none prettyprint-override""><code>pygame 2.0.1 (SDL 2.0.14, Python 3.9.0)
Hello from the pygame community. https://www.pygame.org/contribute.html
</code></pre>
<p>and nothing happens after!</p>",python|python-3.x|pygame,"<p><a href=""https://www.pygame.org/docs/ref/pygame.html#pygame.quit"" rel=""nofollow noreferrer""><code>pygame.quit()</code></a> is a function and uninitialize all PyGame modules. When you do</p>
<blockquote>
<pre class=""lang-py prettyprint-override""><code>if event.type == pygame.quit():
</code></pre>
</blockquote>
<p>the function is called and all PyGame modules are uninitialized.</p>
<p>The <em>type</em> attribute of <a href=""https://www.pygame.org/docs/ref/event.html#pygame.event.Event"" rel=""nofollow noreferrer""><code>pygame.event.Event()</code></a> object indicates the type of event. You need to compare the event type to the enumeration constant that identifies the event. The <em>quit</em> event is identified by <code>pygame.QUIT</code> (see <a href=""https://www.pygame.org/docs/ref/event.html"" rel=""nofollow noreferrer""><code>pygame.event</code></a> module):</p>
<p>Hence, you have to compete with <code>pygame.QUIT</code> instead of <code>pygame.quit()</code>:</p>
<pre class=""lang-py prettyprint-override""><code>for event in pygame.event:
    if event.type == pygame.QUIT:
        pygame.quit()
        sys.exit()
</code></pre>
<p>Additionally there is an <a href=""https://docs.python.org/3/reference/lexical_analysis.html"" rel=""nofollow noreferrer"">Indentation</a> issue. You have to draw the scene and update the display in the application loop rather than then event loop:</p>
<pre class=""lang-py prettyprint-override""><code>from ship import Ship
from settings import Settings
import sys
import pygame


class Alien_invasion:
    &quot;&quot;&quot;class to manage the game&quot;&quot;&quot;

    def __init__(self):
        &quot;&quot;&quot;initialise the game and create game ressources&quot;&quot;&quot;
        pygame.init()
        #print(&quot;ouzou&quot;)
        self.settings=Settings()
        self.screen = pygame.display.set_mode(self.settings.screen_height,self.settings.screen_width)
        
        pygame.display.set_caption(&quot;Alien invasion&quot;)
        self.ship = Ship(self)
        
    def run_game(self):
        &quot;&quot;&quot;start the game by calling a main loop&quot;&quot;&quot;
        while True:
            print(&quot;izann&quot;)
             # wait keyboard or mouse event
            for event in pygame.event:
                if event.type == pygame.QUIT:
                    pygame.quit()
                    sys.exit()
            
            # INDENTATION

            #&lt;--|
    
            # draw the screen after all the changes occured
            self.screen.fill(self.settings.bg_color)
            self.ship.blitme()
            print(&quot;izan&quot;)
            pygame.display.flip()
            print(&quot;izan ssin&quot;)

if __name__ == &quot;__main__&quot;:
    partie = Alien_invasion()
    partie.run_game()
</code></pre>",0
640,65654149,python crash course making django posts accessible to unregistered users,"<p>Im currently trying to do this exercise of python crash course and am unsure with how to proceed with it. Here is the exercise in question.</p>
<pre><code>Then try adding a more advanced feature,
such as giving users the option of making a topic public. This would require an
attribute called public as part of the Topic model (this should be set to False
by default) and a form element on the new_topic page that allows the user to
change a topic from private to public.
</code></pre>
<p>Here are the changes that I have already made so far
in forms.py, My understanding is that when the user types in the 'public' text bos either 'True' or 'False', the public attribute of the Topic model will be updated accordingly?</p>
<pre><code>from django import forms

from .models import Topic, Entry

class TopicForm(forms.ModelForm):
    class Meta:
        model = Topic
        fields = ['text', 'public']
        labels = {'text': '', 'public' : &quot;True/False&quot;}

class EntryForm(forms.ModelForm):
    class Meta:
        model = Entry
        fields = ['text']
        labels = {'text': 'Entry:'}
        widgets = {'text': forms.Textarea(attrs={'cols': 80})}
</code></pre>
<p>the Topic model in models.py</p>
<pre><code>from django.db import models
from django.contrib.auth.models import User

# Create your models here.

class Topic(models.Model):
    &quot;&quot;&quot;A topic the user is learning about.&quot;&quot;&quot;
    text = models.CharField(max_length=200)
    date_added = models.DateTimeField(auto_now_add=True)
    owner = models.ForeignKey(User, on_delete=models.CASCADE)
    public = models.BooleanField(default=False)

    def __str__(self):
        &quot;&quot;&quot;Return a string representation of the model.&quot;&quot;&quot;
        return self.text
</code></pre>
<p>My current guess is that in views.py under the topics function I have to edit it such that it tests for either the owner id, or whether the viewer has not been logged in, and then returns all the public topics accordingly. As such I am kindly requesting for a prod in the right direction or so. Thank you everyone!</p>
<p>current topics function in views.py</p>
<pre><code>@login_required
def topics(request):
    &quot;&quot;&quot;Show all topics.&quot;&quot;&quot;
    topics = Topic.objects.filter(owner=request.user).order_by('date_added')
    context = {'topics': topics}
    return render(request, 'learning_logs/topics.html', context)
</code></pre>
<p>Final code after receiving help:
forms.py</p>
<pre><code>class TopicForm(forms.ModelForm):
    class Meta:
        model = Topic
        fields = ['text', 'public']
        labels = {'text': '', 'public' : &quot;Tick to set to public&quot;}
</code></pre>
<p>models.py</p>
<pre><code>class Topic(models.Model):
    &quot;&quot;&quot;A topic the user is learning about.&quot;&quot;&quot;
    text = models.CharField(max_length=200)
    date_added = models.DateTimeField(auto_now_add=True)
    owner = models.ForeignKey(User, on_delete=models.CASCADE)
    public = models.BooleanField(default=False)

    def __str__(self):
        &quot;&quot;&quot;Return a string representation of the model.&quot;&quot;&quot;
        return self.text
</code></pre>
<p>views.py</p>
<pre><code>def topics(request):
    &quot;&quot;&quot;Show all topics.&quot;&quot;&quot;
    if request.user.is_authenticated:
        topics = Topic.objects.filter(owner=request.user).order_by('date_added')
    else:
        topics = Topic.objects.filter(public=True).order_by('date_added')
    context = {'topics': topics}
    return render(request, 'learning_logs/topics.html', context)
</code></pre>",python|django,"<p>You can check if the user is logged in and depending on this filter on only public items, or public items combined with the items for which the user is the owner:</p>
<pre><code>from django.db.models import Q

def topics(request):
    if <b>request.user.is_authenticated</b>:
        topics = Topic.objects.filter(&hellip;)
    else:
        topics = Topic.objects.filter(&hellip;)
    topics = topics.order_by('date_added')
    context = {'topics': topics}
    return render(request, 'learning_logs/topics.html', context)</code></pre>
<p>With <code>…</code> the parts you still need to fill in. For the part where the user is authenticated, you will need <a href=""https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.Q"" rel=""nofollow noreferrer""><strong><code>Q</code></strong> objects [Django-doc]</a> to implement a logical <em>disjunction</em>.</p>",2
641,65674086,is it possible to use an external vectorizer in a standard SpaCy pipeline?,"<p>I have a script that relies almost entirely on SpaCy for a series of nlp tasks.
Since SpaCy only supports 3 english models by default (sm, md, lg), i would like to replace them with an external model such that i can vectorize my text and perform all the SpaCy methods i currently do in my pipeline.</p>
<p>Is it possible to replace the <code>nlp = spacy.load('en_core_web_lg')</code>
line with something else without affecting the rest of my pipeline? For example by defining 'nlp' with one of the language models supported in the transformers library?</p>
<p>For example, i use SpaCy's <code>(a).similarity(b)</code> method, and would like to retain the pipeline which includes this, except have the calculations based on the word vectors generated by a non-default language model.</p>",python|nlp|spacy|huggingface-transformers,"<p>Depending on how exactly you are intending to use it but it is possible to inherit from SpaCy classes overriding only <code>similarity</code> method that would use any other vector model that you might want.</p>
<p>So, depending on which <code>Doc</code>, <code>Span</code> or <code>Token</code> you want to have support your custom similarity you can do something along the lines of:</p>
<pre><code>from spacy import Doc

class MyDoc(Doc):
    def __init__(...):
       super(Doc, self).__init__(...)

       self.__mymodel = &lt;load your special vector model&gt;

    def __similarity(v1, v2):
         &lt;your implementation of similarity&gt;

    def similarity(doc):
       v1 = &lt;get vector for self from self.__mymodel&gt;
       v2 = &lt;get vector for doc param from self.__mymodel&gt; 
       return self.__similarity(v1, v2)      
</code></pre>
<p>You can use analogous approach for <code>Span</code> or <code>Token</code> classes.</p>",1
642,65798506,How can I split YAML into different files in python?,"<p>I have this yaml_file in a variable in python using safe_load from yaml library:</p>
<pre><code>domainInfo:
    AdminUserName: '--FIX ME--'
    AdminPassword: '--FIX ME--'
topology:
    Name: 'wld-pil-10'
    ConfigBackupEnabled: true
    AdminServerName: 'wls-pil-10-sa-adm-n0'
    DomainVersion: 12.2.1.4.0
    ProductionModeEnabled: true
    ArchiveConfigurationCount: 20
    Cluster:
        'test-bruno-jee-r01a-c01':
            ClientCertProxyEnabled: true
            WeblogicPluginEnabled: true
    Server:
        'wls-pil-10-sa-adm-n0':
            ListenPort: 11030
            WeblogicPluginEnabled: true
            ClientCertProxyEnabled: true
            Machine: 'wlm-pil-10-n0'
        'test-bruno-jee-r01a-it-c01-m1-n1':
            ListenPort: 10022
            WeblogicPluginEnabled: true
            ClientCertProxyEnabled: true
            NMSocketCreateTimeoutInMillis: 30000
            Machine: 'wlm-pil-10-n1'
        'test-bruno-jee-r02a-it-c01-m1-n1':
            ListenPort: 10025
            WeblogicPluginEnabled: true
            ClientCertProxyEnabled: true
            NMSocketCreateTimeoutInMillis: 30000
            Machine: 'wlm-pil-10-n2'
</code></pre>
<p>In order to split this yaml file I'm trying to put the keys and values in a new dictionary but without success. What am I missing? I know that I need to have a dictionary in some way, do I need to use another module like pyyaml or ruamel?</p>
<pre><code>yaml_cluster = {}
yaml_cluster[&quot;topology&quot;][&quot;Name&quot;] = yaml_file[&quot;topology&quot;][&quot;Name&quot;]
yaml_cluster[&quot;topology&quot;][&quot;AdminServerName&quot;] = yaml_file[&quot;topology&quot;][&quot;AdminServerName&quot;]
</code></pre>
<p>Result:</p>
<blockquote>
<p>fatal: [wls-pil-103-sa-adm-n0]: FAILED! =&gt; {&quot;changed&quot;: true, &quot;msg&quot;:
&quot;non-zero return code&quot;, &quot;rc&quot;: 1, &quot;stderr&quot;: &quot;Traceback (most recent
call last):\n  File
&quot;/tmp/ansible-tmp-1611083722.9917288-55849-215378473850896/split_yaml.py&quot;,
line 32, in \n    yaml_cluster[&quot;topology&quot;][&quot;Name&quot;] =
yaml_file[&quot;topology&quot;][&quot;Name&quot;]\nKeyError: 'topology'\n&quot;,
&quot;stderr_lines&quot;: [&quot;Traceback (most recent call last):&quot;, &quot;  File
&quot;/tmp/ansible-tmp-1611083722.9917288-55849-215378473850896/split_yaml.py&quot;,
line 32, in &quot;, &quot;    <strong>yaml_cluster[&quot;topology&quot;][&quot;Name&quot;] =
yaml_file[&quot;topology&quot;][&quot;Name&quot;]</strong>&quot;, <strong>&quot;KeyError: 'topology'&quot;</strong>], &quot;stdout&quot;:
&quot;&quot;, &quot;stdout_lines&quot;: []}</p>
</blockquote>",python|dictionary|yaml,"<p>The error you're getting is because <code>yaml_cluster[&quot;topology&quot;][&quot;Name&quot;]</code> is assigned a value without either of the keys existing. <code>yaml_cluster[&quot;topology&quot;]</code> does not exist and you can therefore not assign something to the key <code>Name</code>.</p>
<p>Collections module from the standard library provides a class <code>collections.defaultdict</code> that gives a key a default value if it doesn't exist. In your case a <code>defaultdict</code> with a empty dictionary as default value sets the value of <code>yaml_cluster[&quot;topology]</code> to <code>{}</code> (an empty dict) and the key <code>Name</code> can then be assigned with a value to the dictionary as normal.</p>
<pre><code>from collections import defaultdict

yaml_cluster = defaultdict(dict) # Specifying dictionary as default value for missing keys
yaml_cluster[&quot;topology&quot;][&quot;Name&quot;] = yaml_file[&quot;topology&quot;][&quot;Name&quot;]
yaml_cluster[&quot;topology&quot;][&quot;AdminServerName&quot;] = yaml_file[&quot;topology&quot;][&quot;AdminServerName&quot;]
</code></pre>",1
643,65951015,time data '03/16/2021 5:06 PM' does not match format '%d/%m/%Y %I:%M %p',"<p>I have a variable in my <code>Django</code> project named <code>this_rmg_date</code>.</p>
<p>Now I am trying to reformat it (for saving it in my database's <code>DateTimeField</code>)</p>
<pre><code>print(this_rmg_date)
this_rmg_date = datetime.strptime(this_rmg_date, &quot;%d/%m/%Y %I:%M %p&quot;)
</code></pre>
<p>Here the <code>print(this_rmg_date)</code> print the value in console, and it is: <code>03/16/2021 5:06 PM</code></p>
<p>but an error occers with the next line, it says:</p>
<pre><code>ValueError at /input_industryinfo/
time data '03/16/2021 5:06 PM' does not match format '%d/%m/%Y %I:%M %p'
</code></pre>
<p>Yesterday, I did almost the same kind of code and that was working perfectly, other parts of my code are like this: <a href=""https://stackoverflow.com/questions/65941808/validationerror-with-datatime-field-in-django"">stackOverflow-link</a>.</p>
<p>How can I fix this problem?</p>",python|django,"<p>16 is an invalid month. Your input is arriving in mm/dd/YYYY format. Try this:</p>
<pre><code>this_rmg_date = '03/16/2021 5:06 PM'
this_rmg_date = datetime.strptime(this_rmg_date, &quot;%m/%d/%Y %I:%M %p&quot;)
&gt;&gt;&gt; this_rmg_date
datetime.datetime(2021, 3, 16, 17, 6)
</code></pre>
<p>You could also use the third party module <a href=""https://dateutil.readthedocs.io/en/stable/"" rel=""nofollow noreferrer""><code>dateutil</code></a>'s parser, which can handle this:</p>
<pre><code>from dateutil.parser import parse
&gt;&gt;&gt; parse('03/16/2021 5:06 PM')
datetime.datetime(2021, 3, 16, 17, 6)
&gt;&gt;&gt; parse('16/03/2021 5:06 PM')
datetime.datetime(2021, 3, 16, 17, 6)
</code></pre>
<p>But it can only do so much without help:</p>
<pre><code>&gt;&gt;&gt; parse('04/03/2021 5:06 PM')
datetime.datetime(2021, 4, 3, 17, 6)
&gt;&gt;&gt; parse('04/03/2021 5:06 PM', dayfirst=True)
datetime.datetime(2021, 3, 4, 17, 6)
</code></pre>",3
644,65730354,Processing string input in tensorflow model,"<p>I want to make some simple string operations within the keras model such that it can be end-to-end.</p>
<pre><code>def get_model_para_pure():
    para = keras.Input(shape=(1, ), dtype=&quot;string&quot;, name='para') 
    para_lower = tf.strings.lower(para)
    shingles = tf.strings.split(para_lower)
    ...
</code></pre>
<p>however, it raises the error:</p>
<blockquote>
<p>Tensor conversion requested dtype int32 for Tensor with dtype int64:
&lt;tf.Tensor 'Cumsum_5:0' shape=(None,) dtype=int64&gt;</p>
</blockquote>
<p>How can I implement these operations within a model.</p>",python|tensorflow|tensorflow2.0,"<p>Use <code>tf.keras.layers.experimental.preprocessing.TextVectorization</code> .</p>
<p>Read <a href=""https://www.tensorflow.org/tutorials/structured_data/preprocessing_layers"" rel=""nofollow noreferrer"">https://www.tensorflow.org/tutorials/structured_data/preprocessing_layers</a></p>",-1
645,65628078,Solve module not found in jupyter notebook with binder,"<p>I have set up a jupyter notebook within a virtual environment.
Now I want to deploy it with <a href=""https://mybinder.org/"" rel=""nofollow noreferrer"">mybinder</a></p>
<p>I generated an environment.yml directly from the anaconda prompt.</p>
<pre><code>name: test_environment
channels:
- conda-forge
dependencies:
  - python
  - numpy
</code></pre>
<p>The building with binder does not show any errors and the jupyter notebook is launched, but when I try to import the numpy module the notebook tells me that the module has not been found.</p>
<p>When I check on which environment the notebook is running with</p>
<pre><code>!conda info
</code></pre>
<p>I see that it is running on the notebook environment and not on my test_environment.
Yet I have no idea on how to guide binder to my specified environment as it is already in the same directory as my notebook.ipynb file</p>
<p><strong>Note:</strong> I need my files to stay within a subdirectory of my repository.</p>",python|github|jupyter-notebook|yaml|mybinder,"<p>I had the same issue, and apparently, it has to do with how Binder searches for the <code>environment.yml</code> file as you suggested. In my case, <strong>the problem was solved</strong> by simply <strong>creating a new cleaner repo</strong> in GitHub with a more simple structure than the initial one I had. More specifically, the new repo has the following structure in the root directory (i.e. <a href=""https://github.com/user_name/repo_name/"" rel=""nofollow noreferrer"">https://github.com/user_name/repo_name/</a>):</p>
<pre><code>- README.md
- analysis.ipynb
- environment.yml
</code></pre>",1
646,65823199,Dynamic mongo query with python,"<p>I have a mongo aggregation query that i want to create on the basis of some json data, So the query will be like dynamic and it will grow as per json selection array.</p>
<pre><code>{ 
 RuleResultSUmmaryByCategoryRequest:{
      &quot;topLevelFilterIds&quot;: [],
      &quot;category&quot;: &quot;abc&quot;,
      &quot;selection&quot;: [{
        &quot;value&quot;: &quot;value&quot;,
        &quot;category&quot;: &quot;category&quot;
      }]
    }
}
</code></pre>
<p>my mongo aggregate query is like</p>
<pre><code>db.rule_execution_result.aggregate([{
   $match: {
       $and: [{
               'topLevelFilter.id': {
                   $in: ['5fd1bd7868d7ac4e211a7642']
               }
           },
           {
               'ruleCategory': 'test'
           }
       ]
   }
},
{
   $group: {
       _id: {
           ruleCategory: '$ruleCategory',
           topLevelFilter: '$topLevelFilter.id'
       },
       name: {
           $first: '$topLevelFilter.name'
       },
       type: {
           $first: '$topLevelFilter.type'
       },
       fail: {
           $sum: {
               $cond: [{
                   $eq: ['$summaryStatus', 0]
               }, 1, 0]
           }
       }
   }
},
{
   $group: {
       _id: '$_id.ruleCategory',
       fail: {
           $sum: '$fail'
       },
       portfolio: {
           $push: {
               id: '$_id.topLevelFilter',
               name: '$name',
               type: '$type',
               fail: '$fail'
           }
       }
   }
},
{
   $group: {
       _id: 0,
       result: {
           $push: {
               category: '$_id',
               fail: '$fail',
               portfolio: '$portfolio'
           }
       },
       fail: {
           $sum: '$fail'
       }
   }
},
{
   $project: {
       _id: 0,
       data: '$result',
       total: {
           fail: '$fail'
       }
   }
}
]).pretty()
</code></pre>
<p>Here i need to use loop on json selection request object that i am getting from API and genrate dynamic stages for match and group, I am new in python so can any one help me to write it in dynamic way in python.</p>",python|python-3.x|mongodb|mongodb-query|pymongo,"<p>I am done with dynamic query and now i am able to create a dynamic mongo aggregate query.</p>
<pre><code>pipeline = []

matches = {}
matches[&quot;$and&quot;]=[]
matches[&quot;$and&quot;].append({ &quot;topLevelFilter.id&quot;: { &quot;$in&quot;: request_data[&quot;topLevelFilterIds&quot;]}})
for x in request_data['Filter']:
  matches[&quot;$and&quot;].append({x['category']: x['value']})
pipeline.append({'$match': matches})
  
first_stage_grouping = {}
first_stage_grouping = {'_id': {'groupByColumn': '$' + request_data['category'],
                                'topLevelFilter': '$topLevelFilter.id'}}
first_stage_grouping['name'] = {'$first': '$topLevelFilter.name'}
first_stage_grouping['type'] = {'$first': '$topLevelFilter.type'}
first_stage_grouping['fail'] = {
    '$sum': {'$cond': [{'$eq': ['$summaryStatus', 0]}, 1, 0]}}
first_stage_grouping['pass'] = {
    '$sum': {'$cond': [{'$eq': ['$summaryStatus', 1]}, 1, 0]}}
first_stage_grouping['warn'] = {
    '$sum': {'$cond': [{'$eq': ['$summaryStatus', 2]}, 1, 0]}}
pipeline.append({'$group': first_stage_grouping})

second_stage_grouping = {}
second_stage_grouping = {'_id': '$_id.groupByColumn'}
second_stage_grouping['fail'] = {'$sum': '$fail'}
second_stage_grouping['pass'] = {'$sum': '$pass'}
second_stage_grouping['warn'] = {'$sum': '$warn'}
second_stage_grouping['portfolio'] = {'$push': {'id': '$_id.topLevelFilter',
                                                'name': '$name', 'type': '$type', 'fail': '$fail', 'pass': '$pass', 'warn': '$warn'}}
pipeline.append({'$group': second_stage_grouping})

third_stage_grouping = {}
third_stage_grouping = {'_id': 0}
third_stage_grouping['result'] = {'$push': {
    'category': '$_id', 'fail': '$fail', 'pass': '$pass', 'warn': '$warn', 'portfolio': '$portfolio'}}
third_stage_grouping['fail'] = {'$sum': '$fail'}
third_stage_grouping['pass'] = {'$sum': '$pass'}
third_stage_grouping['warn'] = {'$sum': '$warn'}
pipeline.append({'$group': third_stage_grouping})

projection = {}
projection = {'_id': 0, 'data': '$result', 'total': {
    'fail': '$fail', 'pass': '$pass', 'warn': '$warn'}}
pipeline.append({'$project': projection})
print(pipeline)
</code></pre>
<p>If anyone can help me to optimize or any better way to achive the same, it will be great help.</p>",0
647,65700700,on_command_error() missing 1 required positional argument: 'exc',"<p>code:</p>
<pre><code>@client.event
async def on_command_error(self, ctx, exc):
    if  isinstance(exc, CommandOnCooldown):
        await ctx.send(f&quot;Подождите, команда будет доступна через {exc.retry_after} секунд&quot;)
</code></pre>
<p>cmd:
Bot connected
Ignoring exception in on_command_error
Traceback (most recent call last):
File &quot;C:\Users\gnati\AppData\Local\Programs\Python\Python38-32\lib\site-packages\discord\client.py&quot;, line 343, in _run_event
await coro(*args, **kwargs)
TypeError: on_command_error() missing 1 required positional argument: 'exc'
Ignoring exception in on_command_error
Traceback (most recent call last):
File &quot;C:\Users\gnati\AppData\Local\Programs\Python\Python38-32\lib\site-packages\discord\client.py&quot;, line 343, in _run_event</p>",python|sqlite|discord,"<p>It's not about the positional argument, but the type placed in the isinstance (that is &quot;CommandOnCooldown&quot;) should be like this Instead:</p>
<pre><code>@client.event
async def on_command_error(self,ctx,error):
    if isinstance(error, commands.CommandOnCooldown):
        await ctx.send(f&quot;Подождите, команда будет доступна через {exc.retry_after} секунд&quot;)
</code></pre>
<p>Give an Upvote if it works :)</p>",0
648,65886824,Pandas plot correlations,"<p>I have been trying to plot pairwise correlations for stocks over time using python. I am following the following <a href=""https://github.com/silburt/Machine_Learning/blob/master/Stock_Correlation/StockCorrelation.ipynb"" rel=""nofollow noreferrer"">repository</a> but I can't seem to make the rolling correlation work, I get an error here:</p>
<pre><code>correls = correls[(window-1):,:,:]

TypeError: '(slice(99, None, None), slice(None, None, None), slice(None, None, None))' is an invalid key
</code></pre>
<p>Adding a sample code:</p>
<pre><code>todays_date = datetime.datetime.now().date()
index = pd.date_range(todays_date, periods=10, freq='D')
 
columns = ['A', 'B', 'C']
 
df = pd.DataFrame(index=index, columns=columns)
df = df.mask(df.isnull(), np.random.uniform(3, 331, size=df.shape))

window = 2                            #rolling correlation window length
correls = df.rolling(window=window).corr()
correls = correls[(window-1):,:,:] 
</code></pre>
<p>Kind regards</p>",python|pandas|slice,"<p>If I understand correctly, you try to remove rows with NaNs in the end. To do it, try</p>
<pre><code>correls = correls[(window-1)*len(df.columns):]
</code></pre>
<p>instead of</p>
<pre><code>correls = correls[(window-1):,:,:] 
</code></pre>",0
649,65843216,"Pdfminer, can not read LTText after pyinstaller","<p>I make an app that can read PDF using pdfminer. <br>
<a href=""https://i.stack.imgur.com/zrUqx.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/zrUqx.png"" alt=""enter image description here"" /></a>
<br>Application is OK when development.<br>
After that, I package to .exe file using pyinstaller. But read result is not the same with it in development.
<br>In detail, it can not read **<em>LTText</em> <strong>LTTextBoxHorizontal</strong> so I can not get extracted text.
<br>Any one know about this issue, please help me.
<br></p>
<br>
<p>Logs in development
<a href=""https://i.stack.imgur.com/XWhaL.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/XWhaL.png"" alt=""Logs in development"" /></a></p>
<p>
Logs after I do pyinstaller
<p><a href=""https://i.stack.imgur.com/UWEdI.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/UWEdI.png"" alt=""Logs after I do pyinstaller"" /></a></p>
<blockquote>
<pre><code>Python 3.9.1
Pyinstaller 4.2
pdfminer.six==20201018
six==1.15.0
Command: pyinstaller --onefile file.py
</code></pre>
</blockquote>
<p>Related source:</p>
<pre><code> for index, page in pdf_object:
            # TODO: Only read last page - maybe change if PDF file change
            if index == number_of_page - 1:
                # read the page into a layout object
                self.interpreter.process_page(page)
                layout = self.device.get_result()
                print(&quot;Size of this page (%d, %d)&quot; % (layout.x1, layout.y1))
                print(&quot;len = %d&quot; % len(layout._objs))
                self.parse_obj(layout._objs)


def parse_obj(self, lt_objs):
    # loop over the object list
    print(&quot;Go loop&quot;)
    print(lt_objs)
    i = 0
    for obj in lt_objs:
        i += 1
        print(&quot;In loop %d&quot; % i)
</code></pre>",python-3.x|pyinstaller|pdfminer,"<p>Pyinstaller lib owner just answered me. It fixed by adding  --additional-hooks-dir.</p>
<p>Please see <a href=""https://github.com/pyinstaller/pyinstaller/issues/5509"" rel=""nofollow noreferrer"">here</a> for detail.</p>
<p>Maybe they will fix in pyinstaller to support pdfminer also in next release.</p>",0
650,65851419,Regarding playsound module,"<p>Does the playsound module work in Python 3.9.1? When I write the command:</p>
<pre><code>from playsound import playsound
playsound('C:\\Users\\acer\\Desktop\\FOLDER\\Programming\\Python\\01_project\\Bella Ciao.mp3')
</code></pre>
<p>it doesn't run and shows the error message <code>A problem occurred in initializing MCI.</code> But after that I have installed Python 3.5.0 and in that plays the sound without any error. So is the playsound module supported for Python 3.5.0 and not for 3.9.1? And also tell me other ways of inserting .mp3 files.</p>",python|python-3.x|python-playsound,"<p>What may help is rolling back to an older version of playsound.
You can do this by opening your command prompt and typing the following:</p>
<pre><code>pip install playsound==1.2.2
</code></pre>
<p>This will roll back the version of your playsound module to an older 1.2.2 version.
Also, playsound was made for older versions of python, and seems to be buggy in the newer versions(versions&gt;3.8).</p>",0
651,65851419,Regarding playsound module,"<p>Does the playsound module work in Python 3.9.1? When I write the command:</p>
<pre><code>from playsound import playsound
playsound('C:\\Users\\acer\\Desktop\\FOLDER\\Programming\\Python\\01_project\\Bella Ciao.mp3')
</code></pre>
<p>it doesn't run and shows the error message <code>A problem occurred in initializing MCI.</code> But after that I have installed Python 3.5.0 and in that plays the sound without any error. So is the playsound module supported for Python 3.5.0 and not for 3.9.1? And also tell me other ways of inserting .mp3 files.</p>",python|python-3.x|python-playsound,"<p>As you can see from the pypi.org here ==&gt; <a href=""https://pypi.org/project/playsound/"" rel=""nofollow noreferrer"">playsound 1.2.2 </a></p>
<p><a href=""https://i.stack.imgur.com/M66mt.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/M66mt.png"" alt=""enter image description here"" /></a></p>
<p>At the moment it supports only up to Python 3.5.0 .</p>
<p>Regarding your question of other ways to Play a mp3 sound in Python, I can suggest you to have a look at this other StackOverflow Answer ==&gt; <a href=""https://stackoverflow.com/questions/20021457/playing-mp3-song-on-python"">Playing mp3 song on python</a>.</p>
<p><code>Playsound</code> is good options by the way.</p>",0
652,65851419,Regarding playsound module,"<p>Does the playsound module work in Python 3.9.1? When I write the command:</p>
<pre><code>from playsound import playsound
playsound('C:\\Users\\acer\\Desktop\\FOLDER\\Programming\\Python\\01_project\\Bella Ciao.mp3')
</code></pre>
<p>it doesn't run and shows the error message <code>A problem occurred in initializing MCI.</code> But after that I have installed Python 3.5.0 and in that plays the sound without any error. So is the playsound module supported for Python 3.5.0 and not for 3.9.1? And also tell me other ways of inserting .mp3 files.</p>",python|python-3.x|python-playsound,<p>Try converting the audio file from mp3 to wav</p>,0
653,65687249,Load only a single sheet from a large workbook with Python,"<p>Using Python 3.7. I have several .xlsx workbooks with 34 sheets each, most of which have conditional formatting and charts, but all I'm actually after is a cell with specified text that's somewhere on the first sheet of each book. The workbook is not protected but the sheet is, and I don't know the password, so I can't use pandas.read_excel; using openpyxl/load_workbook, it takes ages to load and I get lots of errors about it not being able to handle conditional formatting etc. I then have to search the sheet for the text.
Is there an easy, quick way of loading just the first sheet (or a named sheet)? The pandas code is very quick and easy, but I can't use it :(</p>",python|excel,"<p>Not completely sure about that but I can recommend trying &quot;read-only&quot; mode from <strong>openpyxl</strong>
<a href=""https://openpyxl.readthedocs.io/en/stable/optimized.html"" rel=""nofollow noreferrer"">https://openpyxl.readthedocs.io/en/stable/optimized.html</a></p>
<p>It does not fetch the full file but read it in so-called &quot;lazy&quot; mode. Thus you can jump to the cell you need.</p>
<p>It also allows to start reading from the specific sheet</p>
<p>Note that closing file is mandatory</p>",0
654,65694138,"Using QWebEngine to login to a SAML authorization page, wait for a cookie, and then cleanup / exit","<p>I'm trying to write a PyQT QWebEngineView that opens a website, does a SAML login to AAD, returns, and once it sees a specific cookie (openconnect webvpn cookie), grabs the value and returns it to the &quot;console&quot; script which can continue processing and/or return to the command prompt.</p>
<p>I've glued together enough code that I can pop a browser window, step through my SAML authorization and see the cookie and cookie value. I don't know how to auto-close / exit the WebView window and &quot;return&quot; that cookie value and/or just the array to Python itself so I can keep processing it and/or exit. Not quite sure how to &quot;clean up&quot; my objects either.</p>
<p>I did probably fudge up my classes, initiators, and object variables. It's a kludge.</p>
<p>Thoughts? Ideas?</p>
<p>This is Arch Linux with latest Python and pyqt via package repo.</p>
<p>The code:</p>
<pre><code>#!/usr/bin/python

#core python
import sys

#PyQT libraries
from PyQt5.QtCore import *
from PyQt5.QtGui import *
from PyQt5.QtNetwork import *
from PyQt5.QtWidgets import *
from PyQt5.QtWebEngineWidgets import *

#functions / classes
class OpenconnectSamlAuth(QMainWindow):
   #init self object
   def __init__(self):
      #inherit parents functions, classes, etc....
      super(OpenconnectSamlAuth, self).__init__()

      #create webview object
      self.webview = QWebEngineView()

      #grab profile
      self.profile = QWebEngineProfile(&quot;storage&quot;, self.webview)
      self.cookie_store = self.profile.cookieStore()
      self.cookie_store.cookieAdded.connect(self.onCookieAdded)

      #empty array of cookies
      self.samlcookies = []

      #set some window options
      #window width x height
      self.resize(1024, 768);

      #default settings
      self.mySettings = QWebEngineSettings.defaultSettings()
      self.mySettings.setAttribute(QWebEngineSettings.JavascriptEnabled, True)


   #load URL / process login
   def samlLogin(self,url):
      #create page and load URL
      webpage = QWebEnginePage(self.profile, self.webview)
      self.webview.setPage(webpage)
      self.webview.load(QUrl(url))

      #windows options
      self.setCentralWidget(self.webview)

      #window title
      self.webview.setWindowTitle('Loading...')
      self.webview.titleChanged.connect(self.updateTitle)


   #update title window       
   def updateTitle(self):
      self.webview.setWindowTitle(self.webview.title())


   #handle cookies being added
   def onCookieAdded(self, cookie):
      #check if cookies exists
      #for c in self.cookies:
      #   if c.hasSameIdentifier(cookie):
      #      return
      #self.cookies.append(QNetworkCookie(cookie))      return;
      #bytearray(c.name()).decode()
      print(bytearray( QNetworkCookie(cookie).name() ).decode() )
      print(bytearray( QNetworkCookie(cookie).value() ).decode() )
      return
         

#main loop
def main():
   #initialize QT application object
   App = QApplication(sys.argv)

   #setup webkit window / browser session
   OpenconnectWebObj = OpenconnectSamlAuth()

   #load URL
   OpenconnectWebObj.samlLogin(&quot;https://vpnserverurl/groupname&quot;)

   #show connection window
   OpenconnectWebObj.show()

   #execute the app and grab the returned cookie
   cookie = App.exec_()
   print(cookie)

   #exit
   sys.exit()


#if called via command line; run this
if __name__ == '__main__':
   main()
</code></pre>",python|python-3.x|pyqt5,"<p>If you want to close the window then you must call the close() method, but in this case it seems that it requires terminating the Qt eventloop so the QCoreApplication.quit() method should be used. On the other hand, the cookie can be stored as an attribute and then used:</p>
<pre class=""lang-py prettyprint-override""><code>import sys

from PyQt5.QtCore import QCoreApplication, QUrl
from PyQt5.QtNetwork import QNetworkCookie
from PyQt5.QtWidgets import QApplication, QMainWindow
from PyQt5.QtWebEngineWidgets import (
    QWebEnginePage,
    QWebEngineProfile,
    QWebEngineSettings,
    QWebEngineView,
)


class OpenconnectSamlAuth(QMainWindow):
    def __init__(self, parent=None):
        super(OpenconnectSamlAuth, self).__init__(parent)

        self._cookie = None

        self.webview = QWebEngineView()

        self.profile = QWebEngineProfile(&quot;storage&quot;, self.webview)
        self.cookie_store = self.profile.cookieStore()
        self.cookie_store.cookieAdded.connect(self.handle_cookie_added)

        self.profile.settings().setAttribute(QWebEngineSettings.JavascriptEnabled, True)

        webpage = QWebEnginePage(self.profile, self)
        self.webview.setPage(webpage)
        self.webview.titleChanged.connect(self.update_title)

        self.setCentralWidget(self.webview)
        self.resize(1024, 768)

    @property
    def cookie(self):
        return self._cookie

    def login(self, url):
        self.webview.load(QUrl.fromUserInput(url))
        self.webview.setWindowTitle(&quot;Loading...&quot;)

    def update_title(self):
        self.webview.setWindowTitle(self.webview.title())

    def handle_cookie_added(self, cookie):
        print(&quot;added {name} : {value}&quot;.format(name=cookie.name(), value=cookie.value()))
        if cookie.name() == b&quot;name_of_cookie&quot;:
            self._cookie = QNetworkCookie(cookie)
            QCoreApplication.quit()


# main loop
def main():
    app = QApplication(sys.argv)

    openconnect_webobj = OpenconnectSamlAuth()
    openconnect_webobj.login(&quot;https://vpnserverurl/groupname&quot;)
    openconnect_webobj.show()

    ret = app.exec_()

    cookie = openconnect_webobj.cookie
    if cookie is not None:
        print(&quot;results:&quot;, cookie.name(), cookie.value(), cookie.toRawForm())

    sys.exit(ret)


if __name__ == &quot;__main__&quot;:
    main()
</code></pre>",1
655,65654227,Find Result as Non Zero Value in Group of Columns,"<p>I have a Dataframe as below:</p>
<pre><code>    SYS     Date_Time                Col_1 Col_2   Col_3  Col_4   Col_5  Col_6
0   SYSTEM1 2021-01-07 09:15:00      0     0       0      0       Y      0
1   SYSTEM1 2021-01-07 09:20:00      0     0       0      0       0      0
2   SYSTEM1 2021-01-07 09:25:00      R     0       0      0       0      0
3   SYSTEM1 2021-01-07 09:30:00      0     0       0      0       0      0
4   SYSTEM1 2021-01-07 09:35:00      0     0       0      0       0      0
5   SYSTEM1 2021-01-07 09:40:00      0     R       0      0       0      0
6   SYSTEM1 2021-01-07 09:45:00      0     0       0      0       0      0
7   SYSTEM1 2021-01-07 09:50:00      0     0       0      0       0      0
8   SYSTEM1 2021-01-07 09:55:00      0     0       0      0       0      0
9   SYSTEM1 2021-01-07 10:00:00      0     0       0      0       0      0
10  SYSTEM1 2021-01-07 10:05:00      0     0       0      0       0      0
11  SYSTEM1 2021-01-07 10:10:00      0     0       0      0       0      0
12  SYSTEM1 2021-01-07 10:15:00      0     0       0      0       0      G
13  SYSTEM1 2021-01-07 10:20:00      0     0       0      0       R      0
14  SYSTEM1 2021-01-07 10:25:00      0     0       0      0       0      0
</code></pre>
<p>I need to find the result color in column group of (Col_1, Col_2, Col_3, Col_4, Col_5, Col_6) where the color is not Zero.</p>
<p>Two possible condition can exist in above dataframe:</p>
<ol>
<li>Only one out of 6 columns will be Non Zero.</li>
<li>If all columns have Zero Value then result will be Zero.</li>
</ol>
<p>I want the Output as below:</p>
<pre><code>    SYS     Date_Time                Col_1 Col_2   Col_3  Col_4   Col_5  Col_6 Result
0   SYSTEM1 2021-01-07 09:15:00      0     0       0      0       Y      0     Y
1   SYSTEM1 2021-01-07 09:20:00      0     0       0      0       0      0     0
2   SYSTEM1 2021-01-07 09:25:00      R     0       0      0       0      0     R
3   SYSTEM1 2021-01-07 09:30:00      0     0       0      0       0      0     0
4   SYSTEM1 2021-01-07 09:35:00      0     0       0      0       0      0     0
5   SYSTEM1 2021-01-07 09:40:00      0     R       0      0       0      0     R
6   SYSTEM1 2021-01-07 09:45:00      0     0       0      0       0      0     0
7   SYSTEM1 2021-01-07 09:50:00      0     0       0      0       0      0     0
8   SYSTEM1 2021-01-07 09:55:00      0     0       0      0       0      0     0
9   SYSTEM1 2021-01-07 10:00:00      0     0       0      0       0      0     0
10  SYSTEM1 2021-01-07 10:05:00      0     0       0      0       0      0     0
11  SYSTEM1 2021-01-07 10:10:00      0     0       0      0       0      0     0
12  SYSTEM1 2021-01-07 10:15:00      0     0       0      0       0      G     G
13  SYSTEM1 2021-01-07 10:20:00      0     0       0      0       R      0     R
14  SYSTEM1 2021-01-07 10:25:00      0     0       0      0       0      0     0
</code></pre>",python|python-3.x|pandas|dataframe,"<p>You can get it using the following code:</p>
<ul>
<li><code>join</code> all the columns that have 'Col_' in them, using a <code>lambda</code> function in <code>apply</code></li>
<li><code>replace</code> all the numeric characters with '' which will keep only alphabets</li>
<li>Lastly, <code>replace</code> '' with 0 to get exactly your output.</li>
</ul>
<pre><code>df['result'] = df[[c for c in df.columns if 'Col_' in c]].apply(lambda row: ''.join(row.values.astype(str)), axis=1).str.replace('[^a-zA-Z]', '').replace('',0)
</code></pre>
<p>which prints:</p>
<pre><code>        SYS  Date_Time Col_1 Col_2  Col_3  Col_4 Col_5 Col_6 result
0   SYSTEM1 2021-01-07     0     0      0      0     Y     0      Y
1   SYSTEM1 2021-01-07     0     0      0      0     0     0      0
2   SYSTEM1 2021-01-07     R     0      0      0     0     0      R
3   SYSTEM1 2021-01-07     0     0      0      0     0     0      0
4   SYSTEM1 2021-01-07     0     0      0      0     0     0      0
5   SYSTEM1 2021-01-07     0     R      0      0     0     0      R
6   SYSTEM1 2021-01-07     0     0      0      0     0     0      0
7   SYSTEM1 2021-01-07     0     0      0      0     0     0      0
8   SYSTEM1 2021-01-07     0     0      0      0     0     0      0
9   SYSTEM1 2021-01-07     0     0      0      0     0     0      0
10  SYSTEM1 2021-01-07     0     0      0      0     0     0      0
11  SYSTEM1 2021-01-07     0     0      0      0     0     0      0
12  SYSTEM1 2021-01-07     0     0      0      0     0     G      G
13  SYSTEM1 2021-01-07     0     0      0      0     R     0      R
14  SYSTEM1 2021-01-07     0     0      0      0     0     0      0
</code></pre>
<p>There probably is a better more pythonic way to do this, but this is a one-liner and does the trick.</p>",1
656,65654227,Find Result as Non Zero Value in Group of Columns,"<p>I have a Dataframe as below:</p>
<pre><code>    SYS     Date_Time                Col_1 Col_2   Col_3  Col_4   Col_5  Col_6
0   SYSTEM1 2021-01-07 09:15:00      0     0       0      0       Y      0
1   SYSTEM1 2021-01-07 09:20:00      0     0       0      0       0      0
2   SYSTEM1 2021-01-07 09:25:00      R     0       0      0       0      0
3   SYSTEM1 2021-01-07 09:30:00      0     0       0      0       0      0
4   SYSTEM1 2021-01-07 09:35:00      0     0       0      0       0      0
5   SYSTEM1 2021-01-07 09:40:00      0     R       0      0       0      0
6   SYSTEM1 2021-01-07 09:45:00      0     0       0      0       0      0
7   SYSTEM1 2021-01-07 09:50:00      0     0       0      0       0      0
8   SYSTEM1 2021-01-07 09:55:00      0     0       0      0       0      0
9   SYSTEM1 2021-01-07 10:00:00      0     0       0      0       0      0
10  SYSTEM1 2021-01-07 10:05:00      0     0       0      0       0      0
11  SYSTEM1 2021-01-07 10:10:00      0     0       0      0       0      0
12  SYSTEM1 2021-01-07 10:15:00      0     0       0      0       0      G
13  SYSTEM1 2021-01-07 10:20:00      0     0       0      0       R      0
14  SYSTEM1 2021-01-07 10:25:00      0     0       0      0       0      0
</code></pre>
<p>I need to find the result color in column group of (Col_1, Col_2, Col_3, Col_4, Col_5, Col_6) where the color is not Zero.</p>
<p>Two possible condition can exist in above dataframe:</p>
<ol>
<li>Only one out of 6 columns will be Non Zero.</li>
<li>If all columns have Zero Value then result will be Zero.</li>
</ol>
<p>I want the Output as below:</p>
<pre><code>    SYS     Date_Time                Col_1 Col_2   Col_3  Col_4   Col_5  Col_6 Result
0   SYSTEM1 2021-01-07 09:15:00      0     0       0      0       Y      0     Y
1   SYSTEM1 2021-01-07 09:20:00      0     0       0      0       0      0     0
2   SYSTEM1 2021-01-07 09:25:00      R     0       0      0       0      0     R
3   SYSTEM1 2021-01-07 09:30:00      0     0       0      0       0      0     0
4   SYSTEM1 2021-01-07 09:35:00      0     0       0      0       0      0     0
5   SYSTEM1 2021-01-07 09:40:00      0     R       0      0       0      0     R
6   SYSTEM1 2021-01-07 09:45:00      0     0       0      0       0      0     0
7   SYSTEM1 2021-01-07 09:50:00      0     0       0      0       0      0     0
8   SYSTEM1 2021-01-07 09:55:00      0     0       0      0       0      0     0
9   SYSTEM1 2021-01-07 10:00:00      0     0       0      0       0      0     0
10  SYSTEM1 2021-01-07 10:05:00      0     0       0      0       0      0     0
11  SYSTEM1 2021-01-07 10:10:00      0     0       0      0       0      0     0
12  SYSTEM1 2021-01-07 10:15:00      0     0       0      0       0      G     G
13  SYSTEM1 2021-01-07 10:20:00      0     0       0      0       R      0     R
14  SYSTEM1 2021-01-07 10:25:00      0     0       0      0       0      0     0
</code></pre>",python|python-3.x|pandas|dataframe,"<p>You can <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.filter.html"" rel=""nofollow noreferrer""><code>filter</code></a> the <code>Col</code> like columns, then change the <code>dtype</code> of these columns to <code>str</code> and take <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.max.html"" rel=""nofollow noreferrer""><code>max</code></a> along <code>axis=1</code>. <strong>The idea used here is that when you take <code>max('0', some_alphabet)</code> then the returned max value will always be <code>some_alphabet</code></strong>:</p>
<pre><code>m = df.filter(like='Col').astype(str).max(1)
df['Result'] = m.where(m.ne('0'), 0) # replace '0' with 0
</code></pre>
<hr />
<pre><code>0     Y
1     0
2     R
3     0
4     0
5     R
6     0
7     0
8     0
9     0
10    0
11    0
12    G
13    R
14    0
Name: Result, dtype: object
</code></pre>",1
657,65756587,Insight for installing pip with sudo python3 get-pip.py,"<pre><code>Last login: Sat Jan 16 16:54:40 on ttys001
ugland@Uglands-Air ~ % curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
...
ugland@Uglands-Air ~ % sudo python3 get-pip.py
Password:
/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/setuptools/distutils_patch.py:25: UserWarning: Distutils was imported before Setuptools. This usage is discouraged and may exhibit undesirable behaviors or errors. Please use Setuptools' objects directly or at least import Setuptools first.
warnings.warn(
WARNING: The directory '/Users/Ugland/Library/Caches/pip' or its parent directory is not owned or is not writable by the current user. The cache has been disabled. Check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.
Collecting pip
    Downloading pip-20.3.3-py2.py3-none-any.whl (1.5 MB)
    |████████████████████████████████| 1.5 MB 6.2 MB/s 
    Collecting wheel
Downloading wheel-0.36.2-py2.py3-none-any.whl (35 kB)
Installing collected packages: pip, wheel
   Attempting uninstall: pip
       Found existing installation: pip 20.2.3
       Uninstalling pip-20.2.3:
           Successfully uninstalled pip-20.2.3
Successfully installed pip-20.3.3 wheel-0.36.2
ugland@Uglands-Air ~ % python3 -m pip --version
pip 20.3.3 from /Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/pip (python 3.9)
</code></pre>
<p>New to python as of this past month, and the textbook I'm following along with recommended to install pip via:</p>
<pre><code>curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py

sudo python3 get-pip.py
</code></pre>
<p>Which, only after the fact, realized it was a mistake. I'm reading that installing pip in your home drive with elevated permissions can ruin your software - and I'm wondering, given that my the terminal said it deleted an earlier version of pip, can I just delete/remove/uninstall the root location of pip. And then how would I do that safely? Any help is appreciated, as I'm confused with all the technical details. Thinking a factory reset is my best option right now.</p>",python|python-3.x|pip,"<p>Considering your python installation comes with PIP, if I was you, I would simply run <code>pip install --user pip</code></p>
<p>The <code>--user</code> flag causes PIP to install packages into a user-specific directory. You may see a warning when doing that, along the lines of:</p>
<blockquote>
<p>WARNING: The scripts pip, pip3.9, and pip3 are installed in
'/Users/Ugland/Library/...' which is not on PATH.</p>
<p>Consider adding this directory to PATH or, if you prefer to suppress this
warning, use --no-warn-script-location.</p>
</blockquote>
<p>If you do see that warning, you should edit <code>~/.bash_profile</code> to add the following entry:</p>
<pre class=""lang-sh prettyprint-override""><code>export PATH=&quot;/Users/Ugland/Library/...:$PATH&quot;
</code></pre>
<p><strong>Note</strong>: You need to replace the <code>/Users/Ugland/Library/...</code> with whatever path PIP showed you in the warnings. Also, mind the colon (<code>:</code>) between the path you are adding and <code>$PATH</code>.</p>
<p>After adding the entry to your <code>~/.bash_profile</code> file, you should be able to run <code>source ~/.bash_profile</code> to cause the newly installed libraries to be added to your path. In rare cases, you might need to launch a new terminal window or tab.</p>
<p>If you did <em>not</em> see the warning mentioned above, then PIP's directory was already part of your <code>$PATH</code>, so you should be good to go. For good measure, though, you may want to run <code>hash -r</code>, which tells bash that it should forget all full path locations it has remembered up until that point. (Without running <code>hash -r</code>, bash will sometimes resolve to old versions of executables.)</p>
<p>Finally, if you invoke <code>which pip</code>, you should see a path located somewhere in your home directory.</p>
<blockquote>
<p>... can I just delete/remove/uninstall the root location of pip. And then how would I do that safely?</p>
</blockquote>
<p>As for the question about deleting the version of pip installed at the system level, I would leave it be. Seems that it was already installed and you running <code>sudo python3 get-pip.py</code> might have updated it to a newer version. If you really wanted to, you could downgrade it, but it should not hurt anything to leave it at the updated version.</p>",0
658,65756587,Insight for installing pip with sudo python3 get-pip.py,"<pre><code>Last login: Sat Jan 16 16:54:40 on ttys001
ugland@Uglands-Air ~ % curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
...
ugland@Uglands-Air ~ % sudo python3 get-pip.py
Password:
/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/setuptools/distutils_patch.py:25: UserWarning: Distutils was imported before Setuptools. This usage is discouraged and may exhibit undesirable behaviors or errors. Please use Setuptools' objects directly or at least import Setuptools first.
warnings.warn(
WARNING: The directory '/Users/Ugland/Library/Caches/pip' or its parent directory is not owned or is not writable by the current user. The cache has been disabled. Check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.
Collecting pip
    Downloading pip-20.3.3-py2.py3-none-any.whl (1.5 MB)
    |████████████████████████████████| 1.5 MB 6.2 MB/s 
    Collecting wheel
Downloading wheel-0.36.2-py2.py3-none-any.whl (35 kB)
Installing collected packages: pip, wheel
   Attempting uninstall: pip
       Found existing installation: pip 20.2.3
       Uninstalling pip-20.2.3:
           Successfully uninstalled pip-20.2.3
Successfully installed pip-20.3.3 wheel-0.36.2
ugland@Uglands-Air ~ % python3 -m pip --version
pip 20.3.3 from /Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/pip (python 3.9)
</code></pre>
<p>New to python as of this past month, and the textbook I'm following along with recommended to install pip via:</p>
<pre><code>curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py

sudo python3 get-pip.py
</code></pre>
<p>Which, only after the fact, realized it was a mistake. I'm reading that installing pip in your home drive with elevated permissions can ruin your software - and I'm wondering, given that my the terminal said it deleted an earlier version of pip, can I just delete/remove/uninstall the root location of pip. And then how would I do that safely? Any help is appreciated, as I'm confused with all the technical details. Thinking a factory reset is my best option right now.</p>",python|python-3.x|pip,<p>If you are using the Anacionda distribution of python then you don't need pip. Use conda to install a package. First make a virtual environment by typing 'conda create -n yourenvname python=x.x anaconda' where x.x is the version of python you wish to use. Now activate you virtual environment by typing 'source activate yourenvname' You can load packages by typing 'conda install packagename'. You should now be able to run python.</p>,0
659,65749139,Why am I presented with an IndexError and what ways can I make this code more succinct,"<p>so I'm struggling to complete a coding challenge in CodeWars, and I received an IndexError on CodeWars. When I run the code on PyCharm, the output is fine.</p>
<p><a href=""https://i.stack.imgur.com/rcmLp.png"" rel=""nofollow noreferrer"">Coding Prompt</a></p>
<pre><code>def alphabet_position(sentence):
    alphabet_cap = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;, &quot;P&quot;, &quot;Q&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;, &quot;W&quot;, &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot;]
    alphabet_low = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;]

    sentence_list = list(sentence)

    # remove any non-letters from sentence
    i = 0
    while i &lt; len(sentence_list):
        if sentence_list[i].isalpha() == False:
            sentence_list.remove(sentence_list[i])
        i += 1

# I had to create a specific remove(&quot; &quot;) because for some reason the &quot;'&quot; would be turned into a &quot; &quot; instead of being removed?
    i = 0
    while i &lt; len(sentence_list):
        if sentence_list[i] == &quot; &quot;:
            sentence_list.remove(&quot; &quot;)
        i += 1

    # finding position of alphabet
    alpha_index = []
    k = 0
    j = 0
    while k &lt; len(sentence_list):
        if sentence_list[k] == alphabet_low[j] or sentence_list[k] == alphabet_cap[j]:
            alpha_index.append(str((alphabet_low.index(alphabet_low[j])) + 1))
            j = 0
            k += 1
        else:
            j += 1

    sentence_index = &quot; &quot;.join(alpha_index)

    return sentence_index
</code></pre>
<p><a href=""https://i.stack.imgur.com/JA0t5.png"" rel=""nofollow noreferrer"">Error message</a></p>
<p>Sample Tests:</p>
<pre><code>from random import randint
test.assert_equals(alphabet_position(&quot;The sunset sets at twelve o' clock.&quot;), &quot;20 8 5 19 21 14 19 5 20 19 5 20 19 1 20 20 23 5 12 22 5 15 3 12 15 3 11&quot;)
test.assert_equals(alphabet_position(&quot;The narwhal bacons at midnight.&quot;), &quot;20 8 5 14 1 18 23 8 1 12 2 1 3 15 14 19 1 20 13 9 4 14 9 7 8 20&quot;)

number_test = &quot;&quot;
for item in range(10):
    number_test += str(randint(1, 9))
test.assert_equals(alphabet_position(number_test), &quot;&quot;)```

Any help would be appreciated!
</code></pre>",python|index-error,"<p>Code with inline comments:</p>
<pre><code>alphabet_low = &quot;abcdefghijklmnopqrstuvwxyz&quot;

def alphabet_position(sentence):
    result = []  # initialize result
    for char in sentence.lower():  # iterate over lowercase string
        if char in alphabet_low:  # is character in alphabet?
            position = alphabet_low.find(char) + 1
            result.append(str(position))
    return &quot; &quot;.join(result)

sentence = &quot;The sunset sets at twelve o' clock.&quot;
print(sentence)
print(alphabet_position(sentence))
</code></pre>
<p>Output:</p>
<pre class=""lang-none prettyprint-override""><code>The sunset sets at twelve o' clock.
20 8 5 19 21 14 19 5 20 19 5 20 19 1 20 20 23 5 12 22 5 15 3 12 15 3 11
</code></pre>",0
660,65749139,Why am I presented with an IndexError and what ways can I make this code more succinct,"<p>so I'm struggling to complete a coding challenge in CodeWars, and I received an IndexError on CodeWars. When I run the code on PyCharm, the output is fine.</p>
<p><a href=""https://i.stack.imgur.com/rcmLp.png"" rel=""nofollow noreferrer"">Coding Prompt</a></p>
<pre><code>def alphabet_position(sentence):
    alphabet_cap = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;, &quot;P&quot;, &quot;Q&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;, &quot;W&quot;, &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot;]
    alphabet_low = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;]

    sentence_list = list(sentence)

    # remove any non-letters from sentence
    i = 0
    while i &lt; len(sentence_list):
        if sentence_list[i].isalpha() == False:
            sentence_list.remove(sentence_list[i])
        i += 1

# I had to create a specific remove(&quot; &quot;) because for some reason the &quot;'&quot; would be turned into a &quot; &quot; instead of being removed?
    i = 0
    while i &lt; len(sentence_list):
        if sentence_list[i] == &quot; &quot;:
            sentence_list.remove(&quot; &quot;)
        i += 1

    # finding position of alphabet
    alpha_index = []
    k = 0
    j = 0
    while k &lt; len(sentence_list):
        if sentence_list[k] == alphabet_low[j] or sentence_list[k] == alphabet_cap[j]:
            alpha_index.append(str((alphabet_low.index(alphabet_low[j])) + 1))
            j = 0
            k += 1
        else:
            j += 1

    sentence_index = &quot; &quot;.join(alpha_index)

    return sentence_index
</code></pre>
<p><a href=""https://i.stack.imgur.com/JA0t5.png"" rel=""nofollow noreferrer"">Error message</a></p>
<p>Sample Tests:</p>
<pre><code>from random import randint
test.assert_equals(alphabet_position(&quot;The sunset sets at twelve o' clock.&quot;), &quot;20 8 5 19 21 14 19 5 20 19 5 20 19 1 20 20 23 5 12 22 5 15 3 12 15 3 11&quot;)
test.assert_equals(alphabet_position(&quot;The narwhal bacons at midnight.&quot;), &quot;20 8 5 14 1 18 23 8 1 12 2 1 3 15 14 19 1 20 13 9 4 14 9 7 8 20&quot;)

number_test = &quot;&quot;
for item in range(10):
    number_test += str(randint(1, 9))
test.assert_equals(alphabet_position(number_test), &quot;&quot;)```

Any help would be appreciated!
</code></pre>",python|index-error,"<p>I can't really replicate the <code>IndexError</code>, but  I can help you out with the compactness of your code. The quickest way I can think of for getting the job done is something like this:</p>
<pre><code>import re # for the regular expression

def alphabet_position(sentence):

    # regular expression to filter out everything that is not a letter
    regex = re.compile('[^a-zA-Z]')

    # removing everything that doesn't match the regex
    sentence = regex.sub('', sentence)

    alpha_index = []
    for char in sentence.upper():
        # ord() returns the ASCII code,
        # we subtract by 64 to get the alphabetical index,
        # then we convert the integer to string
        # because the final result needs to be a string

        alpha_index.append(str(ord(char) - 64))
    
    return &quot; &quot;.join(alpha_index)
</code></pre>
<p>An explanation of what is going on:</p>
<ol>
<li>We don't need to store into two lists all the possible characters we need. We can just use a regular expression to remove everything that is <em>not</em> an alphabetical character: <code>[^a-zA-Z]</code>.</li>
<li>There's no need to iterate 3 times over the string: the regex takes care of the filtering, then we can use a single iteration over every character to find out their index in the alphabet. To do this, first we convert everything to uppercase with <code>sentence.upper()</code>, then we check the ASCII value of the current character and we subtract 64. This is done because the ASCII values follow the alphabetical order, and the first character, A, has value 65. <a href=""https://www.ascii-code.com/"" rel=""nofollow noreferrer"">Take a look at the table</a>.</li>
</ol>
<p>If you don't know how to use regular expressions, another way to solve the problem is</p>
<pre><code>def alphabet_position(sentence):
    alpha_index = []
    for char in sentence.upper():
        if char.isalpha() and 65 &lt;= ord(char) &lt;= 90:    # 65: A ascii value, 90: Z ascii value
            alpha_index.append(str(ord(char) - 64))
    
    return &quot; &quot;.join(alpha_index)
</code></pre>
<p>One drawback of this approach, as Luke Woodward pointed out in his comment to your question, is that if we have non-standard character, as accented letters, they get filtered out. If that is the case, you might want to expand either the <code>regex</code> or the ASCII filtering.</p>",0
661,65985328,net/http connection refused over LAN,"<p>I have a simple Go REST API using just the net/http package from go (no frameworks as this is just a R&amp;D tool). There is a docker-compose.yml that will bring up a mongo database if you wish to run the code: <a href=""https://github.com/Workout-Widget/imu-rest-go/tree/1/connection-refused"" rel=""nofollow noreferrer"">https://github.com/Workout-Widget/imu-rest-go/tree/1/connection-refused</a></p>
<p>The there is a basic dummy client, <em>mock-rest-client.py</em>, as well (a python script sending dummy values for test purposes). The client just sends this dummy data in a loop. Client repo: <a href=""https://github.com/Workout-Widget/imu-sense-client"" rel=""nofollow noreferrer"">https://github.com/Workout-Widget/imu-sense-client</a></p>
<p>When these are run on the same machine (i.e. localhost/127.0.0.1) it works fine.</p>
<p>Tried disabling CORS with an adaptation of this tutorial, but it did not improve the situation: <a href=""https://flaviocopes.com/golang-enable-cors/"" rel=""nofollow noreferrer"">https://flaviocopes.com/golang-enable-cors/</a></p>
<p>I am not sure what the problem is but if I change the client to a LAN REST Server IP, the connection is refused. Any suggestions would be appreciated. Please, let me know if more clarity is needed.</p>
<p>The go handler code</p>
<pre><code>package main

import (
    &quot;context&quot;
    &quot;go.mongodb.org/mongo-driver/mongo&quot;
    &quot;go.mongodb.org/mongo-driver/mongo/options&quot;
    &quot;log&quot;
    &quot;net/http&quot;
    &quot;time&quot;
    &quot;workoutwidget.fit/sensehatrest/controller&quot;
    &quot;workoutwidget.fit/sensehatrest/service&quot;
)


func corsHandler(h http.HandlerFunc) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        enableCors(&amp;w)
        h(w, r)
    }
}

func enableCors(w *http.ResponseWriter) {

    (*w).Header().Set(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;)
    (*w).Header().Set(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, OPTIONS, PUT, DELETE&quot;)
    (*w).Header().Set(&quot;Access-Control-Allow-Headers&quot;, &quot;Accept, Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization&quot;)

}

func main() {

    server := http.Server{
        Addr: &quot;127.0.0.1:8080&quot;,
    }

    log.Println(&quot;Sense HAT REST API loading...&quot;)
    log.Println(&quot;Creating the database connection&quot;)
    // TODO insert mongo client here

    log.Println(&quot;Establishing database connection&quot;)
    client, err := mongo.NewClient(options.Client().ApplyURI(&quot;mongodb://localhost:27017/test&quot;))
    if err != nil {
        log.Fatalf(&quot;Could not connect to database! %s\n&quot;, err.Error())
    }
    log.Println(&quot;Getting context&quot;)
    ctx, _ := context.WithTimeout(context.Background(), 10*time.Second)

    log.Println(&quot;Connecting to the database&quot;)
    err = client.Connect(ctx)

    log.Println(&quot;Instantiating Motion Controller&quot;)
    motionController := controller.MotionController{
        MotionRepo: &amp;service.MotionService{
            Client: client,
        },
    }

    log.Println(&quot;Instantiating the Info Controller&quot;)
    infoController := controller.InfoController{}

    log.Println(&quot;Assigning handler functions...&quot;)
    http.HandleFunc(&quot;/motion/&quot;, corsHandler(motionController.HandleMotionRequest))
    http.HandleFunc(&quot;/experiment/&quot;, corsHandler(motionController.HandleExperimentRequest))
    http.HandleFunc(&quot;/info/&quot;, corsHandler(infoController.HandleInfoRequests))

    log.Println(&quot;Starting server...&quot;)
    err = server.ListenAndServe()
    if err != nil {
        panic(err)
    }
}
</code></pre>
<p>Client code:</p>
<pre><code>import requests
import json
import time

rest_endpoint = &quot;http://127.0.0.1:8080/motion/&quot;
experiment_id = &quot;NA&quot;
sensorType = &quot;NA&quot;
inputDeviceId = &quot;NA&quot;
sensor_location = &quot;NA&quot;
exercise = &quot;NA&quot;
subject = &quot;NA&quot;

def make_post_call():
    data = {
        'xRoll': 0.1,
        'yPitch': 0.2,
        'zYaw': 0.3,
        'experimentId': experiment_id,
        'type': sensorType,
        'sensorLocation': sensor_location,
        'subject': subject,
        'isRaw': False,
        'timestamp': round(time.time() * 1000),
        'deviceId': inputDeviceId
    }
    requests.post(rest_endpoint, json=data)

while (True):
    make_post_call()
    time.sleep(.3)
    enter code here
</code></pre>",python|go,"<p>Your webserver is being served on the address <code>127.0.0.1:8080</code>. This only accepts connections from localhost. You need to change the listen address to <code>:8080</code> or <code>0.0.0.0:8080</code></p>
<pre class=""lang-golang prettyprint-override""><code> server := http.Server{
        Addr: &quot;:8080&quot;,
    }
</code></pre>
<p><strong>Some more clarification</strong></p>
<p>Setting the server listen address to <code>127.0.0.1:&lt;port&gt;</code> is binding it your local network interface. This network interface is local to your machine.</p>
<p>Setting the address to <code>0.0.0.0:&lt;port&gt;</code> binds the server to listen on all available network interfaces.</p>
<p>So you can actually decide which network interface to allow traffic from.</p>",1
662,71047156,"Convert tensor of (row, column) coordinates to boolean mask in TensorFlow","<p>I have an array of 2D coordinates, from which I need to obtain a boolean mask with a known shape, where elements whose index is in the coordinates array is <code>True</code>.</p>
<p>For example, if I had an indices tensor which contains <code>[[0, 0], [1, 1], [2, 2], [0, 1], [1, 2]]</code> and a given shape of <code>(5, 5)</code> I need to get a matrix that is like so:</p>
<pre><code>[[ True,  True, False, False, False],
 [False,  True,  True, False, False],
 [False, False,  True, False, False],
 [False, False, False, False, False],
 [False, False, False, False, False]]
</code></pre>
<p>In Numpy I'd do it like so:</p>
<pre><code>idx = np.array([[0, 0], [1, 1], [2, 2], [0, 1], [1, 2]])
bool_mat = np.zeros(shape=(5, 5), dtype=np.bool)
bool_mat[idx[:, 0], idx[:, 1]] = True
</code></pre>
<p>However, in TensorFlow you can't assign tensor items like this.</p>
<p>How can I express an equivalent computation in TensorFlow?</p>",python|numpy|tensorflow,"<p>You can use <code>tf.tensor_scatter_nd_update(tensor, indices, updates)</code>:</p>
<pre><code>import tensorflow as tf

indices = tf.constant([[0, 0], [1, 1], [2, 2], [0, 1], [1, 2]])
bool_mat = tf.zeros(shape=(5, 5), dtype=tf.bool)

bool_mat = tf.tensor_scatter_nd_update(bool_mat, indices, tf.repeat([True], repeats=tf.shape(indices)[0]))
print(bool_mat)
</code></pre>
<pre><code>tf.Tensor(
[[ True  True False False False]
 [False  True  True False False]
 [False False  True False False]
 [False False False False False]
 [False False False False False]], shape=(5, 5), dtype=bool)
</code></pre>",1
663,70717016,How do I find what the date will be next Sunday 12 am from now and then add 10 hours to it,"<p>I have this code</p>
<pre><code>today = datetime.now().date() 
# prints: 2022/1/14
rd = REL.relativedelta(days=1, weekday=REL.SU)
nextSunday = today + rd
#prints : 2022/1/16
</code></pre>
<p>How do i add 10 hours to the date so i can get a variable nextSunday_10am that i can substract to the current time</p>
<pre><code>difference = nextSunday_10am - today 
</code></pre>
<p>and schedule what I need to do</p>",python|datetime|python-datetime,"<p>You can add hours to a DateTime by using <code>datetime.timedelta()</code>.</p>
<pre><code>nextSunday += datetime.timedelta(hours=10)
</code></pre>
<p>For example:</p>
<pre><code>import datetime


today = datetime.datetime.today()
print(&quot;Today is &quot;+str(today))
while today.weekday()+1 != 6: #0 = &quot;Monday&quot;, 1 = &quot;Tuesday&quot;...
    today += datetime.timedelta(1)

nextSunday = today + datetime.timedelta(hours=10)
print(&quot;Next sunday +10hrs will be &quot;+str(nextSunday))
</code></pre>",1
664,70717016,How do I find what the date will be next Sunday 12 am from now and then add 10 hours to it,"<p>I have this code</p>
<pre><code>today = datetime.now().date() 
# prints: 2022/1/14
rd = REL.relativedelta(days=1, weekday=REL.SU)
nextSunday = today + rd
#prints : 2022/1/16
</code></pre>
<p>How do i add 10 hours to the date so i can get a variable nextSunday_10am that i can substract to the current time</p>
<pre><code>difference = nextSunday_10am - today 
</code></pre>
<p>and schedule what I need to do</p>",python|datetime|python-datetime,"<p>You can do the same thing as suggested by @Dani3le_ more directly with the following:</p>
<pre><code>def getSundayTime(tme: datetime.date) -&gt; datetime:
    nxt_sndy = tme + timedelta(days= 6 - tme.weekday())
    return datetime.combine(nxt_sndy, datetime.strptime('10:00', '%H:%M').time())
</code></pre>
<p>This will compute calculate the next Sunday and set time to 10:00</p>",1
665,70778011,PySpark - how to replace null array in JSON file,"<p>I have JSON files with null arrays (<code>array (nullable = true)</code> and <code>element: (containsNull = true)</code>) that I'd like to convert to parquet files. These null fields are dropped automatically, while all other columns are converted as expected. Is there a way to replace the null arrays with something else (eg <code>[&quot;-&quot;]</code>)?
I'm running my code in AWS Glue, but the replacement would take place using pure PySpark and dataframes.</p>
<p>The data type must still be an array in the parquet file (just not with null values).</p>
<p>json:</p>
<pre><code>{
 &quot;a&quot;:[],
 &quot;b&quot;:[1,2],
 &quot;c&quot;: &quot;a string&quot;
}
</code></pre>
<p>Expected output:</p>
<pre><code>   a  |   b   |     c
[&quot;-&quot;] | [1,2] | &quot;a string&quot;
</code></pre>
<p>Current script:</p>
<pre><code>sc = SparkContext()
glueContext = GlueContext(sc)
spark = glueContext.spark_session
spark.conf.set(&quot;spark.sql.jsonGenerator.ignoreNullFields&quot;, &quot;false&quot;)

job = Job(glueContext)
job.init(args['JOB_NAME'], args)

inputDF = glueContext.create_dynamic_frame_from_options(connection_type=&quot;s3&quot;,
                                                        connection_options:{
                                                             &quot;s3://my-bucket&quot;, 
                                                             &quot;recurse&quot;:True
                                                           }, 
                                                        format=&quot;json&quot;)
df = inputDF.toDF()
# replace empty arrays here
dynamic = DynamicFrame.fromDF(df, glueContext, &quot;dynamic&quot;)

output = glueContext.write_dynamic_frame.from_options(frame=dynamic,
                                                      connection_type=&quot;s3&quot;,
                                                      connection_options={
                                                           &quot;path&quot;:&quot;s3://my-bucket&quot;
                                                           },
                                                      format=&quot;parquet&quot;
                                                      )
</code></pre>",python|apache-spark|pyspark|parquet,"<p>Not sure which spark version you are using, I have checked with spark 3.1.2 and 2.4.5 where empty array fields are not getting ignored.</p>
<p>You can use below line to get desired result,</p>
<pre><code>df.withColumn('a', when(size('a')== 0, array(lit('-'))).otherwise(col('a'))).show()

+---+------+--------+
|  a|     b|       c|
+---+------+--------+
|[-]|[1, 2]|a string|
+---+------+--------+  
</code></pre>",1
666,70960195,Generator function that yields alternating values of two lists,"<p>The question seems very basic and easy at first glance, but I still had some trouble writing an efficient solution. The idea is to write a function, which takes two generators as an input and yields one item of each list. If either list is empty, it yields each item of the remaining list. Example:</p>
<pre><code> list(alternate(&quot;abcdefg&quot;, [1, 2, 3, 4])) == [&quot;a&quot;, 1, &quot;b&quot;,2, &quot;c&quot;, 3, &quot;d&quot;, 4, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;]
</code></pre>
<p>what kind of worked, but looks very ugly:</p>
<pre><code>def alternate(xs1, xs2):
    xs1 = iter(xs1)
    xs2 = iter(xs2)
    while xs1 and xs2:
        try:
            yield next(xs1), next(xs2)
        except StopIteration:
                for x1 in xs1:
                    yield x1
                for x2 in xs2:
                    yield x2
</code></pre>
<p>Especially I want to avoid transforming the inputs to an iterator in the beginning.
I tried using 2 simple for loops, but this obviously returned only the last value of each list, because one for loops finishes before the other starts. This is not a solve my problem question, I am rather looking for some code to improve writing code skills!</p>",python|generator,"<p>Use <code>zip_longest</code> and <code>chain.from_iterable</code> together:</p>
<pre><code>&gt;&gt;&gt; from itertools import chain, zip_longest
&gt;&gt;&gt; [ x for x in chain.from_iterable(zip_longest(&quot;abcdefg&quot;, [1,2,3,4])) if x is not None]
['a', 1, 'b', 2, 'c', 3, 'd', 4, 'e', 'f', 'g']
</code></pre>
<p>For something more explicit and similar to what you already have, handle each call to <code>next</code> separately, and break out of the loop immediately to iterate over the remainder of each iterator. Use <code>itertools.cycle</code> to alternate between the two iterators until one is exhausted.</p>
<pre><code>from itertools import cycle

def alternate(xs1, xs2):
    xs1 = iter(xs1)
    xs2 = iter(xs2)
    for itr in cycle([xs1, xs2]):
        try:
            yield next(itr)
        except StopIteration:
            break

    yield from xs1
    yield from xs2
</code></pre>",5
667,70960195,Generator function that yields alternating values of two lists,"<p>The question seems very basic and easy at first glance, but I still had some trouble writing an efficient solution. The idea is to write a function, which takes two generators as an input and yields one item of each list. If either list is empty, it yields each item of the remaining list. Example:</p>
<pre><code> list(alternate(&quot;abcdefg&quot;, [1, 2, 3, 4])) == [&quot;a&quot;, 1, &quot;b&quot;,2, &quot;c&quot;, 3, &quot;d&quot;, 4, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;]
</code></pre>
<p>what kind of worked, but looks very ugly:</p>
<pre><code>def alternate(xs1, xs2):
    xs1 = iter(xs1)
    xs2 = iter(xs2)
    while xs1 and xs2:
        try:
            yield next(xs1), next(xs2)
        except StopIteration:
                for x1 in xs1:
                    yield x1
                for x2 in xs2:
                    yield x2
</code></pre>
<p>Especially I want to avoid transforming the inputs to an iterator in the beginning.
I tried using 2 simple for loops, but this obviously returned only the last value of each list, because one for loops finishes before the other starts. This is not a solve my problem question, I am rather looking for some code to improve writing code skills!</p>",python|generator,"<p>This is slightly simpler than @wLui's:</p>
<pre><code>def alternate(xs1, xs2):
     xs1 = iter(xs1)
     xs2 = iter(xs2)
     for pair in zip(xs1, xs2):
         yield from pair
     yield from xs1
     yield from xs2
</code></pre>",0
668,70960195,Generator function that yields alternating values of two lists,"<p>The question seems very basic and easy at first glance, but I still had some trouble writing an efficient solution. The idea is to write a function, which takes two generators as an input and yields one item of each list. If either list is empty, it yields each item of the remaining list. Example:</p>
<pre><code> list(alternate(&quot;abcdefg&quot;, [1, 2, 3, 4])) == [&quot;a&quot;, 1, &quot;b&quot;,2, &quot;c&quot;, 3, &quot;d&quot;, 4, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;]
</code></pre>
<p>what kind of worked, but looks very ugly:</p>
<pre><code>def alternate(xs1, xs2):
    xs1 = iter(xs1)
    xs2 = iter(xs2)
    while xs1 and xs2:
        try:
            yield next(xs1), next(xs2)
        except StopIteration:
                for x1 in xs1:
                    yield x1
                for x2 in xs2:
                    yield x2
</code></pre>
<p>Especially I want to avoid transforming the inputs to an iterator in the beginning.
I tried using 2 simple for loops, but this obviously returned only the last value of each list, because one for loops finishes before the other starts. This is not a solve my problem question, I am rather looking for some code to improve writing code skills!</p>",python|generator,"<p>(This is basically @chepner's answer from the comments, but I believe this is the right answer which deserves to appear here...)</p>
<p>You can use the <code>roundrobin</code> function from the <a href=""https://pypi.org/project/more-itertools/"" rel=""nofollow noreferrer"">more-itertools project</a> (referenced from <a href=""https://docs.python.org/3/library/itertools.html#itertools-recipes"" rel=""nofollow noreferrer"">python docs</a>).</p>
<p>I include it here for convenience:</p>
<pre><code>def roundrobin(*iterables):
    &quot;roundrobin('ABC', 'D', 'EF') --&gt; A D E B F C&quot;
    # Recipe credited to George Sakkis
    num_active = len(iterables)
    nexts = cycle(iter(it).__next__ for it in iterables)
    while num_active:
        try:
            for next in nexts:
                yield next()
        except StopIteration:
            # Remove the iterator we just exhausted from the cycle.
            num_active -= 1
            nexts = cycle(islice(nexts, num_active))
</code></pre>",0
669,70960195,Generator function that yields alternating values of two lists,"<p>The question seems very basic and easy at first glance, but I still had some trouble writing an efficient solution. The idea is to write a function, which takes two generators as an input and yields one item of each list. If either list is empty, it yields each item of the remaining list. Example:</p>
<pre><code> list(alternate(&quot;abcdefg&quot;, [1, 2, 3, 4])) == [&quot;a&quot;, 1, &quot;b&quot;,2, &quot;c&quot;, 3, &quot;d&quot;, 4, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;]
</code></pre>
<p>what kind of worked, but looks very ugly:</p>
<pre><code>def alternate(xs1, xs2):
    xs1 = iter(xs1)
    xs2 = iter(xs2)
    while xs1 and xs2:
        try:
            yield next(xs1), next(xs2)
        except StopIteration:
                for x1 in xs1:
                    yield x1
                for x2 in xs2:
                    yield x2
</code></pre>
<p>Especially I want to avoid transforming the inputs to an iterator in the beginning.
I tried using 2 simple for loops, but this obviously returned only the last value of each list, because one for loops finishes before the other starts. This is not a solve my problem question, I am rather looking for some code to improve writing code skills!</p>",python|generator,"<p>It’s going to be challenging to do away with <code>iter()</code>, as that’s kind of what it’s made for. If you can put up with that, this can be straightforward:</p>
<pre><code>def alternate(a, b):
    ia = iter(a)
    ib = iter(b)
    
    while True:
        try:
            yield next(ia)
            yield next(ib)
        except StopIteration:
            break
            
    yield from ia
    yield from ib
</code></pre>
<ol>
<li>Just try to yield the next item from each of the items in turn.</li>
<li>Once one of them is empty, yield the rest.</li>
</ol>",1
670,70960195,Generator function that yields alternating values of two lists,"<p>The question seems very basic and easy at first glance, but I still had some trouble writing an efficient solution. The idea is to write a function, which takes two generators as an input and yields one item of each list. If either list is empty, it yields each item of the remaining list. Example:</p>
<pre><code> list(alternate(&quot;abcdefg&quot;, [1, 2, 3, 4])) == [&quot;a&quot;, 1, &quot;b&quot;,2, &quot;c&quot;, 3, &quot;d&quot;, 4, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;]
</code></pre>
<p>what kind of worked, but looks very ugly:</p>
<pre><code>def alternate(xs1, xs2):
    xs1 = iter(xs1)
    xs2 = iter(xs2)
    while xs1 and xs2:
        try:
            yield next(xs1), next(xs2)
        except StopIteration:
                for x1 in xs1:
                    yield x1
                for x2 in xs2:
                    yield x2
</code></pre>
<p>Especially I want to avoid transforming the inputs to an iterator in the beginning.
I tried using 2 simple for loops, but this obviously returned only the last value of each list, because one for loops finishes before the other starts. This is not a solve my problem question, I am rather looking for some code to improve writing code skills!</p>",python|generator,"<p>I prefer the above answer but here's a version that doesn't use any imports:</p>
<pre><code>def alternate(xs1, xs2):
    xs1, xs2 = iter(xs1), iter(xs2)
    for e1, e2 in zip(xs1, xs2): # either xs1, xs2 exhausted by the end of this loop
        yield e1
        yield e2
    
    # pull remaining from the non-exhausted generator (if any)
    yield from xs1
    yield from xs2
</code></pre>
<p>If you want a version that doesn't transform the inputs into iterators and avoids using other libraries, the below would work, assuming both sequences are indexable.</p>
<pre><code>def alternate2(xs1, xs2):
    n = min(len(xs1), len(xs2))
    for i in range(n):
        yield xs1[i]
        yield xs2[i]
    
    yield from xs1[n:]
    yield from xs2[n:]
</code></pre>",2
671,71031183,How to paste an Excel chart into PowerPoint placeholder using Python?,"<p>I have an excel file with a series of formatted charts on a tab called <code>Charts</code>.  I have named the charts, <code>Figure1</code>, <code>Figure2</code>, <code>Figure3</code>, etc.</p>
<p>I have an existing PowerPoint template. The template has 2 placeholders per slide (so that it can accommodate 2 charts per slide).</p>
<p>I would like to paste <code>Figure1</code> in the left placeholder of slide 3, and <code>Figure2</code> in the right placeholder of slide 3.  I want to do this in python as the data analysis is done in python and excel is used to share stored results with colleagues.</p>
<p><strong>Attempt 1:</strong></p>
<p>Attempt 1 uses <code>win32com.client</code>.  I am following this example: <a href=""https://stackoverflow.com/questions/60445740/how-to-copy-chart-from-excel-and-paste-it-as-chart-into-powerpoint-not-image-u"">How to copy chart from excel and paste it as chart into powerpoint (not image) using python</a></p>
<p>but I cannot get the syntax right to insert the chart into the placeholder.  When I follow the syntax in the solution, nothing happens and I get a message</p>
<blockquote>
<p>&lt;bound method Paste of &lt;COMObject &gt;&gt;</p>
</blockquote>
<p>Current code:</p>
<pre class=""lang-python prettyprint-override""><code>xlApp = win32.Dispatch('Excel.Application')
wb = xlApp.Workbooks.Open(outputPath+'Chart Pack.xlsb')
        
pptApp = win32.Dispatch('PowerPoint.Application')
ppt = pptApp.Presentations.Open(template)
        
# attempt 1
wb.sheets('Charts').ChartObjects('Figure1').Copy
ppt.slides[2].Shapes.Paste
    
# attempt 2
wb.sheets('Charts').ChartObjects('Figure1').Copy
ppt.slides[2].placeholders[1].Paste
</code></pre>
<p><strong>Attempt 2:</strong></p>
<p>Attempt 2 uses <code>python-pptx</code>.  I looked at the documentation here:
<a href=""https://python-pptx.readthedocs.io/en/latest/user/placeholders-using.html"" rel=""nofollow noreferrer"">https://python-pptx.readthedocs.io/en/latest/user/placeholders-using.html</a></p>
<p>but the example involves creating an excel chart from scratch in PowerPoint (I am not sure why you would ever do that), and I can't figure out the syntax to insert an existing chart from excel.</p>
<p>Current code:</p>
<pre class=""lang-python prettyprint-override""><code>from pptx import Presentation

xlApp = win32.Dispatch('Excel.Application')
wb = xlApp.Workbooks.Open(outputPath+'Chart Pack.xlsb')
    
prs = Presentation(template)
slide = prs.slides[3]
    
for shape in slide.placeholders:
    print('%d %s' % (shape.placeholder_format.idx, shape.name))

placeholder = prs.slides[3].placeholders[1]
placeholder.name
placeholder.placeholder_format.type
placeholder.insert_chart(wb.sheets('Charts').ChartObjects('Figure1').Copy)
</code></pre>
<p><strong>Requirements:</strong></p>
<ol>
<li><p>I would like to paste the excel chart as an excel object (rather than as a picture) as my colleague likes to be able to click on data series to get the underlying values etc.</p>
</li>
<li><p>I would like to paste the chart inside a placeholder (rather than on top of it).</p>
</li>
<li><p>I don't want to generate a new chart in PowerPoint as most examples do.  A colleague has prepared an excel dashboard and formatted a number of charts as desired, and doing it all from scratch would be laborious.</p>
</li>
<li><p>I don't want to do this in VBA.  I would like to do it in python as it is part of a broader program.</p>
</li>
<li><p>I don't want to use something like <code>plotnine</code>, <code>seaborn</code>, <code>matplotlib</code> etc.  As per 1, my colleague likes excel objects that he can click on to show underlying values.  This can't be done in these programs.</p>
</li>
</ol>
<p>Python should be able to do this.  Any ideas?</p>",python|excel|pywin32|win32com|python-pptx,"<p>You're very close! <code>Copy</code> and <code>Paste</code> are methods, so to call them you need to add brackets after them, e.g. <code>Copy()</code>.</p>
<p>To get slide 2, you need to use the <code>Item</code> method of the <code>Slides</code> class: <code>ppt.Slides.Item(2)</code></p>
<pre class=""lang-py prettyprint-override""><code>import win32com.client as win32

xlApp = win32.Dispatch('Excel.Application')
wb = xlApp.Workbooks.Open(outputPath+'Chart Pack.xlsb')

pptApp = win32.Dispatch('PowerPoint.Application')
ppt = pptApp.Presentations.Open(template)

slide_num = 3
LEFT_PLACEHOLDER = 3
RIGHT_PLACEHOLDER = 2

# Figure1
window.View.GotoSlide(slide_num)
wb.sheets('Charts').ChartObjects('Figure1').Copy()
ppt.Slides.Item(slide_num).Shapes.Paste().Select()
window.Selection.Cut()
ppt.Slides.Item(slide_num).Shapes(LEFT_PLACEHOLDER).Select()
window.View.Paste()

# Figure2
window.View.GotoSlide(slide_num)
wb.sheets('Charts').ChartObjects('Figure2').Copy()
ppt.Slides.Item(slide_num).Shapes.Paste().Select()
window.Selection.Cut()
ppt.Slides.Item(slide_num).Shapes(RIGHT_PLACEHOLDER).Select()
window.View.Paste()
</code></pre>
<p>EDIT: I was able to paste the chart directly into the placeholder after fiddling around a bit trying to implement the solution in this <a href=""https://stackoverflow.com/a/60061100/3589122"">answer</a>. It a bit hacky, but it works.</p>",1
672,70980938,"when a method returns an instance variable, do i use a deep copy or a shallow copy to copy the variable?","<p>I'm having trouble understanding the difference between a deep copy and a shallow copy. Working on an assignment and when a method returns an instance variable, we're meant to return a copy of it to prevent aliasing, but this concept wasn't really reviewed in class and the professors are honestly unhelpful, so I'm utterly lost.</p>",python|class|copy|instance-variables|deep-copy,"<p>who explains better than python itself :</p>
<blockquote>
<p><strong>The difference between shallow and deep copying</strong> is only relevant for
compound objects (objects that contain other objects, like lists or
class instances):</p>
<p><strong>A shallow copy</strong> constructs a new compound object and then (to the
extent possible) inserts references into it to the objects found in
the original.</p>
<p><strong>A deep copy</strong> constructs a new compound object and then, recursively,
inserts copies into it of the objects found in the original.</p>
<p>Two problems often exist with deep copy operations that don’t exist
with shallow copy operations:</p>
<p>Recursive objects (compound objects that, directly or indirectly,
contain a reference to themselves) may cause a recursive loop.</p>
<p>Because deep copy copies everything it may copy too much, such as data
which is intended to be shared between copies.</p>
<p>The deepcopy() function avoids these problems by:</p>
<p>keeping a memo dictionary of objects already copied during the current
copying pass; and</p>
<p>letting user-defined classes override the copying operation or the set
of components copied.</p>
</blockquote>
<p><em>Source : <a href=""https://docs.python.org/3/library/copy.html"" rel=""nofollow noreferrer"">Python</a></em></p>
<hr />
<p>Simple explanation is deep copies will change when the original variable changes because they use the same memory location, but shallow copies are like separate from the original variable.</p>
<pre><code>myList = [1,2,3,4,5]

DeepList = myList # Deep Copy (uses the same memory location)
myList[0] = 5

print(DeepList) # [5, 2, 3, 4, 5]


anotherList = [1,2,3,4,5]
ShallowList = anotherList[:]

anotherList[0] = 5

print(anotherList) # [5, 2, 3, 4, 5]
print(ShallowList) # [1, 2, 3, 4, 5]
</code></pre>
<p>you can convert a list from Deep-Copy to Shallow-Copy using <code>[:]</code> and for dicts you can use <code>.copy()</code></p>
<p><strong>example :</strong></p>
<pre><code>myList = [1,2,3,4,5]
myDict = {'firstname':'Abolfazl','lastname':'ghaemi'}

myShallowListCopy = myList[:]
myShallowDictCopy = myDict.copy()
</code></pre>
<blockquote>
<p><strong>Shallow Copies are much faster than deep copies</strong></p>
</blockquote>",1
673,70772637,Pandas Inner Join with axis is one,"<p>I was working with inner join using concat in pandas.
Using two DataFrames as below:-</p>
<pre><code>df1 = pd.DataFrame([['a',1],['b',2]], columns=['letter','number'])

df3 = pd.DataFrame([['c',3,'cat'],['d',4,'dog']],
                    columns=['letter','number','animal'])

pd.concat([df1,df3], join='inner')
</code></pre>
<p>The out is below</p>
<pre><code>letter  number
0   a   1
1   b   2
0   c   3
1   d   4
</code></pre>
<p>But after using axis=1 the output is as below</p>
<pre><code>pd.concat([df1,df3], join='inner', axis=1)

letter  number  letter  number  animal
0   a   1   c   3   cat
1   b   2   d   4   dog
</code></pre>
<p>Why it is showing animal column while doing inner join when axis=1?</p>",python|pandas|join|concatenation,"<p>The default value of the axis is 0. So in the first concat call axis=0 and over there concatenation happens in rows. When you set axis=1 the operation is similar to</p>
<pre><code>df1.merge( df3, how=&quot;inner&quot;, left_index=True, right_index=True)
</code></pre>",0
674,70772637,Pandas Inner Join with axis is one,"<p>I was working with inner join using concat in pandas.
Using two DataFrames as below:-</p>
<pre><code>df1 = pd.DataFrame([['a',1],['b',2]], columns=['letter','number'])

df3 = pd.DataFrame([['c',3,'cat'],['d',4,'dog']],
                    columns=['letter','number','animal'])

pd.concat([df1,df3], join='inner')
</code></pre>
<p>The out is below</p>
<pre><code>letter  number
0   a   1
1   b   2
0   c   3
1   d   4
</code></pre>
<p>But after using axis=1 the output is as below</p>
<pre><code>pd.concat([df1,df3], join='inner', axis=1)

letter  number  letter  number  animal
0   a   1   c   3   cat
1   b   2   d   4   dog
</code></pre>
<p>Why it is showing animal column while doing inner join when axis=1?</p>",python|pandas|join|concatenation,"<p>In <em>Pandas.concat()</em></p>
<p><strong>axis</strong> argument defines whether to concat the dataframes based on <strong>index</strong> or <strong>columns</strong>.</p>
<pre><code>axis=0 // based on index (default value)
axis=1 // based on columns
</code></pre>
<p>when you Concatenated df1 and df3, it <em><strong>uses index to combine</strong></em> dataframes and thus output is</p>
<pre><code>letter  number
0   a   1
1   b   2
0   c   3
1   d   4
</code></pre>
<p>But when you used axis=1, pandas combined the data <em><strong>based on columns</strong></em>.
thats why the output is</p>
<pre><code>letter  number  letter  number  animal
0   a   1   c   3   cat
1   b   2   d   4   dog
</code></pre>
<blockquote>
<p>EDIT:</p>
</blockquote>
<p>you asked <code>But inner join only join same column right? Then why it is showing 'animal' column?</code></p>
<p>So, Because right now you have 2 rows in both the dataframes and <code>join</code> only works in indexes.</p>
<p>For explaining to you, I have added another row in df3
Let's suppose df3 is</p>
<pre><code>   0  1     2
0  c  3   cat
1  d  4   dog
2  e  5  bird
</code></pre>
<p>Now, If you concat the df1 and df3</p>
<p><code>pd.concat([df1,df3], join='inner', axis=1)</code></p>
<pre><code>  letter  number  0  1    2
0      a       1  c  3  cat
1      b       2  d  4  dog
</code></pre>
<p><code>pd.concat([df1,df3], join='outer', axis=1)</code></p>
<pre><code>  letter  number  0  1     2
0      a     1.0  c  3   cat
1      b     2.0  d  4   dog
2    NaN     NaN  e  5  bird
</code></pre>
<p>As you can see, in inner join only <code>0 and 1</code> indexes are in output
but in outer join, all the indexes are in output with <code>NAN</code> values.</p>",2
675,71004707,Unable to Install Pillow for Tkinter via PIP,"<p>I tried to install <strong>Pillow</strong> library for my Tkinter project but when I try to install it, it gives me the following error.</p>
<p><code>Fatal error in launcher: Unable to create process using &quot;C:\Python310\python.exe&quot;  &quot;C:\Python310\Scripts\pip.exe&quot; install Pillow : The system cannot find the file specified.</code></p>
<p>I have the latest Python version from the official website and I also have pip manually installed during my Win7 days. Even debugging ain't helping. It gives the same error.</p>",python|powershell|tkinter,"<p>are you using &quot;pip&quot; or &quot;conda&quot;?</p>
<p>try</p>
<pre><code>conda install pillow
</code></pre>
<p>or</p>
<pre><code>pip install pillow
</code></pre>",0
676,71004707,Unable to Install Pillow for Tkinter via PIP,"<p>I tried to install <strong>Pillow</strong> library for my Tkinter project but when I try to install it, it gives me the following error.</p>
<p><code>Fatal error in launcher: Unable to create process using &quot;C:\Python310\python.exe&quot;  &quot;C:\Python310\Scripts\pip.exe&quot; install Pillow : The system cannot find the file specified.</code></p>
<p>I have the latest Python version from the official website and I also have pip manually installed during my Win7 days. Even debugging ain't helping. It gives the same error.</p>",python|powershell|tkinter,"<p>You need unofficial python binaries version of pillow. Go to this <a href=""https://www.lfd.uci.edu/%7Egohlke/pythonlibs/#pillow"" rel=""nofollow noreferrer"">website</a>. Then press <code>F3</code>. then in search box, type <code>pillow</code>. then click on the hyperlink which is highlighted by the browser. then download a <code>wheel</code> according to your os and python version. after download, open cmd in the download folder. to do that press <code>SHIFT + RIGHT CLICK</code> and click on <code>Open CMD Here</code>. then on the cmd, type <code>pip3 install &lt;your downloaded file name&gt;</code> It should work. I used this trick for Installing <code>PyAudio</code> in Python 3.10 on Windows 10.<br />
TIP: while typing 3/4 letters of the file name, press <code>TAB</code> to autocomplete</p>",0
677,70809673,Finding the index of a number in a list in python,"<p>So I'm working on an easy leetcode problem and I've run into this small error. When 2 of the same number are in a list it refuses to add them together. I made it where it would ignore it if it was the same index but that has the effect of ignoring 2 of the same numbers for some reason. Here is the code</p>
<pre><code>def twoSum(nums, target):

    for x in nums:
        for z in nums:
            if nums.index(z) == nums.index(x):
                pass
            else:
                res = x + z
                if res == target:
                    result = [nums.index(x), nums.index(z)]
                    return result


newList = twoSum([3,2,3,7], 6)

print(newList)
</code></pre>
<p>Is there anything I'm doing wrong here that makes it pass over both 3's and return None?</p>",python,"<p>This version eliminates the issue of having repeat index and also avoids adding a lower index to a current index (to avoid duplication). as in your code, it stops when it finds the first combination that adds to the target sum.</p>
<pre><code>def twoSum(nums, target):

    for pos1, value in enumerate(nums):
        for pos2 in range(pos1+1, len(nums)):
            # print(pos1, pos2) &lt;- this may help analyze the code
            res = value + nums[pos2]
            if res == target:
                result = [value, nums[pos2]]
                return result

newList = twoSum([3, 2, 3, 7], 6)

print(newList)
</code></pre>",0
678,70809673,Finding the index of a number in a list in python,"<p>So I'm working on an easy leetcode problem and I've run into this small error. When 2 of the same number are in a list it refuses to add them together. I made it where it would ignore it if it was the same index but that has the effect of ignoring 2 of the same numbers for some reason. Here is the code</p>
<pre><code>def twoSum(nums, target):

    for x in nums:
        for z in nums:
            if nums.index(z) == nums.index(x):
                pass
            else:
                res = x + z
                if res == target:
                    result = [nums.index(x), nums.index(z)]
                    return result


newList = twoSum([3,2,3,7], 6)

print(newList)
</code></pre>
<p>Is there anything I'm doing wrong here that makes it pass over both 3's and return None?</p>",python,"<pre><code>def twoSum(nums, target):
    for i, x in enumerate(nums):
        for j, z in enumerate(nums):
            if i == j:
                continue
            res = x + z
            if res == target:
                result = [i, j]
                return result
</code></pre>
<ul>
<li>You can use <strong>enumerate</strong> to access the indexes.</li>
<li>You can use <strong>continue</strong> instead of pass, but it's just a preference.</li>
<li>If you use <strong>continue</strong> you don't need the else since the execution is gonna jump to the next iteration when continue is hit.</li>
</ul>",1
679,71001884,Discord.Py Assigning values to variables,"<pre class=""lang-py prettyprint-override""><code>@commands.command()
    async def reroll(self, ctx, channel: discord.TextChannel, id_ : int):

      try:
        new_gaw_msg = await ctx.channel.fetch_message(id_)
      except:
        await ctx.send(&quot;Failed to parse command. ID was incorrect.&quot;)
        return
        
      winners = int(winners.replace(&quot;W&quot;,&quot;&quot;))
      users_mention = []
      for i in range(winners):
        users = await new_gaw_msg.reactions[0].users().flatten()
        users.pop(users.index(self.client.user))
        winner = random.choice(users)
        users_mention.append(winner.mention)
        users.remove(winner)
        
        displayed_winners = &quot;,&quot;.join(users_mention)

      await ctx.send(f&quot;Congragulations {displayed_winners}! You have won the **{prize}**.\n{gaw_msg.jump_url}&quot;)
</code></pre>
<p>variable winners is referenced before assignment. I gave value to winners before using it so idk why it doesnt work. Any help is appreciated :D</p>",python|datetime|variables|timer|discord.py,"<p>You are trying to perform an operation on the <code>winners</code> variable before it was created.</p>
<p>There is a thing called name &quot;namespace&quot;. Basically, variables created globally (without indent) and variables created locally (inside functions or loops) are different variables.</p>
<p>If you want to specifically use a global variable inside the function, you should first declare that the variable will be global by writing <code>global variable_name</code> inside the function. And only then you can perform operations with it.</p>
<p>There are some hidden dangers with the usage of global variables, so I suggest <a href=""https://www.geeksforgeeks.org/namespaces-and-scope-in-python/"" rel=""nofollow noreferrer"">you read more about python namespaces</a> and <a href=""https://www.programiz.com/python-programming/global-keyword"" rel=""nofollow noreferrer"">global keyword</a> by yourself.</p>",0
680,70857617,How can you filter a list of dictionary in python with list as value,"<p>#List of dictionary</p>
<pre><code>List_of_dict = [
    {'id': 1,'Name':Tom, 'Data':[10,20,30,40,50],'Value':[1,2,3,4,5] },
    {'id': 2,'Name':Jack, 'Data':[10,20,30,],'Value':[3,4] },
    {'id': 3,'Name':Nancy, 'Data':[10,20],'Value':[3,4,5] },
    {'id': 4,'Name':Jack, 'Data':[20,],'Value':[1]}
]
</code></pre>
<p>Quest : Want to create a filter for data 30 and value 3
Expected - 1:</p>
<pre><code>Output_dict = [{'id': 1,'Name':Tom, 'Data':[10,20,30,40,50],'Value':[1,2,3,4,5] },{'id': 2,'Name':Jack, 'Data':[10,20,30,],'Value':[3,4]
</code></pre>
<p>used this &gt;&gt;</p>
<pre><code>Output_dict = [out for out in List_of_dict if  out['Data'] == [30] and out['Value'] == [3] ]
</code></pre>
<p>I don't get desired output with above</p>
<p>Also how do I create filter for Data: 20' and Value:3 or 4
Expected - 2:</p>
<pre><code>[{'id': 1,'Name':Tom, 'Data':[10,20,30,40,50],'Value':[1,2,3,4,5] },{'id': 2,'Name':Jack, 'Data':[10,20,30,],'Value':[3,4] },{'id': 3,'Name':Nancy, 'Data':[10,20],'Value':[3,4,5] }]
</code></pre>",python|dictionary,"<p>You are testing against lists that have no match in your data.</p>
<p>Use e.g.</p>
<pre><code>Output_dict = [out for out in List_of_dict if  30 in out['Data'] and 3 in out['Value']]
</code></pre>",0
681,70857617,How can you filter a list of dictionary in python with list as value,"<p>#List of dictionary</p>
<pre><code>List_of_dict = [
    {'id': 1,'Name':Tom, 'Data':[10,20,30,40,50],'Value':[1,2,3,4,5] },
    {'id': 2,'Name':Jack, 'Data':[10,20,30,],'Value':[3,4] },
    {'id': 3,'Name':Nancy, 'Data':[10,20],'Value':[3,4,5] },
    {'id': 4,'Name':Jack, 'Data':[20,],'Value':[1]}
]
</code></pre>
<p>Quest : Want to create a filter for data 30 and value 3
Expected - 1:</p>
<pre><code>Output_dict = [{'id': 1,'Name':Tom, 'Data':[10,20,30,40,50],'Value':[1,2,3,4,5] },{'id': 2,'Name':Jack, 'Data':[10,20,30,],'Value':[3,4]
</code></pre>
<p>used this &gt;&gt;</p>
<pre><code>Output_dict = [out for out in List_of_dict if  out['Data'] == [30] and out['Value'] == [3] ]
</code></pre>
<p>I don't get desired output with above</p>
<p>Also how do I create filter for Data: 20' and Value:3 or 4
Expected - 2:</p>
<pre><code>[{'id': 1,'Name':Tom, 'Data':[10,20,30,40,50],'Value':[1,2,3,4,5] },{'id': 2,'Name':Jack, 'Data':[10,20,30,],'Value':[3,4] },{'id': 3,'Name':Nancy, 'Data':[10,20],'Value':[3,4,5] }]
</code></pre>",python|dictionary,"<p>The problem with your code is that it's searching for an exact match: <code>out['Data'] == [30]</code>. You need to use <code>in</code> instead like <code>30 in out['Data']</code>.</p>
<p>So it could be changed to:</p>
<pre><code>out1 = [d for d in List_of_dict if (30 in d.get('Data', [])) and (3 in d.get('Value', []))]
</code></pre>
<p>Output:</p>
<pre><code>[{'id': 1,
  'Name': 'Tom',
  'Data': [10, 20, 30, 40, 50],
  'Value': [1, 2, 3, 4, 5]},
 {'id': 2, 'Name': 'Jack', 'Data': [10, 20, 30], 'Value': [3, 4]}]
</code></pre>
<p>For the second case, you can use <code>set.intersection</code> to check if 3 or 4 exist in any <code>d['Value']</code>:</p>
<pre><code>out2 = [d for d in List_of_dict if (20 in d.get('Data', [])) and (set(d.get('Value', [])) &amp; {3, 4})]
</code></pre>
<p>Output:</p>
<pre><code>[{'id': 1,
  'Name': 'Tom',
  'Data': [10, 20, 30, 40, 50],
  'Value': [1, 2, 3, 4, 5]},
 {'id': 2, 'Name': 'Jack', 'Data': [10, 20, 30], 'Value': [3, 4]},
 {'id': 3, 'Name': 'Nancy', 'Data': [10, 20], 'Value': [3, 4, 5]}]
</code></pre>",0
682,70718643,tf.keras.utils.image_dataset_from_directory() can't find images exception,"<p>I have the following code to read jpeg images from a directory:</p>
<pre><code>data_dir_str = &quot;./photo/pults/samsung_small&quot;
data_dir = pathlib.Path(data_dir_str)
image_count = len(list(data_dir.glob('*.*')))
print('images in directory: ' + str(image_count)) # 12 files in directory

sams_pults = list(data_dir.glob('*.jpg'))
img = PIL.Image.open(str(sams_pults[0]))
img_width, img_height = img.size
#img.show()  # This works well - shows image

batch_size = 10

train_ds = tf.keras.utils.image_dataset_from_directory(
  data_dir_str, #data_dir,
  validation_split=0.2,
  subset=&quot;training&quot;,
  #seed=123,
  image_size=(img_height, img_width),
  batch_size=batch_size
)
</code></pre>
<p>Even though<code>img.show()</code> can display the images, <code>tf.keras.utils.image_dataset_from_directory()</code> gives me the error:</p>
<blockquote>
<p>No images found in directory {directory}. Allowed formats:
{ALLOWLIST_FORMATS}</p>
</blockquote>",python|tensorflow|keras,"<p>I have found the solution:</p>
<p><code>./photo/pults/samsung_small</code> -&gt; <code>./photo/pults</code></p>
<p>The path needs to be set not as a dir where images are placed but one level above. Because the dir name is used for classification.</p>",0
683,2301534,Python API for VirtualBox,"<p>I have made a command-line interface for virtualbox such that the virtualbox can be controlled from a remote machine. now I am trying to implement the commmand-line interface using python virtualbox api. For that I have downloaded the pyvb package (python api documentation shows functions that can be used for implementing this under pyvb package). but when I give <code>pyvb.vb.VB.startVM(instance of VB class,pyvb.vm.vbVM)</code>  </p>

<p>SERVER SIDE CODE IS</p>

<pre><code>from pyvb.constants import *

from pyvb.vm import *

from pyvb.vb import *

import xpcom

import pyvb

import os

import socket

import threading

class ClientThread ( threading.Thread ):

   # Override Thread's __init__ method to accept the parameters needed:
   def __init__ ( self, channel, details ):

      self.channel = channel
      self.details = details
      threading.Thread.__init__ ( self )

   def run ( self ):

      print 'Received connection:', self.details [ 0 ]
      while 1:     
         s= self.channel.recv ( 1024 )
         if(s!='end'):
            if(s=='start'):
              v=VB() 
              pyvb.vb.VB.startVM(v,pyvb.vm.vbVM)

         else:
           self.channel.close()
           break
      print 'Closed connection:', self.details [ 0 ]


server = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
server.bind ( ( '127.0.0.1', 2897 ) )
server.listen ( 5 )

while True:
   channel, details = server.accept()
   ClientThread ( channel, details ).start()
</code></pre>

<p>it shows an error</p>

<pre><code>Exception in thread Thread-1:
Traceback (most recent call last):
  File ""/usr/lib/python2.5/threading.py"", line 486, in __bootstrap_inner
    self.run()
  File ""news.py"", line 27, in run
    pyvb.vb.VB.startVM(v,pyvb.vm.vbVM.getUUID(m))
  File ""/usr/lib/python2.5/site-packages/pyvb-0.0.2-py2.5.egg/pyvb/vb.py"", line 65, in startVM
    cmd='%s %s'%(VB_COMMAND_STARTVM, vm.getUUID())
AttributeError: 'str' object has no attribute 'getUUID'
</code></pre>",python|api|virtualbox,"<p>You might want to check the official Python API from Virtualbox. pyvb seems like a wrapper written by a third party.</p>

<p>The virtualbox sdk contains Python examples and full API documentation. </p>",3
684,2026788,Python: Get importing module's details from within imported module,"<p>I'm writing a piece of reusable code to import where I need it, but it needs some info about what is importing it. I have a workaround that does what I want, but it's a bit ugly. Is there a better way?</p>

<p>Here is a simplified version of what I'm doing.</p>

<p><strong>What I want:</strong> Import a method and use it, but look at f in mod2. It needs some info from the importing module.</p>

<p>mod1:</p>

<pre><code>from mod2 import f
f(...)
</code></pre>

<p>mod2:</p>

<pre><code>from things_i_want import parent_module, importing_module
def f(*args, **kwargs):
    from importing_module.parent_module import models
    # ... do some stuff with it, including populating v with a string

    v = 'some_string'
    m = getattr(importing_module, v, None)
    if callable(m)
        return m(*args, **kwargs)
</code></pre>

<p><strong>My ugly workaround:</strong></p>

<p>mod1:</p>

<pre><code>from mod2 import f as _f
def f(*a, **k):return _f(__name__, globals(), *a, **k)
f(...)
</code></pre>

<p>mod2:</p>

<pre><code>def f(module_name, globs, *args, **kwargs):
    # find parent modules path
    parent_module_path = module_name.split('.')[0:-1]
    # find models modules path
    models_path = parent_module_path + ['models',]
    # import it
    models = __import__('.'.join(models_path), {}, {}, [''])
    # ... do some stuff with it, including populating v with a string

    v = 'some_string'
    if v in globs:
        return globs[v](*args, **kwargs)
</code></pre>",python|django|rest|import,"<p>That's a bad idea, because modules are cached.</p>

<p>So if another module, say, <code>mod3.py</code>, also imports <code>mod2</code>, it will get the same <code>mod2</code> object of the first time. The module is not reimported.</p>

<p>Maybe you imported some other module that imported <code>mod2</code> before importing <code>mod2</code> yourself, then you're not the one importing <code>mod2</code> anymore. Modules are imported only once.</p>

<p>So instead of trying to get who imported the module, you should use another, reusable approach. Perhaps using classes and passing the instance around?</p>",6
685,1431424,Accessing Plist items in a dict,"<p>I have a class in a module I that reads a plist (XML) file and returns a dict. This is extremely convenient because I can say something like:</p>

<pre><code>Data.ServerNow.Property().DefaultChart
</code></pre>

<p>This returns a property dictionary, specifically the value for <code>DefaultChart</code>. Very elegant.
However, assembling a dictionary this way fails:</p>

<pre><code>dict={'Data': 'text1', 'Name':'text2', 'Place':'text3]}
</code></pre>

<p><code>dict</code> looks exactly like the Plist dict.
But when I say</p>

<pre><code>print TextNow.Data().Name
</code></pre>

<p>I get error</p>

<pre><code> 'dict' object has no attribute 'Name'
</code></pre>

<p>But if I say</p>

<pre><code>print TextNow.Data()['Name']
</code></pre>

<p>suddenly it works!</p>

<p>Can someone explain this behavior? Is there a way to  convert a dict to an XML-ish dict?</p>",python|xml|namespaces|plist,"<p>It doesn't work because the dot operator is not proper accessor syntax for python dictionaries.  You;re trying to treat it as an object and access a property, rather than accessing a data member of the data structure.</p>",2
686,1431424,Accessing Plist items in a dict,"<p>I have a class in a module I that reads a plist (XML) file and returns a dict. This is extremely convenient because I can say something like:</p>

<pre><code>Data.ServerNow.Property().DefaultChart
</code></pre>

<p>This returns a property dictionary, specifically the value for <code>DefaultChart</code>. Very elegant.
However, assembling a dictionary this way fails:</p>

<pre><code>dict={'Data': 'text1', 'Name':'text2', 'Place':'text3]}
</code></pre>

<p><code>dict</code> looks exactly like the Plist dict.
But when I say</p>

<pre><code>print TextNow.Data().Name
</code></pre>

<p>I get error</p>

<pre><code> 'dict' object has no attribute 'Name'
</code></pre>

<p>But if I say</p>

<pre><code>print TextNow.Data()['Name']
</code></pre>

<p>suddenly it works!</p>

<p>Can someone explain this behavior? Is there a way to  convert a dict to an XML-ish dict?</p>",python|xml|namespaces|plist,"<p>You can use getattr redefinition to treat dictionary keys as attributes, e.g.:</p>

<pre><code>class xmldict(dict):
    def __getattr__(self, attr):
        try:
            return object.__getattribute__(self, attr)
        except AttributeError:
            if attr in self:
                return self[attr]
            else:
                raise
</code></pre>

<p>So, for example if you will have following dict:</p>

<pre><code>dict_ = {'a':'some text'}
</code></pre>

<p>You can do so:</p>

<pre><code>&gt;&gt; print xmldict(dict_).a
some text
&gt;&gt; print xmldict(dict_).NonExistent
Traceback (most recent call last):
  ...
AttributeError: 'xmldict' object has no attribute 'NonExistent'
</code></pre>",1
687,1609749,Python 3 xmlrpc for remote objects,"<p>I am trying to implement a remote object implementation using xmlrpc, and python 3.
I have tried the example at <a href=""http://docs.python.org/3.1/library/xmlrpc.server.html?highlight=xmlrpc#simplexmlrpcserver-example"" rel=""nofollow noreferrer"">http://docs.python.org/3.1/library/xmlrpc.server.html?highlight=xmlrpc#simplexmlrpcserver-example</a>, but it only works to and from localhost, how can I get it to work to and from internal IPs?</p>",python|python-3.x|remoteobject,"<p>Perhaps I'm misunderstanding your question, but... Have you tried running the server code on another machine, and the client code (changing the 'localhost' value in the first line of the client code <code>s = xmlrpc.client.ServerProxy('http://localhost:8000')</code> to the IP address of the remote server?</p>",0
688,1609749,Python 3 xmlrpc for remote objects,"<p>I am trying to implement a remote object implementation using xmlrpc, and python 3.
I have tried the example at <a href=""http://docs.python.org/3.1/library/xmlrpc.server.html?highlight=xmlrpc#simplexmlrpcserver-example"" rel=""nofollow noreferrer"">http://docs.python.org/3.1/library/xmlrpc.server.html?highlight=xmlrpc#simplexmlrpcserver-example</a>, but it only works to and from localhost, how can I get it to work to and from internal IPs?</p>",python|python-3.x|remoteobject,"<p>Update the localhost value to the following:</p>

<p>For the server : <code>s = SimpleXMLRPCServer((""ServerIp"", 8000))</code></p>

<p>For the client : <code>s = xmlrpc.client.ServerProxy(""http://ServerIp:8000/"")</code></p>",1
689,1911396,python checking for files,"<p>learning python there. I want to write a script to check if my webserver has picture named  in the root 123.jpg</p>

<p>I have:</p>

<pre><code>import urllib2
numeruks=100
adresiuks=""http://localhost/"" + str(numeruks) +"".jpg""
try:
    if numeruks &lt; 150:
    numeruks = numeruks + 1
    urllib2.urlopen(adresiuks).read()
</code></pre>

<p>reading manuals all day, can't solve it :(</p>",python|urllib2,"<p>After you increment numeruks you should reset the adresiuks.</p>

<p>I.E.:</p>

<pre><code>adresiuks=""http://localhost/"" + str(numeruks) + "".jpg""  
try:  
    if numeruks &lt; 150:  
        numeruks = numeruks + 1  
        adresiuks = ""http://localhost/"" + str(numeruks) + "".jpg""  
        print adresiuks  
        urllib2.urlopen(adresiuks).read()  
</code></pre>

<p>Double check the file is available using your web browser.  </p>

<p>For example my web server is listening on port 8000 so I have to add the port, i.e. 
<code>http://localhost:8000/123.jpg</code>.</p>

<p>Here is a simple running script, because it is a .jpg it will be garbage that is printed:</p>

<pre><code>import urllib2    
numeruks = 123    
adresiuks = ""http://localhost/"" + str(numeruks) + "".jpg""    
print adresiuks    
thefile = urllib2.urlopen(adresiuks).read()
print thefile    
</code></pre>",0
690,1911396,python checking for files,"<p>learning python there. I want to write a script to check if my webserver has picture named  in the root 123.jpg</p>

<p>I have:</p>

<pre><code>import urllib2
numeruks=100
adresiuks=""http://localhost/"" + str(numeruks) +"".jpg""
try:
    if numeruks &lt; 150:
    numeruks = numeruks + 1
    urllib2.urlopen(adresiuks).read()
</code></pre>

<p>reading manuals all day, can't solve it :(</p>",python|urllib2,"<p>Is this code standing on its own?  If so, you're missing a loop. Also, as codeape said, the indentation is wrong and you need an <code>except</code> or a <code>finally</code>.</p>

<p>If you want to check all of the numbers between 100 and 150, you'll need to loop over them.  Your code as it stands now only updates <code>numeruks</code> once, and never updates <code>adresiuks</code> at all.  If you want to check for an error with a <code>try</code>, you need to follow it up with an <code>except</code>, which can be as simple as <code>pass</code> (but will more likely be <code>continue</code>).</p>

<p>I'm a little hesitant to give you the actual code, as if you're learning, you'll probably learn it better if you figure it out yourself. ;)</p>",1
691,1911396,python checking for files,"<p>learning python there. I want to write a script to check if my webserver has picture named  in the root 123.jpg</p>

<p>I have:</p>

<pre><code>import urllib2
numeruks=100
adresiuks=""http://localhost/"" + str(numeruks) +"".jpg""
try:
    if numeruks &lt; 150:
    numeruks = numeruks + 1
    urllib2.urlopen(adresiuks).read()
</code></pre>

<p>reading manuals all day, can't solve it :(</p>",python|urllib2,"<p>You can test for 404 in your attempts to access the URL (and without even having to issue a <code>read()</code>):</p>

<pre><code>import urllib2

n = 123

try:
    url = 'http://localhost/%d.jpg' % n
    urllib2.urlopen(url)
except urllib2.HTTPError, e:
    if e.code == 404:
        print '%d.jpg was not found' % n
    else:
        raise  # if the issue wasn't a 404, then re-raise the exception
</code></pre>",1
692,1868213,python permission error,"<p>I have a file <code>a.txt</code> in Mac OS, which has write perms to everybody:</p>

<pre><code>sh-3.2# ls -hal a.txt 
-rw-rw-rw-  1 root  wheel     0B Dec  8 11:34 a.txt
sh-3.2# pwd
/var/root
</code></pre>

<p>however in python it gives me an error:</p>

<pre><code>&gt;&gt;&gt; fob=open(""/var/root/a.txt"",""w"")

Traceback (most recent call last):
  File ""&lt;pyshell#0&gt;"", line 1, in &lt;module&gt;
    fob=open(""/var/root/a.txt"",""w"")
IOError: [Errno 13] Permission denied: '/var/root/a.txt'
</code></pre>

<p>question: why?</p>",python|permissions,<p>I'm going to guess that the permissions on the <code>/var/root</code> directory are too strict for the user you are running as.</p>,2
693,1868213,python permission error,"<p>I have a file <code>a.txt</code> in Mac OS, which has write perms to everybody:</p>

<pre><code>sh-3.2# ls -hal a.txt 
-rw-rw-rw-  1 root  wheel     0B Dec  8 11:34 a.txt
sh-3.2# pwd
/var/root
</code></pre>

<p>however in python it gives me an error:</p>

<pre><code>&gt;&gt;&gt; fob=open(""/var/root/a.txt"",""w"")

Traceback (most recent call last):
  File ""&lt;pyshell#0&gt;"", line 1, in &lt;module&gt;
    fob=open(""/var/root/a.txt"",""w"")
IOError: [Errno 13] Permission denied: '/var/root/a.txt'
</code></pre>

<p>question: why?</p>",python|permissions,"<p>Just a wild guess: since the file already exists there, is it possible that opening with mode ""w+"" or ""r+"" instead of ""w"" allows you to write to the file?</p>

<p>I don't have an OS X computer available, and it's most probable that it's an issue of the directory permissions, however I'd try the mode change, just in case.</p>",0
694,1868213,python permission error,"<p>I have a file <code>a.txt</code> in Mac OS, which has write perms to everybody:</p>

<pre><code>sh-3.2# ls -hal a.txt 
-rw-rw-rw-  1 root  wheel     0B Dec  8 11:34 a.txt
sh-3.2# pwd
/var/root
</code></pre>

<p>however in python it gives me an error:</p>

<pre><code>&gt;&gt;&gt; fob=open(""/var/root/a.txt"",""w"")

Traceback (most recent call last):
  File ""&lt;pyshell#0&gt;"", line 1, in &lt;module&gt;
    fob=open(""/var/root/a.txt"",""w"")
IOError: [Errno 13] Permission denied: '/var/root/a.txt'
</code></pre>

<p>question: why?</p>",python|permissions,<p>It's likely that you don't have write permission on the directory that the file is in.</p>,1
695,2280881,A list vs. tuple situation in Python,"<p>Is there a situation where the use of a list leads to an error, and you must use a tuple instead?</p>

<p>I know something about the properties of both tuples and lists, but not enough to find out the answer to this question. If the question would be the other way around, it would be that lists can be adjusted but tuples don't.</p>",python|list|tuples,"<p>In <strong>string formatting</strong> tuples are mandatory:</p>

<pre><code>""You have %s new %s"" % ('5', 'mails') # must be a tuple, not a list!
</code></pre>

<p>Using a list in that example produces the error ""not enough arguments for format string"", because a list is considered as one argument. Weird but true.</p>",4
696,2280881,A list vs. tuple situation in Python,"<p>Is there a situation where the use of a list leads to an error, and you must use a tuple instead?</p>

<p>I know something about the properties of both tuples and lists, but not enough to find out the answer to this question. If the question would be the other way around, it would be that lists can be adjusted but tuples don't.</p>",python|list|tuples,"<p>Because of their immutable nature, tuples (unlike lists) are <a href=""http://docs.python.org/glossary.html"" rel=""noreferrer"">hashable</a>. This is what allows tuples to be keys in dictionaries and also members of sets. Strictly speaking it is their hashability, not their immutability that counts.</p>

<p>So in addition to the dictionary key answer already given, a couple of other things that will work for tuples but not lists are:</p>

<pre><code>&gt;&gt;&gt; hash((1, 2))
3713081631934410656

&gt;&gt;&gt; set([(1, 2), (2, 3, 4), (1, 2)])
set([(1, 2), (2, 3, 4)])
</code></pre>",10
697,2280881,A list vs. tuple situation in Python,"<p>Is there a situation where the use of a list leads to an error, and you must use a tuple instead?</p>

<p>I know something about the properties of both tuples and lists, but not enough to find out the answer to this question. If the question would be the other way around, it would be that lists can be adjusted but tuples don't.</p>",python|list|tuples,"<p>You can use tuples as dictionary keys, because they are immutable, but you can't use lists. Eg:</p>

<pre><code>d = {(1, 2): 'a', (3, 8, 1): 'b'}  # Valid.
d = {[1, 2]: 'a', [3, 8, 1]: 'b'}  # Error.
</code></pre>",15
698,2027284,+ and += operators are different?,"<pre><code>&gt;&gt;&gt; c = [1, 2, 3]
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3] 43955984
&gt;&gt;&gt; c += c
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3, 1, 2, 3] 43955984
&gt;&gt;&gt; del c
&gt;&gt;&gt; c = [1, 2, 3]
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3] 44023976
&gt;&gt;&gt; c = c + c
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3, 1, 2, 3] 26564048
</code></pre>

<p>What's the difference? are += and + not supposed to be merely syntactic sugar? </p>",python|list|operators,"<p>The += operator appends the second list to the first, but the modification is in-place, so the ID remains the same.</p>

<p>When you use + , a new list is created, and the final ""c"" is a new list, so it has a different ID. </p>

<p>The end result is the same for both operations though.</p>",1
699,2027284,+ and += operators are different?,"<pre><code>&gt;&gt;&gt; c = [1, 2, 3]
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3] 43955984
&gt;&gt;&gt; c += c
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3, 1, 2, 3] 43955984
&gt;&gt;&gt; del c
&gt;&gt;&gt; c = [1, 2, 3]
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3] 44023976
&gt;&gt;&gt; c = c + c
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3, 1, 2, 3] 26564048
</code></pre>

<p>What's the difference? are += and + not supposed to be merely syntactic sugar? </p>",python|list|operators,"<p>For </p>

<pre><code>foo = []
</code></pre>

<p><code>foo+=foo</code> is syntactic sugar for <code>foo.extend(foo)</code> (and not <code>foo = foo + foo</code>)</p>

<p>In the first case, you're just appending members of a list into another (and not creating a new one).</p>

<p>The <code>id</code> changes in the second case because a new list is created by adding two lists. It's incidental that both are the same and the result is being bound to the same identifier than once pointed to them. </p>

<p>If you rephrase this question with different lists (and not c itself), it will probably become clearer.</p>",2
700,2027284,+ and += operators are different?,"<pre><code>&gt;&gt;&gt; c = [1, 2, 3]
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3] 43955984
&gt;&gt;&gt; c += c
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3, 1, 2, 3] 43955984
&gt;&gt;&gt; del c
&gt;&gt;&gt; c = [1, 2, 3]
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3] 44023976
&gt;&gt;&gt; c = c + c
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3, 1, 2, 3] 26564048
</code></pre>

<p>What's the difference? are += and + not supposed to be merely syntactic sugar? </p>",python|list|operators,"<p>They are not same</p>

<p>c += c append a copy of content of c to c itself</p>

<p>c = c + c create new object with c + c</p>",3
701,2027284,+ and += operators are different?,"<pre><code>&gt;&gt;&gt; c = [1, 2, 3]
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3] 43955984
&gt;&gt;&gt; c += c
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3, 1, 2, 3] 43955984
&gt;&gt;&gt; del c
&gt;&gt;&gt; c = [1, 2, 3]
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3] 44023976
&gt;&gt;&gt; c = c + c
&gt;&gt;&gt; print(c, id(c))
[1, 2, 3, 1, 2, 3] 26564048
</code></pre>

<p>What's the difference? are += and + not supposed to be merely syntactic sugar? </p>",python|list|operators,"<p><a href=""http://docs.python.org/reference/datamodel.html#object.__iadd__"" rel=""noreferrer"">docs explain it very well</a>, I think:</p>

<blockquote>
  <p><code>__iadd__()</code>, etc.<br>
  These methods are called to implement the augmented arithmetic assignments (<code>+=, -=, *=, /=, //=, %=, **=, &lt;&lt;=, &gt;&gt;=, &amp;=, ^=, |=</code>). <strong>These methods should attempt to do the operation in-place (modifying <code>self</code>) and return the result (which could be, but does not have to be, <code>self</code>).</strong> If a specific method is not defined, the augmented assignment falls back to the normal methods. For instance, to execute the statement <code>x += y</code>, where <code>x</code> is an instance of a class that has an <code>__iadd__()</code>  method, <code>x.__iadd__(y)</code> is called.</p>
</blockquote>

<p><code>+=</code> are designed to implement in-place modification. in case of simple addition, new object created and it's labelled using already-used name (<code>c</code>).</p>

<p>Also, you'd notice that such behaviour of <code>+=</code> operator only possible because of mutable nature of lists. Integers - an immutable type - won't produce the same result:</p>

<pre><code>&gt;&gt;&gt; c = 3
&gt;&gt;&gt; print(c, id(c))
3 505389080
&gt;&gt;&gt; c += c
&gt;&gt;&gt; print(c, id(c))
6 505389128
</code></pre>",13
702,1397827,How to read formatted input in python?,"<p>I want to read from stdin five numbers entered as follows:</p>

<p>3, 4, 5, 1, 8</p>

<p>into seperate variables a,b,c,d &amp; e.</p>

<p>How do I do this in python?</p>

<p>I tried this:</p>

<pre><code>import string
a=input()
b=a.split(', ')
</code></pre>

<p>for two integers, but it does not work. I get:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Users\Desktop\comb.py"", line 3, in &lt;module&gt;
    b=a.split(', ')
AttributeError: 'tuple' object has no attribute 'split'
</code></pre>

<p>How to do this? and suppose I have not a fixed but a variable number n integers. Then?</p>",python|input,"<pre><code>in = eval(input())

a, b, c, d, e = in
</code></pre>",-3
703,1397827,How to read formatted input in python?,"<p>I want to read from stdin five numbers entered as follows:</p>

<p>3, 4, 5, 1, 8</p>

<p>into seperate variables a,b,c,d &amp; e.</p>

<p>How do I do this in python?</p>

<p>I tried this:</p>

<pre><code>import string
a=input()
b=a.split(', ')
</code></pre>

<p>for two integers, but it does not work. I get:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Users\Desktop\comb.py"", line 3, in &lt;module&gt;
    b=a.split(', ')
AttributeError: 'tuple' object has no attribute 'split'
</code></pre>

<p>How to do this? and suppose I have not a fixed but a variable number n integers. Then?</p>",python|input,"<p><strong>Under Python 2.x only</strong>  (*)</p>

<p>after a = input()</p>

<p>a is a tuple with the 5 values readily parsed! </p>

<p>A quick way to assign these 5 values is</p>

<pre><code>a, b, c, d, e = a
</code></pre>

<p>(*) with Python version 3.0? or for sure 3.1, input() works more like the raw_input() method of 2.x, which makes it less confusing.  (thank you mshsayem to point this out!)</p>",2
704,1397827,How to read formatted input in python?,"<p>I want to read from stdin five numbers entered as follows:</p>

<p>3, 4, 5, 1, 8</p>

<p>into seperate variables a,b,c,d &amp; e.</p>

<p>How do I do this in python?</p>

<p>I tried this:</p>

<pre><code>import string
a=input()
b=a.split(', ')
</code></pre>

<p>for two integers, but it does not work. I get:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Users\Desktop\comb.py"", line 3, in &lt;module&gt;
    b=a.split(', ')
AttributeError: 'tuple' object has no attribute 'split'
</code></pre>

<p>How to do this? and suppose I have not a fixed but a variable number n integers. Then?</p>",python|input,"<p>If you print out a (the variable containing your input) you will find out, that a already contains a tuple. You do not have to split the contents.</p>

<blockquote>
  <p>&gt;&gt;&gt; a = input()<br />
    3, 4, 5, 1, 8<br />
    &gt;&gt;&gt; print(a)<br />
    (3, 4, 5, 1, 8)<br />
    &gt;&gt;&gt; type(a)<br />
    &lt;type 'tuple'><br />
    &gt;&gt;&gt; a[0]<br />
    3<br />
    &gt;&gt;&gt; len(a)<br />
    5</p>
</blockquote>",0
705,1397827,How to read formatted input in python?,"<p>I want to read from stdin five numbers entered as follows:</p>

<p>3, 4, 5, 1, 8</p>

<p>into seperate variables a,b,c,d &amp; e.</p>

<p>How do I do this in python?</p>

<p>I tried this:</p>

<pre><code>import string
a=input()
b=a.split(', ')
</code></pre>

<p>for two integers, but it does not work. I get:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Users\Desktop\comb.py"", line 3, in &lt;module&gt;
    b=a.split(', ')
AttributeError: 'tuple' object has no attribute 'split'
</code></pre>

<p>How to do this? and suppose I have not a fixed but a variable number n integers. Then?</p>",python|input,"<p>Use <a href=""http://docs.python.org/library/functions.html#raw_input"" rel=""noreferrer""><code>raw_input()</code></a> instead of <code>input()</code>.</p>

<pre><code># Python 2.5.4
&gt;&gt;&gt; a = raw_input()
3, 4, 5
&gt;&gt;&gt; a
'3, 4, 5'
&gt;&gt;&gt; b = a.split(', ')
&gt;&gt;&gt; b
['3', '4', '5']
&gt;&gt;&gt; [s.strip() for s in raw_input().split("","")] # one liner
3, 4, 5
['3', '4', '5']
</code></pre>

<p>The misleadingly names <a href=""http://docs.python.org/library/functions.html#input"" rel=""noreferrer""><code>input</code></a> function does not do what you'd expect it to. It actually evaluates the input from stdin as python code.</p>

<p>In your case it turns out that what you then have is a tuple of numbers in <code>a</code>, all parsed and ready for work, but generally you don't really want to use this curious side effect. Other inputs can cause any number of things to happen.</p>

<p>Incidentally, in Python 3 they fixed this, and now the <a href=""http://docs.python.org/3.1/library/functions.html#input"" rel=""noreferrer""><code>input</code></a> function does what you'd expect.</p>

<p>Two more things:</p>

<ol>
<li>You don't need to <code>import string</code> to do simple string manipulations. </li>
<li>Like mjv <a href=""http://#1397838"" rel=""noreferrer"">said</a>, to split a tuple or a list into several variables, you can 'unpack' it. This will not be feasible if you don't know how long the list will be, though.</li>
</ol>

<p>Unpacking:</p>

<pre><code>&gt;&gt;&gt; l = (1,2,3,4,5)
&gt;&gt;&gt; a,b,c,d,e = l
&gt;&gt;&gt; e
5
</code></pre>",16
706,1925898,Django Unhandled Exception,"<p>It is running under DEBUG = True mode. Sometimes it can throw out an error message with traceback information when encounter an error but sometimes it just display the following lines:</p>

<pre><code>Unhandled Exception

An unhandled exception was thrown by the application.
</code></pre>

<p>I have to switch to development server to see detail message.</p>

<p>How can I make it always display traceback message when an error is encountered?</p>",python|django,"<p>Maybe you can use this snippet, this will log exceptions in apache's log:</p>

<p><code>utils.py</code>:</p>

<pre><code>def log_traceback(exception, args):
    import sys, traceback, logging
    exceptionType, exceptionValue, exceptionTraceback = sys.exc_info()
    logging.debug(exception)
    logging.debug(args)
    for tb in traceback.format_exception(exceptionType, exceptionValue, exceptionTraceback):
        logging.debug(tb)
</code></pre>

<p><code>site_logging.py</code>:</p>

<pre><code>import logging
import sys

logger = logging.getLogger('')
logger.setLevel(logging.DEBUG)
handler = logging.StreamHandler(sys.stderr)
handler.setLevel(logging.DEBUG)
formatter = logging.Formatter('%(levelname)-8s %(message)s')
handler.setFormatter(formatter)
logger.addHandler(handler)
</code></pre>

<p>Put it in your <code>settings.py</code> :</p>

<pre><code>import site_logging
</code></pre>

<p>And in your code:</p>

<pre><code>from where.is.your.utils import log_traceback
try:
   `do something`
except Exception, args:
    log_traceback(Exception, args)
</code></pre>",6
707,1925898,Django Unhandled Exception,"<p>It is running under DEBUG = True mode. Sometimes it can throw out an error message with traceback information when encounter an error but sometimes it just display the following lines:</p>

<pre><code>Unhandled Exception

An unhandled exception was thrown by the application.
</code></pre>

<p>I have to switch to development server to see detail message.</p>

<p>How can I make it always display traceback message when an error is encountered?</p>",python|django,"<p>Just connect to the got_request_exception signal and log the exception:</p>

<pre><code>from django.core.signals import got_request_exception
import logging    

def log(*args, **kwargs):
    logging.exception('error')

got_request_exception.connect(log)
</code></pre>

<p>This will log the whole trace. In the dev server, it logs in the console.</p>",10
708,1925898,Django Unhandled Exception,"<p>It is running under DEBUG = True mode. Sometimes it can throw out an error message with traceback information when encounter an error but sometimes it just display the following lines:</p>

<pre><code>Unhandled Exception

An unhandled exception was thrown by the application.
</code></pre>

<p>I have to switch to development server to see detail message.</p>

<p>How can I make it always display traceback message when an error is encountered?</p>",python|django,<p>That's what DEBUG=True is for: to show the full traceback. The idea is that regular users do not want (nor do you want them to) see anything other than a simple error message.</p>,1
709,1925898,Django Unhandled Exception,"<p>It is running under DEBUG = True mode. Sometimes it can throw out an error message with traceback information when encounter an error but sometimes it just display the following lines:</p>

<pre><code>Unhandled Exception

An unhandled exception was thrown by the application.
</code></pre>

<p>I have to switch to development server to see detail message.</p>

<p>How can I make it always display traceback message when an error is encountered?</p>",python|django,"<p>Are you using Apache?<br/>
Just out of interest is this your Production or Dev environment where you want to see the traceback?</p>

<p>From the <a href=""http://www.djangobook.com/en/beta/chapter20/"" rel=""nofollow noreferrer"">DJango Book on security - Exposed error messages</a><br/></p>

<p><i>Users deploying under Apache and mod_python should also make sure they have PythonDebug Off in their Apache conf files; this will ensure that any errors that occur before Django’s had a chance to load won’t be displayed publicly.</i></p>

<p>I assume you want PythonDebug On, this is recommended for Development only.</p>",4
710,1920315,Fill list with objects and sort (Newbie),"<p>I'm new to Python, so please forgive me when using wrong terms :)</p>

<p>I'd like to have a list of several ""objects"", each of them having the same numeric attributes (A, B, C). This list should then be sorted by the value of attribute A.</p>

<p>In Java I'd define a Class with my attributes as members, implement Sortable to compare A, put them all in some sort of List and let <code>Collections.sort</code> sort my list.</p>

<p>The result should ""look"" like that:</p>

<pre><code>A   B   C
1   2   3
1   2   4
2   5   1
3   1   1
</code></pre>

<p>What is the best way to do something like that in Python?</p>",python|list|sorting|object,"<p>Consider using a <code>namedtuple</code> to create your objects. (Have a look at <a href=""https://stackoverflow.com/questions/1831218/is-there-a-tuple-data-structure-in-python"">is-there-a-tuple-data-structure-in-python</a>.)</p>
<blockquote>
<p><a href=""http://docs.python.org/library/collections.html#collections.namedtuple"" rel=""nofollow noreferrer""><code>collections.namedtuple(typename, field_names[, verbose])</code></a></p>
<p>Returns a new tuple subclass named typename. The new subclass is used to create tuple-like objects that have fields accessible by attribute lookup as well as being indexable and iterable. Instances of the subclass also have a helpful docstring (with typename and field_names) and a helpful <strong>repr</strong>() method which lists the tuple contents in a name=value format.</p>
</blockquote>
<p>A simple interactive session with <code>A B C</code> field names. Sorting is straightforward with
<code>key=lambda o:o.A</code>:</p>
<pre><code>&gt;&gt;&gt; import collections
&gt;&gt;&gt; mob=collections.namedtuple('myobj',('A','B','C'))
&gt;&gt;&gt; mlist = [mob(3,1,1), mob(1,2,3), mob(1,2,4), mob(2,5,1)]
&gt;&gt;&gt; mlist
[myobj(A=3, B=1, C=1), myobj(A=1, B=2, C=3), myobj(A=1, B=2, C=4), myobj(A=2, B=5, C=1)]
&gt;&gt;&gt; for x in sorted(mlist,key=lambda o:o.A):
...     print x
...     
myobj(A=1, B=2, C=3)
myobj(A=1, B=2, C=4)
myobj(A=2, B=5, C=1)
myobj(A=3, B=1, C=1)
&gt;&gt;&gt; 
</code></pre>",3
711,1920315,Fill list with objects and sort (Newbie),"<p>I'm new to Python, so please forgive me when using wrong terms :)</p>

<p>I'd like to have a list of several ""objects"", each of them having the same numeric attributes (A, B, C). This list should then be sorted by the value of attribute A.</p>

<p>In Java I'd define a Class with my attributes as members, implement Sortable to compare A, put them all in some sort of List and let <code>Collections.sort</code> sort my list.</p>

<p>The result should ""look"" like that:</p>

<pre><code>A   B   C
1   2   3
1   2   4
2   5   1
3   1   1
</code></pre>

<p>What is the best way to do something like that in Python?</p>",python|list|sorting|object,"<pre><code>List = [(3,1,1),(1,2,4),(2,5,1),(1,2,3)]
sorted(List)
</code></pre>

<p>Update: The heart of the answer is actually the <code>sorted</code> built-in. I just put it on two lines to allow for incremental inspection that (a) the data structure chosen is a list of tuples, and (b) the sorting is done by <code>sorted</code>. As a commenter pointed out sorted() will in one go sort by A, then B, then C (whether this is required or not). Other answers make a good point about adding a key-picking function to the call to sorted(), to nail down which element will be used in the comparison. Again, whether this is advantageous or not is for the OP to judge. I wanted to offer a minimal solution.</p>

<p>Update1: I shuffled the elements of the list around, so it appeals more to sorting :).</p>",2
712,1920315,Fill list with objects and sort (Newbie),"<p>I'm new to Python, so please forgive me when using wrong terms :)</p>

<p>I'd like to have a list of several ""objects"", each of them having the same numeric attributes (A, B, C). This list should then be sorted by the value of attribute A.</p>

<p>In Java I'd define a Class with my attributes as members, implement Sortable to compare A, put them all in some sort of List and let <code>Collections.sort</code> sort my list.</p>

<p>The result should ""look"" like that:</p>

<pre><code>A   B   C
1   2   3
1   2   4
2   5   1
3   1   1
</code></pre>

<p>What is the best way to do something like that in Python?</p>",python|list|sorting|object,"<p>You can give a comparison function as first argument of the <code>sort</code> of a list See the code below:</p>

<pre><code>class Foo:
    def __init__(self, a, b=0, c=0):
        self.a = a
        self.b = b
        self.c = c

    def __repr__(self):
        return ""%d %d  %d"" % (self.a, self.b, self.c)


foos = [Foo(2, 5, 1), Foo(1, 2, 4), Foo(3, 1, 1), Foo(1, 2, 3)]

def cmp_a(f1, f2): 
    if f1.a == f2.a:
        return 0
    elif f1.a &lt; f2.a:
        return -1
    else:
        return 1

foos.sort(cmp_a)

for f in foos:
    print f
</code></pre>",2
713,1920315,Fill list with objects and sort (Newbie),"<p>I'm new to Python, so please forgive me when using wrong terms :)</p>

<p>I'd like to have a list of several ""objects"", each of them having the same numeric attributes (A, B, C). This list should then be sorted by the value of attribute A.</p>

<p>In Java I'd define a Class with my attributes as members, implement Sortable to compare A, put them all in some sort of List and let <code>Collections.sort</code> sort my list.</p>

<p>The result should ""look"" like that:</p>

<pre><code>A   B   C
1   2   3
1   2   4
2   5   1
3   1   1
</code></pre>

<p>What is the best way to do something like that in Python?</p>",python|list|sorting|object,"<p>Sorry, If I took your question wrong way. I don't get it very well.</p>

<p>So, I will assume like you want to sort by column</p>

<p>Lets say x is 2 dimensional array</p>

<pre><code>&gt;&gt;&gt; x=[[1, 2, 3], [1, 2, 4], [2, 5, 1], [3, 1, 1]]
&gt;&gt;&gt; x
[[1, 2, 3], [1, 2, 4], [2, 5, 1], [3, 1, 1]]
</code></pre>

<p>here is one way to do sorting by each column, using itemgetter</p>

<pre><code>from operator import itemgetter

&gt;&gt;&gt; sorted(x,key=itemgetter(0))
[[1, 2, 4], [1, 2, 3], [2, 5, 1], [3, 1, 1]]
&gt;&gt;&gt; sorted(x,key=itemgetter(1))
[[3, 1, 1], [1, 2, 4], [1, 2, 3], [2, 5, 1]]
&gt;&gt;&gt; sorted(x,key=itemgetter(2))
[[3, 1, 1], [2, 5, 1], [1, 2, 3], [1, 2, 4]]
</code></pre>

<p>If you want in-place sorting, please do like <code>x.sort(key=itemgetter(0))</code></p>",4
714,1920315,Fill list with objects and sort (Newbie),"<p>I'm new to Python, so please forgive me when using wrong terms :)</p>

<p>I'd like to have a list of several ""objects"", each of them having the same numeric attributes (A, B, C). This list should then be sorted by the value of attribute A.</p>

<p>In Java I'd define a Class with my attributes as members, implement Sortable to compare A, put them all in some sort of List and let <code>Collections.sort</code> sort my list.</p>

<p>The result should ""look"" like that:</p>

<pre><code>A   B   C
1   2   3
1   2   4
2   5   1
3   1   1
</code></pre>

<p>What is the best way to do something like that in Python?</p>",python|list|sorting|object,"<pre><code>class myclass(object):
    def __init__(self, a, b, c):
        self.a = a
        self.b = b
        self.c = c

    def __repr__(self):
        return ""(a=%s, b=%s, c=%s)"" % (self.a, self.b, self.c)

&gt;&gt;&gt; obj1 = myclass(1, 2, 3)
&gt;&gt;&gt; obj2 = myclass(1, 2, 4)
&gt;&gt;&gt; obj3 = myclass(2, 5, 1)
&gt;&gt;&gt; obj4 = myclass(3, 1, 1)

&gt;&gt;&gt; print sorted([obj1, obj2, obj3, obj4], key=lambda o: o.a)
[(a=1, b=2, c=3), (a=1, b=2, c=4), (a=2, b=5, c=1), (a=3, b=1, c=1)]
</code></pre>",6
715,20460465,Updating A List and Re Printing It?,"<p>I am trying to build a simple game but i'm having trouble updating the list and re printing it any ideas?</p>

<p>I am pulling some details from a txt file and putting them into a list. I print the list and this works.</p>

<p>I do the update using the .replace but when i re print the list it only prints the last item in the list. This has been updated correctly. How can i get it so it prints the whole list again that has been updated?</p>

<p>Any ideas???</p>

<p>Here is my code:</p>

<pre><code>print(""Can you solve the puzzle? \nBelow are some words in code form can you crack the code and figue out\nthe words?\n"")
words = open (""words.txt"", ""r"")
lines_words = words.readlines()

for line_words in lines_words:
    print (line_words)

words.close()

print(""\nHere are some clues to help you!\n"")

clues = open (""clues.txt"", ""r"")
print (clues.read())

clues.close()

###

print (""\nThis is what we have so far...."")

# define the function
def replace_all(text, dic):
    for i, j in dic.items():
        text = text.replace(i, j)
    return text


# dictionary with key:values.
reps = {'#':'A', '*':'M', '%':'N'}

txt = replace_all(line_words, reps)
print (txt)
</code></pre>",python,"<p>You are making two mistakes:</p>

<ol>
<li><p>You <em>reuse</em> the <code>line_words</code> name in your <code>for</code> loop:</p>

<pre><code>for line_words in lines_words:
    print (line_words)
</code></pre>

<p>This replaces the old value (a list) with each line <em>in</em> the list, in turn. After the last iteration that means <code>line_words</code> has been replaced by the last line.</p>

<p>Use a different name for <em>in</em> the loop:</p>

<pre><code>for line in lines_words:
    print (line)
</code></pre></li>
<li><p>You'll need to use another loop to replace text in the lines:</p>

<pre><code>for line in line_words:
    txt = replace_all(line, reps)
    print (txt)
</code></pre>

<p>This will obscure your words just for printing, in the iteration, and not alter the original strings contained in <code>line_words</code>.</p></li>
</ol>",0
716,20754806,Django - how to run syncdb after 'south' is an installed app?,"<p>I added south in my installed apps so that I can do schemamigrations. I then added</p>

<pre><code>django.contrib.admin
</code></pre>

<p>and</p>

<pre><code>django.contrib.flatpages
</code></pre>

<p>to the installed apps. Now, normally I would just do</p>

<pre><code>python manage.py syncdb
</code></pre>

<p>but is that the correct way to do it after installing south? Here (<a href=""http://south.readthedocs.org/en/latest/commands.html#syncdb"" rel=""nofollow"">http://south.readthedocs.org/en/latest/commands.html#syncdb</a>) it says </p>

<p>'South overrides the Django syncdb command; as well as changing the output to show apps delineated by their migration status, it also makes syncdb only work on a subset of the apps - those without migrations.' </p>

<p>but I don't fully understand it. If it overrides the Django syncdb command, then what would be the best way for me to sync </p>

<pre><code>django.contrib.admin
</code></pre>

<p>and </p>

<pre><code>django.contrib.flatpages
</code></pre>

<p>?</p>",python|django|django-south|django-syncdb,"<p>You have to explicitly convert any of your <code>INSTALLED_APPS</code> to use South.</p>

<p>After installing South you can still do <code>python manage.py syncdb</code> to sync any apps that aren't using South (such as Flatpages)</p>

<p>To convert an app:<br>
<a href=""http://south.readthedocs.org/en/latest/convertinganapp.html"" rel=""nofollow"">http://south.readthedocs.org/en/latest/convertinganapp.html</a></p>",2
717,20604502,Scrape multiple pages in python and save it in different files,"<p>I am trying to scrape multiple json pages but it is not storing anything in file. Also I have to define number of pages. How to automatically adjust it till last page.</p>

<pre><code>import urllib

for x in xrange(1,5):
   url = 'http://api.opencorporates.com/v0.2/companies/search?q=&amp;jurisdiction_code=us_ca&amp;current_status=Active&amp;page={0}'.format(x)
   file_name = url.split('/')[-1]
   u = urllib.urlopen(url)
   f = open(file_name, 'wb')
   meta = u.info()
   file_size = int(meta.getheaders(""Content-Length"")[0])
   print ""Downloading: %s Bytes: %s"" % (file_name, file_size)
   file_size_dl = 0
   block_sz = 8192
   while True:
      buffer = u.read(block_sz)
      if not buffer:
           break
   file_size_dl += len(buffer)
   f.write(buffer)
   status = r""%10d  [%3.2f%%]"" % (file_size_dl, file_size_dl * 100. / file_size)
   status = status + chr(8)*(len(status)+1)
   print status,
   f.close()
</code></pre>",python|urllib,"<pre><code>import urllib2
import json
url = 'http://api.opencorporates.com/v0.2/companies/search?q=&amp;jurisdiction_code=us_ca&amp;current_status=Active&amp;page='
i = 0
while True:
    i += 1
    print i
    response = urllib2.urlopen('%s%d' % (url, i))
    content = response.read()
    with open(str(i) + '.json', 'w') as f:
        f.write(content)
</code></pre>

<p>at the 22nd page I got <code>HTTP Error 401: Unauthorized</code></p>",0
718,20589439,How to make a label with the background color as a color chosen by the user?,"<p>So, here is my code. Essentially, what I want to do is to make a label with the background color the same as the color chosen in the color dialog, so that the person can see the color and the color hexadecimal code. Please help.</p>

<pre><code>import sys
from tkinter import *
from tkinter import colorchooser

mGui = Tk()
mGui.geometry(""600x300+500+500"")
mGui.title(""Hexadecimal Color Chooser"")

def getColor():
    mycolor = colorchooser.askcolor()
    label = Label(mGui, bg = mycolor).pack()
    mycolor = str(mycolor)
    start = mycolor.index(""#"")
    stop = mycolor.index(""')"")
    mycolor = mycolor[start:stop]
    label = Label(mGui, text = ""The hexadecimal color code is: "" + mycolor).pack()

button = Button(mGui, text = ""Choose a color"", command = getColor).place(x=0, y=0)
</code></pre>",python|user-interface|python-3.x|tkinter,"<p>There are three issues here:</p>

<ol>
<li><p>Importing <code>sys</code> if you are not going to use it does nothing.</p></li>
<li><p>The <code>place</code>, <code>pack</code>, and <code>grid</code> methods of Tkinter widgets always return <code>None</code>.  Hence, any calls to them should always be placed on their own line.</p></li>
<li><p><code>tkinter.colorchooser.askcolor</code> returns a two-item tuple like this:</p>

<pre><code>((128.5, 64.25, 64.25), '#804040')  
</code></pre>

<p>Futhermore, the last item in this tuple is the hex code of the chosen color.</p></li>
</ol>

<p>Below is a fixed version of the script:</p>

<pre><code>from tkinter import *
from tkinter import colorchooser

mGui = Tk()
mGui.geometry(""600x300+500+500"")
mGui.title(""Hexadecimal Color Chooser"")

def getColor():
    color_choice = colorchooser.askcolor()[1]  # get the hex code
    color = Label(mGui, bg=color_choice)
    color.pack()
    hexcode = Label(mGui, text=""The hexadecimal color code is: ""+color_choice)
    hexcode.pack()

button = Button(mGui, text=""Choose a color"", command=getColor)
button.place(x=0, y=0)

mGui.mainloop()
</code></pre>",2
719,20805980,Reference M2Crypto from within Jython,"<p>I'm building a cross-platform Java project that has to reference some python2.7 scripts. Jython seems perfect for this, but there are a couple problems: the python script uses M2Crypto. Is there any way to include M2Crypto into Jython in a way that's natively cross platform and doesn't require installing any extra programs?</p>

<p>EDIT:
To be specific, this is the file that's giving me problems:<br>
<a href=""https://raw.github.com/GotoHack/pymobiledevice/master/ca.py"" rel=""nofollow"">https://raw.github.com/GotoHack/pymobiledevice/master/ca.py</a></p>",java|python|jython|m2crypto,"<p>I'm not completely sure but there is not. M2Crypto requires external installation that might differ from system to system. For example if you want to install it on Mac OS X it's not very easy (but not hard as well), on Linux (Ubuntu) is a bit easier. So you might need to right a script that installs it on you system automatically.</p>",0
720,20805980,Reference M2Crypto from within Jython,"<p>I'm building a cross-platform Java project that has to reference some python2.7 scripts. Jython seems perfect for this, but there are a couple problems: the python script uses M2Crypto. Is there any way to include M2Crypto into Jython in a way that's natively cross platform and doesn't require installing any extra programs?</p>

<p>EDIT:
To be specific, this is the file that's giving me problems:<br>
<a href=""https://raw.github.com/GotoHack/pymobiledevice/master/ca.py"" rel=""nofollow"">https://raw.github.com/GotoHack/pymobiledevice/master/ca.py</a></p>",java|python|jython|m2crypto,"<p>This won't work ... <a href=""http://chandlerproject.org/Projects/MeTooCrypto"" rel=""nofollow"">M2Crypto</a> is a binding to the C library openssl. Unless you do some really wild gymnastics with JNI there is no way how to make this code work directly with Jython. OTOH, you don’t have to, Java has just fine bindings to crypto libraries <a href=""http://en.wikipedia.org/wiki/Java_Cryptography_Architecture"" rel=""nofollow"">on its own</a>. Use that.</p>",1
721,20427209,How to use Beautiful Soup to select only one of multiple tables,"<p>I have an html document with 4 or 5 different tables.  The one I want has an attribute class = ""data"".  I can't figure out how to make BeautifulSoup return just that table.</p>

<pre><code>soup = BeautifulSoup(myhtml)

t = soup.findAll('table', 'class=""data""')
for table in t:
    rows = table.findAll('tr')
    for tr in rows:
        cols = tr.findAll('td')
        for td in cols:
            print td
</code></pre>

<p>If I remove the 'class=""data""' in the above, I get the results from every table.  Is it possible to select only the one with class = ""data"".  Or, is there some other way to iterate through the tables?</p>",python|html|python-2.7|web-scraping|beautifulsoup,"<p>Specify the <code>class</code> atttribute as a dictionary as follow:</p>

<pre><code>t = soup.findAll('table', {'class': 'data'})
</code></pre>

<p>If you use bs4, you can use CSS Selector using <code>select</code> method:</p>

<pre><code>t = css_soup.select(""table.data"")
</code></pre>",3
722,20427209,How to use Beautiful Soup to select only one of multiple tables,"<p>I have an html document with 4 or 5 different tables.  The one I want has an attribute class = ""data"".  I can't figure out how to make BeautifulSoup return just that table.</p>

<pre><code>soup = BeautifulSoup(myhtml)

t = soup.findAll('table', 'class=""data""')
for table in t:
    rows = table.findAll('tr')
    for tr in rows:
        cols = tr.findAll('td')
        for td in cols:
            print td
</code></pre>

<p>If I remove the 'class=""data""' in the above, I get the results from every table.  Is it possible to select only the one with class = ""data"".  Or, is there some other way to iterate through the tables?</p>",python|html|python-2.7|web-scraping|beautifulsoup,"<p>Look the following code :</p>



<pre><code>t = soup.find_all('table', class_='data')
</code></pre>

<p>The attribute class need the under to refer</p>",0
723,20647154,Python __import__ is only giving me top level module,"<p>I'm doing </p>

<pre><code>module = __import__(""client.elements.gui.button"", globals(), locals(), [], 0)
</code></pre>

<p>But it's only returning <code>client</code>.</p>

<p>What is my problem?</p>",python|import,"<p>It only obtains the top level, but you can also work around this like so: </p>

<pre><code>module_name = 'some.module.import.class'
    module = __import__(module_name)
    for n in module_name.split('.')[1:]:
        module = getattr(module, n)

# module is now equal to what would normally 
# have been retrieved where you to properly import the file
</code></pre>",2
724,20647154,Python __import__ is only giving me top level module,"<p>I'm doing </p>

<pre><code>module = __import__(""client.elements.gui.button"", globals(), locals(), [], 0)
</code></pre>

<p>But it's only returning <code>client</code>.</p>

<p>What is my problem?</p>",python|import,"<p>That's what <code>__import__</code> does.</p>

<blockquote>
  <p><a href=""http://docs.python.org/2/library/functions.html#__import__"" rel=""noreferrer"">When the <em>name</em> variable is of the form <code>package.module</code>, normally, the top-level package (the name up till the first dot) is returned, <em>not</em> the module named by <em>name</em>.</a></p>
</blockquote>

<p>You're not really supposed to use <code>__import__</code>; if you want to import a module dynamically, use <a href=""http://docs.python.org/2/library/importlib.html#importlib.import_module"" rel=""noreferrer""><code>importlib.import_module</code></a>.</p>",6
725,20647154,Python __import__ is only giving me top level module,"<p>I'm doing </p>

<pre><code>module = __import__(""client.elements.gui.button"", globals(), locals(), [], 0)
</code></pre>

<p>But it's only returning <code>client</code>.</p>

<p>What is my problem?</p>",python|import,"<p>Accepted answer is correct, but if you read on in the docs you'll find that this can be gotten around with an admittedly unsettling ""hack"" by using <code>__import__</code> like so:</p>

<pre><code>module = __import__('client.elements.gui.button', fromlist=[''])
</code></pre>

<p>It doesn't really matter what you pass in for <code>fromlist</code> so long as it's a non-empty list.  This signals to the default <code>__import__</code> implementation that you want to do a <code>from x.y.z import foo</code> style import, and it <em>will</em> return the the module you're after.</p>

<p>As stated you should use <code>importlib</code> instead, but this is still a workaround if you need to support Python versions &lt; 2.7.</p>",3
726,20423599,Why is b=(a+=1) an invalid syntax in python?,"<p>If I write the following in python, I get a syntax error, why so?</p>

<pre><code>a = 1
b = (a+=1)
</code></pre>

<p>I am using python version 2.7</p>

<p>what I get when I run it, the following:</p>

<pre><code>&gt;&gt;&gt; a = 1
&gt;&gt;&gt; b = (a +=1)
  File ""&lt;stdin&gt;"", line 1
    b = (a +=1)
        ^
SyntaxError: invalid syntax
&gt;&gt;&gt;
</code></pre>",python|python-2.7,"<p>As @Ashwini stated, <code>a+=1</code> is an assigment, not a value. You can't assign it to <code>b</code>, or any variable. What you probably want is:</p>

<pre><code>b = a+1
</code></pre>",2
727,20423599,Why is b=(a+=1) an invalid syntax in python?,"<p>If I write the following in python, I get a syntax error, why so?</p>

<pre><code>a = 1
b = (a+=1)
</code></pre>

<p>I am using python version 2.7</p>

<p>what I get when I run it, the following:</p>

<pre><code>&gt;&gt;&gt; a = 1
&gt;&gt;&gt; b = (a +=1)
  File ""&lt;stdin&gt;"", line 1
    b = (a +=1)
        ^
SyntaxError: invalid syntax
&gt;&gt;&gt;
</code></pre>",python|python-2.7,"<p>Unlike in some other languages, assignment (including augmented assignment, like <code>+=</code>) in Python is <em>not</em> an expression. This also affects things like this:</p>

<pre><code>(a=1) &gt; 2
</code></pre>

<p>which is legal in C, and several other languages. </p>

<p>The reason generally given for this is because it helps to prevent a class of bugs like this:</p>

<pre><code>if a = 1: # instead of ==
    pass
else:
    pass
</code></pre>

<p>since assignment isn't an expression, this is a SyntaxError in Python. In the equivalent C code, it is a subtle bug where the variable will be <em>modified</em> rather than checked, the check will <em>always</em> be true (in C, like in Python, a non-zero integer is always truthy), and the else block can never fire.</p>

<p>You <em>can</em> still do chained assignment in Python, so this works:</p>

<pre><code>&gt;&gt;&gt; a = 1 
&gt;&gt;&gt; a = b = a+1
&gt;&gt;&gt; a
2
&gt;&gt;&gt; b
2
</code></pre>",7
728,20423599,Why is b=(a+=1) an invalid syntax in python?,"<p>If I write the following in python, I get a syntax error, why so?</p>

<pre><code>a = 1
b = (a+=1)
</code></pre>

<p>I am using python version 2.7</p>

<p>what I get when I run it, the following:</p>

<pre><code>&gt;&gt;&gt; a = 1
&gt;&gt;&gt; b = (a +=1)
  File ""&lt;stdin&gt;"", line 1
    b = (a +=1)
        ^
SyntaxError: invalid syntax
&gt;&gt;&gt;
</code></pre>",python|python-2.7,"<p>All the answers provided here are good, I just want to add that you can achieve what you want in a one-line expression, but written in a different manner:</p>

<pre><code>b, a = a+1, a+1
</code></pre>

<p>Here you're doing <em>almost</em> the same thing: incrementing <code>a</code> by 1, and assigning the value of <code>a+1</code> to b - I'm telling 'almost' because here we have two summations instead of one.</p>",1
729,20423599,Why is b=(a+=1) an invalid syntax in python?,"<p>If I write the following in python, I get a syntax error, why so?</p>

<pre><code>a = 1
b = (a+=1)
</code></pre>

<p>I am using python version 2.7</p>

<p>what I get when I run it, the following:</p>

<pre><code>&gt;&gt;&gt; a = 1
&gt;&gt;&gt; b = (a +=1)
  File ""&lt;stdin&gt;"", line 1
    b = (a +=1)
        ^
SyntaxError: invalid syntax
&gt;&gt;&gt;
</code></pre>",python|python-2.7,"<p><code>a +=1</code> is a statement in Python and you can't assign a statement to a variable. Though it is a valid syntax in languages like C, PHP, etc but not Python.</p>

<pre><code>b = (a+=1)
</code></pre>

<p>An equivalent version will be:</p>

<pre><code>&gt;&gt;&gt; a = 1
&gt;&gt;&gt; a += 1
&gt;&gt;&gt; b = a
</code></pre>",4
730,20723171,"Pygame, Adding quit function to a rectangle","<p>I have a problem I can't seem to solve. I have tried to find a way to add a function like quitting a program to a rectangle in Pygame. Here is the code I have so far. I would like to add an on click quit feature to the quit box in the corner.</p>

<pre><code>def addRect(self):
    self.rect = pygame.draw.rect(self.screen, (white), (300, 200, 300, 200), 2)
    pygame.display.update()


def addText(self):
    self.screen.blit(self.font.render('Quit', True, (84,84,84)), (550, 375))
    pygame.display.update()
</code></pre>

<p>I have it working with the bits above and below and it does make a ""Quit"" Image at the bottom corner where I need it. However, I'm again stuck on the function!</p>",python|function|pygame|exit,"<p>A made a small example that you can work on. Instead of buttons returning something on click, they have a function assigned to the click.</p>

<pre><code>import pygame,sys
from pygame.locals import *

screen_color = (0,0,0)

class Button:
    def __init__(self,pos,action):
        self.rect = pygame.Rect(pos)
        self.action = action
    def draw(self,screen):
        pygame.draw.rect(screen, (255,255,255), self.rect)
    def checkCollide(self,x,y):
        return self.rect.collidepoint(x,y)

    def do(self):
        self.action()


def action():
    global screen_color
    screen_color = (255,255,0)


pygame.init()

screen = pygame.display.set_mode((640,360),0,32)
buttons = []

buttons.append(Button((10,10,50,50),action))

while True:
    screen.fill(screen_color)
    for button in buttons:
        button.draw(screen)

    pygame.display.flip()

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == MOUSEBUTTONDOWN:
            x,y = pygame.mouse.get_pos()
            for button in buttons:
                if (button.checkCollide(x,y)):
                    button.do()
</code></pre>",0
731,20723171,"Pygame, Adding quit function to a rectangle","<p>I have a problem I can't seem to solve. I have tried to find a way to add a function like quitting a program to a rectangle in Pygame. Here is the code I have so far. I would like to add an on click quit feature to the quit box in the corner.</p>

<pre><code>def addRect(self):
    self.rect = pygame.draw.rect(self.screen, (white), (300, 200, 300, 200), 2)
    pygame.display.update()


def addText(self):
    self.screen.blit(self.font.render('Quit', True, (84,84,84)), (550, 375))
    pygame.display.update()
</code></pre>

<p>I have it working with the bits above and below and it does make a ""Quit"" Image at the bottom corner where I need it. However, I'm again stuck on the function!</p>",python|function|pygame|exit,"<p>I did something very similar to this, and the way that I handled it was I made a list in the main program that had all of the ""inner windows"" or whatever you want to call them.  Whenever the main program received a signal from a window to close it, it deleted it from the list.</p>

<p>To make the signal, you will want to create a rect in the location where you want the button to be.  Make a function for the ""inner window"" and have it test for that rect being clicked.  If it is clicked, have the function return something like <code>'closed'</code> or whatever you want.  In the main program, say something like</p>

<pre><code>for window in windows:
    if window.update()=='closed':
        windows.remove(window)
</code></pre>

<p>to remove any window which is closed.</p>

<p>EDIT:</p>

<p>After looking at your code a bit more in depth, it looks like how you're doing it won't work.  To add a rect, you will need to have something in your main code to store whether or not the rect is there.  To close the window, you will have to change that variable.</p>

<p>To check if the rect should be closed, make another rect that is where the text which should be closing the window is.  When this text is clicked, have the function return something which should be interpreted by the main code to close the window.</p>

<p>A basic example is shown below.</p>

<p>The class:</p>

<pre><code>def update(self):
    #set up the test rect
    text=self.font.render('Quit', True, (84,84,84))
    textrect=text.get_rect()
    textrect.topleft=(550, 375)
    #see if the button is pressed
    if textrect.collidepoint(pygame.mouse.get_pos()) and pygame.mouse.get_pressed()[0]:
        return 'closed'
    #render stuff
    self.rect = pygame.draw.rect(self.screen, (white), (300, 200, 300, 200), 2)
    self.screen.blit(text, (550, 375))
</code></pre>

<p>Note that I combined your two original classes into one, as I don't see a reason why you would ever want the rect but not the text or vise versa.  This is a pretty simple change if you don't like it.</p>

<p>Also note that this will close the window if the mouse is pressed off the button, then dragged onto it.  To avoid this, you will have to pass the list gotten from <code>pygame.event.get()</code> as an argument for the <code>update</code> function, and search through it for a <code>MOUSEBUTTONDOWN</code> event, but this would cause unnecessary complications that I tried to avoid.</p>

<p>The main code:</p>

<pre><code>rectOn=False
while True:
    if rectOn:
        if rect.update()=='closed':
            rectOn=False
</code></pre>

<p>To make the rect appear again after it has been closed, simply set <code>rectOn</code> to <code>True</code>.</p>",0
732,6927217,"Error ""Cannot connect to X server"" with Python program webkit2png","<p>When I use webkit2png on my SSH-server, I get the error: ""Cannot connect to X server:0.0""
Webkit2png is a package that makes a PNG screenshots of htmlpages.
On my computer it worked perfectly, but on the SSH server not; it doens't create an PNG-image.</p>

<p>It only works when I do this command: </p>

<pre><code>xvfb-run -a -s ""-screen 0 640x480x16"" python webkit2pngProgram.py
</code></pre>

<p>But that's an Unix command, and not Python code.</p>

<p>The webkit2pngProgram code:</p>

<pre><code>from webkit2png import WebkitRenderer, init_qtgui
from PyQt4.QtCore import QTimer

def renderer_func():
   renderer = WebkitRenderer()
   renderer.width = 550
   renderer.height = 500   
   renderer.timeout = 10
   renderer.wait = 1
   renderer.format = ""png""
   renderer.grabWholeWindow = False
   y = Program()
   outfile = open(""/image.png"", ""w"")

   renderer.render_to_file(""/test.html"", file=outfile)
   outfile.close()

def start():
   app = init_qtgui()   ###### =&gt; STUCKS HERE
   QTimer.singleShot(0, renderer_func)
   app.exec_()

if __name__ == ""__main__"":
    start()
</code></pre>

<p>Thanks for your help!</p>",python,"<p>You need to run the <code>xvfb</code> unix command first (<a href=""https://en.wikipedia.org/wiki/Xvfb"" rel=""nofollow"">X Virtual Frame Buffer</a>)</p>

<pre><code>server_num = int(os.getpid() + 1e6) 
newArgs = [""xvfb-run"", ""--auto-servernum"", ""--server-num"", str(server_num), ""--server-args=-screen 0, %dx%dx24"" % (1024, 768), sys.argv[0], '-g','1024', '768'] 
os.execvp(newArgs[0],newArgs[1:]) 
</code></pre>",2
733,6504005,Consuming a rabbitmq message queue with multiple threads (Python Kombu),"<p>I have a single RabbitMQ exchange with a single queue.  I wish to create a daemon that runs multiple threads and works through this queue as quickly as possible.  </p>

<p>The ""work"" involves communicating with external services, so there will be a fair amount of blocking going on within each consumer.  As such, I want to have multiple threads all dealing with messages from the same queue.</p>

<p>I can achieve this by consuming the queue on my primary thread, and then farming the incoming work off to a pool of other threads, but is there a way to launch multiple consumers, each within their own threaded context?</p>",python|multithreading|rabbitmq|kombu,"<p>Take a look at <a href=""http://celeryproject.org/"" rel=""nofollow"">celery</a> - it is designed to queue and process tasks from an AMPQ broker (but also works with other queuing backends). It handles multiprocess or multithreaded concurrency and makes it very easy to create and consume tasks.</p>",3
734,6913170,Encoding mail subject (SMTP) in Python with non-ASCII characters,"<p>I am using Python module <code>MimeWriter</code> to construct a message and smtplib to send a mail constructed message is:</p>

<pre><code>file msg.txt:
-----------------------
Content-Type: multipart/mixed;
from: me&lt;me@abc.com&gt;
to: me@abc.com
subject: 主題

Content-Type: text/plain;charset=utf-8

主題
</code></pre>

<p>I use the code below to send a mail:</p>

<pre><code>import smtplib
s=smtplib.SMTP('smtp.abc.com')
toList = ['me@abc.com']
f=open('msg.txt') #above msg in msg.txt file
msg=f.read()
f.close()
s.sendmail('me@abc.com',toList,msg)
</code></pre>

<p>I get mail body correctly but subject is not proper,</p>

<pre><code>subject: some junk characters

主題           &lt;- body is correct.
</code></pre>

<p>Please suggest? Is there any way to specify the decoding to be used for the subject also,
as being specified for the body. How can I get the subject decoded correctly?</p>",python|utf-8|character-encoding|smtp|cjk,"<p>From <a href=""http://docs.python.org/library/email.header.html"">http://docs.python.org/library/email.header.html</a></p>

<pre><code>from email.message import Message
from email.header import Header
msg = Message()
msg['Subject'] = Header('主題', 'utf-8')
print msg.as_string()
</code></pre>

<blockquote>
  <p>Subject: =?utf-8?b?5Li76aGM?=</p>
</blockquote>

<p>more simple:</p>

<pre><code>from email.header import Header
print Header('主題', 'utf-8').encode()
</code></pre>

<blockquote>
  <p>=?utf-8?b?5Li76aGM?=</p>
</blockquote>",35
735,6913170,Encoding mail subject (SMTP) in Python with non-ASCII characters,"<p>I am using Python module <code>MimeWriter</code> to construct a message and smtplib to send a mail constructed message is:</p>

<pre><code>file msg.txt:
-----------------------
Content-Type: multipart/mixed;
from: me&lt;me@abc.com&gt;
to: me@abc.com
subject: 主題

Content-Type: text/plain;charset=utf-8

主題
</code></pre>

<p>I use the code below to send a mail:</p>

<pre><code>import smtplib
s=smtplib.SMTP('smtp.abc.com')
toList = ['me@abc.com']
f=open('msg.txt') #above msg in msg.txt file
msg=f.read()
f.close()
s.sendmail('me@abc.com',toList,msg)
</code></pre>

<p>I get mail body correctly but subject is not proper,</p>

<pre><code>subject: some junk characters

主題           &lt;- body is correct.
</code></pre>

<p>Please suggest? Is there any way to specify the decoding to be used for the subject also,
as being specified for the body. How can I get the subject decoded correctly?</p>",python|utf-8|character-encoding|smtp|cjk,"<p>The subject is transmitted as an SMTP header, and they are required to be <a href=""http://en.wikipedia.org/wiki/ASCII"" rel=""noreferrer"">ASCII</a>-only. To support encodings in the subject you need to prefix the subject with whatever encoding you want to use. In your case, I would suggest prefix the subject with ?UTF-8?B? which means <a href=""http://en.wikipedia.org/wiki/UTF-8"" rel=""noreferrer"">UTF-8</a>, <a href=""http://en.wikipedia.org/wiki/Base64"" rel=""noreferrer"">Base64</a> encoded.</p>

<p>In other words, I believe your subject header should more or less look like this:</p>

<pre><code>Subject: =?UTF-8?B?JiMyMDAyNzsmIzM4OTg4Ow=?=
</code></pre>

<p>In PHP you could go about it like this:</p>

<pre class=""lang-php prettyprint-override""><code>// Convert subject to base64
$subject_base64 = base64_encode($subject);
fwrite($smtp, ""Subject: =?UTF-8?B?{$subject_base64}?=\r\n"");
</code></pre>

<p>In Python:
</p>

<pre><code>import base64
subject_base64 = base64.encodestring(subject).strip()
subject_line = ""Subject: =?UTF-8?B?%s?="" % subject_base64
</code></pre>",7
736,6392326,Automate 'enter' key in Python (on a Mac),"<p>I'm creating test automation for an application.  I am using a testing tool to do most of the testing, but in order to get to that point I first need to automate one 'enter' key click in Python.  I am using a mac, so pywin32 is not available.  Any suggestions?</p>",python|macos|automation|automated-tests,"<ul>
<li><a href=""https://pypi.org/project/keyboard/"" rel=""nofollow noreferrer"">https://pypi.org/project/keyboard/</a></li>
<li><a href=""https://pythonhosted.org/pynput/keyboard.html"" rel=""nofollow noreferrer"">https://pythonhosted.org/pynput/keyboard.html</a></li>
</ul>

<pre class=""lang-py prettyprint-override""><code>    import time
    from pynput.keyboard import Key, Controller   
    keyboard = Controller()
    # Press and release space
    keyboard.press(Key.space)
    keyboard.release(Key.space)
</code></pre>",0
737,6392326,Automate 'enter' key in Python (on a Mac),"<p>I'm creating test automation for an application.  I am using a testing tool to do most of the testing, but in order to get to that point I first need to automate one 'enter' key click in Python.  I am using a mac, so pywin32 is not available.  Any suggestions?</p>",python|macos|automation|automated-tests,"<p>By looking around, I found the <a href=""https://stackoverflow.com/questions/1770312/is-there-a-sendkey-for-mac-in-python"">answer to your question</a> in another question similar to yours.</p>

<p>You're going to have to change up the code a little bit so that it's 'Enter' not Ctrl-r, but it should be easy.</p>

<p>Hope this helps!</p>",0
738,6392326,Automate 'enter' key in Python (on a Mac),"<p>I'm creating test automation for an application.  I am using a testing tool to do most of the testing, but in order to get to that point I first need to automate one 'enter' key click in Python.  I am using a mac, so pywin32 is not available.  Any suggestions?</p>",python|macos|automation|automated-tests,"<p><a href=""http://appscript.sourceforge.net/"" rel=""nofollow"">Appscript</a> makes this pretty easy:</p>

<pre><code>from appscript import app
app('System Events').keystroke('\r')
</code></pre>

<p>This will send the keystroke to whichever application is in front.</p>",1
739,6412146,Python decorator as a staticmethod,"<p>I'm trying to write a python class which uses a decorator function that needs information of the instance state. This is working as intended, but if I explicitly make the decorator a staticmetod, I get the following error:</p>

<pre><code>Traceback (most recent call last):
  File ""tford.py"", line 1, in &lt;module&gt;
    class TFord(object):
  File ""tford.py"", line 14, in TFord
    @ensure_black
TypeError: 'staticmethod' object is not callable
</code></pre>

<p>Why?</p>

<p>Here is the code:</p>

<pre><code>class TFord(object):
    def __init__(self, color):
        self.color = color

    @staticmethod
    def ensure_black(func):
        def _aux(self, *args, **kwargs):
            if self.color == 'black':
                return func(*args, **kwargs)
            else:
                return None
        return _aux

    @ensure_black
    def get():
        return 'Here is your shiny new T-Ford'

if __name__ == '__main__':
    ford_red = TFord('red')
    ford_black = TFord('black')

    print ford_red.get()
    print ford_black.get()
</code></pre>

<p>And if I just remove the line <code>@staticmethod</code>, everything works, but I do not understand why. Shouldn't it need <code>self</code> as a first argument?</p>",python|decorator|static-methods,"<p>Python classes are created at runtime, after evaluating the contents of the class declaration. The class is evaluated by assigned all declared variables and functions to a special dictionary and using that dictionary to call <code>type.__new__</code> (see <a href=""http://docs.python.org/reference/datamodel.html#customizing-class-creation"" rel=""noreferrer"">customizing class creation</a>).</p>

<p>So,</p>

<pre><code>class A(B):
    c = 1
</code></pre>

<p>is equivalent to:</p>

<pre><code>A = type.__new__(""A"", (B,), {""c"": 1})
</code></pre>

<p>When you annotate a method with @staticmethod, there is some special magic that happens AFTER the class is created with <code>type.__new__</code>. Inside class declaration scope, the @staticmethod function is just an instance of a staticmethod object, which you can't call. The decorator probably should just be declared above the class definition in the same module OR in a separate ""decorate"" module (depends on how many decorators you have). In general decorators should be declared outside of a class. One notable exception is the property class (see <a href=""http://docs.python.org/library/functions.html#property"" rel=""noreferrer"">properties</a>).  In your case having the decorator inside a class declaration might make sense if you had something like a color class:</p>

<pre><code>class Color(object):

    def ___init__(self, color):
        self.color = color

     def ensure_same_color(f):
         ...

black = Color(""black"")

class TFord(object):
    def __init__(self, color):
        self.color = color

    @black.ensure_same_color
    def get():
        return 'Here is your shiny new T-Ford'
</code></pre>",9
740,6412146,Python decorator as a staticmethod,"<p>I'm trying to write a python class which uses a decorator function that needs information of the instance state. This is working as intended, but if I explicitly make the decorator a staticmetod, I get the following error:</p>

<pre><code>Traceback (most recent call last):
  File ""tford.py"", line 1, in &lt;module&gt;
    class TFord(object):
  File ""tford.py"", line 14, in TFord
    @ensure_black
TypeError: 'staticmethod' object is not callable
</code></pre>

<p>Why?</p>

<p>Here is the code:</p>

<pre><code>class TFord(object):
    def __init__(self, color):
        self.color = color

    @staticmethod
    def ensure_black(func):
        def _aux(self, *args, **kwargs):
            if self.color == 'black':
                return func(*args, **kwargs)
            else:
                return None
        return _aux

    @ensure_black
    def get():
        return 'Here is your shiny new T-Ford'

if __name__ == '__main__':
    ford_red = TFord('red')
    ford_black = TFord('black')

    print ford_red.get()
    print ford_black.get()
</code></pre>

<p>And if I just remove the line <code>@staticmethod</code>, everything works, but I do not understand why. Shouldn't it need <code>self</code> as a first argument?</p>",python|decorator|static-methods,"<p><strong>Solution</strong> does exist!</p>
<p>Problem is that Static method that is trying to be used as decorator is in fact staticmethod object and is not callable.</p>
<p><strong>Solution</strong>: staticmethod object has method <code>__get__</code> which takes any argument and returns real method: <a href=""https://docs.python.org/3/howto/descriptor.html"" rel=""nofollow noreferrer"">python documentation</a> Python 3.5 and up:</p>
<pre><code>class StaticMethod(object):
    &quot;Emulate PyStaticMethod_Type() in Objects/funcobject.c&quot;

    def __init__(self, f):
        self.f = f

    def __get__(self, obj, objtype=None):
        return self.f
</code></pre>
<p>Min solution I came with is:</p>
<pre class=""lang-py prettyprint-override""><code>class A():
    def __init__(self):
        self.n =  2

    @staticmethod
    def _returnBaseAndResult(func):
        from functools import wraps
        @wraps(func)
        def wrapper(*args, **kwargs):
            self = args[0]
            response = func(*args, **kwargs)
            return self.n, response
        return wrapper

    @_returnBaseAndResult.__get__('this can be anything')
    def square(self):
        return self.n**2

if __name__ == '__main__':
    a = A()
    print(a.square())
</code></pre>
<p>Will print (2, 4)</p>",4
741,6412146,Python decorator as a staticmethod,"<p>I'm trying to write a python class which uses a decorator function that needs information of the instance state. This is working as intended, but if I explicitly make the decorator a staticmetod, I get the following error:</p>

<pre><code>Traceback (most recent call last):
  File ""tford.py"", line 1, in &lt;module&gt;
    class TFord(object):
  File ""tford.py"", line 14, in TFord
    @ensure_black
TypeError: 'staticmethod' object is not callable
</code></pre>

<p>Why?</p>

<p>Here is the code:</p>

<pre><code>class TFord(object):
    def __init__(self, color):
        self.color = color

    @staticmethod
    def ensure_black(func):
        def _aux(self, *args, **kwargs):
            if self.color == 'black':
                return func(*args, **kwargs)
            else:
                return None
        return _aux

    @ensure_black
    def get():
        return 'Here is your shiny new T-Ford'

if __name__ == '__main__':
    ford_red = TFord('red')
    ford_black = TFord('black')

    print ford_red.get()
    print ford_black.get()
</code></pre>

<p>And if I just remove the line <code>@staticmethod</code>, everything works, but I do not understand why. Shouldn't it need <code>self</code> as a first argument?</p>",python|decorator|static-methods,"<p><code>ensure_black</code> is returning a <code>_aux</code> method that isn't decorated by <code>@staticmethod</code></p>

<p>You can return a non-static method to a static_method</p>

<p><a href=""http://docs.python.org/library/functions.html#staticmethod"" rel=""nofollow"">http://docs.python.org/library/functions.html#staticmethod</a></p>",-1
742,6412146,Python decorator as a staticmethod,"<p>I'm trying to write a python class which uses a decorator function that needs information of the instance state. This is working as intended, but if I explicitly make the decorator a staticmetod, I get the following error:</p>

<pre><code>Traceback (most recent call last):
  File ""tford.py"", line 1, in &lt;module&gt;
    class TFord(object):
  File ""tford.py"", line 14, in TFord
    @ensure_black
TypeError: 'staticmethod' object is not callable
</code></pre>

<p>Why?</p>

<p>Here is the code:</p>

<pre><code>class TFord(object):
    def __init__(self, color):
        self.color = color

    @staticmethod
    def ensure_black(func):
        def _aux(self, *args, **kwargs):
            if self.color == 'black':
                return func(*args, **kwargs)
            else:
                return None
        return _aux

    @ensure_black
    def get():
        return 'Here is your shiny new T-Ford'

if __name__ == '__main__':
    ford_red = TFord('red')
    ford_black = TFord('black')

    print ford_red.get()
    print ford_black.get()
</code></pre>

<p>And if I just remove the line <code>@staticmethod</code>, everything works, but I do not understand why. Shouldn't it need <code>self</code> as a first argument?</p>",python|decorator|static-methods,"<p>This is not how <code>staticmethod</code> is supposed to be used.  <code>staticmethod</code> objects are <a href=""http://docs.python.org/howto/descriptor.html"" rel=""noreferrer"">descriptors</a> that return the wrapped object, so they only work when accessed as <code>classname.staticmethodname</code>.  Example</p>

<pre><code>class A(object):
    @staticmethod
    def f():
        pass
print A.f
print A.__dict__[""f""]
</code></pre>

<p>prints</p>

<pre><code>&lt;function f at 0x8af45dc&gt;
&lt;staticmethod object at 0x8aa6a94&gt;
</code></pre>

<p>Inside the scope of <code>A</code>, you would always get the latter object, which is not callable.</p>

<p>I'd strongly recommend to move the decorator to the module scope -- it does not seem to belong inside the class.  If you want to keep it inside the class, don't make it a <code>staticmethod</code>, but rather simply <code>del</code> it at the end of the class body -- it's not meant to be used from outside the class in this case.</p>",45
743,6796523,Use of return in long if-elseif-else statements (Python),"<p>I am using Python for my example, but my question is referring to programmming languages in general.</p>

<pre><code>def some_function(eggs):
    if eggs == 1:
        do_something_1()
    elif eggs == 2:
        do_something_2()
    elif eggs == 3:
        do_something_3()
    else:
        do_error()
        return
    do_something_4()
    do_something_5()
    do_something_6()
</code></pre>

<p>(This is just an example. My functions will not be called <code>do_something_x</code>.)</p>

<p>Would putting a return in the else like this be a bad programming practice? Would it be a better idea to put</p>

<pre><code>do_something_4()
do_something_5()
do_something_6()
</code></pre>

<p>in each of the if/elifs?</p>",python|coding-style|refactoring|if-statement,"<p>Are you really sure that <code>do_something_n</code> is really related to <code>do_something_m</code>?</p>

<p>If so, use <code>do_something(var, n)</code> and use the same code for everything with a few if's (after all the concept is really related, right?).</p>

<p>If not, split the functions into really useful and stand-alone functions.</p>

<hr>

<p>Example why this (probably) is bad:</p>

<pre><code>def print1():
    print(1)

def print2():
    print(2)
</code></pre>

<p>Well, anyone should see this should be <code>printn(n)</code> or something similar.</p>

<p>And the other probability:</p>

<pre><code>def action1():
    paymanagers()
    payworkers()

def action2():
    clean_trashbin()
    unlock_car()
</code></pre>

<p>These actions are probably not related and should belong in their own functions.</p>",2
744,6796523,Use of return in long if-elseif-else statements (Python),"<p>I am using Python for my example, but my question is referring to programmming languages in general.</p>

<pre><code>def some_function(eggs):
    if eggs == 1:
        do_something_1()
    elif eggs == 2:
        do_something_2()
    elif eggs == 3:
        do_something_3()
    else:
        do_error()
        return
    do_something_4()
    do_something_5()
    do_something_6()
</code></pre>

<p>(This is just an example. My functions will not be called <code>do_something_x</code>.)</p>

<p>Would putting a return in the else like this be a bad programming practice? Would it be a better idea to put</p>

<pre><code>do_something_4()
do_something_5()
do_something_6()
</code></pre>

<p>in each of the if/elifs?</p>",python|coding-style|refactoring|if-statement,"<p>Definitely <strong>do not</strong> copy identical code into each <code>if</code> clause.</p>

<p>How about:</p>

<pre><code>def some_function(eggs):
    options = {1: do_something_1, 2: do_something_2, 3: do_something_3}
    if eggs in options: 
        options[eggs]()
        do_something_4()
        do_something_5()
        do_something_6()
    else:
        do_error()
        return
</code></pre>

<p>This doesn't require a long <code>if</code> <code>elif</code> <code>else</code>. It's also clear <code>do_something_4()</code> etc. only happens if eggs is 1, 2, or 3.</p>",8
745,6796523,Use of return in long if-elseif-else statements (Python),"<p>I am using Python for my example, but my question is referring to programmming languages in general.</p>

<pre><code>def some_function(eggs):
    if eggs == 1:
        do_something_1()
    elif eggs == 2:
        do_something_2()
    elif eggs == 3:
        do_something_3()
    else:
        do_error()
        return
    do_something_4()
    do_something_5()
    do_something_6()
</code></pre>

<p>(This is just an example. My functions will not be called <code>do_something_x</code>.)</p>

<p>Would putting a return in the else like this be a bad programming practice? Would it be a better idea to put</p>

<pre><code>do_something_4()
do_something_5()
do_something_6()
</code></pre>

<p>in each of the if/elifs?</p>",python|coding-style|refactoring|if-statement,"<p>What you are doing now is not bad programming practice, but it would be bad practice to duplicate code by putting the three function calls in each <code>if</code> statement.</p>

<p>Some people prefer to have a single exit point to their functions, in which case I would suggest something like this:</p>

<pre><code>def some_function(eggs):
    error_code = 0
    if eggs == 1:
        do_something_1()
    elif eggs == 2:
        do_something_2()
    elif eggs == 3:
        do_something_3()
    else:
        do_error()
        error_code = 1

    if error_code == 0:
        do_something_4()
        do_something_5()
        do_something_6()
    return   # return error_code if it would be helpful to the calling function
</code></pre>",1
746,6796523,Use of return in long if-elseif-else statements (Python),"<p>I am using Python for my example, but my question is referring to programmming languages in general.</p>

<pre><code>def some_function(eggs):
    if eggs == 1:
        do_something_1()
    elif eggs == 2:
        do_something_2()
    elif eggs == 3:
        do_something_3()
    else:
        do_error()
        return
    do_something_4()
    do_something_5()
    do_something_6()
</code></pre>

<p>(This is just an example. My functions will not be called <code>do_something_x</code>.)</p>

<p>Would putting a return in the else like this be a bad programming practice? Would it be a better idea to put</p>

<pre><code>do_something_4()
do_something_5()
do_something_6()
</code></pre>

<p>in each of the if/elifs?</p>",python|coding-style|refactoring|if-statement,"<p>How about:</p>

<pre><code>def some_function(eggs):
    if eggs not in [1,2,3]:
        do_error()
        return

    if eggs == 1:
        do_something_1()
    elif eggs == 2:
        do_something_2()
    elif eggs == 3:
        do_something_3()
    else:
        assert False
    do_something_4()
    do_something_5()
    do_something_6()
</code></pre>",3
747,6796523,Use of return in long if-elseif-else statements (Python),"<p>I am using Python for my example, but my question is referring to programmming languages in general.</p>

<pre><code>def some_function(eggs):
    if eggs == 1:
        do_something_1()
    elif eggs == 2:
        do_something_2()
    elif eggs == 3:
        do_something_3()
    else:
        do_error()
        return
    do_something_4()
    do_something_5()
    do_something_6()
</code></pre>

<p>(This is just an example. My functions will not be called <code>do_something_x</code>.)</p>

<p>Would putting a return in the else like this be a bad programming practice? Would it be a better idea to put</p>

<pre><code>do_something_4()
do_something_5()
do_something_6()
</code></pre>

<p>in each of the if/elifs?</p>",python|coding-style|refactoring|if-statement,"<p>The main issue I see with your code is that the error case is hidden more than half way down the function body. It makes the code difficult to read. Since what you are doing is validating the arguments to the function, you should do that first.</p>

<p>My preference in the case of an invalid argument is to raise an appropriate exception such as <code>ValueError</code>. Without knowing what your function does, or what <code>do_error</code> does, it's hard to say with absolute certainty that this applies to your case. But generally, getting incorrect arguments isn't something a function can recover from. The caller gave the arguments; so put the onus on the caller to recover from that error.</p>

<p>Also, here's an idiom you can use to avoid long lists of <code>elif</code>s:</p>

<pre><code>funs = {1: do_something_1,
        2: do_something_2,
        3: do_something_3}
funs[eggs]()
</code></pre>",12
748,66801823,Check if each of two lists contains each of two elements in Python,"<p>I was wondering if you can use list comprehensions somehow in order to check if two different lists contain all of two different elements.</p>
<p>I know it's maybe better to use an <code>and</code> and two different independent <code>all([list_comprehension])</code>, but that wouldn't escalate much if some day I needed to check, say, 5 things in 5 lists.</p>",python|list-comprehension,"<p>...and after thinking about it for a while I found out how:</p>
<pre><code>if all([all([x in l for x in [elem1, elem2]]) for l in [list1, list2]]):
</code></pre>
<p>The inner all() checks if all elements are in the list, and the outer all makes sure we do the same for each of the lists.</p>
<p><strong>MWE</strong></p>
<pre><code>list1 = [1, 2, 3]
list2 = [1, 3, 5]

if all([all([x in l for x in [1, 3]]) for l in [list1, list2]]):
    print(&quot;found 1 and 3 in all of the lists&quot;)
</code></pre>",0
749,66653737,dimensions are wrong when function called through lambda,"<p>I have issues with the following code snippet, where I optimize a function (minimizing the volatility).</p>
<pre><code>from scipy import optimize as sco
import numpy as np

def risk_measure(covMatrix, weights):
    risk = np.dot(weights, np.dot(covMatrix, weights))
    return risk

prescribed_esg = 6 # esg score between 0 and 10 used as threshold in the esg_constraint


# Covariance and return matrix
V = np.matrix([[84.76695659,  20.8854772,   20.62182415,  74.73652696,  14.35995947], 
              [20.8854772,   35.22429277,  12.95439707,  32.22912903,  12.96449085],
              [20.62182415,  12.95439707,  44.02079739,  38.73627316,   9.46608475],
              [74.73652696,  32.22912903,  38.73627316, 178.86640813,  33.40281336],
              [14.35995947,  12.96449085,   9.46608475,  33.40281336,  32.38514103]])
R = np.matrix([[-0.32264539, -0.08469428, 1.27628749, -0.23207085, 0.21012106]]).T
# Mean ESG score of each company
esgarr = np.matrix([[8.24336898, 4.6373262,  8.30657754, 4.65406417, 3.43620321]]).T

# Bounds and constraints
N = len(R) # number of instruments
bounds = ((-10,10),)*N # allow shorting, bounds of stocks
constraints = {'type': 'eq', 'fun': lambda weights: weights.sum() - 1}
esg_constraint = {'type': 'eq', 'fun': lambda weights: np.dot(weights, esgarr) - prescribed_esg}

esgmvp = sco.minimize(lambda x: risk_measure(V, x), # function to be minimized
                      N * [1 / N], # initial guess
                      bounds=bounds, # boundary conditions
                      constraints =[constraints, esg_constraint], # equality constraints)
                     ) 

esgmvp_weights = list(esgmvp['x'])
esgmvp_risk = esgmvp['fun']
esgmvp_esg = np.dot(esgmvp_weights, esgarr)
</code></pre>
<p>With the error message</p>
<pre><code>&lt;ipython-input-252-0d6bf5d30ccf&gt; in risk_measure(covMatrix, weights)
      3 
      4 def risk_measure(covMatrix, weights):
----&gt; 5     risk = np.dot(weights, np.dot(covMatrix, weights))
      6     return risk
      7 

&lt;__array_function__ internals&gt; in dot(*args, **kwargs)

ValueError: shapes (5,) and (1,5) not aligned: 5 (dim 0) != 1 (dim 0)
</code></pre>
<p>I am able to get results If I create a standalone matrix of weights such as</p>
<pre><code>weights = np.matrix([[1, 1, 1, 1, 1]])
risk = np.dot(weights, np.dot(V, weights.T))
</code></pre>
<p>but this does not work when tranposing in my original function.</p>",python|lambda|scipy,"<p>The following solved it</p>
<pre><code>V = np.squeeze(np.asarray(V))
esg_constraint = {'type': 'eq', 'fun': lambda weights: np.dot(weights, esgarr).sum() - prescribed_esg}
</code></pre>
<p>I also edited the function</p>
<pre><code>def risk_measure(covMatrix, weights):
    risk = np.dot(weights.T, np.dot(covMatrix, weights))
    return risk
</code></pre>",0
750,66464178,how to turn three 1D arrays into one 3D array by calculating the euclidian metric,"<p>I have three arrays:</p>
<pre><code>x_array = [1., 2., 3.]
y_array = [1., 2., 3.]
z_array = [1., 2., 3.]
</code></pre>
<p>These 3 arrays define the axis for a 3D array. I would like to calculate the Euclidian metric like</p>
<pre><code>array3D = np.array((3, 3, 3))
for ix in range(0, 3):
    for iy in range(0, 3):
        for iz in range(0, 3):
            dist = np.sqrt(x_array[ix]**2 + y_array[iy]**2 + z_array[iz]**2)
            array3D[ix][iy][iz] = dist
</code></pre>
<p>Is there a faster way than three <code>for</code> loops?</p>",python|arrays|numpy,"<p>Try broadcasting:</p>
<pre><code>a = np.sqrt(np.array(x_array)[:,None,None]**2 
            + np.array(y_array)[None,:,None]**2
            + np.array(z_array)**2
           )
</code></pre>",1
751,66464178,how to turn three 1D arrays into one 3D array by calculating the euclidian metric,"<p>I have three arrays:</p>
<pre><code>x_array = [1., 2., 3.]
y_array = [1., 2., 3.]
z_array = [1., 2., 3.]
</code></pre>
<p>These 3 arrays define the axis for a 3D array. I would like to calculate the Euclidian metric like</p>
<pre><code>array3D = np.array((3, 3, 3))
for ix in range(0, 3):
    for iy in range(0, 3):
        for iz in range(0, 3):
            dist = np.sqrt(x_array[ix]**2 + y_array[iy]**2 + z_array[iz]**2)
            array3D[ix][iy][iz] = dist
</code></pre>
<p>Is there a faster way than three <code>for</code> loops?</p>",python|arrays|numpy,"<p>For completeness, you can use <code>np.add.outer</code>:</p>
<pre><code>np.sqrt(np.add.outer(np.add.outer(x**2, y**2), z**2))
</code></pre>",1
752,66590263,Authentication credentials were not provided on login with username and password,"<p>I have a such misunderstanding with my django</p>
<p>I make a login from DJANGO built in view for testing, lofin is successful</p>
<p><a href=""https://i.stack.imgur.com/tZ4D3.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/tZ4D3.png"" alt=""DJANGO BUILD IN VIEW"" /></a></p>
<p>But from postman or any other place i get an ERROR <em><strong>Authentication credentials were not provided</strong></em></p>
<p><a href=""https://i.stack.imgur.com/fu2TN.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/fu2TN.png"" alt=""POSTMAN LOGIN"" /></a></p>
<p><strong>CAN ANYBODY PLEASE EXPLAIN WHAT IS WRONG!!!</strong></p>
<p>If i did not provide full explanation, please inform me, and i will add</p>
<p><strong>This is settings.py</strong></p>
<pre><code>    DEBUG = True

ALLOWED_HOSTS = ['127.0.0.1', 'localhost']


# Application definition

INSTALLED_APPS = [
    &quot;django.contrib.admin&quot;,
    &quot;django.contrib.auth&quot;,
    &quot;django.contrib.contenttypes&quot;,
    &quot;django.contrib.sessions&quot;,
    &quot;django.contrib.messages&quot;,
    &quot;django.contrib.staticfiles&quot;,
    &quot;tsundoku&quot;,
    'rest_framework',
    'rest_framework.authtoken',
    'corsheaders'
]

MIDDLEWARE = [
    'corsheaders.middleware.CorsMiddleware',
    &quot;django.middleware.security.SecurityMiddleware&quot;,
    &quot;django.contrib.sessions.middleware.SessionMiddleware&quot;,
    &quot;django.middleware.common.CommonMiddleware&quot;,
    &quot;django.middleware.csrf.CsrfViewMiddleware&quot;,
    &quot;django.contrib.auth.middleware.AuthenticationMiddleware&quot;,
    &quot;django.contrib.messages.middleware.MessageMiddleware&quot;,
    &quot;django.middleware.clickjacking.XFrameOptionsMiddleware&quot;,
]

CORS_ALLOWED_ORIGINS = [
    &quot;http://localhost:3000&quot;,
]

ROOT_URLCONF = &quot;backend.urls&quot;

TEMPLATES = [
    {
        &quot;BACKEND&quot;: &quot;django.template.backends.django.DjangoTemplates&quot;,
        &quot;DIRS&quot;: [],
        &quot;APP_DIRS&quot;: True,
        &quot;OPTIONS&quot;: {
            &quot;context_processors&quot;: [
                &quot;django.template.context_processors.debug&quot;,
                &quot;django.template.context_processors.request&quot;,
                &quot;django.contrib.auth.context_processors.auth&quot;,
                &quot;django.contrib.messages.context_processors.messages&quot;,
            ],
        },
    },
]

WSGI_APPLICATION = &quot;backend.wsgi.application&quot;


# Database
# https://docs.djangoproject.com/en/3.1/ref/settings/#databases

DATABASES = {
    &quot;default&quot;: {
        &quot;ENGINE&quot;: &quot;django.db.backends.sqlite3&quot;,
        &quot;NAME&quot;: BASE_DIR / &quot;db.sqlite3&quot;,
    }
}


# Password validation
# https://docs.djangoproject.com/en/3.1/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        &quot;NAME&quot;: &quot;django.contrib.auth.password_validation.UserAttributeSimilarityValidator&quot;,
    },
    {
        &quot;NAME&quot;: &quot;django.contrib.auth.password_validation.MinimumLengthValidator&quot;,
    },
    {
        &quot;NAME&quot;: &quot;django.contrib.auth.password_validation.CommonPasswordValidator&quot;,
    },
    {
        &quot;NAME&quot;: &quot;django.contrib.auth.password_validation.NumericPasswordValidator&quot;,
    },
]


# Internationalization
# https://docs.djangoproject.com/en/3.1/topics/i18n/

LANGUAGE_CODE = &quot;en-us&quot;

TIME_ZONE = &quot;UTC&quot;

USE_I18N = True

USE_L10N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/3.1/howto/static-files/

STATIC_URL = '/static/'
# MEDIA_URL this is for displaying image in browser ex. http://localhost:8000/images/d14f96e4b0e94973b151ea8097e28c01.jpg
MEDIA_URL = '/images/'
STATICFILES_DIRS = (
    os.path.join(BASE_DIR, &quot;static&quot;),
)
# MEDIA_ROOT this is the directory where the images will be saved
MEDIA_ROOT = os.path.join(
    BASE_DIR, f'tsundoku/static/images/')
STATIC_ROOT = os.path.join(os.path.dirname(BASE_DIR), &quot;static/&quot;)


REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        # 'rest_framework_simplejwt.authentication.JWTAuthentication',
        'rest_framework.authentication.BasicAuthentication',
        'rest_framework.authentication.SessionAuthentication',
        'rest_framework.authentication.TokenAuthentication',
        # 'rest_framework_jwt.authentication.JSONWebTokenAuthentication',
    ),
    'DEFAUlt_filter_classes': (
        'django_filters.rest_framework.DjangoFilterBackend',
    ),
    'DEFAULT_PARSER_CLASSES': (
        'rest_framework.parsers.JSONParser',
    ),
    'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.IsAuthenticated',
    )
}
</code></pre>
<p><strong>Ptoject usrl.py</strong></p>
<pre><code>    from django.contrib import admin
from django.conf import settings
from django.urls import path, include
from django.conf.urls.static import static
from rest_framework.routers import DefaultRouter
from rest_framework_simplejwt import views as jwt_views

print('project -&gt; urls.py initialised')

router = DefaultRouter()

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('tsundoku.urls')),
    path('api/token/', jwt_views.TokenObtainPairView.as_view(),
         name='token_obtain_pair'),
    path('api/token/refresh/', jwt_views.TokenRefreshView.as_view(),
         name='token_refresh'),

]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL,
                          document_root=settings.MEDIA_ROOT)
</code></pre>
<p><strong>App urls.py</strong></p>
<pre><code>    from django.urls import include, path, re_path
from rest_framework import routers
from rest_framework.authtoken.views import obtain_auth_token
from . import views
from rest_framework.urlpatterns import format_suffix_patterns
import django

print('tsundoku -&gt; urls.py initialised')


# Wire up our API using automatic URL routing.
# Additionally, we include login URLs for the browsable API.
urlpatterns = [
    re_path(r'^books/$', views.BooksList.as_view(), name='all-books'),
    re_path(r'^books/?(?P&lt;active&gt;[0-1])/$',
            views.BooksList.as_view(), name='all-active-books'),
    path('book/&lt;int:pk&gt;/',
         views.books_details, name='single-book'),
    path('userbook/', views.userbook_list, name='userbook'),
    path('banner/', views.banners, name='banner'),
    # re_path(
    # r'login/(?P&lt;username&gt;[^[^-\.][\w-\.]+@([\w-]+\.)+[\w-]{2,4}])/(?P&lt;password&gt;[.]{1,})$', views.Login, name='Login'),
    path('register/', views.RegisterView.as_view(), name='register'),
    path('login/', views.LoginView.as_view(), name='login'),

    path('hello/', views.TestAuth.as_view(), name='hello'),
    path('accounts/', include('django.contrib.auth.urls')),
    # To get a token by username and pwd
    path('api-token-auth/', obtain_auth_token, name='api-token-auth'),
]

urlpatterns = format_suffix_patterns(urlpatterns)
</code></pre>
<p><strong>Serializer</strong></p>
<pre><code>class LoginSerializer(serializers.Serializer):
    print('serializers.py -&gt; LoginSerializer')

    email = serializers.CharField(max_length=50)
    password = serializers.CharField(max_length=255)

    def printa(self, data):
        print('login')
</code></pre>
<p><strong>View</strong></p>
<pre><code>class LoginView(APIView):
    print('login_register-view.py -&gt; Login')

    def post(self, request, *args, **kwargs):
        print(request)
        serializer = LoginSerializer(data=request.data)
        if serializer.is_valid():
            &quot;&quot;&quot;
            User may login with mail and username, 
            so first we check it and throw error if not user found in DB
            &quot;&quot;&quot;
            username = serializer.data['email']
            if '@' in serializer.data['email']:
                try:
                    username = User.objects.get(
                        email__exact=serializer.data['email']).username
                except User.DoesNotExist:
                    username = None
            password = serializer.data['password']
            print('username', username)
            user = authenticate(
                username=username, password=password)
            print('active user: ', user)
            if user is not None:
                if not User.is_active:
                    print('user is not active')
                login(request, user)
                token, created = Token.objects.get_or_create(user=user)
                response = {'result': [{
                    'username': username,
                    'token': token.key}],
                    'success': True
                }
                return Response(response, status=status.HTTP_201_CREATED)
            err_response = {'result':
                            [{'error': 'You see this error because you entered invalid credentials or user with this credentials is not active'}],
                            'success': False
                            }
            return Response(err_response, status=status.HTTP_401_UNAUTHORIZED)
        return Response(serializer.errors, status=status.HTTP_401_UNAUTHORIZED)
</code></pre>",python|django|django-rest-framework,"<p>Solved by adding permission classes</p>
<pre><code>class LoginView(APIView):
    print('login_register-view.py -&gt; Login')

    permission_classes = ()

.......
</code></pre>
<p>Based on <a href=""https://stackoverflow.com/a/61643198/11873534"">this</a> answer</p>",0
753,66623583,Getting a list of _ids from MongoDB - Avoiding 'distinct too big',"<p>I have a file which scrapes the data from a sitemap .xml file, and downloads some data from each page. Each time I start the scrape function, I go to this xml to get the URLs to scrape, put them in a list, compare them to the list of url's which I've already downloaded, and therefore just scrape the remainder. I use these URLs as the _id of a mongodb:</p>
<pre><code>list_of_ids = collection.find().distinct('_id')
start_urls = list(set(new_url_list)-(set(list_of_ids)))
</code></pre>
<p>I've now come under a point of receiving the following error:</p>
<pre><code>pymongo.errors.OperationFailure: distinct too big, 16mb cap, full error: {'ok': 0.0, 'errmsg': 'distinct too big, 16mb cap', 'code': 17217, 'codeName': 'Location17217'}
</code></pre>
<p>I assume I could just iterate through the database and append each _id to a list, but whilst I'm not hell-bent on performance, there must be a better way?</p>",python|mongodb|list|pymongo|distinct,"<p>You can the distinct function of <code>pymongo</code> which directly returns you a list</p>
<pre><code>import pymongo
from pymongo import MongoClient

mongo = MongoClient('mongodb://localhost:27017')
db = mongo[dbname][collectionname]

distinct_list = db.distinct('_id')
</code></pre>",0
754,66623583,Getting a list of _ids from MongoDB - Avoiding 'distinct too big',"<p>I have a file which scrapes the data from a sitemap .xml file, and downloads some data from each page. Each time I start the scrape function, I go to this xml to get the URLs to scrape, put them in a list, compare them to the list of url's which I've already downloaded, and therefore just scrape the remainder. I use these URLs as the _id of a mongodb:</p>
<pre><code>list_of_ids = collection.find().distinct('_id')
start_urls = list(set(new_url_list)-(set(list_of_ids)))
</code></pre>
<p>I've now come under a point of receiving the following error:</p>
<pre><code>pymongo.errors.OperationFailure: distinct too big, 16mb cap, full error: {'ok': 0.0, 'errmsg': 'distinct too big, 16mb cap', 'code': 17217, 'codeName': 'Location17217'}
</code></pre>
<p>I assume I could just iterate through the database and append each _id to a list, but whilst I'm not hell-bent on performance, there must be a better way?</p>",python|mongodb|list|pymongo|distinct,"<p><code>_id</code>s have to be distinct, so not sure why you need to use distinct at all, unless it's an easy way to get a list without the clutter.</p>
<p>Try this instead:</p>
<pre><code>list_of_ids = [x['_id'] for x in collection.find({}, {'_id': 1})]
</code></pre>
<p>In fact if you want a set, use the similar:</p>
<pre><code>set_of_ids = {x['_id'] for x in collection.find({}, {'_id': 1})}
</code></pre>",1
755,66689085,Compare two dataframes and add new values in second dataframe to the first data-frame,"<p>I have two dataframes with the same headers</p>
<p>df1\</p>
<pre><code>      **Date  prix moyen    mini   maxi H-Value C-Value**

0   17/09/20     8     6       9    122 2110122\
1   15/09/20     8     6       9    122 2110122\
2   10/09/20     8     6       9    122 2110122
</code></pre>
<p>and</p>
<p>df2</p>
<pre><code>      **Date     prix   moyen    mini   maxi    H-Value C-Value**\
1   07/09/17     1.80    1.50    2.00   170     3360170\
1   17/09/20     8.00    6.00    9.00   122     2110122\
2   17/09/20     9.00    8.00   12.00   122     2150122\
3   17/09/20    10.00    8.00   12.00   122     14210122
</code></pre>
<p>I want to compare the two dataframes alone 3 parameters (Date, H-Value and C-Value), identify the new values present in df2 (values which do not occur in df1) and then append them in df1.</p>
<p>I am using</p>
<pre><code>df_unique = df2[~(df2['Date'].isin(df1['Date']) &amp; df2['H-Value'].isin(df1['H-Value']) &amp; df2['C-Value'].isin(df1['C-Value']) )].dropna().reset_index(drop=True)
</code></pre>
<p>and it is not working in identifying the new values in df2. The resulting table only identifies some values and not others.</p>
<p>Where am I going wrong?</p>",python|pandas|dataframe,"<p>Here's what I try</p>
<pre><code>df1 = pd.concat([df1, df2[~df2.set_index(['Date', 'H-Value', 'C-Value']).index.isin(df1.set_index(['Date', 'H-Value', 'C-Value']).index)]])
</code></pre>",0
756,66689085,Compare two dataframes and add new values in second dataframe to the first data-frame,"<p>I have two dataframes with the same headers</p>
<p>df1\</p>
<pre><code>      **Date  prix moyen    mini   maxi H-Value C-Value**

0   17/09/20     8     6       9    122 2110122\
1   15/09/20     8     6       9    122 2110122\
2   10/09/20     8     6       9    122 2110122
</code></pre>
<p>and</p>
<p>df2</p>
<pre><code>      **Date     prix   moyen    mini   maxi    H-Value C-Value**\
1   07/09/17     1.80    1.50    2.00   170     3360170\
1   17/09/20     8.00    6.00    9.00   122     2110122\
2   17/09/20     9.00    8.00   12.00   122     2150122\
3   17/09/20    10.00    8.00   12.00   122     14210122
</code></pre>
<p>I want to compare the two dataframes alone 3 parameters (Date, H-Value and C-Value), identify the new values present in df2 (values which do not occur in df1) and then append them in df1.</p>
<p>I am using</p>
<pre><code>df_unique = df2[~(df2['Date'].isin(df1['Date']) &amp; df2['H-Value'].isin(df1['H-Value']) &amp; df2['C-Value'].isin(df1['C-Value']) )].dropna().reset_index(drop=True)
</code></pre>
<p>and it is not working in identifying the new values in df2. The resulting table only identifies some values and not others.</p>
<p>Where am I going wrong?</p>",python|pandas|dataframe,"<p>I was actually able to solve the problem. The issue was not the command being used to compare the two datasets but rather the fact that one of the columns in df2 had a data format different from the same column in df1, rendering a direct comparison not possible.</p>",1
757,66689085,Compare two dataframes and add new values in second dataframe to the first data-frame,"<p>I have two dataframes with the same headers</p>
<p>df1\</p>
<pre><code>      **Date  prix moyen    mini   maxi H-Value C-Value**

0   17/09/20     8     6       9    122 2110122\
1   15/09/20     8     6       9    122 2110122\
2   10/09/20     8     6       9    122 2110122
</code></pre>
<p>and</p>
<p>df2</p>
<pre><code>      **Date     prix   moyen    mini   maxi    H-Value C-Value**\
1   07/09/17     1.80    1.50    2.00   170     3360170\
1   17/09/20     8.00    6.00    9.00   122     2110122\
2   17/09/20     9.00    8.00   12.00   122     2150122\
3   17/09/20    10.00    8.00   12.00   122     14210122
</code></pre>
<p>I want to compare the two dataframes alone 3 parameters (Date, H-Value and C-Value), identify the new values present in df2 (values which do not occur in df1) and then append them in df1.</p>
<p>I am using</p>
<pre><code>df_unique = df2[~(df2['Date'].isin(df1['Date']) &amp; df2['H-Value'].isin(df1['H-Value']) &amp; df2['C-Value'].isin(df1['C-Value']) )].dropna().reset_index(drop=True)
</code></pre>
<p>and it is not working in identifying the new values in df2. The resulting table only identifies some values and not others.</p>
<p>Where am I going wrong?</p>",python|pandas|dataframe,"<p>What is your question?</p>
<pre><code>In [4]: df2[~(df2['Date'].isin(df1['Date']) &amp; df2['H-Value'].isin(df1['H-Value']
   ...: ) &amp; df2['C-Value'].isin(df1['C-Value']) )].dropna().reset_index(drop=Tru
   ...: e)
Out[4]: 
   Date      prix  moyen  mini  maxi  H-Value   C-Value
0     1  07/09/17    1.8   1.5   2.0      170   3360170
1     2  17/09/20    9.0   8.0  12.0      122   2150122
2     3  17/09/20   10.0   8.0  12.0      122  14210122
</code></pre>
<p>These are all rows in df2 that are not present in df1. Looks good to me...</p>",1
758,66794328,Saving to Parquet throws an error in Dask.dataframe,"<p>When performing the operation: <code>Dask.dataframe.to_parquet(data)</code>, if <code>data</code> was read via <code>Dask</code> with a given number of partitions, and you try to save it in parquet format after having removed some columns, it fails with e.g. the following error:</p>
<pre><code>FileNotFoundError: [Errno 2] No such file or directory: part.0.parquet'
</code></pre>
<p>Anyone encountered the same issue?</p>
<p>Here is a minimal example - note that way 1 works as expected, while way 2 does NOT:</p>
<pre class=""lang-py prettyprint-override""><code>import numpy as np
import pandas as pd
import dask.dataframe as dd

# -------------
# way 1 - works
# -------------
print('way 1 - start')
A = np.random.rand(200,300)
cols = np.arange(0, A.shape[1])
cols = [str(col) for col in cols]
df = pd.DataFrame(A, columns=cols)
ddf = dd.from_pandas(df, npartitions=11)

# compute and resave
ddf.drop(cols[0:11], axis=1)
dd.to_parquet(
    ddf, 'error.parquet', engine='auto', compression='default',
    write_index=True, overwrite=True, append=False)
print('way 1 - end')

# ----------------------
# way 2 - does NOT work 
# ----------------------
print('way 2 - start')
ddf = dd.read_parquet('error.parquet')

# compute and resave
ddf.drop(cols[0:11], axis=1)
dd.to_parquet(
    ddf, 'error.parquet', engine='auto', compression='default',
    write_index=True, overwrite=True, append=False)
print('way 2 - end')
</code></pre>",python|python-3.x|dask|parquet|dask-dataframe,"<p>Oh, great, you've spotted a bug due to <code>overwrite=True</code> option. So what happens is when <code>overwrite=True</code> option is set, dask removes the path, see <a href=""https://github.com/dask/dask/blob/f41325512a4251dbaa7f7c781414d913066a6c34/dask/dataframe/io/parquet/core.py#L512-L532"" rel=""nofollow noreferrer"">these lines</a>. Now, in your example <code>ddf</code> is lazy, so when it's time to write the data, dask tries to read the files, but they are already gone by now.</p>
<p>So one work-around solution is to save the new dataframe into a different path, then remove the old folder and move the new dataframe's folder to the old folder (some of the options are <a href=""https://stackoverflow.com/questions/6996603/how-to-delete-a-file-or-folder"">here</a>).</p>
<p>Another option is to load the <code>ddf</code> in memory (if it fits) and then use your code:</p>
<pre class=""lang-py prettyprint-override""><code>print('way 2 - start')
ddf = dd.read_parquet('error.parquet')

# # compute and persist in memory (note do not use
# # .compute because the dataframe will turn into
# # pandas data frame
ddf = ddf.drop(cols[0:11], axis=1)
ddf = ddf.persist()
dd.to_parquet(
    ddf, 'error.parquet', engine='auto', compression='default',
    write_index=True, overwrite=True, append=False)
# print('way 2 - end')
</code></pre>
<p>As a side note, when you run <code>ddf.drop(cols[0:11], axis=1)</code>, if you want this to be changed in the dataframe, you will need to assign it:</p>
<pre class=""lang-py prettyprint-override""><code>ddf = ddf.drop(cols[0:11], axis=1)
</code></pre>
<p>update: there is some relevant discussion <a href=""https://github.com/dask/dask/issues/7466"" rel=""nofollow noreferrer"">here</a></p>",2
759,66561789,Training Graph Neural Network (GNN) to create Embeddings using spektral,"<p>I am working to create a Graph Neural Network (GNN) which can create embeddings of the input graph for its usage in other applications like Reinforcement Learning.</p>
<p>I have started with example from the spektral library <a href=""https://github.com/danielegrattarola/spektral/blob/master/examples/graph_prediction/tud_gin.py"" rel=""nofollow noreferrer"">TUDataset classification with GIN</a> and modified it to divide the network into two parts. The first part to produce embeddings and second part to produce classification. My goal is to train this network using supervised learning on dataset with graph labels e.g. TUDataset and use the first part (embedding generation) once trained in other applications.</p>
<p>I am getting different results from my approach in two different datasets. The TUDataset shows improved loss and accuracy with this new approach whereas the other other local dataset shows significant increase in the loss.</p>
<p>Can I get any feedback if my approach to create embedding is appropriate or any suggestions for further improvement?</p>
<p>here is my code used to generate graph embeddings:</p>
<pre><code>import numpy as np
import tensorflow as tf
from tensorflow.keras.layers import Dense, Dropout
from tensorflow.keras.losses import CategoricalCrossentropy
from tensorflow.keras.metrics import categorical_accuracy
from tensorflow.keras.models import Model, Sequential
from tensorflow.keras.optimizers import Adam

from spektral.data import DisjointLoader
from spektral.datasets import TUDataset
from spektral.layers import GINConv, GlobalAvgPool

################################################################################
# PARAMETERS
################################################################################
learning_rate = 1e-3  # Learning rate
channels = 128  # Hidden units
layers = 3  # GIN layers
epochs = 300  # Number of training epochs
batch_size = 32  # Batch size

################################################################################
# LOAD DATA
################################################################################
dataset = TUDataset(&quot;PROTEINS&quot;, clean=True)

# Parameters
F = dataset.n_node_features  # Dimension of node features
n_out = dataset.n_labels  # Dimension of the target

# Train/test split
idxs = np.random.permutation(len(dataset))
split = int(0.9 * len(dataset))
idx_tr, idx_te = np.split(idxs, [split])
dataset_tr, dataset_te = dataset[idx_tr], dataset[idx_te]

loader_tr = DisjointLoader(dataset_tr, batch_size=batch_size, epochs=epochs)
loader_te = DisjointLoader(dataset_te, batch_size=batch_size, epochs=1)

################################################################################
# BUILD MODEL
################################################################################
class GIN0(Model):
    def __init__(self, channels, n_layers):
        super().__init__()
        self.conv1 = GINConv(channels, epsilon=0, mlp_hidden=[channels, channels])
        self.convs = []
        for _ in range(1, n_layers):
            self.convs.append(
                GINConv(channels, epsilon=0, mlp_hidden=[channels, channels])
            )
        self.pool = GlobalAvgPool()
        self.dense1 = Dense(channels, activation=&quot;relu&quot;)

    def call(self, inputs):
        x, a, i = inputs
        x = self.conv1([x, a])
        for conv in self.convs:
            x = conv([x, a])
        x = self.pool([x, i])
        return self.dense1(x)


# Build model
model = GIN0(channels, layers)
model_op = Sequential()
model_op.add(Dropout(0.5, input_shape=(channels,)))
model_op.add(Dense(n_out, activation=&quot;softmax&quot;))
opt = Adam(lr=learning_rate)
loss_fn = CategoricalCrossentropy()


################################################################################
# FIT MODEL
################################################################################
@tf.function(input_signature=loader_tr.tf_signature(), experimental_relax_shapes=True)
def train_step(inputs, target):
    with tf.GradientTape(persistent=True) as tape:
        node2vec = model(inputs, training=True)
        predictions = model_op(node2vec, training=True)
        loss = loss_fn(target, predictions)
        loss += sum(model.losses)
    gradients = tape.gradient(loss, model.trainable_variables)
    opt.apply_gradients(zip(gradients, model.trainable_variables))
    gradients2 = tape.gradient(loss, model_op.trainable_variables)
    opt.apply_gradients(zip(gradients2, model_op.trainable_variables))
    acc = tf.reduce_mean(categorical_accuracy(target, predictions))
    return loss, acc


print(&quot;Fitting model&quot;)
current_batch = 0
model_lss = model_acc = 0
for batch in loader_tr:
    lss, acc = train_step(*batch)

    model_lss += lss.numpy()
    model_acc += acc.numpy()
    current_batch += 1
    if current_batch == loader_tr.steps_per_epoch:
        model_lss /= loader_tr.steps_per_epoch
        model_acc /= loader_tr.steps_per_epoch
        print(&quot;Loss: {}. Acc: {}&quot;.format(model_lss, model_acc))
        model_lss = model_acc = 0
        current_batch = 0

################################################################################
# EVALUATE MODEL
################################################################################
def tolist(predictions):
    result = []
    for item in predictions:
        result.append((float(item[0]), float(item[1])))
    return result
loss_data = []
print(&quot;Testing model&quot;)
model_lss = model_acc = 0
for batch in loader_te:
    inputs, target = batch
    node2vec = model(inputs, training=False)
    predictions = model_op(node2vec, training=False)
    predictions_list = tolist(predictions)
    loss_data.append(zip(target,predictions_list))
    model_lss += loss_fn(target, predictions)
    model_acc += tf.reduce_mean(categorical_accuracy(target, predictions))
model_lss /= loader_te.steps_per_epoch
model_acc /= loader_te.steps_per_epoch
print(&quot;Done. Test loss: {}. Test acc: {}&quot;.format(model_lss, model_acc))
for batchi in loss_data:
    for item in batchi:
        print(list(item),'\n')
</code></pre>",python|machine-learning|neural-network,"<p>Your approach to generate graph embeddings is correct, the <code>GIN0</code> model will return a vector given a graph.</p>
<p>This code here, however, seems weird:</p>
<pre class=""lang-py prettyprint-override""><code>gradients = tape.gradient(loss, model.trainable_variables)
opt.apply_gradients(zip(gradients, model.trainable_variables))
gradients2 = tape.gradient(loss, model_op.trainable_variables)
opt.apply_gradients(zip(gradients2, model_op.trainable_variables))
</code></pre>
<p>What you're doing here is that you're updating the weights of <code>model</code> twice, and the weights of <code>model_op</code> once.</p>
<p>When you compute the loss in the context of a <code>tf.GradientTape</code>, all computations that went into computing the final value are tracked. This means that if you call <code>loss = foo(bar(x))</code> and then compute the training step using that loss, the weights of both <code>foo</code> and <code>bar</code> will be updated.</p>
<p>Besides this, I don't see issues with the code so it will mostly depend on the local dataset that you are using.</p>
<p>Cheers</p>",1
760,66590974,print the key&value from dict indecending and the same value needed to be additionally sorted lexicographically,"<p>I have a dictionary with string-type keys and float-type values.
I sort the dictionary by the value in descending order and wang to print the v=keys and values;</p>
<pre><code>sum_count = sum(character_dist.values())
character_dist_2 = {k: v/sum_count for k,v in character_dist.items()}

sorted_dict = {}
sorted_keys = sorted(character_dist_2, key=character_dist_2.get,reverse=True)  # [1, 3, 2]

for w in sorted_keys:
    sorted_dict[w] = character_dist_2[w]
</code></pre>
<p>the sample for keys and values:</p>
<pre><code>,_and_ 0.0029020624
_that_ 0.0020209420
_with_ 0.0016136799
n_the_ 0.0014651189
_and_t 0.0013601016
d_the_ 0.0011884881
_of_th 0.0011859267
and_th 0.0011167690
nd_the 0.0011065234
_they_ 0.0010424884
of_the 0.0010143131
e_was_ 0.0010143131
_and_s 0.0009886991
t_the_ 0.0009554010
_the_s 0.0009528396
f_the_ 0.0009374712
_in_th 0.0008964888
in_the 0.0008426995
</code></pre>
<p>I want to print 20 samples from the dictionary, but I don't know how to code if several keys have the same values, keys are additionally sorted lexicographically.</p>
<pre><code>L = 20
original_N = L
for key, value in sorted_dict.items():

  # this is the part I don't know
  if L !=0:
    print(&quot;% s %.10f&quot; %(key, value))
    L = L-1
</code></pre>
<p>Thanks</p>",python,"<p>You can sort the dictionary keys and values together and use that to form the new dictionary directly:</p>
<pre><code>sorted_dict = dict(sorted(character_dist_2.items(),key=lambda kv:(-kv[1],kv[0])))
</code></pre>
<p>The sort key here is a tuple combining the negative value with the key.  This will make values sort in descending order with the keys in ascending order for identical values.</p>
<p>Example:</p>
<pre><code>character_dist   = {&quot;gg&quot;: 1, &quot;hh&quot;: 2, &quot;tt&quot;: 2, &quot;qq&quot;:3, &quot;ww&quot;: 4, &quot;oo&quot;:5, &quot;pp&quot;: 6}
sum_count        = sum(character_dist.values())
character_dist_2 = {k: v/sum_count for k,v in character_dist.items()}
sorted_dict = dict(sorted(character_dist_2.items(),key=lambda kv:(-kv[1],kv[0])))

print(sorted_dict)

{'pp': 0.2608695652173913,   # values in descending order
 'oo': 0.21739130434782608, 
 'ww': 0.17391304347826086, 
 'qq': 0.13043478260869565, 
 'hh': 0.08695652173913043,  # same value,  
 'tt': 0.08695652173913043,  # lexicographic order
 'gg': 0.043478260869565216}
</code></pre>",1
761,66517764,Removing part of string in a python set,"<h3>What is the pythonic way to remove all the parts of string upto and including dot from a set</h3>
<pre><code>theSet={'products.add_product','products.add_category','books.view_books','cats.change_cats'} 

#desired output
newSet = {'add_product','add_category','view_books', 'change_cats'}
</code></pre>",python|string|set,"<p>Try <code>string.split</code></p>
<pre class=""lang-py prettyprint-override""><code>{i.split('.')[-1] for i in theSet}
</code></pre>
<pre><code>{'add_category', 'add_product', 'change_cats', 'view_books'}
</code></pre>
<p><strong>NOTE</strong>: The order does not matter since it is <code>set</code></p>",2
762,66517764,Removing part of string in a python set,"<h3>What is the pythonic way to remove all the parts of string upto and including dot from a set</h3>
<pre><code>theSet={'products.add_product','products.add_category','books.view_books','cats.change_cats'} 

#desired output
newSet = {'add_product','add_category','view_books', 'change_cats'}
</code></pre>",python|string|set,"<p>Using <a href=""https://www.programiz.com/python-programming/methods/string/index"" rel=""nofollow noreferrer""><code>str.index()</code></a></p>
<pre><code>data = {'products.add_product', 'products.add_category',
        'books.view_books', 'cats.change_cats'}
result = {word[word.index(&quot;.&quot;) + 1:] for word in data}

print(result)

</code></pre>
<p>Gives : output order may vary because a set is an unordered collection of items.</p>
<pre><code>{'view_books', 'change_cats', 'add_category', 'add_product'}
</code></pre>",2
763,66714684,Trying to print cluster names and labels. Getting some overlapping results,"<p>I am print out clusters of categorical codes and labels.  I am fitting a dataframe that looks like this.</p>
<pre><code>market_cat  local_market_cat    city_cat    state_cat   days_between_Complete
2           0                   30          8           9
2           0                   30          8           1
2           0                   28          8           284
2           0                   30          8           304
2           0                   14          8           334
</code></pre>
<h1></h1>
<pre><code>y = fuss_2019['days_between_Complete']
X = fuss_2019[['market_cat',
               'local_market_cat',
               'city_cat',
               'state_cat']]

df = pd.DataFrame()
df = pd.concat([X, y], axis=1)

from pandas import DataFrame
import matplotlib.pyplot as plt
from sklearn.cluster import KMeans

kmeans = KMeans(n_clusters=3).fit(df)
centroids = kmeans.cluster_centers_
</code></pre>
<p>Now, I am trying to join two dataframes on the index, then print out the city names and cluster IDs.</p>
<pre><code>df1=df
df2=fuss_2019
merged = df1.merge(df2, left_index=True, right_index=True)

kmeans = KMeans(n_clusters=4)
kmeans.fit(df)

details = [(name, cluster) for name, cluster in zip(merged['city'],kmeans.labels_)]
for detail in details:
    print(detail)
</code></pre>
<p>Here are my results:</p>
<pre><code>('Indianapolis', 0)
('Indianapolis', 0)
('Greenwood', 1)
('Indianapolis', 1)
etc.,
('New York', 0)
('Yonkers', 2)
('New York', 0)
('New York', 2)
etc.,
</code></pre>
<p>What would why would Indianapolis be in both cluster 0 and 1? Also, why would New York be in cluster 0 and 2?  Did I miss something here, or can the same city end up in two different clusters?  KMeans is non-overlapping, right.</p>",python|python-3.x|cluster-analysis|k-means,"<p>I found this to be a great resource.</p>
<pre><code>import csv
import pandas as pd
import matplotlib.pyplot as plt
from sklearn import cluster

df = pd.read_csv ('C:\\your_path_here\\cities.csv')
print(df)

cities = df

# K-means clustering based on longitude-latitude
kmeans = cluster.KMeans(10)
kmeans.fit(cities[['longitude', 'latitude']])
labels = kmeans.labels_
plt.scatter(cities['longitude'], cities['latitude'], c=labels)
plt.show()
</code></pre>
<p><a href=""https://i.stack.imgur.com/wOvax.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/wOvax.png"" alt=""enter image description here"" /></a></p>
<pre><code># Try different values for K
# Now with centroids
kmeans = cluster.KMeans(5)
kmeans.fit(cities[['longitude', 'latitude']])
labels = kmeans.labels_
centroids = kmeans.cluster_centers_
plt.scatter(cities['longitude'], cities['latitude'], c=labels)
plt.scatter(centroids[:,0], centroids[:,1], marker='x', c='black')
plt.show()
</code></pre>
<p><a href=""https://i.stack.imgur.com/d7PnE.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/d7PnE.png"" alt=""enter image description here"" /></a></p>
<pre><code># K-means clustering based on temperature
kmeans = cluster.KMeans(3)
kmeans.fit(cities[['temperature']])
labels = kmeans.labels_
centroids = kmeans.cluster_centers_
plt.scatter(cities['longitude'], cities['latitude'], c=labels)
plt.show()
</code></pre>
<p><a href=""https://i.stack.imgur.com/srzkA.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/srzkA.png"" alt=""enter image description here"" /></a></p>
<pre><code>details = [(name, cluster) for name, cluster in zip(df['city'],kmeans.labels_)]
for detail in details:
    print(detail)
</code></pre>
<p>Results:</p>
<pre><code>('Aalborg', 0)
('Aberdeen', 1)
('Abisko', 0)
('Adana', 2)
('Albacete', 2)
('Algeciras', 2)
('Amiens', 1)
('Amsterdam', 1)
('Ancona', 2)
('Andorra', 1)
('Angers', 1)
('Ankara', 1)
</code></pre>
<p><a href=""https://www.instabase.com/widom/ML-Python/fs/Instabase%20Drive/Cities.csv"" rel=""nofollow noreferrer"">https://www.instabase.com/widom/ML-Python/fs/Instabase%20Drive/Cities.csv</a></p>",0
764,66563603,"KeyError: Int64Index([1], dtype='int64') when using drop_duplicates","<p>I wrote a simple script that supposed to merge (union) some dataframes and remove the duplicates.</p>
<p>For example,
For the input:</p>
<pre><code>df_A:
a  1
b  2

df_B:
b  2
c  3
</code></pre>
<p>The expected output would be:</p>
<pre><code>df_out:
a  1
b  2
c  3
</code></pre>
<p>I wrote the following code:</p>
<pre><code>def read_dataframes(filenames, basedir):
    return [pd.read_csv(basedir + file, sep='\t', header=None, quoting=csv.QUOTE_NONE) for file in filenames]


def merge_dataframes(dfs, out):
    merged = pd.concat(dfs).drop_duplicates(subset=[0, 1]).reset_index(drop=True)
    merged = merged.iloc[:, [0, 1, 2, 7, 8, 9]]
    merged.to_csv(out, header=None, index=None, sep='\t')
</code></pre>
<p>and I am calling these functions in the following manner:</p>
<pre><code>merge_dataframes(read_dataframes(filenames, basedir), output)
</code></pre>
<p>I am getting an exception of <code>KeyError</code>:</p>
<pre><code>Traceback (most recent call last):
  File &quot;analysis_and_visualization.py&quot;, line 70, in &lt;module&gt;
    merge_dataframes(read_dataframes(wild_emb, wild_basedir), 'wild_emb_merged')
  File &quot;analysis_and_visualization.py&quot;, line 17, in merge_dataframes
    merged = pd.concat(dfs).drop_duplicates(subset=[0, 1]).reset_index(drop=True)
  File &quot;/Data/user/eliran/.local/lib/python3.6/site-packages/pandas/core/frame.py&quot;, line 5112, in drop_duplicates
    duplicated = self.duplicated(subset, keep=keep)
  File &quot;/Data/user/eliran/.local/lib/python3.6/site-packages/pandas/core/frame.py&quot;, line 5248, in duplicated
    raise KeyError(diff)
KeyError: Int64Index([1], dtype='int64')

</code></pre>
<p>What am I doing wrong?</p>",python|pandas,"<p>Going over the <a href=""https://github.com/pandas-dev/pandas/blob/v1.2.3/pandas/core/frame.py#L5186-L5281"" rel=""nofollow noreferrer"">source code</a> in <code>frame.py</code> and the function <code>duplicated</code></p>
<p>it seems that all the columns in your dataframe don't exist.</p>
<h2><code>Class DataFrame()</code></h2>
<h3><code>def duplicated(self)</code> - snippet</h3>
<pre><code>  # Verify all columns in subset exist in the queried dataframe
        # Otherwise, raise a KeyError, same as if you try to __getitem__ with a
        # key that doesn't exist.
        diff = Index(subset).difference(self.columns)
        if not diff.empty:
            raise KeyError(diff)
</code></pre>
<hr />
<pre><code>df = pd.DataFrame({'col1' : [0,1,2], 'col3' : [1,2,3]})

print(df)

  col1  col3
0     0     1
1     1     2
2     2     3


df.drop_duplicates(subset=['col1','col2'])

   5246         diff = Index(subset).difference(self.columns)
   5247         if not diff.empty:
-&gt; 5248             raise KeyError(diff)
   5249 
   5250         vals = (col.values for name, col in self.items() if name in subset)

KeyError: Index(['col2'], dtype='object')
</code></pre>",1
765,66563603,"KeyError: Int64Index([1], dtype='int64') when using drop_duplicates","<p>I wrote a simple script that supposed to merge (union) some dataframes and remove the duplicates.</p>
<p>For example,
For the input:</p>
<pre><code>df_A:
a  1
b  2

df_B:
b  2
c  3
</code></pre>
<p>The expected output would be:</p>
<pre><code>df_out:
a  1
b  2
c  3
</code></pre>
<p>I wrote the following code:</p>
<pre><code>def read_dataframes(filenames, basedir):
    return [pd.read_csv(basedir + file, sep='\t', header=None, quoting=csv.QUOTE_NONE) for file in filenames]


def merge_dataframes(dfs, out):
    merged = pd.concat(dfs).drop_duplicates(subset=[0, 1]).reset_index(drop=True)
    merged = merged.iloc[:, [0, 1, 2, 7, 8, 9]]
    merged.to_csv(out, header=None, index=None, sep='\t')
</code></pre>
<p>and I am calling these functions in the following manner:</p>
<pre><code>merge_dataframes(read_dataframes(filenames, basedir), output)
</code></pre>
<p>I am getting an exception of <code>KeyError</code>:</p>
<pre><code>Traceback (most recent call last):
  File &quot;analysis_and_visualization.py&quot;, line 70, in &lt;module&gt;
    merge_dataframes(read_dataframes(wild_emb, wild_basedir), 'wild_emb_merged')
  File &quot;analysis_and_visualization.py&quot;, line 17, in merge_dataframes
    merged = pd.concat(dfs).drop_duplicates(subset=[0, 1]).reset_index(drop=True)
  File &quot;/Data/user/eliran/.local/lib/python3.6/site-packages/pandas/core/frame.py&quot;, line 5112, in drop_duplicates
    duplicated = self.duplicated(subset, keep=keep)
  File &quot;/Data/user/eliran/.local/lib/python3.6/site-packages/pandas/core/frame.py&quot;, line 5248, in duplicated
    raise KeyError(diff)
KeyError: Int64Index([1], dtype='int64')

</code></pre>
<p>What am I doing wrong?</p>",python|pandas,"<p>I think problem here is not column <code>1</code>, because first column is converted to <code>index</code>, so some or all DataFrames has only one column called <code>0</code>.</p>
<p>For prevent it use <code>index_col=False</code> parameter in <a href=""http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html"" rel=""nofollow noreferrer""><code>read_csv</code></a>:</p>
<pre><code>def read_dataframes(filenames, basedir):
    return [pd.read_csv(basedir + file, sep='\t', header=None, quoting=csv.QUOTE_NONE, index_col=False) for file in filenames]
</code></pre>
<p>Another problem should be for some reason there is only one column of data, so second column called <code>2</code> not exist.</p>",1
766,66736011,Why sympy can't calculate?,"<pre><code>    import sympy as sp
import matplotlib.pyplot as plt

# set
Cd = 0.25
g = 9.81
pf = 10**(-6)  # Perturbation Fraction
t = 4
v = 36
xr = [int(input('initial guess : '))]
i = 0
Ea = 1
Es = 0.01

# 함수 정의
def f(m):
    return sp.sqrt(g * m / Cd) * sp.tanh(sp.sqrt(g * Cd / m) * t) - v

# real root
x = sp.Symbol('x')
ans = sp.solve(f(x))  # sp.solve()로 해 구하기
print(ans)
</code></pre>
<p>i want to get real root of f(x).
but this code have some problem in line for # real root
i can't figure out</p>",python|sympy,"<p>If you look at your expression for <code>f(x)</code> you will see that it is highly non-linear (as also shown in the plot that JoahnC showed you):</p>
<pre><code>6.26418390534633*sqrt(x)*tanh(6.26418390534633*sqrt(1/x)) - 36
</code></pre>
<p>SymPy cannot give an analytical solution for something that has no such solution. It can, however, give numerical approximations for univariate expressions. That's what <code>nsolve</code> is for. It needs an initial guess for the solution (as you anticipated by asking for <code>xr</code>).</p>
<pre><code>&gt;&gt;&gt; sp.nsolve(f(x), 100)
142.737633108449
</code></pre>",1
767,66736011,Why sympy can't calculate?,"<pre><code>    import sympy as sp
import matplotlib.pyplot as plt

# set
Cd = 0.25
g = 9.81
pf = 10**(-6)  # Perturbation Fraction
t = 4
v = 36
xr = [int(input('initial guess : '))]
i = 0
Ea = 1
Es = 0.01

# 함수 정의
def f(m):
    return sp.sqrt(g * m / Cd) * sp.tanh(sp.sqrt(g * Cd / m) * t) - v

# real root
x = sp.Symbol('x')
ans = sp.solve(f(x))  # sp.solve()로 해 구하기
print(ans)
</code></pre>
<p>i want to get real root of f(x).
but this code have some problem in line for # real root
i can't figure out</p>",python|sympy,"<p>You should not expect sympy to do miracles. Beyond relatively simple symbolic manipulations, sympy just get stuck, sometimes even returning wrong answers. You have to turn to commercial tools such as Maple or Mathematica in order to crack tough nuts.</p>
<p>Your alternative in most practical cases is to use scipy and get a good numeric solution, which is what you want most of the time rather than a closed form solution.</p>",2
768,66736011,Why sympy can't calculate?,"<pre><code>    import sympy as sp
import matplotlib.pyplot as plt

# set
Cd = 0.25
g = 9.81
pf = 10**(-6)  # Perturbation Fraction
t = 4
v = 36
xr = [int(input('initial guess : '))]
i = 0
Ea = 1
Es = 0.01

# 함수 정의
def f(m):
    return sp.sqrt(g * m / Cd) * sp.tanh(sp.sqrt(g * Cd / m) * t) - v

# real root
x = sp.Symbol('x')
ans = sp.solve(f(x))  # sp.solve()로 해 구하기
print(ans)
</code></pre>
<p>i want to get real root of f(x).
but this code have some problem in line for # real root
i can't figure out</p>",python|sympy,"<p>Sympy is a symbolic math library, trying to find exact symbolic solutions. As such, it doesn't work well with floats, as they are necessarily imprecise.</p>
<p>If your equations are fully numeric, it is usually recommended to employ numeric libraries such as numpy and scipy. If you're already doing symbolic manipulations (e.g. calculating differentials), sympy provides <code>nsolve</code> which calls a numeric solver. As such, it also needs a seed to start its numeric search. In your case it would look like:</p>
<pre class=""lang-py prettyprint-override""><code># ....
xr = 1
ans = sp.nsolve(f(x), xr)
</code></pre>
<p>Result: <code>142.737633108449</code></p>
<p>Sympy also has a way to convert a sympy function to numpy format (in numpy things work much faster, but there are no symbolic expressions). <code>sp.lambdify(x, f(x))</code> creates such a numpy function. Here is how it would look like with your example:</p>
<pre class=""lang-py prettyprint-override""><code>import matplotlib.pyplot as plt
import numpy as np

f_np = sp.lambdify(x, f(x))
xi = np.linspace(1, 1000, 2000)
plt.plot(xi, f_np(xi))
</code></pre>
<p><a href=""https://i.stack.imgur.com/WeHes.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/WeHes.png"" alt=""plotting the lambdified function"" /></a></p>
<p>In an interactive environment, you can <a href=""https://ipython.readthedocs.io/en/stable/interactive/python-ipython-diff.html#accessing-help"" rel=""nofollow noreferrer"">add a question mark</a> to display the numpy source of the function:</p>
<pre><code>&gt;&gt;&gt; f_np?
Signature: f_np(x)
Docstring:
Created with lambdify. Signature:
func(x)
Expression:
6.26418390534633*sqrt(x)*tanh(6.26418390534633*sqrt(1/x)) - 36
Source code:
def _lambdifygenerated(x):
    return (6.26418390534633*sqrt(x)*tanh(6.26418390534633*sqrt(x**(-1.0))) - 36)
</code></pre>",1
769,66554373,"Receiving ""AttributeError: __enter__"" when using SQLAlchemy Session as context manager","<p>I am receiving an <code>AttributeError: __enter__</code> with the following.  This is related to <code>with Session(engine) as session</code>:</p>
<pre><code>from sqlalchemy import create_engine
from sqlalchemy import text
from sqlalchemy.orm import Session
from sqlalchemy import MetaData
from sqlalchemy import Table, Column, Integer, String
from sqlalchemy import ForeignKey

engine = create_engine(&quot;sqlite+pysqlite:///:memory:&quot;, echo=True)

with engine.connect() as conn:
    conn.execute(text(&quot;CREATE TABLE some_table (x int, y int)&quot;))
    conn.execute(text(&quot;INSERT INTO some_table (x, y) VALUES (:x, :y)&quot;),[{&quot;x&quot;: 1, &quot;y&quot;: 1}, {&quot;x&quot;: 2, &quot;y&quot;: 4}])

with engine.begin() as conn:
    conn.execute(text(&quot;INSERT INTO some_table (x, y) VALUES (:x, :y)&quot;),[{&quot;x&quot;: 6, &quot;y&quot;: 8}, {&quot;x&quot;: 9, &quot;y&quot;: 10},
    {&quot;x&quot;: 11, &quot;y&quot;: 12}, {&quot;x&quot;: 13, &quot;y&quot;: 14}])

with engine.connect() as conn:
    result = conn.execute(text(&quot;Select x,y From some_table&quot;))
    for x, y in result:
        print(f&quot;x:{x} y:{y}&quot;)

stmt = text(&quot;SELECT x, y FROM some_table WHERE y &gt; :y ORDER BY x, y&quot;).bindparams(y=6)

with Session(engine) as session:
    result = session.execute(stmt)
    for row in result:
        print(f'x: {row.x}  y: {row.y}')
</code></pre>
<p>I am using the SQLAlchemy version that is included with Anaconda 1.3.23.</p>",python|sqlalchemy,"<p>Running the session construction / close process via context manager like so:</p>
<pre class=""lang-py prettyprint-override""><code>engine = create_engine(...)
Session = sessionmaker(bind=engine)

with Session() as session:
    session.add(something)
    session.commit()
</code></pre>
<p>Is not supported on SQLAlchemy &lt; <code>1.4</code>.</p>
<p>If your version of SQLAlchemy is e.g. <code>1.3.x</code>, you should do instead:</p>
<pre class=""lang-py prettyprint-override""><code>engine = create_engine(...)
Session = sessionmaker(bind=engine)

session = Session()
session.add(something)
session.commit()
</code></pre>
<p>If you really want to use a context manager, and at the same time you need to use SQLAlchemy &lt; <code>1.4</code>, you can use the following approach (copied from the <a href=""https://docs.sqlalchemy.org/en/13/orm/session_basics.html#getting-a-session"" rel=""nofollow noreferrer"">SQLAlchemy docs</a>):</p>
<pre class=""lang-py prettyprint-override""><code>### another way (but again *not the only way*) to do it ###

from contextlib import contextmanager

@contextmanager
def session_scope():
    &quot;&quot;&quot;Provide a transactional scope around a series of operations.&quot;&quot;&quot;
    session = Session()
    try:
        yield session
        session.commit()
    except:
        session.rollback()
        raise
    finally:
        session.close()


def run_my_program():
    with session_scope() as session:
        ThingOne().go(session)
        ThingTwo().go(session)
</code></pre>",2
770,66554768,How do I find the season from the month + date? Python,"<p>I spent way to much time on this, I'm pretty new to python. If someone could help the get the season from the month, and day that would be great, in the current example I'm just trying to get the month working, but if anyone can assist with adding the days that would be great!</p>
<pre><code>    month = int(input(&quot;Enter a month: &quot;))
    day = int(input(&quot;Enter a day: &quot;))

def season(month):
    if (month == &quot;12&quot; or month == &quot;01&quot; or month == &quot;02&quot; or month == &quot;03&quot;):
        return &quot;winter&quot;
        
    elif(month == &quot;04&quot; or month == &quot;05&quot;):
        return &quot;spring&quot;
        
    elif(month ==&quot;06&quot; or month==&quot;07&quot; or month == &quot;08&quot; or month == &quot;09&quot;):
        return &quot;summer&quot;
        
    elif(month ==&quot;10&quot; or month==&quot;11&quot;):
        
        else:
            
        return &quot;fall&quot; 
</code></pre>",python|python-3.x,"<p>Don't check every single possible value of <code>month</code>. Just do an inequality. As norie pointed out, your user inputs are converted to integers anyways so this works perfectly for you.</p>
<pre class=""lang-py prettyprint-override""><code>month = int(input(&quot;Enter a month: &quot;))
day = int(input(&quot;Enter a day: &quot;))

def season(month):
    if (month == 12 or 1 &lt;= month &lt;= 4):
        return &quot;winter&quot;   
    elif (4 &lt;= month &lt;= 5):
        return &quot;spring&quot; 
    elif (6 &lt;= month &lt;= 9):
        return &quot;summer&quot;
    else:
        return &quot;fall&quot;
    
print(season(month))
</code></pre>",1
771,64874304,Assign a variable from a SQLite table entry,"<p>I would like to be able to assign a variable from a SQLite table entry I have, I need to be able to get the QTY of the part_no which will be entered by the user. So the user enters a part number, it then searches the database for the part number, once found assigns a variable with the QTY from the qty column for the searched part.</p>
<p>My table set up is below...</p>
<pre><code>db = sqlite3.connect('db.sqlite3')
cursor = db.cursor()
# Table creation
cursor.execute('''
            CREATE TABLE IF NOT EXISTS spares(
                id INTEGER PRIMARY KEY,
                part_no TEXT,
                desc TEXT,
                qty NUM,
                rack TEXT,
                shelf TEXT)
                ''')
db.commit()
</code></pre>
<p>I'm unsure on how to write the SQL command to do this or if if can be done at all?</p>
<p>What I have done so far is the below, but this does not grab the qty which I need!</p>
<pre><code>selection = askstring('Please enter your Part Number:)

cursor.execute(&quot;SELECT * FROM spares WHERE part_no LIKE '%' || ? || '%'&quot;, (selection,))
</code></pre>
<p>The above returns the searched part number row, but now how do I set a variable with the QTY entry for that part number?</p>
<p>The reason for been able to do this is so I can do math on the qty to either + or - the entry.</p>
<p>Thanks in advance as always :)</p>",python|python-3.x|sqlite,"<p>In the end I did the below...</p>
<pre><code>def remove_data():
    spare_to_remove = askstring('Remove Spare', 'Please enter your part number you wish to remove')
    amount_taken = askstring('Amount Taken', 'Please enter the amount you wish to take')
    amount_taken = int(amount_taken)
    cursor.execute('''SELECT qty FROM spares WHERE part_no LIKE '%' || ? || '%' ''', (spare_to_remove,))
    q_t_y = cursor.fetchone()
    tup_to_int = int(''.join(map(str, q_t_y)))
    sum = (tup_to_int - amount_taken)
    cursor.execute('''UPDATE spares SET (qty) = (?) WHERE part_no = ?''', (sum, spare_to_remove,))
    db.commit()
    messagebox.showinfo('Removed Part', 'Adjusted QTY to ' + str(sum))
</code></pre>
<p>hope this helps anyone else with the same issue!</p>",0
772,64874304,Assign a variable from a SQLite table entry,"<p>I would like to be able to assign a variable from a SQLite table entry I have, I need to be able to get the QTY of the part_no which will be entered by the user. So the user enters a part number, it then searches the database for the part number, once found assigns a variable with the QTY from the qty column for the searched part.</p>
<p>My table set up is below...</p>
<pre><code>db = sqlite3.connect('db.sqlite3')
cursor = db.cursor()
# Table creation
cursor.execute('''
            CREATE TABLE IF NOT EXISTS spares(
                id INTEGER PRIMARY KEY,
                part_no TEXT,
                desc TEXT,
                qty NUM,
                rack TEXT,
                shelf TEXT)
                ''')
db.commit()
</code></pre>
<p>I'm unsure on how to write the SQL command to do this or if if can be done at all?</p>
<p>What I have done so far is the below, but this does not grab the qty which I need!</p>
<pre><code>selection = askstring('Please enter your Part Number:)

cursor.execute(&quot;SELECT * FROM spares WHERE part_no LIKE '%' || ? || '%'&quot;, (selection,))
</code></pre>
<p>The above returns the searched part number row, but now how do I set a variable with the QTY entry for that part number?</p>
<p>The reason for been able to do this is so I can do math on the qty to either + or - the entry.</p>
<p>Thanks in advance as always :)</p>",python|python-3.x|sqlite,"<p>You can use UPDATE query. Insert this query into your <code>execute</code> function:</p>
<pre><code>UPDATE spares SET qty = 'some qty' WHERE part_no LIKE '%' || ? || '%';
</code></pre>",1
773,65117907,How do I write a code for matrix using users input without numpy in python?,"<p>---Without using numpy---</p>
<p>I have to write a code where at i am receiving input from user, <code>n</code>, which is the number of rows of my matrix (integer). afterwards - I will be receiving from the user <code>n</code> rows of the matrix. and then I need to print the matrix, and the numbers should be floating numbers.  For example:</p>
<pre><code>input :
2
12
34
output:
[[1.0, 2.0], [3.0, 4.0]]
</code></pre>
<p>I started writing code.  I need help with converting the numbers from the string to floating numbers. This is the code I started. What do you recommend next?</p>
<pre><code>n = int(input())
matrix= []

for i in range(n):
    row = []
    r = input()
    for j in range(n):
        row.append(r.split())
matrix.append(row)
print(matrix)
</code></pre>",python|python-3.x|for-loop|matrix|floating-point,"<p>You have trouble with:</p>
<pre><code>    row.append(r.split())
</code></pre>
<p>since <code>'12'.split()</code> is simply <code>['12']</code>.</p>
<p>OTOH <code>'1 2'.split()</code> will give <code>['1', '2']</code>, as would <code>list('12')</code>. Then you'll want FP values:</p>
<pre><code>    row.append([float(digit) for digit in r])
</code></pre>",0
774,65117907,How do I write a code for matrix using users input without numpy in python?,"<p>---Without using numpy---</p>
<p>I have to write a code where at i am receiving input from user, <code>n</code>, which is the number of rows of my matrix (integer). afterwards - I will be receiving from the user <code>n</code> rows of the matrix. and then I need to print the matrix, and the numbers should be floating numbers.  For example:</p>
<pre><code>input :
2
12
34
output:
[[1.0, 2.0], [3.0, 4.0]]
</code></pre>
<p>I started writing code.  I need help with converting the numbers from the string to floating numbers. This is the code I started. What do you recommend next?</p>
<pre><code>n = int(input())
matrix= []

for i in range(n):
    row = []
    r = input()
    for j in range(n):
        row.append(r.split())
matrix.append(row)
print(matrix)
</code></pre>",python|python-3.x|for-loop|matrix|floating-point,"<p>You were almost there. You just needed to append a new row twice. You did it only once. Indentation of the <code>matrix.append(row)</code> fixed the problem.</p>
<p>To make a numerical string character as a float number, you can use the build-in <code>float()</code> function. <a href=""https://www.geeksforgeeks.org/float-in-python/"" rel=""nofollow noreferrer"">link</a></p>
<pre><code>n = int(input())
matrix= []

for i in range(n):
    row = []
    r = input()
    for j in range(n):
        row.append(float(r[j]))
    matrix.append(row)
print(matrix)
</code></pre>",0
775,64957441,How to extract the text 5 from the text node within the parent div node using Selenium and Python,"<p>I am trying to extract a text from <code>&lt;div&gt;</code>, which is an inside double quote (refer Screenshot) with <strong>XPath</strong></p>
<pre><code>&lt;div class=&quot;two columns&quot; style=&quot;font-size: 18px; padding-top: 5px;&quot;&gt;
  &lt;img src=&quot;images/spins_s.png&quot; border=&quot;0&quot; style=&quot;margin-bottom: -1px;&quot;&gt; 
   5
&lt;/div&gt;
</code></pre>
<p>I am attaching a screenshot here,
[ https://i.stack.imgur.com/uOmeS.png][1]
While i am trying this xpath expression in cole log its return <strong>correct o/p</strong>,</p>
<pre><code>&gt;&gt;$x(&quot;//div[@class='two columns']/img[@src='images/spins_s.png']/..&quot;)[0].innerText
&gt;&gt;&quot; 5&quot;
</code></pre>
<p>But when I am going to run this <strong>code</strong> In python</p>
<pre><code>spin_balance = browser.find_element_by_xpath(&quot;//div[@class='two columns']/img[@src='images/spins_s.png']/..&quot;)[0].innerText
</code></pre>
<p>it's giving <strong>error</strong> like this</p>
<pre><code>spin_balance = browser.find_element_by_xpath(&quot;//div[@class='two columns']/img[@src='images/spins_s.png']/..&quot;)[0].innerText
TypeError: 'WebElement' object is not subscriptable
</code></pre>
<p>Image of HTML:
<img src=""https://i.stack.imgur.com/uOmeS.png"" alt=""image"" /></p>",python-3.x|selenium|xpath|css-selectors|webdriverwait,"<p>The text <em><strong>5</strong></em> is within a text node. So to print the text you have to induce <a href=""https://stackoverflow.com/questions/49775502/webdriverwait-not-working-as-expected/49775808#49775808"">WebDriverWait</a> for the <code>visibility_of_element_located()</code> and you can use either of the following <a href=""https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890"">Locator Strategies</a>:</p>
<ul>
<li><p>Using <code>CSS_SELECTOR</code> and <em>text</em> attribute:</p>
<pre><code>print(WebDriverWait(driver, 20).until(EC.visibility_of_element_located((By.CSS_SELECTOR, &quot;div.two.columns&quot;))).text)
</code></pre>
</li>
<li><p>Using <code>XPATH</code> and <em>text</em> attribute:</p>
<pre><code>print(WebDriverWait(driver, 20).until(EC.visibility_of_element_located((By.XPATH, &quot;//div[@class='two columns']&quot;))).text)
</code></pre>
</li>
<li><p>Using <code>XPATH</code> and <em>childNodes</em>:</p>
<pre><code>print(driver.execute_script('return arguments[0].lastChild.textContent;', WebDriverWait(driver, 20).until(EC.visibility_of_element_located((By.XPATH, &quot;//div[@class='two columns'][./img[@src='images/spins_s.png']]&quot;)))).strip())
</code></pre>
</li>
<li><p>Using <code>XPATH</code> and <code>splitlines()</code>:</p>
<pre><code>print(WebDriverWait(driver, 20).until(EC.visibility_of_element_located((By.XPATH, &quot;//div[@class='two columns'][./img[@src='images/spins_s.png']]&quot;))).get_attribute(&quot;innerHTML&quot;).splitlines()[2])
</code></pre>
</li>
<li><p><strong>Note</strong> : You have to add the following imports :</p>
<pre><code>from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.common.by import By
from selenium.webdriver.support import expected_conditions as EC
</code></pre>
</li>
</ul>",0
776,65099293,numpy broadcast of vectorized function,"<p>I have a function <code>f</code> that compute the inner-product-like value of 2 vectors (the function is symmetrical, so <code>f(x, y) = f(y, x)</code>). It take 2 1d array of same size and output a single value. Now I have a data matrix <code>X</code> of shape <code>(n, d)</code> (each row represents an input vector), and I would like to compute a matrix <code>K</code> with shape <code>(n, n)</code> such that <code>K[i][j] = f(X[i], X[j])</code>. One way to do this is to use the following code.</p>
<pre class=""lang-py prettyprint-override""><code>import numpy as np
# ... some other code
K = np.zeros((n, n))
for i in range(n):
    for j in range(n):
        K[i][j] = f(X[i], X[j])
</code></pre>
<p>This works, but it's neither elegant nor performant.
Another way to do this is using <code>vectorize</code> from numpy</p>
<pre class=""lang-py prettyprint-override""><code>import numpy as np
# ... some other code
vf = np.vectorize(f, signature=&quot;(n),(n)-&gt;()&quot;)

# this does not work (output shape (n,))
#K = vf(X, X)

# this works (output shape (n, n))
K = vf(X, X[: np.newaxis])

# this also works (output shape (n, n), result same as above)
#K = vf(X[: np.newaxis], X)
</code></pre>
<p>If we put in an array of <code>(n, d)</code> and another array of <code>(n, d)</code>, it will output an 1 dimensional array of <code>(n,)</code>, essentially taking each of the <code>n</code> rows of both matrix as input and thus produce <code>n</code> output. However, if we transform it to <code>X[: np.newaxis]</code>, which has shape <code>(n, 1, d)</code>, it works, but why it works?</p>
<p>I already checked <a href=""https://numpy.org/doc/stable/reference/ufuncs.html"" rel=""nofollow noreferrer"">this</a> and <a href=""https://numpy.org/doc/stable/reference/c-api/generalized-ufuncs.html"" rel=""nofollow noreferrer"">this</a>, but still can't figure out.</p>",python|arrays|numpy,"<p>Another example in addition to @hpaulj's answer</p>
<p>Broadcasting can be used to vectorize your code efficiently. Let's take an example. I have an array (10,2) and I want to take the Euclidean distance between each of the points.</p>
<pre><code>X = np.random.uniform(-5,5,(10,2))
</code></pre>
<p>One way to do this is to broadcast my complete formula for Euclidean distance using NumPy function which supports broadcasting.</p>
<pre><code>np.sqrt(np.sum(np.square(np.subtract(X[:,None,:], X[None,:,:])), axis=-1))

#This returns a (10,10) matrix, with euclidean distance of each of the 10 points to the other
</code></pre>
<p>Similarly, another thing you could do is vectorize your function to behave similar to a numpy function and support broadcasting.</p>
<pre><code>def euclidean(point1, point2):
    return ((point1[0]-point2[0])**2 + (point1[1]-point2[1])**2)**(1/2)

euclidean_v = np.vectorize(euclidean, signature=&quot;(n),(n)-&gt;()&quot;)

euclidean_v(X[:,None,:], X[None,:,:])

#Again returns a (10,10)
</code></pre>
<p>In both cases -</p>
<pre><code>         |--- (10,1,2)--|
(10,2)---|              |---(10,10,2)---&gt;(10,10)
         |--- (1,10,2)--|
</code></pre>",1
777,65099293,numpy broadcast of vectorized function,"<p>I have a function <code>f</code> that compute the inner-product-like value of 2 vectors (the function is symmetrical, so <code>f(x, y) = f(y, x)</code>). It take 2 1d array of same size and output a single value. Now I have a data matrix <code>X</code> of shape <code>(n, d)</code> (each row represents an input vector), and I would like to compute a matrix <code>K</code> with shape <code>(n, n)</code> such that <code>K[i][j] = f(X[i], X[j])</code>. One way to do this is to use the following code.</p>
<pre class=""lang-py prettyprint-override""><code>import numpy as np
# ... some other code
K = np.zeros((n, n))
for i in range(n):
    for j in range(n):
        K[i][j] = f(X[i], X[j])
</code></pre>
<p>This works, but it's neither elegant nor performant.
Another way to do this is using <code>vectorize</code> from numpy</p>
<pre class=""lang-py prettyprint-override""><code>import numpy as np
# ... some other code
vf = np.vectorize(f, signature=&quot;(n),(n)-&gt;()&quot;)

# this does not work (output shape (n,))
#K = vf(X, X)

# this works (output shape (n, n))
K = vf(X, X[: np.newaxis])

# this also works (output shape (n, n), result same as above)
#K = vf(X[: np.newaxis], X)
</code></pre>
<p>If we put in an array of <code>(n, d)</code> and another array of <code>(n, d)</code>, it will output an 1 dimensional array of <code>(n,)</code>, essentially taking each of the <code>n</code> rows of both matrix as input and thus produce <code>n</code> output. However, if we transform it to <code>X[: np.newaxis]</code>, which has shape <code>(n, 1, d)</code>, it works, but why it works?</p>
<p>I already checked <a href=""https://numpy.org/doc/stable/reference/ufuncs.html"" rel=""nofollow noreferrer"">this</a> and <a href=""https://numpy.org/doc/stable/reference/c-api/generalized-ufuncs.html"" rel=""nofollow noreferrer"">this</a>, but still can't figure out.</p>",python|arrays|numpy,"<p>We can illustrate this <code>broadcasting</code> with add:</p>
<pre><code>In [111]: x = np.arange(12).reshape(3,4)
In [112]: x
Out[112]: 
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
In [113]: x + x[:,None]
Out[113]: 
array([[[ 0,  2,  4,  6],
        [ 4,  6,  8, 10],
        [ 8, 10, 12, 14]],

       [[ 4,  6,  8, 10],
        [ 8, 10, 12, 14],
        [12, 14, 16, 18]],

       [[ 8, 10, 12, 14],
        [12, 14, 16, 18],
        [16, 18, 20, 22]]])
In [114]: _.shape
Out[114]: (3, 3, 4)
In [115]: (x + x[:,None]).sum(axis=-1)
Out[115]: 
array([[12, 28, 44],
       [28, 44, 60],
       [44, 60, 76]])
</code></pre>
<p>The broadcasting goes: (3,4) and (3,1,4) =&gt; (1,3,4) and (3,1,4) =&gt; (3,3,4).  Then we sum on the last axis to get (3,3)</p>
<p>Doing the same thing as you did:</p>
<pre><code>In [116]: vf = np.vectorize(lambda a,b:(a+b).sum(), signature=&quot;(n),(n)-&gt;()&quot;)
In [117]: vf(x, x[:,None])
Out[117]: 
array([[12, 28, 44],
       [28, 44, 60],
       [44, 60, 76]])
</code></pre>
<p>But as noted, <code>np.vectorize</code> is not a speed tool, especially when using <code>signature</code>:</p>
<pre><code>In [118]: timeit (x + x[:,None]).sum(axis=-1)
13.8 µs ± 363 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
In [119]: timeit vf(x, x[:,None])
278 µs ± 7.68 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre>
<p>Without adding the dimension to the 2nd <code>x</code>:</p>
<pre><code>In [120]: vf(x, x)
Out[120]: array([12, 44, 76])
In [121]: (x + x).sum(axis=-1)
Out[121]: array([12, 44, 76])
</code></pre>",1
778,64958298,How to get input data shape when model is in predicting phase?,"<p>I tried to build Seq2Seq model by using TensorFlow 2.0.<br />
It is not for NLP, but for predict timeseries data.</p>
<p>Since Seq2Seq model behave differently in training and predicting phase, I needed to write call function based on the phase.</p>
<p>In training phase, the decoder takes shifted timeseries data padded with zero.
(e.g. encoder input: [1,2,3,4], decoder input: [0,1,2,3])</p>
<p>And in predicting phase, the decoder takes single zero tensor at first, and it takes its output as input until it produces same length of input timeseries data (e.g. decoder input: 1) [0] -- (decoder predict 1) --&gt; [1] -- ... --&gt; final output : [0,1,2,3])</p>
<p>Therefore, the call function in the predicting phase (<code>training=False</code>), it gets the input shape of encoder and makes a <code>tf.zeros</code> tensor based on the shape, and it goes to decoder's input.</p>
<p>Here is some part of the class of model.</p>
<pre class=""lang-py prettyprint-override""><code>class Seq2Seq(Model):
    def __init__(self, **kwargs):
            self.encoder = layers.LSTM(5, return_state=True, input_shape=(None, 1))
            self.decoder = layers.LSTM(5, return_state=True, return_sequences=True,
                                       input_shape=(None, 1))
            self.dense = layers.Dense(1)

    def call(self, inputs, training=False, mask=None, **kwargs):
        decoded = None

        if training:
            encoder_input, decoder_input = inputs[0], inputs[1]
            encoded, state_h, state_c = self.encoder(encoder_input)
            decoded, _, _ = self.decoder(decoder_input, initial_state=[state_h, state_c])
            decoded = self.dense(decoded)
        else:
            encoder_input = inputs
            batch, time_step, features = tf.shape(encoder_input)
            encoded, state_h, state_c = self.encoder(encoder_input)
            decoder_input = tf.zeros(shape=[batch, 1, features])
            decoded = None
            for i in range(time_step):
                decoder_input, state_h, state_c = self.decoder(decoder_input, initial_state=[state_h, state_c])
                decoder_input = self.dense(decoder_input)
                if decoded is not None:
                    decoded = tf.concat([decoded, decoder_input], axis=1)
                else:
                    decoded = tf.identity(decoder_input)
        return decoded

</code></pre>
<p>In training phase, <code>inputs</code> has two input data. One is the <code>encoder_input</code> has shape <code>[batch_size, time_step, features]</code> and, another is the <code>decoder_input</code> has same shape as <code>encoder_input</code>.
But, in predicting phase, <code>inputs</code> is just same as the <code>encoder_input</code> of the training's.</p>
<p>Training worked well, but in validation, it produces error.</p>
<pre class=""lang-py prettyprint-override""><code>model.fit(train_dataset, epochs=10, validation_data=(seq_test_data, seq_test_data))
# &gt;&gt;&gt; train_dataset.element_spec
# (TensorSpec(shape=(2, None, 140, 1), dtype=tf.float32, name=None),
# TensorSpec(shape=(None, 140, 1), dtype=tf.float32, name=None))
# &gt;&gt;&gt; seq_test_data.shape
# TensorShape([1000, 140, 1])
</code></pre>
<pre><code>Epoch 1/10
5/5 [==============================] - ETA: 0s - MSE: 0.1487Traceback (most recent call last):
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/IPython/core/interactiveshell.py&quot;, line 3417, in run_code
    exec(code_obj, self.user_global_ns, self.user_ns)
  File &quot;&lt;ipython-input-2-91afa9c067da&gt;&quot;, line 1, in &lt;module&gt;
    runfile('/home/dbadmin/woosung/DWT-AutoEncoder-Comparison/source/autoencoder_example_using_ecg_data.py', wdir='/home/dbadmin/woosung/DWT-AutoEncoder-Comparison/source')
  File &quot;/home/dbadmin/.pycharm_helpers/pydev/_pydev_bundle/pydev_umd.py&quot;, line 197, in runfile
    pydev_imports.execfile(filename, global_vars, local_vars)  # execute the script
  File &quot;/home/dbadmin/.pycharm_helpers/pydev/_pydev_imps/_pydev_execfile.py&quot;, line 18, in execfile
    exec(compile(contents+&quot;\n&quot;, file, 'exec'), glob, loc)
  File &quot;/home/dbadmin/woosung/DWT-AutoEncoder-Comparison/source/autoencoder_example_using_ecg_data.py&quot;, line 112, in &lt;module&gt;
    history = ae_rnn_model.fit(train_dataset, epochs=10, validation_data=(seq_test_data, seq_test_data))
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/keras/engine/training.py&quot;, line 108, in _method_wrapper
    return method(self, *args, **kwargs)
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/keras/engine/training.py&quot;, line 1133, in fit
    return_dict=True)
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/keras/engine/training.py&quot;, line 108, in _method_wrapper
    return method(self, *args, **kwargs)
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/keras/engine/training.py&quot;, line 1379, in evaluate
    tmp_logs = test_function(iterator)
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/eager/def_function.py&quot;, line 780, in __call__
    result = self._call(*args, **kwds)
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/eager/def_function.py&quot;, line 823, in _call
    self._initialize(args, kwds, add_initializers_to=initializers)
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/eager/def_function.py&quot;, line 697, in _initialize
    *args, **kwds))
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/eager/function.py&quot;, line 2855, in _get_concrete_function_internal_garbage_collected
    graph_function, _, _ = self._maybe_define_function(args, kwargs)
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/eager/function.py&quot;, line 3213, in _maybe_define_function
    graph_function = self._create_graph_function(args, kwargs)
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/eager/function.py&quot;, line 3075, in _create_graph_function
    capture_by_value=self._capture_by_value),
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/framework/func_graph.py&quot;, line 986, in func_graph_from_py_func
    func_outputs = python_func(*func_args, **func_kwargs)
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/eager/def_function.py&quot;, line 600, in wrapped_fn
    return weak_wrapped_fn().__wrapped__(*args, **kwds)
  File &quot;/home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/framework/func_graph.py&quot;, line 973, in wrapper
    raise e.ag_error_metadata.to_exception(e)
tensorflow.python.framework.errors_impl.OperatorNotAllowedInGraphError: in user code:
    /home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/keras/engine/training.py:1224 test_function  *
        return step_function(self, iterator)
    /home/dbadmin/woosung/DWT-AutoEncoder-Comparison/source/autoencoder.py:57 call  *
        batch, time_step, features = tf.shape(encoder_input)
    /home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/framework/ops.py:503 __iter__
        self._disallow_iteration()
    /home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/framework/ops.py:496 _disallow_iteration
        self._disallow_when_autograph_enabled(&quot;iterating over `tf.Tensor`&quot;)
    /home/dbadmin/anaconda3/lib/python3.7/site-packages/tensorflow/python/framework/ops.py:474 _disallow_when_autograph_enabled
        &quot; indicate you are trying to use an unsupported feature.&quot;.format(task))
    OperatorNotAllowedInGraphError: iterating over `tf.Tensor` is not allowed: AutoGraph did convert this function. This might indicate you are trying to use an unsupported feature.
</code></pre>
<p>I guess the error comes in the reason of that it is not possible to get exact input shape until I put explicit data.</p>
<p>However, still not clear how to fix it.</p>",python|python-3.x|tensorflow|machine-learning|keras,"<p>If I understand it correctly, the call function also takes the tuple of (x, y) in the evaluation phase. You should change <code>encoder_input = inputs</code> to <code>encoder_input, decoder_input = inputs[0], inputs[1]</code> also for the <code>training==False</code> case. But it does make sence to first check the length of the input to the call function, before separating into encoder_input, decoder_input. The predict method of the model would e.g. only give one object to the call function.</p>",0
779,65142016,Why R^2 return negative and how to interpret them,"<p>I am trying to apply different transformations to test my linear regression model this dataset.</p>
<pre><code>import pandas as pd
import numpy as np
import seaborn as sns

data = {'Year':  [1830, 1905, 1930, 1947, 1952, 1969],
        'Speed mph': [30,130,400,760,1500,25000],
        'Means of attaining speed': ['Railroad', 'Rairoad'
                                     , 'Airplane', 'Airplane', 'Airplane','Spaceship']
        }

df = pd.DataFrame (data, columns = ['Year','Speed mph','Means of attaining speed'])
x = df['Year'].values
y = df['Speed mph'].values

df['U2'] = np.power(2,df['Speed mph'])

u = df['U2'].values

#regression part
slope, intercept, r_value, p_value, std_err = stats.linregress(x,u)
line = slope*x+intercept
plt.plot(x, line, 'r', label='r_value={:.2f} p_value {:.2f}'.format(r_value,p_value))
#end

plt.scatter(x,u, color=&quot;k&quot;)
plt.title('${Y^2}$ vs X',fontsize=24)
plt.xlabel('Year,X',fontsize=14)
plt.ylabel('${Y^2}$',fontsize=14)

plt.tick_params(axis='both',labelsize=14)

plt.legend(fontsize=9)

plt.show()
</code></pre>
<p>This returns R square value of -0.90 and p value = 0.01. P value is significant but why negative -0.90? Hope someone can please educate me.
Thank you very much</p>",python|statistics|linear-regression,"<p><a href=""https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.linregress.html"" rel=""nofollow noreferrer""><code>linregress</code></a> returns the linear correlation coefficient <em>R</em>, not <em>R</em><sup>2</sup>. The latter, being a square of a real number, <em>can’t</em> be negative.</p>
<p>For <em>R</em> = −0.9, we have <em>R</em><sup>2</sup> = 0.81.</p>
<p>A negative correlation coefficient means that <a href=""https://en.wikipedia.org/wiki/Negative_relationship"" rel=""nofollow noreferrer"">the relationship between the variables is negative</a> (also known as “anticorrelated”, which is <em>not</em> the same as uncorrelated!). That is, the slope of the linear regression is negative (goes down from left to right over the x-axis).</p>",1
780,65142016,Why R^2 return negative and how to interpret them,"<p>I am trying to apply different transformations to test my linear regression model this dataset.</p>
<pre><code>import pandas as pd
import numpy as np
import seaborn as sns

data = {'Year':  [1830, 1905, 1930, 1947, 1952, 1969],
        'Speed mph': [30,130,400,760,1500,25000],
        'Means of attaining speed': ['Railroad', 'Rairoad'
                                     , 'Airplane', 'Airplane', 'Airplane','Spaceship']
        }

df = pd.DataFrame (data, columns = ['Year','Speed mph','Means of attaining speed'])
x = df['Year'].values
y = df['Speed mph'].values

df['U2'] = np.power(2,df['Speed mph'])

u = df['U2'].values

#regression part
slope, intercept, r_value, p_value, std_err = stats.linregress(x,u)
line = slope*x+intercept
plt.plot(x, line, 'r', label='r_value={:.2f} p_value {:.2f}'.format(r_value,p_value))
#end

plt.scatter(x,u, color=&quot;k&quot;)
plt.title('${Y^2}$ vs X',fontsize=24)
plt.xlabel('Year,X',fontsize=14)
plt.ylabel('${Y^2}$',fontsize=14)

plt.tick_params(axis='both',labelsize=14)

plt.legend(fontsize=9)

plt.show()
</code></pre>
<p>This returns R square value of -0.90 and p value = 0.01. P value is significant but why negative -0.90? Hope someone can please educate me.
Thank you very much</p>",python|statistics|linear-regression,"<p>in your code:</p>
<pre><code>df['U2'] = np.power(2,df['Speed mph'])
</code></pre>
<p>The np.power function was applied not as you expect, it set the first row to 1073741824 and the rest of rows are zeros.</p>
<pre><code>print[df]

   Year  Speed mph Means of attaining speed          U2
0  1830         30                 Railroad  1073741824
1  1905        130                  Rairoad           0
2  1930        400                 Airplane           0
3  1947        760                 Airplane           0
4  1952       1500                 Airplane           0
5  1969      25000                Spaceship           0
</code></pre>
<p>Modify that line to:</p>
<pre><code>df['U2'] = df['Speed mph'].apply(lambda x: x * x)
</code></pre>
<p>or</p>
<pre><code>df['U2'] = df['Speed mph'].apply(np.square)
</code></pre>
<p>so df becomes:</p>
<pre><code>   Year  Speed mph Means of attaining speed         U2
0  1830         30                 Railroad        900
1  1905        130                  Rairoad      16900
2  1930        400                 Airplane     160000
3  1947        760                 Airplane     577600
4  1952       1500                 Airplane    2250000
5  1969      25000                Spaceship  625000000
</code></pre>
<p>finally</p>
<pre><code>r_value=0.46 p_value=0.36
</code></pre>
<p>Now, every thing is nice :)</p>",1
781,64988678,Applying quaternion rotation to a vector time series,"<p>I have a time series of 3D vectors in a Python numpy array similar to the following:</p>
<pre><code>array([[-0.062, -0.024,  1.   ],
       [-0.071, -0.03 ,  0.98 ],
       [-0.08 , -0.035,  0.991],
       [-0.083, -0.035,  0.98 ],
       [-0.083, -0.035,  0.977],
       [-0.082, -0.035,  0.993],
       [-0.08 , -0.034,  1.006],
       [-0.081, -0.032,  1.008],
       .......
</code></pre>
<p>I want to rotate each vector around a specified axis through a specified angle <code>theta</code>. I have been using quaternions to achieve this for one vector as found <a href=""https://stackoverflow.com/questions/6802577/rotation-of-3d-vector"">here</a> in henneray's answer.</p>
<pre><code>v1 = np.array ([1, -2, 0])
axis = np.array([-4, -2,  3])
theta = 1.5

rot_axis = np.insert(axis, 0, 0, axis=0)
axis_angle = (theta*0.5) * rot_axis/np.linalg.norm(rot_axis)
vec = quat.quaternion(*v1)
qlog = quat.quaternion(*axis_angle)
q = np.exp(qlog)
v_prime = q * vec * np.conjugate(q)
v_prime_vec = v_prime.imag
</code></pre>
<p>My question is, what is the fastest way to apply the same rotation to each vector in v1?</p>
<p>You cannot create a quaternion from <code>v1</code> if <code>v1</code> contains a 2D array of vectors, so I could use a loop to rotate each array element in turn; however, in henneray's answer in the link above, it is mentioned that the quaternions could be applied to 'appropriately vectorised numpy arrays'. Does anyone has any suggestions on how this could be implemented?</p>
<p>(A side question: if my <code>theta</code> and <code>axis</code> variables were arrays of equal length to v1, could the same method also be used to rotate each vector in v1 through a corresponding rotation?)</p>",python|numpy|vector|vectorization|quaternions,"<p>One &quot;fast&quot; way to do the rotation calculation itself would be to turn your quaternion into a 3x3 direction cosine matrix, have your vectors in a single 3xN contiguous matrix, and then call a BLAS library routine (e.g., dgemm) to do a standard matrix multiply. A good BLAS library with large N would do this calculation multi-threaded.</p>",1
782,64988678,Applying quaternion rotation to a vector time series,"<p>I have a time series of 3D vectors in a Python numpy array similar to the following:</p>
<pre><code>array([[-0.062, -0.024,  1.   ],
       [-0.071, -0.03 ,  0.98 ],
       [-0.08 , -0.035,  0.991],
       [-0.083, -0.035,  0.98 ],
       [-0.083, -0.035,  0.977],
       [-0.082, -0.035,  0.993],
       [-0.08 , -0.034,  1.006],
       [-0.081, -0.032,  1.008],
       .......
</code></pre>
<p>I want to rotate each vector around a specified axis through a specified angle <code>theta</code>. I have been using quaternions to achieve this for one vector as found <a href=""https://stackoverflow.com/questions/6802577/rotation-of-3d-vector"">here</a> in henneray's answer.</p>
<pre><code>v1 = np.array ([1, -2, 0])
axis = np.array([-4, -2,  3])
theta = 1.5

rot_axis = np.insert(axis, 0, 0, axis=0)
axis_angle = (theta*0.5) * rot_axis/np.linalg.norm(rot_axis)
vec = quat.quaternion(*v1)
qlog = quat.quaternion(*axis_angle)
q = np.exp(qlog)
v_prime = q * vec * np.conjugate(q)
v_prime_vec = v_prime.imag
</code></pre>
<p>My question is, what is the fastest way to apply the same rotation to each vector in v1?</p>
<p>You cannot create a quaternion from <code>v1</code> if <code>v1</code> contains a 2D array of vectors, so I could use a loop to rotate each array element in turn; however, in henneray's answer in the link above, it is mentioned that the quaternions could be applied to 'appropriately vectorised numpy arrays'. Does anyone has any suggestions on how this could be implemented?</p>
<p>(A side question: if my <code>theta</code> and <code>axis</code> variables were arrays of equal length to v1, could the same method also be used to rotate each vector in v1 through a corresponding rotation?)</p>",python|numpy|vector|vectorization|quaternions,"<p>It is necessary to first convert the [x,y,z] Cartesian vectors into 4-vectors with the first component equal to zero [0,x,y,z]. Then you can cast this to a quaternion array to do vectorised calculations.</p>
<p>This function below takes an array of Cartesian vectors and rotates them about a single rotation axis. You will need to make sure the norm of this axis is equal to your rotation angle theta.</p>
<pre><code>def rotate_vectors(vecs, axis):
    &quot;&quot;&quot;
    Rotate a list of 3D [x,y,z] vectors about corresponding 3D axis
    [x,y,z] with norm equal to the rotation angle in radians

    Parameters
    ----------
    vectors : numpy.ndarray with shape [n,3]
        list of [x,y,z] cartesian vector coordinates
    axis : numpy.ndarray with shape [3]
        [x,y,z] axis to rotate corresponding vectors about
    &quot;&quot;&quot;
    # Make an 4 x n array of zeros
    vecs4 = np.zeros([vecs.shape[0],vecs.shape[1]+1])
    # Fill the imaginary i, j, k components with x, y, z values, leaving the real part w=0
    vecs4[:,1:] = vecs
    # Convert to quaternion array
    vecsq = quat.as_quat_array(vecs4)

    # Make a rotation quaternion
    qrot = quat.from_rotation_vector(axis)
    # Rotate vectors
    vecsq_rotated = qrot * vecsq * qrot.conjugate()
    # Cast quaternion array to float and return only imaginary components (ignore real part)
    return quat.as_float_array(vecsq_rotated)[:,1:]
</code></pre>
<p>As a bonus, this function takes an array of rotation axes to rotate each vector by the corresponding axes.</p>
<pre><code>def rotate_vectors_each(vecs, axes):
    &quot;&quot;&quot;
    Rotate a list of 3D [x,y,z] vectors about corresponding 3D axes
    [x,y,z] with norm equal to the rotation angle in radians

    Parameters
    ----------
    vectors : numpy.ndarray with shape [n,3]
        list of [x,y,z] cartesian vector coordinates
    axes : numpy.ndarray with shape [n,3]
        axes to rotate corresponding vectors about
        n = pulse shape time domain
        3 = [x,y,z]
    &quot;&quot;&quot;
    # Make an 4 x n array of zeros
    vecs4 = np.zeros([vecs.shape[0],vecs.shape[1]+1])
    # Fill the imaginary i, j, k components with x, y, z values, leaving the real part w=0
    vecs4[:,1:] = vecs
    # Convert to quaternion array
    vecsq = quat.as_quat_array(vecs4)

    # Make an 4 x n array of zeros
    rots4 = np.zeros([rots.shape[0],rots.shape[1]+1])
    # Fill the imaginary i, j, k components with x, y, z values, leaving the real part w=0
    rots4[:,1:] = rots
    # Convert to quaternion array and take exponential
    qrots = np.exp(quat.as_quat_array(0.5 * rots4))

    # Rotate vectors
    vecsq_rotated = qrots * vecsq * qrots.conjugate()

    return quat.as_float_array(vecsq_rotated)[:,1:]
</code></pre>
<p>Note that with so many conversions between axis angle and quaternion representation, this will give you little performance improvement over rotation matrix algebra. Quaternions really only benefit when you are rotating a vector through many sequential rotations, whereby you can stack the quaternion multiplication.</p>",2
783,64795017,"When using generator for representative dataset in quantization it ""Failed to convert value into readable tensor""","<p>I am quantizing a model. The model takes 224x224 input.</p>
<p>I preprocess the data with a build-in function <code>preprocess_input()</code> which subtracts some center pixels.</p>
<p>Now when using a simple image with this  preprocessing function in the <code>representative_dataset_gen()</code> everything works fine</p>
<pre><code>def representative_dataset_gen():
        pfad='./000001.jpg'
        img = cv2.imread(pfad)
        img = np.expand_dims(img,0).astype(np.float32) 
        img = preprocess_input(img) 
        yield [img]
</code></pre>
<p>But when I use a generator function to use more than one image</p>
<pre><code>def prepare(img):
    img = np.expand_dims(img,0).astype(np.float32)
    img = preprocess_input(img)
    return arg
      
    
repDatagen=tf.keras.preprocessing.image.ImageDataGenerator(preprocessing_function=prepare)
datagen=repDatagen.flow_from_directory(folderpath,target_size=size,batch_size=1)


def representative_dataset_gen():
  for _ in range(10):
    img = datagen.next()
    yield [img]
</code></pre>
<p><strong>I get following error:</strong></p>
<blockquote>
<p>ValueError: Failed to convert value into readable tensor.</p>
</blockquote>
<p>My guess: This is due to <code>ImageDataGenerator(preprocessing_function=prepare)</code> . In the tensorflow description it says:</p>
<blockquote>
<p>function that will be applied on each input. The function will run
after the image is resized and augmented. The function should take one
argument: one image (Numpy tensor with rank 3), and should output a
Numpy tensor with the same shape.</p>
</blockquote>
<p>I tried to adjust the shape of the img output of the &quot;prepare&quot; function without and with np.squeez().
This results in either (1,244,244,3) or (224,224,3). But I still get the error. I also tried <code>tf.convert_to_tensor()</code> with the same error.</p>
<pre><code>def prepare(img):
    img = np.expand_dims(img,0).astype(np.float32)
    img = preprocess_input(img, version=2)
    img = np.squeeze(img)
    arg = tf.convert_to_tensor(img, dtype=tf.float32)
    return arg
</code></pre>
<p><strong>Does anyone know how I have to prepare the output to get the correct tensor?</strong></p>
<p>Thanks</p>",python|tensorflow|generator|tf.keras|quantization,"<p>The problem was actually the generator output.
The output is not a <code>np.array()</code> . Converting with np.asarray() was not possible as it throws an error.</p>
<p>So the answer is quite simple:</p>
<p>the data_generator output is a tuple</p>
<p><a href=""https://i.stack.imgur.com/ESq2h.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ESq2h.png"" alt=""enter image description here"" /></a></p>
<p>so simply yield only the first element <code>img[0]</code>.</p>
<hr />
<p>The code in total:</p>
<pre><code>size=(224,224)

def prepare(img):
    img = np.expand_dims(img,0).astype(np.float32)
    img = preprocess_input(img, version=2)
    return img
      
repDatagen=tf.keras.preprocessing.image.ImageDataGenerator(preprocessing_function=prepare)
datagen=repDatagen.flow_from_directory(folderpath,target_size=size,batch_size=1)

def representative_dataset_gen():
  for _ in range(10):
    img = datagen.next()
    yield [img[0]]
    #yield [np.array(img[0], dtype=np.float32)] # also possible
</code></pre>",0
784,64870566,How to loop through Pandas DataFrame and split a string into multiple rows,"<p>What would be the best way to loop through a dataframe with strings that I would like to split into multiple rows while retaining the other value at the same time?</p>
<p>input:</p>
<pre><code>genres                   revenue
action|comedy|drama       5000
action|romance            10000
</code></pre>
<p>output:</p>
<pre><code>genres      revenue
action      5000
comedy      5000
drama       5000
action      10000
romance     10000
</code></pre>",python|python-3.x|pandas|dataframe,"<p>You can use <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.split.html"" rel=""nofollow noreferrer""><code>Series.str.split</code></a> with <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.explode.html"" rel=""nofollow noreferrer""><code>df.explode</code></a>:</p>
<p><strong>Note: <code>df.explode</code> works for pandas version &gt;= 0.25</strong></p>
<pre><code>In [2240]: df.genres = df.genres.str.split('|')

In [2242]: df = df.explode('genres')

In [2243]: df
Out[2243]: 
    genres  revenue
0   action     5000
0   comedy     5000
0    drama     5000
1   action    10000
1  romance    10000
</code></pre>",2
785,64870566,How to loop through Pandas DataFrame and split a string into multiple rows,"<p>What would be the best way to loop through a dataframe with strings that I would like to split into multiple rows while retaining the other value at the same time?</p>
<p>input:</p>
<pre><code>genres                   revenue
action|comedy|drama       5000
action|romance            10000
</code></pre>
<p>output:</p>
<pre><code>genres      revenue
action      5000
comedy      5000
drama       5000
action      10000
romance     10000
</code></pre>",python|python-3.x|pandas|dataframe,"<p>Use <a href=""http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.split.html"" rel=""noreferrer""><code>Series.str.split</code></a> with assign back column by <a href=""http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.assign.html"" rel=""noreferrer""><code>DataFrame.assign</code></a> and <a href=""http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.explode.html"" rel=""noreferrer""><code>DataFrame.explode</code></a>, last for default index add <a href=""http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.reset_index.html"" rel=""noreferrer""><code>DataFrame.reset_index</code></a> with <code>drop=True</code>:</p>
<pre><code>df1=df.assign(genres = df['genres'].str.split('|')).explode('genres').reset_index(drop=True)
print (df1)
    genres  revenue
0   action     5000
1   comedy     5000
2    drama     5000
3   action    10000
4  romance    10000
</code></pre>",5
786,64839166,pandas Dataframe redesign/reorder issue,"<p>I have a Dataframe like this one :</p>
<p><a href=""https://i.stack.imgur.com/rbZea.png"" rel=""nofollow noreferrer"">raw Dataframe</a></p>
<p>and want to get a Dataframe like this manual crafted one.</p>
<p><a href=""https://i.stack.imgur.com/0MJYS.png"" rel=""nofollow noreferrer"">wanted outcome</a></p>
<p>i have tried to do it with the follwing commands</p>
<pre><code>SD = station_data.set_index('ELEMENT')
SD.reset_index(inplace=True)
SD = SD.groupby(['ELEMENT'])
result = SD['VALUE'].unique()
result.reset_index(inplace=False)
SD = pd.DataFrame(result)
SD = SD.transpose()
</code></pre>
<p>the problem with this is , that .unique() is wrong cause you can get the same value multiple times and the values aren't a single object anymore.so i'm searching a way to get the wanted Dataframe with all values.</p>
<p>the output of the commandblock is:</p>
<pre><code>                        VALUE
ELEMENT 
HUMIDITY                [98.0, 97.0, 96.0, 95.0, 94.0, 92.0, 93.0, 91....
PRECIPITATION_FORM      [&lt;NA&gt;]
PRECIPITATION_HEIGHT    [0.0, 0.1, 0.2, 0.3, 0.5, 0.4, 0.6, 0.8, 1.5,...
...
</code></pre>
<p>let us use the following gutted Dataframe as example.</p>
<pre><code>import pandas as pd
test = pd.DataFrame({'STATION_ID': [1207, 1207, 1207,1207, 1207, 1207,1207, 1207, 1207],
                'DATE': ['2019-01-01 00:00:00', '2019-01-01 01:00:00', '2019-01-01 02:00:0','2019-01-01 00:00:00', '2019-01-01 01:00:00', '2019-01-01 02:00:0','2019-01-01 00:00:00', '2019-01-01 01:00:00', '2019-01-01 02:00:0'],
                'ELEMENT': ['TEMPERATURE_AIR_200','TEMPERATURE_AIR_200','TEMPERATURE_AIR_200', 'HUMIDITY','HUMIDITY','HUMIDITY', 'TEMPERATURE_DEW_POINT_200', 'TEMPERATURE_DEW_POINT_200', 'TEMPERATURE_DEW_POINT_200'],
                'VALUE': [0.1, 0.1, 0.4, 98.0, 96.0, 98.0, -0.3,0.1,0.4]})
</code></pre>",python|pandas,"<p>You currently have data in &quot;long&quot; format, and you want your data in &quot;wide&quot; format. This can be done in Pandas using either <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot_table.html"" rel=""nofollow noreferrer"">pivot_table()</a> or <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.unstack.html"" rel=""nofollow noreferrer"">unstack()</a>.</p>
<p>Here's an example of how to do it with unstack().</p>
<pre><code>import pandas as pd
test = pd.DataFrame({'STATION_ID': [1207, 1207, 1207,1207, 1207, 1207,1207, 1207, 1207],
                'DATE': ['2019-01-01 00:00:00', '2019-01-01 01:00:00', '2019-01-01 02:00:0','2019-01-01 00:00:00', '2019-01-01 01:00:00', '2019-01-01 02:00:0','2019-01-01 00:00:00', '2019-01-01 01:00:00', '2019-01-01 02:00:0'],
                'ELEMENT': ['TEMPERATURE_AIR_200','TEMPERATURE_AIR_200','TEMPERATURE_AIR_200', 'HUMIDITY','HUMIDITY','HUMIDITY', 'TEMPERATURE_DEW_POINT_200', 'TEMPERATURE_DEW_POINT_200', 'TEMPERATURE_DEW_POINT_200'],
                'VALUE': [0.1, 0.1, 0.4, 98.0, 96.0, 98.0, -0.3,0.1,0.4]})

# Set indexes so pandas knows which columns to unstack by
test = test.set_index(['STATION_ID', 'DATE', 'ELEMENT'])
test = test.unstack()

# The column names are now a multiindex. Fix that
test.columns = test.columns.get_level_values(1)

# Put the index back how it was. Optional.
test = test.reset_index()
print(test)
</code></pre>
<p>Output:</p>
<pre><code>ELEMENT  STATION_ID                 DATE  HUMIDITY  TEMPERATURE_AIR_200  TEMPERATURE_DEW_POINT_200
0              1207  2019-01-01 00:00:00      98.0                  0.1                       -0.3
1              1207  2019-01-01 01:00:00      96.0                  0.1                        0.1
2              1207   2019-01-01 02:00:0      98.0                  0.4                        0.4
</code></pre>",0
787,65116692,Reset Custom Classes per Unit Test,"<p>It is my understanding that every test in a series of unit tests should be completely independent.  As such I am attempting to recreate my custom object with default settings for each test.</p>
<p>However, It seems that subsequent tests are reusing the same objects, even when I use tearDown or del commands.</p>
<p>I created a small example that exhibits the same behavior.</p>
<pre><code>class MyClass:

    numbers = []

    def __init__(self):
        pass

    def __del__(self):
        del self.numbers

    def addNumber(self,newnumber):
        self.numbers += [newnumber]

    def getNumbers(self):
        return self.numbers
</code></pre>
<pre><code>
import unittest
from myclass import MyClass

class TestNumbers(unittest.TestCase):

    def test_oneNumbers(self):
        mc = MyClass()
        mc.addNumber(5)
        self.assertListEqual(mc.getNumbers(), [5])
        del mc

    def test_twoNumbers(self):
        mc = MyClass()
        mc.addNumber(5)
        mc.addNumber(6)
        self.assertListEqual(mc.getNumbers(), [5,6])
        del mc

if __name__ == '__main__':
    unittest.main()
</code></pre>
<p>Python myunit.py output</p>
<pre><code>.F
======================================================================
FAIL: test_twoNumbers (__main__.TestNumbers)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;C:\REDACTED\unitexample\myunit.py&quot;, line 17, in test_twoNumbers
    self.assertListEqual(mc.getNumbers(), [5,6])
AssertionError: Lists differ: [5, 5, 6] != [5, 6]

First differing element 1:
5
6

First list contains 1 additional elements.
First extra element 2:
6

- [5, 5, 6]
?     ---

+ [5, 6]

----------------------------------------------------------------------
Ran 2 tests in 0.001s

FAILED (failures=1)
</code></pre>
<p>shouldn't each instance of MyClass be independent?</p>",python|python-unittest,"<p>@MrBean-Bremen was correct, I moved the variable to the <strong>init</strong> class to make it an instance variable.  Each instance now keeps their own copy.</p>
<p>I read <a href=""https://pencilprogrammer.com/python-tutorials/class-and-instance-variables/"" rel=""nofollow noreferrer"">https://pencilprogrammer.com/python-tutorials/class-and-instance-variables/</a> to help clarify the difference as well.</p>
<p>ALthough i'm not sure its necessary, but I also clean out the dictionary in my <strong>del</strong></p>",0
788,64807248,Numba - string types,"<p>I think this is a simple question, but I'm finding the numba documentation lacking on how to use string types with numpy arrays and dictionaries. I have a function I want to use numba which takes a list of zip codes, and then a dictionary which maps zip codes -&gt; value. I know I could cast zips to an int datatype, but I want to be able to do this with other values that cannot coerce to int types.</p>
<pre class=""lang-py prettyprint-override""><code>from numba.typed import Dict
from numba.core import types
@jit(nopython=True)
def zip_func(zip_array,zip_dict):
    return zip_dict[zip_array[0]]
#This would be a longer array using real data
myzips = np.array(['12345'],dtype='&lt;U5')
mydict = {&quot;12345&quot;:5}
numba_dict = Dict.empty(key_type=types.unicode_type,value_type=types.int64)
for key,value in mydict.items():
    numba_dict[key] = value
zip_func(myzips,numba_dict)
</code></pre>
<p>This gives the following error, which if I understand right it's basically not able to use a fixed-length string of length 5 as a key when the key is typed as types.unicode_type. How do I align these types?</p>
<pre><code>---------------------------------------------------------------------------
TypingError                               Traceback (most recent call last)
&lt;ipython-input-4-93b4a32d59d4&gt; in &lt;module&gt;
     12 for key,value in mydict.items():
     13     numba_dict[key] = value
---&gt; 14 zip_func(myzips,numba_dict)

/sas/python/app/miniconda3/envs/py3lu/lib/python3.6/site-packages/numba/core/dispatcher.py in _compile_for_args(self, *args, **kws)
    399                 e.patch_message(msg)
    400 
--&gt; 401             error_rewrite(e, 'typing')
    402         except errors.UnsupportedError as e:
    403             # Something unsupported is present in the user code, add help info

/sas/python/app/miniconda3/envs/py3lu/lib/python3.6/site-packages/numba/core/dispatcher.py in error_rewrite(e, issue_type)
    342                 raise e
    343             else:
--&gt; 344                 reraise(type(e), e, None)
    345 
    346         argtypes = []

/sas/python/app/miniconda3/envs/py3lu/lib/python3.6/site-packages/numba/core/utils.py in reraise(tp, value, tb)
     78         value = tp()
     79     if value.__traceback__ is not tb:
---&gt; 80         raise value.with_traceback(tb)
     81     raise value
     82 

TypingError: Failed in nopython mode pipeline (step: nopython frontend)
Internal error at &lt;numba.core.typeinfer.IntrinsicCallConstraint object at 0x7ff4562e2518&gt;.
Failed in nopython mode pipeline (step: nopython mode backend)
Cannot cast [unichr x 5] to unicode_type: %&quot;.21&quot; = load [5 x i32], [5 x i32]* %&quot;key&quot;

File &quot;../../../python/app/miniconda3/envs/py3lu/lib/python3.6/site-packages/numba/typed/dictobject.py&quot;, line 730:
    def impl(d, key):
        castedkey = _cast(key, keyty)
        ^

[1] During: lowering &quot;$0.4 = call $0.1(key, $0.3, func=$0.1, args=[Var(key, dictobject.py:730), Var($0.3, dictobject.py:730)], kws=(), vararg=None)&quot; at /sas/python/app/miniconda3/envs/py3lu/lib/python3.6/site-packages/numba/typed/dictobject.py (730)
[2] During: typing of intrinsic-call at &lt;ipython-input-4-93b4a32d59d4&gt; (7)
Enable logging at debug level for details.

File &quot;&lt;ipython-input-4-93b4a32d59d4&gt;&quot;, line 7:
def zip_func(zip_array,zip_dict):
    return zip_dict[zip_array[0]]
</code></pre>",python|numpy|types|numba,"<p>Instead of using <code>numba.types.unicode_type</code> as the <code>key_type</code> for your dictionary, you could create a custom Numba type from the unichar dtype.</p>
<pre><code>np_unichar = numpy.dtype('&lt;U5')
UnicharType = numba.from_dtype(np_unichar)
</code></pre>
<p>Now, you can use <code>UnicharType</code> to tell Numba you're expecting values of type <code>[unichr x 5]</code>.</p>
<p>Alternatively, I found that simply adding an empty string to a <code>[unichr x N]</code> will force a type conversion. Which means, <code>zip_array[0] + ''</code> would be processed as <code>numba.types.unicode_type</code>.</p>",3
789,64883819,What is the best way to exclude object instances from a QuerySet in Django (filter() not an option in this case)?,"<p>Right now the best solution I can think of is to individually use queryset.exclude(pk=instance.pk) on specific instances.</p>
<p>The scenario is that I need to filter a model queryset for a few fields but then also check to see if a date field matches a given value. Normally I would just filter for date=mydate but in my case I need to calculate the date first using a stored timezone in a different model (which is why it seems like I can't simply use a filter)</p>
<p>Right now my code (which works but seems like a hack-y way of filtering) looks something like this:</p>
<pre><code>user_tracks = HabitTrack.objects.filter(user=user)
filtered_user_tracks = user_tracks
for t in user_tracks:
    if not HabitEvent.objects.filter(user=user, track=t, date_expected=t.get_timezone_corrected_datetime_now().date(), post__isnull=True).exists():
        print(&quot;Excluding &quot;, t.track_name, &quot; with track specific time of &quot;, t.get_timezone_corrected_datetime_now(), &quot;from the list of options&quot;)
        filtered_user_tracks = filtered_user_tracks.exclude(pk=t.pk)
    else:
        print(&quot;Including &quot;, t.track_name, &quot; with track specific time of &quot;, t.get_timezone_corrected_datetime_now(), &quot;in the list of options&quot;)
</code></pre>
<p>For context, this is a snippet from my ModelForm so that I can limit form choices to only options available to the user &quot;today&quot; where &quot;today&quot; is calculated based on the user's timezone.</p>
<p>(This is also my first time asking a question on SO, so I will do my best to clean up my question if clarifications are needed, thank you!)</p>
<p>In HabitTrack model:</p>
<pre><code>def get_timezone_corrected_datetime_now(self):
    return datetime.now(self.timezone)
</code></pre>",python|django|django-models|django-forms|django-queryset,"<p>This might be tough. <code>django.db.models.functions.TruncDate</code> with <code>functions.Now</code> might work, but I don't know if the timezone can be changed with an <code>F</code> instance. If you know a user's tracks are all in the same timezone, that makes things easier. Otherwise, for the short-term you may have to denormalize <code>HabitEvent.date_expected</code> so that you have the full datetime and the localized date.</p>
<p>Edit:</p>
<h2>Better Answer</h2>
<p>You could also create your own Func instances using the database's functions. If you're using postgres, <code>timezone(zone, timestamp)</code> (<a href=""https://www.postgresql.org/docs/13/functions-datetime.html"" rel=""nofollow noreferrer"">docs 9.9.3</a>) may do what you need.</p>
<p>Your func may look like this:</p>
<pre><code>class LocalizedNow(Func):
    function = 'timezone'
    template = '%(function)s(%(expressions)s, NOW())'
</code></pre>
<p>Then you could use it in the query with:</p>
<pre><code>HabitEvent.objects.filter(expected_date=LocalizedNow('track__timezone'))
</code></pre>",1
790,65551153,Rearrange column hierarchy or change sort order via pivot,"<p>I can use</p>
<pre><code>df2 = pd.DataFrame(
{
   &quot;Day&quot;: np.array([1,1,1,2,2,2,3,3,3], dtype=&quot;int32&quot;),
    &quot;Subject&quot;: np.array(['a','b','c','a','b','c','a','b','c']),
     &quot;Breakfast&quot;: np.random.randn(9),
     &quot;Lunch&quot;: np.random.randn(9),
      &quot;Dinner&quot;: np.random.randn(9),  
}
</code></pre>
<p>)
df2</p>
<p>then</p>
<pre><code>df2.pivot(index=&quot;Day&quot;, columns=&quot;Subject&quot;)
</code></pre>
<p>to generate:</p>
<p><img src=""https://i.stack.imgur.com/8dzRF.png"" alt=""Pivot Results"" /></p>
<p>and want to reorder or change the column hierarchy so that the data details by day and subject are ordered together underneath the subject as per the following:</p>
<p><img src=""https://i.stack.imgur.com/wORei.png"" alt=""Desired Pivot Results"" /></p>
<p>How does one rearrange either the column hierarchy or the column sort order to achieve this?</p>",python|pandas|indexing,"<p>Use the following code:</p>
<pre><code>df3 = df2.pivot(index=&quot;Day&quot;, columns=&quot;Subject&quot;)
df3.columns = df3.columns.swaplevel()
df3.sort_index(axis=1, level=0, sort_remaining=False, inplace=True)
</code></pre>
<p>The result (for my random data) is:</p>
<pre><code>Subject         a                             b                             c  
        Breakfast     Lunch    Dinner Breakfast     Lunch    Dinner Breakfast      Lunch    Dinner
Day                                                                                               
1       -2.199182  0.810676  1.119673  1.685167 -1.469196  0.838108 -0.751882   1.678362 -0.312479
2       -0.275628  1.224855  1.142574  0.699516 -0.898156 -1.796295  0.593565   0.606979  0.549299
3        0.043365  0.562309  0.881739  0.746961  0.002600  0.344138  0.937465   1.402463  2.065739
</code></pre>",0
791,65551153,Rearrange column hierarchy or change sort order via pivot,"<p>I can use</p>
<pre><code>df2 = pd.DataFrame(
{
   &quot;Day&quot;: np.array([1,1,1,2,2,2,3,3,3], dtype=&quot;int32&quot;),
    &quot;Subject&quot;: np.array(['a','b','c','a','b','c','a','b','c']),
     &quot;Breakfast&quot;: np.random.randn(9),
     &quot;Lunch&quot;: np.random.randn(9),
      &quot;Dinner&quot;: np.random.randn(9),  
}
</code></pre>
<p>)
df2</p>
<p>then</p>
<pre><code>df2.pivot(index=&quot;Day&quot;, columns=&quot;Subject&quot;)
</code></pre>
<p>to generate:</p>
<p><img src=""https://i.stack.imgur.com/8dzRF.png"" alt=""Pivot Results"" /></p>
<p>and want to reorder or change the column hierarchy so that the data details by day and subject are ordered together underneath the subject as per the following:</p>
<p><img src=""https://i.stack.imgur.com/wORei.png"" alt=""Desired Pivot Results"" /></p>
<p>How does one rearrange either the column hierarchy or the column sort order to achieve this?</p>",python|pandas|indexing,"<p>You can use <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.swaplevel.html"" rel=""nofollow noreferrer""><code>swaplevel</code></a> and <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_index.html"" rel=""nofollow noreferrer""><code>sort_index</code></a> along <code>axis=1</code> after pivoting the dataframe:</p>
<pre><code>df2.pivot(index=&quot;Day&quot;, columns=&quot;Subject&quot;).swaplevel(axis=1).sort_index(1)
</code></pre>
<p>Alternatively you can use <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.stack.html"" rel=""nofollow noreferrer""><code>stack</code></a> followed by <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.unstack.html"" rel=""nofollow noreferrer""><code>unstack</code></a> to perform reshaping:</p>
<pre><code>df2.set_index(['Day', 'Subject']).stack().unstack([1, 2])
</code></pre>
<hr />
<pre><code>Subject         a                             b                             c                    
        Breakfast     Lunch    Dinner Breakfast     Lunch    Dinner Breakfast     Lunch    Dinner
Day                                                                                              
1       -0.558349 -1.386076  1.518792  0.089063 -0.508046  1.095008 -0.260515 -0.087735  1.472237
2        0.876124 -0.574031 -1.089488 -1.439771  0.708469 -0.332422 -0.148037  1.285213 -1.313784
3        0.823619  0.714185  0.726317 -0.385264 -1.031764  0.924519  0.139066  0.296062  1.351840
</code></pre>",1
792,65358437,How should I make these commands work where we take a variable on the python program to execute a command in MySQL?,"<p>This is a bank management system. where acc_id the account I want to delete from a MySQL Table BANK I have already connected python to mysql but this code dosen't work. Is there any alternative to .format ?</p>
<pre><code>if choice == 2:
    acc_id = int(input(&quot;ENTER ACCOUNT NUMBER TO DELETE:&quot;))
    cursor = mydb.cursor()
    cmd2 = &quot;DELETE FROM BANK WHERE ACC_NO = {}&quot;.format(acc_id)
    cursor.execute(cmd2)
</code></pre>",python|mysql|mysql-python|mysql-connector-python,"<pre><code>user_input = raw_input(&quot;Required Data&quot;)

cursor.execute(&quot;DELETE FROM BANK WHERE ACC_NO = %s&quot;, (user_input))
</code></pre>
<p>Hopefully, this will help you to solve your problem.</p>",1
793,65426541,How to use find_all by string with BeautifulSoup in Python?,"<p>My example code:</p>
<pre><code>from bs4 import BeautifulSoup
import re

html = &quot;&quot;&quot;
&lt;li&gt; &lt;span&gt;EAN:&lt;/span&gt; 1111111&lt;/li&gt;
&lt;li&gt; &lt;span&gt;Price:&lt;/span&gt; 3&lt;/li&gt; 
&quot;&quot;&quot;

soup=BeautifulSoup(html,'html.parser')
for tag in soup.find_all(&quot;li&quot;):
   print(&quot;{0}: {1}&quot;.format(tag.name, tag.text))
</code></pre>
<p><strong>Output</strong></p>
<pre><code>li:  EAN: 1111111&lt;br&gt;
li:  Price: 3
</code></pre>
<p><strong>Expected Output</strong></p>
<pre><code>EAN: 11111
</code></pre>
<p>But how extract EAN: 11111 only? string=(&quot;EAN:&quot;) not working</p>",python|beautifulsoup,"<p>If you just want to print all <code>li</code> that contains <code>EAN</code> use <code>soup.find_all('span',string=re.compile(r'EAN'))</code>:</p>
<p><strong>Example</strong></p>
<pre><code>from bs4 import BeautifulSoup
import re

html = &quot;&quot;&quot;
&lt;li&gt; &lt;span&gt;EAN:&lt;/span&gt; 1111111&lt;/li&gt;
&lt;li&gt; &lt;span&gt;Price:&lt;/span&gt; 1&lt;/li&gt; 

&lt;li&gt; &lt;span&gt;EAN:&lt;/span&gt; 2222222&lt;/li&gt;
&lt;li&gt; &lt;span&gt;Price:&lt;/span&gt; 2&lt;/li&gt; 

&lt;li&gt; &lt;span&gt;EAN:&lt;/span&gt; 3333333&lt;/li&gt;
&lt;li&gt; &lt;span&gt;Price:&lt;/span&gt; 3&lt;/li&gt; 
&quot;&quot;&quot;

soup=BeautifulSoup(html,'html.parser')

for tag in soup.find_all('span',string=re.compile(r'EAN')):
    print(tag.parent.text)
</code></pre>
<p><strong>Output</strong></p>
<pre><code>EAN: 1111111
EAN: 2222222
EAN: 3333333
</code></pre>",1
794,65390892,from an external python script call a python function which require root previlege(pynq library) is continuously crashed,"<p>I have to get continuous data from a python function and one of its libraries(<a href=""https://pynq.readthedocs.io/en/v2.0/overlay_design_methodology/overlay_tutorial.html"" rel=""nofollow noreferrer""><strong>Overlay</strong></a>) depends on root privilege. I have to run that python function by using Flask.</p>
<p>First of all, I have searched how to give root access to a python script but unfortunately, I haven't found any which mimic my case.</p>
<p><strong>The approach I have taken</strong> --<br />
1/ Python file containing <strong>Overlay</strong> library suppose the name is <em>child.py</em> which contains a function name <code>status_data</code></p>
<pre><code>from pynq import PL
from pynq import Overlay
def main_path():
    ol = Overlay(&quot;/home/xilinx/pynq/overlays/design_4/design_1_wrapper.bit&quot;)
    return ol

def status_data():
    ol = main_path()
    data = '''my_code'''
    return data
</code></pre>
<p>2/ Flask file name is <em>app.py</em> where I need the continuous data via an endpoint</p>
<pre><code>from create_json_data import status_data
from flask import Flask, render_template
from flask import jsonify
'''mayn others lib, doesn't include'''

'''my_code'''
@app.route(&quot;/auto_update_table&quot;)
def parse_auto_update_table(name=None):
    data_json = status_data()
    return jsonify(data_json)
</code></pre>
<p>3/ Both files are in the same folder. I have run that <em>child.py</em> with <code>sudo python3 child.py</code> and it works. Executed the Flask code by <code>sudo python3 app.py</code>. My guess was as <em>app.py</em> runs with <code>sudo</code> so it will take all other dependents with root privilege. But I am failed. It executes but after some moments it crashes.</p>
<p>Is there any workaround to call <em>child.py</em> file's <code>status_data</code> function with root privilege from <em>app.py</em> without crash? Security isn't an issue so I can reveal my credentials to any script file and if also require I can give <strong>password manually but only once</strong> as it is a continuous process so over and over password typing is not a tangible solution.</p>",python-3.x|flask|root|sudo,"<p>I have found a solution. First of all, I am changing the question title as after getting the solution I have understood the present title is not fit with the situation. Though giving <strong>root privilege</strong> is quite easy. <code>sudo python3 app.py</code> does the work. The major flaw was in</p>
<p><code>from pynq import Overlay</code><br />
and</p>
<pre><code>def main_path():
    ol = Overlay(&quot;/home/xilinx/pynq/overlays/design_4/design_1_wrapper.bit&quot;)
    return ol
</code></pre>
<p>I have called this <code>main_path</code> function repeatedly but it needs a handsome amount of delay and it was absent there. So I got an unwanted crash. After declaring<br />
<code>ol = Overlay(&quot;/home/xilinx/pynq/overlays/design_4/design_1_wrapper.bit&quot;)</code><br />
I have passed <code>ol</code> as a global variable to <code>status_data</code> function and it solves the issue.</p>",0
795,65390892,from an external python script call a python function which require root previlege(pynq library) is continuously crashed,"<p>I have to get continuous data from a python function and one of its libraries(<a href=""https://pynq.readthedocs.io/en/v2.0/overlay_design_methodology/overlay_tutorial.html"" rel=""nofollow noreferrer""><strong>Overlay</strong></a>) depends on root privilege. I have to run that python function by using Flask.</p>
<p>First of all, I have searched how to give root access to a python script but unfortunately, I haven't found any which mimic my case.</p>
<p><strong>The approach I have taken</strong> --<br />
1/ Python file containing <strong>Overlay</strong> library suppose the name is <em>child.py</em> which contains a function name <code>status_data</code></p>
<pre><code>from pynq import PL
from pynq import Overlay
def main_path():
    ol = Overlay(&quot;/home/xilinx/pynq/overlays/design_4/design_1_wrapper.bit&quot;)
    return ol

def status_data():
    ol = main_path()
    data = '''my_code'''
    return data
</code></pre>
<p>2/ Flask file name is <em>app.py</em> where I need the continuous data via an endpoint</p>
<pre><code>from create_json_data import status_data
from flask import Flask, render_template
from flask import jsonify
'''mayn others lib, doesn't include'''

'''my_code'''
@app.route(&quot;/auto_update_table&quot;)
def parse_auto_update_table(name=None):
    data_json = status_data()
    return jsonify(data_json)
</code></pre>
<p>3/ Both files are in the same folder. I have run that <em>child.py</em> with <code>sudo python3 child.py</code> and it works. Executed the Flask code by <code>sudo python3 app.py</code>. My guess was as <em>app.py</em> runs with <code>sudo</code> so it will take all other dependents with root privilege. But I am failed. It executes but after some moments it crashes.</p>
<p>Is there any workaround to call <em>child.py</em> file's <code>status_data</code> function with root privilege from <em>app.py</em> without crash? Security isn't an issue so I can reveal my credentials to any script file and if also require I can give <strong>password manually but only once</strong> as it is a continuous process so over and over password typing is not a tangible solution.</p>",python-3.x|flask|root|sudo,"<p>As I know when you give admin permission (root) to an executable (your python script).
Whatever the executable does is with admin privileges. <strong>Try with calling it with the root account itself or <code>sudo -u root --login &quot;python3 app.py&quot;</code> to see if it works or not</strong></p>
<p>Also saying it doesn't work is not helping. If you have a trace back. Add it to help us answer you or any more information that helps. I can't help you like this</p>
<p><strong>EDITED AFTER <a href=""https://stackoverflow.com/users/10634362/user10634362"">user10634362</a> COMMENT BELOW</strong></p>",0
796,65562047,How to split a Numpy Array (image) into tiles to iterate over?,"<p>I have a Numpy Array type image which I would like to split into 9 (3 x 3) even tiles which I can iterate over. How can I do this?</p>
<p>Here is my code so far to generate the numpy.ndarray but I haven't managed to split it:</p>
<p>The numpy image array to split is th1</p>
<pre class=""lang-py prettyprint-override""><code>import cv2
import numpy as np

# Only for the threshold display
from matplotlib import pyplot as plt

# The Image to be used
image = 'six.png'

# Finding the average greyscale value
image_bgr = cv2.imread(image, cv2.IMREAD_COLOR)

# Calculate the mean of each channel
channels = cv2.mean(image_bgr)
# Type Float
thresh = channels[0]/2
#print (thresh)

# Displaying the threshold value
img = cv2.imread(image,0)
img = cv2.medianBlur(img,5)

# If below then black else white 
ret,th1 = cv2.threshold(img,thresh,255,cv2.THRESH_BINARY)


titles = ['Original Image', 'Global Thresholding']
images = [img, th1, ret]

for i in range(2):
    plt.subplot(2,2,i+1),plt.imshow(images[i],'gray')
    plt.title(titles[i])
    plt.xticks([]),plt.yticks([])

# Shows single image on its' own
plt.imshow(images[1], 'gray')
plt.xticks([]),plt.yticks([])

</code></pre>
<p>Here is the image (six.png):</p>
<p><a href=""https://i.stack.imgur.com/usRoF.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/usRoF.png"" alt=""edited image named six.png"" /></a></p>",python|arrays|numpy|opencv|image-processing,"<p>I have found a solution adapted from elsewhere and it works great!</p>
<pre><code>img = th1
numrows, numcols = 3, 3
height = int(img.shape[0] / numrows)
width = int(img.shape[1] / numcols)
for row in range(numrows):
    for col in range(numcols):
        y0 = row * height
        y1 = y0 + height
        x0 = col * width
        x1 = x0 + width
        individual =  (img[y0:y1, x0:x1])
        plt.imshow(individual, 'gray')
        plt.xticks([]),plt.yticks([])
        plt.show()
</code></pre>",1
797,65562047,How to split a Numpy Array (image) into tiles to iterate over?,"<p>I have a Numpy Array type image which I would like to split into 9 (3 x 3) even tiles which I can iterate over. How can I do this?</p>
<p>Here is my code so far to generate the numpy.ndarray but I haven't managed to split it:</p>
<p>The numpy image array to split is th1</p>
<pre class=""lang-py prettyprint-override""><code>import cv2
import numpy as np

# Only for the threshold display
from matplotlib import pyplot as plt

# The Image to be used
image = 'six.png'

# Finding the average greyscale value
image_bgr = cv2.imread(image, cv2.IMREAD_COLOR)

# Calculate the mean of each channel
channels = cv2.mean(image_bgr)
# Type Float
thresh = channels[0]/2
#print (thresh)

# Displaying the threshold value
img = cv2.imread(image,0)
img = cv2.medianBlur(img,5)

# If below then black else white 
ret,th1 = cv2.threshold(img,thresh,255,cv2.THRESH_BINARY)


titles = ['Original Image', 'Global Thresholding']
images = [img, th1, ret]

for i in range(2):
    plt.subplot(2,2,i+1),plt.imshow(images[i],'gray')
    plt.title(titles[i])
    plt.xticks([]),plt.yticks([])

# Shows single image on its' own
plt.imshow(images[1], 'gray')
plt.xticks([]),plt.yticks([])

</code></pre>
<p>Here is the image (six.png):</p>
<p><a href=""https://i.stack.imgur.com/usRoF.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/usRoF.png"" alt=""edited image named six.png"" /></a></p>",python|arrays|numpy|opencv|image-processing,"<p>What I would do is create a list or a 2-dimensional array in which I'd save the &quot;tiles&quot; of the full image. The tiles would be copied using the code below:</p>
<pre><code>height, width, dim = img.shape
image_tile = img[0:height/3, 0:width/3]
</code></pre>
<p>It creates a new ndarray <em>image_tile</em> that contains the part of the full image array that's inside of the coordinates. In this case it is the top left tile.</p>
<p>The whole example with a for loop would look something like this:</p>
<pre><code>image_tile = []
for i in range(0,3):
    for j in range(0,3):
        image_tile.append(img[i * height/3:(i+1) * height/3, j * width/3:(j+1) * width/3])
</code></pre>
<p>I hope this helps and good luck!</p>",2
798,65417653,R installation not finding anaconda packages,"<p>I was trying to install some packages in R and I have run into an error:</p>
<pre><code>Error: package or namespace load failed for ‘leiden’:
 .onAttach failed in attachNamespace() for 'leiden', details:
  call: py_module_import(module, convert = convert)
  error: ModuleNotFoundError: No module named 'pandas'
</code></pre>
<p>This is strange to me because I definitely have pandas:</p>
<pre><code>$ conda list | grep pandas
pandas                    1.0.1            py37h0573a6f_0
</code></pre>
<p>Also which python seems to give me my anaconda installation:</p>
<pre><code>/home/usrname/anaconda3/bin/python
</code></pre>
<p>I am installing these packages on WSL (Windows Subsystem for Linux) Ubuntu.</p>
<p>Any advice appreciated.</p>",python|r|pandas,"<p>I ended up finding another issue with a similar problem. Turns out I needed to activate the conda r-reticulate environment.</p>
<p>Take a look at a similar question here: <a href=""https://stackoverflow.com/questions/63220597/python-in-r-error-could-not-find-a-python-environment-for-usr-bin-python"">Python in R - Error: could not find a Python environment for /usr/bin/python</a></p>",0
799,65541942,SQLAlchemy require primary key to be generated by program,"<p>When defining a table, you define one column as <code>primary_key=True</code>. As shown in the <a href=""https://docs.sqlalchemy.org/en/13/orm/tutorial.html#create-an-instance-of-the-mapped-class"" rel=""nofollow noreferrer"">tutorial</a>, SQLAlchemy will automatically create an ID for an item, even when it is not supplied by the user. The <code>primary_key=True</code> also automatically sets <code>nullable=False</code>.</p>
<p>Is there a way that I can set up the Primary Key so that it is required, but is not filled by SQLAlchemy? I want my program to <em>have</em> to supply a primary key for each row.</p>
<p>Something like:</p>
<pre><code>class User(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key=True, autogenerate=False)
    name = Column(String)
    nickname = Column(String)
</code></pre>",python|sql|sqlalchemy|flask-sqlalchemy,"<p>You can set the <a href=""https://docs.sqlalchemy.org/en/13/core/metadata.html?highlight=autoincrement#sqlalchemy.schema.Column.params.autoincrement"" rel=""nofollow noreferrer"">autoincrement</a> attribute to <code>False</code> to get this effect*.  This code</p>
<pre class=""lang-py prettyprint-override""><code>import sqlalchemy as sa


meta = sa.MetaData()
tbl = sa.Table('test20210102a', meta,
               sa.Column('id', sa.Integer, primary_key=True, autoincrement=False),
               sa.Column('name', sa.String(8)))

engine = sa.create_engine('postgresql+psycopg2:///test', echo=True)

meta.drop_all(bind=engine)
meta.create_all(bind=engine)

with engine.connect() as conn:
    conn.execute(tbl.insert({'name': 'foo'}))
engine.dispose()
</code></pre>
<p>emits this warning when the table is created</p>
<pre class=""lang-none prettyprint-override""><code>SAWarning: Column 'test20210102a.id' is marked as a member of the primary key for table 'test20210102a', but has no Python-side or server-side default generator indicated, nor does it indicate 'autoincrement=True' or 'nullable=True', and no explicit value is passed.  Primary key columns typically may not store NULL.
</code></pre>
<p>and produces this error</p>
<pre class=""lang-none prettyprint-override""><code>sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column &quot;id&quot; violates not-null constraint
DETAIL:  Failing row contains (null, foo).
</code></pre>
<hr />
<p>* The above code should work for most RDBMS.  Sqlite has different autoincrement semantics, as described in the <a href=""https://docs.sqlalchemy.org/en/13/dialects/sqlite.html#sqlite-auto-incrementing-behavior"" rel=""nofollow noreferrer"">dialect information</a>, but you can get similar behaviour by using a different integer type for the id column:</p>
<pre class=""lang-py prettyprint-override""><code>sa.Column('id', sa.SmallInteger, primary_key=True, autoincrement=False)
</code></pre>",2
800,65476633,python - xml signature validation is getting fails,"<p>I have generated private key and public cert using the openssl command:</p>
<pre><code>openssl req -x509 -newkey rsa:4096 -keyout private_key.pem -out public_cert.pem -nodes -days 1460 -subj &quot;/C=YOURCOUNTRY/O=YOURCOMPANYNAME/CN=COMMONNAME
</code></pre>
<p>signed the xml using the above generated privatekey and tried to verify the same, but verification is failing, sample code as follows:</p>
<pre><code>from lxml import etree
import os
from signxml import XMLSigner, XMLVerifier


current_path = os.path.dirname(os.path.abspath(__file__))
ca_cert_file = os.path.join(current_path, &quot;public_cert.pem&quot;)
cert = open(ca_cert_file).read()
key = open(os.path.join(current_path, &quot;private_key.pem&quot;)).read()

data_to_sign = &quot;&lt;Test/&gt;&quot;
root = etree.fromstring(data_to_sign)
signer = XMLSigner(c14n_algorithm='http://www.w3.org/TR/2001/REC-xml-c14n-20010315')
signed_root = signer.sign(root, key=key, cert=cert)
verified_data = XMLVerifier().verify(signed_root, ca_pem_file=ca_cert_file)
</code></pre>
<p>executing the above code resulting in below exception:</p>
<pre><code>Traceback (most recent call last):
  File &quot;C:\Users\&lt;username&gt;\AppData\Local\Programs\Python\Python38-32\lib\site-packages\signxml\__init__.py&quot;, line 864, in verify
    verify(signing_cert, raw_signature, signed_info_c14n, signature_digest_method)
  File &quot;C:\Users\&lt;username&gt;\AppData\Local\Programs\Python\Python38-32\lib\site-packages\OpenSSL\crypto.py&quot;, line 2869, in verify
    _raise_current_error()
  File &quot;C:\Users\&lt;username&gt;\AppData\Local\Programs\Python\Python38-32\lib\site-packages\OpenSSL\_util.py&quot;, line 54, in exception_from_error_queue
    raise exception_type(errors)
OpenSSL.crypto.Error: [('rsa routines', 'RSA_padding_check_PKCS1_type_1', 'invalid padding'), ('rsa routines', 'rsa_ossl_public_decrypt', 'padding check failed')]
</code></pre>",python|openssl|lxml|x509|xml-signature,"<p>An <em><strong>invalid padding</strong></em> warning usually indicates that there is a problem with the keys.  For instance: &quot;the Public key does not matched to the Private key for decryption.&quot;</p>
<p>I was able to throw this error when I purposely mismatched my keys. This error is the same one that you mentioned in your question.</p>
<pre><code>OpenSSL.crypto.Error: [('rsa routines', 'RSA_padding_check_PKCS1_type_1', 'invalid padding'), ('rsa routines', 'rsa_ossl_public_decrypt', 'padding check failed')]

</code></pre>
<p>I would recommend recreating the keys, verify that you're using the correct key pair in your code and then retest.</p>
<p>I generated my key this way.</p>
<pre><code>openssl req -x509 -newkey rsa:4096 -keyout private_key.pem -out public_cert.pem -nodes -days 1460 -subj &quot;/C=US/O=mycompanyname/CN=domainname.com&quot;

</code></pre>
<p>The code below didn't produce an error.</p>
<pre><code>import os
from lxml import etree
from signxml import XMLSigner, XMLVerifier, InvalidCertificate

current_path = os.path.dirname(os.path.abspath(__file__))
ca_cert_file = os.path.join(current_path, &quot;public_cert.pem&quot;)
cert = open(ca_cert_file).read()
key = open(os.path.join(current_path, &quot;private_key.pem&quot;)).read()

data_to_sign = &quot;&lt;Test/&gt;&quot;
root = etree.fromstring(data_to_sign)
signer = XMLSigner(c14n_algorithm='http://www.w3.org/TR/2001/REC-xml-c14n-20010315')
signed_root = signer.sign(root, key=key, cert=cert)
try:
    verified_data = XMLVerifier().verify(signed_root, ca_pem_file=ca_cert_file)
except InvalidCertificate as e:
    print(e)
else:
    print('verified signature')
</code></pre>
<pre><code>----------------------------------------
 System information
----------------------------------------
Platform:    macOS
Python:      3.8.0
lxml:        4.6.2
signxml:     2.8.1
LibreSSL:    2.8.3 (openssl)
----------------------------------------
</code></pre>",2
801,65427904,Dynamic multiple inheritance or mixins,"<p>I am trying to understand how to implement multiple inheritance or MixIns in my program.</p>
<p>My thinking is that I have a Car class that uses MixIns to add methods from difference performance boosters like cold air intake and supercharger.  So something like the below although I know this doesn't work.</p>
<pre><code>car1 = Car(Turbocharger, ColdAirIntake)
car2 = Car(Supercharger)
car3 = Car(Nitrous)
</code></pre>
<p>I found this example, but wasn't sure if this was the proper way to do what I am thinking.</p>
<p><a href=""https://stackoverflow.com/questions/8544983/dynamically-mixin-a-base-class-to-an-instance-in-python"">Dynamically mixin a base class to an instance in Python</a></p>",python|oop|multiple-inheritance|mixins,"<p>Not sure if I understand you completely, but if you want to just understand what you have mentioned, look at this simple example:</p>
<pre><code>class Turbocharger(dict):
    # Define any class attributes.
    def __init__(self):
        # Define any instance attributes here.
        super().__init__()
 
    def __call__(self, *others):
        for other in others:
            # You'd want to check if it's a mixin, isinstance()?
            self.update(other)


class Supercharger(dict):
    # Same stuff here.
</code></pre>
<p>Basically each of these mixins just 'update' themselves with other mixins passed as arguments to the <code>__call__</code>. These classes just adds some syntactic sugar.</p>",0
802,65427904,Dynamic multiple inheritance or mixins,"<p>I am trying to understand how to implement multiple inheritance or MixIns in my program.</p>
<p>My thinking is that I have a Car class that uses MixIns to add methods from difference performance boosters like cold air intake and supercharger.  So something like the below although I know this doesn't work.</p>
<pre><code>car1 = Car(Turbocharger, ColdAirIntake)
car2 = Car(Supercharger)
car3 = Car(Nitrous)
</code></pre>
<p>I found this example, but wasn't sure if this was the proper way to do what I am thinking.</p>
<p><a href=""https://stackoverflow.com/questions/8544983/dynamically-mixin-a-base-class-to-an-instance-in-python"">Dynamically mixin a base class to an instance in Python</a></p>",python|oop|multiple-inheritance|mixins,"<p>You can make instances by dynamically defining your car class:</p>
<pre class=""lang-py prettyprint-override""><code>def make_car(*bases):
    class dynamic_car(*bases, Car):
        pass
    return dynamic_car()

car1 = make_car(Turbocharger, ColdAirIntake)
car2 = make_car(Supercharger)
car3 = make_car(Nitrous)
</code></pre>",1
803,65490628,why scrapy won't load any of my pipelines?,"<p>ok, so Im using <code>Scrapy</code> for some basic web scraping and its working fine on scraping part! when get some output using feed export something like <code>-o output.csv</code> wont do anything, it will make an empty file but nothing else.</p>
<p>after a period of confusion I couldn't  make it work so i've decided to use a pipeline to write some custom method of exporting. but now the problem is even though the application is working fine... its just not load the pipelines. not any single one of them is not running and there is no error.</p>
<p>this is my settings.py where I put the option to load them:</p>
<pre><code>ITEM_PIPELINES = {
    'fbcrawl.pipelines.CsvExporterPipeline': 300
}
</code></pre>
<p>and this is my <code>CsvExporterPipeline</code> class inside <code>pipelines.py</code>:</p>
<pre><code>class CsvExporterPipeline(object):
    def process_item(self, item, spider):
        print('\n' * 2)
        print(item)
        print('\n' * 2)
        return item
</code></pre>
<p>and its not gonna run neither of these 3 prints wont run at all.</p>
<p>I want to know how can I have my pipelines loaded and working?</p>
<p>UPDATE: i forgot to mention that im trying to run this code... so the spider is mentioned here:</p>
<p><a href=""https://github.com/rugantio/fbcrawl"" rel=""nofollow noreferrer"">https://github.com/rugantio/fbcrawl</a></p>",windows|scrapy|python-3.7,"<p>Are you sure <code>BOT_NAME</code> in <code>settings.py</code> is set at <code>fbcrawl</code> ?</p>
<p>And what is the code of your spider ?</p>",0
804,65292627,"Why is tkinter ""Fail to allocate bitmap"" crashing the Spyder kernel after script completes?","<p>I have written a short script which emulates a &quot;waterfall&quot; display, wherein a very long image is displayed by scrolling it through a smaller window. My program scrolls two images side-by-side: the first image is uncalibrated, and the second image is a calibrated version of the first image. In practice, these images are generated line-by-line, and would be displayed in (roughly) real time. My emulator is not real time, but just reads in the two images from data files.</p>
<p>Here is a screen capture of the GUI:
<a href=""https://i.stack.imgur.com/DIER3.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/DIER3.png"" alt=""Screen capture of GUI running"" /></a></p>
<p>I am new to tkinter, and just trying to follow tutorials online to make a simple GUI. The GUI windows are each 300x480 - the two images are ~10000x480 color images with are scrolled through the GUI windows simultaneously.</p>
<p>The script basically runs as expected until the end.</p>
<p>After the two images have completed scrolling, in Spyder the kernel dies and is restarted. No error is given other than &quot;Kernel died, restarting&quot;. Running my program from the command line, I get the error &quot;Fail to allocate bitmap&quot; after the script has displayed the full images. I presume the &quot;Fail to allocate bitmap&quot; is what is causing the kernel to die in Spyder, and that it is something I am doing wrong with Tk.</p>
<p>Here is my (pseudo)code:</p>
<pre><code>import tkinter 
from PIL import Image, ImageTk 
import numpy as np
import sys

lines = &lt;length of image along one dimension&gt;
extractedImageArray = &lt;uncalibrated 24-bit image as array of dimension [lines, 480, 3]&gt;
calibratedImageArray = &lt;calibrated 24-bit image as array of dimension [lines, 480, 3]&gt;

im1 = np.zeros((300,480,3), dtype=np.uint8)
im2 = np.zeros((300,480,3), dtype=np.uint8)

root = tkinter.Tk()
root.geometry('960x350+0+0')
root.title('Waterfall Emulator')
root.grid_columnconfigure(0, weight=1)
root.grid_columnconfigure(1, weight=1)
root.grid_rowconfigure(0,weight=1)
root.grid_rowconfigure(1,weight=0)

root.button = tkinter.Button(root,text='Quit',command=root.destroy)
root.button.grid(row=1, column=0, columnspan=2)
        
for i in range(lines):
    try:
        im1 = np.vstack((im1[1:,:,:],extractedImageArray[i,:,:].reshape((1,480,3))))
        leftImage=ImageTk.PhotoImage(Image.fromarray(im1))
        leftImageLabel = tkinter.Label(image=leftImage)
        leftImageLabel.grid(row=0, column=0, padx=4, pady=4)
        # Store a reference to a PhotoImage object, to avoid it
        # being garbage collected! This is necesary to display the image!
        leftImageLabel.image = leftImage

        im2 = np.vstack((im2[1:,:,:],calibratedImageArray[i,:,:].reshape((1,480,3))))        
        rightImage=ImageTk.PhotoImage(Image.fromarray(im2))
        rightImageLabel = tkinter.Label(image=rightImage)
        rightImageLabel.grid(row=0, column=1, padx=4, pady=4)
        # Store a reference to a PhotoImage object, to avoid it
        # being garbage collected! This is necesary to display the image!
        rightImageLabel.image = rightImage
        
        root.update()
    except:
        sys.exit()
        
root.mainloop()
</code></pre>
<p>The program basically does what I need it to, but it's irritating that the kernel dies at the end instead of there being a clean exit. I think the error must be due to my inexperience with tkinter.</p>
<p>Why is the kernel dying after the script is executed?</p>
<p>=======================================================</p>
<p>ADDED:</p>
<p>For completeness, here is how I modified my script after Martineau's solution: I pulled the button creation outside the loop and now just update the labels.</p>
<pre><code>&lt;--snip--&gt;

root.button = tkinter.Button(root,text='Quit',command=root.destroy)
root.button.grid(row=1, column=0, columnspan=2)

leftImage=ImageTk.PhotoImage(Image.fromarray(im1))
leftImageLabel = tkinter.Label(image=leftImage)
leftImageLabel.grid(row=0, column=0, padx=4, pady=4)

rightImage=ImageTk.PhotoImage(Image.fromarray(im2))
rightImageLabel = tkinter.Label(image=rightImage)
rightImageLabel.grid(row=0, column=1, padx=4, pady=4)
        
for i in range(lines):
    try:
        im1 = np.vstack((im1[1:,:,:],extractedImageArray[i,:,:].reshape((1,480,3))))
        leftImage=ImageTk.PhotoImage(Image.fromarray(im1))
        leftImageLabel.configure(image=leftImage)
        # Store a reference to a PhotoImage object, to avoid it
        # being garbage collected! This is necesary to display the image!
        leftImageLabel.image = leftImage

        im2 = np.vstack((im2[1:,:,:],calibratedImageArray[i,:,:].reshape((1,480,3))))        
        rightImage=ImageTk.PhotoImage(Image.fromarray(im2))
        rightImageLabel.configure(image=rightImage)
        # Store a reference to a PhotoImage object, to avoid it
        # being garbage collected! This is necesary to display the image!
        rightImageLabel.image = rightImage
</code></pre>",python|numpy|tkinter,"<p>You're creating ~10000 <code>Label</code> widgets, each with an associated image — which takes a lot of memory.</p>
<p>You really don't need all of them at once since your program only &quot;scrolls&quot; in one direction — which means you should be able to significantly reduce the amount of memory required by <em>changing</em> the images associated with a fixed, relatively small, number of <code>Label</code>s.</p>
<p>You can change existing <code>Label</code> widgets by using their <a href=""https://anzeljg.github.io/rin2/book2/2405/docs/tkinter/universal.html"" rel=""nofollow noreferrer""><code>config()</code></a> method.</p>",2
805,65478909,"youtube page scroll down using selenium, python","<pre><code>url_main = &quot;https://www.youtube.com/feed/history&quot;
</code></pre>
<p>I want to scroll down infinitely in the webpage above until all contents are visible, so I tried</p>
<pre><code>from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.by import By
from selenium.webdriver.firefox.options import Options
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from bs4 import BeautifulSoup
import time

driver = webdriver.Chrome(driverpath)
wait = WebDriverWait(driver, 10)


driver.get(url_main)
login = driver.find_element_by_css_selector('a[href=&quot;https://accounts.google.com/ServiceLogin?service=youtube&amp;uilel=3&amp;passive=true&amp;continue=https%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26app%3Ddesktop%26hl%3Dko%26next%3Dhttps%253A%252F%252Fwww.youtube.com%252Ffeed%252Fhistory&amp;hl=ko&amp;ec=65620&quot;]')
login.click()
login = wait.until(EC.visibility_of_element_located((By.CSS_SELECTOR,'input[type=&quot;email&quot;]')))
login.send_keys(email)
login.send_keys(Keys.RETURN)
login = wait.until(EC.visibility_of_element_located((By.CSS_SELECTOR,'input[type=&quot;password&quot;]')))
login.send_keys(password)
login.send_keys(Keys.RETURN)

content = wait.until(EC.visibility_of_element_located((By.CSS_SELECTOR,'div[id=&quot;primary&quot;] div[id=&quot;contents&quot;]')))

no_of_pagedowns = 1

while no_of_pagedowns:
    content.send_keys(Keys.PAGE_DOWN)
    time.sleep(1)
    no_of_pagedowns-=1
</code></pre>
<p>But not working. I also tried copy-pasting the code in <a href=""https://dev.to/mr_h/python-selenium-infinite-scrolling-3o12"" rel=""nofollow noreferrer"">this link</a> but it didn't work at all also.</p>",python|selenium|youtube|selenium-chromedriver,"<p>You can implement something like this:</p>
<pre class=""lang-py prettyprint-override""><code># save the max scrollHeight of the page
scrollHeight = d.execute_script(&quot;return window.scrollMaxY&quot;)
scrolled_pages = 0
# while we have not reached the max scrollHeight
while d.execute_script(&quot;return window.pageYOffset&quot;) &lt; scrollHeight:
# scroll one page down
    d.execute_script(&quot;window.scrollByPages(1)&quot;)
    scrolled_pages += 1
# wait to load any lazy loaded images (may not be needed, depending on your usecase)
    time.sleep(0.2)
</code></pre>",1
806,65517911,Reading parquet file from ADLS gen2 using service principal,"<p>I am using azure-storage-file-datalake package to connect with ADLS gen2</p>
<pre><code>from azure.identity import ClientSecretCredential

# service principal credential
tenant_id = 'xxxxxxx'
client_id = 'xxxxxxxxx'
client_secret = 'xxxxxxxx'
storage_account_name = 'xxxxxxxx'

credential = ClientSecretCredential(tenant_id, client_id, client_secret)

service_client = DataLakeServiceClient(account_url=&quot;{}://{}.dfs.core.windows.net&quot;.format(
        &quot;https&quot;, storage_account_name), credential=credential) # I have also tried blob instead of dfs in account_url
</code></pre>
<p>Folder structure in ADLS gen2 from where I have to read parquet file look like this. Inside container of ADLS gen2 we folder_a which contain folder_b in which there is parquet file.</p>
<pre><code>folder_a
  |-folder_b
      parquet_file1
</code></pre>
<p>from gen1 storage we used to read parquet file like this.</p>
<pre><code>from azure.datalake.store import lib
from azure.datalake.store.core import AzureDLFileSystem
import pyarrow.parquet as pq

adls = lib.auth(tenant_id=directory_id,
            client_id=app_id,
            client_secret=app_key)
adl = AzureDLFileSystem(adls, store_name=adls_name) 

f = adl.open(file, 'rb') # 'file is parquet file with path of parquet file folder_a/folder_b/parquet_file1'
table = pq.read_table(f)
</code></pre>
<p>How do we proceed with gen2 storage, we are stuck at this point</p>
<p><a href=""http://peter-hoffmann.com/2020/azure-data-lake-storage-gen-2-with-python.html"" rel=""nofollow noreferrer"">http://peter-hoffmann.com/2020/azure-data-lake-storage-gen-2-with-python.html</a> is the link that we have followed.</p>
<p><strong>Note - We are not using databrick to do this</strong></p>",python-3.x|pandas|azure-data-lake|pyarrow|azure-data-lake-gen2,"<p>Regarding the issue, please refer to the following code</p>
<pre><code>from azure.identity import ClientSecretCredential
from azure.storage.filedatalake import DataLakeServiceClient
import pyarrow.parquet as pq
import io

client_id = ''
client_secret = ''
tenant_id = ''
credential = ClientSecretCredential(tenant_id, client_id, client_secret)

storage_account_name = 'testadls05'
service_client = DataLakeServiceClient(account_url=&quot;{}://{}.dfs.core.windows.net&quot;.format(
    &quot;https&quot;, storage_account_name), credential=credential)
file_system = '&lt;container name&gt;'
file_system_client = service_client.get_file_system_client(file_system)

file_path = ''
file_client = file_system_client.get_file_client(file_path)
data = file_client.download_file(0)
with io.BytesIO() as b:
    data.readinto(b)
    table = pq.read_table(b)
    print(table)

</code></pre>
<p><a href=""https://i.stack.imgur.com/wYNqG.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/wYNqG.png"" alt=""enter image description here"" /></a></p>",1
807,65240623,List only three element n my homepage in django/python,"<pre class=""lang-html prettyprint-override""><code>{% for post in BusinessPost %}
&lt;ul&gt;
    &lt;li&gt;{{ post.title}} -- {{post.author}} -- {{post.source_date}} &lt;/li&gt;
&lt;/ul&gt;
{% endfor %}
</code></pre>
<p>this is my code to get all the element of my model into listView page but i only want to get the first 3 element of this list. Can anyone help</p>",python|django|django-templates,"<p>You can slice the queryset with:</p>
<pre><code>class BusinessPostListView(ListView):
    #                  obtain the first 3 &downarrow;
    queryset = BusinessPost.objects.all()<b>[:3]</b>

    # &hellip;</code></pre>",1
808,65326767,How to use OR in a list comprehension IF condition,"<p>I need to filter out all columns that don't end with a _y or _x.</p>
<pre><code>merged_hdi_aidg=df_HDI.merge(df_FDAC_CA, on='iso3_codes')
merged_hdi_aidg.columns
</code></pre>
<p>Index(['Country_x', '1990', '1991', '1992', '1993', '1994', '1995', '1996',
'1997', '1998', '1999', '2000', '2001_x', '2002_x', '2003_x', '2004_x',
'2005_x', '2006_x', '2007_x', '2008_x', '2009_x', '2010_x', '2011_x',
'2012_x', '2013_x', '2014_x', '2015_x', '2016_x', '2017_x', '2018_x',
'iso3_codes', 'Country_y', '2001_y', '2002_y', '2003_y', '2004_y',
'2005_y', '2006_y', '2007_y', '2008_y', '2009_y', '2010_y', '2011_y',
'2012_y', '2013_y', '2014_y', '2015_y', '2016_y', '2017_y', '2018_y',
'2019', '2020'],
dtype='object')</p>
<pre><code>drop_columns=[]
[drop_columns.append(column) for column in merged_hdi_aidg.columns if ('_y' not in column or '_x' not in column)];
drop_columns
</code></pre>
<p>['Country_x',
'1990',
'1991',
'1992',
'1993',
'1994',
'1995',
'1996',
'1997',
'1998',
'1999',
'2000',
'2001_x',
'2002_x',
'2003_x',
'2004_x',
'2005_x',
'2006_x',
'2007_x',
'2008_x',
'2009_x',
'2010_x',
'2011_x',
'2012_x',
'2013_x',
'2014_x',
'2015_x',
'2016_x',
'2017_x',
'2018_x',
'iso3_codes',
'Country_y',
'2001_y',
'2002_y',
'2003_y',
'2004_y',
'2005_y',
'2006_y',
'2007_y',
'2008_y',
'2009_y',
'2010_y',
'2011_y',
'2012_y',
'2013_y',
'2014_y',
'2015_y',
'2016_y',
'2017_y',
'2018_y',
'2019',
'2020']</p>",python-3.x|list|if-statement,"<p>A solution could be like this :</p>
<pre><code>x = ['Country_x', '1990', '1991', '1992', '1993', '1994', '1995', '1996', '1997', '1998', '1999', '2000', '2001_x', 
     '2002_x', '2003_x', '2004_x', '2005_x', '2006_x', '2007_x', '2008_x', '2009_x', '2010_x', '2011_x', '2012_x', 
     '2013_x', '2014_x', '2015_x', '2016_x', '2017_x', '2018_x', 'iso3_codes', 'Country_y', '2001_y', '2002_y', 
     '2003_y', '2004_y', '2005_y', '2006_y', '2007_y', '2008_y', '2009_y', '2010_y', '2011_y', '2012_y', '2013_y', 
     '2014_y', '2015_y', '2016_y', '2017_y', '2018_y', '2019', '2020']


columns_to_take = [i for i in x if i.endswith('_x') or i.endswith('_y')]

print(&quot;columns_to_take = &quot;, columns_to_take)

columns_to_drop = [i for i in x if (not i.endswith('_x')) and (not i.endswith('_y'))]

print(&quot;columns_to_drop = &quot; , columns_to_drop)

</code></pre>",0
809,65326767,How to use OR in a list comprehension IF condition,"<p>I need to filter out all columns that don't end with a _y or _x.</p>
<pre><code>merged_hdi_aidg=df_HDI.merge(df_FDAC_CA, on='iso3_codes')
merged_hdi_aidg.columns
</code></pre>
<p>Index(['Country_x', '1990', '1991', '1992', '1993', '1994', '1995', '1996',
'1997', '1998', '1999', '2000', '2001_x', '2002_x', '2003_x', '2004_x',
'2005_x', '2006_x', '2007_x', '2008_x', '2009_x', '2010_x', '2011_x',
'2012_x', '2013_x', '2014_x', '2015_x', '2016_x', '2017_x', '2018_x',
'iso3_codes', 'Country_y', '2001_y', '2002_y', '2003_y', '2004_y',
'2005_y', '2006_y', '2007_y', '2008_y', '2009_y', '2010_y', '2011_y',
'2012_y', '2013_y', '2014_y', '2015_y', '2016_y', '2017_y', '2018_y',
'2019', '2020'],
dtype='object')</p>
<pre><code>drop_columns=[]
[drop_columns.append(column) for column in merged_hdi_aidg.columns if ('_y' not in column or '_x' not in column)];
drop_columns
</code></pre>
<p>['Country_x',
'1990',
'1991',
'1992',
'1993',
'1994',
'1995',
'1996',
'1997',
'1998',
'1999',
'2000',
'2001_x',
'2002_x',
'2003_x',
'2004_x',
'2005_x',
'2006_x',
'2007_x',
'2008_x',
'2009_x',
'2010_x',
'2011_x',
'2012_x',
'2013_x',
'2014_x',
'2015_x',
'2016_x',
'2017_x',
'2018_x',
'iso3_codes',
'Country_y',
'2001_y',
'2002_y',
'2003_y',
'2004_y',
'2005_y',
'2006_y',
'2007_y',
'2008_y',
'2009_y',
'2010_y',
'2011_y',
'2012_y',
'2013_y',
'2014_y',
'2015_y',
'2016_y',
'2017_y',
'2018_y',
'2019',
'2020']</p>",python-3.x|list|if-statement,"<p>Here is one possible way. I slightly modified your code.
Steps</p>
<ul>
<li>Make a set of all columns</li>
<li>Make a set of all columns you wish to discard ..(that have the
patterns in them)</li>
<li>Get a difference of 1 and 2.</li>
<li>Done</li>
</ul>
<pre><code>merged_hdi_aidg=df_HDI.merge(df_FDAC_CA, on='iso3_codes')
AllColumns = set(merged_hdi_aidg.columns)
drop_columns=[]
[drop_columns.append(column) for column in merged_hdi_aidg.columns if ('_y' in column or '_x' in column)];
drop_columns = set(drop_columns)
ColumnsThatYouWant = AllColumns - drop_columns
print(ColumnsThatYouWant)
</code></pre>
<p>It gives the following output</p>
<pre class=""lang-py prettyprint-override""><code>{'1998', '1992', '1999', '2020', '1993', '1991', '1990', 'iso3_codes', '2000', '1995', '1997', '2019', '1996', '1994'}
</code></pre>
<p>May be you want to convert it back to a list or something.
By the way you are not checking for '_x' or '_y' in the end of a column name. You are checking only if they are present anywhere in the column name. May be you want to fix that too.</p>",0
810,65326767,How to use OR in a list comprehension IF condition,"<p>I need to filter out all columns that don't end with a _y or _x.</p>
<pre><code>merged_hdi_aidg=df_HDI.merge(df_FDAC_CA, on='iso3_codes')
merged_hdi_aidg.columns
</code></pre>
<p>Index(['Country_x', '1990', '1991', '1992', '1993', '1994', '1995', '1996',
'1997', '1998', '1999', '2000', '2001_x', '2002_x', '2003_x', '2004_x',
'2005_x', '2006_x', '2007_x', '2008_x', '2009_x', '2010_x', '2011_x',
'2012_x', '2013_x', '2014_x', '2015_x', '2016_x', '2017_x', '2018_x',
'iso3_codes', 'Country_y', '2001_y', '2002_y', '2003_y', '2004_y',
'2005_y', '2006_y', '2007_y', '2008_y', '2009_y', '2010_y', '2011_y',
'2012_y', '2013_y', '2014_y', '2015_y', '2016_y', '2017_y', '2018_y',
'2019', '2020'],
dtype='object')</p>
<pre><code>drop_columns=[]
[drop_columns.append(column) for column in merged_hdi_aidg.columns if ('_y' not in column or '_x' not in column)];
drop_columns
</code></pre>
<p>['Country_x',
'1990',
'1991',
'1992',
'1993',
'1994',
'1995',
'1996',
'1997',
'1998',
'1999',
'2000',
'2001_x',
'2002_x',
'2003_x',
'2004_x',
'2005_x',
'2006_x',
'2007_x',
'2008_x',
'2009_x',
'2010_x',
'2011_x',
'2012_x',
'2013_x',
'2014_x',
'2015_x',
'2016_x',
'2017_x',
'2018_x',
'iso3_codes',
'Country_y',
'2001_y',
'2002_y',
'2003_y',
'2004_y',
'2005_y',
'2006_y',
'2007_y',
'2008_y',
'2009_y',
'2010_y',
'2011_y',
'2012_y',
'2013_y',
'2014_y',
'2015_y',
'2016_y',
'2017_y',
'2018_y',
'2019',
'2020']</p>",python-3.x|list|if-statement,"<p>You can do it the other way around, select those that contain _x and _y:</p>
<p>Example data</p>
<pre><code>merged_hdi_aidg = pd.DataFrame({'x1_y':[1,2], 'x1_x':[1,3], 'x1_z':[0,0]})
</code></pre>
<p>Use <code>str.contains</code>:</p>
<pre><code>merged_hdi_aidg.loc[:, merged_hdi_aidg.columns.str.contains('|'.join(['_y', '_x']))]
</code></pre>
<p>In case you want to be sure to only capture _x and _y at the end of the columnnames, use <code>endswith</code>:</p>
<pre><code>merged_hdi_aidg.loc[:, merged_hdi_aidg.columns.str.endswith(('_x','_y'))]  
</code></pre>",1
811,65297793,How to create the expected list?,"<p>I have 3 below lists. I want to create an expected_list that has the same shape with list 1 and will contain element in list 2 if the element in list1 has &quot;Review at&quot;, otherwise it will be blank (&quot;&quot;)</p>
<pre><code>list1 = [  &quot;Review abcd&quot;
           &quot;Neu&quot;
           &quot;Review defg&quot;
           &quot;Review hmk&quot;
           &quot;hmd&quot;
           &quot;Review lmi&quot;
           &quot;Review yuj&quot;
           &quot;jmf&quot;
           &quot;Review  Bad&quot;]

list2 = [ &quot;http1&quot;
          &quot;http2&quot;
          &quot;http3&quot;
          &quot;http4&quot;
          &quot;http5&quot;
          &quot;http6&quot;]

expected_list = [ &quot;http1&quot;
                  &quot;&quot;
                  &quot;http2&quot;
                  &quot;http3&quot;
                  &quot;&quot;
                  &quot;http4&quot;
                  &quot;http5&quot;
                  &quot;&quot;
                  &quot;http6&quot;]    
</code></pre>
<p>I tried the following code</p>
<pre><code>for idx, item in enumerate(list1): 
    if &quot;Review&quot; in list1[idx]:
        for j in rang(len(list2))
            expected_list.append(list2[j])
    else:
        expected_list.append(&quot;&quot;)

</code></pre>
<p>However, in each element that satisfies the condition, it appends all the element in list2. So the shape of the expected list is more than expected. I know creating the 2nd loop is wrong. But how can i fix it ?</p>",python|list,"<p>You simply need something like:</p>
<pre><code>for idx, item in enumerate(list1): 
    if &quot;Review&quot; in item: # use *item* here, that's the whole point of enumerate
        expected_list.append(list2[idx])
    else:
        expected_list.append(&quot;&quot;)
</code></pre>
<p>Better yet, use <code>zip</code>:</p>
<pre><code>for item1, item2 in zip(list1, list2):
    if &quot;Review&quot; in item1:
        expected_list.append(item2)
    else:
        expected_list.append(&quot;&quot;)
</code></pre>",1
812,65297793,How to create the expected list?,"<p>I have 3 below lists. I want to create an expected_list that has the same shape with list 1 and will contain element in list 2 if the element in list1 has &quot;Review at&quot;, otherwise it will be blank (&quot;&quot;)</p>
<pre><code>list1 = [  &quot;Review abcd&quot;
           &quot;Neu&quot;
           &quot;Review defg&quot;
           &quot;Review hmk&quot;
           &quot;hmd&quot;
           &quot;Review lmi&quot;
           &quot;Review yuj&quot;
           &quot;jmf&quot;
           &quot;Review  Bad&quot;]

list2 = [ &quot;http1&quot;
          &quot;http2&quot;
          &quot;http3&quot;
          &quot;http4&quot;
          &quot;http5&quot;
          &quot;http6&quot;]

expected_list = [ &quot;http1&quot;
                  &quot;&quot;
                  &quot;http2&quot;
                  &quot;http3&quot;
                  &quot;&quot;
                  &quot;http4&quot;
                  &quot;http5&quot;
                  &quot;&quot;
                  &quot;http6&quot;]    
</code></pre>
<p>I tried the following code</p>
<pre><code>for idx, item in enumerate(list1): 
    if &quot;Review&quot; in list1[idx]:
        for j in rang(len(list2))
            expected_list.append(list2[j])
    else:
        expected_list.append(&quot;&quot;)

</code></pre>
<p>However, in each element that satisfies the condition, it appends all the element in list2. So the shape of the expected list is more than expected. I know creating the 2nd loop is wrong. But how can i fix it ?</p>",python|list,"<p>those lists are one element, you need to seperate values with commas:</p>
<p><a href=""https://i.stack.imgur.com/rtF3x.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/rtF3x.png"" alt=""need commas"" /></a></p>
<p>also, you dont need a lot of stuff there:</p>
<pre><code>j = 0
for each in list1: 
    if &quot;Review&quot; in each:
        expected_list.append(list2[j])
    else:
        expected_list.append(&quot;&quot;)
    j+=1
</code></pre>",1
813,65497847,Setting dict value to itself creates infinite copies,"<p>Recently I saw a piece of code that I can't understand. Here's the example:</p>
<pre class=""lang-py prettyprint-override""><code>a = {}
a['value'] = a

print(a)
&gt;&gt;&gt;&gt; {'value': {...}}
</code></pre>
<p>As a result, this creates an infinite number of copies of the initial dict, someting like:</p>
<pre><code>{
    'value': {
      'value': {
        'value': {
                  ...
        }
      }
    }
}
</code></pre>
<p>So, why is this happening? Is this some kind of recursive thing?</p>",python|python-3.x|dictionary,"<p>It is not really a recursion, but more just a referencing loop.</p>
<p>When you do</p>
<pre><code>a['value'] = a
</code></pre>
<p>You are setting the same dictionary, the same object, as the paired value of the key which is named 'value'.</p>
<p>So essentially it is just referencing itself. The important part from that being that it won't crash due to infinite printing, it understands the self-reference.</p>
<p>You will likely run into quite a bit of confusion with python if you are coming from many other languages, since the referencing is used quite a lot. You can find some more reading in the <a href=""https://docs.python.org/3/reference/datamodel.html#objects-values-and-types"" rel=""nofollow noreferrer"">documentation</a>, oreilly also has a neat post about some of it <a href=""https://www.oreilly.com/library/view/python-in-a/0596001886/ch04s03.html#:%7E:text=A%20Python%20program%20accesses%20data,reference%20has%20no%20intrinsic%20type."" rel=""nofollow noreferrer"">here</a>.</p>",3
814,65497847,Setting dict value to itself creates infinite copies,"<p>Recently I saw a piece of code that I can't understand. Here's the example:</p>
<pre class=""lang-py prettyprint-override""><code>a = {}
a['value'] = a

print(a)
&gt;&gt;&gt;&gt; {'value': {...}}
</code></pre>
<p>As a result, this creates an infinite number of copies of the initial dict, someting like:</p>
<pre><code>{
    'value': {
      'value': {
        'value': {
                  ...
        }
      }
    }
}
</code></pre>
<p>So, why is this happening? Is this some kind of recursive thing?</p>",python|python-3.x|dictionary,"<p>Your code does not copy anything. Python understands that your variable is recursive, that is, it references itself, and doesn't try to print the same thing forever. Instead it breaks the circular reference with writing <code>...</code>.</p>
<p>You can be sure that <code>a[&quot;value&quot;]</code> is indeed not a copy of your dictionary using the <code>is</code> keyword:</p>
<pre class=""lang-py prettyprint-override""><code>&gt;&gt;&gt; a = {}
&gt;&gt;&gt; a[&quot;value&quot;] = a
&gt;&gt;&gt; a[&quot;value&quot;] is a # they are the same object
True
&gt;&gt;&gt; 
</code></pre>",7
815,64600923,Multiprocessing does not output anything,"<p>I am trying to create a pool inside a pool to parallelize a <code>for</code> cycle. I'm trying to do this to see if it is faster than running a <code>for</code> cycle with only one pool creation. My issue is that the code I wrote doesn't seem to ever finish running and I don't quite get why. <strong>Here is the code:</strong></p>
<pre><code>import numpy as np
import multiprocessing as mp
import time
cpus = mp.cpu_count() - 1

def f(x):
    lista = list(pool.map(time.sleep, [1,2,3] * x))
    print('done')
    return lista

pool = mp.Pool(cpus)
lista2 = pool.map(f, range(2))
pool.close()
pool.join()
</code></pre>",python|multiprocessing,"<p>From the docs: &quot;Note that the methods of a pool should only ever be used by the process which created it.&quot;</p>
<p><a href=""https://docs.python.org/3.4/library/multiprocessing.html#module-multiprocessing.pool"" rel=""nofollow noreferrer"">https://docs.python.org/3.4/library/multiprocessing.html#module-multiprocessing.pool</a></p>
<p>Also note that the processes started by <code>Pool</code> are daemonic processes that are not allowed to have their own children. This may explain why you're experiencing a deadlock. According to this blog post you should have seen an exception getting raised over this, I'm not sure why you're not experiencing that:
<a href=""https://blog.mbedded.ninja/programming/languages/python/python-multiprocessing/"" rel=""nofollow noreferrer"">https://blog.mbedded.ninja/programming/languages/python/python-multiprocessing/</a></p>",2
816,64547982,Is there a function for selecting multiple data/row ranges in python?,"<p>My excel data has 600 rows. I am creating an LSTM model. I want to preprocess my data by getting rid of weekends (I did that already), holidays and summer break (needs to be done).</p>
<p>I want to select the following ranges: [0:50], [60:300] and [452:550].</p>
<p>I tried <code>iloc</code> but didn't work.</p>",python,"<p>To do this you need first to convert your ranges to slices and put them in a list, then you call <code>pandas.concat()</code> and use a generator that slices your dataframe based on the list of slices you created:</p>
<pre><code>ranges = [slice(0,50), slice(60,300), slice(452,550)]

filtered_df = pd.concat(df.iloc[x, :] for x in ranges)
</code></pre>",0
817,64398460,Getting rid of certain text from the body of an email using Python,"<p>I'm trying to parse the body of a forwarded email using the following Python code</p>
<pre><code>import imapclient
import os
import pprint
import pyzmail
import email

#my email info
EMAIL_ADRESS = os.environ.get('DB_USER')
EMAIL_PASSWORD = os.environ.get('PYTHON_PASS')

#login to my email
imap0bj =  imapclient.IMAPClient('imap.gmail.com', ssl = True)
imap0bj.login(EMAIL_ADRESS, EMAIL_PASSWORD )
print(&quot;ok&quot;)


pprint.pprint(imap0bj.list_folders())
#Selecting my Inbox
imap0bj.select_folder('INBOX', readonly = True)

#Getting UIDs from Inbox
UIDs = imap0bj.search(['SUBJECT', 'Contact FB Applicant', 'ON', '16-Oct-2020'])
print(UIDs)


rawMessages = imap0bj.fetch(UIDs, ['BODY[]'])
message = pyzmail.PyzMessage.factory(rawMessages[9999][b'BODY[]'])

message.text_part != None
#Body of the email returned as a string
msg = message.text_part.get_payload().decode(message.text_part.charset)

print(msg)

imap0bj.logout()
</code></pre>
<p>This code outputs a string similar to this</p>
<pre><code>   ---------- Forwarded message ---------
    From: Someone &lt;Mail@mail.biz&gt;
    Date: Wed, Oct 14, 2020 at 1:23 PM
    Subject: Fwd:  Contact FB Applicant
    To: &lt;mail@mail.com&gt;
    
    
    
    
   ---------- Forwarded message ---------
    From: Someone &lt;Mail@mail.biz&gt;
    Date: Wed, Oct 14, 2020 at 1:23 PM
    Subject: Fwd:  Contact FB Applicant
    To: &lt;mail@mail.com&gt;
    
    
    The following applicant filled out the form via Facebook.  Contact
    immediately.
    
    Some Guy
    999999999999
    mail@mail.com
</code></pre>
<p>But I don't want the &quot;Forwarded message&quot; parts. I just want it from &quot;The following applicant...&quot; and onwards which is the info I care about. How do I get rid of the other stuff? I'd really appreciate the help. Thank you!</p>",python|email|imapclient,"<p>You can use <code>io.StringIO</code></p>
<p>Here's how you would use it.</p>
<pre class=""lang-py prettyprint-override""><code>from io import StringIO

# your code goes here
...
...

msg = message.text_part.get_payload().decode(message.text_part.charset)

sio = StringIO(msg)

sio.seek(msg.index('The following applicant'))

for line in sio:
  print(line)
</code></pre>
<p>How it works:</p>
<p><code>StringIO</code> allows you to treat your string as a stream (file). <code>StringIO.seek</code> moves streams position to a particular place. (0 is the beginning of the stream)
<code>str.index</code> returns 1st location of a string within a string. Putting it all together: you move the beginning of the stream to the 1st occurrence of the string you want, and then just read from the stream.</p>",0
818,64398460,Getting rid of certain text from the body of an email using Python,"<p>I'm trying to parse the body of a forwarded email using the following Python code</p>
<pre><code>import imapclient
import os
import pprint
import pyzmail
import email

#my email info
EMAIL_ADRESS = os.environ.get('DB_USER')
EMAIL_PASSWORD = os.environ.get('PYTHON_PASS')

#login to my email
imap0bj =  imapclient.IMAPClient('imap.gmail.com', ssl = True)
imap0bj.login(EMAIL_ADRESS, EMAIL_PASSWORD )
print(&quot;ok&quot;)


pprint.pprint(imap0bj.list_folders())
#Selecting my Inbox
imap0bj.select_folder('INBOX', readonly = True)

#Getting UIDs from Inbox
UIDs = imap0bj.search(['SUBJECT', 'Contact FB Applicant', 'ON', '16-Oct-2020'])
print(UIDs)


rawMessages = imap0bj.fetch(UIDs, ['BODY[]'])
message = pyzmail.PyzMessage.factory(rawMessages[9999][b'BODY[]'])

message.text_part != None
#Body of the email returned as a string
msg = message.text_part.get_payload().decode(message.text_part.charset)

print(msg)

imap0bj.logout()
</code></pre>
<p>This code outputs a string similar to this</p>
<pre><code>   ---------- Forwarded message ---------
    From: Someone &lt;Mail@mail.biz&gt;
    Date: Wed, Oct 14, 2020 at 1:23 PM
    Subject: Fwd:  Contact FB Applicant
    To: &lt;mail@mail.com&gt;
    
    
    
    
   ---------- Forwarded message ---------
    From: Someone &lt;Mail@mail.biz&gt;
    Date: Wed, Oct 14, 2020 at 1:23 PM
    Subject: Fwd:  Contact FB Applicant
    To: &lt;mail@mail.com&gt;
    
    
    The following applicant filled out the form via Facebook.  Contact
    immediately.
    
    Some Guy
    999999999999
    mail@mail.com
</code></pre>
<p>But I don't want the &quot;Forwarded message&quot; parts. I just want it from &quot;The following applicant...&quot; and onwards which is the info I care about. How do I get rid of the other stuff? I'd really appreciate the help. Thank you!</p>",python|email|imapclient,"<p>Judging from this format, you need to read line by line.
If you encounter a line that starts with '---', like line[:3]='---'
You ignore it and the lines after it until you read an empty line,
If it starts with '---' again, repeat the process
Then the first non-empty line should be &quot;The following applicant...&quot;</p>
<p>You can burry this code in an infinite loop and break, here is pseudo-code</p>
<pre><code>while True:
  line = read next line
  if length(line) ==0: continue
  if line[:3] = '---'
    while true:
      line = read next line
      if line:
        break
      else:
        continue
  else:
    break
read lines and print everthing from here
</code></pre>
<p>On the assumption that read line function records how many lines it has read and which line is about to get read.</p>",0
819,64542340,Django query content_type by name not content_type_id,"<p>I need to count some relations from my Flags model to my Post Model. Now I don't understand how to query for the Post model name at my query, I understand how to query for the content_type_id but not for the content_type (as a string). I got something like this on my mind:</p>
<pre><code>Q(models.Q(('app_label', 'App'), ('model', 'Post')) 
</code></pre>
<p>but I don't know how the Syntax has to look like at that point, can smb. help?</p>
<p>example:</p>
<pre><code>def post_list_most_bad_flags(request):
    p_counter_query = Flags.objects.filter(content_type_id=12) # --&gt; Want to replace this with content_type instead if content_type_id
    counter = p_counter_query.count()
    print(counter)
</code></pre>
<p>Thanks in advance</p>",python|sql|django,"<p>Given <code>Flags</code> has a <code>ForeignKey</code> (or <code>OneToOneField</code> to the <code>ContentType</code> model, you can filter with:</p>
<pre><code>def post_list_most_bad_flags(request):
    p_counter_query = Flags.objects.filter(
        <b>content_type__app_label='App',
        content_type__model='Post'</b>
    )
    counter = p_counter_query.count()
    print(counter)</code></pre>",1
820,64492158,VS Code keyboard shortcut to only run selected line in .ipynb code cell,"<p>I'm using the python extension for VS Code and I want to be able to just run the single line of the .ipynb code cell where the cursor is, not the whole code cell.  Is this possible?</p>",python|jupyter|vscode-settings,"<p>There is a blog by Microsoft on how to interact with Jupyter notebooks in VSCode.
Can you refer this article: <a href=""https://code.visualstudio.com/docs/python/jupyter-support"" rel=""nofollow noreferrer"">https://code.visualstudio.com/docs/python/jupyter-support</a></p>",0
821,64578608,Error while training logistic regression on FashionMNIST with Adam optimizer,"<p>Dataset is FashionMNIST (784 input, 10 output). I'm trying to train logistic regression with Adam optimizer (coded it also):</p>
<pre><code>weights = torch.randn(784, 10) / math.sqrt(784)
weights.requires_grad_()

bias = torch.zeros(10, requires_grad=True)

optimizer = Adam([weights, bias])
criterion = nn.CrossEntropyLoss()
</code></pre>
<p>The train function is:</p>
<pre><code>def train_logistic_regression(weights, bias, batch, loss, optimizer):

    inputs, labels = batch

    inputs = inputs.view(inputs.shape[0], -1)

    optimizer.zero_grad()
    y_pred = torch.sigmoid(weights@inputs + bias) # there must be the problem
    loss = criterion(y_pred, labels)
    loss.backward()
    optimizer.step()


from IPython.display import clear_output


for epoch in range(1, 5):

    for batch in train_dataloader: # have to go with batches
      metrics = train_logistic_regression(weights, bias, batch, criterion, optimizer)
</code></pre>
<p>Every time I get the error:</p>
<pre><code>RuntimeError                              Traceback (most recent call last)
&lt;ipython-input-161-408b80d71db1&gt; in &lt;module&gt;()
      5 
      6     for batch in train_dataloader:
----&gt; 7       metrics = train_logistic_regression(weights, bias, batch, criterion, optimizer)
      8 
      9 

&lt;ipython-input-160-9c2f95ee56ee&gt; in train_logistic_regression(weights, bias, batch, loss, optimizer)
      6 
      7     optimizer.zero_grad()
----&gt; 8     y_pred = torch.sigmoid(weights@inputs + bias)
      9     # y_pred = model(inputs)
     10     loss = criterion(y_pred, labels)

RuntimeError: size mismatch, m1: [784 x 10], m2: [128 x 784] at /pytorch/aten/src/TH/generic/THTensorMath.cpp:41
</code></pre>
<p>Would be very grateful if anyone could help me.</p>",python|pytorch|logistic-regression|adam,<p>Instead of <code>y_pred = torch.sigmoid(weights@inputs + bias)</code> should be <code>y_pred = torch.sigmoid(inputs.mm(weights) + bias)</code></p>,0
822,64522349,youtube_dl error: Failed to parse JSON (caused by JSONDecodeError('Expecting value: line 1 column 1 (char 0)')) disocrd error,"<p>Error:</p>
<p>youtube_dl.utils.DownloadError: ERROR: query &quot;song&quot;: Failed to parse JSON (caused by JSONDecodeError('Expecting value: line 1 column 1 (char 0)')</p>
<p>Play command:</p>
<pre class=""lang-py prettyprint-override""><code>    @commands.command(name='play',aliases=['p'] )
    async def _play(self, ctx: commands.Context, *, search: str):
        async with ctx.typing():
            try:
                source = await YTDLSource.create_source(ctx, search, loop=self.bot.loop)
            except YTDLError as e:
                await ctx.send('Error: {}'.format(str(e)))
            else:
                song = Song(source)

                await ctx.voice_state.songs.put(song)
</code></pre>
<p>Youtube-DL Class:</p>
<pre class=""lang-py prettyprint-override""><code>class YTDLSource(discord.PCMVolumeTransformer):
    YTDL_OPTIONS = {
        'format': 'bestaudio/best',
        'extractaudio': True,
        'audioformat': 'mp3',
        'outtmpl': '%(extractor)s-%(id)s-%(title)s.%(ext)s',
        'restrictfilenames': True,
        'noplaylist': True,
        'nocheckcertificate': True,
        'ignoreerrors': False,
        'logtostderr': False,
        'quiet': True,
        'no_warnings': True,
        'default_search': 'auto',
        'source_address': '0.0.0.0',
    }

    FFMPEG_OPTIONS = {
        'before_options': '-reconnect 1 -reconnect_streamed 1 -reconnect_delay_max 5',
        'options': '-vn',
    }

    ytdl = youtube_dl.YoutubeDL(YTDL_OPTIONS)
</code></pre>
<p>Please guide me how to fix this error This error started for me last week and my youtube_dl is also updated</p>
<p>If you need another code, tell me, but please fix my problem</p>
<p>I also do not know how to get error message including stack trace</p>",python|discord|discord.py|youtube-dl|ytdl,"<p>You have this error because <a href=""https://github.com/ytdl-org/youtube-dl"" rel=""nofollow noreferrer""><code>youtube-dl</code></a> was taken down, which means that it's not accessible to public anymore.<br></p>
<p>Instead of directly using <code>youtube-dl</code>, you can use libraries like <a href=""https://pypi.org/project/pafy/"" rel=""nofollow noreferrer""><code>pafy</code></a> that uses the command-line version of <code>youtube-dl</code>:</p>
<pre class=""lang-py prettyprint-override""><code>from pafy import new

@client.command(pass_context=True)
async def play(ctx):
    ffmpeg_opts = {'before_options': '-reconnect 1 -reconnect_streamed 1 -reconnect_delay_max 5', 'options': '-vn'}
    channel = ctx.author.voice.channel
    voice = await channel.connect()

    video = new(&quot;youtube video link&quot;)
    audio = video.getbestaudio().url
    voice.play(FFmpegPCMAudio(audio, **ffmpeg_opts))
    voice.is_playing()
</code></pre>
<p><code>pafy</code> doesn't include youtube search so you'll have to do your own. For this you have multiple choices:</p>
<ul>
<li>Doing some webscraping using <a href=""https://www.crummy.com/software/BeautifulSoup/bs4/doc/"" rel=""nofollow noreferrer""><code>bs4</code></a></li>
<li>Using libraries like <a href=""https://pypi.org/project/fast-youtube-search/"" rel=""nofollow noreferrer""><code>fast-youtube-search</code></a></li>
<li>Use <a href=""https://docs.aiohttp.org/en/stable/"" rel=""nofollow noreferrer""><code>aiohttp</code></a> (which is the async version of <code>requests</code>) and <a href=""https://docs.python.org/3/library/re.html"" rel=""nofollow noreferrer""><code>re</code></a> to find the video id. This last option is probably the fastest one.</li>
</ul>
<p>If you want an easier solution, you can use <a href=""https://python-pytube.readthedocs.io/en/latest/"" rel=""nofollow noreferrer""><code>pytube</code></a> but it's slower and supports up to python 3.7.</p>",0
823,64450725,How to create multiple flow files from one incoming flow files in nifi using ExecuteScript with python,"<p>Running locally, this works exactly how I want it to (has one incoming flow file with many different codes in position 7-10 and outputs 1 file per unique code)  For example if record 1-5 has 1234 in positions 7-10, and record 6 has 2345 in position 7-10, and record 7 has 1234 in positions 7-10, then there would be one file called 1234_file.txt with rows 1-5 and 7 and a second file 2345_file.txt would have row 6 from the input file:</p>
<pre><code>f = open(&quot;test_comp.txt&quot;, &quot;r&quot;)
for x in f:
    comp = x[6:10]
    print(comp)
    n = open(comp+&quot;_file.txt&quot;,&quot;a&quot;)
    n.write(x)
    n.close()
f.close()
</code></pre>
<p>In nifi, I am trying this:</p>
<pre><code>from org.apache.commons.io import IOUtils
from java.nio.charset import StandardCharsets
from org.apache.nifi.processor.io import StreamCallback

class PyStreamCallback(StreamCallback):
  def __init__(self):
        pass
  def process(self, inputStream, outputStream):
    f = open(inputStream, 'r')
    for x in f:
        comp = x[6:10]
        print(&quot;comp: &quot;,comp)
        newFile = open(comp+&quot;_file.txt&quot;,&quot;a&quot;)
        newFile.write(x)


flowFile = session.get()
if (flowFile != None):
    flowFile = session.write(flowFile, PyStreamCallback())
    session.transfer(flowFile, REL_SUCCESS)
session.commit()
</code></pre>
<p>It seems to be getting the input and correctly storing comp as position 7-10 as expected, but I'm not getting multiple flow files out (for each unique string in x[6:10].  And the flow file coming out is 1 zero byte file.</p>
<p>Any thoughts on what I'm missing??</p>",python|apache-nifi|execute-script|flowfile,"<p>You are writing directly to files on your file system rather than <em>flowfiles</em> which are objects within the NiFi ecosystem. I'd suggest reading the <a href=""https://nifi.apache.org/docs/nifi-docs/html/developer-guide.html#split-content-one-to-many"" rel=""nofollow noreferrer"">Apache NiFi Developer's Guide</a> for context around those patterns and looking at some <a href=""https://funnifi.blogspot.com/2016/03/executescript-json-to-json-revisited_14.html"" rel=""nofollow noreferrer"">Python ExecuteScript examples</a> to see the relevant Python code.</p>
<p>Rather than write a single flowfile out, you'll need to create multiple flowfile objects, map the data to them, and then transfer <em>all</em> of them to the respective relationship.</p>
<p>Is there a reason you need to use custom Python code to do this rather than the <a href=""https://nifi.apache.org/docs/nifi-docs/components/org.apache.nifi/nifi-standard-nar/1.12.1/org.apache.nifi.processors.standard.SplitRecord/index.html"" rel=""nofollow noreferrer""><code>SplitRecord</code></a> and/or <a href=""https://nifi.apache.org/docs/nifi-docs/components/org.apache.nifi/nifi-standard-nar/1.12.1/org.apache.nifi.processors.standard.PartitionRecord/index.html"" rel=""nofollow noreferrer""><code>PartitionRecord</code></a> processors? I think <code>PartitionRecord</code> would solve the problem you've described very easily.</p>",2
824,64360110,How to click on link with Python and Selenium successfully?,"<p>I am looping through rows which each have a link and an index value that I assign to it. In addition to selenium, I am also using Beautiful Soup API to check page html.</p>
<p>The main issue is that once I have found the link index that I want to use, I execute <code>links[index].click()</code> and it will only work occasionally.</p>
<p><code>Error</code>: <code>list index out of range</code></p>
<p>When I double checked, I see that my index is still in range of the list but is still not working</p>
<pre class=""lang-py prettyprint-override""><code> # Each link is confirmed to work, but only works every other time the script is run
 page_html = BeautifulSoup(driver.page_source, 'html.parser')
 links = [link1, link2]
 rows = page_html.find_all('tr',recursive=False)
 index = 0
 found = False
 for row in rows:
        col = row.select('td:nth-of-type(5)')
        for string in col[0].strings:
            # If column has a &quot;Yes&quot; string, let's use the index of this row
            if (string == 'Yes'):
                found = True
                break
        # Break from loop if we already have the row that we want
        if found:
            break
        # If not found, continue adding to index value
        index += 1

# This is the part of the code that does not work consistently
links[index].click()
</code></pre>
<p>To debug this I attempted the following:</p>
<pre class=""lang-py prettyprint-override""><code>
 def custom_wait(num=3):
    driver.implicitly_wait(num)
    time.sleep(num)
 attempts = 0
 while attempts &lt; 10: 
     custom_wait()
     try:
        links[index].click()
     except:
        PrintException()
        attempts += 1
     else:
        logger.debug(&quot;Link Successfully clicked&quot;)
        break
</code></pre>
<p>When I run this code, it says that the link is successfully clicked but again it mentions that the index is out of range.</p>",python|selenium|selenium-webdriver|beautifulsoup|selenium-chromedriver,"<p>If the page contains more than 2 rows, it's not necessarily a surprise it throws an exception :O</p>
<p>The <code>links</code> list contains 2 values (<code>index-0</code>, <code>index-1</code>). If the third <code>row</code>'s <code>col</code> does not contain the string 'Yes' you don't <code>break</code> from the <code>for</code> loop and increment the <code>index</code> variable.</p>
<p>So at the third <code>row</code> the <code>index</code> = 2 and the <code>links</code> list does not have anything at <code>index-2</code>, hence you get the IndexError</p>
<p>Why don't you loop over the links instead?</p>
<pre><code>found = False
for link in links:
    link.click()
    rows = page_html.find_all('tr',recursive=False)
    for row in rows:
        col = row.select('td:nth-of-type(5)')
        for string in col[0].strings:
            if (string == 'Yes'):
                found = True
                break
        if found:
            break
    if found:
        break
</code></pre>",0
825,64388314,Mac subprocess run with full path doesn't work,"<p>when I run the followin command in terminal it works, and starts application.</p>
<pre><code>/Users/Someone/Documents/SomeApp\ v2.app/Contents/MacOS/SomeApp
</code></pre>
<p>But when I do the following in python, then run it:</p>
<pre><code>import subprocess
subprocess.run(['/Users/Someone/Documents/SomeApp\ v2.app/Contents/MacOS/SomeApp'])
</code></pre>
<p>I get the following error msg.:</p>
<pre><code>File not found error: [Errno 2] No such file or directory:
'/Users/Someone/Documents/SomeApp\\ v2.app/Contents/MacOS/SomeApp'
</code></pre>",python|macos|subprocess,<p>It didn't need the <code>'\'</code> in the string.</p>,1
826,64500539,"Why we use ""gca"" while we are ploting?","<pre><code>plt.pie(size,labels=columns)
p=plt.gcf()
p.gca().add_artist(my_graph)
plt.show()
</code></pre>
<p>I don't understand this code. Can anyone explain me ?</p>",python|matplotlib|pie-chart,"<p>matplotlib.pyplot.gcf()[source]
Get the current figure.</p>
<p>If no current figure exists, a new one is created using figure().
<a href=""https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.gcf.html"" rel=""nofollow noreferrer"">click here</a></p>",0
827,64427583,Python3 process not closing on sys.exit(),"<p>So i am working on a project, now in python2 the following code works fine. But i want to upgrade to python3 as python2 is no longer supported.
So in the pin_event_down function a process, backup is started. The backup process and function are starting some data logging thread, and then it should be closed/ killed. In python2 the sys.exit() works fine and when reading the python documentation they say that you should use the system.exit() does anyone have a clue why the process is never ended? Also every time the specific pin goes down it creates the process again using the same RAM memory again, thus filling the ram with doubles of 1 process.</p>
<pre><code>    def pin_event_down(self):
    &quot;&quot;&quot;
    This function is used to create a product pin event.
    @return: None.
    &quot;&quot;&quot;
        #do some stuff
        Process(target=self.backUp).start()
        #do some stuff

    def backUp(self):
    &quot;&quot;&quot;
    This function is used to create a backup feedback log.
    @return: None.
    &quot;&quot;&quot;
        if product is not None:
            self.logger.__init__()
            self.logger.start()
            #do some stuff
        sys.exit()
</code></pre>
<p><a href=""https://i.stack.imgur.com/McCxs.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/McCxs.png"" alt=""Picture of the processes running"" /></a></p>",python|multithreading|memory|process|sys,"<p>I think it's because you're calling sys.exit() from a Process. That only terminates the current process, not the parent one. A very messy approach would be to use <code>os._exit(1)</code> from within the Process, but this is dangerous so I do not recommend it.</p>
<p>This thread may be of some help to you:
<a href=""https://stackoverflow.com/questions/1489669/how-to-exit-the-entire-application-from-a-python-thread"">How to exit the entire application from a Python thread?</a></p>",0
828,68821608,Simple I am sure: Printing 2 columns with header and results -- new to python,"<p>I am new to python and did not see this exact questions or answers that will work.  I am using Python 3.7 and simply need to display the character codes for uppercase alphabet letters (A-Z).  I have that part, but it also requires the output be printed so each letter and character code appear on a separate line divided into two columns with a label.</p>
<p>My code works great but prints horizontally (which I prefer, but the instructions are to print vertically with a header).</p>
<pre><code>def uppercaseAlphabets():
    # uppercase
    for c in range(65, 91):
        print(chr(c), end=&quot; &quot;);

    print(&quot;&quot;);


# Function to print the alphabet upper case codes
def uppercaseCodes():
    for c in range(65, 91):
        print((c), end=&quot; &quot;);
    print(&quot;&quot;);


print(&quot;Uppercase Alphabets&quot;);
uppercaseAlphabets();

print(&quot;Uppercase Codes &quot;);
uppercaseCodes();
</code></pre>
<p>The result is:</p>
<pre><code>Uppercase Alphabet
A B C D E F G H I J K L M N O P Q R S T U V W X Y Z 
Uppercase Codes 
65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 
</code></pre>
<p>I want it to look like this:</p>
<pre><code>Uppercase Alphabet     Uppercase Codes
         A                    65
         B                    66
         C                    67
</code></pre>
<p>and so on.  Any tweeks to my code are appreaciated.
Thanks</p>",python-3.x|printing|vertical-alignment|chr,"<p>Use formatted print output:</p>
<pre><code>print(f&quot;{'Uppercase Alphabet':^20}{'Uppercase Codes':^20}&quot;)

# try to avoid magic numbers, in 20 days it will be unclear why range(65, 91) is used
# you can get the code from the letter to make it clearer to understand after years
# you need ord(&quot;Z&quot;)+1 as range does not provide the upper limit
for code in range(ord(&quot;A&quot;), ord(&quot;Z&quot;)+1):
    print(f&quot;{chr(code):^20}{code:^20}&quot;)
</code></pre>
<p>Output:</p>
<pre><code>Uppercase Alphabet   Uppercase Codes
         A                   65         
         B                   66         
         C                   67         
         D                   68         
         E                   69         
         F                   70         
         G                   71         
         H                   72         
         I                   73         
         J                   74         
         K                   75         
         L                   76         
         M                   77         
         N                   78         
         O                   79         
         P                   80         
         Q                   81         
         R                   82         
         S                   83         
         T                   84         
         U                   85         
         V                   86         
         W                   87         
         X                   88         
         Y                   89         
         Z                   90 
</code></pre>
<p>Documentation:</p>
<ul>
<li><a href=""https://docs.python.org/3/reference/lexical_analysis.html#f-strings"" rel=""nofollow noreferrer"">formatted string literals (&quot;f-strings&quot;)</a>
and  <a href=""https://docs.python.org/3/library/string.html#format-string-syntax"" rel=""nofollow noreferrer"">format string syntax</a></li>
<li><a href=""https://docs.python.org/3/library/string.html#format-specification-mini-language"" rel=""nofollow noreferrer"">format mini language (<code>:^20</code> == center in 20 spaces )</a></li>
</ul>",0
829,68906496,How to list two items from two different python lists as one item on a new list?,"<p>Could someone help me with the below? thank you in advance</p>
<pre><code>list1 = ['123', '456', '789']
list2 = ['some text', 'some more text', 'additional string']

for x,y in zip(list1,list2):
    listFinal = [x+' ' + y for x in list1 for y in list2]
</code></pre>
<p>Currentresult:</p>
<pre><code>['123 some text', '123 some more text', '123 additional string', '456 some text', '456 some more text', '456 additional string', '789 some text', '789 some more text', '789 additional string']
</code></pre>
<p>expectedResult:</p>
<pre><code>['123 some text', '456 some more text', '789 additional string']
</code></pre>",python|python-3.x|list,"<p>Using some functional utils:</p>
<pre><code>listFinal = [*map(' '.join, zip(list1, list2))]
</code></pre>
<p>Docs on:</p>
<ul>
<li><a href=""https://docs.python.org/3/library/functions.html#map"" rel=""nofollow noreferrer""><code>map</code></a></li>
<li><a href=""https://docs.python.org/3/library/functions.html#zip"" rel=""nofollow noreferrer""><code>zip</code></a></li>
<li><a href=""https://docs.python.org/3/library/stdtypes.html#str.join"" rel=""nofollow noreferrer""><code>str.join</code></a></li>
</ul>",2
830,68906496,How to list two items from two different python lists as one item on a new list?,"<p>Could someone help me with the below? thank you in advance</p>
<pre><code>list1 = ['123', '456', '789']
list2 = ['some text', 'some more text', 'additional string']

for x,y in zip(list1,list2):
    listFinal = [x+' ' + y for x in list1 for y in list2]
</code></pre>
<p>Currentresult:</p>
<pre><code>['123 some text', '123 some more text', '123 additional string', '456 some text', '456 some more text', '456 additional string', '789 some text', '789 some more text', '789 additional string']
</code></pre>
<p>expectedResult:</p>
<pre><code>['123 some text', '456 some more text', '789 additional string']
</code></pre>",python|python-3.x|list,"<p>you could just do:</p>
<pre><code>for i in range(0, len(list1) ):
    list1[i] += &quot; &quot; + list2[i]
</code></pre>",1
831,68906496,How to list two items from two different python lists as one item on a new list?,"<p>Could someone help me with the below? thank you in advance</p>
<pre><code>list1 = ['123', '456', '789']
list2 = ['some text', 'some more text', 'additional string']

for x,y in zip(list1,list2):
    listFinal = [x+' ' + y for x in list1 for y in list2]
</code></pre>
<p>Currentresult:</p>
<pre><code>['123 some text', '123 some more text', '123 additional string', '456 some text', '456 some more text', '456 additional string', '789 some text', '789 some more text', '789 additional string']
</code></pre>
<p>expectedResult:</p>
<pre><code>['123 some text', '456 some more text', '789 additional string']
</code></pre>",python|python-3.x|list,"<p><code>listFinal = [x+' ' + y for x in list1 for y in list2]</code></p>
<p>This makes the <code>zip()</code> function useless. You are iterating over the first list, then through the second list. This makes 3 copies of the element.</p>
<p>You can view it as follows:</p>
<pre><code>for x in list1:
    for y in list2:
        print(x+&quot; &quot;+y)
</code></pre>
<p>This is what the code is currently doing. Your <code>zip()</code> method was right.</p>
<p>You can do this instead.</p>
<pre><code>list1 = ['123', '456', '789']
list2 = ['some text', 'some more text', 'additional string']
list3=[x + ' ' + y for x, y in zip(list1, list2)]
</code></pre>",2
832,68785242,how to show two different animation on same screen in pygame,"<p>I am having a problem that when i run this program the only animation that is shown on the screen is of enemy and not the player and when I fire a bullet(uses for loop) then only the player and the bullet is shown. I am unable to put both on the screen. I tried putting <code>player.draw()</code> and <code>enemy.ENEMY()</code> directly in main while loop but that results were same.</p>
<pre><code>import pygame 

pygame.init()
clock=pygame.time.Clock()

class player:
    def __init__(self):
        self.x,self.y=0,228
        self.vel=4
        self.xb=self.x+64
        self.velb=20
        self.isshot=False
        self.left=False
        self.right=False
        self.walkcount=0
        self.direction='R'

    def draw(self):
        win.blit(bg,(0,0))
        
        if self.walkcount+1&gt;=27:
            self.walkcount=0
        if self.left:
            win.blit(walkleft[self.walkcount//3],(self.x,self.y))
            self.walkcount+=1
        elif self.right:
            win.blit(walkright[self.walkcount//3],(self.x,self.y))
            self.walkcount+=1
        elif self.direction=='L':
            win.blit(pygame.image.load('L1.png'),(self.x,self.y))
        else:
            win.blit(pygame.image.load('R1.png'),(self.x,self.y))
        pygame.display.update()
        
            
        
class enemy():
    def __init__(self):
        self.x=400
        self.y=228
        self.walkcount=3
        self.vel=10
        self.walkright = [pygame.image.load('R1E.png'), pygame.image.load('R2E.png'), pygame.image.load('R3E.png'), pygame.image.load('R4E.png'), pygame.image.load('R5E.png'), pygame.image.load('R6E.png'), pygame.image.load('R7E.png'), pygame.image.load('R8E.png'), pygame.image.load('R9E.png')]
        self.walkleft = [pygame.image.load('L1E.png'), pygame.image.load('L2E.png'), pygame.image.load('L3E.png'), pygame.image.load('L4E.png'), pygame.image.load('L5E.png'), pygame.image.load('L6E.png'), pygame.image.load('L7E.png'), pygame.image.load('L8E.png'), pygame.image.load('L9E.png')]
        
    def ENEMY(self):
        self.move()
        win.blit(bg,(0,0))
        
        if self.walkcount+1&gt;=27:
            self.walkcount=0
        if self.vel&lt;0:
            win.blit(self.walkleft[self.walkcount//3],(self.x,self.y))
            self.walkcount+=1
        elif self.vel&gt;0:
            win.blit(self.walkright[self.walkcount//3],(self.x,self.y))
            self.walkcount+=1
        
        pygame.display.update()
        clock.tick(30)
        
    def move(self):
        self.x+=self.vel
        if self.x&gt;500 or self.x&lt;300:
            self.vel*=-1
            
        
win=pygame.display.set_mode((626,313))
pygame.display.set_caption('game')





walkright = [pygame.image.load('R1.png'), pygame.image.load('R2.png'), pygame.image.load('R3.png'), pygame.image.load('R4.png'), pygame.image.load('R5.png'), pygame.image.load('R6.png'), pygame.image.load('R7.png'), pygame.image.load('R8.png'), pygame.image.load('R9.png')]
walkleft = [pygame.image.load('L1.png'), pygame.image.load('L2.png'), pygame.image.load('L3.png'), pygame.image.load('L4.png'), pygame.image.load('L5.png'), pygame.image.load('L6.png'), pygame.image.load('L7.png'), pygame.image.load('L8.png'), pygame.image.load('L9.png')]
bg = pygame.image.load('bg.jpg')
char = pygame.image.load('standing.png')

player=player()
enemy=enemy()
def characters():
    win.blit(bg,(0,0))
    player.draw()
    enemy.ENEMY()
    pygame.display.update()

true=True
while true:
    clock.tick(27)
    for event in pygame.event.get():
        if event.type==pygame.QUIT:
            true=False 

    key=pygame.key.get_pressed()
        
    if key[pygame.K_LEFT]and player.x&gt;0:
        player.x-=player.vel
        player.xb=player.x
        player.left=True
        player.right=False
        player.direction='L'
    elif key[pygame.K_RIGHT]and player.x&lt;582:
        player.x+=player.vel
        player.xb=player.x
        player.left=False
        player.right=True
        player.direction='R'
    else:
        player.left=False
        player.right=False
        player.walkcount=0

    if key[pygame.K_SPACE]:
        for i in range(626):
            win.blit(bg,(0,0))

            if player.direction=='L':
                win.blit(walkleft[0],(player.x,player.y))
                pygame.draw.rect(win,('black'),(player.xb,player.y+32,5,7))
                pygame.display.update()
                player.xb-=player.velb
            elif player.direction=='R':
                win.blit(walkright[0],(player.x,player.y))
                pygame.draw.rect(win,('black'),(player.xb+44,player.y+32,5,7))
                pygame.display.update()
                player.xb+=player.velb
            clock.tick(27)
            if player.xb&gt;600 or player.xb&lt;0:
                break
            
        player.xb=player.x+10
    characters()

pygame.quit()
</code></pre>",python|pygame|python-module|pygame-surface,"<p>It's because you are blitting the window background in both <code>enemy.ENEMY()</code> and <code>player.draw()</code>. This clears the window, or covers the other image up. It seems you should remove those, because <code>characters()</code> is also blitting the background.</p>",0
833,68573937,Reindexing error when appending dataframes,"<p>I am trying to append two data frames.</p>
<p>The dataframes have duplicate columns which should be merged into one with new values added as extra rows.</p>
<pre><code>[a b c
 1 2 3
 4 5 6]

[b c d e
 3 4 5 5
 6 7 8 7]
</code></pre>
<p>Should be merged as</p>
<pre><code>[a b c d e
 1 2 3
 4 5 6
   3 4 5 5
   6 7 8 7]
</code></pre>
<p>I'm tryign to use append for this as followed:</p>
<pre><code>df1.append(df2, ignore_index=True)
</code></pre>
<p>which leads to the error that <code>Reindexing is only valid with uniquely valued index objects</code>.
I don't understand what is going wrong, I don't care about the index at all. I tried to use <code>reset_index()</code> before merging as well as other functions like concat, merge and join but no success.</p>
<p>How can I solve this issue?</p>
<p>code:</p>
<pre><code>from numpy.core.fromnumeric import _wrapreduction
from numpy.lib.function_base import append
import pandas as pd
import os
import json

def map_prefix(prefix):
    map = {
        'ALPHAOMEGA' : 'ALPHAOMEGA',
        'BIOMARCS' : 'BIOMARCS',
        'DZS_WF': 'DZS_WF/HOORN',
        'RAAK': 'RAAK',
        'ROTTERDAMSTUDIE': 'RS',
        'STEMI-GIPS-III': 'STEMI-GIPS-III',
        'CHECK': 'CHECK',
        'ERF-ERGO': 'ERF',
        'TOMAAT': 'TOMAAT',
        'TACTICS': 'TACTICS',
        'FUNCTGENOMICS': 'FUNCTGENOMICS',
        'VUNTR': 'VUNTR',
        'NESDA': 'NESDA',
        'DMS': 'DMS',
        'CODAM': 'CODAM',
        'UCORBIO': 'UCORBIO',
        'LIFELINES': 'LIFELINES',
        'PROSPER': 'PROSPER',
        'LUMINA': 'CHARMLUMINA',
        'GARP': 'GARP',
        'VUMC_ADC': 'VUMC_ADC',
        'HELIUS': 'HELIUS'
        }
    return map[prefix]

def main():
    directory = '.'
    workdirectory = ''
    measurements = pd.read_csv(open(os.path.join(directory, &quot;measurements.csv&quot;)))
    measure_columns = [translate_headers(col) for col in list(measurements.columns)]
    map_measures = dict(zip(measure_columns, list(measurements.columns)))
    measurements = measurements.rename(columns=map_measures)
    #print(measurements)
    for filename in os.listdir(directory):
        if not os.path.isdir(filename):
            print(filename, 'not directory, skip')
            continue
        f = os.path.join(directory, filename)
        # checking if it is a file
        #print(f)
        if not os.path.isfile(f):
            if 'rawdata' in os.listdir(f):
                workdirectory = os.path.join(f, 'rawdata')
                files = os.listdir(workdirectory)
                #print('rawdata', files)
            else:
                workdirectory = f
                files = os.listdir(f)
        files = removedupes(files)
        #print(files)

        for f in files:
            print(f)
            prefix = workdirectory.split('Wave')[1]
            wave = prefix[0]
            prefix = prefix[2::].split('/')[0]
            sep = ''
            #print(prefix, wave, workdirectory, f)
            if f[-4:] == '.tsv':
                sep = '\t'
            elif f[-4:] == '.csv':
                sep = ','
            else:
                #print('passing ', f[-4:])
                continue

            with open(os.path.join(workdirectory, f)) as file:
                with open('log.txt', 'a') as log:
                    log.write('\t'.join([workdirectory, f, 'wave_'+ prefix+'\n']))
                lines = file.readlines()
                if &quot;\t&quot; in lines[0]:
                    sep = '\t'
                elif &quot;,&quot; in lines[0]:
                    sep = ','
                elif &quot;;&quot; in lines[0]:
                    sep = ';'
                head = lines[0].strip(&quot;\n&quot;).split(sep)
                #print(head)
                head = [translate_headers(head2.replace('&quot;', '').lower()) for head2 in head]
                #print(head)
                newlines = []
                for line in lines[1::]:
                    line = line.strip(&quot;\n&quot;).split(sep)
                    newlines.append(line)
                df = pd.DataFrame(columns=head, data=newlines)
                try:
                    df[&quot;sample_id&quot;] = map_prefix(prefix) + &quot;-&quot; + df['sample_id'] + &quot;-w&quot; + wave
                    for i, col in enumerate(df.columns):
                        df.iloc[:, i] = df.iloc[:, i].str.replace('&quot;', '')
                    df.columns = [column.replace('&quot;', '') for column in df.columns]
                except KeyError:
                    print(&quot;Oh NO!&quot;)

            #print(df.head())
            #print(measurements.head())
            measurements = measurements.reset_index(drop=True)
            df = df.reset_index(drop=True)
            #print(list(df.index), list(measurements.index)[0:30])
            print(measurements.shape, df.shape)
            measurements = pd.concat([measurements, df], ignore_index=True)
            #measurements = measurements.append(df, ignore_index=True)
            #measurements = measurements.merge(df, how='outer', on='sample_id')
            # try:
            #     #print(measurements.shape, df.shape)
                
            #     #print(measurements.info())
            # except Exception as e:
            #     print('fail')

    measurements.to_csv('/home/julian/Documents/NightingaleQuantificationLibary2020/measurements_added.csv', sep=',')      

def removedupes(files):
    filemap = {}
    for file in files:
        filemap[file[:-4]]=file[-4:]
    return [k+v for k,v in filemap.items()]

def translate_headers(head):
    with open('metabolics_map_v1.json', 'r') as j:
        map = json.loads(j.read())
        for k, v in map.items():
            if head in v:
                return k
    return head
    

main()
</code></pre>",python|pandas,"<p>Why do you want to use <code>append</code> here? You can simply use <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.concat.html"" rel=""nofollow noreferrer""><code>pandas.concat</code></a> that is specialized for this task:</p>
<pre><code>df1 = pd.DataFrame({'a': [1,2], 'b': [2,5], 'c': [3,6]})
df2 = pd.DataFrame({'b': [3,6], 'c': [4,7], 'd': [5,8], 'e': [5,7]})
</code></pre>
<pre><code>&gt;&gt;&gt; pd.concat([df1,df2], ignore_index=True)
     a  b  c    d    e
0  1.0  2  3  NaN  NaN
1  2.0  5  6  NaN  NaN
2  NaN  3  4  5.0  5.0
3  NaN  6  7  8.0  7.0
</code></pre>",0
834,68573937,Reindexing error when appending dataframes,"<p>I am trying to append two data frames.</p>
<p>The dataframes have duplicate columns which should be merged into one with new values added as extra rows.</p>
<pre><code>[a b c
 1 2 3
 4 5 6]

[b c d e
 3 4 5 5
 6 7 8 7]
</code></pre>
<p>Should be merged as</p>
<pre><code>[a b c d e
 1 2 3
 4 5 6
   3 4 5 5
   6 7 8 7]
</code></pre>
<p>I'm tryign to use append for this as followed:</p>
<pre><code>df1.append(df2, ignore_index=True)
</code></pre>
<p>which leads to the error that <code>Reindexing is only valid with uniquely valued index objects</code>.
I don't understand what is going wrong, I don't care about the index at all. I tried to use <code>reset_index()</code> before merging as well as other functions like concat, merge and join but no success.</p>
<p>How can I solve this issue?</p>
<p>code:</p>
<pre><code>from numpy.core.fromnumeric import _wrapreduction
from numpy.lib.function_base import append
import pandas as pd
import os
import json

def map_prefix(prefix):
    map = {
        'ALPHAOMEGA' : 'ALPHAOMEGA',
        'BIOMARCS' : 'BIOMARCS',
        'DZS_WF': 'DZS_WF/HOORN',
        'RAAK': 'RAAK',
        'ROTTERDAMSTUDIE': 'RS',
        'STEMI-GIPS-III': 'STEMI-GIPS-III',
        'CHECK': 'CHECK',
        'ERF-ERGO': 'ERF',
        'TOMAAT': 'TOMAAT',
        'TACTICS': 'TACTICS',
        'FUNCTGENOMICS': 'FUNCTGENOMICS',
        'VUNTR': 'VUNTR',
        'NESDA': 'NESDA',
        'DMS': 'DMS',
        'CODAM': 'CODAM',
        'UCORBIO': 'UCORBIO',
        'LIFELINES': 'LIFELINES',
        'PROSPER': 'PROSPER',
        'LUMINA': 'CHARMLUMINA',
        'GARP': 'GARP',
        'VUMC_ADC': 'VUMC_ADC',
        'HELIUS': 'HELIUS'
        }
    return map[prefix]

def main():
    directory = '.'
    workdirectory = ''
    measurements = pd.read_csv(open(os.path.join(directory, &quot;measurements.csv&quot;)))
    measure_columns = [translate_headers(col) for col in list(measurements.columns)]
    map_measures = dict(zip(measure_columns, list(measurements.columns)))
    measurements = measurements.rename(columns=map_measures)
    #print(measurements)
    for filename in os.listdir(directory):
        if not os.path.isdir(filename):
            print(filename, 'not directory, skip')
            continue
        f = os.path.join(directory, filename)
        # checking if it is a file
        #print(f)
        if not os.path.isfile(f):
            if 'rawdata' in os.listdir(f):
                workdirectory = os.path.join(f, 'rawdata')
                files = os.listdir(workdirectory)
                #print('rawdata', files)
            else:
                workdirectory = f
                files = os.listdir(f)
        files = removedupes(files)
        #print(files)

        for f in files:
            print(f)
            prefix = workdirectory.split('Wave')[1]
            wave = prefix[0]
            prefix = prefix[2::].split('/')[0]
            sep = ''
            #print(prefix, wave, workdirectory, f)
            if f[-4:] == '.tsv':
                sep = '\t'
            elif f[-4:] == '.csv':
                sep = ','
            else:
                #print('passing ', f[-4:])
                continue

            with open(os.path.join(workdirectory, f)) as file:
                with open('log.txt', 'a') as log:
                    log.write('\t'.join([workdirectory, f, 'wave_'+ prefix+'\n']))
                lines = file.readlines()
                if &quot;\t&quot; in lines[0]:
                    sep = '\t'
                elif &quot;,&quot; in lines[0]:
                    sep = ','
                elif &quot;;&quot; in lines[0]:
                    sep = ';'
                head = lines[0].strip(&quot;\n&quot;).split(sep)
                #print(head)
                head = [translate_headers(head2.replace('&quot;', '').lower()) for head2 in head]
                #print(head)
                newlines = []
                for line in lines[1::]:
                    line = line.strip(&quot;\n&quot;).split(sep)
                    newlines.append(line)
                df = pd.DataFrame(columns=head, data=newlines)
                try:
                    df[&quot;sample_id&quot;] = map_prefix(prefix) + &quot;-&quot; + df['sample_id'] + &quot;-w&quot; + wave
                    for i, col in enumerate(df.columns):
                        df.iloc[:, i] = df.iloc[:, i].str.replace('&quot;', '')
                    df.columns = [column.replace('&quot;', '') for column in df.columns]
                except KeyError:
                    print(&quot;Oh NO!&quot;)

            #print(df.head())
            #print(measurements.head())
            measurements = measurements.reset_index(drop=True)
            df = df.reset_index(drop=True)
            #print(list(df.index), list(measurements.index)[0:30])
            print(measurements.shape, df.shape)
            measurements = pd.concat([measurements, df], ignore_index=True)
            #measurements = measurements.append(df, ignore_index=True)
            #measurements = measurements.merge(df, how='outer', on='sample_id')
            # try:
            #     #print(measurements.shape, df.shape)
                
            #     #print(measurements.info())
            # except Exception as e:
            #     print('fail')

    measurements.to_csv('/home/julian/Documents/NightingaleQuantificationLibary2020/measurements_added.csv', sep=',')      

def removedupes(files):
    filemap = {}
    for file in files:
        filemap[file[:-4]]=file[-4:]
    return [k+v for k,v in filemap.items()]

def translate_headers(head):
    with open('metabolics_map_v1.json', 'r') as j:
        map = json.loads(j.read())
        for k, v in map.items():
            if head in v:
                return k
    return head
    

main()
</code></pre>",python|pandas,"<p>There is problem with duplicated columns names like here <code>a, a</code> columns, solution for deduplicated is use <a href=""http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.GroupBy.cumcount.html"" rel=""nofollow noreferrer""><code>GroupBy.cumcount</code></a> with <a href=""http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.stack.html"" rel=""nofollow noreferrer""><code>DataFrame.stack</code></a> for all DataFrames with duplicates:</p>
<pre><code>#duplicated columns names - sample data
df1.columns = ['a','a','b']
print (df1)
   a  a  b
0  1  2  3
1  4  5  6

s1 = df1.columns.to_series()
df1.columns = [df1.columns, s1.groupby(s1).cumcount()]

#if no duplicated columns names, should omit
#s2 = df2.columns.to_series()
#df2.columns = [df2.columns, s2.groupby(s2).cumcount()]

df11 = df1.stack().reset_index(drop=True) 
print (df11)
   a    b
0  1  3.0
1  2  NaN
2  4  6.0
3  5  NaN

#df22 = df2.stack().reset_index(drop=True) 
#print (df22)
   b  c  d  e
0  3  4  5  5
1  6  7  8  7
</code></pre>
<hr />
<pre><code>df = df11.append(df22, ignore_index=True)
#if no duplicated columnsnames for df2
#df = df11.append(df2, ignore_index=True)
print (df)
     a    b    c    d    e
0  1.0  3.0  NaN  NaN  NaN
1  2.0  NaN  NaN  NaN  NaN
2  4.0  6.0  NaN  NaN  NaN
3  5.0  NaN  NaN  NaN  NaN
4  NaN  3.0  4.0  5.0  5.0
5  NaN  6.0  7.0  8.0  7.0
</code></pre>",1
835,68660462,How to fill 3D figure with voxels?,"<p>I'm attempting to fill a tetrahedron with voxels to generate 3D data. I have been able to generate the tetrahedron itself using 4 different points. I'm not exactly sure how I could use NumPy or any other Python framework for filling the region inside the tetrahedron with voxels. Here is the code for generating the tetrahedron 3D plot:</p>
<pre><code># Tetrahedron

from scipy.spatial import Delaunay
import matplotlib.pyplot as plt
import matplotlib.colors as mcolors
import numpy as np
points= np.array([[1,2,2],[1,3,4],[4,1,4],[5,3,2]])
tri = Delaunay(points)
tr = tri.simplices[0]  # indices of first tetrahedron
pts = points[tr, :]  # pts is a 4x3 array of the tetrahedron coordinates
fig = plt.figure()
ax = fig.gca(projection= '3d')

# plotting the six edges of the tetrahedron
for ij in [[0, 1], [0, 2], [0, 3], [1, 2], [1, 3], [2, 3]]:
    ax.plot3D(pts[ij, 0], pts[ij, 1], pts[ij, 2])
plt.show()
</code></pre>
<p><a href=""https://i.stack.imgur.com/vcLK1.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/vcLK1.png"" alt=""Tetrahedron Plot"" /></a></p>
<p>Here is an example image of what I am trying to achieve. This example features a sphere that has been filled with voxels:
<a href=""https://i.stack.imgur.com/d4XOC.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/d4XOC.png"" alt="""" /></a></p>",python|numpy|matplotlib|plot|3d,"<p>So you're looking for something like this?</p>
<p><a href=""https://i.stack.imgur.com/un6N6.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/un6N6.png"" alt=""Voxeled Simplex"" /></a></p>
<p>I have adopted this <a href=""https://matplotlib.org/stable/gallery/mplot3d/voxels_rgb.html"" rel=""nofollow noreferrer"">https://matplotlib.org/stable/gallery/mplot3d/voxels_rgb.html</a> to get your simplex.</p>
<pre><code>import itertools
import functools
import numpy as np
import matplotlib.pyplot as plt

plt.rcParams[&quot;figure.figsize&quot;] = (18,9)
points = np.array([[1,2,2],[1,3,4],[4,1,4],[5,3,2]])
center = np.mean(points, axis=0)

def surface_normal_form(a,b,c):
    v = b-a
    w = c-b
    n = np.cross(v,w)
    #normal needs to point out
    if (center-a)@n &gt; 0:
         n *= -1
    return a, n

def midpoints(x):
    sl = ()
    for i in range(x.ndim):
        x = (x[sl + np.index_exp[:-1]] + x[sl + np.index_exp[1:]]) / 2.0
        sl += np.index_exp[:]
    return x

x, y, z = (np.indices((60, 60, 60))-np.array([20,25,25]).reshape(-1,1,1,1))/8
mx = midpoints(x)
my = midpoints(y)
mz = midpoints(z)

conditions = []
for p1,p2,p3 in itertools.combinations(points, 3):
    a, n = surface_normal_form(p1,p2,p3)
    conditions.append((mx-a[0])*n[0]+(my-a[1])*n[1]+(mz-a[2])*n[2] &lt;= 0)

simplex = conditions[0] &amp; conditions[1] &amp; conditions[2] &amp; conditions[3]

ax = plt.figure().add_subplot(projection='3d')
ax.voxels(x, y, z, simplex, linewidth=0.5)
ax.set(xlabel='x', ylabel='y', zlabel='z')
ax.set_xlim(1.0,5.0)
ax.set_ylim(1.0,3.0)
ax.set_zlim(2.0,4.0)
</code></pre>
<h2>Can you explain what you're doing in the surface_normal_form function?</h2>
<p>Sure in 3d you can describe a plane by a point of the plane and vector that's orthogonal to the plane. That's particularly useful because it's then easy to tell if a point is on one side of the plane or the other. If you then take the planes containing the sides of the simplex you get get the simplex voxels by taking a cube of voxels tightly fit together and for each plane removing the ones on the wrong side of it. Thats what I am doing.</p>
<h2>Also, can you please explain the midpoints function as well?</h2>
<p>First a little disclaimer I haven't written that myself. As I said it's from the matplotlib example. But if you wanted to calculate midpoints of a 1d array you could do.</p>
<pre><code>(x[:-1]+x[1:])/2
</code></pre>
<p>Firstly <code>x[:-1]</code> gives you all the values but the last and <code>x[1:]</code> gives you all the values but the first so the values that are next to each other getting summed and divided by two i.e. you get the midpoints. Notice that it takes the &quot;midpoints&quot; of (in our case 2d) subarrays if the original array is more than 1d (in our case it's 3 dimensional). In step two what we're doing is <code>(x[:,:-1]+x[:,1:])/2</code>.
And since <code>[:]</code> gives you all the values the <code>midpoint</code> function does that for each dimension.</p>",1
836,68792357,Run exe in windows container using python,"<p>I am working on executing an exe file (notepad.exe) inside windows container using python.</p>
<p>I have copied these in my container:</p>
<p>exe file</p>
<p>dockerfile that calls python script</p>
<p>python script that runs exe</p>
<p>When I build and run these, Its not showing any error. This is the python code I am executing.</p>
<pre><code>import os
print(“working”)
os.startfile(“notepad.exe”)
print(“successful”)
</code></pre>
<p><a href=""https://i.stack.imgur.com/RVqzS.png"" rel=""nofollow noreferrer"">Build and Run</a></p>
<p>The print commands are successful. As notepad is not opening, I don't know whether it is executing or not. Actually, I want to execute an exe file and take the memory dump of Windows container.</p>
<p>Can you please tell me what to do for getting the memory dump in windows container? Also,how will I know that the exe is executing or not?</p>",python|docker|executable|windows-container,"<p>How to run</p>
<pre><code>import os
os.startfile(&quot;C:\Users\Documents and Settings\model\notepad.exe&quot;)
</code></pre>
<p>How to start</p>
<pre><code>import sys, string, os, arcgisscripting
os.system(&quot;C:\Users\Documents and Settings\model\notepad.exe&quot;)
</code></pre>
<p>If you want to make an executable</p>
<pre><code>pip install pyinstaller

cd PathOfFile

pyinstaller --onefile -w randomname.py
</code></pre>",0
837,68763460,Transform jsonl file to a dataframe,"<p>I have a jsonl file looking like this:</p>
<pre><code>{&quot;id&quot;: 1, &quot;data&quot;: &quot;this is text. Here I am&quot;, &quot;label&quot;: [[0, 13, &quot;label_1&quot;], [14, 23, &quot;label_2&quot;]]}
{&quot;id&quot;: 2, &quot;data&quot;: &quot;Hi. Hello&quot;, &quot;label&quot;: [[0, 2, &quot;label_3&quot;], [3, 8, &quot;label_4&quot;]]}
</code></pre>
<p><code>[0, 13, &quot;label_1&quot;]</code> means from character 0 to 13 of the sentence.</p>
<p>I would like to have this, Pandas Dataframe expected output:</p>
<pre><code>data              label  
this is text.     label_1        
Here I am         label_2         
Hi.               label_3 
Hello             label_4
</code></pre>
<p>How can I do this ?</p>",python|json|pandas,"<p>Try:</p>
<pre class=""lang-py prettyprint-override""><code>df = pd.read_json(&quot;your_file.jsonl&quot;, lines=True).explode(&quot;label&quot;)
df[&quot;data&quot;] = df.apply(
    lambda x: x[&quot;data&quot;][x[&quot;label&quot;][0] : x[&quot;label&quot;][1] + 1], axis=1
)
df[&quot;label&quot;] = df[&quot;label&quot;].str[-1]
print(df)
</code></pre>
<p>Prints:</p>
<pre class=""lang-none prettyprint-override""><code>   id            data    label
0   1  this is text.   label_1
0   1       Here I am  label_2
1   2             Hi.  label_3
1   2           Hello  label_4
</code></pre>",1
838,68576058,Beautiful Soup 4 find method returns 'None',"<pre><code>from bs4 import BeautifulSoup
import requests
import re

username = input('enter username: ')

url = f'https://www.tiktok.com/@{username}'
response = requests.get(url).text
soup = BeautifulSoup(response, 'html.parser')
subname = soup.find('h1', class_=&quot;share-sub-title&quot;)
print(subname)
</code></pre>
<p>It doens't matter what i search for it just returns 'none'. Please help me out ive been searching for this solution for the past 3 days and i can't find it. I am also new to coding so my apologies.</p>",python|web-scraping|beautifulsoup|python-requests,"<p>I am not sure if this is the problem in your code but you can try this. Add header in you request object.</p>
<pre><code>headers = {}
headers['User-Agent'] = &quot;Mozilla/5.0 (X11; Linux i686)&quot;
response = requests.get(url, headers=headers).text
</code></pre>",1
839,36167666,"Python I am making a calculator for the formula/answer of 3 different things, but 2/3 of the things display with extra characters","<p>PYTHON
I am making a calculator that displays formulas and answers of a few different things after you enter time, distance, mass, etc. Velocity works fine, but Speed and Acceleration are display apostrophes, commas, and parentheses. Some of them aren't even in the editor.</p>

<p>Output:</p>

<pre><code>('Speed = Distance / Time = 1m / 1s', ' = 1m/s')
('Acceleration = Force / Mass = 1N', ' / 1kg = 1.0m/s/s')
Velocity = Speed + Direction = 1m/s + Direction = 1m/s North
</code></pre>

<p>The variables in the program:</p>

<pre><code>SpeedFormula = 'Speed = Distance / Time = ' + distanceDisplay + ' / ' + timeDisplay, ' = ' + speedDisplay
AccelerationFormula = 'Acceleration = Force / Mass = ' + forceDisplay, ' / ' + massDisplay + ' = ' + AccelerationDisplay
VelocityFormula = 'Velocity = Speed + Direction = ' + speedDisplay + "" + "" +  'Direction' + ' = ' + VelocityDisplay
</code></pre>

<p>Anyone know why they display differently and how I can fix it?</p>",python-3.x,"<p>Replace</p>

<pre><code>timeDisplay, ' = ' + speedDisplay
</code></pre>

<p>with</p>

<pre><code>timeDisplay + ' = ' + speedDisplay
</code></pre>

<p>When you use comma SpeedFormula becomes a tuple, not a string.</p>

<p>P.S. You should probably use formatting like this:</p>

<pre><code>distanceDisplay = 20
timeDisplay = 2
speedDisplay = 10

SpeedFormula = 'Speed = Distance / Time = %d / %d = %d' % (distanceDisplay,timeDisplay,speedDisplay)
</code></pre>",1
840,36057648,"Kivy Scrollable Label and text file, label wont update","<p>Hy, the problem is that with the current code, which is at this point preety much nothing but a text editor, when ever I try to make a scrollable label in the kv language and call it on the main screen at the push of a button, I get no error, theres just nothing there. I should mention that the text is taken from a stored file, and the only version that works is with a regular label. This is the code, I know its a bit long but its preety easy to understand so stay with me. Any sort of input is greatly apreciated and I thank you for taking the time.</p>

<pre><code>#kivy.require(""1.8.0"")
from kivy.app import App
from kivy.lang import Builder
from kivy.uix.screenmanager import ScreenManager, Screen, FadeTransition
from kivy.uix.widget import Widget
from kivy.uix.scatter import Scatter
from kivy.uix.label import Label
from kivy.uix.scrollview import ScrollView
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.textinput import TextInput
from kivy.properties import StringProperty
from kivy.uix.boxlayout import BoxLayout
from kivy.graphics import Line
from kivy.uix.gridlayout import GridLayout


kv = '''
#: import FadeTransition kivy.uix.screenmanager.FadeTransition

ScreenManager:
    transition: FadeTransition()
    MainScreen:
    AddScreen:
    AppendScreen:


&lt;ScatterTextWidget&gt;:
    orientation: 'vertical'

    TextInput:
        id: main_input
        font_size: 14
        size_hint_y: None
        height: root.height - botones_layout.height
        font_color: [0.1,0.3,0.9,1]
        focus: True
        foreground_color: [0.2,0.5,0.9,1]
        cursor_color: [0,0,1,1]

    BoxLayout:
        id: botones_layout
        orientation: 'horizontal'
        height: 30
        Button:
            id: home_button
            text: ""Back Home""            
        Button:
            id: save_button
            text: ""Save to file""
            on_press: root.saveToFile(""Archive.txt"", main_input.text)


&lt;AppendTextWidget&gt;:
    orientation: 'vertical'

    TextInput:
        text: root.text
        id: main_input
        font_size: 14
        size_hint_y: None
        height: root.height - botones_layout.height
        font_color: [0.1,0.3,0.9,1]
        focus: True
        foreground_color: [0.2,0.5,0.9,1]
        cursor_color: [0,0,1,1]

    BoxLayout:
        id: botones_layout
        orientation: 'horizontal'
        height: 30
        Button:
            id: home_button
            text: ""Back Home""
            on_release: app.root.current = ""main""
        Button:
            id: save_button
            text: ""Save""
            on_press: root.append(main_input.text)

#This does not work &lt;--- &lt;--- &lt;---

&lt;ScrollableLabel&gt;:
    Label:
        text: root.text
        font_size: 15
        text_size: self.width, None
        color: [0,255,0,1]
        padding_x: 20
        size_hint_y: None
        pos_hint: {""left"":1, ""top"":1}
        height: self.texture_size[1]


&lt;MainScreen&gt;:
    name: ""main""
    FloatLayout:

        # This does work 

        Label:
            text: root.text
            font_size: 15
            text_size: self.width, None
            color: [0,255,0,1]
            padding_x: 20
            size_hint_y: None
            pos_hint: {""left"":1, ""top"":1}
            height: self.texture_size[1]        

    ActionBar:
        pos_hint: {'top':1}
        ActionView:
            use_separator: True
            ActionPrevious:
                title: ""Text""
                with_previous: False
            ActionOverflow:
            ActionButton:
                text: ""New""
                on_release: app.root.current = ""add""
            ActionButton:
                text: ""Update""
                on_press: root.clicked()
            ActionButton:
                text: ""Add""
                on_release: app.root.current = ""append""


&lt;AddScreen&gt;:
    name: ""add""
    FloatLayout:
         ScatterTextWidget

&lt;AppendScreen&gt;:
    name: ""append""
    FloatLayout:
        AppendTextWidget        

'''


class ScatterTextWidget(BoxLayout):
    def saveToFile(self,name,text):
        f = open(name, ""w"")
        f.write(""\n\n\n"" + ""    "" + ""&gt;&gt;&gt;"" + text + ""test""*500)
        f.close()

class AppendTextWidget(BoxLayout):
    text = StringProperty("""")
    def append(self,text):
        with open(""Archive.txt"", ""a"") as f:
            f.write(""\n"" + ""    "" + ""&gt;&gt;&gt;"" + text)
            f.close()



 class ScrollableLabel(ScrollView):
     text = StringProperty('')
     pass


class MainScreen(Screen):
    text = StringProperty("""")

    def clicked(self):
        with open(""Archive.txt"", ""r"") as f:
            contents = f.read()
            self.text = contents
    pass

class AddScreen(Screen):
    pass

class AppendScreen(Screen):
    pass    

class MyApp(App):

    def build(self):
        return Builder.load_string(kv)



if __name__ == '__main__':
    MyApp().run()
</code></pre>",python-3.x|label|scrollview|kivy,"<p>Why it works:</p>

<p>Your <code>text</code> in MainScreen is updated from file, then passed to Label and the text is loaded. <code>ScrollableLabel.text</code> stays unchanged.</p>

<p>Why it doesn't work as you expect:</p>

<p>There's no communication between your classes, therefore only <code>text</code> changed is an actual <code>self.text</code> = <code>MainScreen.text</code></p>

<p>How to make it work:</p>

<p>Either use something on a global range, i.e. variable in your <code>App</code> class, then <code>a = App.get_running_app()</code> and access variable through <code>a.&lt;variable&gt;</code> or use <code>__init__</code> to initialize your ScrollableLabel inside the MainScreen and pass it the <code>text</code></p>

<p>So it's basically a duplicate of <a href=""https://stackoverflow.com/q/36050498/5994041"">this</a> and that one is a duplicate of an older unsimplified question.</p>",0
841,36267315,Python pandas dataframe groupby selecting columns,"<p>I have the following detaframe bb:</p>

<pre><code>bq_selection_id bq_balance  bq_market_id  bq_back_price
0         45094462     185.04       7278437           1.97
1         45094462     185.04       7278437           1.97
2         45094463     185.04       7278437           3.05
3         45094463     185.04       7278437           3.05
4         45094464     185.04       7278437           5.80
5         45094464     185.04       7278437           5.80
6         45094466     185.04       7278437         200.00
7         45094466     185.04       7278437         200.00
8         45094465     185.04       7278437            NaN
9         45094465     185.04       7278437            NaN
</code></pre>

<p>I would like to group by ""market_id"" and take first two lowest ""bq_back_price"". I managed to do this with </p>

<pre><code>bb.groupby('bq_market_id')['bq_back_price'].nsmallest(2)
</code></pre>

<p>The problem is that I am missing some of the columns such as ""bq_selection_id"", ""bq_balance"" and column ""bq_back_price"" does not have name. That is what I get </p>

<pre><code>bq_market_id   
7278437       0    1.97
7278437       1    1.97
</code></pre>

<p>And I would like to get something like this</p>

<pre><code>bq_selection_id bq_balance  bq_market_id  bq_back_price
0         45094462     185.04       7278437           1.97
1         45094462     185.04       7278437           1.97
</code></pre>

<p>Can you help me please?</p>",python|python-2.7|python-3.x|pandas,"<p>How about appending a new ""Rank"" column?</p>

<pre><code>bb['rank'] = bb.groupby(['bq_market_id'])['bq_back_price'].rank(ascending=True)
</code></pre>

<p>After that, you can filter bb for the lowest 2 prices (rank 1 and 2). </p>

<pre><code>bb[bb['rank'] &lt; 3]
</code></pre>

<p>Credit to: <a href=""https://stackoverflow.com/questions/17604665/python-pandas-rank-by-column"">python pandas rank by column</a></p>",1
842,36267315,Python pandas dataframe groupby selecting columns,"<p>I have the following detaframe bb:</p>

<pre><code>bq_selection_id bq_balance  bq_market_id  bq_back_price
0         45094462     185.04       7278437           1.97
1         45094462     185.04       7278437           1.97
2         45094463     185.04       7278437           3.05
3         45094463     185.04       7278437           3.05
4         45094464     185.04       7278437           5.80
5         45094464     185.04       7278437           5.80
6         45094466     185.04       7278437         200.00
7         45094466     185.04       7278437         200.00
8         45094465     185.04       7278437            NaN
9         45094465     185.04       7278437            NaN
</code></pre>

<p>I would like to group by ""market_id"" and take first two lowest ""bq_back_price"". I managed to do this with </p>

<pre><code>bb.groupby('bq_market_id')['bq_back_price'].nsmallest(2)
</code></pre>

<p>The problem is that I am missing some of the columns such as ""bq_selection_id"", ""bq_balance"" and column ""bq_back_price"" does not have name. That is what I get </p>

<pre><code>bq_market_id   
7278437       0    1.97
7278437       1    1.97
</code></pre>

<p>And I would like to get something like this</p>

<pre><code>bq_selection_id bq_balance  bq_market_id  bq_back_price
0         45094462     185.04       7278437           1.97
1         45094462     185.04       7278437           1.97
</code></pre>

<p>Can you help me please?</p>",python|python-2.7|python-3.x|pandas,"<p>You can use <a href=""http://pandas.pydata.org/pandas-docs/stable/generated/pandas.merge.html"" rel=""nofollow noreferrer""><code>merge</code></a> by <code>indexes</code>:</p>

<pre><code>print bb.groupby('bq_market_id')['bq_back_price'].nsmallest(2).reset_index(level=0, name='bq_back_price')
   bq_market_id  bq_back_price
0       7278437           1.97
1       7278437           1.97

print pd.merge(bb[['bq_selection_id','bq_balance']],
               bb.groupby('bq_market_id')['bq_back_price'].nsmallest(2).reset_index(level=0, name='bq_back_price'),
               left_index=True,
               right_index=True)
   bq_selection_id  bq_balance  bq_market_id  bq_back_price
0         45094462      185.04       7278437           1.97
1         45094462      185.04       7278437           1.97
</code></pre>

<p><a href=""https://stackoverflow.com/users/190597/unutbu"">unutbu</a> deleted nice answer, but I think it is better as my answer:</p>

<pre><code>result = df.groupby('bq_market_id')['bq_back_price'].nsmallest(2)
idx = result.index.get_level_values(-1)
print(df.loc[idx])

   bq_selection_id  bq_balance  bq_market_id  bq_back_price
0         45094462      185.04       7278437           1.97
1         45094462      185.04       7278437           1.97
</code></pre>",0
843,36267315,Python pandas dataframe groupby selecting columns,"<p>I have the following detaframe bb:</p>

<pre><code>bq_selection_id bq_balance  bq_market_id  bq_back_price
0         45094462     185.04       7278437           1.97
1         45094462     185.04       7278437           1.97
2         45094463     185.04       7278437           3.05
3         45094463     185.04       7278437           3.05
4         45094464     185.04       7278437           5.80
5         45094464     185.04       7278437           5.80
6         45094466     185.04       7278437         200.00
7         45094466     185.04       7278437         200.00
8         45094465     185.04       7278437            NaN
9         45094465     185.04       7278437            NaN
</code></pre>

<p>I would like to group by ""market_id"" and take first two lowest ""bq_back_price"". I managed to do this with </p>

<pre><code>bb.groupby('bq_market_id')['bq_back_price'].nsmallest(2)
</code></pre>

<p>The problem is that I am missing some of the columns such as ""bq_selection_id"", ""bq_balance"" and column ""bq_back_price"" does not have name. That is what I get </p>

<pre><code>bq_market_id   
7278437       0    1.97
7278437       1    1.97
</code></pre>

<p>And I would like to get something like this</p>

<pre><code>bq_selection_id bq_balance  bq_market_id  bq_back_price
0         45094462     185.04       7278437           1.97
1         45094462     185.04       7278437           1.97
</code></pre>

<p>Can you help me please?</p>",python|python-2.7|python-3.x|pandas,"<p>You can first sort values on <code>bq_back_price</code>, and then take <code>head(2)</code> in each groups.</p>

<pre><code>In [218]: df.sort_values('bq_back_price').groupby('bq_market_id').head(2)
Out[218]:
   bq_selection_id  bq_balance  bq_market_id  bq_back_price
0         45094462      185.04       7278437           1.97
1         45094462      185.04       7278437           1.97
</code></pre>",2
844,35852669,ImportError: No module named KeenClient,"<p>I'm using the basic getting started example with Python, but am running into issues. Seems like it cannot find the KeenClient I installed using ""pip install keen""</p>

<p>Code is as below</p>

<pre><code>from keen.client import KeenClient

# Initialize the Keen Client.
client = KeenClient(""56ddb39a96773d7e98d63392"", write_key=""xxxx"")

# Build your event properties as a dictionary.
ticket_purchase = {
  ""price"" : 50.00,
  ""user"": {
    ""id"": ""020939382"",
    ""age"": 28
  },
  ""artist"": {
    ""id"": ""19039"",
    ""name"": ""Tycho""
  },
  ""venue"": {
    ""id"": ""A93DJ"",
    ""name"": ""The Fillmore"",
    ""city"": ""San Francisco"",
    ""state"": ""California""
  }
}
# Add your event to the ""ticket_purchases"" collection.
client.add_event(""ticket_purchases"", ticket_purchase)
</code></pre>

<p>and error message is as follows:</p>

<pre><code>Traceback (most recent call last):
  File ""/Users/wim/Dropbox/Programming/Python/keen.py"", line 1, in &lt;module&gt;
    import KeenClient
ImportError: No module named KeenClient
[Finished in 0.0s with exit code 1]
[shell_cmd: python -u ""/Users/wimw/Dropbox/Programming/Python/keen.py""]
[dir: /Users/wimw/Dropbox/Programming/Python]
[path: /usr/bin:/bin:/usr/sbin:/sbin]
</code></pre>

<p>I'm running on MAC, but also have this issue on Ubuntu. I installed Keen SDK with ""pip install keen"" as per the documentation. Any way to solve this?</p>",python|keen-io,<p>Rename your <strong>script</strong> from <code>keen.py</code> to something else like <code>keentest.py</code>. The name of your own program shadows the <code>keen</code> package and that is why <code>keen.client</code> cannot be imported.</p>,4
845,35935223,Questions about object has no attribute(Python),"<p>When I try to change my teacher's code to create a new dialog, the shell always shows that <code>NameDialog object has no attribute _column_enter</code>.  </p>

<p>However, my teacher's code can work so I am wondering, what's the difference to make my code can not work:</p>

<pre><code>import tkinter

Font=('Helvetica', 14)


class User_design:
    def __init__(self):
        self._root_window=tkinter.Tk()
        start_button=tkinter.Button(
            master=self._root_window, text='click there to start.',
            font=Font, command=self._get_start)
        start_button.grid(
            row = 0, column = 0, padx = 10, pady = 10,
            sticky = tkinter.S)



        self._greeting_text = tkinter.StringVar()
        self._greeting_text.set('Not begin')

        greeting_label = tkinter.Label(
            master = self._root_window, textvariable = self._greeting_text,
            font =  Font)

        greeting_label.grid(
            row = 1, column = 0, padx = 10, pady = 10,
            sticky = tkinter.N)

        self._root_window.rowconfigure(0, weight = 1)
        self._root_window.rowconfigure(1, weight = 1)
        self._root_window.columnconfigure(0, weight = 1)





    def start(self) -&gt; None:
        self._root_window.mainloop()

    def _get_start(self):
        dialog = NameDialog()
        dialog.show()

        if dialog.was_ok_clicked():
            column=dialog.get_column()
            row=dialog.get_row()
            turn=dialog.get_turn()
            top_left=dialog.get_top_left()
            win_method=dialog.get_win_method()


class NameDialog:
    def __init__(self):
        self._dialog_window = tkinter.Toplevel()

        #column_label
        column_label=tkinter.Label(
            master=self._dialog_window, text='How many columns?',
            font=Font)
        column_label.grid(
            row=0, column=0, padx=10,pady=10, sticky=tkinter.W)
        self._column_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
        self._column_enter.grid(
            row=0, column=1, padx=10,pady=10, sticky=tkinter.W)



        #row_input
        row_input=tkinter.Label(
            master=self._dialog_window, text='How many rows?',
            font=Font)
        row_input.grid(
            row=1, column=0, padx=10,pady=10, sticky=tkinter.W)
        self._row_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
        self._row_enter.grid(
            row=1, column=1, padx=10,pady=10, sticky=tkinter.W)

        #turn_input
        turn_input=tkinter.Label(
            master=self._dialog_window, text='Which color move first?',
            font=Font)
        turn_input.grid(
            row=2, column=0, padx=10,pady=10, sticky=tkinter.W)
        self._turn_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
        self._turn_enter.grid(
            row=2, column=1, padx=10,pady=10, sticky=tkinter.W)

        #top_left_input
        top_left_input=tkinter.Label(
            master=self._dialog_window, text='Which color on top left?',
            font=Font)
        top_left_input.grid(
            row=3, column=0, padx=10,pady=10, sticky=tkinter.W)
        self._top_left_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
        self._top_left_enter.grid(
            row=3, column=1, padx=10,pady=10, sticky=tkinter.W)

        #win_menthod_input
        win_method_input=tkinter.Label(
            master=self._dialog_window, text='win method?',
            font=Font)
        win_method_input.grid(
            row=4, column=0, padx=10,pady=10, sticky=tkinter.W)
        self._win_method_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
        self._win_method_enter.grid(
            row=4, column=1, padx=10,pady=10, sticky=tkinter.W)



        button_frame = tkinter.Frame(master = self._dialog_window)
        button_frame.grid(
            row = 5, column = 0, columnspan = 2, padx = 10, pady = 10,
            sticky = tkinter.E + tkinter.S)
        ok_button = tkinter.Button(
            master = button_frame, text = 'OK', font = Font,
            command = self._on_ok_button)
        ok_button.grid(row = 0, column = 0, padx = 10, pady = 10)
        cancel_button = tkinter.Button(
            master = button_frame, text = 'Cancel', font = Font,
            command = self._on_cancel_button)
        cancel_button.grid(row = 0, column = 1, padx = 10, pady = 10)


        self._dialog_window.rowconfigure(5, weight = 1)
        self._dialog_window.columnconfigure(1, weight = 1)


        self._ok_clicked = False
        self._column = ''
        self._row = ''
        self._turn=''
        self._top_left=''
        self._win_method=''


    def show(self):
        self._dialog_window.grab_set()
        self._dialog_window.wait_window()

    def was_ok_clicked(self) -&gt; bool:
        return self._ok_clicked


    def get_column(self) -&gt; str:
        return self._column


    def get_row(self) -&gt; str:
        return self._row

    def get_turn(self)-&gt;str:
        return self._turn

    def get_top_left(self)-&gt;str:
        return self._top_left

    def get_win_method(self)-&gt;str:
        return self._win_method

    def _on_ok_button(self) -&gt; None:
        self._ok_clicked = True
        self._column = self._column_entry.get()
        self._row = self._row_entry.get()
        self._turn = self._turn_entry.get()
        self._top_left = self._top_left_entry.get()
        self._win_menthod = self._win_method_entry.get()

        self._dialog_window.destroy()


    def _on_cancel_button(self) -&gt; None:
        self._dialog_window.destroy()





if __name__ == '__main__':
    User_design().start()
</code></pre>",python,"<pre><code>self._column_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
self._column_enter.grid(
            row=0, column=1, padx=10,pady=10, sticky=tkinter.W)
</code></pre>

<p>because your spell wrong.</p>",0
846,35935223,Questions about object has no attribute(Python),"<p>When I try to change my teacher's code to create a new dialog, the shell always shows that <code>NameDialog object has no attribute _column_enter</code>.  </p>

<p>However, my teacher's code can work so I am wondering, what's the difference to make my code can not work:</p>

<pre><code>import tkinter

Font=('Helvetica', 14)


class User_design:
    def __init__(self):
        self._root_window=tkinter.Tk()
        start_button=tkinter.Button(
            master=self._root_window, text='click there to start.',
            font=Font, command=self._get_start)
        start_button.grid(
            row = 0, column = 0, padx = 10, pady = 10,
            sticky = tkinter.S)



        self._greeting_text = tkinter.StringVar()
        self._greeting_text.set('Not begin')

        greeting_label = tkinter.Label(
            master = self._root_window, textvariable = self._greeting_text,
            font =  Font)

        greeting_label.grid(
            row = 1, column = 0, padx = 10, pady = 10,
            sticky = tkinter.N)

        self._root_window.rowconfigure(0, weight = 1)
        self._root_window.rowconfigure(1, weight = 1)
        self._root_window.columnconfigure(0, weight = 1)





    def start(self) -&gt; None:
        self._root_window.mainloop()

    def _get_start(self):
        dialog = NameDialog()
        dialog.show()

        if dialog.was_ok_clicked():
            column=dialog.get_column()
            row=dialog.get_row()
            turn=dialog.get_turn()
            top_left=dialog.get_top_left()
            win_method=dialog.get_win_method()


class NameDialog:
    def __init__(self):
        self._dialog_window = tkinter.Toplevel()

        #column_label
        column_label=tkinter.Label(
            master=self._dialog_window, text='How many columns?',
            font=Font)
        column_label.grid(
            row=0, column=0, padx=10,pady=10, sticky=tkinter.W)
        self._column_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
        self._column_enter.grid(
            row=0, column=1, padx=10,pady=10, sticky=tkinter.W)



        #row_input
        row_input=tkinter.Label(
            master=self._dialog_window, text='How many rows?',
            font=Font)
        row_input.grid(
            row=1, column=0, padx=10,pady=10, sticky=tkinter.W)
        self._row_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
        self._row_enter.grid(
            row=1, column=1, padx=10,pady=10, sticky=tkinter.W)

        #turn_input
        turn_input=tkinter.Label(
            master=self._dialog_window, text='Which color move first?',
            font=Font)
        turn_input.grid(
            row=2, column=0, padx=10,pady=10, sticky=tkinter.W)
        self._turn_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
        self._turn_enter.grid(
            row=2, column=1, padx=10,pady=10, sticky=tkinter.W)

        #top_left_input
        top_left_input=tkinter.Label(
            master=self._dialog_window, text='Which color on top left?',
            font=Font)
        top_left_input.grid(
            row=3, column=0, padx=10,pady=10, sticky=tkinter.W)
        self._top_left_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
        self._top_left_enter.grid(
            row=3, column=1, padx=10,pady=10, sticky=tkinter.W)

        #win_menthod_input
        win_method_input=tkinter.Label(
            master=self._dialog_window, text='win method?',
            font=Font)
        win_method_input.grid(
            row=4, column=0, padx=10,pady=10, sticky=tkinter.W)
        self._win_method_entry = tkinter.Entry(
            master = self._dialog_window, width = 20, font = Font)
        self._win_method_enter.grid(
            row=4, column=1, padx=10,pady=10, sticky=tkinter.W)



        button_frame = tkinter.Frame(master = self._dialog_window)
        button_frame.grid(
            row = 5, column = 0, columnspan = 2, padx = 10, pady = 10,
            sticky = tkinter.E + tkinter.S)
        ok_button = tkinter.Button(
            master = button_frame, text = 'OK', font = Font,
            command = self._on_ok_button)
        ok_button.grid(row = 0, column = 0, padx = 10, pady = 10)
        cancel_button = tkinter.Button(
            master = button_frame, text = 'Cancel', font = Font,
            command = self._on_cancel_button)
        cancel_button.grid(row = 0, column = 1, padx = 10, pady = 10)


        self._dialog_window.rowconfigure(5, weight = 1)
        self._dialog_window.columnconfigure(1, weight = 1)


        self._ok_clicked = False
        self._column = ''
        self._row = ''
        self._turn=''
        self._top_left=''
        self._win_method=''


    def show(self):
        self._dialog_window.grab_set()
        self._dialog_window.wait_window()

    def was_ok_clicked(self) -&gt; bool:
        return self._ok_clicked


    def get_column(self) -&gt; str:
        return self._column


    def get_row(self) -&gt; str:
        return self._row

    def get_turn(self)-&gt;str:
        return self._turn

    def get_top_left(self)-&gt;str:
        return self._top_left

    def get_win_method(self)-&gt;str:
        return self._win_method

    def _on_ok_button(self) -&gt; None:
        self._ok_clicked = True
        self._column = self._column_entry.get()
        self._row = self._row_entry.get()
        self._turn = self._turn_entry.get()
        self._top_left = self._top_left_entry.get()
        self._win_menthod = self._win_method_entry.get()

        self._dialog_window.destroy()


    def _on_cancel_button(self) -&gt; None:
        self._dialog_window.destroy()





if __name__ == '__main__':
    User_design().start()
</code></pre>",python,"<p>There are around 5 sections of your code where you refer to <code>enter</code> instead of <code>entry</code>, so the variable you are trying to set does not exist.</p>

<p>Search and replace <code>enter</code> with <code>entry</code> and you should be good to go.</p>",0
847,35862866,JSON Website response into Python dictionary,"<p>I'm trying to load a JSON response from a website into a Python (2.7) dictionary, but am getting stuck iterating through more than the outer JSON object. </p>

<p>E.g. the website response looks like:</p>

<pre><code>{
  ""movies"": [
    {
      ""movieTitle"": ""True Lies"",
      ""Cert"": ""15"",
      ""Released"": ""1987"",
    },
     {
      ""movieTitle"": ""Scary Movie"",
      ""Cert"": ""18"",
      ""Released"": ""1997"",
    },
</code></pre>

<p>My Python is as follows, and when printing 'json_object' I see all of the data, but how can I get the JSON array held within 'json_object' into a Python list / dictionary?</p>

<pre><code>response = requests.get('https://api.foo.com/movies/all', headers=headers)
json_object = json.loads(response.text)
print json_object
</code></pre>",python|json,"<p>In order to iterate over each movie, Use:</p>

<pre><code>json_object = json.loads(response.text)
for movie in json_object['movies']:
    print movie['movieTitle']
</code></pre>",1
848,35862866,JSON Website response into Python dictionary,"<p>I'm trying to load a JSON response from a website into a Python (2.7) dictionary, but am getting stuck iterating through more than the outer JSON object. </p>

<p>E.g. the website response looks like:</p>

<pre><code>{
  ""movies"": [
    {
      ""movieTitle"": ""True Lies"",
      ""Cert"": ""15"",
      ""Released"": ""1987"",
    },
     {
      ""movieTitle"": ""Scary Movie"",
      ""Cert"": ""18"",
      ""Released"": ""1997"",
    },
</code></pre>

<p>My Python is as follows, and when printing 'json_object' I see all of the data, but how can I get the JSON array held within 'json_object' into a Python list / dictionary?</p>

<pre><code>response = requests.get('https://api.foo.com/movies/all', headers=headers)
json_object = json.loads(response.text)
print json_object
</code></pre>",python|json,"<p>Try using <code>json.loads</code>. It shall convert your json into a python dictionary and you can access the elements now and manipulate them as you normall would in a python dict.</p>

<pre><code>dict1 = json.loads(json_object)
</code></pre>

<p>For eg, to obtain the movie title:</p>

<pre><code>title = dict1[""movies""][0][""movietitle""]
</code></pre>",0
849,36020583,Compute the gradient of the SVM loss function,"<p>I am trying to implement the SVM loss function and its gradient.
I found some example projects that implement these two, but I could not figure out how they can use the loss function when computing the gradient.</p>

<p>Here is the formula of loss function:
<a href=""https://i.stack.imgur.com/qGd90.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/qGd90.png"" alt=""enter image description here""></a></p>

<p>What I cannot understand is that how can I use the loss function's result while computing gradient?</p>

<p>The example project computes the gradient as follows:</p>

<pre><code>for i in xrange(num_train):
    scores = X[i].dot(W)
    correct_class_score = scores[y[i]]
    for j in xrange(num_classes):
      if j == y[i]:
        continue
      margin = scores[j] - correct_class_score + 1 # note delta = 1
      if margin &gt; 0:
        loss += margin
        dW[:,j] += X[i]
        dW[:,y[i]] -= X[i] 
</code></pre>

<p>dW is for gradient result. And X is the array of training data.
But I didn't understand how the derivative of the loss function results in this code. </p>",python|machine-learning|svm|gradient,"<p>If the substraction less than zero the loss is zero so the gradient of W is also zero. If the substarction larger than zero, then the gradient of W is the partial derviation of the loss.</p>",0
850,36020583,Compute the gradient of the SVM loss function,"<p>I am trying to implement the SVM loss function and its gradient.
I found some example projects that implement these two, but I could not figure out how they can use the loss function when computing the gradient.</p>

<p>Here is the formula of loss function:
<a href=""https://i.stack.imgur.com/qGd90.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/qGd90.png"" alt=""enter image description here""></a></p>

<p>What I cannot understand is that how can I use the loss function's result while computing gradient?</p>

<p>The example project computes the gradient as follows:</p>

<pre><code>for i in xrange(num_train):
    scores = X[i].dot(W)
    correct_class_score = scores[y[i]]
    for j in xrange(num_classes):
      if j == y[i]:
        continue
      margin = scores[j] - correct_class_score + 1 # note delta = 1
      if margin &gt; 0:
        loss += margin
        dW[:,j] += X[i]
        dW[:,y[i]] -= X[i] 
</code></pre>

<p>dW is for gradient result. And X is the array of training data.
But I didn't understand how the derivative of the loss function results in this code. </p>",python|machine-learning|svm|gradient,"<p>If we don't keep these two lines of code:</p>
<pre><code>dW[:,j] += X[i]
dW[:,y[i]] -= X[i] 
</code></pre>
<p>we get loss value.</p>",-1
851,36020583,Compute the gradient of the SVM loss function,"<p>I am trying to implement the SVM loss function and its gradient.
I found some example projects that implement these two, but I could not figure out how they can use the loss function when computing the gradient.</p>

<p>Here is the formula of loss function:
<a href=""https://i.stack.imgur.com/qGd90.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/qGd90.png"" alt=""enter image description here""></a></p>

<p>What I cannot understand is that how can I use the loss function's result while computing gradient?</p>

<p>The example project computes the gradient as follows:</p>

<pre><code>for i in xrange(num_train):
    scores = X[i].dot(W)
    correct_class_score = scores[y[i]]
    for j in xrange(num_classes):
      if j == y[i]:
        continue
      margin = scores[j] - correct_class_score + 1 # note delta = 1
      if margin &gt; 0:
        loss += margin
        dW[:,j] += X[i]
        dW[:,y[i]] -= X[i] 
</code></pre>

<p>dW is for gradient result. And X is the array of training data.
But I didn't understand how the derivative of the loss function results in this code. </p>",python|machine-learning|svm|gradient,"<p>The method to calculate gradient in this case is Calculus (analytically, NOT numerically!). So we differentiate loss function with respect to W(yi) like this:
 <a href=""https://i.stack.imgur.com/E5oKe.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/E5oKe.png"" alt=""enter image description here""></a></p>

<p>and with respect to W(j) when j!=yi is:</p>

<p><a href=""https://i.stack.imgur.com/mWGpf.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/mWGpf.png"" alt=""enter image description here""></a></p>

<p>The 1 is just indicator function so we can ignore the middle form when condition is true. And when you write in code, the example you provided is the answer.</p>

<p>Since you are using cs231n example, you should definitely check <a href=""http://cs231n.github.io/optimization-1/"" rel=""noreferrer"">note</a> and videos if needed. </p>

<p>Hope this helps!</p>",8
852,36049645,What is the best way to wait for some event to happen? (Python),"<p>Sorry for making a so basic question, but I'm new to Python.</p>

<p>Suppose I want some code to run when the cursor is in X position. Or when the active window is Y.</p>

<pre><code>w = win32gui
text = w.GetWindowText(w.GetForegroundWindow())
</code></pre>

<p>So if I want something to happen when the text is 'Documents' I'd do this with while &amp; time.sleep loops but that doesn't seem so elegant.</p>

<p>I mean, what is the point of this if I decided I'd like this script to run in the background for the rest of my life? I know it wouldn't interfere with any other process, but if it was the case of a bit more complex tracking?</p>

<p>Isn't it possible just to make something happen when a variable turns X?</p>",python,"<p>After some research and @warmoverflow suggestion, for now I'll be using <a href=""http://zopeevent.readthedocs.org/en/latest/"" rel=""nofollow"">zope.event</a> + pythoncom.PumpMessages().</p>

<p>This way it is possible to keep it short and simple.
I guess it will run fast and stealthy with most key, mouse and windows title events.</p>",0
853,35985310,Python: Initialising a new derived class in a method of a base class,"<p>My situation is that I have access to two classes that work nicely together. Modifying their code extensively is probably not possible but maybe small changes could be implemented. However, there are some small extensions to both classes that I would like to make. This seems like a job for subclassing, deriving from each class and adding functionality. But I've run into a problem because one base class calls the other, not my derived one.</p>

<p>Let's say I have two classes A and B in a module 'base_classes.py'. Class B has a method that creates an instance of class A and uses it e.g.</p>

<p>'base_classes.py'</p>

<pre><code>class A():
    def __init__(self):
        print('Class A being called')

class B():
    def __init__(self):
        self.do_thing()
    def do_thing(self):
        self.myA = A() # Here class A is explicitly named
</code></pre>

<p>So I would like to subclass these two and extend them. I do that in a separate module:  </p>

<p>'extensions.py'</p>

<pre><code>import base_classes

class DerivedA(base_classes.A):
    def __init__(self):
        super().__init__()
        print('Class DerivedA being called')

class DerivedB(base_classes.B):
    pass

db = DerivedB()
</code></pre>

<p>As expected the output is simply</p>

<pre><code>Class A being called  
</code></pre>

<p>But how can I prevent <em>my subclass of B</em> from making the instance of the base class of A in the method <code>do_thing(self)</code> and instead make an instance of DerivedA?</p>

<p>The simple way would be to override <code>do_thing(self)</code> in DerivedB so that it explicitly calls DerivedA e.g.</p>

<pre><code>class DerivedB(base_classes.B):
    def do_thing(self):
        self.myA = DerivedA() # Here class DerivedA is explicitly named
</code></pre>

<p>This is fine for this small example, but what if <code>do_thing(self)</code> was a hundred lines long and contained many objects of type A? What if most methods in B contained some A objects. You'd have to override basically every method with an almost exact replica, making it pointless to derive from B in the first place. That's pretty much the problem in my case and I think there must be a clever pythonic way to solve this. Ideally without completely rewriting the original classes.</p>

<p>Any ideas?</p>",python|inheritance|subclass|derived-class,"<p>You can change the <code>do_thing</code> method on class B and pass a class in parameter :</p>

<pre><code>class B():
    def __init__(self):
        self.do_thing()
    def do_thing(self, klass=A):
        self.myA = klass()
</code></pre>

<p>Then derivedB <code>do_thing</code> method can call it with DerivedA</p>

<pre><code>class DerivedB(base_classes.B):
    def do_thing(self, klass=DerivedA):
        return super(DerivedB, self).do_thing(klass)
</code></pre>",0
854,36002884,"ImportError in the console, but import is working in PyCharm","<p>I have a programm which imports the request module like this:</p>

<pre><code>import urllib
from urllib import request
...
</code></pre>

<p>The programm is running fine in the PyCharm-IDE.
But when I run the same code in the console in Linux Ubuntu I get the error:</p>

<pre><code>ImportError: cannot import name request
</code></pre>

<p>Is there a problem with my path? Should I provide more information to solve this problem?</p>

<p>According to <a href=""https://stackoverflow.com/questions/32847526/importerror-on-console-but-not-in-pycharm"">ImportError on console but not in PyCharm</a> PyCharm is setting the working directory.</p>

<p>But when I add this working directory to my script like:</p>

<pre><code>import sys
sys.path.append('/home/kame/Dropbox/myCode/python/scripts/')
</code></pre>

<p>I still get the same error.</p>",python|import|pycharm|libraries,"<p><a href=""https://docs.python.org/3/library/urllib.request.html"" rel=""nofollow""><code>urllib.request</code> module</a> is introduced in Python 3.x.</p>

<p>I suspect PyCharm is using Python 3.x, while in console you are using Python 2.x. Try using Python 3.x in console.</p>",1
855,36024923,C: initializing a binary heap,"<p>I'm working on a project where I'm implementing a binary heap in C. I'm given Python code for this task, and I essentially need to ""translate"" the Python to C. I'm having some trouble dealing with translating ""self"" in Python to the equivalent in C.</p>

<p>Here's the Python code for initializing a binary heap in Python:</p>

<pre><code>def __init__(self, items=None):
    self.heap = [None]
    if items is None:
        self.heap_size = 0
    else:
        self.heap += items
        self.heap_size = len(items)
        self._build_heap()  # this a call to another method
</code></pre>

<p>I'm pretty sure I need to define a struct BinaryHeap and fill in this information. How would I say something like ""self.heap = [None]"" or ""self.heap_size = 0"" in C? Note: I'm fairly new to C, haha.</p>",python|c|binary-heap,"<p>You would declare a struct <code>BinaryHeap</code> as you say, then you would do something like this:</p>

<pre><code>/* This is the init function */
BinaryHeap *BinaryHeap_init(void **items):
{
    BinaryHeap *self = malloc(sizeof(BinaryHeap));
    if (self) {
        self-&gt;heap = NULL; /* This is how you set a property */
        if (items == NULL) {
            self-&gt;heap_size = 0;
        }
        /* This is how you call a ""method"" */
        BinaryHeap_build_heap(self);
    }
    return self;
}

/* This is how you define a ""method"" */
void BinaryHeap_build_heap(BinaryHeap *self)
{
    /* Do something with self-&gt;heap, etc. */
} 

/* You also need a destructor */
void BinaryHeap_delete(BinaryHeap *self)
{
    if (self) {
        /* Destroy self-&gt;heap here */
        free(self);
    }
}
</code></pre>

<p>That's the basics of ""objects in C"", but I think you may have bitten of more than you can chew if you're not very familiar with C.
There are no built-in data structures like lists in C, so you would need to implement your own or find open-source ones.</p>",1
856,36261286,Rewrite from C# to python,"<p>I am trying to rewrite part of code from <code>C#</code> to <code>Python</code>.
But faced some problems with <code>bitwise</code> operation.</p>

<p>Here is <code>C#</code> code :</p>

<pre><code>private string _generateConfirmationHashForTime(long time, string tag)
    {
        time = 1459152870;
        byte[] decode = Convert.FromBase64String(""TphBbTrbbVGJuXQ15OVZVZeBB9M="");
        int n2 = 8;
        if (tag != null)
        {
            if (tag.Length &gt; 32)
            {
                n2 = 8 + 32;
            }
            else
            {
                n2 = 8 + tag.Length;
            }
        }
        byte[] array = new byte[n2];
        int n3 = 8;
        while (true)
        {
            int n4 = n3 - 1;
            if (n3 &lt;= 0)
            {
                break;
            }
            array[n4] = (byte)time;
            time &gt;&gt;= 8;
            n3 = n4;
        }
        if (tag != null)
        {
            Array.Copy(Encoding.UTF8.GetBytes(tag), 0, array, 8, n2 - 8);
        }

        try
        {
            HMACSHA1 hmacGenerator = new HMACSHA1();
            hmacGenerator.Key = decode;
            byte[] hashedData = hmacGenerator.ComputeHash(array);
            string encodedData = Convert.ToBase64String(hashedData, Base64FormattingOptions.None);
            Console.WriteLine(encodedData)
            return encodedData
        }
        catch (Exception)
        {
            return null; //Fix soon: catch-all is BAD!
        }
    }
</code></pre>

<p>I rewrote it to Python:</p>

<pre><code> def _generateConfirmationHashForTime(self, time, tag):
    time = 1459152870
    decode = base64.b64decode(""TphBbTrbbVGJuXQ15OVZVZeBB9M="")
    n2 = 8
    if tag is not None:
        if len(tag) &gt; 32:
            n2 = 8 + 32
        else:
            n2 = 8 + len(tag)

    arrayb = [hex(time &gt;&gt; i &amp; 0xff) for i in (56, 48, 40, 32, 24, 16, 8, 0)]

    if tag is not None:
        for ch in range(0, len(tag)):
            arrayb.append(hex(ord(tag[ch])))

    arrayc = 0
    n4 = len(arrayb) - 1
    for i in range(0, len(arrayb)):
        arrayc &lt;&lt;= 8
        arrayc |= int(arrayb[n4], 16)
        n4 -= 1

    array_binary = binascii.a2b_hex(""{:016x}"".format(arrayc))
    hmacGenerator = hmac.new(decode, array_binary, hashlib.sha1)
    hashedData = hmacGenerator.digest()
    encodedData = base64.b64encode(hashedData)

    print encodedData
</code></pre>

<p>The result of hashing is not equal.</p>

<p>Variables <strong>encodedData</strong> do not match :(</p>

<p>Can you point where can be error in the code?</p>",c#|python|hash|bitwise-operators,"<p>OK, now I remember why I don't use Python.  Language snarks aside though...</p>

<p>The C# code composes an array of bytes, 8 from the <code>time</code> variable (in big-endian form, MSB first) and up to 32 from the UTF8 encoding of the <code>tag</code> string... but limited by the length of the original string, ignoring multi-byte encoding.  Not exactly ideal, but we can handle that.</p>

<p>The bytes from the <code>time</code> variable are simple enough:</p>

<pre><code>arr = struct.pack(""&gt;Q"", time)
</code></pre>

<p>For the <code>tag</code> string convert it to UTF8, then slice the first 32 bytes off and append it to the array:</p>

<pre><code>arr += str(tag).encode(""utf-8"")[0:min(32, len(str(tag)))]
</code></pre>

<p>Up to here we're fine.  I compared the base64 encoding of <code>arr</code> against the composed message in C# and they match for my test data, as does the resultant HMAC message digest.</p>

<p>Here's the full code:</p>

<pre><code>def _generateConfirmationHashForTime(time, tag):
    time = 1459152870
    decode = base64.b64decode(""TphBbTrbbVGJuXQ15OVZVZeBB9M="")

    arr = struct.pack(""&gt;Q"", time) 
    arr += str(tag).encode(""utf-8"")[0:min(32, len(str(tag)))]

    hmacGenerator = hmac.new(decode, arr, hashlib.sha1)
    hashedData = hmacGenerator.digest()
    encodedData = base64.b64encode(hashedData)

    return encodedData
</code></pre>",0
857,36209532,Python 3.5 error with init function not taking enough arguments,"<p>I'm having an issue creating a simple class on codewars. I am receiving the following error: </p>

<blockquote>
  <p><code>Traceback: in TypeError: __init__() takes exactly 3 arguments (2 given)</code></p>
</blockquote>

<p>I realize I supplied the init function with two parameters along with the <code>self</code> parameter. When I create my object from my class, I am supplying two strings for the two parameters. I'm not sure what else I am doing wrong. Is it the codewars browser? I appreciate any assistance. Please see below:</p>

<pre><code>class Person:

    def __init__(self, name, other_name):
        self.name = name
        self.other_name = other_name

    def greet(self):
        return ""Hi {0}, my name is {1}"".format(self.other_name, self.name)

xy = Person(""Raiden"", ""Donald"")
xy.greet()
</code></pre>

<p>I have checked the other questions on this subject and it always seems that the issue is that the person calling the class is not supplying it with the necessary parameters. I am doing that, however. I appreciate any assistance.</p>

<p>EDIT************</p>

<p>It is worth noting that I can produce the above code in my regular python IDLE. I have this exact same code in the codewars window. Hers is the original codewars question: 
<strong><em>Correct this code, so that the greet function returns the expected value.</em></strong></p>

<pre><code>class Person:
  def __init__(self, name):
    self.name = name

  def greet(self, other_name):
    return ""Hi {0}, my name is {1}"".format(other_name, name)
</code></pre>",python,"<p>Codewars is running test cases on your code to see if you succeeded in fixing the given code. All of these test cases assume that the <code>Person</code> constructor takes one positional argument. Since you changed the signature of <code>Person.__init__</code> to require two positional argument, each test case will throw the reported <code>TypeError</code>.</p>

<p>To correct the supplied code, think about whether there is a local variable named <code>name</code> in the <code>greet</code> method.</p>",0
858,36209532,Python 3.5 error with init function not taking enough arguments,"<p>I'm having an issue creating a simple class on codewars. I am receiving the following error: </p>

<blockquote>
  <p><code>Traceback: in TypeError: __init__() takes exactly 3 arguments (2 given)</code></p>
</blockquote>

<p>I realize I supplied the init function with two parameters along with the <code>self</code> parameter. When I create my object from my class, I am supplying two strings for the two parameters. I'm not sure what else I am doing wrong. Is it the codewars browser? I appreciate any assistance. Please see below:</p>

<pre><code>class Person:

    def __init__(self, name, other_name):
        self.name = name
        self.other_name = other_name

    def greet(self):
        return ""Hi {0}, my name is {1}"".format(self.other_name, self.name)

xy = Person(""Raiden"", ""Donald"")
xy.greet()
</code></pre>

<p>I have checked the other questions on this subject and it always seems that the issue is that the person calling the class is not supplying it with the necessary parameters. I am doing that, however. I appreciate any assistance.</p>

<p>EDIT************</p>

<p>It is worth noting that I can produce the above code in my regular python IDLE. I have this exact same code in the codewars window. Hers is the original codewars question: 
<strong><em>Correct this code, so that the greet function returns the expected value.</em></strong></p>

<pre><code>class Person:
  def __init__(self, name):
    self.name = name

  def greet(self, other_name):
    return ""Hi {0}, my name is {1}"".format(other_name, name)
</code></pre>",python,"<p>The Codewars problem is giving you code you need to correct. When you submit it, it runs against a series of unittests that are defined by the question creator. Here is the original code: </p>

<pre><code>class Person:
  def __init__(self, name):
    self.name = name

  def greet(self, other_name):
    return ""Hi {0}, my name is {1}"".format(other_name, name)
</code></pre>

<p>The error you are getting when submitting this code is: </p>

<pre><code>Traceback:
   in 
   in greet
NameError: global name 'name' is not defined
</code></pre>

<p>So, with that error message, by analyzing the code you will notice that in the <code>greet</code> method, you actually are trying to use a variable <code>name</code> that was in fact never defined! </p>

<p>That is actually the error you need to be fixing. You were trying to add an extra variable in your <strong>init</strong>. So, what was happening, was the unittests that were running against your code, were expecting only a single value to be passed to your <strong>init</strong>. </p>

<p>The solution to this problem, was to simply change the <code>name</code> in the <code>greet</code> method to <code>self.name</code>, so that it uses the instance attribute. So your final code is pretty much: </p>

<pre><code>class Person:
  def __init__(self, name):
    self.name = name

  def greet(self, other_name):
    return ""Hi {0}, my name is {1}"".format(other_name, self.name) 
</code></pre>",1
859,35925486,How to use mechanize to enter username and password,"<p>I am trying to use mechanize to scrape a website that requires me to log in. Here is the start of me code.</p>

<pre><code>#!/usr/bin/python

#scrape the admissions part of SAFE

import mechanize
import cookielib
from BeautifulSoup import BeautifulSoup
import html2text

# Browser
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

br.addheaders = [('User-agent', 'Chrome')]

# The site we will navigate into, handling it's session
br.open('https://url')

# View available forms
for f in br.forms():
    print f
</code></pre>

<p>This gives me</p>

<pre><code>&lt;POST https://userstuff application/x-www-form-urlencoded
  &lt;HiddenControl(lt=LT-227363-Ja4QpRvdxrbQF0nb7XcR2jQDydH43s) (readonly)&gt;
  &lt;HiddenControl(execution=e1s1) (readonly)&gt;
  &lt;HiddenControl(_eventId=submit) (readonly)&gt;
  &lt;TextControl(username=)&gt;
  &lt;PasswordControl(password=)&gt;
  &lt;SubmitButtonControl(submit=) (readonly)&gt;
  &lt;CheckboxControl(warn=[on])&gt;&gt;
</code></pre>

<blockquote>
  <p>How can I now enter the username and password?</p>
</blockquote>

<p>I tried </p>

<pre><code># Select the first (index zero) form 
br.select_form(nr=0)

# User credentials
br.form['username'] = 'username'
br.form['password'] = 'password'

# Login
br.submit()
</code></pre>

<p>But that doesn't seem to work.</p>",python|mechanize,"<p>In the end this worked for me</p>

<pre><code>#!/usr/bin/python

#scraper

import mechanize
import cookielib
from BeautifulSoup import BeautifulSoup
import html2text

# Browser
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

br.addheaders = [('User-agent', 'Chrome')]

# The site we will navigate into, handling it's session
br.open('url1')

# View available forms
for f in br.forms():
    if f.attrs['id'] == 'fm1':
        br.form = f
        break

# User credentials
br.form['username'] = 'password'
br.form['password'] = 'username'

# Login
br.submit()

#Now we need to confirm again

br.open('https://url2')

# Select the first (index zero) form 
br.select_form(nr=0)

# Login
br.submit()

print(br.open('https:url2').read())
</code></pre>",4
860,35925486,How to use mechanize to enter username and password,"<p>I am trying to use mechanize to scrape a website that requires me to log in. Here is the start of me code.</p>

<pre><code>#!/usr/bin/python

#scrape the admissions part of SAFE

import mechanize
import cookielib
from BeautifulSoup import BeautifulSoup
import html2text

# Browser
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

br.addheaders = [('User-agent', 'Chrome')]

# The site we will navigate into, handling it's session
br.open('https://url')

# View available forms
for f in br.forms():
    print f
</code></pre>

<p>This gives me</p>

<pre><code>&lt;POST https://userstuff application/x-www-form-urlencoded
  &lt;HiddenControl(lt=LT-227363-Ja4QpRvdxrbQF0nb7XcR2jQDydH43s) (readonly)&gt;
  &lt;HiddenControl(execution=e1s1) (readonly)&gt;
  &lt;HiddenControl(_eventId=submit) (readonly)&gt;
  &lt;TextControl(username=)&gt;
  &lt;PasswordControl(password=)&gt;
  &lt;SubmitButtonControl(submit=) (readonly)&gt;
  &lt;CheckboxControl(warn=[on])&gt;&gt;
</code></pre>

<blockquote>
  <p>How can I now enter the username and password?</p>
</blockquote>

<p>I tried </p>

<pre><code># Select the first (index zero) form 
br.select_form(nr=0)

# User credentials
br.form['username'] = 'username'
br.form['password'] = 'password'

# Login
br.submit()
</code></pre>

<p>But that doesn't seem to work.</p>",python|mechanize,"<p>I'd look at the html form rather than what mechanize gives you. Below is an example of a form I've tried to fill out in the past.</p>

<pre><code>&lt;input type=""text"" name=""user_key"" value=""""&gt;
&lt;input type=""password"" name=""user_password""&gt;
</code></pre>

<p>Below is the code I use to log into that website using the form above</p>

<pre><code># Browser
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_refresh(False) 
br.set_handle_referer(True)
br.set_handle_robots(False)

# Follows refresh 0 but not hangs on refresh &gt; 0
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

# User-Agent
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

# The site we will navigate into, handling it's session
br.open('https://www.website.com/login')

#select the first form
br.select_form(nr=0)

#user credentials
br['user_key'] = 'myusername@gmail.com'
br['user_password'] = 'mypassword'

# Login
br.submit()

link = 'http://www.website.com/url_i_want_to_scrape'

br.open(link)
response = br.response().read()
print response
</code></pre>

<p>Your issue could be that you're either choosing the wrong form giving the incorrect field names</p>",0
861,71092552,How can I validate __slots__ in child classes?,"<p>From the <a href=""https://docs.python.org/3/reference/datamodel.html#notes-on-using-slots"" rel=""nofollow noreferrer"">python docs 3.3.2.4.1</a>, it says  &quot;<code>__slots__</code> declared in parents are available in child classes. However, child subclasses will get a <code>__dict__</code> and <code>__weakref__</code> unless they also define <code>__slots__</code> (which should only contain names of any additional slots).&quot;</p>
<p>However, while I was testing this as below:</p>
<pre><code>class A(object):
    __slots__ = ('a')

class B(A):
    __slots__ = ('b')

b = B()
B.z = 'z'
B.a = 'a'
print(B.z) #z
print(B.a) #a
print(B.__dict__) #{'__module__': '__main__', '__slots__': ('b',), 'b': &lt;member 'b' of 'B' objects&gt;, '__doc__': None, 'z': 'z', 'a': 'a'}
</code></pre>
<p>Neither <code>B.z</code> nor <code>B.__dict__</code> throws exception, the code manages to output.</p>
<p>I am confused why the <code>__slots__ = ('b')</code> in <code>Class B</code> doesn't validate. Theoretically, it should throw an exception at B.z because the keys in slots don't contain it.</p>
<p>Could you please help to explain this strange point? And if possible, could you please help to provide the right usage method of slots in child classes?</p>
<p>By the way, my python version is 3.9.7</p>
<p>Thank you so much.</p>",python|class|slots,"<p>The <code>__slots__</code> should be a tuple there, but you don't actually have a tuple, you have a string. Try doing <code>__slots__ = (&quot;a&quot;,)</code>.</p>
<p>Also, the slots apply to instances, not classes. You are assigning the attribute to the class object. Try the following. The instances work as expected.</p>
<pre class=""lang-py prettyprint-override""><code>a = A()
a.a = &quot;a&quot;
# a.b = &quot;b&quot;  # fails

b = B()
b.b = &quot;b&quot;
b.a = 'a'
# b.z = 'z'  # fails
</code></pre>",0
862,71142860,How can I get the date of the uploaded file in DRF serializer?,"<pre><code>class FileUploadSerializer(serializers.ModelSerializer):
    file= serializers.FileField(
        validators=[FileExtensionValidator(['pdf', 'doc', 'docx'])])
    user = serializers.CharField(read_only=True)

    class Meta:
        model = Foo_Model
        fields = (&quot;file&quot;, &quot;user&quot;)

    def __init__(self, *args, **kwargs):
        super(FileUploadSerializer, self).__init__(*args, **kwargs)
        self.fields['file'].error_messages[
            'required'] = u'Please provide an file!'
        self.fields['file'].error_messages[
            'blank'] = u'Please provide a valid file!'
</code></pre>
<p>This is my serializer for uploading a file. How can I get the uploaded date of the uploaded file?</p>",python|django-rest-framework,"<p>I'll add that into <code>Foo_Model</code></p>
<pre class=""lang-py prettyprint-override""><code>class FooModel(...):
    uploaded_on = DateField(auto_now=True)
</code></pre>
<p>or you can set that time when the file is uploaded ...</p>",0
863,71090382,Adding new data based on maximum duplicates and number of minimum counts,"<pre><code>import pandas as pd
data_list = [['Name', 'Fruit'],
              ['Abel', 'Apple'],
              ['Abel', 'Pear'],
              ['Abel', 'Coconut'],
              ['Abel', 'Pear'],
              ['Benny', 'Apple'],
              ['Benny', 'Apple'],
              ['Cain', 'Apple'],
              ['Cain', 'Coconut'],
              ['Cain', 'Pear'],
              ['Cain', 'Lemon'],
              ['Cain', 'Orange']]

record_df = pd.DataFrame(data_list[1:], columns = data_list[0])
record_df
</code></pre>
<p>I am trying to create 2 extra data column in a pandas dataframe.</p>
<ol>
<li>Count of the highest duplicate.</li>
<li>Count of fruits with the lowest duplicate.</li>
</ol>
<p>So the end results would be</p>
<pre><code>Name | Count of Highest Duplicate | Count of fruits with lowest duplicate
Abel | 2 | 2
Benny | 2 | 1
Cain | 1 | 5
</code></pre>
<p>I have tried</p>
<pre><code>record_df.groupby('Name')['Fruit'].nunique().reset_index()
</code></pre>
<p>and</p>
<pre><code>record_df.groupby('Name')['Fruit'].value_counts()
</code></pre>
<p>but am unsure where to proceed from here.</p>",python-3.x|pandas|database|dataframe,"<p>Use <code>value_counts</code> then <code>groupby</code>:</p>
<pre><code>out = df.value_counts(['Name', 'Fruit']).groupby(level='Name') \
        .agg(**{'Count of Highest Duplicate': 'max',
                'Count of fruits with lowest duplicate': lambda x: sum(x==x.min())})
print(out)

# Output
       Count of Highest Duplicate  Count of fruits with lowest duplicate
Name                                                                    
Abel                            2                                      2
Benny                           2                                      1
Cain                            1                                      5
</code></pre>",1
864,71090382,Adding new data based on maximum duplicates and number of minimum counts,"<pre><code>import pandas as pd
data_list = [['Name', 'Fruit'],
              ['Abel', 'Apple'],
              ['Abel', 'Pear'],
              ['Abel', 'Coconut'],
              ['Abel', 'Pear'],
              ['Benny', 'Apple'],
              ['Benny', 'Apple'],
              ['Cain', 'Apple'],
              ['Cain', 'Coconut'],
              ['Cain', 'Pear'],
              ['Cain', 'Lemon'],
              ['Cain', 'Orange']]

record_df = pd.DataFrame(data_list[1:], columns = data_list[0])
record_df
</code></pre>
<p>I am trying to create 2 extra data column in a pandas dataframe.</p>
<ol>
<li>Count of the highest duplicate.</li>
<li>Count of fruits with the lowest duplicate.</li>
</ol>
<p>So the end results would be</p>
<pre><code>Name | Count of Highest Duplicate | Count of fruits with lowest duplicate
Abel | 2 | 2
Benny | 2 | 1
Cain | 1 | 5
</code></pre>
<p>I have tried</p>
<pre><code>record_df.groupby('Name')['Fruit'].nunique().reset_index()
</code></pre>
<p>and</p>
<pre><code>record_df.groupby('Name')['Fruit'].value_counts()
</code></pre>
<p>but am unsure where to proceed from here.</p>",python-3.x|pandas|database|dataframe,"<p>You can use <code>crosstab</code> and standard operations:</p>
<pre><code>df2 = pd.crosstab(record_df['Name'], record_df['Fruit'])
df2 = df2.where(df2.ne(0))

pd.DataFrame({'max': df2.max(axis=1),
              'count(min)': df2.eq(df2.min(axis=1), axis=0).sum(axis=1)},
             index=df2.index)
</code></pre>
<p>output:</p>
<pre><code>       max  count(min)
Name                  
Abel     2           2
Benny    2           1
Cain     1           5
</code></pre>",1
865,71309350,Pandas group by selected dates,"<p>I have a dataframe that is very similar to this dataframe:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">index</th>
<th style=""text-align: center;"">date</th>
<th style=""text-align: center;"">month</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">0</td>
<td style=""text-align: center;"">2019-12-1</td>
<td style=""text-align: center;"">12</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">2020-03-1</td>
<td style=""text-align: center;"">3</td>
</tr>
<tr>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">2020-07-1</td>
<td style=""text-align: center;"">7</td>
</tr>
<tr>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">2021-02-1</td>
<td style=""text-align: center;"">2</td>
</tr>
<tr>
<td style=""text-align: center;"">4</td>
<td style=""text-align: center;"">2021-09-1</td>
<td style=""text-align: center;"">9</td>
</tr>
</tbody>
</table>
</div>
<p>And i want to combine all dates that are closest to a set of months. The months need to be normalized like this:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">Months</th>
<th style=""text-align: center;"">Normalized month</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">3, 4, 5</td>
<td style=""text-align: center;"">4</td>
</tr>
<tr>
<td style=""text-align: center;"">6, 7, 8, 9</td>
<td style=""text-align: center;"">8</td>
</tr>
<tr>
<td style=""text-align: center;"">1, 2, 10, 11, 12</td>
<td style=""text-align: center;"">12</td>
</tr>
</tbody>
</table>
</div>
<p>So the output will be:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">index</th>
<th style=""text-align: center;"">date</th>
<th style=""text-align: center;"">month</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">0</td>
<td style=""text-align: center;"">2019-12-1</td>
<td style=""text-align: center;"">12</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">2020-04-1</td>
<td style=""text-align: center;"">4</td>
</tr>
<tr>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">2020-08-1</td>
<td style=""text-align: center;"">8</td>
</tr>
<tr>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">2020-12-1</td>
<td style=""text-align: center;"">12</td>
</tr>
<tr>
<td style=""text-align: center;"">4</td>
<td style=""text-align: center;"">2021-08-1</td>
<td style=""text-align: center;"">8</td>
</tr>
</tbody>
</table>
</div>",python|pandas|dataframe|date|normalize,"<p>You need to construct a dictionary from the second dataframe (assuming <code>df1</code> and <code>df2</code>):</p>
<pre><code>d = (
 df2.assign(Months=df2['Months'].str.split(', '))
    .explode('Months').astype(int)
    .set_index('Months')['Normalized month'].to_dict()
)
# {3: 4, 4: 4, 5: 4, 6: 8, 7: 8, 8: 8, 9: 8, 1: 12, 2: 12, 10: 12, 11: 12, 12: 12}
</code></pre>
<p>Then <code>map</code> the values:</p>
<pre><code>df1['month'] = df1['month'].map(d)
</code></pre>
<p>output:</p>
<pre><code>   index        date   month
0       0  2019-12-1      12
1       1  2020-03-1       4
2       2  2020-07-1       8
3       3  2021-02-1      12
4       4  2021-09-1       8`
</code></pre>",0
866,71309350,Pandas group by selected dates,"<p>I have a dataframe that is very similar to this dataframe:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">index</th>
<th style=""text-align: center;"">date</th>
<th style=""text-align: center;"">month</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">0</td>
<td style=""text-align: center;"">2019-12-1</td>
<td style=""text-align: center;"">12</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">2020-03-1</td>
<td style=""text-align: center;"">3</td>
</tr>
<tr>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">2020-07-1</td>
<td style=""text-align: center;"">7</td>
</tr>
<tr>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">2021-02-1</td>
<td style=""text-align: center;"">2</td>
</tr>
<tr>
<td style=""text-align: center;"">4</td>
<td style=""text-align: center;"">2021-09-1</td>
<td style=""text-align: center;"">9</td>
</tr>
</tbody>
</table>
</div>
<p>And i want to combine all dates that are closest to a set of months. The months need to be normalized like this:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">Months</th>
<th style=""text-align: center;"">Normalized month</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">3, 4, 5</td>
<td style=""text-align: center;"">4</td>
</tr>
<tr>
<td style=""text-align: center;"">6, 7, 8, 9</td>
<td style=""text-align: center;"">8</td>
</tr>
<tr>
<td style=""text-align: center;"">1, 2, 10, 11, 12</td>
<td style=""text-align: center;"">12</td>
</tr>
</tbody>
</table>
</div>
<p>So the output will be:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">index</th>
<th style=""text-align: center;"">date</th>
<th style=""text-align: center;"">month</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">0</td>
<td style=""text-align: center;"">2019-12-1</td>
<td style=""text-align: center;"">12</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">2020-04-1</td>
<td style=""text-align: center;"">4</td>
</tr>
<tr>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">2020-08-1</td>
<td style=""text-align: center;"">8</td>
</tr>
<tr>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">2020-12-1</td>
<td style=""text-align: center;"">12</td>
</tr>
<tr>
<td style=""text-align: center;"">4</td>
<td style=""text-align: center;"">2021-08-1</td>
<td style=""text-align: center;"">8</td>
</tr>
</tbody>
</table>
</div>",python|pandas|dataframe|date|normalize,"<p>you can try creating a dictionary of months where:</p>
<p><code>norm_month_dict = {3: 4, 4: 4, 5: 4, 6: 8, 7: 8, 8: 8, 9: 8, 1: 12, 2: 12, 10: 12, 11: 12, 12: 12}</code></p>
<p>then use this dictionary to map month values to their respective normalized month values.</p>
<p><code>df['normalized_months'] = df.months.map(norm_month_dict)</code></p>",1
867,71309350,Pandas group by selected dates,"<p>I have a dataframe that is very similar to this dataframe:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">index</th>
<th style=""text-align: center;"">date</th>
<th style=""text-align: center;"">month</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">0</td>
<td style=""text-align: center;"">2019-12-1</td>
<td style=""text-align: center;"">12</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">2020-03-1</td>
<td style=""text-align: center;"">3</td>
</tr>
<tr>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">2020-07-1</td>
<td style=""text-align: center;"">7</td>
</tr>
<tr>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">2021-02-1</td>
<td style=""text-align: center;"">2</td>
</tr>
<tr>
<td style=""text-align: center;"">4</td>
<td style=""text-align: center;"">2021-09-1</td>
<td style=""text-align: center;"">9</td>
</tr>
</tbody>
</table>
</div>
<p>And i want to combine all dates that are closest to a set of months. The months need to be normalized like this:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">Months</th>
<th style=""text-align: center;"">Normalized month</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">3, 4, 5</td>
<td style=""text-align: center;"">4</td>
</tr>
<tr>
<td style=""text-align: center;"">6, 7, 8, 9</td>
<td style=""text-align: center;"">8</td>
</tr>
<tr>
<td style=""text-align: center;"">1, 2, 10, 11, 12</td>
<td style=""text-align: center;"">12</td>
</tr>
</tbody>
</table>
</div>
<p>So the output will be:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th style=""text-align: center;"">index</th>
<th style=""text-align: center;"">date</th>
<th style=""text-align: center;"">month</th>
</tr>
</thead>
<tbody>
<tr>
<td style=""text-align: center;"">0</td>
<td style=""text-align: center;"">2019-12-1</td>
<td style=""text-align: center;"">12</td>
</tr>
<tr>
<td style=""text-align: center;"">1</td>
<td style=""text-align: center;"">2020-04-1</td>
<td style=""text-align: center;"">4</td>
</tr>
<tr>
<td style=""text-align: center;"">2</td>
<td style=""text-align: center;"">2020-08-1</td>
<td style=""text-align: center;"">8</td>
</tr>
<tr>
<td style=""text-align: center;"">3</td>
<td style=""text-align: center;"">2020-12-1</td>
<td style=""text-align: center;"">12</td>
</tr>
<tr>
<td style=""text-align: center;"">4</td>
<td style=""text-align: center;"">2021-08-1</td>
<td style=""text-align: center;"">8</td>
</tr>
</tbody>
</table>
</div>",python|pandas|dataframe|date|normalize,"<p>You can iterate through the DataFrame and use <strong>replace</strong> to change the dates.</p>
<pre><code>import pandas as pd 

df = pd.DataFrame(data={'date': [&quot;2019-12-1&quot;, &quot;2020-03-1&quot;, &quot;2020-07-1&quot;, &quot;2021-02-1&quot;, &quot;2021-09-1&quot;], 
                        'month': [12,3,7,2,9]})
for index, row in df.iterrows():
    if (row['month'] in [3,4,5]):
        df['month'][index] = 4
        df[&quot;date&quot;][index]  = df[&quot;date&quot;][0].replace(df[&quot;date&quot;][0][5:7],&quot;04&quot;)
    elif (row['month'] in [6,7,8,9]):
        df['month'][index] = 8
        df[&quot;date&quot;][index]  = df[&quot;date&quot;][0].replace(df[&quot;date&quot;][0][5:7],&quot;08&quot;)
    else:
        df['month'][index] = 12
        df[&quot;date&quot;][index]  = df[&quot;date&quot;][0].replace(df[&quot;date&quot;][0][5:7],&quot;12&quot;)
    
</code></pre>",2
868,71210928,Robot Framework Language Server. Please update the related `robot.language-server` configurations. error,"<p>It was not possible to start the Robot Framework Language Server. Please update the related <code>robot.language-server</code> configurations.</p>
<p>I am unable to execute any robot tests. I am just starting with the setup in MS Visual Studio Code and downloaded the python and robot framework language server extensions.</p>
<p>OUTPUT : Getting language server Python executable.
Waiting for RobotFramework (python) Language Server to finish activating...
Starting RobotFramework Language Server with args: C:\Users\a291067\AppData\Local\Programs\Python\Python37,-u,c:\Users\a291067.vscode\extensions\robocorp.robotframework-lsp-0.40.1\src\robotframework_ls_<em>main</em>_.py,-v
[Error - 19:06:55] Starting client failed
Error: Launching server using command C:\Users\a291067\AppData\Local\Programs\Python\Python37 with args: -u,c:\Users\a291067.vscode\extensions\robocorp.robotframework-lsp-0.40.1\src\robotframework_ls_<em>main</em>_.py,-v failed.
at serverOptions (c:\Users\a291067.vscode\extensions\robocorp.robotframework-lsp-0.40.1\vscode-client\out\extension.js:279:19)
at processTicksAndRejections (internal/process/task_queues.js:93:5)
It was not possible to start the Robot Framework Language Server. Please update the related <code>robot.language-server</code> configurations.
Launching server using command C:\Users\a291067\AppData\Local\Programs\Python\Python37 with args: -u,c:\Users\a291067.vscode\extensions\robocorp.robotframework-lsp-0.40.1\src\robotframework_ls_<em>main</em>_.py,-v failed.
Error: Launching server using command C:\Users\a291067\AppData\Local\Programs\Python\Python37 with args: -u,c:\Users\a291067.vscode\extensions\robocorp.robotframework-lsp-0.40.1\src\robotframework_ls_<em>main</em>_.py,-v failed.
at serverOptions (c:\Users\a291067.vscode\extensions\robocorp.robotframework-lsp-0.40.1\vscode-client\out\extension.js:279:19)
at processTicksAndRejections (internal/process/task_queues.js:93:5)
[1]: <a href=""https://i.stack.imgur.com/B2OCn.png"" rel=""nofollow noreferrer"">https://i.stack.imgur.com/B2OCn.png</a></p>",python|visual-studio-code|automated-tests|robotframework,"<p>Have a look at detailed config setup on this: <a href=""https://github.com/robocorp/robotframework-lsp/blob/master/robotframework-ls/docs/config.md"" rel=""nofollow noreferrer"">https://github.com/robocorp/robotframework-lsp/blob/master/robotframework-ls/docs/config.md</a></p>",0
869,71247128,read text as comment instead of string,"<p>i got some text file, the format looks like this:</p>
<pre><code>{&quot;MessageType&quot;:&quot;33 (SM data)&quot;,&quot;REG&quot;:&quot;BUL&quot;,&quot;TS&quot;:&quot;2022-02-24T11:02:00&quot;,&quot;M&quot;:false,&quot;LP&quot;:3,&quot;CT&quot;:119,&quot;SM&quot;:[{&quot;LM&quot;:602,&quot;SA/LK&quot;:67,&quot;RT&quot;:&quot;Strategic Approach Record&quot;,&quot;SG&quot;:&quot;1&quot;,&quot;PT&quot;:52,&quot;Lanes&quot;:[{&quot;L&quot;:1,&quot;MF&quot;:15},{&quot;L&quot;:2,&quot;MF&quot;:19}]},{&quot;LM&quot;:602,&quot;SA/LK&quot;:68,&quot;RT&quot;:&quot;Strategic Approach Record&quot;,&quot;SG&quot;:&quot;2&quot;,&quot;PT&quot;:28,&quot;Lanes&quot;:[{&quot;L&quot;:1,&quot;MF&quot;:7},{&quot;L&quot;:2,&quot;MF&quot;:6}]},{&quot;LM&quot;:602,&quot;SA/LK&quot;:69,&quot;RT&quot;:&quot;Strategic Approach Record&quot;,&quot;SG&quot;:&quot;3&quot;,&quot;PT&quot;:17,&quot;Lanes&quot;:[{&quot;L&quot;:1,&quot;MF&quot;:2}]},{&quot;LM&quot;:602,&quot;SA/LK&quot;:70,&quot;RT&quot;:&quot;Strategic Approach Record&quot;,&quot;SG&quot;:&quot;4&quot;,&quot;PT&quot;:70,&quot;Lanes&quot;:[{&quot;L&quot;:1,&quot;MF&quot;:12},{&quot;L&quot;:2,&quot;MF&quot;:4}]},{&quot;LM&quot;:602,&quot;SA/LK&quot;:3,&quot;RT&quot;:&quot;Link Record&quot;,&quot;SG&quot;:&quot;1&quot;,&quot;PT&quot;:52,&quot;Lanes&quot;:[{&quot;L&quot;:1,&quot;MF&quot;:15},{&quot;L&quot;:2,&quot;MF&quot;:19}]},{&quot;LM&quot;:602,&quot;SA/LK&quot;:4,&quot;RT&quot;:&quot;Link Record&quot;,&quot;SG&quot;:&quot;4&quot;,&quot;PT&quot;:70,&quot;Lanes&quot;:[{&quot;L&quot;:1,&quot;MF&quot;:12},{&quot;L&quot;:2,&quot;MF&quot;:4}]}],&quot;SP&quot;:[{&quot;A&quot;:&quot;(Stretch)33%&quot;,&quot;B&quot;:&quot;20%&quot;,&quot;C&quot;:&quot;27%&quot;,&quot;D&quot;:&quot;20%&quot;}]}
</code></pre>
<p>is there any way I can split the text into something looks like this:</p>
<pre><code>[{'LM': 602,
  'SA/LK': 67,
  'RT': 'Strategic Approach Record',
  'SG': '1',
  'PT': 52,
  'Lanes': [{'L': 1, 'MF': 15}, {'L': 2, 'MF': 19}]},
 {'LM': 602,
  'SA/LK': 68,
  'RT': 'Strategic Approach Record',
  'SG': '2',
  'PT': 28,
  'Lanes': [{'L': 1, 'MF': 7}, {'L': 2, 'MF': 6}]},
 {'LM': 602,
  'SA/LK': 69,
  'RT': 'Strategic Approach Record',
  'SG': '3',
  'PT': 17,
  'Lanes': [{'L': 1, 'MF': 2}]},
 {'LM': 602,
  'SA/LK': 70,
  'RT': 'Strategic Approach Record',
  'SG': '4',
  'PT': 70,
  'Lanes': [{'L': 1, 'MF': 12}, {'L': 2, 'MF': 4}]},
 {'LM': 602,
  'SA/LK': 3,
  'RT': 'Link Record',
  'SG': '1',
  'PT': 52,
  'Lanes': [{'L': 1, 'MF': 15}, {'L': 2, 'MF': 19}]},
 {'LM': 602,
  'SA/LK': 4,
  'RT': 'Link Record',
  'SG': '4',
  'PT': 70,
  'Lanes': [{'L': 1, 'MF': 12}, {'L': 2, 'MF': 4}]}]
</code></pre>
<p>so that I can easily convert it into list or dict...</p>
<p>I tried use string.split(','), but doesn't really work - as it will split every ','</p>",python|string|list|dictionary|format,"<p>Looks like JSON. Use the built-in <code>json</code> library to parse into a Python object:</p>
<pre class=""lang-py prettyprint-override""><code>In [1]: import json

In [2]: data = '...'  # string provided by OP, read from file

In [3]: json.loads(data)
Out[3]:
{'MessageType': '33 (SM data)',
 'REG': 'BUL',
 'TS': '2022-02-24T11:02:00',
 'M': False,
 'LP': 3,
 'CT': 119,
 'SM': [{'LM': 602,
   'SA/LK': 67,
   'RT': 'Strategic Approach Record',
   'SG': '1',
   'PT': 52,
   'Lanes': [{'L': 1, 'MF': 15}, {'L': 2, 'MF': 19}]},
  {'LM': 602,
   'SA/LK': 68,
   'RT': 'Strategic Approach Record',
   'SG': '2',
   'PT': 28,
   'Lanes': [{'L': 1, 'MF': 7}, {'L': 2, 'MF': 6}]},
  {'LM': 602,
   'SA/LK': 69,
   'RT': 'Strategic Approach Record',
   'SG': '3',
   'PT': 17,
   'Lanes': [{'L': 1, 'MF': 2}]},
  {'LM': 602,
   'SA/LK': 70,
   'RT': 'Strategic Approach Record',
   'SG': '4',
   'PT': 70,
   'Lanes': [{'L': 1, 'MF': 12}, {'L': 2, 'MF': 4}]},
  {'LM': 602,
   'SA/LK': 3,
   'RT': 'Link Record',
   'SG': '1',
   'PT': 52,
   'Lanes': [{'L': 1, 'MF': 15}, {'L': 2, 'MF': 19}]},
  {'LM': 602,
   'SA/LK': 4,
   'RT': 'Link Record',
   'SG': '4',
   'PT': 70,
   'Lanes': [{'L': 1, 'MF': 12}, {'L': 2, 'MF': 4}]}],
 'SP': [{'A': '(Stretch)33%', 'B': '20%', 'C': '27%', 'D': '20%'}]}
</code></pre>
<p>This is a dictionary now, so if you want just the <code>SM</code> data array:</p>
<pre class=""lang-py prettyprint-override""><code>In [3]: json.loads(data)['SM']
Out[3]:
[{'LM': 602,
  'SA/LK': 67,
  'RT': 'Strategic Approach Record',
  'SG': '1',
  'PT': 52,
  'Lanes': [{'L': 1, 'MF': 15}, {'L': 2, 'MF': 19}]},
 {'LM': 602,
  'SA/LK': 68,
  'RT': 'Strategic Approach Record',
  'SG': '2',
  'PT': 28,
  'Lanes': [{'L': 1, 'MF': 7}, {'L': 2, 'MF': 6}]},
 {'LM': 602,
  'SA/LK': 69,
  'RT': 'Strategic Approach Record',
  'SG': '3',
  'PT': 17,
  'Lanes': [{'L': 1, 'MF': 2}]},
 {'LM': 602,
  'SA/LK': 70,
  'RT': 'Strategic Approach Record',
  'SG': '4',
  'PT': 70,
  'Lanes': [{'L': 1, 'MF': 12}, {'L': 2, 'MF': 4}]}, {'LM': 602,
  'SA/LK': 3,
  'RT': 'Link Record',
  'SG': '1',
  'PT': 52,
  'Lanes': [{'L': 1, 'MF': 15}, {'L': 2, 'MF': 19}]},
 {'LM': 602,
  'SA/LK': 4,
  'RT': 'Link Record',
  'SG': '4',
  'PT': 70,
  'Lanes': [{'L': 1, 'MF': 12}, {'L': 2, 'MF': 4}]}]
</code></pre>",1
870,71061763,Convert datetime.time column in pandas to total minutes,"<p>I have a <code>datetime.time</code> Series in Pandas and I want to convert it to an int series which contains the <code>total minutes</code>.
Anyway I could do that?</p>
<p>I have tried converting it to <code>timedelta</code> using</p>
<pre class=""lang-py prettyprint-override""><code>train['time_order'] = pd.to_timedelta(train['time_order']).dt.total_seconds()
train['time_order'] = train['time_order']%60
</code></pre>
<p>but I get the error</p>
<p><code>Invalid type for timedelta scalar: &lt;class 'datetime.time'&gt;</code>
since the format of the column is in <code>datetime.time</code></p>",python|pandas|datetime|series|timedelta,"<p>Convert column to strings first:</p>
<pre><code>train['time_order'] = pd.to_timedelta(train['time_order'].astype(str)).dt.total_seconds()%60
</code></pre>",0
871,71121996,Binding a method to class instance on fly in Python,"<pre class=""lang-py prettyprint-override""><code>class mc:
    def show(self):
        self.func()


a = mc()
def myfunc(self):
    print('instance function')
a.func = myfunc
a.show()
</code></pre>
<p>The above does not work: <code>TypeError: myfunc() missing 1 required positional argument: 'self'</code>.</p>
<p>Why is the instance name not automatically inserted by Python, considering that I'm using dot notation?</p>",python|function|class|methods|instance,"<p>It can work like this, since the function isn't really an instance method</p>
<pre><code>class mc:
    def show(self):
         self.x = 1
         func(self)


a = mc()
def myfunc(self):
    print (self.x)
    print('instance function')
a.func = myfunc
a.show()
</code></pre>",1
872,71121996,Binding a method to class instance on fly in Python,"<pre class=""lang-py prettyprint-override""><code>class mc:
    def show(self):
        self.func()


a = mc()
def myfunc(self):
    print('instance function')
a.func = myfunc
a.show()
</code></pre>
<p>The above does not work: <code>TypeError: myfunc() missing 1 required positional argument: 'self'</code>.</p>
<p>Why is the instance name not automatically inserted by Python, considering that I'm using dot notation?</p>",python|function|class|methods|instance,"<p>You can dynamically add a method to a class using <a href=""https://en.wikipedia.org/wiki/Monkey_patch"" rel=""nofollow noreferrer"">monkey patching</a>.</p>
<pre class=""lang-py prettyprint-override""><code>class mc:
    def show(self):
        self.func()

a = mc()
def myfunc(self):
    print('instance function')
mc.func = myfunc
a.show()
</code></pre>",1
873,71069793,calculate arithematic mean of rows above,"<p>I have a dataset that looks like this:</p>
<pre><code>Value         Type       mean
-1.975767     Weather   
-0.540979     Fruits
-2.359127     Fruits
-2.815604     Corona
-0.929755     Weather
</code></pre>
<p>I want to iterate through each row and calculate a mean value for each row above (only if the <strong>Type</strong> matches). I want to put this value in the <strong>mean</strong> column. Mean is calculated by:</p>
<p><strong>sum of all values / number of observations</strong></p>
<p>Here, number of observations will be the number of times a Type has occurred so far.</p>
<p>For example, in the first row, there's no &quot;weather&quot; row above so for weather n = 1. So the mean would be -1.975767 / 1 = -1.975767.</p>
<p>In the second row, there's no FRUITS row above it, so the mean will just be -0.540979/1 = -0.540979.</p>
<p>However, in the third row, when we scan all previous rows, we see that FRUITS has already occurred before this and hence, n = 2 for Fruits. So we should get the last's FRUIT's value and calculate a new mean. So here, the mean will be -0.540979 + (-2.359127) divided by 2.</p>
<pre><code>Value         Type       mean
-1.975767     Weather   -1.975767
-0.540979     Fruits    -0.540979
-2.359127     Fruits    (-0.540979 -2.359127)  / 2
-2.815604     Corona    -2.815604
-0.929755     Weather   (-1.975767 -0.929755) / 2
</code></pre>
<p>What would be an efficient way to do this?</p>
<p>I see two possible sols:</p>
<ol>
<li>We somehow store the value of N for each type and then just use the last calculated mean for a particular type, update the N by incrementing it with 1 and then calculate the new mean for a particular row.</li>
<li>If storing the N value is not convinient, then every time we scan for the occurrence of a type, we check its corresponding value and calculate the mean of all values again.</li>
</ol>",python|pandas|dataframe|numpy|mean,"<p>Try using <a href=""https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.groupby.html"" rel=""nofollow noreferrer""><code>groupby</code></a> + <a href=""https://pandas.pydata.org/docs/reference/api/pandas.Series.expanding.html"" rel=""nofollow noreferrer""><code>expanding</code></a> + <a href=""https://pandas.pydata.org/docs/reference/api/pandas.core.window.expanding.Expanding.mean.html"" rel=""nofollow noreferrer""><code>mean</code></a>:</p>
<pre><code>df['mean'] = df.groupby('Type')['Value'].expanding().mean().droplevel(0)
</code></pre>
<p>Output:</p>
<pre><code>&gt;&gt;&gt; df
      Value     Type      mean
0 -1.975767  Weather -1.975767
1 -0.540979   Fruits -0.540979
2 -2.359127   Fruits -1.450053
3 -2.815604   Corona -2.815604
4 -0.929755  Weather -1.452761
</code></pre>",3
874,71151864,Python Django load data from text document,"<p>I am using python and django to make a website that should be able to load data from a text document and display it. Until now I have converted the data from txt format to html and loaded it to a div like so :</p>
<pre><code>&lt;div id='data'&gt;
{% include &quot;data.html&quot; %}
&lt;/div&gt;
</code></pre>
<p>Unfortunately when I hit refresh after I have modified data.html there is no update. I would like to be able to load the html file on every refresh</p>",python|html|django,"<p>Render out refreshed data from view via context is an easier way I think,
But if you have to use include in template, you can try to output a template name from your view, like {'data_template': 'data.html'} via context, then {% include data_template %} inside template.</p>",1
875,71296506,"how do i Solve ""ModuleNotFoundError: No module named 'MySQLdb'"" for ""import MySQLdb"" in Pycharm for Windows","<p>i have tried
pip3 install MySQLdb
pip3 install mysqlclient</p>
<p>i am working on a flask software that makes use of a database</p>
<p>this database is to receive the results of the output and record</p>
<p>immediate help on a step by step basis would be appreciated</p>",python|mysql|database,"<p>You need to install it inside pycharm.</p>
<ol>
<li>Open File &gt; Settings &gt; Project from the PyCharm menu.</li>
<li>Select your current project.
Click the Python Interpreter tab within your project tab.</li>
<li>Click the small + symbol to add a new library to the project.</li>
<li>Now type in the library to be installed, for example Pandas, and click Install Package.
5.Wait for the installation to terminate and close all popup windows.</li>
</ol>
<p>Now try and i hope it will solve your issue.</p>",0
876,71243567,FileNotFoundError: [Errno 2] No such file or directory boto3 aws,"<p>I am using boto3 to download a file and then copy in <strong>tmp</strong> file on lambda funtions . I am using this function to download a file</p>
<pre><code>S3_BUCKET_NAME = 'dev-bucket'
key = 'uploads/random.xlsx'
s3.download_file(S3_BUCKET_NAME, key, 'tmp/hello2.xlsx')
</code></pre>
<p>but I am getting this error</p>
<p><strong>FileNotFoundError: [Errno 2] No such file or directory: 'tmp/hello2.xlsx.a56DfB10'</strong></p>
<p>am I doing something wrong  here ?</p>",python|amazon-web-services|aws-lambda|boto3,"<p>Change <code>tmp/hello2.xlsx</code> into: <code>/tmp/hello2.xlsx</code></p>
<p>Without the leading slash, it will go to a <em>relative path</em>.</p>
<p>By including the leading slash, it will go to an <em>absolute path</em>, which is what you need.</p>",1
877,66423966,"Smallest/largest numbers program, input must stop once negative number is inserted","<p>The purpose of this program is to find the smallest and largest values in a list. The moment the user inputs a negative number, the program should stop. Here is the code I have written so far:</p>
<pre><code>user_inputs = []
number = int(input())

for i in range(number):
    value = int(input())
    if i &gt;= 0:
        user_inputs.append(value)
    else:
        break

print(min(user_inputs))
print(max(user_inputs))
</code></pre>
<p>As you can see, I am new to programming and still struggling to find the logic behind loops. Surely, this code is ridden with mistakes and any helpful improvements is much appreciated. Thanks in advance.</p>",python|input|numbers,"<p>You are checking</p>
<p><em><strong>i</strong></em>
<br/></p>
<p>when you should be checking</p>
<p><em>value</em></p>",0
878,66423966,"Smallest/largest numbers program, input must stop once negative number is inserted","<p>The purpose of this program is to find the smallest and largest values in a list. The moment the user inputs a negative number, the program should stop. Here is the code I have written so far:</p>
<pre><code>user_inputs = []
number = int(input())

for i in range(number):
    value = int(input())
    if i &gt;= 0:
        user_inputs.append(value)
    else:
        break

print(min(user_inputs))
print(max(user_inputs))
</code></pre>
<p>As you can see, I am new to programming and still struggling to find the logic behind loops. Surely, this code is ridden with mistakes and any helpful improvements is much appreciated. Thanks in advance.</p>",python|input|numbers,"<p>you have to compare value
i.e. if value &gt;= 0
you are using i which is the number of iteration</p>",0
879,66423966,"Smallest/largest numbers program, input must stop once negative number is inserted","<p>The purpose of this program is to find the smallest and largest values in a list. The moment the user inputs a negative number, the program should stop. Here is the code I have written so far:</p>
<pre><code>user_inputs = []
number = int(input())

for i in range(number):
    value = int(input())
    if i &gt;= 0:
        user_inputs.append(value)
    else:
        break

print(min(user_inputs))
print(max(user_inputs))
</code></pre>
<p>As you can see, I am new to programming and still struggling to find the logic behind loops. Surely, this code is ridden with mistakes and any helpful improvements is much appreciated. Thanks in advance.</p>",python|input|numbers,"<p>Brother one mistake that you have done is that you are using</p>
<pre><code>for i in range(number):
</code></pre>
<p>basically by doing this you are telling compiler that repeat the code in for loop for     &quot;number&quot; of times and obviously number would change every time user inputs a new number resulting in error
The right way to make the code do what you want is  :</p>
<pre><code>user_inputs = []
while True:
   number = int(input('Enter a positive number : '))
   if number &gt;= 0 :
      user_inputs.append(number)
   else:
      print(user_inputs)
      print('Smallest number in list is : ',min(user_inputs))
      print('Largest number in list is : ',max(user_inputs))
      break
</code></pre>
<p>Here while loop will run continuously until a negative number has been input, so when a negative number is input the while loop woulb break .</p>",1
880,66150288,Construct new pandas Dataframe with multi level index,"<p>I'm trying to create a new Dataframe with a multi index.  I load a list with the dates for the first level and have a list of patients for the second level.  I can't grasp the method for constructing the proper Dataframe structure...  Basic code.</p>
<pre><code>factor_index = pd.date_range(start=startDate, end=endDate)
factor_index.name = 'Date'
factorData = pd.DataFrame(index=factor_index)
</code></pre>
<p>this creates the frame with the dates as the primary index...  I need to set a second index for each of the dates that lists the patients under each date.  I have a list of patients.  It seems like there's a one-liner for this but I can't seem to find it in my searching.</p>",python|pandas|dataframe,"<p>Use <a href=""http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.MultiIndex.from_product.html"" rel=""nofollow noreferrer""><code>MultiIndex.from_product</code></a>:</p>
<pre><code>list_of_patient = ['a','b','c']
factor_index = pd.date_range(start=startDate, end=endDate)
mux = pd.MultiIndex.from_product([factor_index, list_of_patient], names=('Date','Patient'))
factorData = pd.DataFrame(index=mux)
</code></pre>",1
881,66129418,how can I save result for every loop in neural network,"<p>suppose this is my neural network training and i made a loop for choose number of neuron in each hidden layer.
how can I save each result for every loop and print all the result for all loop in the end of (i) loop:</p>
<pre><code>import tensorflow as tf

    import numpy as np
    from tensorflow import keras
    for i in range(1,9):
        model=tf.keras.Sequential([keras.layers.Dense(units =i, input_shape=[1]),
                                   (keras.layers.Dense(units =i, input_shape=[1)])
        model.compile(optimizer='sgd',loss='mean_squared_error')
        xs=np.array([2,3,4], dtype=float)
        ys=np.array([100,200,300],dtype=float)
        model.fit(xs,ys,epochs=4000)
        result= (model.predict([1]))
        print(result)
</code></pre>",python|tensorflow|keras|neural-network,"<p>you can use the callback function called <code>ModelCheckpoint</code></p>
<pre><code>import tensorflow as tf
from tf.keras.callbacks import ModelCheckpoint
EPOCHS = 10
checkpoint_filepath = '/tmp/checkpoint'
model_checkpoint_callback = ModelCheckpoint(
    filepath=checkpoint_filepath,
    save_weights_only=True,
    monitor='val_acc',
    mode='max',
    save_best_only=True)
# Model weights are saved at the end of every epoch, if it's the best seen
# so far.
model.fit(epochs=EPOCHS, callbacks=[model_checkpoint_callback])
# The model weights (that are considered the best) are loaded into the model.
model.load_weights(checkpoint_filepath)
</code></pre>",0
882,66129418,how can I save result for every loop in neural network,"<p>suppose this is my neural network training and i made a loop for choose number of neuron in each hidden layer.
how can I save each result for every loop and print all the result for all loop in the end of (i) loop:</p>
<pre><code>import tensorflow as tf

    import numpy as np
    from tensorflow import keras
    for i in range(1,9):
        model=tf.keras.Sequential([keras.layers.Dense(units =i, input_shape=[1]),
                                   (keras.layers.Dense(units =i, input_shape=[1)])
        model.compile(optimizer='sgd',loss='mean_squared_error')
        xs=np.array([2,3,4], dtype=float)
        ys=np.array([100,200,300],dtype=float)
        model.fit(xs,ys,epochs=4000)
        result= (model.predict([1]))
        print(result)
</code></pre>",python|tensorflow|keras|neural-network,"<p>Typically, we won't use <code>print</code> to print the log.
We need to use the logger during training.</p>
<p><a href=""https://www.tensorflow.org/api_docs/python/tf/compat/v1/logging"" rel=""nofollow noreferrer"">https://www.tensorflow.org/api_docs/python/tf/compat/v1/logging</a></p>
<p>To store the log information, please refer to this</p>
<p><a href=""https://stackoverflow.com/questions/40559667/how-to-redirect-tensorflow-logging-to-a-file"">How to redirect TensorFlow logging to a file?</a></p>",-1
883,66432660,Aggregate the rows of python Spark DataFrame by 10 min intervals,"<p><strong>Can I achieve this in pySpark python? By optimizing a little or not. please I am blocked</strong></p>
<p><strong>Initial csv</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Date</th>
<th>Time</th>
<th>idSensor1</th>
<th>valueSensor1</th>
<th>idSensor2</th>
<th>valueSensor2</th>
</tr>
</thead>
<tbody>
<tr>
<td>20210113</td>
<td>10:01:01.000000</td>
<td>171</td>
<td>5</td>
<td>173</td>
<td>8</td>
</tr>
<tr>
<td>20210113</td>
<td>10:05:05.111111</td>
<td>171</td>
<td>6</td>
<td>172</td>
<td>8</td>
</tr>
<tr>
<td>20210113</td>
<td>10:08:08.222222</td>
<td>171</td>
<td>4</td>
<td>172</td>
<td>8</td>
</tr>
<tr>
<td>20210113</td>
<td>10:10:10.333333</td>
<td>171</td>
<td>6</td>
<td>172</td>
<td>8</td>
</tr>
<tr>
<td>20210113</td>
<td>10:15:15.444444</td>
<td>171</td>
<td>8</td>
<td>172</td>
<td>10</td>
</tr>
<tr>
<td>20210113</td>
<td>10:18:18.555555</td>
<td>171</td>
<td>9</td>
<td>172</td>
<td>10</td>
</tr>
</tbody>
</table>
</div>
<p><strong>we aggregate the values ​​of the last 10 minutes   of the column valueSensor1 and valueSensor2 to separate</strong></p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Date</th>
<th>Time</th>
<th>idSensor1</th>
<th>valueSensor1</th>
<th>idSensor2</th>
<th>valueSensor2</th>
<th>intervalsValuesSensor1</th>
<th>intervalsValuesSensor</th>
</tr>
</thead>
<tbody>
<tr>
<td>20210113</td>
<td>10:01:01.000000</td>
<td>171</td>
<td>5</td>
<td>173</td>
<td>8</td>
<td>[]</td>
<td>[]</td>
</tr>
<tr>
<td>20210113</td>
<td>10:05:05.111111</td>
<td>171</td>
<td>6</td>
<td>172</td>
<td>8</td>
<td>[5]</td>
<td>[8]</td>
</tr>
<tr>
<td>20210113</td>
<td>10:08:08.222222</td>
<td>171</td>
<td>4</td>
<td>172</td>
<td>8</td>
<td>[5,6]</td>
<td>[8,8]</td>
</tr>
<tr>
<td>20210113</td>
<td>10:10:10.333333</td>
<td>171</td>
<td>6</td>
<td>172</td>
<td>8</td>
<td>[5,6,4]</td>
<td>[8,8,8]</td>
</tr>
<tr>
<td>20210113</td>
<td>10:15:15.444444</td>
<td>171</td>
<td>8</td>
<td>172</td>
<td>10</td>
<td>[6,4,6]</td>
<td>[8,8,8]</td>
</tr>
<tr>
<td>20210113</td>
<td>10:18:18.555555</td>
<td>171</td>
<td>9</td>
<td>172</td>
<td>10</td>
<td>[4,6,8]</td>
<td>[8,8,10]</td>
</tr>
</tbody>
</table>
</div>
<p>**we aggregate the values ​​of the last 10 minutes  SUM of the column valueSensor1 and valueSensor2
**</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Date</th>
<th>Time</th>
<th>idSensor1</th>
<th>valueSensor1</th>
<th>idSensor2</th>
<th>valueSensor2</th>
<th>intervalsSumAll</th>
</tr>
</thead>
<tbody>
<tr>
<td>20210113</td>
<td>10:01:01.000000</td>
<td>171</td>
<td>5</td>
<td>173</td>
<td>8</td>
<td>[]</td>
</tr>
<tr>
<td>20210113</td>
<td>10:05:05.111111</td>
<td>171</td>
<td>6</td>
<td>172</td>
<td>8</td>
<td>[13]</td>
</tr>
<tr>
<td>20210113</td>
<td>10:08:08.222222</td>
<td>171</td>
<td>4</td>
<td>172</td>
<td>8</td>
<td>[13,14]</td>
</tr>
<tr>
<td>20210113</td>
<td>10:10:10.333333</td>
<td>171</td>
<td>6</td>
<td>172</td>
<td>8</td>
<td>[13,14,12]</td>
</tr>
<tr>
<td>20210113</td>
<td>10:15:15.444444</td>
<td>171</td>
<td>8</td>
<td>172</td>
<td>10</td>
<td>[14,12,14]</td>
</tr>
<tr>
<td>20210113</td>
<td>10:18:18.555555</td>
<td>171</td>
<td>9</td>
<td>172</td>
<td>10</td>
<td>[12,14,18]</td>
</tr>
</tbody>
</table>
</div>",python|apache-spark|pyspark|apache-spark-sql,"<p>You can use <code>collect_list</code> over a window ordered by the unix timestamp, ranging between 600 seconds (10 minutes) before the current row to 1 second before the current row:</p>
<pre><code>df2 = df.withColumn(
    'intervalsValuesSensor1', 
    F.collect_list('valueSensor1').over(
        Window.partitionBy('idSensor1')
              .orderBy(F.unix_timestamp(F.concat('Date', 'Time'), 'yyyyMMddHH:mm:ss.SSSSSS'))
              .rangeBetween(-600, -1)
    )
)

df2.show()
+--------+---------------+---------+------------+---------+------------+----------------------+
|    Date|           Time|idSensor1|valueSensor1|idSensor2|valueSensor2|intervalsValuesSensor1|
+--------+---------------+---------+------------+---------+------------+----------------------+
|20210113|10:01:01.000000|      171|           5|      173|           8|                    []|
|20210113|10:05:05.111111|      171|           6|      172|           8|                   [5]|
|20210113|10:08:08.222222|      171|           4|      172|           8|                [5, 6]|
|20210113|10:10:10.333333|      171|           6|      172|           8|             [5, 6, 4]|
|20210113|10:15:15.444444|      171|           8|      172|          10|                [4, 6]|
|20210113|10:18:18.555555|      171|           9|      172|          10|                [6, 8]|
+--------+---------------+---------+------------+---------+------------+----------------------+
</code></pre>
<p>And similarly you can do this for <code>Sensor2</code>. For the sum, you can just do <code>F.collect_list(F.col('valueSensor1') + F.col('valueSensor2'))</code></p>",0
884,66076106,How to create Python Stub Files and where to put?,"<p>I have a compiled a Python extension.
The resulting binary <code>mylib.so</code> file can be imported in the Python script and works fine.</p>
<p>Now I am wondering how to write the interface stub file <code>mylib.pyi</code> such, that pylint and the Python language server used in VS Code can use it?</p>
<p>For now the native library is just in the root of my scripts.
When putting the <code>mylib.pyi</code> next to it pylint ignores it.</p>",python-3.x|pylint|python-extensions|pyi,"<p>I know this question is a year old but the answer might help the next person. I managed to do this by writing the following setup file:</p>
<pre class=""lang-py prettyprint-override""><code>from distutils.core import setup, Extension
extension = Extension(
    name = 'dummy',
    sources = ...,
    ...
)
    
setup(
    name = 'dummy',
    ext_modules = [extension],
    packages = ['dummy'],
    package_dir = {'dummy' : './stub'},
    package_data = {
        'dummy': ['__init__.pyi', 'py.typed']
    }
)
</code></pre>
<p>From what I understand, the <code>stub</code> directory is treated as a separate package and installed alongside the extension. I've only tested it with vscode but I believe all IDEs should be able to parse it. Full code can be found <a href=""https://github.com/hos-b/dummy-c-extension"" rel=""nofollow noreferrer"">here</a>.</p>",0
885,66281409,How to pass variable from FastAPI to other class,"<p>can someone help me with my case. I have a variable that must be pass to Class to set bool from this Class. But, in my case, I can do this to set the bool, but can't pass with a variable. In the other case, I can pass my variable, but can't set my bool from this Class. I'm using FastAPI as my API.</p>
<p>(1) Here is my code that can pass some variable but can't set the bool:</p>
<pre class=""lang-py prettyprint-override""><code>@app.get(&quot;/predict&quot;)
def predict(
    brand: str = Query(...),
):
    e = MyModelPrediction()
    e(brand)

    result_data = {'brand': brand}
    result = {
        'data': result_data
    }
    return result
</code></pre>
<p>(2) This is my code that can't pass some variable but can set the bool:</p>
<pre class=""lang-py prettyprint-override""><code>@app.get(&quot;/predict&quot;)
def predict(
    brand: str = Query(...),
    prediction=Depends(MyModelPrediction())
):
    result_data = {'brand': brand}
    result = {
        'data': result_data
    }
    return result
</code></pre>
<p>So, this is my class:</p>
<pre class=""lang-py prettyprint-override""><code>class MyModelPrediction(object):
    model_loaded: bool = False
    print(model_loaded)

    def __call__(self, brand):
        print(&quot;Brand :&quot;, brand)
        if not self.model_loaded:
            self._load_model()
        time.sleep(1)

    def _load_model(self):
        print(&quot;Load model...&quot;)
        time.sleep(5)
        self.model_loaded = True
</code></pre>
<p>I want to set <code>model_loaded</code> to <code>True</code>, but also pass the variable <code>brand</code> from function <code>predict</code>. If I use method (1), the bool still <code>False</code> and the variable can be pass, but if I use method (2), the bool can be <code>True</code> but the variable not passed.</p>",python|function|class|boolean|fastapi,"<p>I can't test but I would expect that you are using the same default object over and over in case 2. It's a fairly common gotcha in Python.</p>
<pre><code>@app.get(&quot;/predict&quot;)
def predict(
    brand: str = Query(...),
    prediction=Depends(MyModelPrediction())
):
</code></pre>
<p>The default value of any argument is only evaluated once, at load time, so this is exactly the same as:</p>
<pre><code>tmp1 = Query(...)
tmp2 = Depends(MyModelPrediction())

@app.get(&quot;/predict&quot;)
def predict(
    brand: str = tmp1,
    prediction = tmp2
):
</code></pre>
<p>These are functionally identical, but it's more obvious in the second version that every call of this function will use the same default objects unless a value is explicitly provided by the caller.</p>",0
886,66331986,using autosub on windows with python 39,"<p>I'm trying to use autosub as following</p>
<pre><code>open CMD as Administrator
cd to scripts folder (cd &lt;path&gt;\Python\Python39\Scripts&quot;)
run command autosub -S fr -D fr &quot;&lt;path&gt;\file.wav&quot;
</code></pre>
<p>and I'm getting this error</p>
<pre><code>ffmpeg: Executable not found on machine.
Traceback (most recent call last):
  File &quot;&lt;path&gt;\Python\Python39\Scripts\autosub-script.py&quot;, line 33, in &lt;module&gt;
    sys.exit(load_entry_point('autosub==0.4.0', 'console_scripts', 'autosub')())
  File &quot;&lt;path&gt;\python\python39\lib\site-packages\autosub\__init__.py&quot;, line 397, in main
    subtitle_file_path = generate_subtitles(
  File &quot;&lt;path&gt;\python\python39\lib\site-packages\autosub\__init__.py&quot;, line 245, in generate_subtitles
    audio_filename, audio_rate = extract_audio(source_path)
  File &quot;&lt;path&gt;\python\python39\lib\site-packages\autosub\__init__.py&quot;, line 185, in extract_audio
    raise Exception(&quot;Dependency not found: ffmpeg&quot;)
  Exception: Dependency not found: ffmpeg
</code></pre>
<p>I have the ffmpeg exe file under \Python\Python39 folder</p>
<p>I also tried to run it as following</p>
<pre><code>open CMD as Administrator
run command &quot;&lt;path&gt;\Python\Python39\python.exe&quot; &quot;&lt;path&gt;\Python\Python39\Scripts\autosub.exe&quot; -S fr -D fr &quot;&lt;path&gt;\file.wav&quot;
</code></pre>
<p>and got this error</p>
<pre><code>SyntaxError: Non-UTF-8 code starting with '\x90' in file &lt;path&gt;\Python\Python39\Scripts\autosub.exe on line 1, but no encoding declared; see http://python.org/dev/peps/pep-0263/ for details
</code></pre>
<p>What I'm doing wrong? what is the right way for using autosub?</p>
<ul>
<li>I have installed autosub using pip install git+https://github.com/agermanidis/autosub.git</li>
</ul>
<p>Thanks</p>",python|windows,"<h1>Just one line change:</h1>
<p>In <code>__init__.py</code>, line 183 (<em>line maybe change, but you can Ctrl+f this lines</em>):</p>
<pre><code># if not which(&quot;ffmpeg&quot;):   # change from this
if not which(&quot;ffmpeg.exe&quot;): # to this
</code></pre>",0
887,66331986,using autosub on windows with python 39,"<p>I'm trying to use autosub as following</p>
<pre><code>open CMD as Administrator
cd to scripts folder (cd &lt;path&gt;\Python\Python39\Scripts&quot;)
run command autosub -S fr -D fr &quot;&lt;path&gt;\file.wav&quot;
</code></pre>
<p>and I'm getting this error</p>
<pre><code>ffmpeg: Executable not found on machine.
Traceback (most recent call last):
  File &quot;&lt;path&gt;\Python\Python39\Scripts\autosub-script.py&quot;, line 33, in &lt;module&gt;
    sys.exit(load_entry_point('autosub==0.4.0', 'console_scripts', 'autosub')())
  File &quot;&lt;path&gt;\python\python39\lib\site-packages\autosub\__init__.py&quot;, line 397, in main
    subtitle_file_path = generate_subtitles(
  File &quot;&lt;path&gt;\python\python39\lib\site-packages\autosub\__init__.py&quot;, line 245, in generate_subtitles
    audio_filename, audio_rate = extract_audio(source_path)
  File &quot;&lt;path&gt;\python\python39\lib\site-packages\autosub\__init__.py&quot;, line 185, in extract_audio
    raise Exception(&quot;Dependency not found: ffmpeg&quot;)
  Exception: Dependency not found: ffmpeg
</code></pre>
<p>I have the ffmpeg exe file under \Python\Python39 folder</p>
<p>I also tried to run it as following</p>
<pre><code>open CMD as Administrator
run command &quot;&lt;path&gt;\Python\Python39\python.exe&quot; &quot;&lt;path&gt;\Python\Python39\Scripts\autosub.exe&quot; -S fr -D fr &quot;&lt;path&gt;\file.wav&quot;
</code></pre>
<p>and got this error</p>
<pre><code>SyntaxError: Non-UTF-8 code starting with '\x90' in file &lt;path&gt;\Python\Python39\Scripts\autosub.exe on line 1, but no encoding declared; see http://python.org/dev/peps/pep-0263/ for details
</code></pre>
<p>What I'm doing wrong? what is the right way for using autosub?</p>
<ul>
<li>I have installed autosub using pip install git+https://github.com/agermanidis/autosub.git</li>
</ul>
<p>Thanks</p>",python|windows,"<p>So my solution was</p>
<ul>
<li>remove those lines from \Python\Python39\Lib\site-packages\autosub_<em>init</em>_.py</li>
</ul>
<blockquote>
<pre><code>if not which(&quot;ffmpeg&quot;)
print(&quot;ffmpeg: Executable not found on machine.&quot;)
</code></pre>
</blockquote>
<ul>
<li>Add path to ffmpeg.exe location under Environment Variables under System Varialbes -&gt; Path (in my case path was C:\ffmpeg)</li>
<li>Open CMD as Administrator</li>
<li>cd to scripts folder (cd \Python\Python39\Scripts&quot;)</li>
<li>run command autosub -S fr -D fr &quot;\file.wav&quot;</li>
</ul>
<p>and it's working :)</p>",0
888,66106503,How to solve this problem of dictionaries of Datacamp python course?,"<p><a href=""https://i.stack.imgur.com/iHYbG.jpg"" rel=""nofollow noreferrer"">The question is on the line 9 and the error is on the line 10</a></p>
<p>I tried to do a auxiliar variable because I thought that .get() function doesn't support multiple indexations.</p>",python-3.x|dictionary,"<p>In your loop, you can use the variable year for the key of the outer dictionary because you are iterating with year.  However, for the inner dictionaries, you must explicitly use the string that is the key to that dictionary. Since, I don't have your data, I called it 'names' in the following code, but you can get you actual inner key by what you did in the prior step: print(boy_names[2013].keys()).  Finally, I don't know how the name ranks are arranged in you data, but if it is in a simple list, then the third rank would be the second index:</p>
<pre><code>for year in boys_names:
    print(boys_names.get(year).get('names')[2])
</code></pre>",0
889,3778043,i want a to resize an image but without distortion,"<p>I have an image having dimension <code>1000*500</code>
I want to make it of <code>400*300</code>
But My image should not looked <code>distorted.</code></p>

<p><code>http://www.daniweb.com/forums/thread295652.html</code> - i used this as  a reference. But My image get distorted. </p>",python|image-processing,"<p>Your target image size has a different aspect ratio to that of the original. The original is 2:1 but the target is 4:3.</p>

<p>You can resize preserving the aspect ratio, but depending on which dimension you choose you'll either get an image that's 400 x 200 or 600 x 300.</p>

<p>If you need the image to be 400 x 300 then you'll need to resize to 400 x 200 and then add border to each side or 600 x 300 and add the border to the top and bottom.</p>",5
890,3311516,Using serial over lan with python,<p>I'd like to write a python script to gather data from serial over lan but I can't seem to find a place to start with IPMI.  I've looked at OpenIPMI's python bindings but there doesn't seem to be any documentation.  Perhaps I can use the subprocess module and ipmitool?  I'm not sure that would be simple though.  Does anyone have any experience with this? How can I capture serial over lan data in python? Thanks.</p>,python|api|networking|serial-port,"<p>Have you seen <a href=""http://www.mail-archive.com/ipmitool-devel@lists.sourceforge.net/msg01445.html"" rel=""nofollow noreferrer"">this thread</a> that has a sample OpenIPMI python program?</p>

<p>And the <a href=""http://openipmi.sourceforge.net/IPMI.pdf"" rel=""nofollow noreferrer"">OpenIPMI documentation (pdf)</a>?</p>",2
891,3920771,Ubuntu 10.04 - Python multiprocessing - 'module' object has no attribute 'local' error,"<p>The following code is from the python 2.6 manual.</p>

<pre><code>from multiprocessing import Process
import os

def info(title):
    print(title)
    print('module name:', 'me')
    print('parent process:', os.getppid())
    print('process id:', os.getpid())

def f(name):
    info('function f')
    print('hello', name)

if __name__ == '__main__':
    info('main line')
    p = Process(target=f, args=('bob',))
    p.start()
    p.join()
</code></pre>

<p>This creates the following stack traces:</p>

<pre><code>Traceback (most recent call last):
  File ""threading.py"", line 1, in &lt;module&gt;
    from multiprocessing import Process
  File ""/usr/lib/python2.6/multiprocessing/__init__.py"", line 64, in &lt;module&gt;
    from multiprocessing.util import SUBDEBUG, SUBWARNING
  File ""/usr/lib/python2.6/multiprocessing/util.py"", line 287, in &lt;module&gt;
    class ForkAwareLocal(threading.local):
AttributeError: 'module' object has no attribute 'local'
Exception AttributeError: '_shutdown' in &lt;module 'threading' from '/home/v0idnull/tmp/pythreads/threading.pyc'&gt; ignored
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File ""/usr/lib/python2.6/atexit.py"", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File ""/usr/lib/python2.6/multiprocessing/util.py"", line 258, in _exit_function
    info('process shutting down')
TypeError: 'NoneType' object is not callable
Error in sys.exitfunc:
Traceback (most recent call last):
  File ""/usr/lib/python2.6/atexit.py"", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File ""/usr/lib/python2.6/multiprocessing/util.py"", line 258, in _exit_function
    info('process shutting down')
TypeError: 'NoneType' object is not callable
</code></pre>

<p>I'm completely clueless as to WHY this is happening, and google has given me very little to work with.</p>",multiprocessing|ubuntu-10.04|python-2.6,"<p>that code runs fine on my machine:<br/>
Ubuntu 10.10, Python 2.6.6 64-bit. </p>

<p>but your error is actually because you have a file named 'threading.py' that you are running this code from (see the stack-trace details).  this is causing a namespace mismatch, since the multiprocessing module needs the 'real' threading module.  try renaming your file to something other than 'threading.py' and running it again. </p>

<p>also... the example you posted is not from the Python 2.6 docs... it is from the Python 3.x docs.  make sure you are reading the docs for the version that matches what you are running.</p>",6
892,3826484,using python.ctypes with cygwin,"<p>I want to use python's (2.6.5) ctypes with cygwin, but I don't know how to load a dll.</p>

<p>I tried various variants like</p>

<pre><code>&gt;&gt;&gt; form ctypes import *
&gt;&gt;&gt; cdll.LoadLibrary(""/lib/libcairo.dll.a"")
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""/usr/lib/python2.6/ctypes/__init__.py"", line 431, in LoadLibrary
    return self._dlltype(name)
  File ""/usr/lib/python2.6/ctypes/__init__.py"", line 353, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: Permission denied
</code></pre>",python|cygwin|ctypes,"<p>You won't be able to load an import library with the Python ctypes module; it has to be an actual DLL. I used both the cygwin crypt library and the crypt DLL import library as examples with a late model Cygwin on Win7.</p>

<pre><code>
Python 2.6.5 (r265:79063, Jun 12 2010, 17:07:01)
[GCC 4.3.4 20090804 (release) 1] on cygwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; from ctypes import *
&gt;&gt;&gt; cdll.LoadLibrary('cygcrypt-0.dll')
&lt;CDLL 'cygcrypt-0.dll', handle 380000 at 7ef4564c&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; cdll.LoadLibrary('libcrypt.dll.a')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""/usr/lib/python2.6/ctypes/__init__.py"", line 431, in LoadLibrary
    return self._dlltype(name)
  File ""/usr/lib/python2.6/ctypes/__init__.py"", line 353, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: Permission denied
</code></pre>",4
893,3861263,Chaining operator functions in Python's filter,"<p>I have a list of objects and want to filter them according to some criteria. I can do it with list comprehension:</p>

<pre><code>import datetime, pytz
# let's have a range of 100 hourly datetimes (just an example!):
dates = [ datetime.datetime(2010, 10, 1, 0, 0, 0, 0, pytz.utc) + datetime.timedelta(hours=i) for i in xrange(100) ]

# now I want a list of all dates, where hour in (0, 6, 12, 18)...
[ dt for dt in dates if dt.hour % 6 == 0 ]
</code></pre>

<p>Which works correctly.</p>

<p>How can I use the <code>filter</code> function (for much larger datasets, therefore the speed is important)? I can check whether dt.hour is True (not 0):</p>

<pre><code>import operator

filter(operator.attrrgetter('hour'), dates)
</code></pre>

<p>but how can I put also the <code>(6).__rmod__</code> part to it, which will tell me whether the <code>hour</code> attribute is divisible by 6?</p>",python|operators|filter,"<p>One way is to use a custom <code>lambda</code> function. This one is verbose for clarity.</p>

<pre><code>filter(lambda dt: hasattr(dt, 'hour') and dt.hour % 6, dates)
</code></pre>

<p>The <code>hasattr</code> check is only necessary if you are expecting non date objects in the <code>dates</code> sequence. </p>

<p>I'd like to add a note that list comprehensions are preferred to <code>map</code> and <code>filter</code>. You could rewrite the above as:</p>

<pre><code>[dt for dt in dates if hasattr(dt, 'hour') and dt.hour % 6]
</code></pre>",4
894,3861263,Chaining operator functions in Python's filter,"<p>I have a list of objects and want to filter them according to some criteria. I can do it with list comprehension:</p>

<pre><code>import datetime, pytz
# let's have a range of 100 hourly datetimes (just an example!):
dates = [ datetime.datetime(2010, 10, 1, 0, 0, 0, 0, pytz.utc) + datetime.timedelta(hours=i) for i in xrange(100) ]

# now I want a list of all dates, where hour in (0, 6, 12, 18)...
[ dt for dt in dates if dt.hour % 6 == 0 ]
</code></pre>

<p>Which works correctly.</p>

<p>How can I use the <code>filter</code> function (for much larger datasets, therefore the speed is important)? I can check whether dt.hour is True (not 0):</p>

<pre><code>import operator

filter(operator.attrrgetter('hour'), dates)
</code></pre>

<p>but how can I put also the <code>(6).__rmod__</code> part to it, which will tell me whether the <code>hour</code> attribute is divisible by 6?</p>",python|operators|filter,"<p>Unfortunately there's no prefab method for doing rmod, so best is to use a lambda (or a LC).</p>

<pre><code>filter(lambda x: not x.hour % 6, dates)
</code></pre>",1
895,3263769,Multiple Python Installations of the same python version on a single computer,"<p>I want to install the new Python 2.7 on my Windows XP 32bit PC.</p>

<p>having CDO (thats OCD with initials sorted in alphabetical order) I want to install it multiple times on the same computer (to different TARGETDIRs).</p>

<p>how do i do that ? double clicking on the installer, or running msiexec multiple times did not work for me</p>

<p>Coincidentally, I noticed that the windows python installation does not ask me if I want to add a Start Menu option. I want my installations of python not to show up on the Start Menu. How do I do that?</p>

<p>be well</p>",python|installation|windows-installer,"<p>Based on one of your comments, it looks like you don't actually need to <em>install</em> it, you just need it on the computer so your program can run. In that case you can take a page from Dropbox's book and include the interpreter, DLL, and standard library in one of your directories, and just use it from there.</p>",0
896,3263769,Multiple Python Installations of the same python version on a single computer,"<p>I want to install the new Python 2.7 on my Windows XP 32bit PC.</p>

<p>having CDO (thats OCD with initials sorted in alphabetical order) I want to install it multiple times on the same computer (to different TARGETDIRs).</p>

<p>how do i do that ? double clicking on the installer, or running msiexec multiple times did not work for me</p>

<p>Coincidentally, I noticed that the windows python installation does not ask me if I want to add a Start Menu option. I want my installations of python not to show up on the Start Menu. How do I do that?</p>

<p>be well</p>",python|installation|windows-installer,"<p>If I understand correctly you want multiple independent copies of Python 2.7 running on Windows. I assume that is so you can install just the packages you need for each project and not have different projects fighting over conflicting versions.</p>

<p>Try using virtualenv (<a href=""http://pypi.python.org/pypi/virtualenv"" rel=""nofollow noreferrer"">http://pypi.python.org/pypi/virtualenv</a>). You install Python once, then whenever you need a new copy you run virtualenv.py and it effectively gives you a clean environment with an <code>activate</code> script (<code>activate.bat</code> on Windows) that makes that environment the current one.</p>

<p>Having said all that, I've only used virtualenv on Linux so I don't know how well it works on Windows, but it certainly claims to work on Windows so give it a go.</p>

<p><em>Edit:</em> For running Python scripts on machines without having to worry whether or not it is already there, the usual solution is to use py2exe (<a href=""http://www.py2exe.org/"" rel=""nofollow noreferrer"">http://www.py2exe.org/</a>). That bundles your application and all libraries together with Python in a single standalone file which can be run without any installation.</p>",1
897,3404556,Python performance: search large list vs sqlite,"<p>Lets say I have a database table which consists of three columns: <code>id</code>, <code>field1</code> and <code>field2</code>.  This table may have anywhere between 100 and 100,000 rows in it.  I have a python script that should insert 10-1,000 new rows into this table.  However, if the new <code>field1</code> already exists in the table, it should do an <code>UPDATE</code>, not an <code>INSERT</code>.</p>

<p>Which of the following approaches is more efficient?</p>

<ol>
<li>Do a <code>SELECT field1 FROM table</code> (<code>field1</code> is unique) and store that in a list.  Then, for each new row, use <code>list.count()</code> to determine whether to <code>INSERT</code> or <code>UPDATE</code></li>
<li>For each row, run two queries.  Firstly, <code>SELECT count(*) FROM table WHERE field1=""foo""</code> then either the <code>INSERT</code> or <code>UPDATE</code>.</li>
</ol>

<p>In other words, is it more efficient to perform n+1 queries and search a list, or 2n queries and get sqlite to search?</p>",python|performance|sqlite,"<p>I imagine using a python dictionary would allow for much faster searching than using a python list. (Just set the values to 0, you won't need them, and hopefully a '0' stores compactly.)</p>

<p>As for the larger question, I'm curious too. :)</p>",0
898,3404556,Python performance: search large list vs sqlite,"<p>Lets say I have a database table which consists of three columns: <code>id</code>, <code>field1</code> and <code>field2</code>.  This table may have anywhere between 100 and 100,000 rows in it.  I have a python script that should insert 10-1,000 new rows into this table.  However, if the new <code>field1</code> already exists in the table, it should do an <code>UPDATE</code>, not an <code>INSERT</code>.</p>

<p>Which of the following approaches is more efficient?</p>

<ol>
<li>Do a <code>SELECT field1 FROM table</code> (<code>field1</code> is unique) and store that in a list.  Then, for each new row, use <code>list.count()</code> to determine whether to <code>INSERT</code> or <code>UPDATE</code></li>
<li>For each row, run two queries.  Firstly, <code>SELECT count(*) FROM table WHERE field1=""foo""</code> then either the <code>INSERT</code> or <code>UPDATE</code>.</li>
</ol>

<p>In other words, is it more efficient to perform n+1 queries and search a list, or 2n queries and get sqlite to search?</p>",python|performance|sqlite,"<p>You appear to be comparing apples with oranges.</p>

<p>A python list is only useful if your data fit into the address-space of the process. Once the data get big, this won't work any more.</p>

<p>Moreover, a python list is not indexed - for that you should use a dictionary.</p>

<p>Finally, a python list is non-persistent - it is forgotten when the process quits.</p>

<p>How can you possibly compare these?</p>",0
899,3404556,Python performance: search large list vs sqlite,"<p>Lets say I have a database table which consists of three columns: <code>id</code>, <code>field1</code> and <code>field2</code>.  This table may have anywhere between 100 and 100,000 rows in it.  I have a python script that should insert 10-1,000 new rows into this table.  However, if the new <code>field1</code> already exists in the table, it should do an <code>UPDATE</code>, not an <code>INSERT</code>.</p>

<p>Which of the following approaches is more efficient?</p>

<ol>
<li>Do a <code>SELECT field1 FROM table</code> (<code>field1</code> is unique) and store that in a list.  Then, for each new row, use <code>list.count()</code> to determine whether to <code>INSERT</code> or <code>UPDATE</code></li>
<li>For each row, run two queries.  Firstly, <code>SELECT count(*) FROM table WHERE field1=""foo""</code> then either the <code>INSERT</code> or <code>UPDATE</code>.</li>
</ol>

<p>In other words, is it more efficient to perform n+1 queries and search a list, or 2n queries and get sqlite to search?</p>",python|performance|sqlite,"<p>I'm not familiar with sqlite but a general approach like this should work:</p>

<p>If there's a unique index on <code>field1</code> and you're trying to insert a value that's already there you should get an error. If insert fails, you go with the update.</p>

<p>Pseudocode:</p>

<pre><code>try
{
    insert into table (value1, value2)
}
catch(insert fails)
{
    update table set field2=value2 where field1=value1
}
</code></pre>",1
900,3404556,Python performance: search large list vs sqlite,"<p>Lets say I have a database table which consists of three columns: <code>id</code>, <code>field1</code> and <code>field2</code>.  This table may have anywhere between 100 and 100,000 rows in it.  I have a python script that should insert 10-1,000 new rows into this table.  However, if the new <code>field1</code> already exists in the table, it should do an <code>UPDATE</code>, not an <code>INSERT</code>.</p>

<p>Which of the following approaches is more efficient?</p>

<ol>
<li>Do a <code>SELECT field1 FROM table</code> (<code>field1</code> is unique) and store that in a list.  Then, for each new row, use <code>list.count()</code> to determine whether to <code>INSERT</code> or <code>UPDATE</code></li>
<li>For each row, run two queries.  Firstly, <code>SELECT count(*) FROM table WHERE field1=""foo""</code> then either the <code>INSERT</code> or <code>UPDATE</code>.</li>
</ol>

<p>In other words, is it more efficient to perform n+1 queries and search a list, or 2n queries and get sqlite to search?</p>",python|performance|sqlite,"<p>If I understand your question correctly, it seems like you could simply use SQLite's built in conflict handling mechanism.</p>

<p>Assuming you have a UNIQUE constraint on field1, you could simple use:</p>

<pre><code>INSERT OR REPLACE INTO table VALUES (...)
</code></pre>

<p>The following syntax is also supported (identical semantics):</p>

<pre><code>REPLACE INTO table VALUES (...)
</code></pre>

<p>EDIT: I realise that I am not really answering your question, just providing an alternative solution which should be faster.</p>",9
901,3957025,What does a audio frame contain?,"<p>I'm doing some research on how to compare sound files(wave). Basically, I want to compare stored soundfiles (wav) with sound from a microphone. So in the end I would like to pre-store some voice commands of my own and then when I'm running my app I would like to compare the pre-stored files with input from the microphone.</p>
<p>My thought was to put in some margin when comparing because saying something two times in a row in the exactly same way would be difficult I guess.</p>
<p>So after some googling I see that Python has this module named wave and the <code>Wave_read</code> object. That object has a function named <code>readframes(n)</code>:</p>
<blockquote>
<p>Reads and returns at most n frames of
audio, as a string of bytes.</p>
</blockquote>
<p>What do these bytes contain? I'm thinking of looping thru the wave files one frame at the time comparing them frame by frame.</p>",python|wav,<p>The first thing you should do is a fourier transformation to transform the data into its frequencies. It is rather complex however. I wouldn't use voice recognition libraries here as it sounds like you don't record voices only. You would then try different time shifts (in case the sounds are not exactly aligned) and use the one that gives you the best similarity - where you have to define a similarity function. Oh and you should normalize both signals (same maximum loudness).</p>,6
902,3957025,What does a audio frame contain?,"<p>I'm doing some research on how to compare sound files(wave). Basically, I want to compare stored soundfiles (wav) with sound from a microphone. So in the end I would like to pre-store some voice commands of my own and then when I'm running my app I would like to compare the pre-stored files with input from the microphone.</p>
<p>My thought was to put in some margin when comparing because saying something two times in a row in the exactly same way would be difficult I guess.</p>
<p>So after some googling I see that Python has this module named wave and the <code>Wave_read</code> object. That object has a function named <code>readframes(n)</code>:</p>
<blockquote>
<p>Reads and returns at most n frames of
audio, as a string of bytes.</p>
</blockquote>
<p>What do these bytes contain? I'm thinking of looping thru the wave files one frame at the time comparing them frame by frame.</p>",python|wav,"<p>A simple byte-by-byte comparison has almost no chance of a successful match, even with some tolerance thrown in. Voice-pattern recognition is a very complex and subtle problem that is still the subject of much research.</p>",8
903,3957025,What does a audio frame contain?,"<p>I'm doing some research on how to compare sound files(wave). Basically, I want to compare stored soundfiles (wav) with sound from a microphone. So in the end I would like to pre-store some voice commands of my own and then when I'm running my app I would like to compare the pre-stored files with input from the microphone.</p>
<p>My thought was to put in some margin when comparing because saying something two times in a row in the exactly same way would be difficult I guess.</p>
<p>So after some googling I see that Python has this module named wave and the <code>Wave_read</code> object. That object has a function named <code>readframes(n)</code>:</p>
<blockquote>
<p>Reads and returns at most n frames of
audio, as a string of bytes.</p>
</blockquote>
<p>What do these bytes contain? I'm thinking of looping thru the wave files one frame at the time comparing them frame by frame.</p>",python|wav,"<p>I believe the accepted description to be slightly incorrect.</p>

<p>A <strong>frame</strong> appears to be somewhat like <strong>stride</strong> in graphics formats.  For <strong>interleaved</strong> stereo @ 16 bits/sample, the frame size is <code>2*sizeof(short)</code>=4 bytes.  For non-interleaved stereo @ 16 bits/sample, the samples of the left channel are all one after another, so the frame size is just <code>sizeof(short)</code>.</p>",7
904,3957025,What does a audio frame contain?,"<p>I'm doing some research on how to compare sound files(wave). Basically, I want to compare stored soundfiles (wav) with sound from a microphone. So in the end I would like to pre-store some voice commands of my own and then when I'm running my app I would like to compare the pre-stored files with input from the microphone.</p>
<p>My thought was to put in some margin when comparing because saying something two times in a row in the exactly same way would be difficult I guess.</p>
<p>So after some googling I see that Python has this module named wave and the <code>Wave_read</code> object. That object has a function named <code>readframes(n)</code>:</p>
<blockquote>
<p>Reads and returns at most n frames of
audio, as a string of bytes.</p>
</blockquote>
<p>What do these bytes contain? I'm thinking of looping thru the wave files one frame at the time comparing them frame by frame.</p>",python|wav,"<p>An audio frame, or sample, contains amplitude (loudness) information at that particular point in time.  To produce sound, tens of thousands of frames are played in sequence to produce frequencies.</p>

<p>In the case of CD quality audio or uncompressed wave audio, there are around 44,100 frames/samples per second.  Each of those frames contains 16-bits of resolution, allowing for fairly precise representations of the sound levels.  Also, because CD audio is stereo, there is actually twice as much information, 16-bits for the left channel, 16-bits for the right.</p>

<p>When you use the sound module in python to get a frame, it will be returned as a series of  hexadecimal characters:</p>

<ul>
<li>One character for an 8-bit mono signal.</li>
<li>Two characters for 8-bit stereo.</li>
<li>Two characters for 16-bit mono.</li>
<li>Four characters for 16-bit stereo.</li>
</ul>

<p>In order to convert and compare these values you'll have to first use the python wave module's functions to check the bit depth and number of channels.  Otherwise, you'll be comparing mismatched quality settings.</p>",46
905,3379174,Which is the most preferred language to start with dynamic languages,"<p>After working for on JAVA for a long time now i feel like also learn some other language just for a change. This time i want to spend some time learning and reading one of the dynamic languages. 
Which is the most appropriate one that covers  most of the features offered by dynamic languages and the syntax which probably is fun and also one that is closer to the syntax used by most of the dynamic languages.</p>

<p>BR,
Keshav</p>",python|ruby|dynamic-languages,"<p>Since you have a Java background, <a href=""http://groovy.codehaus.org/"" rel=""nofollow noreferrer"">Groovy</a> might be worth a shot.</p>

<p>It's a lot of fun :)</p>",2
906,3379174,Which is the most preferred language to start with dynamic languages,"<p>After working for on JAVA for a long time now i feel like also learn some other language just for a change. This time i want to spend some time learning and reading one of the dynamic languages. 
Which is the most appropriate one that covers  most of the features offered by dynamic languages and the syntax which probably is fun and also one that is closer to the syntax used by most of the dynamic languages.</p>

<p>BR,
Keshav</p>",python|ruby|dynamic-languages,"<p>You may want to start with Groovy (<a href=""http://groovy.codehaus.org/"" rel=""nofollow noreferrer"">http://groovy.codehaus.org/</a>), as that is a language that is close to Java, so you can use what you know, but then start to gain experience to using functions as first-class objects, for example.</p>

<p>Then, once you understand Groovy then you can start to experiment with Ruby and Python.</p>",2
907,3379174,Which is the most preferred language to start with dynamic languages,"<p>After working for on JAVA for a long time now i feel like also learn some other language just for a change. This time i want to spend some time learning and reading one of the dynamic languages. 
Which is the most appropriate one that covers  most of the features offered by dynamic languages and the syntax which probably is fun and also one that is closer to the syntax used by most of the dynamic languages.</p>

<p>BR,
Keshav</p>",python|ruby|dynamic-languages,"<p>Ahah, nice troll :) (with ruby and python tags).</p>

<p>In my humble opinion, after trying many languages, my favorite is Ruby with Ruby on Rails.</p>",2
908,3379174,Which is the most preferred language to start with dynamic languages,"<p>After working for on JAVA for a long time now i feel like also learn some other language just for a change. This time i want to spend some time learning and reading one of the dynamic languages. 
Which is the most appropriate one that covers  most of the features offered by dynamic languages and the syntax which probably is fun and also one that is closer to the syntax used by most of the dynamic languages.</p>

<p>BR,
Keshav</p>",python|ruby|dynamic-languages,"<p>Learn [one of] these:</p>

<ul>
<li>Ruby</li>
<li>Python</li>
<li>Clojure (a modern Lisp)</li>
<li>JavaScript (yes, this is a great dynamic language!)</li>
</ul>

<p>Don't transition via a semi-dynamic, semi-Java language. Just jump in and try a dynamic language. In order to really understand what else is going on, you have to get <em>out</em> of the Java world by jumping in, not by sticking your toes into the water.</p>

<p>Yes, I know Clojure is on the JVM and that Ruby and Python have implementations on the JVM as well. But the runtime implementation of a language does not define the language. Learn the language, and you can pick a favorite runtime.</p>",3
909,3379174,Which is the most preferred language to start with dynamic languages,"<p>After working for on JAVA for a long time now i feel like also learn some other language just for a change. This time i want to spend some time learning and reading one of the dynamic languages. 
Which is the most appropriate one that covers  most of the features offered by dynamic languages and the syntax which probably is fun and also one that is closer to the syntax used by most of the dynamic languages.</p>

<p>BR,
Keshav</p>",python|ruby|dynamic-languages,"<p>Javascript is by far the most <em>useful</em> of dynamic languages for real-world practical work - not only is it irreplaceable for ""client-side"" work on the user's browser, but <a href=""http://nodejs.org/"" rel=""nofollow noreferrer"">Node.js</a> is rapidly making it very interesting for server-side work, too.  Sure, it has many issues, but a book such as Crockford's <a href=""https://rads.stackoverflow.com/amzn/click/com/0596517742"" rel=""nofollow noreferrer"" rel=""nofollow noreferrer"">Javascript: the good parts</a> will help you avoid many of them.</p>

<p>JS's syntax of course is quite different from that of dynamic languages such as Python or Ruby, which try to avoid braces and semicolons (which you'd better <em>not</em> avoid in JS: it tries to guess on your behalf but too often it guesses wrong!-).  There is really no ""syntax used by most of the dynamic languages"" given these huge syntax differences (which grow if you throw into the mix Scheme, Erlang, Perl, PHP, Tcl, ...), so that part of your specs is moot.</p>

<p>Second most useful today is probably Python -- as Allison Randall (program chair of OSCON and a well-known Perl guru) put it, Python has surprisingly become something of a ""default language"" in many fields.  For example, the SEC is considering a regulation to mandate publication of algorithms used in stock trading, and their initially proposed language for such a publication is ""of course"" Python.  As <a href=""http://jrvarma.wordpress.com/2010/04/16/the-sec-and-the-python/"" rel=""nofollow noreferrer"">this post</a> explains,</p>

<blockquote>
  <p>Why Python? The SEC actually asks for
  comments on whether they should
  mandate Perl, Java or something else
  instead. I use Perl quite extensively,
  but the idea that Perl is a suitable
  language for implementing a
  transparency requirement is laughable.
  Perl is a model of powerful but
  unreadable and cryptic code. As for
  Java and C-Sharp, there is little
  point in having open source code if
  the interpreter is not also open
  source. I do not use Python myself,
  but it appears to be a good choice for
  the task at hand.</p>
</blockquote>

<p>This is what Allison meant by ""default language"", I think: not necessarily the one you'll choose to implement a given task (e.g. the above post's author would prefer <em>using</em> Perl), but a language everybody's supposed to be able to <em>read</em> in order to understand an algorithm that is published or otherwise presented -- as Bruce Eckel (deservedly-best-selling author of books on C++ and Java) puts it <a href=""http://www.mindview.net/Books/Python/ThinkingInPython.html"" rel=""nofollow noreferrer"">here</a>,</p>

<blockquote>
  <p>Python is executable pseudocode.</p>
</blockquote>

<p>You can look at the ""executable"" part as a bonus (it does guarantee lack of ambiguity, which non-executable pseudocode might lack;-) even though large systems such as reddit and youtube have been implemented in it.</p>

<p>At the other extreme, if you're not necessarily looking for immediately useful knowledge, but for mind-broadening, Scheme or Erlang might suit you best (but the syntax in each case is <em>quite</em> different from most other languages, be warned;-).</p>

<p>However, in that case, I'd suggest <a href=""http://www.mozart-oz.org/"" rel=""nofollow noreferrer"">Mozart</a>, to go with the masterpiece that is Van Roy's and Haridi's <a href=""http://www.info.ucl.ac.be/~pvr/book.html"" rel=""nofollow noreferrer"">Concepts, Techniques, and Models of Computer Programming</a> (that book is <em>plenty</em> motivation to learn Mozart, just like <a href=""http://mitpress.mit.edu/sicp/"" rel=""nofollow noreferrer"">SICP</a> is to learn Scheme -- indeed, I've described CTMCP as ""SICP for the 21st century""!-).</p>",4
910,3379174,Which is the most preferred language to start with dynamic languages,"<p>After working for on JAVA for a long time now i feel like also learn some other language just for a change. This time i want to spend some time learning and reading one of the dynamic languages. 
Which is the most appropriate one that covers  most of the features offered by dynamic languages and the syntax which probably is fun and also one that is closer to the syntax used by most of the dynamic languages.</p>

<p>BR,
Keshav</p>",python|ruby|dynamic-languages,"<p>Try <strong>Jython</strong>, if you like Java, this way you can both ;-)</p>",0
911,3379174,Which is the most preferred language to start with dynamic languages,"<p>After working for on JAVA for a long time now i feel like also learn some other language just for a change. This time i want to spend some time learning and reading one of the dynamic languages. 
Which is the most appropriate one that covers  most of the features offered by dynamic languages and the syntax which probably is fun and also one that is closer to the syntax used by most of the dynamic languages.</p>

<p>BR,
Keshav</p>",python|ruby|dynamic-languages,<p>Python is always fun.Go for it.</p>,7
912,67928588,Filter expected value from list in df column,"<p>I have a data frame with the following column:</p>
<pre><code>raw_col
['a','b','c']
['b']
['a','b']
['c']
</code></pre>
<p>I want to return a column with single value based on a conditional statement. I wrote the following function:</p>
<pre><code>def filter_func(elements):
  if &quot;a&quot; in elements:
    return &quot;a&quot;
  else:
    return &quot;Other&quot;
</code></pre>
<p>When running the function on the column <code>df.withColumn(&quot;col&quot;, filter_func(&quot;raw_col&quot;))</code> I have the following error <code>col should be Column</code></p>
<p>What's wrong here? What should I do?</p>",python|pandas|apache-spark|pyspark,"<p>You can use <code>array_contains</code> function:</p>
<pre class=""lang-py prettyprint-override""><code>import pyspark.sql.functions as f

df = df.withColumn(&quot;col&quot;, f.when(f.array_contains(&quot;raw_col&quot;, f.lit(&quot;a&quot;)), f.lit(&quot;a&quot;)).otherwise(f.lit(&quot;Other&quot;)))
</code></pre>
<p>But if you have a complex logic and need necessary use the <code>filter_func</code>, it's needed to create an UDF:</p>
<pre class=""lang-py prettyprint-override""><code>@f.udf()
def filter_func(elements):
    if &quot;a&quot; in elements:
        return &quot;a&quot;
    else:
        return &quot;Other&quot;

df = df.withColumn(&quot;col&quot;, filter_func(&quot;raw_col&quot;))
</code></pre>",1
913,67937506,"Delete a key in a JSON object, and add a different key","<p>So, at one point in my AWS Lambda function (python), I have a JSON object like this:</p>
<pre><code>[{&quot;a&quot;:1, &quot;b&quot;:2},
{&quot;a&quot;:3, &quot;b&quot;:4},
{&quot;a&quot;:5, &quot;b&quot;:6}]
</code></pre>
<p>Now, from this JSON object, I want to remove the <code>a</code> key from all, and want to add a constant <code>c</code> key to all.</p>
<p>I.e my final JSON object should look like this:</p>
<pre><code>[{&quot;b&quot;:2, &quot;c&quot;:10},
{&quot;b&quot;:4, &quot;c&quot;:10},
{&quot;b&quot;:6, &quot;c&quot;:10}]
</code></pre>
<p>How should I achieve this?</p>",python|json,"<pre><code>obj = [{&quot;a&quot;:1, &quot;b&quot;:2},
{&quot;a&quot;:3, &quot;b&quot;:4},
{&quot;a&quot;:5, &quot;b&quot;:6}]

new_obj = [{ **{k:v for k,v in d.items() if k != &quot;a&quot;}, # remove &quot;a&quot; key
             **{&quot;c&quot;:10}} # add &quot;c&quot; constant
             for d in obj]

print(new_obj)
# [{'b': 2, 'c': 10}, {'b': 4, 'c': 10}, {'b': 6, 'c': 10}]
</code></pre>",1
914,67937506,"Delete a key in a JSON object, and add a different key","<p>So, at one point in my AWS Lambda function (python), I have a JSON object like this:</p>
<pre><code>[{&quot;a&quot;:1, &quot;b&quot;:2},
{&quot;a&quot;:3, &quot;b&quot;:4},
{&quot;a&quot;:5, &quot;b&quot;:6}]
</code></pre>
<p>Now, from this JSON object, I want to remove the <code>a</code> key from all, and want to add a constant <code>c</code> key to all.</p>
<p>I.e my final JSON object should look like this:</p>
<pre><code>[{&quot;b&quot;:2, &quot;c&quot;:10},
{&quot;b&quot;:4, &quot;c&quot;:10},
{&quot;b&quot;:6, &quot;c&quot;:10}]
</code></pre>
<p>How should I achieve this?</p>",python|json,"<p>You can traverse through the list and use the pop command to remove the a key. The below code should help you do that as well as add the constant c key to all</p>
<pre><code>for dict_obj in obj:
    dict_obj.pop('a', None)
    dict_obj['c'] = 10
</code></pre>",1
915,68022947,Dealing with vscode setting workspace python.pythonPath in git tracked project,"<p>We are working in a team and are tracking out .vscode folder including the settings.json. When I change my conda environment it adds the following line to my settings</p>
<pre><code>&quot;python.pythonPath&quot;: &quot;/home/sev/anaconda3/envs/testenv/bin/python&quot;,
</code></pre>
<p>Tracking this parameter would create problems in 2 ways for us:</p>
<ol>
<li>The path is pointing to a folder which does not exist in my teammates machines</li>
<li>As my teammates are working on different parts of the project, they want to load a different enviroment other than testenv by default</li>
</ol>
<p>When working without the <code>.vscode</code> folder this is not a problem as the user settings are used. Is it possible to make vscode use the user settings for this particular setting and not add it everytime we change environment?</p>
<p>I found the following github issue relating to this <a href=""https://github.com/microsoft/vscode-python/issues/2125"" rel=""nofollow noreferrer"">https://github.com/microsoft/vscode-python/issues/2125</a> but there seems to be no solution (that I am able to understand) yet. Is the way to go just to not share workspace settings?</p>",python|visual-studio-code|vscode-settings|vscode-extensions,"<p>Opting in to the following AB experiment solved my problem
<a href=""https://github.com/microsoft/vscode-python/wiki/AB-Experiments"" rel=""nofollow noreferrer"">https://github.com/microsoft/vscode-python/wiki/AB-Experiments</a></p>",0
916,68153904,"How to replace an element of a nested list by the values of a dictionary, if the key matches?","<p>I have a list:</p>
<pre><code>lst = [[1,0],[20,0],[21,1],[22,3],[24,2]]
</code></pre>
<p>Also a dict</p>
<pre><code>dct = {0:&quot;Balco&quot;,1:&quot;Greg&quot;,2:&quot;Palm&quot;,3:&quot;New&quot;}
</code></pre>
<p>I want to replace the 2nd element of nested list with the values that match from the dictionary.</p>
<p>So, the expected new list will be:</p>
<pre><code>lst = [[1,&quot;Balco&quot;],[20,&quot;Balco&quot;],[21,&quot;Greg&quot;],[22,&quot;New&quot;],[24,&quot;Palm&quot;]]
</code></pre>",python|python-3.x|list|dictionary|tuples,"<p>A simple <code>for</code> loop should work:</p>
<pre class=""lang-py prettyprint-override""><code>for item in lst:
    item[1] = dct[item[1]]

print(lst)
</code></pre>
<p>Or, using list comprehension for a one-liner:</p>
<pre><code>result = [[item[0], dct[item[1]]] for item in lst]
</code></pre>",1
917,68050837,How to get size of widgets,"<p>I am developing a PyQt5 application however I am having issues with the heights of the widgets. Below is a simplified version of my issue:</p>
<pre><code>import sys
from PyQt5.QtWidgets import *
from PyQt5.QtWebEngineWidgets import QWebEngineView
from PyQt5.QtCore import *
from PyQt5.QtGui import *

class App(QWidget):
    def __init__(self):
        super().__init__()
        self.showMaximized()
        self.setStyleSheet(&quot;QWidget {background: blue;}&quot;)
        print(self.frameGeometry().height())
        self.show()

if __name__ == &quot;__main__&quot;:
    window = QApplication(sys.argv)
    app = App()
    window.setStyle(QStyleFactory.create(&quot;Fusion&quot;))
    window.exec_()
</code></pre>
<p>Here I create a window and maximise it. Using a tkinter window, it tells me the height maximised is 841, which is the size of my screen, however the PyQt5 application prints the height to be 519. Is this an issue with the <code>self.showMaximized()</code> method, or some other issue.</p>",python|pyqt|pyqt5,"<p>Resizing is not instantaneous in Qt. What Qt does is take the information from showMaximized to activate the flag of the native window (library that depends on each OS) then after a time T the OS applies that flag and sends it the new geometry. So in your case you have to give it a delay to get the correct information.</p>
<pre class=""lang-py prettyprint-override""><code>import sys
from PyQt5.QtWidgets import QApplication, QStyleFactory, QWidget
from PyQt5.QtCore import QTimer


class App(QWidget):
    def __init__(self):
        super().__init__()
        self.setStyleSheet(&quot;QWidget {background: blue;}&quot;)
        self.showMaximized()

        QTimer.singleShot(100, self.calculate)

    def calculate(self):
        print(self.frameGeometry().height())


if __name__ == &quot;__main__&quot;:
    window = QApplication(sys.argv)
    app = App()
    window.setStyle(QStyleFactory.create(&quot;Fusion&quot;))
    window.exec_()
</code></pre>
<p>On the other hand, if your objective is to know the size of the initial screen then you should not use a QWidget for that since it will depend on the time it takes for Qt and the native library to create the native window, instead use the Screen class :</p>
<pre class=""lang-py prettyprint-override""><code>import sys
from PyQt5.QtWidgets import QApplication
from PyQt5.QtGui import QGuiApplication

if __name__ == &quot;__main__&quot;:
    window = QApplication(sys.argv)
    print(QGuiApplication.primaryScreen().availableGeometry().height())
</code></pre>",1
918,68130152,Python: compare strings of a column between two excel sheets and find the matching columns and write to another data frame,"<p>I need to read two spreadsheets(lets say SS1 and SS2). Then have to read the description column in SS1 and search for similar description on latest date in SS2. Have to write the output in another spreadsheet with the unique matching descriptions with its latest date and price.</p>
<p>Input and Output samples below for reference:
SS1:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>S.No</th>
<th>Product</th>
<th>Product_Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Shirt</td>
<td>Monte Carlo Men Shirt</td>
</tr>
<tr>
<td>2</td>
<td>Shirt</td>
<td>Belmonte Shirt Cotton</td>
</tr>
<tr>
<td>3</td>
<td>Shirt</td>
<td>US Polo tshirt men</td>
</tr>
<tr>
<td>4</td>
<td>Shirt</td>
<td>Monte Carlo tshirt</td>
</tr>
<tr>
<td>5</td>
<td>Shirt</td>
<td>Monte Carlo Men Shirt</td>
</tr>
<tr>
<td>6</td>
<td>Suit</td>
<td>Louis Philippe wrinkle free</td>
</tr>
<tr>
<td>7</td>
<td>Suit</td>
<td>Park Avenue</td>
</tr>
<tr>
<td>8</td>
<td>Suit</td>
<td>Van Heusen</td>
</tr>
<tr>
<td>9</td>
<td>Watches</td>
<td>Titan Men Wrist Type</td>
</tr>
<tr>
<td>10</td>
<td>Watches</td>
<td>Casio</td>
</tr>
<tr>
<td>11</td>
<td>Watches</td>
<td>Titan Women Wrist Type</td>
</tr>
<tr>
<td>12</td>
<td>Watches</td>
<td>Rolex</td>
</tr>
<tr>
<td>13</td>
<td>Watches</td>
<td>Casio</td>
</tr>
</tbody>
</table>
</div>
<p>SS2:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>S.No</th>
<th>Product</th>
<th>Product_Description</th>
<th>Purchase_Date</th>
<th>Quantity</th>
<th>Price</th>
<th>Net Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Watches</td>
<td>Casio</td>
<td>Jan-19</td>
<td>10</td>
<td>5000</td>
<td>50000</td>
</tr>
<tr>
<td>2</td>
<td>Watches</td>
<td>Rolex</td>
<td>May-20</td>
<td>2</td>
<td>500000</td>
<td>1000000</td>
</tr>
<tr>
<td>3</td>
<td>Shirt</td>
<td>Monte Carlo tshirt</td>
<td>Feb-20</td>
<td>20</td>
<td>2000</td>
<td>40000</td>
</tr>
<tr>
<td>4</td>
<td>Suit</td>
<td>Raymond</td>
<td>Jan-20</td>
<td>50</td>
<td>10000</td>
<td>500000</td>
</tr>
<tr>
<td>5</td>
<td>Watches</td>
<td>Lois Moinet</td>
<td>May-21</td>
<td>3</td>
<td>60000</td>
<td>180000</td>
</tr>
<tr>
<td>6</td>
<td>Shirt</td>
<td>Peter England</td>
<td>Apr-21</td>
<td>40</td>
<td>1800</td>
<td>72000</td>
</tr>
<tr>
<td>7</td>
<td>Watches</td>
<td>Casio</td>
<td>Mar-19</td>
<td>30</td>
<td>5500</td>
<td>165000</td>
</tr>
<tr>
<td>8</td>
<td>Shirt</td>
<td>Monte Carlo Men Shirt</td>
<td>Jun-19</td>
<td>10</td>
<td>3000</td>
<td>30000</td>
</tr>
<tr>
<td>9</td>
<td>Shirt</td>
<td>Monte Carlo Men Shirt</td>
<td>Apr-20</td>
<td>12</td>
<td>3100</td>
<td>37200</td>
</tr>
<tr>
<td>10</td>
<td>Watches</td>
<td>Rolex</td>
<td>Dec-20</td>
<td>4</td>
<td>505000</td>
<td>2020000</td>
</tr>
<tr>
<td>11</td>
<td>Suit</td>
<td>Louis Philippe wrinkle free suit</td>
<td>Jun-21</td>
<td>9</td>
<td>20000</td>
<td>180000</td>
</tr>
<tr>
<td>12</td>
<td>Suit</td>
<td>Allen Solly</td>
<td>Jan-21</td>
<td>12</td>
<td>4000</td>
<td>48000</td>
</tr>
<tr>
<td>13</td>
<td>Shirt</td>
<td>Monte Carlo tshirt</td>
<td>Apr-21</td>
<td>15</td>
<td>2500</td>
<td>37500</td>
</tr>
</tbody>
</table>
</div>
<p>Output:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>S.No</th>
<th>Product</th>
<th>Product_Description</th>
<th>Purchase_Date</th>
<th>Price</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Shirt</td>
<td>Monte Carlo Men Shirt</td>
<td>Apr-20</td>
<td>3100</td>
</tr>
<tr>
<td>2</td>
<td>Shirt</td>
<td>Monte Carlo tshirt</td>
<td>Apr-21</td>
<td>2500</td>
</tr>
<tr>
<td>3</td>
<td>Suit</td>
<td>Louis Philippe wrinkle free suit</td>
<td>Jun-12</td>
<td>20000</td>
</tr>
<tr>
<td>4</td>
<td>Watches</td>
<td>Casio</td>
<td>Mar-19</td>
<td>5500</td>
</tr>
<tr>
<td>5</td>
<td>Watches</td>
<td>Rolex</td>
<td>Dec-20</td>
<td>505000</td>
</tr>
</tbody>
</table>
</div>",python|pandas|string|text|comparison,"<p>The following should work:</p>
<pre><code>temp = SS1.merge(SS2, on=['Product', 'Product_Description'])[['S.No_x', 'Product', 'Product_Description', 'Purchase_Date', 'Price']]
    
res = temp.sort_values(['Product_Description','Purchase_Date']).drop_duplicates('Product_Description', keep='last')    
res=res.rename(columns={'S.No_x':'S.No'})
res=res.sort_values('S.No')
res.reset_index(drop=True, inplace=True)
        
print(res)
</code></pre>
<p>Output:</p>
<pre><code>   S.No  Product    Product_Description Purchase_Date   Price
0     4    Shirt     Monte Carlo tshirt        Feb-20    2000
1     5    Shirt  Monte Carlo Men Shirt        Jun-19    3000
2    12  Watches                  Rolex        May-20  500000
3    13  Watches                  Casio        Mar-19    5500
</code></pre>
<p>If you want the ACTUAL LATEST DATE (not latest in dataset), insert the following line as 2nd in the above code:</p>
<pre><code>temp['Purchase_Date'] = pd.to_datetime(temp['Purchase_Date'], format='%b-%d')
</code></pre>",1
919,68092372,Error in extracting DDL for functions in DB2,"<P>I used the below statement to extract the ddl for particular function using python in DB2.</p>
Function name = 'DEPTEMPLOYEES'
<pre><code>DDL = &quot;select text from syscat.routines where routineschema = {}
and routinename = {} and routinetype = 'F'&quot;.format(user_schema,objs.upper()) 
cursor.execute(DDL)
</code></pre>
<p>But when I tried to execute this statement am getting an error.</p>
<pre><code>ibm_db_dbi::ProgrammingError: SQLNumResultCols failed: [IBM][CLI
Driver][DB2/NT64] SQL0206N  &quot;DEPTEMPLOYEES&quot; is not valid in the
context where it is used.  SQLSTATE=42703\r SQLCODE=-206
</code></pre>
<p>Can someone please help me to solve this error</p>",python|db2,"<p>Have you tried something like this, adding single quotes around the strings?</p>
<pre><code>DDL = &quot;select text from syscat.routines where routineschema = '{}'
and routinename = '{}' and routinetype = 'F'&quot;.format(user_schema,objs.upper()) 

cursor.execute(DDL)
</code></pre>
<p>Based on the error it seems that your parameters was printed and the quotes were missing. This turned the parameter into a keyword, hence the error message.</p>",1
920,67891773,How to compute digamma function in complex numbers in order to use this function in Tensorflow(to accept input as a tensor)?,"<pre class=""lang-python prettyprint-override""><code>N= [-7.12843079e+02, -1.39668296e+02, -6.01626070e+01, -3.51688015e+01]
jax.scipy.special.digamma(N)
</code></pre>
<pre><code>TypeError: digamma does not accept dtype complex64. Accepted dtypes are subtypes of floating.
</code></pre>
<p>I'm trying to compute digamma in complex numbers using jax.scipy.special.digamma, however, it still gives me this error even though the doc of this package says it can be complex
here is what the doc says:</p>
<p>Parameters:
z (array_like) – Real or complex argument.</p>
<p>Any idea how to solve this issue? Or is there an alternative way such as other library or other packages that allows me to use the complex number to compute the digamma function!?</p>",python|tensorflow2.0|complex-numbers|gamma|jax,"<p>I had a similar problem. This is how I solved it. THE LONG WAY. I know someone will give a concise way of doing it.</p>
<p>From the definition <a href=""https://i.stack.imgur.com/6jrkF.gif"" rel=""nofollow noreferrer"">psi function</a></p>
<p>I used the Gamma function from <a href=""https://literateprograms.org/gamma_function_with_the_lanczos_approximation__python_.html"" rel=""nofollow noreferrer"">here</a>. MAKE SURE THE OUTPUT IS IN JAX ELSE YOU WONT BE ABLE TO USE GRAD;</p>
<pre><code>import jax.numpy as jnp
from jax import grad

def gamma_func_numeric(z):
    g = 7
    z -= 1
    x = lanczos_coef[0]

    for i in range(1, g+2):
        x +=   lanczos_coef[i]/(z+i)    
        t = z + g  + 0.5
   return jnp.sqrt(2*jnp.pi)*jnp.power(t,(z+0.5))*jnp.exp(-t)*x

eta is a complex number

def psi_numeric(eta):
    gamma_prime = grad(gamma_func_numeric, holomorphic=True)(eta)
    gamma = gamma_func_numeric(eta)
    return gamma_prime/gamma
</code></pre>
<p>Lets compare our results:</p>
<pre><code>scipy.special.psi(1.+2j)=(0.7145915153739777+1.3208072826422304j)

psi_numeric(1.+2j) = DeviceArray(0.7145916+1.3208078j, dtype=complex64)
</code></pre>",1
921,68117879,"Python, serialize an actual object from a class into json","<p>I have a class with a child class. I'm able to serialize it into JSON using jsonpickle library. I'm trying to understand something better though. When I try to use Python's native json library, it says the object is not serializable.</p>
<p>I'm looking at this guide: <a href=""https://www.programiz.com/python-programming/json"" rel=""nofollow noreferrer"">https://www.programiz.com/python-programming/json</a></p>
<p>He's showing a class defined like this:</p>
<pre><code>person_dict = {&quot;name&quot;: &quot;Bob&quot;,
&quot;languages&quot;: [&quot;English&quot;, &quot;Fench&quot;],
&quot;married&quot;: True,
&quot;age&quot;: 32
}
</code></pre>
<p>Which serializes OK.</p>
<pre><code>print(json.dumps(person_dict))
# outputs &quot;{&quot;name&quot;: &quot;Bob&quot;, &quot;languages&quot;: [&quot;English&quot;, &quot;Fench&quot;], &quot;married&quot;: true, &quot;age&quot;: 32}&quot;
</code></pre>
<p>But I'm creating a class and instantiating an object from it.</p>
<pre><code>class Purchase(object):
    def __init__(self, receipt_id, order_id):
        self.receipt_id = receipt_id
        self.order_id = order_id
        self.items = []

test = Purchase(&quot;123&quot;, &quot;abc&quot;)
test.items.append(&quot;item1&quot;)
test.items.append(&quot;item2&quot;)
</code></pre>
<p>But json.dumps() doesn't work here.</p>
<pre><code>print(json.dumps(test))
# outputs &quot;TypeError: Object of type Purchase is not JSON serializable&quot;
</code></pre>
<p>What fundamental am I missing here?</p>",python|json|serialization,"<p>In your object, add a method to serialize in json:</p>
<pre><code>def serialize(self):
    &quot;&quot;&quot;JSON serializer for objects not serializable by default json code&quot;&quot;&quot;

    return json.dumps({'items': self.items, 'receipt_id': self.receipt_id, 'order_id': self.order_id})
</code></pre>
<p>and call json.dumps with the default parameter:</p>
<pre><code>json.dumps(test, default=Purchase.serialize)
</code></pre>
<p>reference: <a href=""https://docs.python.org/3/library/json.html#json.dumps"" rel=""nofollow noreferrer"">https://docs.python.org/3/library/json.html#json.dumps</a></p>
<blockquote>
<p>If specified, default should be a function that gets called for
objects that can’t otherwise be serialized. It should return a JSON
encodable version of the object or raise a TypeError. If not
specified, TypeError is raised.</p>
</blockquote>
<pre><code>&gt;&gt;&gt; json.dumps(test, default=Purchase.serialize)
'&quot;{\\&quot;items\\&quot;: [\\&quot;item1\\&quot;, \\&quot;item2\\&quot;], \\&quot;receipt_id\\&quot;: \\&quot;123\\&quot;, \\&quot;order_id\\&quot;: \\&quot;abc\\&quot;}&quot;'
&gt;&gt;&gt; d = json.loads('&quot;{\\&quot;items\\&quot;: [\\&quot;item1\\&quot;, \\&quot;item2\\&quot;], \\&quot;receipt_id\\&quot;: \\&quot;123\\&quot;, \\&quot;order_id\\&quot;: \\&quot;abc\\&quot;}&quot;')
&gt;&gt;&gt; d
'{&quot;items&quot;: [&quot;item1&quot;, &quot;item2&quot;], &quot;receipt_id&quot;: &quot;123&quot;, &quot;order_id&quot;: &quot;abc&quot;}'
</code></pre>",1
922,68048801,Bad python path in bash script from crontab,"<p>I would like to use the python3 executable when I use it from crontab as manual launch (ssh session).</p>
<p>bash script</p>
<pre><code>#!/bin/bash

PYTHONPATH=&quot;$(which python3)&quot;
echo $PYTHONPATH

python3 test.py
</code></pre>
<p>result from ssh command line, launched manually</p>
<pre><code>/usr/local/bin/python3
</code></pre>
<p>result in log file from crontab -e</p>
<pre><code>/usr/bin/python3
</code></pre>
<p>I would like the script launched by the crontab, uses <em>/usr/local/bin/python3</em> executable instead of <em>/usr/bin/python3</em></p>
<p>OR
if it's not possible, use the dependencies of my code available for <em>/usr/bin/python3</em></p>
<p>How can I achieve this ? Thank you very much for your help</p>",python|cron,"<p>the python inside the docker container will not necessarily have the same path. If you want all the modules installed on your VM python3, create a requirements.txt file using <code>pip freeze &gt; requirements.txe</code> and COPY this file as part of your Dockerfile and install it while building the image <code>pip install -r requirements.txt</code></p>",0
923,68086509,Writing pandas dataframes to multiple excel files,"<p><a href=""https://i.stack.imgur.com/z33qa.png"" rel=""nofollow noreferrer"">Image shows a pandas dataframe</a></p>
<pre><code>import pandas as pd
import numpy as np

file = '/Dummy.xlsx'

Customer = pd.read_excel(file, sheet_name=0)
Items = pd.read_excel(file, sheet_name=1)
Commission = pd.read_excel(file, sheet_name=2)
Price = pd.read_excel(file, sheet_name=3)
Sheet1 = pd.read_excel(file, sheet_name=4) 

Inner_join = pd.merge(Price,Sheet1,on = 'Item_ID', how='inner')

Inner_join = pd.merge(Price, Sheet1,on = 'Item_ID', how='inner').merge(Commission, on = 'Commission_ID')

joined_table = pd.merge(Inner_join, Customer, right_on = 'Customer_ID', left_on = 'Customer_ID_x', how = 'inner')

final_table = joined_table[['Date','Customer_Name', 'Customer_ID','Item_Name', 'Commission', 'Qty','Base_Price','Rate']]

calculated_commission = final_table[final_table.loc[:,'Base_Price'] &lt; final_table.loc[:, 'Rate']]

calculated_commission['final_com'] = cal_com.loc[:, 'Qty'] * cal_com.loc[:, 'Commission']][2]

customers = calculated_commission['Customer_Name'].unique()

for i in customers:
    a = calculated_commission[calculated_commission['Customer_Name'].str.match(i)]
    a.to_excel(i+'.xlsx')
</code></pre>
<p>I'm trying to iterate over unique customer names and write them in different excel files and name that with the same name.</p>
<p>It created both files but writes data only on the second file which is 'Chef Themiya'</p>
<p>access below link for the dataset:</p>
<p><a href=""https://drive.google.com/file/d/1VWc_WoN1nTWiDKK1YDtIXtzaAGdgbfpl/view?usp=sharing"" rel=""nofollow noreferrer"">https://drive.google.com/file/d/1VWc_WoN1nTWiDKK1YDtIXtzaAGdgbfpl/view?usp=sharing</a></p>
<p>Please help</p>",python|pandas|dataframe,"<p>str.match isnt picking up the pattern for customer name since your string has parenthesis in it. Use this instead.</p>
<pre><code>df = pd.DataFrame({'Customer': ['88 Chinese Restaurant (Pvt) Ltd', 'Chef Themiya'], 'data': [1,2]})
customers = df['Customer'].unique()
for i in customers:
    test = df[df['Customer']== i]
    print(test)
</code></pre>
<p>you could also use</p>
<pre><code>df = pd.DataFrame({'Customer': ['88 Chinese Restaurant (Pvt) Ltd', 'Chef Themiya'], 'data': [1,2]})
customers = df['Customer'].unique()
for i in customers:
    test = df[df['Customer'].str.contains(i, regex=False)]
    print(test)
</code></pre>
<pre><code>       Customer  data
0  88 Chinese Restaurant (Pvt) Ltd     1

       Customer  data
1  Chef Themiya     2
</code></pre>
<p>Posting your dataset as images makes your example difficult to reproduce. Look into creating minimal reproducable examples.</p>
<p><a href=""https://stackoverflow.com/help/minimal-reproducible-example"">https://stackoverflow.com/help/minimal-reproducible-example</a></p>",0
924,68138610,Store Data to Python Dictionary with Replicated Key-Value Pairs,"<p>Data:</p>
<pre><code>names = ['Catching Fireflies', 
        'Spoonflower Color Map', 
        'Night Sky Stars Midnight Blue', 
        'Soft Meadow Floral', 
        'Just Jellies - Jellyfish', 
        'Ruth Bader Ginsburg RBG Bust - Black', 
        'Bees &amp; Lemons - Large - Blue (original colors)', 
        'Mid Century Kaleidoscope', 
        'Native Eucalyptus Leaves || Edition 1 || Fabric Wallpaper', 
        'genevieve floral', 
        'William Morris ~ Pimpernel ~ Original on Black',... ] --&gt; 84 items


creators = ['thestorysmith', 
    'spoonflower_help', 
    'at_the_cottage', 
    'sweeterthanhoney', 
    'katerhees', 
    'katerhees', 
    'fernlesliestudio', 
    'ceciliamok', 
    'erin__kendal', 
    'crystal_walen', 
    'peacoquettedesigns', 
    'ninola-design', 
    'neonborealis', 
    'anniemontgomerydesign', 
    'elladorine', 
    'hipkiddesigns',...] --&gt; 84 items


fabric_names = ['PETAL_SIGNATURE_COTTON', 'SATIN', 'COTTON_POPLIN_BRAVA', 'PERFORMANCE_PIQUE', 'CHIFFON', 'ORGANIC_SWEET_PEA_GAUZE', 'POLY_CREPE_DE_CHINE', 'COTTON_LAWN_APPAREL', 'LIGHTWEIGHT_COTTON_TWILL', 'MODERN_JERSEY', 'COTTON_SPANDEX_JERSEY', 'ORGANIC_COTTON_SATEEN', 'LINEN_COTTON_CANVAS', 'ORGANIC_COTTON_KNIT_PRIMA', 'FLEECE', 'MINKY', 'DOGWOOD_DENIM', 'PERFORMANCE_LINEN', 'RECYCLED_CANVAS', 'SPORT_LYCRA', 
'CYPRESS_COTTON_BRAVA', 'CELOSIA_VELVET', 'PERFORMANCE_VELVET', 'BELGIAN_LINEN']


results = [('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 'N/A', 'N/A', 16.4), ('FABRIC_SATIN', 'N/A', 'N/A', 17.74), ('FABRIC_COTTON_POPLIN_BRAVA', 'N/A', 'N/A', 17.74), ('FABRIC_PERFORMANCE_PIQUE', 'N/A', 'N/A', 20.39), ('FABRIC_CHIFFON', 'N/A', 'N/A', 20.39), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 'N/A', 'N/A', 20.39), ('FABRIC_POLY_CREPE_DE_CHINE', 'N/A', 'N/A', 20.39), ('FABRIC_COTTON_LAWN_APPAREL', 'N/A', 'N/A', 19.5), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 'N/A', 'N/A', 23.07), ('FABRIC_MODERN_JERSEY', 'N/A', 'N/A', 23.57), ('FABRIC_COTTON_SPANDEX_JERSEY', 'N/A', 'N/A', 23.78), ('FABRIC_ORGANIC_COTTON_SATEEN', 'N/A', 'N/A', 24.01), ('FABRIC_LINEN_COTTON_CANVAS', 'N/A', 'N/A', 24.84), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 'N/A', 'N/A', 24.01), ('FABRIC_FLEECE', 'N/A', 'N/A', 24.84), ('FABRIC_MINKY', 'N/A', 'N/A', 25.34), ('FABRIC_DOGWOOD_DENIM', 'N/A', 'N/A', 26.59), ('FABRIC_PERFORMANCE_LINEN', 'N/A', 'N/A', 28.43), ('FABRIC_RECYCLED_CANVAS', 'N/A', 'N/A', 28.43), ('FABRIC_SPORT_LYCRA', 'N/A', 'N/A', 28.43), ('FABRIC_CYPRESS_COTTON_BRAVA', 'N/A', 'N/A', 29.24), ('FABRIC_CELOSIA_VELVET', 'N/A', 'N/A', 31.92), ('FABRIC_PERFORMANCE_VELVET', 'N/A', 'N/A', 36.98), ('FABRIC_BELGIAN_LINEN', 'N/A', 'N/A', 52.36), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 
29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), 
('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 
19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 
26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), 
('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 
1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), 
('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), 
('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17), ('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71), ('FABRIC_PERFORMANCE_PIQUE', 1.75, 12.9, 22.65), ('FABRIC_CHIFFON', 1.75, 12.9, 22.65), ('FABRIC_ORGANIC_SWEET_PEA_GAUZE', 1.75, 12.9, 22.65), ('FABRIC_POLY_CREPE_DE_CHINE', 1.75, 12.9, 22.65), ('FABRIC_COTTON_LAWN_APPAREL', 1.75, 11.75, 21.66), ('FABRIC_LIGHTWEIGHT_COTTON_TWILL', 1.75, 12.9, 25.63), ('FABRIC_MODERN_JERSEY', 1.75, 13.29, 26.18), ('FABRIC_COTTON_SPANDEX_JERSEY', 1.75, 13.57, 26.42), ('FABRIC_ORGANIC_COTTON_SATEEN', 1.75, 13.83, 26.67), ('FABRIC_LINEN_COTTON_CANVAS', 1.75, 14.79, 27.59), ('FABRIC_ORGANIC_COTTON_KNIT_PRIMA', 1.75, 13.83, 26.67), ('FABRIC_FLEECE', 1.75, 14.79, 27.59), ('FABRIC_MINKY', 1.75, 15.29, 28.15), ('FABRIC_DOGWOOD_DENIM', 1.75, 15.83, 29.54), ('FABRIC_PERFORMANCE_LINEN', 1.75, 16.8, 31.58), ('FABRIC_RECYCLED_CANVAS', 1.75, 16.8, 31.58), ('FABRIC_SPORT_LYCRA', 1.75, 
16.8, 31.58), ('FABRIC_CYPRESS_COTTON_BRAVA', 1.75, 17.23, 32.48), ('FABRIC_CELOSIA_VELVET', 1.75, 18.7, 35.46), ('FABRIC_PERFORMANCE_VELVET', 1.75, 21.5, 41.08), ('FABRIC_BELGIAN_LINEN', 1.75, 29.54, 58.17)...] --&gt; 2016 items
</code></pre>
<p>Scope:
There are 84 designs and creators each and 24 fabric types in which these designs are available my goal is to map these designs and creators with each fabric types associated with them respectively like:</p>
<pre><code>(design_name, creator_name): --&gt; 24 fabric types and their prices per meter.
(design_name, creator_name): --&gt; 24 fabric types and their prices per meter.
(design_name, creator_name): --&gt; 24 fabric types and their prices per meter.
</code></pre>
<p>Expected Output:</p>
<pre><code>{
    ('Catching Fireflies', 'thestorysmith'): {
        'fabric_name00': 'FABRIC_PETAL_SIGNATURE_COTTON', 
        'test_swatch_meter_00': 1.75, 
        'fat_quarter_meter__00': 10.58, 
        'meter_00': 18.22
    }, 
    ('Spoonflower Color Map', 'spoonflower_help'): {
        'fabric_name00': 'FABRIC_PETAL_SIGNATURE_COTTON', 
        'test_swatch_meter_00': 'N/A', 
        'fat_quarter_meter__00': 'N/A', 'meter_00': 16.4
    }, 
    ('Night Sky Stars Midnight Blue', 'at_the_cottage'): {
        'fabric_name00': 'FABRIC_PETAL_SIGNATURE_COTTON', 
        'test_swatch_meter_00': 1.75, 
        'fat_quarter_meter__00': 11.85, 'meter_02': 19.71
    }
}
{
    ('Catching Fireflies', 'thestorysmith'): {
        'fabric_name01': 'FABRIC_SATIN', 
        'test_swatch_meter_01': 1.75, 
        'fat_quarter_meter__01': 10.58, 
        'meter_01': 18.22
    }, 
    ('Spoonflower Color Map', 'spoonflower_help'): {
        'fabric_name01': 'FABRIC_SATIN', 
        'test_swatch_meter_01': 'N/A', 
       'fat_quarter_meter__01': 'N/A', 'meter_01': 17.74
    }, 
    ('Night Sky Stars Midnight Blue', 'at_the_cottage'): {
        'fabric_name01': 'FABRIC_SATIN', 
        'test_swatch_meter_01': 1.75, 
        'fat_quarter_meter__01': 11.85, 'meter_02': 19.71
    }
}
{
    ('Catching Fireflies', 'thestorysmith'): {
        'fabric_name02': 'FABRIC_COTTON_POPLIN_BRAVA', 
        'test_swatch_meter_02': 1.75, 
        'fat_quarter_meter__02': 10.58, 
        'meter_02': 18.22
    }, 
    ('Spoonflower Color Map', 'spoonflower_help'): {
        'fabric_name02': 'FABRIC_COTTON_POPLIN_BRAVA', 
        'test_swatch_meter_02': 'N/A', 
        'fat_quarter_meter__02': 'N/A', 'meter_01': 17.74
    }, 
    ('Night Sky Stars Midnight Blue', 'at_the_cottage'): {
        'fabric_name02': 'FABRIC_COTTON_POPLIN_BRAVA', 
        'test_swatch_meter_02': 1.75, 
        'fat_quarter_meter__02': 11.85, 'meter_02': 19.71
    }
....
}
</code></pre>
<p>I've tried many things and this one is the closest one to my expected output but even this is not giving me my expected output:
Sample Input:</p>
<pre><code>for name, creator in zip(names, creators):
    for idx in range(len(fabric_names)):
        Design_Name = name
        Creator_Name = creator
        fabric = results[0]
        test_swatch_meter = results[1]
        fat_quarter_meter = results[2] 
        meter = results[3]
        #print(fabric)
        

        if (name, creator) not in items_dict.keys():
            items_dict[(name, creator)] = {}
        itemCount = len(items_dict[(name, creator)].values()) / 4
        items_dict[(name, creator)].update({'fabric_name_%02d' %itemCount: fabric,
        'test_swatch_meter_%02d' %itemCount: test_swatch_meter,
        'fat_quarter_meter_%02d' %itemCount: fat_quarter_meter,
        'meter_%02d' %itemCount: meter})

print(items_dict)
</code></pre>
<p>reference csv_output:<a href=""https://docs.google.com/spreadsheets/d/1JjiAKCGD1qLA2lad-ADegzPMtu8EBqhAjGcJdXVkS1M/edit?usp=sharing"" rel=""nofollow noreferrer"">https://docs.google.com/spreadsheets/d/1JjiAKCGD1qLA2lad-ADegzPMtu8EBqhAjGcJdXVkS1M/edit?usp=sharing</a></p>
<p>Actual Code:</p>
<pre><code>import asyncio
import aiohttp
import json
import requests
from bs4 import BeautifulSoup
import pandas as pd






headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:89.0) Gecko/20100101 Firefox/89.0',
    'Accept': '*/*',
    'Accept-Language': 'en-US,en;q=0.5',
    'X-Spoonflower-Window-UUID': 'a9bc37a2-9eb2-4a1e-8ea1-fcee89347364',
    'Content-Type': 'application/json',
    'Origin': 'https://www.spoonflower.com',
    'Connection': 'keep-alive',
    'Referer': 'https://www.spoonflower.com/',
    'Sec-GPC': '1',
    'If-None-Match': 'W/95d6572c326b81ce98c7ae27ac449d42',
    'TE': 'Trailers',
}




def get_fabric_names():
    res = requests.get('https://www.spoonflower.com/spoonflower_fabrics')
    soup = BeautifulSoup(res.text, 'lxml')
    fabrics = [fabric.find('h2').text.strip() for fabric in soup.find_all('div', {'class': 'product_detail medium_text'})]
    fabric = [(&quot;_&quot;.join(fab.upper().replace(u&quot;\u2122&quot;, '').split())) for fab in fabrics]
    for index in range(len(fabric)):
        if 'COTTON_LAWN_(BETA)' in fabric[index]:
            fabric[index] = 'COTTON_LAWN_APPAREL'
        elif 'COTTON_POPLIN' in fabric[index]:
            fabric[index] = 'COTTON_POPLIN_BRAVA'
        elif 'ORGANIC_COTTON_KNIT' in fabric[index]:
            fabric[index] = 'ORGANIC_COTTON_KNIT_PRIMA'
        elif 'PERFORMANCE_PIQUÉ' in fabric[index]:
            fabric[index] = 'PERFORMANCE_PIQUE'
        elif 'CYPRESS_COTTON' in fabric[index]:
            fabric[index] = 'CYPRESS_COTTON_BRAVA'
    return fabric



async def get_designEndpoint(session, url):
    &quot;&quot;&quot;
    Get Design End Point
    :param url:

    &quot;&quot;&quot;
    async with session.get(url) as response:
        response = await response.read()
        # print(response)
        json_response = json.loads(response.decode(&quot;utf-8&quot;))
        extracting_endpoint = json_response['page_results']
        # extracting designId
        design_Id = [item['designId'] for item in extracting_endpoint]
        # extracting designName
        design_Name = [item['name'] for item in extracting_endpoint]
        # extracting creator_Name
        creator_Name = [item['user']['screenName'] for item in extracting_endpoint]

        return design_Id, design_Name, creator_Name

async def get_Fabric_Pricing_Data(session, url):
    &quot;&quot;&quot;

    Extract all the pricing data with respect to Fabric type
    :param url: detail url
            :Return: json data
    &quot;&quot;&quot;
    
    async with session.get(url) as response:
        response = await response.read()
        json_response = json.loads(response)
        #print(json_response)
        # Extracting Data
        try:
            fabric = json_response['data']['fabric_code']
        except:
            fabric = 'N/A'
        try:
            test_swatch_meter = json_response['data']['pricing']['TEST_SWATCH_METER']['price']
        except:
            test_swatch_meter = 'N/A'
        try:
            fat_quarter_meter = json_response['data']['pricing']['FAT_QUARTER_METER']['price']
        except:
            fat_quarter_meter = 'N/A'
        try:
            meter = json_response['data']['pricing']['METER']['price']
        except:
            meter = 'N/A'

        # summary = fabric + &quot;|&quot; + str(test_swatch_meter) + &quot;|&quot; + str(fat_quarter_meter) + &quot;|&quot; + str(meter)
        return fabric, test_swatch_meter, fat_quarter_meter, meter

async def main():
    urls = []
    tasks = []
    async with aiohttp.ClientSession(headers=headers) as session:
        fabrics = get_fabric_names()
        design_Id, design_Name, creator_Name = await get_designEndpoint(session, 'https://pythias.spoonflower.com/search/v1/designs?lang=en&amp;page_offset=0&amp;sort=bestSelling&amp;product=Fabric&amp;forSale=true&amp;showMatureContent=false&amp;page_locale=en')
        for item in design_Id:
            for fab_type in fabrics[0:-3]:
                price_url = 'https://api-gateway.spoonflower.com/alpenrose/pricing/fabrics/FABRIC_'+ fab_type +'?quantity=1&amp;shipping_country=PK&amp;currency=EUR&amp;measurement_system=METRIC&amp;design_id='+str(item)+'&amp;page_locale=en'
                print(price_url)
                urls.append(price_url)

        for url in urls:
            tasks.append(asyncio.create_task(get_Fabric_Pricing_Data(session, url)))

        results = await asyncio.gather(*tasks)
        print(len(design_Name))
        print(len(creator_Name))
        print(len(results))
        return design_Name, creator_Name, results

if __name__ == '__main__':
    loop = asyncio.get_event_loop()
    fabrics = get_fabric_names()[0:-3]
    design_Name, creator_Name, results = loop.run_until_complete(main())
    items_dict = {}
    for name, creator in zip(design_Name, creator_Name):
        for idx in range(len(fabrics)):
            Design_Name = name
            Creator_Name = creator
            fabric = results[0]
            test_swatch_meter = results[1]
            fat_quarter_meter = results[2] 
            meter = results[3]
            #print(fabric)


            if (name, creator) not in items_dict.keys():
                items_dict[(name, creator)] = {}
            itemCount = len(items_dict[(name, creator)].values()) / 4
            items_dict[(name, creator)].update({'fabric_name_%02d' %itemCount: fabric,
           'test_swatch_meter_%02d' %itemCount: test_swatch_meter,
           'fat_quarter_meter_%02d' %itemCount: fat_quarter_meter,
           'meter_%02d' %itemCount: meter})

   print(items_dict)
    
    
    df = pd.DataFrame.from_dict(items_dict, orient='index').reset_index(drop=False)
         df = df.rename(columns={'level_0':'designName','level_1':'screenName'})
         df.to_csv('scraped_data_1.csv', index=False)
</code></pre>",python|python-3.x,"<p>You can use list and dict comprehensions:</p>
<pre class=""lang-py prettyprint-override""><code>names = ['Catching Fireflies', 'Spoonflower Color Map', 'Night Sky Stars Midnight Blue']
creators = ['thestorysmith', 'spoonflower_help', 'at_the_cottage']
results = [('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22), ('FABRIC_SATIN', 1.75, 11.85, 19.71), ('FABRIC_COTTON_POPLIN_BRAVA', 1.75, 11.85, 19.71)]

def well(names, creators, results):
    return [{
        key: {
            f'fabric_name{i:02d}': fabric_name,
            f'test_swatch_meter_{i:02d}': test_swatch_meter,
            f'fat_quarter_meter__{i:02d}': fat_quarter_meter,
            f'meter_{j:02d}': meter,
        } for j, key in enumerate(zip(names, creators))} 
    for i, (fabric_name, test_swatch_meter, fat_quarter_meter, meter) in enumerate(results)]
    
print(well(names, creators, results))
</code></pre>
<p>This will output</p>
<pre class=""lang-none prettyprint-override""><code>[{('Catching Fireflies', 'thestorysmith'): {'fabric_name00': 'FABRIC_PETAL_SIGNATURE_COTTON',
                                            'fat_quarter_meter__00': 10.58,
                                            'meter_00': 18.22,
                                            'test_swatch_meter_00': 1.75},
  ('Night Sky Stars Midnight Blue', 'at_the_cottage'): {'fabric_name00': 'FABRIC_PETAL_SIGNATURE_COTTON',
                                                        'fat_quarter_meter__00': 10.58,
                                                        'meter_02': 18.22,
                                                        'test_swatch_meter_00': 1.75},
  ('Spoonflower Color Map', 'spoonflower_help'): {'fabric_name00': 'FABRIC_PETAL_SIGNATURE_COTTON',
                                                  'fat_quarter_meter__00': 10.58,
                                                  'meter_01': 18.22,
                                                  'test_swatch_meter_00': 1.75}},
 {('Catching Fireflies', 'thestorysmith'): {'fabric_name01': 'FABRIC_SATIN',
                                            'fat_quarter_meter__01': 11.85,
                                            'meter_00': 19.71,
                                            'test_swatch_meter_01': 1.75},
  ('Night Sky Stars Midnight Blue', 'at_the_cottage'): {'fabric_name01': 'FABRIC_SATIN',
                                                        'fat_quarter_meter__01': 11.85,
                                                        'meter_02': 19.71,
                                                        'test_swatch_meter_01': 1.75},
  ('Spoonflower Color Map', 'spoonflower_help'): {'fabric_name01': 'FABRIC_SATIN',
                                                  'fat_quarter_meter__01': 11.85,
                                                  'meter_01': 19.71,
                                                  'test_swatch_meter_01': 1.75}},
 {('Catching Fireflies', 'thestorysmith'): {'fabric_name02': 'FABRIC_COTTON_POPLIN_BRAVA',
                                            'fat_quarter_meter__02': 11.85,
                                            'meter_00': 19.71,
                                            'test_swatch_meter_02': 1.75},
  ('Night Sky Stars Midnight Blue', 'at_the_cottage'): {'fabric_name02': 'FABRIC_COTTON_POPLIN_BRAVA',
                                                        'fat_quarter_meter__02': 11.85,
                                                        'meter_02': 19.71,
                                                        'test_swatch_meter_02': 1.75},
  ('Spoonflower Color Map', 'spoonflower_help'): {'fabric_name02': 'FABRIC_COTTON_POPLIN_BRAVA',
                                                  'fat_quarter_meter__02': 11.85,
                                                  'meter_01': 19.71,
                                                  'test_swatch_meter_02': 1.75}}]
</code></pre>
<hr />
<p>Let's break it down for you to understand what's going on:</p>
<pre class=""lang-none prettyprint-override""><code>return R
R := [B for i, A in enumerate(results)]
A := (fabric_name, test_swatch_meter, fat_quarter_meter, meter)
B := {{key: C} for j, key in enumerate(zip(names, creators))}
C := {f'fabric_name{i:02d}': fabric_name, f'test_swatch_meter_{i:02d}': test_swatch_meter, f'fat_quarter_meter__{i:02d}': fat_quarter_meter, f'meter_{j:02d}': meter}
</code></pre>
<ul>
<li><p>The <code>R</code> token will iterate over each value <code>A</code> and its respective index <code>i</code> from <code>results</code>, inserting <code>B</code> into a new list.</p>
</li>
<li><p>The <code>A</code> token will unpack the values <code>fabric_name</code>, <code>test_swatch_meter</code>, <code>fat_quarter_meter</code> and <code>meter</code>. If we take a look at some element of <code>results</code>, we'll see that it has this format:</p>
</li>
</ul>
<pre class=""lang-none prettyprint-override""><code>('FABRIC_PETAL_SIGNATURE_COTTON', 1.75, 10.58, 18.22)
</code></pre>
<p>So, for this element, <code>fabric_name == 'FABRIC_PETAL_SIGNATURE_COTTON'</code>, <code>test_swatch_meter == 1.75</code>, <code>fat_quarter_meter == 10.58</code> and <code>meter == 18.22</code>.</p>
<ul>
<li>The <code>B</code> token will iterate in parallel over the names and the creators <code>key</code> and its respective index <code>j</code>, mapping each <code>key</code> to a value <code>C</code>.</li>
</ul>
<p>By parallel, I mean that in the <em>n</em>-th iteration, <code>key</code> will be a tuple containing the <em>n</em>-th element of <code>names</code> and the <em>n</em>-th element of <code>creators</code>. So, in the first iteration, <code>key == ('Catching Fireflies', 'thestorysmith')</code>.</p>
<ul>
<li>The <code>C</code> token will create a dictionary containing the keys <code>fabric_name</code>, followed by the current index of <code>results</code>; <code>test_swatch_meter</code> followed by the current index of <code>results</code>; <code>fat_quarter_meter</code> followed by the current index of results; and <code>meter</code> followed by the current index of <code>names</code>/<code>creators</code>. Each key will map to its corresponding value in the current element of <code>results</code>.</li>
</ul>",0
925,67864841,Create a dictionary using a string with numbers,"<p>I am trying to create a function which allows me to have a<br />
dictionary like this :<code>{'Apple': 7,'Pearl: 5, 'strawberry': 3} </code><br />
using this string: <code> &quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;</code>.</p>
<p>I want to use the numbers on the string as an integer and do the addition process to be the result. However I was trying to split the string into pieces so I can make it an integer</p>
<pre><code>   def cal(Fruitsamount):
        Fruitsamount.split(&quot;;&quot;)
        dict1 = {Fruitsamount[0:5]: Fruitsamount[5:8]}
        return dict1
    print(cal(&quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;))
</code></pre>
<p>I would like to know how can I transform part of the numbers on the string into integers so I can do the addition process</p>",python,"<p>You need to iterate over the result of the split by <code>;</code>. Then, you can construct the dictionary by unpacking the split by <code>,</code> and summing over the numbers.</p>
<pre><code>def cal(Fruitsamount):
    d = {}
    for item in Fruitsamount.strip(&quot;;&quot;).split(&quot;;&quot;):
        k, *vs = item.split(&quot;,&quot;)
        d[k] = sum(map(int, vs))
    return d

print(cal(&quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;))
{'Apple': 7, 'Pearl': 5, 'Strawberry': 3}
</code></pre>",1
926,67864841,Create a dictionary using a string with numbers,"<p>I am trying to create a function which allows me to have a<br />
dictionary like this :<code>{'Apple': 7,'Pearl: 5, 'strawberry': 3} </code><br />
using this string: <code> &quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;</code>.</p>
<p>I want to use the numbers on the string as an integer and do the addition process to be the result. However I was trying to split the string into pieces so I can make it an integer</p>
<pre><code>   def cal(Fruitsamount):
        Fruitsamount.split(&quot;;&quot;)
        dict1 = {Fruitsamount[0:5]: Fruitsamount[5:8]}
        return dict1
    print(cal(&quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;))
</code></pre>
<p>I would like to know how can I transform part of the numbers on the string into integers so I can do the addition process</p>",python,"<p>You can transform them to integers using <code>int</code>.</p>
<pre class=""lang-py prettyprint-override""><code>def to_dict(inventory):
    items = inventory.split(&quot;;&quot;)
    items = [item.split(',') for item in items]
    keys = [item[0] for item in items]
    values = [sum(map(int, item[1:])) for item in items]
    return dict(zip(keys, values))
</code></pre>",1
927,67864841,Create a dictionary using a string with numbers,"<p>I am trying to create a function which allows me to have a<br />
dictionary like this :<code>{'Apple': 7,'Pearl: 5, 'strawberry': 3} </code><br />
using this string: <code> &quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;</code>.</p>
<p>I want to use the numbers on the string as an integer and do the addition process to be the result. However I was trying to split the string into pieces so I can make it an integer</p>
<pre><code>   def cal(Fruitsamount):
        Fruitsamount.split(&quot;;&quot;)
        dict1 = {Fruitsamount[0:5]: Fruitsamount[5:8]}
        return dict1
    print(cal(&quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;))
</code></pre>
<p>I would like to know how can I transform part of the numbers on the string into integers so I can do the addition process</p>",python,"<p>You can first split the text on <code>;</code> which will give the key and values for each item for the dictionary, and then split these values on <code>,</code>, the first value is the key, and rests are the values for the given key, iterate through each values and type cast the values to the integer, finally calculate the <code>sum</code> of these values. But since your sample string contains <code>;</code> at the end, you may want to <code>strip</code> it first before proceeding.</p>
<pre class=""lang-py prettyprint-override""><code>def getDict(text):
    result = {}
    text = text.strip(';')
    for row in text.split(';'):
        cols = row.split(',')
        result[cols[0]] = sum(int(i) for i in cols[1:])
    return result

getDict('Apple,2,5;Pearl,3,2;Strawberry,1,2;')
#output: {'Apple': 7, 'Pearl': 5, 'Strawberry': 3}
</code></pre>
<p>One-liner solution using <code>lambda</code>, <code>map</code>, and comprehension:</p>
<pre class=""lang-py prettyprint-override""><code>getDict = lambda text: {col[0]:sum(map(int, col[1:])) 
                        for col in map(lambda x: x.split(','), 
                                       (row for row in text.strip(';').split(';')))
                        }
getDict('Apple,2,5;Pearl,3,2;Strawberry,1,2;')
# ooutput: {'Apple': 7, 'Pearl': 5, 'Strawberry': 3}
</code></pre>",2
928,67864841,Create a dictionary using a string with numbers,"<p>I am trying to create a function which allows me to have a<br />
dictionary like this :<code>{'Apple': 7,'Pearl: 5, 'strawberry': 3} </code><br />
using this string: <code> &quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;</code>.</p>
<p>I want to use the numbers on the string as an integer and do the addition process to be the result. However I was trying to split the string into pieces so I can make it an integer</p>
<pre><code>   def cal(Fruitsamount):
        Fruitsamount.split(&quot;;&quot;)
        dict1 = {Fruitsamount[0:5]: Fruitsamount[5:8]}
        return dict1
    print(cal(&quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;))
</code></pre>
<p>I would like to know how can I transform part of the numbers on the string into integers so I can do the addition process</p>",python,"<p>I tried to re-implement the code to make it easier to read, after you split by &quot;;&quot; and get each key-value pair you have to split by comma and get first element as key, all of the rest value as values. Here is my implementation:</p>
<pre><code>x = &quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;


def cal(string):
  dict_keys = string.split(';')

  result_dict = dict()
  for element in dict_keys:
    key_value = element.split(',')
    key = key_value[0]
    result_dict[key] = [int(val) for val in list(key_value[1:])]

 
  return result_dict


print(cal(&quot;Apple,2,5;Pearl,3,2;Strawberry,1,2;&quot;))
</code></pre>
<p>Simply use int() to every value in a list could do the work.</p>",-1
929,67902997,How to fix missing 1 required positional argument 'request' error?,"<p>TypeError at /risk/riskset
get_context_data() missing 1 required positional argument: 'request'.</p>
<p>See code here:
models.py</p>
<pre><code>class RiskSet(models.Model):
    name = models.CharField('Risk set', max_length=500, blank=True, default = '')
    owner = models.ForeignKey(User, verbose_name = 'owner', on_delete=models.PROTECT, null=True)
    risk = models.ForeignKey(Risk, verbose_name = 'risk', on_delete=models.PROTECT, null = True)
    parent_risk_set = models.ForeignKey('self', related_name=&quot;child_risk_set&quot;, on_delete=models.PROTECT, blank=True, null=True)
  
    def __str__(self):
        return &quot;{}&quot;.format(self.name)
</code></pre>
<p>forms.py</p>
<pre><code>class RiskSetForm(forms.ModelForm):
    RiskID1 = forms.ModelMultipleChoiceField(queryset=Risk.objects.all(), required=True,
                                             widget=forms.SelectMultiple(attrs={'class': 'select2'}),
                                             label = 'Risk id')
                                                         
    def __init__(self, *args, **kwargs):
        super(RiskSetForm, self).__init__(*args, **kwargs)
        print(self)
        for visible in self.visible_fields():
            visible.field.widget.attrs['class'] = 'form-control'

    class Meta:
        model = RiskSet
        fields = ['name', 'owner', 'risk', 'parent_risk_set']
</code></pre>
<p>views.py</p>
<pre><code>class RiskSet(FormView, SingleTableMixin):
    template_name = &quot;risk/RiskSet.html&quot;
    model = RiskSet
    form_class = RiskSetForm
    def get_context_data(self, request):
        form = RiskSetForm(request.POST or None)
        if form.is_valid():
            form.save()    
        # Call the base implementation first to get a context
        context = super().get_context_data(**kwargs)
        # Add in a QuerySet of all the books
        context['page'] = 'risk'
        return context
</code></pre>
<p>Now I get the error:</p>
<p>TypeError at /risk/riskset
get_context_data() missing 1 required positional argument: 'request'</p>
<p>Please help!</p>",python|django,"<p><code>get_context_data</code> does <em>not</em> work with a <code>request</code> parameter. You can pass an arbitrary number of parameters, but here your <code>get_context_data</code> will only run if it is called with the request. You access the request with <code>self.request</code>:</p>
<pre><code>class RiskSet(SingleTableMixin, FormView):
    template_name = &quot;risk/RiskSet.html&quot;
    model = RiskSet
    form_class = RiskSetForm
    
    def <b>get_context_data(self, *args, **kwargs)</b>:
        form = RiskSetForm(self.request.POST or None)
        if form.is_valid():
            form.save()    
        # Call the base implementation first to get a context
        context = super().get_context_data(*args, **kwargs)
        # Add in a QuerySet of all the books
        context['page'] = 'risk'
        return context</code></pre>
<p>Furthermore it makes no sense to do this in the <code>get_context_data</code> method. A <code>FormView</code> has routines in place for this. It You can probably also work with a <code>CreateView</code> which will remove more boilerplate code, like:</p>
<pre><code>from django.views.generic import CreateView

class RiskSet(SingleTableMixin, <b>CreateView</b>):
    template_name = &amp;quot;risk/RiskSet.html&amp;quot;
    model = RiskSet
    form_class = RiskSetForm
    success_url = '<i>path-to-url-when-form-is-valid</i>'
    
    def get_context_data(self, *args, **kwargs):
        context = super().get_context_data(*args, **kwargs)
        # Add in a QuerySet of all the books
        context['page'] = 'risk'
        return context</code></pre>",4
930,68154057,No module named 'json2html',"<p><a href=""https://i.stack.imgur.com/uRwoL.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/uRwoL.png"" alt=""enter image description here"" /></a></p>
<p>I checked my PATH, made sure the <code>json2html</code> is in the path and that it's installed. Yet, I can't get it to load.</p>
<p><a href=""https://i.stack.imgur.com/YDf2O.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YDf2O.png"" alt=""enter image description here"" /></a></p>",python|modulenotfounderror,"<p>I searched for where openpyxl is, since it worked without error. I found it here:</p>
<ul>
<li>F:\Users\John\anaconda3\Lib\site-packages</li>
</ul>
<p>So then I did this:</p>
<pre><code>pip3 install --target=F:\Users\John\anaconda3\Lib\site-packages json2html
</code></pre>
<p>And it worked!</p>",0
931,68454382,How do I parse out both single line and multiline in regex?,"<p>I need to parse out both the single line data and multiline data. How can I do this using only one regex?</p>
<pre><code>-------------------------------------------
/ Vegetation /
-------------------------------------------
-- 
-- Shrubs [-] = Number of shrubs
-- Shrub_x [m/rad] = The position of shrub nr x in either (x,y,z) or in (latitude, longitude, h)
--          (XY/WGS84, height above msl)
-- 
------------------------------------------
I.Shrubs := 3; -- {MIN:0 MAX:10}
Car.Shrub_1 := (0.0, 0.0, 1.5);
Car.Shrub_2 := (3.4, 10.0, 0.2);
Car.Shrub_3 := (5.0, 5.0, 2.0);

-------------------------------------------
/ Lawn /
-------------------------------------------
-- Some general info thats not required but that could be written here.
-- 
-- Lawn_Attitude [rad] = The attitude of the lawn as Euler angles. 
--                North, East and Up is used as reference frame.
-- Lawn_Quality [-] = The quality index of the lawn.
--
-------------------------------------------
Eul.Lawn_Attitude := (0.7853981,-0.23651236, 0.017); 
I.Lawn_Quality := 5; --{0,1,2,3,4,5}
</code></pre>
<p>right now I am using:</p>
<pre><code>-- \w+ \[.+\n(?!--[ \t]{2,}) # for single line and
-- [^ \t\n].+\n--\s{3,}.+ # for multi line.
</code></pre>
<p>I need to take into consideration that the data may be written using both tabs and spaces because the user might use either and some IDEs consider tabs to be 4 spaces.</p>",python-3.x|regex,"<p>You could match <code>--</code> followed by a space and then a non whitespace char and the rest of the line.</p>
<p>Then match all following lines that start with <code>--</code> and at least 3 whitespace chars.</p>
<p>Note that <code>\s</code> could also match a newline.</p>
<pre><code>^-- \S.*(?:\n--\s{3}.*)*
</code></pre>
<p><a href=""https://regex101.com/r/Q8EHuz/1"" rel=""nofollow noreferrer"">Regex demo</a></p>
<p>If there has to be an opening square bracket in the start of both lines, and you want to match 3 whitespace chars without a newline:</p>
<pre><code>^-- [^][\n]*\[.*(?:\n--[^\S\n]{3}.*)*
</code></pre>
<p><a href=""https://regex101.com/r/RHMmtI/1"" rel=""nofollow noreferrer"">Regex demo</a></p>",1
932,68361503,Python doesn't realise sqlalchemy extension is installed?,"<p>Odd question here. I recently installed the ibm_db_sa extension on a new computer through Anaconda Prompt. However, when I try to run a script that uses it I get this error message:</p>
<p><a href=""https://i.stack.imgur.com/H3Weg.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/H3Weg.png"" alt=""enter image description here"" /></a></p>
<p>This looked to me as if sqlalchemy was not installed, so I tried installing it separately (again, through Anaconda Prompt). However, this just returned a message saying &quot;<em>Requirement already satisfied</em>&quot;.</p>
<p>Does anyone know what's going wrong here please? This worked fine on my old computer after just installing ibm_db_sa, so I'm not quite sure why its not working now?</p>",python|sqlalchemy|anaconda|db2,"<p>This could be related to that <a href=""https://github.com/sqlalchemy/sqlalchemy/issues/5094"" rel=""nofollow noreferrer"">zxJDBC was removed from SQLAlchemy</a>. It is in the <a href=""https://docs.sqlalchemy.org/en/14/changelog/changelog_14.html?highlight=zxjdbc"" rel=""nofollow noreferrer"">Changelog for 1.4</a>. If you installed the most recent version of SQLAlchemy, that might cause the &quot;No module named&quot; error.</p>",0
933,68312564,How to add a row with a multi-word name to a pandas dataframe,"<p>I have a dataframe in pandas (called <code>df</code>) and I would like to add a row (called <code>'Row 5'</code>) to it. But the row's name has more than one word. So how would I do this?</p>
<p>This is <code>df</code></p>
<p><img src=""https://i.stack.imgur.com/APIoo.png"" alt=""my dataframe"" /></p>
<p>This is the code that I tried, but, as you will read, it ends up in an error.</p>
<pre><code>sum_part = 37 + 55 + 11 + 21
product_part = 37 * 55 * 11 * 21

pd.Series(
    np.array([37, 55, 11, 21, sum_part, product_part]),
    index=['Column 1', 'Column 2', 'Column 3', 'Column 4', 'Sum', 'Product'],
    name='Row 5')

df = df.append('Row 5')
</code></pre>
<p>The specific error that this code causes is: <code>TypeError: cannot concatenate object of type '&lt;class 'str'&gt;'; only Series and DataFrame objs are valid</code>.</p>
<p>Any help on this would be greatly appreciated! Thank you!!!</p>",python|pandas|dataframe|row|typeerror,"<p>Use variable <code>s</code> for append <code>Series</code>, here <code>np.array</code> is not necessary in <code>Series</code> constructor:</p>
<pre><code>s = pd.Series([37, 55, 11, 21, sum_part, product_part],
              index=['Column 1', 'Column 2', 'Column 3', 'Column 4', 'Sum', 'Product'],
              name='Row 5')
</code></pre>
<p>Or is possible pass columns names to <code>index</code> parameter:</p>
<pre><code>s = pd.Series([37, 55, 11, 21, sum_part, product_part],
              index=df.columns,
              name='Row 5')
</code></pre>
<hr />
<pre><code>df = df.append(s)
</code></pre>",1
934,68318943,Click a dropdown using Selenium in Python Jupyter Notebook,"<p>How can I click a button with the below HTML? When clicking the button it provides a dropdown and multiple options (but below you can see it only shows &quot;all registries&quot;).</p>
<p>I tried with no luck many versions of:
driver.find_element_by_id() and
driver.find_element_by_class_name()</p>
<p><a href=""https://i.stack.imgur.com/FFaVT.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/FFaVT.png"" alt=""enter image description here"" /></a></p>",python|selenium|button|jupyter-notebook|dropdown,"<p>You can click on <code>all registries</code> with the below code  :</p>
<p><strong>xpath :</strong></p>
<pre><code>//strong[text()='all registries']/../../..
</code></pre>
<p>use it in code like this :</p>
<pre><code>wait = WebDriverWait(driver, 10)
wait.until(EC.element_to_be_clickable((By.XPATH, &quot;//strong[text()='all registries']/../../..&quot;))).click()
</code></pre>
<p><strong>Imports  :</strong></p>
<pre><code>from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.common.by import By
from selenium.webdriver.support import expected_conditions as EC
</code></pre>",0
935,68274102,pre-commit yapf fails on file included in yapfignore,"<p>One of the pre-commit hooks set up in the repo is yapf (<code>.pre-commit-config.yaml</code>):</p>
<pre class=""lang-yaml prettyprint-override""><code>repos:
# Note: the YAPF config is found in `.style.yapf` and `.yapfignore`
-   repo: https://github.com/pre-commit/mirrors-yapf
    rev: v0.29.0
    hooks:
    -   id: yapf
</code></pre>
<p>Whenever I make changes to a file that is included in <code>.yapfignore</code> and run the pre-commit hook, the hook fails:</p>
<pre><code>pre-commit run yapf                                                                                                                                                                                         
[WARNING] Unstaged files detected.
[INFO] Stashing unstaged files to ****************
yapf.....................................................................Failed
- hook id: yapf
- exit code: 1

yapf: Input filenames did not match any python files
</code></pre>
<p>Anyone know how to avoid yapf failing on the files included in the <code>.yapfignore</code>?</p>",python|pre-commit-hook|pre-commit.com|yapf,"<p>Ok so the cause of the problem is that yapf treats files that are in the <code>.yapfignore</code> as if they're files that don't exist so you'll get a:</p>
<pre><code>yapf: Input filenames did not match any python files
</code></pre>
<p>Error if you run yapf against any file in the <code>.yapfignore</code> file. To get around this problem in <code>pre-commit</code>, I added an existing python file not in <code>.yapfignore</code> as an argument so yapf always has a file to run against.</p>",0
936,68274102,pre-commit yapf fails on file included in yapfignore,"<p>One of the pre-commit hooks set up in the repo is yapf (<code>.pre-commit-config.yaml</code>):</p>
<pre class=""lang-yaml prettyprint-override""><code>repos:
# Note: the YAPF config is found in `.style.yapf` and `.yapfignore`
-   repo: https://github.com/pre-commit/mirrors-yapf
    rev: v0.29.0
    hooks:
    -   id: yapf
</code></pre>
<p>Whenever I make changes to a file that is included in <code>.yapfignore</code> and run the pre-commit hook, the hook fails:</p>
<pre><code>pre-commit run yapf                                                                                                                                                                                         
[WARNING] Unstaged files detected.
[INFO] Stashing unstaged files to ****************
yapf.....................................................................Failed
- hook id: yapf
- exit code: 1

yapf: Input filenames did not match any python files
</code></pre>
<p>Anyone know how to avoid yapf failing on the files included in the <code>.yapfignore</code>?</p>",python|pre-commit-hook|pre-commit.com|yapf,"<p>A few things are happening in your output and the behaviours you're seeing so I'll explain them separately:</p>
<pre><code>$ pre-commit run yapf                                                                                                                                                                                         
[WARNING] Unstaged files detected.
[INFO] Stashing unstaged files to ****************
</code></pre>
<p>this output here indicates that <code>pre-commit</code> took your un-staged changes and discarded them, likely not showing what you expect.  you probably want <code>pre-commit run yapf --all-files</code> when demonstrating what's going on</p>
<p>on to the actual question.</p>
<p>pre-commit doesn't know about implementation details of whatever tool you're using (and to an extent, <code>yapf</code> doesn't either!)</p>
<p>when a file is in <code>.yapfignore</code> and you pass it to <code>yapf</code> it acts as if it doesn't exist (which is very strange!)</p>
<pre><code>$ tail -n999 hello_wat.py .yapfignore 
==&gt; hello_wat.py &lt;==
x =     5+  4

==&gt; .yapfignore &lt;==
hello*.py

$ yapf hello_wat.py 
yapf: Input filenames did not match any python files
</code></pre>
<p>what you probably want to do is utilize <code>pre-commit</code>'s <a href=""https://pre-commit.com/#config-exclude"" rel=""nofollow noreferrer""><code>exclude</code></a> so that the files are never passed to <code>yapf</code> at all!  taking my example (you didn't share your <code>.yapfignore</code> or a minimal case to go off of)</p>
<pre class=""lang-yaml prettyprint-override""><code>repos:
-   repo: https://github.com/pre-commit/mirrors-yapf
    rev: v0.29.0
    hooks:
    -   id: yapf
        exclude: ^hello\.*\.py$
</code></pre>
<p>now yapf won't run against <code>hello*.py</code>!</p>
<hr />
<p>disclaimer: I'm the creator of pre-commit.</p>",0
937,68320603,Importing Spark avro packages into a dockerized python project to import avro file in S3,"<p>I am trying to read some avro files stored in S3 bucket with the following code. spark version is 2.4.7</p>
<pre><code>from pyspark.sql import SparkSession
spark = SparkSession.builder.appName('Statistics').getOrCreate()
sc = spark.sparkContext
df = spark.read.format(&quot;com.databricks.spark.avro&quot;).load(&quot;s3://test/sqoopData/part-m-00000.avro&quot;)
df.show()
</code></pre>
<p>With this im getting the below error</p>
<pre><code>py4j.protocol.Py4JJavaError: An error occurred while calling o28.load.
: java.lang.ClassNotFoundException: Failed to find data source: org.apache.spark.sql.avro.AvroFileFormat. Please find packages at http://spark.apache.org/third-party-projects.html
        at org.apache.spark.sql.execution.datasources.DataSource$.lookupDataSource(DataSource.scala:678)
        at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:213)
        at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:197)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:244)
        at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)
        at py4j.Gateway.invoke(Gateway.java:282)
        at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)
        at py4j.commands.CallCommand.execute(CallCommand.java:79)
        at py4j.GatewayConnection.run(GatewayConnection.java:238)
        at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.ClassNotFoundException: org.apache.spark.sql.avro.AvroFileFormat.DefaultSource
        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)
        at org.apache.spark.sql.execution.datasources.DataSource$.$anonfun$lookupDataSource$5(DataSource.scala:652)
        at scala.util.Try$.apply(Try.scala:213)
        at org.apache.spark.sql.execution.datasources.DataSource$.$anonfun$lookupDataSource$4(DataSource.scala:652)
        at scala.util.Failure.orElse(Try.scala:224)
        at org.apache.spark.sql.execution.datasources.DataSource$.lookupDataSource(DataSource.scala:652)
</code></pre>
<p>I know this is due to not having spark avro packages within my project. But Im not sure how to import those into my project. Please note that all spark, hadoop and python are setup using a docker file. therefore some solutions given in the internet couldn't be applied. eg importing required jar files using spark shell.</p>",python|apache-spark|amazon-s3|avro|spark-avro,"<p>Take a look at this setup <a href=""https://github.com/kurtzace/python-spark-avro-query"" rel=""nofollow noreferrer"">https://github.com/kurtzace/python-spark-avro-query</a>  (dockerfile within it)</p>
<ul>
<li>This solution loads avro jar into spark jars</li>
<li>sets up spark home</li>
<li>also exposes the avro file as an API (main.py)</li>
</ul>",0
938,68289422,discord.py :: How would I make a command to add a word to a filter?,"<p>I currently have this bit of code to have a filter system.</p>
<p>This is at the top of my code;</p>
<pre><code>with open('filter.txt', 'r') as f:
    global filter
    words = f.read()
    filter = words.split()
</code></pre>
<p>While this is in my on_message part of my code;</p>
<pre><code>@client.event
async def on_message (message):
msg = message.content
    for word in filter:
        if word in msg:
            await message.delete()
</code></pre>
<p>I'm currently going into the .txt file to add words to the filter, and I'm trying to figure out how to make a command that my moderators can use to add a word to the filter if I'm not around to access the .txt file itself.</p>
<p>How would I do this?</p>",python|discord.py,"<p>You can create a command that allows moderators to add/append to the list in your filter file.</p>
<p>It could look something like this:</p>
<pre><code># Instantiates command
@client.command(name=&quot;filter&quot;, help=&quot;Adds word to filter&quot;)
# Only users with role id can use command
@commands.has_any_role(id for moderators)
async def appendFilterList(ctx, word):
    # Opens file to Append
    filter = open(&quot;filter.txt&quot;, &quot;a&quot;)
    # Appends word to list
    filter.write(word+&quot;\n&quot;)
    filter.close()
</code></pre>",1
939,68464926,How to test Django Querysets are equal using pytest-django,"<p>What's the best / most readable way to assert two querysets are equal? I've come up with a few solutions:</p>
<pre><code># option 1
assert sorted(qs1.values_list(&quot;pk&quot;, flat=True)) == sorted(qs2.values_list(&quot;pk&quot;, flat=True))

# option 2 (need to assert length first because set might remove duplicates)
assert len(qs1) == len(qs2)
assert set(qs1) == set(qs2)
</code></pre>
<p>I know Django has a method <a href=""https://docs.djangoproject.com/en/2.2/topics/testing/tools/#django.test.TransactionTestCase.assertQuerysetEqual"" rel=""nofollow noreferrer"">django.test.TransactionTestCase.assertQuerysetEqual</a>. Does pytest-django have something similar? I don't see it in the <a href=""https://pytest-django.readthedocs.io/en/latest/helpers.html"" rel=""nofollow noreferrer"">documentation</a>.</p>",python|django|django-testing|pytest-django,"<p>It's there in the starting lines of the link that you suggested:</p>
<blockquote>
<p>Assertions<br />
All of Django’s TestCase Assertions are available in pytest_django.asserts,
e.g.
<code>from pytest_django.asserts import assertTemplateUsed</code></p>
</blockquote>
<p>Similarly you can use, from <code>pytest_django.asserts import assertQuerysetEqual</code></p>",2
940,68261191,ImportError: DLL load failed while importing strings: The specified module could not be found,"<p>I am trying to load a language model in spaCy, but I get errors when I try to install the model, both in the legacy command and the newer command.</p>
<p>Installing via the legacy shortname:</p>
<pre><code>python -m spacy download en
Traceback (most recent call last):
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 188, in _run_module_as_main
    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 147, in _get_module_details
    return _get_module_details(pkg_main_name, error)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 111, in _get_module_details
    __import__(pkg_name)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\__init__.py&quot;, line 13, in &lt;module&gt;
    from . import pipeline  # noqa: F401
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\pipeline\__init__.py&quot;, line 1, in &lt;module&gt;
    from .attributeruler import AttributeRuler
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\pipeline\attributeruler.py&quot;, line 6, in &lt;module&gt;
    from .pipe import Pipe
  File &quot;spacy\pipeline\pipe.pyx&quot;, line 1, in init spacy.pipeline.pipe
ImportError: DLL load failed while importing strings: The specified module could not be found.
</code></pre>
<p>Installing using the newer full name:</p>
<pre><code>python -m spacy download en_core_web_sm
Traceback (most recent call last):
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 188, in _run_module_as_main
    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 147, in _get_module_details
    return _get_module_details(pkg_main_name, error)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 111, in _get_module_details
    __import__(pkg_name)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\__init__.py&quot;, line 13, in &lt;module&gt;
    from . import pipeline  # noqa: F401
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\pipeline\__init__.py&quot;, line 1, in &lt;module&gt;
    from .attributeruler import AttributeRuler
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\pipeline\attributeruler.py&quot;, line 6, in &lt;module&gt;
    from .pipe import Pipe
  File &quot;spacy\pipeline\pipe.pyx&quot;, line 1, in init spacy.pipeline.pipe
ImportError: DLL load failed while importing strings: The specified module could not be found.
</code></pre>
<p>Python 3.9 is installed via anaconda, spaCy v 3.0.6 is installed via pip, and I'm in Windows environment. How can I fix this?</p>",python|windows|anaconda|spacy|importerror,"<p>Been facing the same issue, was told problem comes from python3.9 so i tested with 3.8 and this didn't help however installing the following Visual C++ Redistributable solved my problem <a href=""https://www.microsoft.com/en-in/download/details.aspx?id=48145"" rel=""nofollow noreferrer"">https://www.microsoft.com/en-in/download/details.aspx?id=48145</a></p>
<p>I hope that helps!</p>",3
941,68261191,ImportError: DLL load failed while importing strings: The specified module could not be found,"<p>I am trying to load a language model in spaCy, but I get errors when I try to install the model, both in the legacy command and the newer command.</p>
<p>Installing via the legacy shortname:</p>
<pre><code>python -m spacy download en
Traceback (most recent call last):
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 188, in _run_module_as_main
    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 147, in _get_module_details
    return _get_module_details(pkg_main_name, error)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 111, in _get_module_details
    __import__(pkg_name)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\__init__.py&quot;, line 13, in &lt;module&gt;
    from . import pipeline  # noqa: F401
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\pipeline\__init__.py&quot;, line 1, in &lt;module&gt;
    from .attributeruler import AttributeRuler
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\pipeline\attributeruler.py&quot;, line 6, in &lt;module&gt;
    from .pipe import Pipe
  File &quot;spacy\pipeline\pipe.pyx&quot;, line 1, in init spacy.pipeline.pipe
ImportError: DLL load failed while importing strings: The specified module could not be found.
</code></pre>
<p>Installing using the newer full name:</p>
<pre><code>python -m spacy download en_core_web_sm
Traceback (most recent call last):
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 188, in _run_module_as_main
    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 147, in _get_module_details
    return _get_module_details(pkg_main_name, error)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\runpy.py&quot;, line 111, in _get_module_details
    __import__(pkg_name)
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\__init__.py&quot;, line 13, in &lt;module&gt;
    from . import pipeline  # noqa: F401
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\pipeline\__init__.py&quot;, line 1, in &lt;module&gt;
    from .attributeruler import AttributeRuler
  File &quot;C:\Users\mikkelson\AppData\Local\Programs\Python\Python39\lib\site-packages\spacy\pipeline\attributeruler.py&quot;, line 6, in &lt;module&gt;
    from .pipe import Pipe
  File &quot;spacy\pipeline\pipe.pyx&quot;, line 1, in init spacy.pipeline.pipe
ImportError: DLL load failed while importing strings: The specified module could not be found.
</code></pre>
<p>Python 3.9 is installed via anaconda, spaCy v 3.0.6 is installed via pip, and I'm in Windows environment. How can I fix this?</p>",python|windows|anaconda|spacy|importerror,"<p>The issue is not related to particular way you attempt to download models but rather to an issue with loading DLL (pipe.pyx) which is very likely to have a dependency on <a href=""https://visualstudio.microsoft.com/pl/thank-you-downloading-visual-studio/?sku=BuildTools&amp;rel=16"" rel=""nofollow noreferrer"">VS Build Tools</a> that you are missing (<a href=""https://stackoverflow.com/a/43045244/6573902"">see details here</a>).</p>
<p>Once you install this dependency, it should start working.</p>",0
942,68395472,"poetry install | SolverProblemError Because my_project depends on string (*) which doesn't match any versions, version solving failed","<p>I am yet to use poetry to run project, so excuse lack of understanding.</p>
<p>I successfully installed the poetry python library manager, using:</p>
<pre><code>curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python3
</code></pre>
<p>Next step <code>poetry install</code> initially returned this error:</p>
<pre><code>me@LAPTOP-G1DAPU88:~/.ssh/workers-python/workers$ poetry install

  RuntimeError

  Poetry could not find a pyproject.toml file in /home/me/.ssh/workers-python/workers or its parents

  at ~/.poetry/lib/poetry/_vendor/py3.8/poetry/core/factory.py:369 in locate
      365│             if poetry_file.exists():
      366│                 return poetry_file
      367│
      368│         else:
    → 369│             raise RuntimeError(
      370│                 &quot;Poetry could not find a pyproject.toml file in {} or its parents&quot;.format(
      371│                     cwd
      372│                 )
      373│             )
</code></pre>
<p>I soon realised I needed my own made <code>pyproject.toml</code> file. Running <code>poetry install</code> again yielded:</p>
<pre><code>$ poetry install

  TOMLError

  Invalid TOML file /home/me/.ssh/workers-python/workers/pyproject.toml: Key &quot;json &quot; already exists.

  at ~/.poetry/lib/poetry/_vendor/py3.8/poetry/core/toml/file.py:34 in read
      30│     def read(self):  # type: () -&gt; &quot;TOMLDocument&quot;
      31│         try:
      32│             return super(TOMLFile, self).read()
      33│         except (ValueError, TOMLKitError) as e:
    → 34│             raise TOMLError(&quot;Invalid TOML file {}: {}&quot;.format(self.path.as_posix(), e))
      35│
      36│     def __getattr__(self, item):  # type: (str) -&gt; Any
      37│         return getattr(self.__path, item)
      38│
</code></pre>
<p>Above error indicates there were duplicate entries.</p>
<p>Running <code>poetry install</code> again with the now updated <code>pyproject.toml</code> file in <code>cwd</code> threw this error (in the post's title):</p>
<pre><code>$ poetry install
Creating virtualenv my_project-1_EUeV5I-py3.8 in /home/me/.cache/pypoetry/virtualenvs
Updating dependencies
Resolving dependencies... (28.4s)

  SolverProblemError

  Because my_project depends on string (*) which doesn't match any versions, version solving failed.

  at ~/.poetry/lib/poetry/puzzle/solver.py:241 in _solve
      237│             packages = result.packages
      238│         except OverrideNeeded as e:
      239│             return self.solve_in_compatibility_mode(e.overrides, use_latest=use_latest)
      240│         except SolveFailure as e:
    → 241│             raise SolverProblemError(e)
      242│
      243│         results = dict(
      244│             depth_first_search(
      245│                 PackageNode(self._package, packages), aggregate_package_nodes
</code></pre>
<p>However, temporarily removing all instances <code>= &quot;*&quot;</code> gave me this error of <code>\n</code> on <code>line 12</code>... which doesn't appear to be there:</p>
<pre><code>$ poetry install

  TOMLError

  Invalid TOML file /home/me/.ssh/workers-python/workers/pyproject.toml: Unexpected character: '\n' at line 12 col 5

  at ~/.poetry/lib/poetry/_vendor/py3.8/poetry/core/toml/file.py:34 in read
      30│     def read(self):  # type: () -&gt; &quot;TOMLDocument&quot;
      31│         try:
      32│             return super(TOMLFile, self).read()
      33│         except (ValueError, TOMLKitError) as e:
    → 34│             raise TOMLError(&quot;Invalid TOML file {}: {}&quot;.format(self.path.as_posix(), e))
      35│
      36│     def __getattr__(self, item):  # type: (str) -&gt; Any
      37│         return getattr(self.__path, item)
      38│
me@LAPTOP-G1DAPU88:~/.ssh/workers-python/workers$ cat pyproject.toml
[tool.poetry]
name = &quot;my_project&quot;
version = &quot;0.1.0&quot;
description = &quot;Top-level package for my_project.&quot;
authors = [&quot;&quot;]
packages = [
    { include = &quot;my_project&quot;},
]

[tool.poetry.dependencies]
python = &quot;^3.8&quot;
click  # Suspect line
</code></pre>
<p>I have reverted this.</p>
<hr />
<p>Current <strong><code>pyproject.toml</code></strong>:</p>
<pre><code>[tool.poetry]
name = &quot;data_simulator&quot;
version = &quot;0.1.0&quot;
description = &quot;Top-level package for data_simulator.&quot;
authors = [&quot;iotahoe &lt;iotahoe@iotahoe.com&gt;&quot;] # daniel.bell@hitachivantara.com / daniel@iotahoe.com
packages = [
    { include = &quot;data_simulator&quot;},
]

[tool.poetry.dependencies]
python = &quot;^3.8&quot;
click = &quot;*&quot;
#logging = &quot;*&quot;
#os = &quot;*&quot;
#pathlib = &quot;*&quot;
#time = &quot;*&quot;
numpy = &quot;*&quot;
pandas = &quot;*&quot;
#json = &quot;*&quot;
#random = &quot;*&quot;
faker = &quot;*&quot;
transformers = &quot;4.4.2&quot;
#re = &quot;*&quot;
#itertools = &quot;*&quot;
#datetime = &quot;*&quot;
#requests = &quot;*&quot;
#copy = &quot;*&quot;
#collections = &quot;*&quot;
#collections.abc = &quot;*&quot;
#multiprocessing = &quot;*&quot;
#multiprocessing.dummy = &quot;*&quot;
nltk = &quot;*&quot;
#nltk.corpus = &quot;*&quot;
#string = &quot;*&quot;

[tool.poetry.dev-dependencies]
isort = &quot;5.6.4&quot;
black = &quot;^20.8b1&quot;
invoke = &quot;^1.4.1&quot;
coveralls = &quot;^2.2.0&quot;
pytest = &quot;^3.0&quot;
flake8 = &quot;^3.8.3&quot;
mypy = &quot;^0.782&quot;

[[tool.poetry.source]]
name = &quot;azure&quot;
url = &quot;https://pkgs.dev.azure.com/iotahoe/Halo/_packaging/private-sources/pypi/simple/&quot;
secondary = true

[build-system]
requires = [&quot;poetry&gt;=0.12&quot;]
build-backend = &quot;poetry.masonry.api&quot;
</code></pre>
<p>Note: 'name', 'authors', 'include', 'url' have been censored.</p>",solver|python-poetry|toml,"<p>As a general advise I recommend to use poetry's command line instead of creating/manipulating the <code>pyproject.toml</code>.</p>
<p>Start with a <code>poetry init</code> or <code>poetry init -n</code> and add your dependencies with <code>poetry add</code>.</p>
<p>The problem with your current <code>pyproject.toml</code> is, that you declare built-in packages as dependencies, like os, pathlib, string and others. This is why you receive the message <code>Because my_project depends on string (*) which doesn't match any versions, version solving failed.</code>, which means poetry cannot find any matching package information in the repository.</p>",5
943,68395472,"poetry install | SolverProblemError Because my_project depends on string (*) which doesn't match any versions, version solving failed","<p>I am yet to use poetry to run project, so excuse lack of understanding.</p>
<p>I successfully installed the poetry python library manager, using:</p>
<pre><code>curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python3
</code></pre>
<p>Next step <code>poetry install</code> initially returned this error:</p>
<pre><code>me@LAPTOP-G1DAPU88:~/.ssh/workers-python/workers$ poetry install

  RuntimeError

  Poetry could not find a pyproject.toml file in /home/me/.ssh/workers-python/workers or its parents

  at ~/.poetry/lib/poetry/_vendor/py3.8/poetry/core/factory.py:369 in locate
      365│             if poetry_file.exists():
      366│                 return poetry_file
      367│
      368│         else:
    → 369│             raise RuntimeError(
      370│                 &quot;Poetry could not find a pyproject.toml file in {} or its parents&quot;.format(
      371│                     cwd
      372│                 )
      373│             )
</code></pre>
<p>I soon realised I needed my own made <code>pyproject.toml</code> file. Running <code>poetry install</code> again yielded:</p>
<pre><code>$ poetry install

  TOMLError

  Invalid TOML file /home/me/.ssh/workers-python/workers/pyproject.toml: Key &quot;json &quot; already exists.

  at ~/.poetry/lib/poetry/_vendor/py3.8/poetry/core/toml/file.py:34 in read
      30│     def read(self):  # type: () -&gt; &quot;TOMLDocument&quot;
      31│         try:
      32│             return super(TOMLFile, self).read()
      33│         except (ValueError, TOMLKitError) as e:
    → 34│             raise TOMLError(&quot;Invalid TOML file {}: {}&quot;.format(self.path.as_posix(), e))
      35│
      36│     def __getattr__(self, item):  # type: (str) -&gt; Any
      37│         return getattr(self.__path, item)
      38│
</code></pre>
<p>Above error indicates there were duplicate entries.</p>
<p>Running <code>poetry install</code> again with the now updated <code>pyproject.toml</code> file in <code>cwd</code> threw this error (in the post's title):</p>
<pre><code>$ poetry install
Creating virtualenv my_project-1_EUeV5I-py3.8 in /home/me/.cache/pypoetry/virtualenvs
Updating dependencies
Resolving dependencies... (28.4s)

  SolverProblemError

  Because my_project depends on string (*) which doesn't match any versions, version solving failed.

  at ~/.poetry/lib/poetry/puzzle/solver.py:241 in _solve
      237│             packages = result.packages
      238│         except OverrideNeeded as e:
      239│             return self.solve_in_compatibility_mode(e.overrides, use_latest=use_latest)
      240│         except SolveFailure as e:
    → 241│             raise SolverProblemError(e)
      242│
      243│         results = dict(
      244│             depth_first_search(
      245│                 PackageNode(self._package, packages), aggregate_package_nodes
</code></pre>
<p>However, temporarily removing all instances <code>= &quot;*&quot;</code> gave me this error of <code>\n</code> on <code>line 12</code>... which doesn't appear to be there:</p>
<pre><code>$ poetry install

  TOMLError

  Invalid TOML file /home/me/.ssh/workers-python/workers/pyproject.toml: Unexpected character: '\n' at line 12 col 5

  at ~/.poetry/lib/poetry/_vendor/py3.8/poetry/core/toml/file.py:34 in read
      30│     def read(self):  # type: () -&gt; &quot;TOMLDocument&quot;
      31│         try:
      32│             return super(TOMLFile, self).read()
      33│         except (ValueError, TOMLKitError) as e:
    → 34│             raise TOMLError(&quot;Invalid TOML file {}: {}&quot;.format(self.path.as_posix(), e))
      35│
      36│     def __getattr__(self, item):  # type: (str) -&gt; Any
      37│         return getattr(self.__path, item)
      38│
me@LAPTOP-G1DAPU88:~/.ssh/workers-python/workers$ cat pyproject.toml
[tool.poetry]
name = &quot;my_project&quot;
version = &quot;0.1.0&quot;
description = &quot;Top-level package for my_project.&quot;
authors = [&quot;&quot;]
packages = [
    { include = &quot;my_project&quot;},
]

[tool.poetry.dependencies]
python = &quot;^3.8&quot;
click  # Suspect line
</code></pre>
<p>I have reverted this.</p>
<hr />
<p>Current <strong><code>pyproject.toml</code></strong>:</p>
<pre><code>[tool.poetry]
name = &quot;data_simulator&quot;
version = &quot;0.1.0&quot;
description = &quot;Top-level package for data_simulator.&quot;
authors = [&quot;iotahoe &lt;iotahoe@iotahoe.com&gt;&quot;] # daniel.bell@hitachivantara.com / daniel@iotahoe.com
packages = [
    { include = &quot;data_simulator&quot;},
]

[tool.poetry.dependencies]
python = &quot;^3.8&quot;
click = &quot;*&quot;
#logging = &quot;*&quot;
#os = &quot;*&quot;
#pathlib = &quot;*&quot;
#time = &quot;*&quot;
numpy = &quot;*&quot;
pandas = &quot;*&quot;
#json = &quot;*&quot;
#random = &quot;*&quot;
faker = &quot;*&quot;
transformers = &quot;4.4.2&quot;
#re = &quot;*&quot;
#itertools = &quot;*&quot;
#datetime = &quot;*&quot;
#requests = &quot;*&quot;
#copy = &quot;*&quot;
#collections = &quot;*&quot;
#collections.abc = &quot;*&quot;
#multiprocessing = &quot;*&quot;
#multiprocessing.dummy = &quot;*&quot;
nltk = &quot;*&quot;
#nltk.corpus = &quot;*&quot;
#string = &quot;*&quot;

[tool.poetry.dev-dependencies]
isort = &quot;5.6.4&quot;
black = &quot;^20.8b1&quot;
invoke = &quot;^1.4.1&quot;
coveralls = &quot;^2.2.0&quot;
pytest = &quot;^3.0&quot;
flake8 = &quot;^3.8.3&quot;
mypy = &quot;^0.782&quot;

[[tool.poetry.source]]
name = &quot;azure&quot;
url = &quot;https://pkgs.dev.azure.com/iotahoe/Halo/_packaging/private-sources/pypi/simple/&quot;
secondary = true

[build-system]
requires = [&quot;poetry&gt;=0.12&quot;]
build-backend = &quot;poetry.masonry.api&quot;
</code></pre>
<p>Note: 'name', 'authors', 'include', 'url' have been censored.</p>",solver|python-poetry|toml,"<p><strong>tl;dr:</strong> Flush the <code>*.egg-info</code> directories before running <code>poetry lock</code>.</p>
<p>This answer is not strictly related to the current issue, but a similar error message can appear in other circumstances, so I think it's valuable to share it here.</p>
<p>If you are locking in a project where sub-dependencies are directly available on the file system, some <code>*.egg-info</code> directories may interfere with the locking process, causing issues when trying to run <code>poetry install</code> in a context where those <code>*.egg-info</code> files are missing. To avoid the problem: Flush the <code>*.egg-info</code> directories  prior to locking. You should then have an updated <code>poetry.lock</code> file with more content.</p>",1
944,68477325,How to access dictionary values,"<p>I am trying to print dictionaries keys and values separately, the dictionary that've created consist of 2 values in a list: {'item':[val1,val2]}</p>
<p>How can i access the values separately?</p>
<p>This is my code where i tried to access the value of val1, but am getting both of val1 &amp; val2</p>
<pre><code>k=1
for i,j in toCart.items():
                print(&quot;(&quot;,k,&quot;)&quot;,&quot; &quot;,i,j)
                k += 1
</code></pre>",python,"<p>This was answered here: <a href=""https://stackoverflow.com/questions/50507235/how-to-access-nested-dictionary-in-python"">How to access nested dictionary in python</a></p>
<p>Only instead of the second key you put the index</p>
<p>This kind of things are called nested dictionaries/lists
To call them, here is the syntax:</p>
<pre><code>d[outer_dictionary_or_list][Inner_Dictionary_Or_List][And_So_On]
</code></pre>
<p>To get a list of dictionary keys, go here: <a href=""https://stackoverflow.com/questions/16819222/how-to-return-dictionary-keys-as-a-list-in-python"">How to return dictionary keys as a list in Python?</a></p>
<p>To get a value from a key, do dictionary_name[key_name]</p>",1
945,68446419,Use RegEx in Python to extract URL and optional query string from web server log data,"<p>Disclosure: very much a regex newbie, so I'm trying to tweak some example code I found which parses web server log data into named groups.  The snippet of my modified regex thus far that deals with the URL and query string groups:</p>
<pre><code>(?P&lt;url&gt;.+)(?P&lt;querystr&gt;\?.*)
</code></pre>
<p>This works just fine when the string against which it's applied actually does have a query string on the URL (each group gets the expected bit of the string) but fails to match if there is none.  So I tried adding a '?' after the &quot;querystr&quot; group to indicate that it was optional, i.e. <code>(?P&lt;querystr&gt;\?.*)?</code> ... if there's no query string then it works as expected (nothing is extracted into querystr), but when there is one, it is still extracted as part of url rather than separately into querystr.</p>
<p>What's the best way to identify optional groups (assuming that's even the right approach in this case)?  Thanks in advance.</p>",python-3.x|regex,"<p>You can use</p>
<pre class=""lang-py prettyprint-override""><code>^(?P&lt;url&gt;[^?]+)(?P&lt;querystr&gt;\?.*)?$
</code></pre>
<p><em>Details</em></p>
<ul>
<li><code>^</code> - start of string</li>
<li><code>(?P&lt;url&gt;[^?]+)</code> - Group &quot;url&quot;: any one or more chars other than <code>?</code></li>
<li><code>(?P&lt;querystr&gt;\?.*)?</code> - an optional Group &quot;querystr&quot;: a <code>?</code> char and then any zero or more chars other than line break chars as many as possible</li>
<li><code>$</code> - end of string.</li>
</ul>
<p>See the <a href=""https://regex101.com/r/xEvAXn/2"" rel=""nofollow noreferrer"">regex demo</a>.</p>",1
946,69192345,Query for favorites of user in Django,"<p>I want to query for the favorites a user has in Django. Every user has a profile (userprofile) and the favorites are stored in this userprofile Model. I want to be able to query for the favorites (they are userprofiles) only using the id of the user. This is what I have but does not work (it returns an empty query even though the user has 3 favorites):</p>
<pre><code>favorites = UserProfile.objects.filter(favorites__user__id=user_id)
</code></pre>
<p>My User Model:</p>
<pre><code>class User(AbstractUser):
  usertype = models.PositiveSmallIntegerField(choices=constants.USER_TYPE_CHOICES )
  profile = models.OneToOneField(UserProfile, on_delete=models.CASCADE, primary_key=False)
  token = models.CharField(max_length=10, default='')
</code></pre>
<p>My UserProfile Model:</p>
<pre><code>class UserProfile(models.Model):
  birth_date = models.DateField(default=datetime.date(1900, 1, 1))
  favorites = models.ManyToManyField('self', symmetrical=False)
</code></pre>
<p>How should I do this?
Thank you a lot!</p>",python|django|sqlite|django-models,"<pre><code>favorites = User.objects.get(id=user_id).profile.favorites.all()
</code></pre>",2
947,69042113,Yocto recipe for pydantic module,"<p>I try to include python modul pydantic from pypi.org with next recipe (generated auto by <a href=""https://github.com/NFJones/pipoe"" rel=""nofollow noreferrer"">https://github.com/NFJones/pipoe</a> ) in Yocto 2.6 Thud</p>
<pre><code>SUMMARY = &quot;Data validation and settings management using python 3.6 type hinting&quot;
HOMEPAGE = &quot;https://github.com/samuelcolvin/pydantic&quot;
AUTHOR = &quot;Samuel Colvin &lt;s@muelcolvin.com&gt;&quot;
LICENSE = &quot;MIT&quot;
LIC_FILES_CHKSUM = &quot;file://LICENSE;md5=2c02ea30650b91528657db64baea1757&quot;

inherit setuptools3

SRC_URI = &quot;https://files.pythonhosted.org/packages/b9/d2/12a808613937a6b98cd50d6467352f01322dc0d8ca9fb5b94441625d6684/pydantic-1.8.2.tar.gz&quot;
SRC_URI[md5sum] = &quot;7845d2f3c8fe8602f73f53ec5b6dfa29&quot;
SRC_URI[sha256sum] = &quot;26464e57ccaafe72b7ad156fdaa4e9b9ef051f69e175dbbb463283000c05ab7b&quot;

S = &quot;${WORKDIR}/pydantic-1.8.2&quot;

DEPENDS += &quot; &quot;
RDEPENDS_${PN} = &quot;python3-typing-extensions&quot;

BBCLASSEXTEND = &quot;native nativesdk&quot;
</code></pre>
<p>Depended module is also included with generated recipe and it's compiled OK.
Anyway I've receive error during bitbake and can't avoid it:</p>
<pre><code>Log data follows:
| DEBUG: Executing shell function do_configure
|   File &quot;setup.py&quot;, line 47
|     self.links.add(f'.. _#{id}: https://github.com/samuelcolvin/pydantic/issues/{id}')
|                                                                                     ^
| SyntaxError: invalid syntax
| WARNING: exit code 1 from a shell command.
</code></pre>
<p>Any ideas (without forge and edit the source) ?</p>",python-3.x|yocto|pydantic,"<p>The <code>python3</code> recipe in Yocto 2.6 Thud, is version Python 3.5.6.</p>
<p>However, <code>pydantic</code> PyPI package uses Python <a href=""https://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta/recipes-devtools/python/python3_3.5.6.bb?h=thud"" rel=""nofollow noreferrer""><code>f-strings</code></a> in its setup.py, which is syntax introduced in Python 3.6. Therefore, the recipe fails to build because Yocto's Python 3.5 does not recognise that syntax, hence the <code>SyntaxError</code> from the Python interpreter trying to run <code>setup.py</code>.</p>
<p>The <code>pydantic</code> <a href=""https://pydantic-docs.helpmanual.io/install/"" rel=""nofollow noreferrer"">install guide</a> says:</p>
<blockquote>
<p>pydantic has no required dependencies except python 3.6, 3.7, 3.8, or 3.9, typing-extensions, and the dataclasses backport package for python 3.6. If you've got python 3.6+ and pip installed, you're good to go.</p>
</blockquote>
<p>To build this package within Yocto, you'll need a release that includes a newer version of Python 3 - which is typically updated in Yocto's minor point releases. See below:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Yocto Release</th>
<th>Version of <code>python3</code> recipe</th>
</tr>
</thead>
<tbody>
<tr>
<td>thud (2.6)</td>
<td>3.5.6 (<a href=""https://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta/recipes-devtools/python/python3_3.5.6.bb?h=thud"" rel=""nofollow noreferrer"">source</a>),  <strong>not supported by <code>pydantic</code></strong></td>
</tr>
<tr>
<td>warrior (2.7)</td>
<td>3.7.7 (<a href=""https://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta/recipes-devtools/python/python3_3.7.7.bb?h=warrior"" rel=""nofollow noreferrer"">source</a>)</td>
</tr>
<tr>
<td>zeus (3.0)</td>
<td>3.7.8 (<a href=""https://git.yoctoproject.org/cgit/cgit.cgi/poky/tree/meta/recipes-devtools/python/python3_3.7.8.bb?h=zeus"" rel=""nofollow noreferrer"">source</a>)</td>
</tr>
<tr>
<td>dunfell (3.1)</td>
<td>3.8.11</td>
</tr>
<tr>
<td>gatesgarth (3.2)</td>
<td>3.8.5</td>
</tr>
<tr>
<td>hardknott (3.3)</td>
<td>3.9.5</td>
</tr>
</tbody>
</table>
</div>",2
948,69136912,Python tkinter text frame function text,"<p>Good evening how can print in text frame, function def print? it must be type in text frame &quot;ffedede&quot;
<a href=""https://i.stack.imgur.com/ldb61.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ldb61.jpg"" alt=""enter image description here"" /></a></p>
<pre><code>import sys
import tkinter as tk
from tkinter import *
import tkinter.ttk as ttk

def goster():
    print(&quot;ffedede&quot;)

root = tk.Tk()

root.geometry(&quot;729x506+299+135&quot;)
Ana_cerceve = ttk.Frame(root)
Ana_cerceve.place(relx=0.014, rely=0.02, relheight=0.943
        , relwidth=0.97)
Text1 = tk.Text(Ana_cerceve)
Text1.place(relx=0.04, rely=0.048, relheight=0.843, relwidth=0.903
       , bordermode='ignore')
Text1.insert(tk.END, goster) ????????????

root.mainloop()
</code></pre>",python|tkinter,"<p><code>print</code> function writes string to terminal. It can't be displayed in Tinker.</p>
<p>You should write:</p>
<pre class=""lang-py prettyprint-override""><code>import sys
import tkinter as tk
from tkinter import *
import tkinter.ttk as ttk

def goster():
    return &quot;ffedede&quot; # it's return 'ffedede'

root = tk.Tk()

root.geometry(&quot;729x506+299+135&quot;)
Ana_cerceve = ttk.Frame(root)
Ana_cerceve.place(relx=0.014, rely=0.02, relheight=0.943
        , relwidth=0.97)
Text1 = tk.Text(Ana_cerceve)
Text1.place(relx=0.04, rely=0.048, relheight=0.843, relwidth=0.903
       , bordermode='ignore')
Text1.insert(tk.END, goster()) # it must be called to get return value (ffedede)

root.mainloop()
</code></pre>",-1
949,69242895,Python concurrent.futures.ProcessPoolExecutor: Lot of RAM for large number of tasks,"<p>I am using concurrent.futures.ProcessPoolExecutor to run python codes in parallel. Basically what I do is</p>
<pre class=""lang-py prettyprint-override""><code>with concurrent.futures.ProcessPollExecutor(max_workers=10) as executor:
    futures = {executor.submit(my_function, i)
               for i in range(n)}
    
    for fut in concurrent.futures.as_completed(futures):
        print(fut.result())
</code></pre>
<p>This works fine with small number of <code>n</code> but for larger n it takes up a lot of RAM. I felt storing futures set (or list) is taking up the RAM. So I tried not to store the futures set and implemented what ever I wanted to do with the results in my_function itself. Like</p>
<pre class=""lang-py prettyprint-override""><code>with concurrent.futures.ProcessPollExecutor(max_workers=10) as executor:
    for i in range(n) :
        executor.submit(my_function, i)
</code></pre>
<p>But still It takes up a lot of RAM.</p>
<p>With some more digging, I found <a href=""https://bugs.python.org/issue34168"" rel=""nofollow noreferrer"">this</a>. I understood that the first for loop submits all the tasks, but it takes time to execute them. So those tasks which are submitted but not executed will be stored in RAM.</p>
<p>Intuitively, I understood that one should not submit all the tasks at once, rather submit them gradually as the previous tasks are completed. I don't want to add any sleep/delay in the loop. Is there any better way to do that. I really did not understand is with <code>map</code> method instead of <code>submit</code>, what the <code>chunksize</code> argument does and how to decide what value to assign to it.</p>
<p>Is there any better or elegant way to do it? Or am I completely wrong? I used GNU parallel before, and it doesn't cause such large RAM problems. I want to have a python only solution.</p>",python|python-multiprocessing|concurrent.futures|process-pool,"<p>The solution is to use queues to limit the number of concurrent futures that are pending or use a periodic pooling for completed futures futures to send batches of futures instead of all of them at once.</p>
<p>This <a href=""https://stackoverflow.com/questions/69364792/concurrent-futures-threadpoolexecutor-multithreading-runs-out-of-memory-kille/69372185#69372185"">post</a> is closely tied to your problem and may help you solving your issue.</p>",0
950,69065249,SABR system with sdeint,"<p>I'm trying to implement <a href=""https://en.wikipedia.org/wiki/SABR_volatility_model"" rel=""nofollow noreferrer"">SABR volatility model</a> using <code>sdeint</code> package. Basically, the model consists of two equations</p>
<pre><code>dx1 = 0*x1*dt + x2*x1^b*dWt
dx2 = 0*x2*dt + a*x2*dZt
</code></pre>
<p>I tried to rewrite the second example of the <a href=""https://pypi.org/project/sdeint/"" rel=""nofollow noreferrer"">official documentation</a>, but I encountered the following issue:</p>
<pre><code>SDEValueError: y0 has length 2. So G must either be a single function
              returning a matrix of shape (2, m), or else a list of m separate
              functions each returning a column of G, with shape (2,)
</code></pre>
<p>My code</p>
<pre class=""lang-py prettyprint-override""><code>import numpy as np
import sdeint

A = np.array([[0, 0],
              [ 0, 0]])
a = 1
b = 0.5

B = np.diag([1, a]).T

tspan = np.linspace(0.0, 10.0, 10001)
x0 = np.array([3.0, 3.0])

def f(x, t):
    return A.dot(x)

def G(x, t):
    BB = np.array([  x[1]*x[0]**b, x[1]  ])
    print(BB)
    return B.dot(BB)

result = sdeint.itoint(f, G, x0, tspan)
</code></pre>",python|ode|stochastic,"<p>Basically, it should be a square diagonal matrix in your case:</p>
<pre class=""lang-py prettyprint-override""><code>def G(x, t):
    BB = np.diag([  x[1]*x[0]**b, x[1] ])
    return BB
</code></pre>",0
951,69163583,Assign values to an array of indexes in Python,"<p>I have an array of size 300x5. In this the column with index 3 consists if some index and column with index 4 consists of corresponding values.</p>
<p>I have created new array in which I am trying to assign the values in index 4 at index 3 locations in this new array. I tried this but it throws an error.</p>
<pre><code>new_arr[old_arr[:,3]] = old_arr[:,4]
</code></pre>
<p>One of the example related to what I want to do</p>
<pre><code>new_arr = np.ones((200,1))
new_arr[[2,3,4]] = [22,44,11]
</code></pre>
<p>It throws an error</p>
<pre><code>ValueError: shape mismatch: value array of shape (3,)  could not be broadcast to indexing result of shape (3,1)
</code></pre>",arrays|python-3.x|indexing,"<p>With this code : <code>new_arr[old_arr[:,3]]</code> you try to access <code>new_arr</code> that index come from values are in <code>old_arr[:,3]</code> and you got <code>IndexError</code>.</p>
<p>Is this help you?</p>
<pre><code>new_arr = np.zeros((300, 5))
new_arr[:,3] = old_arr[:,4]
</code></pre>
<p>For edited question you need <code>reshape</code>:</p>
<pre><code>new_arr = np.ones((200,1))
new_arr[[2,3,4]] = np.array([2,4,6]).reshape(3,1)
# OR
# new_arr[2:5] = np.array([22,44,11]).reshape(3,1)
</code></pre>",0
952,69081571,Is there a way to suitably adjust this sklearn logistic regression function to account for multiple independent variables and fixed effects?,"<p>I would like to adapt the LogitRegression function included below to include additional independent variables and fixed effects.</p>
<p>The code below has been adapted from the answer provided here: <a href=""https://stackoverflow.com/questions/44234682/how-to-use-sklearn-when-target-variable-is-a-proportion"">how to use sklearn when target variable is a proportion</a></p>
<pre><code>from sklearn.linear_model import LinearRegression
from random import choices
from string import ascii_lowercase
import numpy as np
import pandas as pd

class LogitRegression(LinearRegression):

    def fit(self, x, p):
        p = np.asarray(p)
        y = np.log(p / (1 - p))
        return super().fit(x, y)

    def predict(self, x):
        y = super().predict(x)
        return 1 / (np.exp(-y) + 1)
    

if __name__ == '__main__':
    
    ### 1. Original version with a single independent variable
    # generate example data

    np.random.seed(42)
    n = 100
    
    ## orig version provided in the link - single random independent variable
    x = np.random.randn(n).reshape(-1,1)
    
    # defining the predictor (dependent) variable (a proportional value between 0 and 1)
    noise = 0.1 * np.random.randn(n).reshape(-1, 1)
    p = np.tanh(x + noise) / 2 + 0.5
    
    # applying the model - this works
    model = LogitRegression()
    model.fit(x, p) 

    ### 2. Adding additional independent variables and a fixed effects variable
    # creating 3 random independent variables
    x1 = np.random.randn(n)
    x2 = np.random.randn(n)
    x3 = np.random.randn(n)
    
    # a fixed effects variable
    cats = [&quot;&quot;.join(choices([&quot;France&quot;,&quot;Norway&quot;,&quot;Ireland&quot;])) for _ in range(100)]

    # combining these into a dataframe
    df = pd.DataFrame({&quot;x1&quot;:x1,&quot;x2&quot;:x2,&quot;x3&quot;:x3,&quot;countries&quot;:cats})

    # adding the fixed effects country columns
    df = pd.concat([df,pd.get_dummies(df.countries)],axis=1)
                 
    print(df)

    # ideally I would like to use the independent variables x1,x2,x3 and the fixed
    # effects column, countries, from the above df but I'm not sure how best to edit the
    # LogitRegression class to account for this. The dependent variable is a proportion.
    # x = np.array(df)
    
    model = LogitRegression()
    model.fit(x, p) 
</code></pre>
<p>I would like the predicted output to be a proportion bounded between 0 and 1. I've previously tried the sklearn linear regression method but this gave predictions outside of the expected range. I've also looked at using the statsmodels OLS function but although I can include multiple independent variables, I can't find a way to include the fixed effects.</p>
<p>Thanks in advance for any assistance you can provide with this, or please let me know if there is another suitable method that I could use instead.</p>",python|machine-learning|scikit-learn|statistics|logistic-regression,"<p>I managed to solve this using the following small adjustments when passing the independent and fixed effect variables to the function using a dataframe (writing out a simplified example of the problem helped me a lot in finding the answer):</p>
<pre><code>from sklearn.linear_model import LinearRegression
from random import choices
from string import ascii_lowercase
import numpy as np
import pandas as pd

class LogitRegression(LinearRegression):

    def fit(self, x, p):
        p = np.asarray(p)
        y = np.log(p / (1 - p))
        return super().fit(x, y)

    def predict(self, x):
        y = super().predict(x)
        return 1 / (np.exp(-y) + 1)
    

if __name__ == '__main__':
    
    # generate example data
    np.random.seed(42)
    n = 100
    
    x = np.random.randn(n).reshape(-1,1)
    
    # defining the predictor (dependent) variable (a proportional value between 0 and 1)
    noise = 0.1 * np.random.randn(n).reshape(-1, 1)
    p = np.tanh(x + noise) / 2 + 0.5
    
    # creating 3 random independent variables
    x1 = np.random.randn(n)
    x2 = np.random.randn(n)
    x3 = np.random.randn(n)
    
    # a fixed effects variable
    cats = [&quot;&quot;.join(choices([&quot;France&quot;,&quot;Norway&quot;,&quot;Ireland&quot;])) for _ in range(100)]

    # combining these into a dataframe
    df = pd.DataFrame({&quot;x1&quot;:x1,&quot;x2&quot;:x2,&quot;x3&quot;:x3,&quot;countries&quot;:cats})

    # adding the fixed effects country columns
    df = pd.concat([df,pd.get_dummies(df.countries)],axis=1)
                 
    print(df)

    # Using the independent variables x1,x2,x3 and the fixed effects column, countries, from the above df. The dependent variable is a proportion.
    # x = np.array(df)
    categories = df['countries'].unique()
    x = df.loc[:,np.concatenate(([&quot;x1&quot;,&quot;x2&quot;,&quot;x3&quot;],categories))]
    
    model = LogitRegression()
    model.fit(x, p) 

</code></pre>",0
953,69216951,How to Split and extract location name from a column in Python,"<p>I've been working with data initially exported to CSV and later imported from same CSV for further EDA. There's an address column which has 'suburb/locality' name attached to it. I was trying to find a way to split/extract those specific suburb name into a different column using excel. But i am not getting desired output. Would be helpful to know if I can do this using Python(NLTK) function?</p>
<p>Here is my sample data.</p>
<pre><code>**Address column**
4a Mcarthurs Road, Altona north
1 Neal court, Altona North 
4 Vermilion Drive, Greenvale
Lot 307 Bonds Lane, Greenvale
430 Blackshaws rd, Altona North 
159 Bonds lane, Greenvale
Lot 1105 4 compass Drive Greenvale
6005 Bethany dr tarneet
Lot 655 Potofino Way Wollert
lot 403 Binds Lane, Greenvale
157 Maidstone street Altona
11 Laramie Street, Greenvale 
10 Preveli Way Wollert 
21 Laramie Street, Greenvale 
20 taipan crt tarneit
4 bisect road greenvale
83 everton road truganina
Lot 450 Vermilion Drive, Greenvale
Lot 641 Preveli Way Wollert 
648 hogans rd tarneit
</code></pre>
<p>Desired output:</p>
<pre><code>Address                   Suburb
4a Mcarthurs Road        Altona North
1 Neal court              Altona North
4 Vermilion Drive          Greenvale
Lot 307 Bonds Lane         Greenvale
430 Blackshaws rd         Altona North
159 Bonds lane              Greenvale
Lot 1105 4 compass Drive    Greenvale
6005 Bethany dr              Tarneet
Lot 655 Potofino Way         Wollert
lot 403 Binds Lane          Greenvale
157 Maidstone street         Altona
11 Laramie Street          Greenvale
10 Preveli Way              Wollert
21 Laramie Street           Greenvale
20 taipan crt               Tarneit
4 bisect road              Greenvale
83 everton road            Truganina
Lot 450 Vermilion Drive    Greenvale
Lot 641 Preveli Way          Wollert
648 hogans rd               Tarneit
</code></pre>
<p>Any help on this will be highly appreciated.</p>
<p>Thank you in advance for the support!</p>",python|python-3.x|regex|pandas|textwrangler,"<p>I noticed you can use the following regex pattern to split address column into address and suburb:</p>
<blockquote>
<p>number word word <em><strong>split here</strong></em> word</p>
</blockquote>
<pre><code>(df[&quot;Address Column&quot;]
.str.extract(&quot;(?P&lt;Address&gt;.*\d+[\w+?|\s]\s?\w+\s+\w+),?\s(?P&lt;Suburb&gt;.*$)&quot;)
.apply(lambda x: x.str.title()))
</code></pre>
<p>Output:</p>
<pre><code>                     Address        Suburb
0          4A Mcarthurs Road  Altona North
1               1 Neal Court  Altona North
2          4 Vermilion Drive     Greenvale
3         Lot 307 Bonds Lane     Greenvale
4          430 Blackshaws Rd  Altona North
5             159 Bonds Lane     Greenvale
6   Lot 1105 4 Compass Drive     Greenvale
7            6005 Bethany Dr       Tarneet
8       Lot 655 Potofino Way       Wollert
9         Lot 403 Binds Lane     Greenvale
10      157 Maidstone Street        Altona
11         11 Laramie Street     Greenvale
12            10 Preveli Way       Wollert
13         21 Laramie Street     Greenvale
14             20 Taipan Crt       Tarneit
15             4 Bisect Road     Greenvale
16           83 Everton Road     Truganina
17   Lot 450 Vermilion Drive     Greenvale
18       Lot 641 Preveli Way       Wollert
19             648 Hogans Rd       Tarneit
</code></pre>
<p><em><strong>Note:</strong></em> I am sure this regex could be a lot neater.</p>",2
954,69216951,How to Split and extract location name from a column in Python,"<p>I've been working with data initially exported to CSV and later imported from same CSV for further EDA. There's an address column which has 'suburb/locality' name attached to it. I was trying to find a way to split/extract those specific suburb name into a different column using excel. But i am not getting desired output. Would be helpful to know if I can do this using Python(NLTK) function?</p>
<p>Here is my sample data.</p>
<pre><code>**Address column**
4a Mcarthurs Road, Altona north
1 Neal court, Altona North 
4 Vermilion Drive, Greenvale
Lot 307 Bonds Lane, Greenvale
430 Blackshaws rd, Altona North 
159 Bonds lane, Greenvale
Lot 1105 4 compass Drive Greenvale
6005 Bethany dr tarneet
Lot 655 Potofino Way Wollert
lot 403 Binds Lane, Greenvale
157 Maidstone street Altona
11 Laramie Street, Greenvale 
10 Preveli Way Wollert 
21 Laramie Street, Greenvale 
20 taipan crt tarneit
4 bisect road greenvale
83 everton road truganina
Lot 450 Vermilion Drive, Greenvale
Lot 641 Preveli Way Wollert 
648 hogans rd tarneit
</code></pre>
<p>Desired output:</p>
<pre><code>Address                   Suburb
4a Mcarthurs Road        Altona North
1 Neal court              Altona North
4 Vermilion Drive          Greenvale
Lot 307 Bonds Lane         Greenvale
430 Blackshaws rd         Altona North
159 Bonds lane              Greenvale
Lot 1105 4 compass Drive    Greenvale
6005 Bethany dr              Tarneet
Lot 655 Potofino Way         Wollert
lot 403 Binds Lane          Greenvale
157 Maidstone street         Altona
11 Laramie Street          Greenvale
10 Preveli Way              Wollert
21 Laramie Street           Greenvale
20 taipan crt               Tarneit
4 bisect road              Greenvale
83 everton road            Truganina
Lot 450 Vermilion Drive    Greenvale
Lot 641 Preveli Way          Wollert
648 hogans rd               Tarneit
</code></pre>
<p>Any help on this will be highly appreciated.</p>
<p>Thank you in advance for the support!</p>",python|python-3.x|regex|pandas|textwrangler,"<p>You can try this:</p>
<pre><code>df['local'] = df['Address column']\
                .str.extract(r'.+\, (.*)')\
                .fillna(df['Address column'].str.extract(r'.* (.*)$'))

print(df['local'])
0     Altona north
1     Altona North
2        Greenvale
3        Greenvale
4     Altona North
5        Greenvale
6        Greenvale
7          tarneet
8          Wollert
9        Greenvale
10          Altona
11       Greenvale
12         Wollert
13       Greenvale
14         tarneit
15       greenvale
16       truganina
17       Greenvale
18         Wollert
19         tarneit
Name: local, dtype: object
</code></pre>",2
955,68952243,Python Multiprocessing with class methods and class variables,"<p>I am setting up a Programm which exports PDF Files and now I want to speed it up by using Pythons multiprocessing module and the map function (I am using Python 3.7.9).</p>
<p>Now I am running into trouble applying the multiprocessing to my code. I tried to break down the code into its essentials which then looks like this:</p>
<pre><code>from multiprocessing import Pool


def callFunctionInClass(i):
    #calls the function inside the class which is supposed to be parallelized
    SomeClass().func1(i)
    

class SomeClass:
    
    def setupUi(self):
        # sets up the Graphical user interface
        return
        
    def func1(self, i):
        currentListItem = self.someList[i]
        #from here on out I create a PDF which then is exported
        
    def parallelizationFunction(self):
        #set up the pool
        pool = Pool()
        # range which the map function is supposed to iterate over
        someRange = list(range(0, len(self.someList)))
        pool.map(callFunctionInClass, someList)
        
        

if __name__ == &quot;__main__&quot;:
    #calls the class and sets up the GUI
    ui = SomeClass()
    ui.setupUi()

</code></pre>
<p>Inside the class the pool is initialized and the top level method is called using map, which then is supposed to call the class-method that I want to use multiproccessing on.
Now similar questions have already been asked here and I tried to adopt according to the answers but I still run into errors (mostly pickling errors).</p>
<p>So far I tried several things, like passing <em>self</em> to the top-level-methodor using <code>pathos ProcessingPool</code> but I could also not get this to work. My question is how can I pass class values to methods outside its scope without running into pickling errors (maybe multiprocessing.Value does the job)?
I hope my question is not too vague, otherwise I'll try to provide more sufficient information.
Many thanks in advance!</p>",python|class|multiprocessing|class-method|class-variables,"<p>You can not access a method from outside a class without an object of the class. You can either create a list outside the class and use that, or create a static method with class variables</p>
<p>Using a List outside the class</p>
<pre><code>from multiprocessing import Pool

dataList = [{'data': 'a'}, {'data': 'b'}, {'data': 'c'}]


def callFunctionInClass(i):
    # calls the function inside the class which is supposed to be parallelized
    SomeClass().func1(i)


class SomeClass:

    def setupUi(self):
        print('UI')
        # sets up the Graphical user interface
        return

    def func1(self, i):
        currentListItem = dataList[i]
        print(currentListItem)
        # from here on out I create a PDF which then is exported

    def parallelizationFunction(self):
        # set up the pool
        pool = Pool()
        # range which the map function is supposed to iterate over
        someRange = list(range(0, len(dataList)))
        pool.map(callFunctionInClass, someRange)


if __name__ == &quot;__main__&quot;:
    # calls the class and sets up the GUI
    ui = SomeClass()
    ui.setupUi()
    ui.parallelizationFunction()

</code></pre>
<p>This simply extends your code to refer to a list outside the class and it works as expected</p>
<p>Using a static method (<a href=""https://stackoverflow.com/a/735978/5236575"">Static methods in Python</a>)</p>
<pre><code>from multiprocessing import Pool



def callFunctionInClass(i):
    # calls the function inside the class which is supposed to be parallelized
    SomeClass().func1(i)


class SomeClass:
    dataList = [{'data': 'a'}, {'data': 'b'}, {'data': 'c'}]

    def setupUi(self):
        print('UI')
        # sets up the Graphical user interface
        return

    @staticmethod
    def func1(i):
        currentListItem = SomeClass.dataList[i]
        print(currentListItem)
        # from here on out I create a PDF which then is exported

    def parallelizationFunction(self):
        # set up the pool
        pool = Pool()
        # range which the map function is supposed to iterate over
        someRange = list(range(0, len(SomeClass.dataList)))
        pool.map(callFunctionInClass, someRange)


if __name__ == &quot;__main__&quot;:
    # calls the class and sets up the GUI
    ui = SomeClass()
    ui.setupUi()
    ui.parallelizationFunction()

</code></pre>",0
956,69005467,How to get return values of multi threads once one of them is finished?,"<p>I want five functions to run concurrently using python threading. Each of these functions returns a value. I want to get the return values of these functions once they complete their work. I implemented the below code that waits for threads to join sequentially. In other words, when the code is waiting for <code>thread1</code> to join, <code>thread2</code> might complete its work and return a value. But, I want first to get the first thread return value that completed its work and second get the second thread that completed its work, and so on.</p>
<pre><code>threads = []
for user in users:
    task = threading.Thread(target=monitor_wrapper, args=(user[0], user[1]))
    threads.append(task)
    task.start()
    time.sleep(delay / len(users))
for thread in threads:
    result = thread.join()
    print(result)
</code></pre>
<p>I read something about <code>Queue</code> regarding this matter.</p>",python|python-multithreading,"<p>I believe this shows how to do what you want. It uses the <a href=""https://docs.python.org/3/library/multiprocessing.html#multiprocessing.pool.Pool.apply_async"" rel=""nofollow noreferrer""><code>appy_async()</code></a> method that the <a href=""https://docs.python.org/3/library/multiprocessing.html#multiprocessing.pool.ThreadPool"" rel=""nofollow noreferrer""><code>multiprocessing.pool.ThreadPool</code></a> class has so it can specify a callback function which provides the opportunity for it to add a finishing time to the results as well as capture what they are. In the sample code the results themselves include the arguments as well as a random result value to make it possible to identify the source of each fake result.</p>
<pre><code>from multiprocessing.pool import ThreadPool
import random
import threading
import time

def monitor_wrapper(*args):
    time.sleep(random.uniform(1.0, 2.0))
    return args + (random.randint(1, 100),)

if __name__ == '__main__':

    results = []
    users = [('a', 'b'), ('c', 'd'), ('e', 'f'), ('g', 'h')]

    def callback(result):
        results.append((result, time.time()))  # Add finish time to result.

    with ThreadPool(processes=3) as pool:
        for user in users:
            pool.apply_async(monitor_wrapper, user, callback=callback)
        pool.close()  # All tasks submitted.
        pool.join()  # Wait for the worker processes to exit.

    results.sort(key=lambda t: t[1])  # Sort results by finish time.

    print('Results in order of finishing time:')
    for result in results:
        print(f'  users: {result[0][:2]}, returned value: {result[0][2]}, '
              f' finishing time: {result[1]}')
</code></pre>
<p>Here's some sample output:</p>
<pre><code>Results in order of finishing time:
  users: ('e', 'f'), returned value: 29,  finishing time: 1630452226.8134956
  users: ('c', 'd'), returned value: 67,  finishing time: 1630452226.9075007
  users: ('a', 'b'), returned value: 47,  finishing time: 1630452227.0395086
  users: ('g', 'h'), returned value: 97,  finishing time: 1630452228.1155698
</code></pre>",0
957,69005467,How to get return values of multi threads once one of them is finished?,"<p>I want five functions to run concurrently using python threading. Each of these functions returns a value. I want to get the return values of these functions once they complete their work. I implemented the below code that waits for threads to join sequentially. In other words, when the code is waiting for <code>thread1</code> to join, <code>thread2</code> might complete its work and return a value. But, I want first to get the first thread return value that completed its work and second get the second thread that completed its work, and so on.</p>
<pre><code>threads = []
for user in users:
    task = threading.Thread(target=monitor_wrapper, args=(user[0], user[1]))
    threads.append(task)
    task.start()
    time.sleep(delay / len(users))
for thread in threads:
    result = thread.join()
    print(result)
</code></pre>
<p>I read something about <code>Queue</code> regarding this matter.</p>",python|python-multithreading,"<p>Indeed, you can make the threads put their results into a queue (<a href=""https://docs.python.org/3/library/queue.html#queue.Queue.put"" rel=""nofollow noreferrer""><code>queue.put</code></a>) while the main thread waits for results from the queue (<a href=""https://docs.python.org/3/library/queue.html#queue.Queue.get"" rel=""nofollow noreferrer""><code>queue.get</code></a>). That's a thread-safe class by the way.</p>
<p>Official documentation: <a href=""https://docs.python.org/3/library/queue.html"" rel=""nofollow noreferrer"">https://docs.python.org/3/library/queue.html</a></p>",1
958,69005467,How to get return values of multi threads once one of them is finished?,"<p>I want five functions to run concurrently using python threading. Each of these functions returns a value. I want to get the return values of these functions once they complete their work. I implemented the below code that waits for threads to join sequentially. In other words, when the code is waiting for <code>thread1</code> to join, <code>thread2</code> might complete its work and return a value. But, I want first to get the first thread return value that completed its work and second get the second thread that completed its work, and so on.</p>
<pre><code>threads = []
for user in users:
    task = threading.Thread(target=monitor_wrapper, args=(user[0], user[1]))
    threads.append(task)
    task.start()
    time.sleep(delay / len(users))
for thread in threads:
    result = thread.join()
    print(result)
</code></pre>
<p>I read something about <code>Queue</code> regarding this matter.</p>",python|python-multithreading,"<p>You could use <a href=""https://docs.python.org/3/library/multiprocessing.html#multiprocessing.pool.ThreadPool"" rel=""nofollow noreferrer""><strong><code>multiprocessing.pool.ThreadPool</code></strong></a> with its <a href=""https://docs.python.org/3/library/multiprocessing.html#multiprocessing.pool.Pool.starmap"" rel=""nofollow noreferrer""><strong><code>starmap</code></strong></a> function:</p>
<pre><code>from multiprocessing.pool import ThreadPool

with ThreadPool(len(users)) as pool:
    results = pool.starmap(monitor_wrapper, users)
</code></pre>",1
959,69085266,How to draw a heptagon using Python Turtle with the point at the top?,"<p>I am drawing a heptagon using this code:</p>
<pre class=""lang-py prettyprint-override""><code>tegan.setheading(0);

for i in range (7):
    tegan.right(51.43)
    tegan.forward(100)
</code></pre>
<p>However, this code always draws the shape with a flat edge at the top and I want the point at the top. What am I doing wrong?</p>",python|turtle-graphics|python-turtle,"<p>Alternatively, you can simply do:</p>
<pre><code>import turtle

turtle.circle(-116, steps=7)

turtle.done()
</code></pre>
<p><a href=""https://i.stack.imgur.com/YnnDn.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YnnDn.png"" alt=""enter image description here"" /></a></p>",1
960,69085266,How to draw a heptagon using Python Turtle with the point at the top?,"<p>I am drawing a heptagon using this code:</p>
<pre class=""lang-py prettyprint-override""><code>tegan.setheading(0);

for i in range (7):
    tegan.right(51.43)
    tegan.forward(100)
</code></pre>
<p>However, this code always draws the shape with a flat edge at the top and I want the point at the top. What am I doing wrong?</p>",python|turtle-graphics|python-turtle,"<p>To make an heptagon, you need to rotate 360°/7 each step. To have the point up, you rotate only half on the first step.</p>
<p>One trick to do this is to rotate in one direction (here left) half the angle, and then proceed in the other direction with the full angle seven times. Another possibility is to write a condition in the loop for the first step, or split the code in two.</p>
<pre><code>import turtle
angle = 360/7
turtle.left(angle/2)
for i in range(7): 
    turtle.right(angle)
    turtle.forward(100)
</code></pre>
<p><a href=""https://i.stack.imgur.com/GGSOvb.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/GGSOvb.png"" alt=""enter image description here"" /></a></p>",2
961,69057982,Why I am not getting 'PERSON' nad 'GPE' as label after chunking using `nltk.ne_chunk`?,"<p>I am using <code>nltk.ne_chunk()</code> like this:</p>
<pre><code>sent=&quot;Azhar is asking what is weather in Chicago today? &quot;
chunks = nltk.ne_chunk(nltk.pos_tag(nltk.word_tokenize(sent)), binary=True)
print(list(chunks))
</code></pre>
<p>And getting oitput like this:</p>
<pre><code>[Tree('NE', [('Azhar', 'NNP')]), ('is', 'VBZ'), ('asking', 'VBG'), ('what', 'WP'), ('is', 
'VBZ'), ('weather', 'NN'), ('in', 'IN'), Tree('NE', [('Chicago', 'NNP')]), ('today', 'NN'), 
('?', '.')]
</code></pre>
<p>But I am expecting an output like this:</p>
<pre><code>[Tree('PERSON', [('Azhar', 'NNP')]), ('is', 'VBZ'), ('asking', 'VBG'), ('what', 'WP'), ('is', 
'VBZ'), ('weather', 'NN'), ('in', 'IN'), Tree('GPE', [('Chicago', 'NNP')]), ('today', 'NN'), 
('?', '.')]
</code></pre>
<p>Can some one tell me what I am doing wrong here?</p>",python|nlp|nltk|tagging|chunking,"<p>After installing the Spacy library and download the relevant model (<code>en_core_web_sm</code>) which is explained <a href=""https://spacy.io/usage"" rel=""nofollow noreferrer"">here</a>, you can simply extract Named-Entities!</p>
<pre><code>import spacy
NER = spacy.load(&quot;en_core_web_sm&quot;)
sent=&quot;Azhar is asking what is weather in Chicago today? &quot;
text1= NER(sent)
for word in text1.ents:
    print(word.text,word.label_)
</code></pre>
<p>output:</p>
<pre><code>Azhar PERSON
Chicago GPE
today DATE
</code></pre>
<p><strong>UPDATE</strong></p>
<p><code>nltk.ne_chunk</code> returns a nested <code>nltk.tree.Tree</code> object so you would have to traverse the Tree object to get to the NEs. <code>tree2conlltags</code> from <code>nltk.chunk</code> would do something like that!</p>
<pre><code>from nltk import word_tokenize, pos_tag, ne_chunk
from nltk.chunk import tree2conlltags

sentence = &quot;Azhar is asking what is weather in Chicago today?&quot;
print(tree2conlltags(ne_chunk(pos_tag(word_tokenize(sentence)))))
</code></pre>
<p>output in IOB format:</p>
<pre><code>[('Azhar', 'NNP', 'B-GPE'), ('is', 'VBZ', 'O'), ('asking', 'VBG', 'O'), ('what', 'WP', 'O'), ('is', 'VBZ', 'O'), ('weather', 'NN', 'O'), ('in', 'IN', 'O'), ('Chicago', 'NNP', 'B-GPE'), ('today', 'NN', 'O'), ('?', '.', 'O')]
</code></pre>
<p>more on this <a href=""https://stackoverflow.com/questions/24398536/named-entity-recognition-with-regular-expression-nltk"">here</a>!</p>",0
962,69049040,"Django Rest Framework + Serializers + Vue.js, Reset Password Functionality","<p>I am trying to create a reset password functionality, but I can't find a good tutorial that explains how to do that with DRF and Vue.js. I am using serializers to pass the data, so there are no html views involved. What is the most efficient way of creating that Reset Password Functionality?</p>
<p>I am creating new users via /api/v1/users/.</p>
<p>The idea is to send a link via email that leads to ResetPassword.vue (Don't really understand how to do that, can't find good tutorial on that neither) where the user inputs the new password and after pressing submit is redirected to Login.vue.</p>
<p>Any ideas are very appretiated. Thank you!</p>",javascript|python|django|vue.js|django-rest-framework,"<p>After trying out and inventing different options, I managed to find one that works the best. Basically, if you are using Django Rest Framework Auth token, in your database you will have a table that will hold Key: (here is user's token) and Name: (here is user's name). So, you create a view that will only have a form with email input and send button. You get the email, post it with Axios to backend and here is the View you will be managing:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>@api_view(['POST', 'GET'])
def your_method_name_that_will_be_in_urls_py(request):
    if request.method == ""POST"":
        serializer = ResetPasswordEmail(data=request.data)
        if serializer.is_valid():

            //Here you get the email from Front-End
            email = serializer.validated_data['email']

            //Here you fin the user that has that email
            user = User.objects.get(email=email)

            //Here you get the token of that user
            token = Token.objects.get(user=user)

            if user:

                //Here you pass the context of things above to send them in an email
                context = {
                    'email': email,
                    'username': user,
                    'token': token
                }

                send_mail(
                    'SUBJECT',
                    render_to_string('emails/reset_password.txt', context),
                    'COMPANY NAME and No Reply',
                    [email],
                    fail_silently=False,
                    auth_user=None, auth_password=None, connection=None, html_message=None
                )
                serializer.save(token=token, slug=token)

            return Response(serializer.data, status=status.HTTP_201_CREATED)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)</code></pre>
</div>
</div>
</p>
<p>And the Serializer like this one:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>class ResetPasswordEmail(serializers.ModelSerializer):
    class Meta:
        model = ResetPassword
        fields = (
            'email',
        )</code></pre>
</div>
</div>
</p>
<p>Also, I created a model for that Password Reset:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>class ResetPassword(models.Model):
    email = models.CharField(max_length=200, null=True)
    token = models.CharField(max_length=255, null=True)
    slug = models.SlugField(max_length=255)

    def __str__(self):
        return self.token
    //This thing creates users personalized link, that they visit and have a enter new password view in Front-End.
    def get_absolute_url(self):
        return f'/{self.token}/'</code></pre>
</div>
</div>
</p>",1
963,67007006,Selecting element of a list based on the value of the before and next element,"<p>Suppose I have the following list:</p>
<pre><code>l = [2, 2, 2, 1, 1, 3, 1]
</code></pre>
<p>I want to go through it and pick elements such that the element before and after is bigger than 1, the result should be:</p>
<pre><code>[2,2]
</code></pre>
<p>I tried doing <code>[i for i in l if i&gt;1]</code> yet that gives all the elements that are bigger than 1, namely: <code>[2, 2, 2, 3]</code>. Note for the 0th element since there is no element before that we should only look up at the 1st element.</p>",python|list,"<p>A simple approach for you to understand would be using some <code>for</code> loops along with conditions based on the criteria you have put forth.</p>
<pre><code>out = []

for idx in range(len(l)):
    if idx == 0:  # check to see if it is the first element
        if l[idx + 1] &gt; 1:
            out.append(l[idx + 1])
    else:
        try:
            after = l[idx + 1]  # check to see if we reached the end of the list
        except IndexError:
            break
        
        before = l[idx - 1]
        if before &gt; 1 and after &gt; 1:
            out.append(l[idx])

print(out)
&gt;&gt; [2, 2]
    
</code></pre>",0
964,67007006,Selecting element of a list based on the value of the before and next element,"<p>Suppose I have the following list:</p>
<pre><code>l = [2, 2, 2, 1, 1, 3, 1]
</code></pre>
<p>I want to go through it and pick elements such that the element before and after is bigger than 1, the result should be:</p>
<pre><code>[2,2]
</code></pre>
<p>I tried doing <code>[i for i in l if i&gt;1]</code> yet that gives all the elements that are bigger than 1, namely: <code>[2, 2, 2, 3]</code>. Note for the 0th element since there is no element before that we should only look up at the 1st element.</p>",python|list,"<p>The result should be <code>[2]</code>, not <code>[2, 2]</code>, because for the 0th element the previous element is not defined:</p>
<pre><code>lst = [2, 2, 2, 1, 1, 3, 1]
selected_lst = [lst[i] for i in range(1, len(lst) - 1) if lst[i-1] &gt; 1 and lst[i+1] &gt; 1]
print(selected_lst)
# [2]
</code></pre>
<p>If you really need the edge elements, add them as special cases, for example, add this to the code:</p>
<pre><code>if lst[1] &gt; 1:
    selected_lst = [lst[0]] + selected_lst
if lst[-2] &gt; 1:
    selected_lst = selected_lst + [lst[-1]] 
print(selected_lst)
# [2, 2, 1]
</code></pre>
<p>Note that the selected list will now be <code>[2, 2, 1]</code> - still not <code>[2, 2]</code> that you mentioned.</p>",0
965,67007006,Selecting element of a list based on the value of the before and next element,"<p>Suppose I have the following list:</p>
<pre><code>l = [2, 2, 2, 1, 1, 3, 1]
</code></pre>
<p>I want to go through it and pick elements such that the element before and after is bigger than 1, the result should be:</p>
<pre><code>[2,2]
</code></pre>
<p>I tried doing <code>[i for i in l if i&gt;1]</code> yet that gives all the elements that are bigger than 1, namely: <code>[2, 2, 2, 3]</code>. Note for the 0th element since there is no element before that we should only look up at the 1st element.</p>",python|list,"<pre><code>([l[0]] if l[1] &gt; 1 else []) + filter(
  lambda a: a is not None, 
  [b if a &gt; 1 and c &gt; 1 else None for (a,b,c) in zip(l, l[1:], l[2:])])
</code></pre>
<p>[2, 2]</p>
<p>What's going on here? First you extract 3-tuple (a,b,c) of consecutive numbers and then either return the number in the middle if your condition holds, or None if it doesn't, and then you filter out None-s with a lambda.</p>
<p>I missed &quot;0th element&quot;, so adjusted my original code to prepend it in the case when l[1] &gt; 1 using python's wonderful ternary syntax.</p>",-2
966,67013490,Python : I get vertical text when I use writerows(zip()),"<p>I am trying to write a Python script to create a file of multiple rows with a title and the values stored in columns. I am very new to Python so there might be a stupid mistake somewhere but I have tried many things, looked on the Internet but I cannot find how to solve my isssue...</p>
<pre><code>import csv
A=[1,2]
B=[1.5,0.5]
C=[2.5,3]
with open('test.txt', 'w', newline='', encoding='utf-8') as f:
    writer = csv.writer(f, delimiter='\t')
    writer.writerows(zip(&quot;TestA&quot;,&quot;TestB&quot;,&quot;TestC&quot;))
    writer.writerows(zip(A,B,C))
</code></pre>
<p>I am expecting something like :</p>
<pre><code>TestA     TestB     TestC
1    1.5    2.5
2    0.5    3
</code></pre>
<p>But I get :</p>
<pre><code>T     T     T
e     e     e
s     s     s
t     t     t
A     B     C
1     1.5   2.5
2     0.5   3
</code></pre>
<p>Does anyone have a idea to get what I want please ?
Thank you !</p>",python|file|row|vertical-text,"<p>There is no way to write horizontally using <code>writer.writerows()</code> without having to do some complex list transposing. Instead why not use <code>File write()</code> like so:</p>
<pre><code>A=[1,2]
B=[1.5,0.5]
C=[2.5,3]
with open('test.txt', 'w', newline='', encoding='utf-8') as f:
    f.write('TestA\tTestB\tTestC\n')
    for i in range(2):
        f.write(str(A[i]) + &quot;\t&quot;)
        f.write(str(B[i]) + &quot;\t&quot;)
        f.write(str(C[i]) + &quot;\t\n&quot;)
</code></pre>
<p>which produces:</p>
<pre><code>TestA   TestB   TestC
1   1.5 2.5 
2   0.5 3   

</code></pre>
<p>Here's another link that should be helpful: <a href=""https://stackoverflow.com/questions/6159900/correct-way-to-write-line-to-file"">Correct way to write line to file?</a></p>",0
967,66810024,Unable to import installed python modules in Rmarkdown with reticulate,"<p>I just installed the R package 'reticulate' and I found it especially useful. But with one con that I need to re-install python module (i.e. pandas) I have already installed.
The python engine is miniconda and the evnv is by default.
How can I specify the python interpreter so that I dont need to re-install all the installed module?
(After some search, I guess it has sth to do with 'virtualenv-tools ' in reticulate?)
By the way, I used to execute python with pycharm and the interpreter is system interpreter located in c://python//python.exe</p>
<p>Any idea?</p>",python|module|r-markdown|reticulate,"<p>Have you looked at <a href=""https://rstudio.github.io/reticulate/articles/r_markdown.html"" rel=""nofollow noreferrer"">this page</a>, you have to specify which Python engine you want, in this case miniconda, but just have to tell Rmarkdown where that is located on your computer using the <code>use_python</code> function.</p>
<pre><code>```{r setup, include=FALSE}
library(reticulate)
use_python('/location/to/engine')
```
</code></pre>",0
968,66880163,Receiving coordinates from inference Pytorch,"<p>I'm trying to get the coordinates of the pixels inside of a mask that is generated by Pytorches DefaultPredictor, to later on get the polygon corners and use this in my application.</p>
<p>However, DefaultPredictor produced a tensor of pred_masks, in the following format: [False, False ... False], ... [False, False, .. False]
Where the length of each individual list is length of the image, and the number of total lists is the height of the image.</p>
<p>Now, as I need to get the pixel coordinates that are inside of the mask, the simple solution seemed to be looping through the pred_masks, checking the value and if == &quot;True&quot; creating tuples of these and adding them to a list. However, as we are talking about images with width x height of about 3200 x 1600, this is a relatively slow process (~4 seconds to loop through a single 3200x1600, yet as there are quite some objects for which I need to get the inference in the end - this will end up being incredibly slow).</p>
<p>What would be the smarter way to get the the coordinates (mask) of the detected object using the pytorch (detectron2) model?</p>
<p>Please find my code below for reference:</p>
<pre><code>from __future__ import print_function

from detectron2.engine import DefaultPredictor
from detectron2.config import get_cfg
from detectron2.data import MetadataCatalog
from detectron2.data.datasets import register_coco_instances


import cv2
import time


# get image
start = time.time()

im = cv2.imread(&quot;inputImage.jpg&quot;)

# Create config
cfg = get_cfg()
cfg.merge_from_file(&quot;detectron2_repo/configs/COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_3x.yaml&quot;)
cfg.MODEL.ROI_HEADS.SCORE_THRESH_TEST = 0.5 # Set threshold for this model
cfg.MODEL.WEIGHTS = &quot;model_final.pth&quot; # Set path model .pth
cfg.MODEL.ROI_HEADS.NUM_CLASSES = 1
cfg.MODEL.DEVICE='cpu'

register_coco_instances(&quot;dataset_test&quot;,{},&quot;testval.json&quot;,&quot;Images_path&quot;)
test_metadata = MetadataCatalog.get(&quot;dataset_test&quot;)


# Create predictor
predictor = DefaultPredictor(cfg)

# Make prediction
outputs = predictor(im)

 
#Loop through the pred_masks and check which ones are equal to TRUE, if equal, add the pixel values to the true_cords_list
outputnump = outputs[&quot;instances&quot;].pred_masks.numpy()

true_cords_list = []
x_length = range(len(outputnump[0][0]))
#y kordinaat on range number
for y_cord in range(len(outputnump[0])):
    #x cord
    for x_cord in x_length:
        if str(outputnump[0][y_cord][x_cord]) == &quot;True&quot;:
            inputcoords = (x_cord,y_cord)
            true_cords_list.append(inputcoords)

print(str(true_cords_list))

end = time.time()

print(f&quot;Runtime of the program is {end - start}&quot;) # 14.29468035697937
</code></pre>
<p>//</p>
<blockquote>
</blockquote>
<p>EDIT:
After changing the for loop partially to compress - I've managed to reduce the runtime of the for loop by ~3x - however, ideally I would like to receive this from the predictor itself if possible.</p>
<pre><code>y_length = len(outputnump[0])
x_length = len(outputnump[0][0])
true_cords_list = []
for y_cord in range(y_length):
    x_cords = list(compress(range(x_length), outputnump[0][y_cord]))
    if x_cords:
        for x_cord in x_cords:
            inputcoords = (x_cord,y_cord)
            true_cords_list.append(inputcoords)
</code></pre>",python-3.x|deployment|pytorch|semantic-segmentation|detectron,"<p>The problem is easily solvable with sufficient knowledge about NumPy or PyTorch <strong>native array handling</strong>, which allows 100x speedups compared to Python loops. You can study the <a href=""https://numpy.org/doc/stable/user/quickstart.html"" rel=""nofollow noreferrer"">NumPy library</a>, and PyTorch tensors are similar to NumPy in behaviour.</p>
<p><strong>How to get indices of values in NumPy</strong>:</p>
<pre><code>import numpy as np
arr = np.random.rand(3,4) &gt; 0.5
ind = np.argwhere(arr)[:, ::-1]
print(arr)
print(ind)
</code></pre>
<p>In your particular case this will be</p>
<pre><code>ind = np.argwhere(outputnump[0])[:, ::-1]
</code></pre>
<p><strong>How to get indices of values in PyTorch</strong>:</p>
<pre><code>import torch
arr = torch.rand(3, 4) &gt; 0.5
ind = arr.nonzero()
ind = torch.flip(ind, [1])
print(arr)
print(ind)
</code></pre>
<p><code>[::-1]</code> and <code>.flip</code> are used to inverse the order of coordinates from (y, x) to (x, y).</p>
<p>NumPy and PyTorch even allow checking simple conditions and getting the indices of values that meet these conditions, for further understanding see the according <a href=""https://numpy.org/doc/stable/user/basics.indexing.html"" rel=""nofollow noreferrer"">NumPy docs article</a></p>
<hr />
<p>When asking, you should provide links for your problem context. This question is actually about <a href=""https://github.com/facebookresearch/detectron2"" rel=""nofollow noreferrer"">Facebook object detector</a>, where they provide a nice demo Colab notebook.</p>",2
969,67018753,Errno 13 Permission on MacOS,"<p>I run the python code and seems to hit permission problem on Mac. I should have the admin rights of my own Mac. Why is that?</p>
<p>Code:</p>
<pre><code>import os

os.makedirs(os.path.join('..', 'data'), exist_ok=True)
</code></pre>
<p>Message:</p>
<pre><code>PermissionError                           Traceback (most recent call last)
&lt;ipython-input-1-e97ad01ce9aa&gt; in &lt;module&gt;
      1 import os
      2 
----&gt; 3 os.makedirs(os.path.join('..', 'data'), exist_ok=True)

~/opt/anaconda3/lib/python3.8/os.py in makedirs(name, mode, exist_ok)
    221             return
    222     try:
--&gt; 223         mkdir(name, mode)
    224     except OSError:
    225         # Cannot rely on checking for EEXIST, since the operating system

PermissionError: [Errno 13] Permission denied: '../data'
</code></pre>",python|macos,"<p>You usually only have admin rights on the mac with command run with <code>sudo</code>.</p>
<pre><code>± touch /var/log/banana
touch: /var/log/banana: Permission denied 

± sudo touch /var/log/banana
± ls /var/log/banana
/var/log/banana
</code></pre>
<p>So you could either run your Python code with <code>sudo</code> (make sure you know what your code is doing as you could easily break you mac by deleting a file you didnt mean to) or much prefered! just write to a directory in say your <code>Users</code> directory where you have permissions anyway</p>",0
970,66831613,Python script not stopping on sys.exit(),"<p>I wrote a script that can draw polylines (<a href=""https://github.com/MrSmoer/SkribblCheat"" rel=""nofollow noreferrer"">it over on github</a>) from ScalableVectorGraphics(.svg) by moving the Mouse accordingly.</p>
<p>When you are handing the control over your mouse to a script, a killswitch is certainly necessary, so I found an example for a Keyboard listener somwhere on the Internet:</p>
<pre><code>def on_press(key):
try:
    sys.exit()
    print('alphanumeric key {0} pressed'.format(key.char))
    print('adsfadfsa')
except AttributeError:
    print('special key {0} pressed'.format(
        key))

def main():
listener = keyboard.Listener( #TODO fix sys.exit()
    on_press=on_press)
listener.start()

if __name__ == '__main__':
main()
</code></pre>
<p>It seems to be working: If i add a a print statement before the sys.exit() it is instantly executed properly.
But with sys.exit() it keeps moving my mouse and the python interpreter is still on Taskmanager. I don't know why it keeps executing.</p>
<p>Thank you in advance for your suggestions.
MrSmoer</p>
<p>Solution was: os._exit(1)</p>
<p>Full Sourcecode:</p>
<pre><code>from pynput import mouse as ms
from pynput import keyboard
from pynput.mouse import Button, Controller
import threading
import time
from xml.dom import minidom
import re

sys.path.append('/Users/MrSmoer/Desktop/linedraw-master')

mouse = ms.Controller()
tlc = None
brc = None
brc_available = threading.Event()

biggestY = 0
biggestX = 0

drwblCnvsX = 0
drwblCnvsY = 0


def on_click(x, y, button, pressed):
    if not pressed:
        # Stop listener
        return False


def on_press(key):
    try:
        sys.exit()
        print('alphanumeric key {0} pressed'.format(key.char))
        print('adsfadfsa')
    except AttributeError:
        print('special key {0} pressed'.format(
            key))


def initialize():
    print(&quot;Please select your programm and then click at the two corners of the canvas. Press any key to cancel.&quot;)
    with ms.Listener(
            on_click=on_click) as listener:
        listener.join()

    print('please middleclick, when you are on top left corner of canvas')
    with ms.Listener(
            on_click=on_click) as listener:
        listener.join()

    global tlc
    tlc = mouse.position

    print('please middleclick, when you are on bottom left corner of canvas')
    with ms.Listener(
            on_click=on_click) as listener:
        listener.join()
    global brc
    brc = mouse.position
    mouse.position = tlc
    print('thread finished')
    brc_available.set()


def getDrawabableCanvasSize(polylines):
    global biggestX
    global biggestY

    for i in range(len(polylines)):  # goes throug all polylines
        points = hyphen_split(polylines[i])  # Splits polylines to individual points
        for c in range(len(points)):  # goes throug all points on polyline
            cord = points[c].split(',')  # splits points in x and y axis
            if float(cord[0]) &gt; (biggestX - 5):
                biggestX = float(cord[0]) + 5
            if float(cord[1]) &gt; (biggestY - 5):
                biggestY = float(cord[1]) + 5
    print('TLC: ', tlc)
    print('bigX: ', biggestX)
    print('bigY: ', biggestY)

    cnvswidth = tuple(map(lambda i, j: i - j, brc, tlc))[0]
    cnvsheight = tuple(map(lambda i, j: i - j, brc, tlc))[1]
    cnvsapr = cnvswidth / cnvsheight
    print('Canvasaspr: ', cnvsapr)
    drwblcnvaspr = biggestX / biggestY
    print('drwnble aspr: ', drwblcnvaspr)

    if drwblcnvaspr &lt; cnvsapr:  # es mus h vertikal saugend
        print('es mus h vertikal saugend')
        finalheight = cnvsheight
        finalwidth = finalheight * drwblcnvaspr

    else:  # es muss horizontal saugend, oder aspect ratio ist eh gleich
        print('es muss horizontal saugend, oder aspect ratio ist eh gleich')
        finalwidth = cnvswidth
    scalefactor = finalwidth / biggestX
    print(scalefactor)
    return scalefactor


def drawPolyline(polyline, scalefactor):
    points = hyphen_split(polyline)
    #print(points)
    beginpoint = tlc
    for c in range(len(points)):  # goes throug all points on polyline
        beginpoint = formatPoint(points[c], scalefactor)
        if len(points) &gt; c + 1:
            destpoint = formatPoint(points[c + 1], scalefactor)
            mouse.position = beginpoint
            time.sleep(0.001)
            mouse.press(Button.left)
            # time.sleep(0.01)
            mouse.position = destpoint
            # time.sleep(0.01)
            mouse.release(Button.left)
        else:
            destpoint = tlc
            #print(&quot;finished line&quot;)
    mouse.release(Button.left)


def formatPoint(p, scale):
    strcord = p.split(',')
    #print(scale)
    #print(tlc)
    x = float(strcord[0]) * scale + tlc[0]  # + drwblCnvsX/2
    y = float(strcord[1]) * scale + tlc[1]  # + drwblCnvsY/2
    #print('x: ', x)
    #print('y: ', y)
    thistuple = (int(x), int(y))
    return thistuple


def hyphen_split(a):
    return re.findall(&quot;[^,]+\,[^,]+&quot;, a)
    # ['id|tag1', 'id|tag2', 'id|tag3', 'id|tag4']


def main():
    listener = keyboard.Listener( #TODO fix sys.exit()
        on_press=on_press)
    listener.start()

    thread = threading.Thread(target=initialize()) #waits for initializing function (two dots)
    thread.start()
    brc_available.wait()

   # print(sys.argv[1])
    doc = minidom.parse('/Users/MrSmoer/Desktop/linedraw-master/output/out.svg')  # parseString also exists
    try:
        if sys.argv[1] == '-ip':
            doc = minidom.parse(sys.argv[2])
    except IndexError:
        print('Somethings incorrect1')

    polylines = NotImplemented

    try:
        doc = minidom.parse('/Users/MrSmoer/Desktop/linedraw-master/output/out.svg')  # parseString also exists
        # /Users/MrSmoer/Desktop/linedraw-master/output/output2.svg
        #doc = minidom.parse('/Users/MrSmoer/Desktop/Test.svg')
        polylines = [path.getAttribute('points') for path
                     in doc.getElementsByTagName('polyline')]
        doc.unlink()
    except:
        print('Somethings incorrect3')

    # print(polylines)

    scalefactor = getDrawabableCanvasSize(polylines)

    for i in range(len(polylines)):
        drawPolyline(polylines[i], scalefactor)


if __name__ == '__main__':
    main()
</code></pre>",python|listener|exit,"<p>That <code>sys.exit()</code> ends up killing the thread that it's executing it, but you program seems to take advantage of multiple threads.</p>
<p>You will need to kill all the threads of the program including the main one if you want to exit.</p>",0
971,66831613,Python script not stopping on sys.exit(),"<p>I wrote a script that can draw polylines (<a href=""https://github.com/MrSmoer/SkribblCheat"" rel=""nofollow noreferrer"">it over on github</a>) from ScalableVectorGraphics(.svg) by moving the Mouse accordingly.</p>
<p>When you are handing the control over your mouse to a script, a killswitch is certainly necessary, so I found an example for a Keyboard listener somwhere on the Internet:</p>
<pre><code>def on_press(key):
try:
    sys.exit()
    print('alphanumeric key {0} pressed'.format(key.char))
    print('adsfadfsa')
except AttributeError:
    print('special key {0} pressed'.format(
        key))

def main():
listener = keyboard.Listener( #TODO fix sys.exit()
    on_press=on_press)
listener.start()

if __name__ == '__main__':
main()
</code></pre>
<p>It seems to be working: If i add a a print statement before the sys.exit() it is instantly executed properly.
But with sys.exit() it keeps moving my mouse and the python interpreter is still on Taskmanager. I don't know why it keeps executing.</p>
<p>Thank you in advance for your suggestions.
MrSmoer</p>
<p>Solution was: os._exit(1)</p>
<p>Full Sourcecode:</p>
<pre><code>from pynput import mouse as ms
from pynput import keyboard
from pynput.mouse import Button, Controller
import threading
import time
from xml.dom import minidom
import re

sys.path.append('/Users/MrSmoer/Desktop/linedraw-master')

mouse = ms.Controller()
tlc = None
brc = None
brc_available = threading.Event()

biggestY = 0
biggestX = 0

drwblCnvsX = 0
drwblCnvsY = 0


def on_click(x, y, button, pressed):
    if not pressed:
        # Stop listener
        return False


def on_press(key):
    try:
        sys.exit()
        print('alphanumeric key {0} pressed'.format(key.char))
        print('adsfadfsa')
    except AttributeError:
        print('special key {0} pressed'.format(
            key))


def initialize():
    print(&quot;Please select your programm and then click at the two corners of the canvas. Press any key to cancel.&quot;)
    with ms.Listener(
            on_click=on_click) as listener:
        listener.join()

    print('please middleclick, when you are on top left corner of canvas')
    with ms.Listener(
            on_click=on_click) as listener:
        listener.join()

    global tlc
    tlc = mouse.position

    print('please middleclick, when you are on bottom left corner of canvas')
    with ms.Listener(
            on_click=on_click) as listener:
        listener.join()
    global brc
    brc = mouse.position
    mouse.position = tlc
    print('thread finished')
    brc_available.set()


def getDrawabableCanvasSize(polylines):
    global biggestX
    global biggestY

    for i in range(len(polylines)):  # goes throug all polylines
        points = hyphen_split(polylines[i])  # Splits polylines to individual points
        for c in range(len(points)):  # goes throug all points on polyline
            cord = points[c].split(',')  # splits points in x and y axis
            if float(cord[0]) &gt; (biggestX - 5):
                biggestX = float(cord[0]) + 5
            if float(cord[1]) &gt; (biggestY - 5):
                biggestY = float(cord[1]) + 5
    print('TLC: ', tlc)
    print('bigX: ', biggestX)
    print('bigY: ', biggestY)

    cnvswidth = tuple(map(lambda i, j: i - j, brc, tlc))[0]
    cnvsheight = tuple(map(lambda i, j: i - j, brc, tlc))[1]
    cnvsapr = cnvswidth / cnvsheight
    print('Canvasaspr: ', cnvsapr)
    drwblcnvaspr = biggestX / biggestY
    print('drwnble aspr: ', drwblcnvaspr)

    if drwblcnvaspr &lt; cnvsapr:  # es mus h vertikal saugend
        print('es mus h vertikal saugend')
        finalheight = cnvsheight
        finalwidth = finalheight * drwblcnvaspr

    else:  # es muss horizontal saugend, oder aspect ratio ist eh gleich
        print('es muss horizontal saugend, oder aspect ratio ist eh gleich')
        finalwidth = cnvswidth
    scalefactor = finalwidth / biggestX
    print(scalefactor)
    return scalefactor


def drawPolyline(polyline, scalefactor):
    points = hyphen_split(polyline)
    #print(points)
    beginpoint = tlc
    for c in range(len(points)):  # goes throug all points on polyline
        beginpoint = formatPoint(points[c], scalefactor)
        if len(points) &gt; c + 1:
            destpoint = formatPoint(points[c + 1], scalefactor)
            mouse.position = beginpoint
            time.sleep(0.001)
            mouse.press(Button.left)
            # time.sleep(0.01)
            mouse.position = destpoint
            # time.sleep(0.01)
            mouse.release(Button.left)
        else:
            destpoint = tlc
            #print(&quot;finished line&quot;)
    mouse.release(Button.left)


def formatPoint(p, scale):
    strcord = p.split(',')
    #print(scale)
    #print(tlc)
    x = float(strcord[0]) * scale + tlc[0]  # + drwblCnvsX/2
    y = float(strcord[1]) * scale + tlc[1]  # + drwblCnvsY/2
    #print('x: ', x)
    #print('y: ', y)
    thistuple = (int(x), int(y))
    return thistuple


def hyphen_split(a):
    return re.findall(&quot;[^,]+\,[^,]+&quot;, a)
    # ['id|tag1', 'id|tag2', 'id|tag3', 'id|tag4']


def main():
    listener = keyboard.Listener( #TODO fix sys.exit()
        on_press=on_press)
    listener.start()

    thread = threading.Thread(target=initialize()) #waits for initializing function (two dots)
    thread.start()
    brc_available.wait()

   # print(sys.argv[1])
    doc = minidom.parse('/Users/MrSmoer/Desktop/linedraw-master/output/out.svg')  # parseString also exists
    try:
        if sys.argv[1] == '-ip':
            doc = minidom.parse(sys.argv[2])
    except IndexError:
        print('Somethings incorrect1')

    polylines = NotImplemented

    try:
        doc = minidom.parse('/Users/MrSmoer/Desktop/linedraw-master/output/out.svg')  # parseString also exists
        # /Users/MrSmoer/Desktop/linedraw-master/output/output2.svg
        #doc = minidom.parse('/Users/MrSmoer/Desktop/Test.svg')
        polylines = [path.getAttribute('points') for path
                     in doc.getElementsByTagName('polyline')]
        doc.unlink()
    except:
        print('Somethings incorrect3')

    # print(polylines)

    scalefactor = getDrawabableCanvasSize(polylines)

    for i in range(len(polylines)):
        drawPolyline(polylines[i], scalefactor)


if __name__ == '__main__':
    main()
</code></pre>",python|listener|exit,"<p>Sometimes, when writing a multithreadded app, raise SystemExit and sys.exit() both kills only the running thread. On the other hand, os._exit() exits the whole process.</p>
<p>While you should generally prefer sys.exit because it is more &quot;friendly&quot; to other code, all it actually does is raise an exception.</p>
<p>If you are sure that you need to exit a process immediately, and you might be inside of some exception handler which would catch SystemExit, there is another function - os._exit - which terminates immediately at the C level and does not perform any of the normal tear-down of the interpreter</p>
<p>A simple way to terminate a Python script early is to use the built-in quit() function. There is no need to import any library, and it is efficient and simple.</p>
<p>Example:</p>
<pre><code>       #do stuff
     if this == that:
      quit()
</code></pre>
<p>You may try these options!!
Hope it works fine!! If not tell us, we will try more solutions!</p>",1
972,67109496,Best way to join two paths?,"<p>I'm trying to understand the best way to join two paths in Python. I'm able to get my expected result by using string concatenation, but I understand that is not the preferred way of working with paths. I'm trying to preserve the folder structure of a file, but move it to a new defined output directory.</p>
<p>For example -</p>
<pre><code>import os

orig_file = r&quot;F:\Media\Music\test_doc.txt&quot;    
output_dir = r&quot;D:\output_dir&quot;

## preferred method, but unexpected result
new_file = os.path.join(output_dir, os.path.splitdrive(orig_file)[1])
print(new_file)
## new file = D:\Media\Music\test_doc.txt

## What I want
new_file = output_dir + os.path.splitdrive(orig_file)[1]
print(new_file)
## new file = D:\output_dir\Media\Music\test_doc.txt
</code></pre>
<p>As you can see, when I use <code>os.path.join()</code> it seems to discard the <code>&quot;output_dir&quot;</code> folder on the <code>D:</code> drive.</p>",python|python-3.x|string|windows,"<p>In Python 3.4+, the best way to do it is via the more modern and object-oriented  <a href=""https://docs.python.org/3/library/pathlib.html#module-pathlib"" rel=""nofollow noreferrer"">pathlib</a> module.</p>
<pre><code>from pathlib import Path

orig_file = Path(r&quot;F:\Media\Music\test_doc.txt&quot;)
output_dir = Path(r&quot;D:\output_dir&quot;)
new_file = output_dir.joinpath(*orig_file.parts[1:])
print(f'{new_file=}')  # -&gt; new_file=WindowsPath('D:/output_dir/Media/Music/test_doc.txt')
</code></pre>",2
973,66884101,Changing the elements of double array,"<p>I created array like this,</p>
<pre><code>matrix = [[&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],
      [&quot; &quot;,&quot; &quot;,&quot; &quot;,&quot; &quot;,&quot; &quot;,&quot; &quot;,&quot; &quot;,&quot; &quot;,&quot; &quot;,&quot; &quot;,&quot; &quot;],
      [&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],
      [&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],
      [&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],
      [&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],
      [&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],
      [&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],
      [&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],
      [&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],
      [&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;],
      [&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;]]

print('\n'.join([' '.join([str(cell) for cell in row]) for row in matrix]))
</code></pre>
<p>I want to changing element of array. For example, when user enter input like 0 2, i wanted to change the matrix[0][2] with &quot; | &quot; how can i do that? I know how can i get input i am just  curious about replacing  part.</p>",python|arrays,"<p>You can use this snippet:</p>
<pre><code>def change(matrix, i, j, element):
    matrix[i][j] = element
    return matrix
</code></pre>
<p>You don't need a function to do this!</p>",0
974,66861174,Python: How can I add a parameter to an itertools function?,"<p>I want to create a function which returns a function creating an iterator (like something from itertools), but with a parameter set by the outer function.</p>
<p>For example, say I want to take a running sum, but exclude values that are larger than a given cutoff (which is the parameter of the function).</p>
<p>So, say I have a list like this:</p>
<pre class=""lang-py prettyprint-override""><code>x = [1, 1, 1, 1, 25, 1, 1]
</code></pre>
<p>And I want a function that would take the running sum, but ignore values greater than 10, to give me an output like this:</p>
<pre class=""lang-py prettyprint-override""><code>y = [1, 2, 3, 4, 4, 5, 6]
</code></pre>
<p>This code will do the trick:</p>
<pre class=""lang-py prettyprint-override""><code>t = 10
accumulate(x,lambda x,y:x if y&gt;=t else x+y)
</code></pre>
<p>But now I want to make a function which returns a function like the above, where I can pass it the value t as the parameter.
This is what I tried:</p>
<pre class=""lang-py prettyprint-override""><code>def sum_small_nums(t):
    def F(x):
        new_x = accumulate(x,lambda x,y: x if y&gt;=t else x+y)
    return F
</code></pre>
<p>Unfortunately this doesn't seem to work. I can create a function from the above, but when I try to call it, I don't get the output I am expecting (e.g. I get 'None' instead of a list):</p>
<pre class=""lang-py prettyprint-override""><code>sum_under_10 = sum_small_nums(10)
print(sum_under_10)
x = [1, 1, 1, 1, 25, 1, 1]
x2 = sum_under_10(x)
print(x2)
</code></pre>
<p>returns</p>
<pre><code>&lt;function sum_small_nums.&lt;locals&gt;.F at 0x7feab135a1f0&gt;
None
</code></pre>",python|itertools,"<p>You're close! Need to <code>return</code> the list from the inner function:</p>
<pre class=""lang-py prettyprint-override""><code>def sum_small_nums(t):
    def F(x):
        new_x = accumulate(x, lambda x, y: x if y &gt;= t else x + y)
        return list(new_x)
   return F
</code></pre>
<p>When you don't <code>return</code> anything from a function, <code>None</code> is implicitly returned.</p>",2
975,66888149,CoolProp script from Python to Julia,"<p>I try to repeat the examples shown, <a href=""http://coolprop.sourceforge.net/coolprop/python-cycles.html"" rel=""nofollow noreferrer"">Cycle Calculations</a></p>
<p>But I don't know how to translate the following line correctly,</p>
<p>I receive the following alert, in the developed script</p>
<pre><code>using PyCall
Julia&gt;pyimport(&quot;sys&quot;).executable

Julia&gt;@pyimport CoolProp.CoolProp as CP

Julia&gt;@pyimport CoolProp.Plots as CPP #StateContainer

Julia&gt;T0 = 300.000; p0 = 200000.000; h0 = 112745.749; s0 = 393.035;

Julia&gt;cycle_states = CPP.StateContainer()
15:36:55-&gt;&gt;PyObject &lt;CoolProp.Plots.SimpleCycles.StateContainer object at 0x00000000427A9AF0&gt;

Julia&gt;cycle_states['H'] = h0
ERROR: MethodError: no method matching setindex!(::PyObject, ::Float64, ::Char)
Closest candidates are:
  setindex!(::PyObject, ::Any, ::Union{AbstractString, Symbol}) at C:\Users\hermesr\.julia\packages\PyCall\tqyST\src\PyCall.jl:346
  setindex!(::PyObject, ::Any, ::Integer) at deprecated.jl:70
  setindex!(::PyObject, ::Any, ::Integer, ::Integer) at deprecated.jl:70
  ...
Stacktrace:
 [1] top-level scope at REPL[191]:1
</code></pre>
<p>How to achieve the following command: print (cycle states).
I have tried</p>
<pre><code>@pycall(cycle_states)
ERROR: ArgumentError: Usage: @pycall func (args …) :: T;
get! (cycle_states)
ERROR: MethodError: no method matching get! (:: PyObject)
print(cycle states)
PyObject &lt;CoolProp.Plots.SimpleCycles.StateContainer object at 0x0000000007E70AF0&gt;
</code></pre>",python|julia,"<p>For builtin containers and some numpy containers or other well known types, PyCall can automatically convert them to a julia native object. However <code>cycle_states</code> is only a dict-like object in Python and is not well known so Julia and PyCall knows nothing about how to automatically handle an unknown dict-like object so it returns a <code>PyObject</code> object, which is merely a wrapper to the underlying PyObject* pointer. Fortunately PyCall provides you tools to call functions on these underlying objects and they are clearly written in the document. I'll introduce three ways to get and set value on dict-like objects.</p>
<h2>use get and set! functions</h2>
<p>PyCall provides a convenient way to call the underlying <code>__getitem__</code> and <code>__setitem__</code> methods, which is <code>get</code> and <code>set!</code>. So you can simply set and get values from StateContainer object.</p>
<pre><code>julia&gt; cycle_states = CPP.StateContainer()
ArgumentError: only Dict and Mapping objects can be converted to PyDict
julia&gt; set!(cycle_states,&quot;H&quot;,h0)
112745.749
julia&gt; get(cycle_states, &quot;H&quot;)
112745.749
</code></pre>
<h2>use PyCall string macros to use your object in Python environment</h2>
<p>The second way to do this is also intuitive, which is using the object in its native environment. PyCall provides string macros to do this. For example</p>
<pre><code>julia&gt; py&quot;&quot;&quot;
       $cycle_states[&quot;H&quot;] = $h0
       &quot;&quot;&quot;

julia&gt; py&quot;$cycle_states['H']&quot;
       112745.749
</code></pre>
<p>You can see there are two types of string macro, the multi-line one can run arbitrary python codes in it but it will return <code>nothing</code>, so we use it to assign values, the <code>py&quot;&quot;</code> evaluates the expression in Python's <code>eval</code> function so it cannot assign value, but it will return value to Julia environment, so we use it to get values. Also notice the dollar sign, since <code>cycle_states</code> and <code>h0</code> are variables defined in Julia environment, we have to add the dollar sign to pass the value to Python.</p>
<h2>directly call the <code>__getitem__</code>, <code>__setitem__</code> method</h2>
<p>PyCall allows you to directly call methods of an object (or any functions in Python) by using <code>pycall</code> function, <code>@pycall</code> macro or directly use function call syntax.</p>
<pre><code>julia&gt; pycall(cycle_states.__setitem__,PyAny,&quot;H&quot;,h0)

julia&gt; pycall(cycle_states.__getitem__,PyAny,&quot;H&quot;)
       112745.749
</code></pre>
<p>Here <code>PyAny</code> type means we let PyCall to infer the return type. This will bring some performance overhead since PyCall has to determine the type at runtime and Julia's compiler cannot generate optimized code. However if you are using Python to do some heavy work I would say the overhead is negligible.</p>
<p>The <code>@pycall</code> macro is a convenient way to call <code>pycall</code> function. It will automatically convert to a call to <code>pycall</code>. In this example I'll specify a return type.</p>
<pre><code>julia&gt; @pycall cycle_states.__setitem__(&quot;H&quot;,h0)::PyObject
       PyObject None
julia&gt; @pycall cycle_states.__getitem__(&quot;H&quot;)::Int32
       112745
</code></pre>
<p>You can see that the fractional part has disappeared since <code>Int32</code> is specified.</p>
<p>If you don't want to specify PyAny every time, you can directly call it and PyCall will assume the PyObject is callable.</p>
<pre><code>julia&gt; cycle_states.__setitem__(&quot;H&quot;,h0)

julia&gt; cycle_states.__getitem__(&quot;H&quot;)
       112745.749
</code></pre>
<p>However if you need to specify return type you must use <code>pycall</code> or <code>@pycall</code>.</p>
<p>For more information about PyCall, refer to the document <a href=""https://github.com/JuliaPy/PyCall.jl"" rel=""nofollow noreferrer"">https://github.com/JuliaPy/PyCall.jl</a></p>",1
976,67162666,Pandas string series into several Boolean columns,"<p>I have a DF, with 2 columns, id and symptoms (int, string)
it looks like this:</p>
<pre><code>id      symptoms
1       symptom1;symptom2 
2       symptom2;symptom3 
3       symptom1;symptom3;symptom4
</code></pre>
<p>I want it to change the columns to id, symptom1, symptom2, symptom3, symptom4,...
and the values in the new columns will be true/false depending on the original column.
so the first row will be: [id1, true, true, false, false,...]</p>
<p>I found this question which is close:
<a href=""https://stackoverflow.com/questions/55147641/changing-a-string-column-into-several-boolean-columns-using-pandas"">Changing a string column into several boolean columns using pandas</a></p>
<p>but in my case I might have several symptoms and I couldn't get it to work.</p>
<p>any advice on how to get to this?</p>",python|pandas|type-conversion,"<p>Try with <code>get_dummies</code></p>
<pre><code>out = df.join(df.pop('symptoms').str.get_dummies(';').astype(bool))
</code></pre>",1
977,67254748,"Find the duplicate in my list, and use it later in the code","<p>Hi i am trying to write a code that checks for duplicates in my list. i want to use this duplicate later in the program (its for a puzzle, the one there is two of is the right answer to the puzzle).
I want the &quot;duplicate&quot; to be stored in &quot;i&quot; - that way i can do something like
if i = RGB_orange - do this or that. just an example</p>
<p>I have tried alot of diffrent things. this is the closest i got. Any help is appreciated.<br />
BTW - the contents of that list is diffrent RGB values. coordiantes is another list, its where my program gets its RGB values.</p>
<pre><code>    for x in coordinates:
            rgbvalue = Tappair.getpixel(x)

#            rgblist = [(94, 197, 189), ## just an example
#                   (127, 176, 254),
#                   (233, 131, 78),
#                   (239, 106, 253),
#                   (233, 131, 78),
#                   (225, 81, 99),
#                   (126, 230, 129),
#                   (139, 33, 200)]

            rgblist = []


            rgblist.append(rgbvalue)
            print(rgblist)
            for i in rgblist:
                if rgblist.count(i) == 2:
                    print(i)
                    print(&quot;Counted&quot;)
                    print(rgblist)
                    break
</code></pre>
<p>EDIT: this works:</p>
<pre><code>def tap_the_pair():
if pyautogui.locateCenterOnScreen('TapPair.png', confidence=0.9, region=(689, 250, 640, 1000)) != None:
    Tappair = pyautogui.screenshot(region=(734, 429, 540, 540))
    Tappair.save(r&quot;C:\Users\Andreas\Desktop\pythonProject\WholeTapPair.png&quot;)
    print(&quot;tap pair game found&quot;)

    rgblist = []

   # rgblist.append(rgbvalue)

    rgb_dict = {}

    for x in coordinates:
        rgbvalue = Tappair.getpixel(x)
        if rgbvalue in rgb_dict:
            print(rgbvalue)
            return rgbvalue
        else:
            rgb_dict[rgbvalue] = True
</code></pre>",python|pyautogui,"<p>The solution provided in the question also works, but it has a time complexity of O(n^2). A better approach with better time complexity can be to use dictionaries:</p>
<pre><code>rgb_dict = {}

for rgb in rgblist:
    if rgb in rgb_dict:
        print(rgb)
        break
    else:
        rgb_dict[rgb] = True
</code></pre>
<p>After the loop ends, <code>rgb</code> will contain the duplicate. This solution has a time complexity of O(n).</p>
<p>Edit: try this code specific to your example. It can be done using a single for loop</p>
<pre><code>rgb_dict = {}

for x in coordinates:
    rgbvalue = Tappair.getpixel(x)
    if rgbvalue in rgb_dict:
        print(rgbvalue)
        return rgbvalue
    else:
         rgb_dict[rgbvalue] = True
</code></pre>",1
978,67254748,"Find the duplicate in my list, and use it later in the code","<p>Hi i am trying to write a code that checks for duplicates in my list. i want to use this duplicate later in the program (its for a puzzle, the one there is two of is the right answer to the puzzle).
I want the &quot;duplicate&quot; to be stored in &quot;i&quot; - that way i can do something like
if i = RGB_orange - do this or that. just an example</p>
<p>I have tried alot of diffrent things. this is the closest i got. Any help is appreciated.<br />
BTW - the contents of that list is diffrent RGB values. coordiantes is another list, its where my program gets its RGB values.</p>
<pre><code>    for x in coordinates:
            rgbvalue = Tappair.getpixel(x)

#            rgblist = [(94, 197, 189), ## just an example
#                   (127, 176, 254),
#                   (233, 131, 78),
#                   (239, 106, 253),
#                   (233, 131, 78),
#                   (225, 81, 99),
#                   (126, 230, 129),
#                   (139, 33, 200)]

            rgblist = []


            rgblist.append(rgbvalue)
            print(rgblist)
            for i in rgblist:
                if rgblist.count(i) == 2:
                    print(i)
                    print(&quot;Counted&quot;)
                    print(rgblist)
                    break
</code></pre>
<p>EDIT: this works:</p>
<pre><code>def tap_the_pair():
if pyautogui.locateCenterOnScreen('TapPair.png', confidence=0.9, region=(689, 250, 640, 1000)) != None:
    Tappair = pyautogui.screenshot(region=(734, 429, 540, 540))
    Tappair.save(r&quot;C:\Users\Andreas\Desktop\pythonProject\WholeTapPair.png&quot;)
    print(&quot;tap pair game found&quot;)

    rgblist = []

   # rgblist.append(rgbvalue)

    rgb_dict = {}

    for x in coordinates:
        rgbvalue = Tappair.getpixel(x)
        if rgbvalue in rgb_dict:
            print(rgbvalue)
            return rgbvalue
        else:
            rgb_dict[rgbvalue] = True
</code></pre>",python|pyautogui,"<p>You can find the duplicates in your list with:</p>
<pre><code>import collections

rgblist = [(94, 197, 189), (127, 176, 254), (233, 131, 78), (239, 106, 253), (233, 131, 78), (225, 81, 99), (126, 230, 129), (139, 33, 200)]

duplicates = [item for item, count in collections.Counter(rgblist).items() if count &gt; 1]

print(duplicates)

for i in duplicates:
    # Do something with each duplicate
</code></pre>
<p>Output:</p>
<pre><code>[(233, 131, 78)]     
</code></pre>",1
979,67175980,How to Construct a spherical nanoparticles from the large bulk structure using python3,"<p>Problem definition: I wanted to construct spherical nanoparticles of maghemite nanoparticles(gamma Fe2O3) with a radius of 40 angstrom (4nm). I have the lammps data file of large bulk system (replicate :10 10 10, 160000 atoms). I am a beginner in python but I have managed to write a code in python I tried deleting the x,y,z coordinates from the center of all three axis which is not within the radius distance but it is not working, only after looking at the output in VMD i understood i am doing things wrongly but i don't know how to cut a sphere out of a cube please some one help me in this. following is my python code.Thanks in advance.</p>
<pre><code>import pandas as pd
import numpy as np
df = pd.read_csv(&quot;data.supercell443.txt&quot;,sep='\t',header=None)

optdf = pd.DataFrame([])

IL = 1

xmid = df[4].max()/2
ymid = df[5].max()/2
zmid = df[6].max()/2
xallowed_less = xmid+40
xallowed_more = xmid-40
yallowed_less = ymid+40
yallowed_more = ymid-40
zallowed_more = zmid-40
zallowed_less = zmid+40
for i,j,k,l,x,y,z in df.values:
  if abs(xmid-x) = 40:
    tdf = pd.DataFrame([IL,j,k,l,x,y,z])
    optdf = optdf.append(tdf.T)
  IL+=1
</code></pre>
<p><a href=""https://i.stack.imgur.com/0sH4k.png"" rel=""nofollow noreferrer"">Input image from data file using VMD software</a>
<a href=""https://i.stack.imgur.com/BAg5D.png"" rel=""nofollow noreferrer"">Output image of code</a></p>",python|lammps,"<p>Is it necessary to do this in Python? This is easily done in LAMMPS itself using the 'group' command or using existing tools such as <a href=""https://atomsk.univ-lille.fr/tutorial_Si_sphere.php"" rel=""nofollow noreferrer"">Atomsk</a>.</p>",-1
980,67174152,How to enter into the folder given as a command line argument in python,"<p>I want to open the folder that is given as a command-line argument in a python file-like <strong>test.py folder1</strong> and then print all file names in that folder. Also, test.py and folder1 is not in the same directory.</p>
<p>I am stuck in part where I need to enter into the folder that is passed as an arg.</p>
<pre><code>import os

filename = sys.srgv[1]
os.chdir(&quot;/home/all_folder&quot;)
folder= os.listdir()
if filename in folder:
   ...
</code></pre>",python|subprocess|file-handling,"<p>You can provide the folder as an argument to os.listdir, then you do not have to use os.chdir to change the curent directory. Below is an example program which takes the folder as the first command line argument, and prints the files in that folder:</p>
<pre><code>import os
import sys

folder = sys.argv[1]

folder_content = os.listdir(folder)
for filename in folder_content:
    print(filename)
</code></pre>
<p>Example usage: <code>python test.py /home/my_username/somefolder</code></p>",0
981,67174152,How to enter into the folder given as a command line argument in python,"<p>I want to open the folder that is given as a command-line argument in a python file-like <strong>test.py folder1</strong> and then print all file names in that folder. Also, test.py and folder1 is not in the same directory.</p>
<p>I am stuck in part where I need to enter into the folder that is passed as an arg.</p>
<pre><code>import os

filename = sys.srgv[1]
os.chdir(&quot;/home/all_folder&quot;)
folder= os.listdir()
if filename in folder:
   ...
</code></pre>",python|subprocess|file-handling,"<p>Try using the full path</p>
<pre class=""lang-py prettyprint-override""><code>from os import listdir
from os.path import isfile, join

mypath = &quot;C:/Users/fullpath&quot;

onlyfiles = [f for f in listdir(mypath) if isfile(join(mypath, f))]

print(onlyfiles)
</code></pre>",0
982,67297993,ModuleNotFoundError: No module named 'urlib3',"<p>Im New to Python, trying to code a  <strong>webscraper</strong>. Launching my  script got an error.
Please can you help</p>
<pre><code>julien@julien-Lenovo-IdeaPad-S340-15IWL:~/Bureau$ python3 Paris.py 
</code></pre>
<p>Error:</p>
<blockquote>
<p>ModuleNotFoundError: No module named 'urlib3'</p>
<p>julien@julien-Lenovo-IdeaPad-S340-15IWL:~/Bureau$ python3 -m pip list</p>
<p>setproctitle (1.1.10)
urllib3 (1.26.4)
vboxapi (1.0)
virtualenv (15.1.0)</p>
<p>#!/usr/bin/env python3</p>
</blockquote>
<p>Code:</p>
<pre><code># import libraries
from bs4 import BeautifulSoup
import csv
import urlib3
# fetch the friend-list from LiveJournal
urllib.urlopen(&quot;http://www.google.com/&quot;)
</code></pre>",python|pip|python-3.6,"<p>It is <code>urllib3</code>, you are importing <code>urlib3</code>.</p>
<p>Use <code>import urllib3</code>.</p>",2
983,67451306,Time.sleep() not pausing the correct moment?,"<p>Hello I have created a quiz using python and tkinter. After each option is pressed I wanted the correct answer to turn green and the three incorrect to turn red then revert to the default for the next question.The problem here being that running the code will take the buttons to the default before the user can see the colours. To do this I tried to use time.sleep() in the function however no matter where I use it it just seems to pause on the button being pressed down and then goes onto the next question without seeing any colour change.</p>
<p>Here is the relevant piece of code</p>
<pre><code>def entry(num):
   global score
   global x
   global count
   count +=1

   if Qa[x] == 1:
       option1.config(bg = &quot;green&quot;)
       option2.config(bg = &quot;red&quot;)
       option3.config(bg=&quot;red&quot;)
       option4.config(bg=&quot;red&quot;)
   elif Qa[x] == 2:
       option1.config(bg=&quot;red&quot;)
       option2.config(bg=&quot;green&quot;)
       option3.config(bg=&quot;red&quot;)
       option4.config(bg=&quot;red&quot;)

   elif Qa[x] == 3:
       option1.config(bg=&quot;red&quot;)
       option2.config(bg=&quot;red&quot;)
       option3.config(bg=&quot;green&quot;)
       option4.config(bg=&quot;red&quot;)
   elif Qa[x] == 4:
       option1.config(bg=&quot;red&quot;)
       option2.config(bg=&quot;red&quot;)
       option3.config(bg=&quot;red&quot;)
       option4.config(bg=&quot;green&quot;)
   if num == Qa[x]:
       score += 1
   x +=1
   if count &lt;10:
       my_label.config(text = Qs[x])
       option1.config(text = (question_prompts[x])[1],bg = &quot;SystemButtonFace&quot;,command = lambda: entry(1) )
       option2.config(text=(question_prompts[x])[2],bg = &quot;SystemButtonFace&quot;,command = lambda: entry(2) )
       option3.config(text=(question_prompts[x])[3],bg = &quot;SystemButtonFace&quot;,command = lambda: entry(3) )
       option4.config(text=(question_prompts[x])[4],bg = &quot;SystemButtonFace&quot;,command = lambda: entry(4) )
   else:
       End_score =Label(text = &quot;Well done you scored&quot; +&quot; &quot;+ str(score)+&quot; &quot; +&quot;out of 11&quot;, font = 40)
       End_score.place(relx=0.5,rely =0.5,anchor = CENTER)
   print(x,score, count, Qa[x])

</code></pre>
<p>I haven't put the time.sleep() in here because I have tried it everywhere in this section an it gives the same result
I would really appreciate some help</p>",python|tkinter,"<p>The PROBLEM here is that the options will not actually change color until Tk can get back to its main loop.  As long as you are running your function, the main loop cannot pull new events.  You need to set the colors, then use <code>root.after</code> to schedule a callback at some point in the future where you reset to all green.</p>",1
984,67453610,Use of dictionaries with lists in Python,"<p>How can I look for similar keys in a Python dictionary and that its values are saved in a single key by using a list? That is, for example, the user enters a name and two different phone numbers; I'd like to store those two telephone numbers in the same key.</p>
<pre><code>agenda = {}

for i in range(3):
    nombre = input(&quot;Ingrese el nombre de usuario: &quot;)
    numero = int(input(&quot;Ingrese el numero de telefono del usuario: &quot;))
    agenda[nombre] = numero

for key in agenda.keys():
    if key in agenda.keys():
        lista = []
        agenda[key] = lista.append(numero)
print(agenda)
</code></pre>
<p>I tried it this way but if there is any repeated name the dictionary only takes into account once beforehand. Thank you very much.</p>",python-3.x,"<p>I think you mean this</p>
<pre><code>agenda = {}
for i in range(3):
    nombre = input(&quot;Ingrese el nombre de usuario: &quot;)
    numero = int(input(&quot;Ingrese el numero de telefono del usuario: &quot;))
    if nombre not in agenda:
        agenda[nombre] = []
        
    agenda[nombre].append(numero)
</code></pre>
<p>Example run:</p>
<pre><code>&gt;&gt;&gt; Ingrese el nombre de usuario: Pablo
&gt;&gt;&gt; Ingrese el numero de telefono del usuario: 123
&gt;&gt;&gt; Ingrese el nombre de usuario: Pablo
&gt;&gt;&gt; Ingrese el numero de telefono del usuario: 456
&gt;&gt;&gt; Ingrese el nombre de usuario: Camilo
&gt;&gt;&gt; Ingrese el numero de telefono del usuario: 321
</code></pre>
<p>Now, if you print <code>agenda</code>, you get</p>
<pre><code>&gt;&gt;&gt; agenda
    {'Pablo': [123, 456], 'Camilo': [321]}
</code></pre>",0
985,67453610,Use of dictionaries with lists in Python,"<p>How can I look for similar keys in a Python dictionary and that its values are saved in a single key by using a list? That is, for example, the user enters a name and two different phone numbers; I'd like to store those two telephone numbers in the same key.</p>
<pre><code>agenda = {}

for i in range(3):
    nombre = input(&quot;Ingrese el nombre de usuario: &quot;)
    numero = int(input(&quot;Ingrese el numero de telefono del usuario: &quot;))
    agenda[nombre] = numero

for key in agenda.keys():
    if key in agenda.keys():
        lista = []
        agenda[key] = lista.append(numero)
print(agenda)
</code></pre>
<p>I tried it this way but if there is any repeated name the dictionary only takes into account once beforehand. Thank you very much.</p>",python-3.x,"<p>As a complement to @Camilo's answer, you could make use of the defaultdict module (<a href=""https://docs.python.org/3/library/collections.html#collections.defaultdict"" rel=""nofollow noreferrer"">https://docs.python.org/3/library/collections.html#collections.defaultdict</a>) to create a list by default. Additionally, you could check for repeated phone numbers.</p>
<pre><code>from collections import defaultdict

agenda = defaultdict(list)
for i in range(3):
    nombre = input(&quot;Ingrese el nombre de usuario: &quot;)
    numero = int(input(&quot;Ingrese el numero de telefono del usuario: &quot;))
    if numero not in agenda[nombre]:
        agenda[nombre].append(numero)
</code></pre>",0
986,67474664,How to inverse cumulative sum in Pandas,"<p>I have a rather simple problem to which I cannot seem to find any solution. I have looked at many similar questions online but their solutions don't work in my case.</p>
<p>I have a pandas dataset in the following format</p>
<pre><code>        CountryCode  ConfirmedCases  ConfirmedDeaths        date
   335         ABW          4872.0             45.0  2020-12-01
   336         ABW          4902.0             45.0  2020-12-02
   337         ABW          4923.0             45.0  2020-12-03
   338         ABW          4942.0             45.0  2020-12-04
   339         ABW          4957.0             45.0  2020-12-05
</code></pre>
<p><strong>ConfirmedCases and ConfirmedDeaths are both measured as cumulative sums by CountryCode, but I need the daily cases and daily deaths by CountryCode</strong>. This requires that I compute the difference between confirmed cases at time <em>t</em> and time <em>t-1</em> for every country in my dataset--i.e. the difference between the number of cases today and the day before in the same country. Ideally, I would like a solution that allows me to register the daily number of cases and daily number of deaths by country as two new variables in the dataset. As a result, I would like something that should look like the following:</p>
<pre><code>        CountryCode  ConfirmedCases  ConfirmedDeaths        date    DailyCases    Daily Deaths
   335         ABW          4872.0             45.0  2020-12-01     15            0
   336         ABW          4902.0             45.0  2020-12-02     30            0
   337         ABW          4923.0             45.0  2020-12-03     21            0
   338         ABW          4942.0             45.0  2020-12-04     19            0
   339         ABW          4957.0             45.0  2020-12-05     15            0
</code></pre>
<p>Thanks in advance for your help!</p>",python|python-3.x|pandas|sum,"<p>Quang Hoang's solution is right except you should then replace <code>NaN</code> values with the initial value for each country:</p>
<pre><code>df['DailyCases'] = df.groupby('CountryCode')['ConfirmedCases'].diff()
df['DailyCases'] = df['DailyCases'].fillna(df['ConfirmedCases'])
</code></pre>",1
987,67348042,Inserting a row into a Pandas Dataframe in a certain column (without a name),"<p>I have the following dataframe:</p>
<pre><code>            value1 value2 value3
2021-04-26  22       22    22   
2021-04-27  21       26    26 
2021-04-28  27       29    27 
</code></pre>
<p>However, after inserting a new row like:</p>
<pre><code>row: {'value1': 40, 'value2': 40, 'value3': 40}
df.append(row, ignore_index=True)
</code></pre>
<p>The date column (even though it doesn't have a label) gets transformed into:</p>
<pre><code>   value1 value2 value3
0  22       22    22   
1  21       26    26 
2  27       29    27 
3  40       40    40
</code></pre>
<p>Instead of: (desired output)</p>
<pre><code>            value1 value2 value3
2021-04-26  22       22    22   
2021-04-27  21       26    26 
2021-04-28  27       29    27 
NaN         40       40    40
</code></pre>
<p>How can I add a new row with a certain date but without changing the whole dataframe, so I would get my desired output? Any help would be appreciated, thanks!</p>",python|pandas|dataframe,"<p>In general, it is a good practice to maintain the index to be non-null. Your input:</p>
<pre><code>df = pd.DataFrame([
    {'value1': 22, 'value2': 22, 'value3': 22},
    {'value1': 21, 'value2': 26, 'value3': 26},
    {'value1': 27, 'value2': 29, 'value3': 27}], 
    index=['2021-04-26', '2021-04-27', '2021-04-28'])

df.reset_index(inplace=True)
row = {'value1': 40, 'value2': 40, 'value3': 40}
df = df.append(pd.DataFrame([row]))
</code></pre>
<p>So that the output is:</p>
<pre><code>    index       value1  value2  value3
0   2021-04-26  22      22      22
1   2021-04-27  21      26      26
2   2021-04-28  27      29      27
0   NaN         40      40      40
</code></pre>
<p>After that if you prefer, you could rename the new column as 'date', and reset row index</p>
<pre><code>df.rename(columns={'index': 'date'}, inplace=True)
df.reset_index(drop=True, inplace=True)
</code></pre>
<p>Output</p>
<pre><code>    date        value1  value2  value3
0   2021-04-26  22      22      22
1   2021-04-27  21      26      26
2   2021-04-28  27      29      27
3   NaN         40      40      40
</code></pre>",0
988,67348042,Inserting a row into a Pandas Dataframe in a certain column (without a name),"<p>I have the following dataframe:</p>
<pre><code>            value1 value2 value3
2021-04-26  22       22    22   
2021-04-27  21       26    26 
2021-04-28  27       29    27 
</code></pre>
<p>However, after inserting a new row like:</p>
<pre><code>row: {'value1': 40, 'value2': 40, 'value3': 40}
df.append(row, ignore_index=True)
</code></pre>
<p>The date column (even though it doesn't have a label) gets transformed into:</p>
<pre><code>   value1 value2 value3
0  22       22    22   
1  21       26    26 
2  27       29    27 
3  40       40    40
</code></pre>
<p>Instead of: (desired output)</p>
<pre><code>            value1 value2 value3
2021-04-26  22       22    22   
2021-04-27  21       26    26 
2021-04-28  27       29    27 
NaN         40       40    40
</code></pre>
<p>How can I add a new row with a certain date but without changing the whole dataframe, so I would get my desired output? Any help would be appreciated, thanks!</p>",python|pandas|dataframe,"<p>The date is an index. Reset index before appending:</p>
<pre><code>df.reset_index()
</code></pre>",1
989,67348042,Inserting a row into a Pandas Dataframe in a certain column (without a name),"<p>I have the following dataframe:</p>
<pre><code>            value1 value2 value3
2021-04-26  22       22    22   
2021-04-27  21       26    26 
2021-04-28  27       29    27 
</code></pre>
<p>However, after inserting a new row like:</p>
<pre><code>row: {'value1': 40, 'value2': 40, 'value3': 40}
df.append(row, ignore_index=True)
</code></pre>
<p>The date column (even though it doesn't have a label) gets transformed into:</p>
<pre><code>   value1 value2 value3
0  22       22    22   
1  21       26    26 
2  27       29    27 
3  40       40    40
</code></pre>
<p>Instead of: (desired output)</p>
<pre><code>            value1 value2 value3
2021-04-26  22       22    22   
2021-04-27  21       26    26 
2021-04-28  27       29    27 
NaN         40       40    40
</code></pre>
<p>How can I add a new row with a certain date but without changing the whole dataframe, so I would get my desired output? Any help would be appreciated, thanks!</p>",python|pandas|dataframe,"<p>You can append it as a DataFrame with <code>np.nan</code> as its index:</p>
<pre><code>row = {'value1': 40, 'value2': 40, 'value3': 40}
df.append(pd.DataFrame([row], index=[np.nan]))
</code></pre>
<p>Output:</p>
<pre><code>            value1  value2  value3
2021-04-26      22      22      22
2021-04-27      21      26      26
2021-04-28      27      29      27
NaN             40      40      40
</code></pre>",4
990,67304697,How to undo the rotation of an image?,"<p>Here is an example of an image. The object in the image seems to be rotated. How do I undo the rotation of it?</p>
<p><a href=""https://i.stack.imgur.com/90gAX.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/90gAX.png"" alt=""enter image description here"" /></a></p>",python|opencv|computer-vision,"<p>In the image library from <code>PIL</code> there is a <code>rotate</code> method. Here goes an example of function that could help you</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>from PIL import Image

def rotar(a,t): #a es el nombre de la imagen, t son los grados en deg
    colorImage  = Image.open(a)
    rotated     = colorImage.rotate(t, expand=True)
    rotated.save('rotated.png')</code></pre>
</div>
</div>
</p>",0
991,67304697,How to undo the rotation of an image?,"<p>Here is an example of an image. The object in the image seems to be rotated. How do I undo the rotation of it?</p>
<p><a href=""https://i.stack.imgur.com/90gAX.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/90gAX.png"" alt=""enter image description here"" /></a></p>",python|opencv|computer-vision,"<p>You can get the contours in the image than convert them to a rotate rect using opencv. the rotate rect will provide you the angle. all you need to do than is to rotate the image using that angle. The code is attached below</p>
<pre><code>import cv2
import numpy as np
img = cv2.imread(&quot;opencv_task.png&quot;,0)
con , _ = cv2.findContours(img,cv2.RETR_EXTERNAL,cv2.CHAIN_APPROX_SIMPLE)
minRect = cv2.minAreaRect(con[0])

## uncomment these if you want to draw a rectangle
# box = cv2.boxPoints(minRect)
# box = np.intp(box) #np.intp: Integer used for indexing (same as C ssize_t; normally either int32 or int64)
# cv2.drawContours(img, [box], 0, (255,255,0))

(h, w) = img.shape[:2]
(cX, cY) = (w // 2, h // 2)

#minRect[2] is the angle of the rotate rectangle
# rotate our image by minRect[2] degrees around the center of the image

M = cv2.getRotationMatrix2D((cX, cY), minRect[2], 1.0)
rotated = cv2.warpAffine(img, M, (w, h))
cv2.imshow(&quot;Rotated&quot;, rotated)
cv2.waitKey(0)
cv2.destroyAllWindows()
</code></pre>
<p>the output sample is attached here
<a href=""https://i.stack.imgur.com/H3eFl.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/H3eFl.png"" alt=""enter image description here"" /></a></p>",5
992,67369455,Extracting specific text from txt file in python,"<p>I've recently picked up python to do some text extracting.
I have a data set that looks like this:</p>
<pre><code>    @article{noauthor_collective_nodate,
    title = {Collective teacher efficacy},
    abstract = {Overview Influence: Collective teacher efficacy Domain: Teacher Sub-Domain: Teacher attributes Potential to Accelerate Student Achievement: Potential to considerably accelerate Influence Definition: The shared belief by a group of teachers in a particular educational environment that they have the skills to positively impact student outcomes. Evidence Number of meta-analyses: 2 Number of studies: 61 Number of students: 3,489 Number of effects: 61 Effect size: 1.39},
@article{noauthor_collective_nodate,
    title = {Collective teacher efficacy},
    abstract = {Overview Influence: Collective teacher efficacy Domain: Teacher Sub-Domain: Teacher attributes Potential to Accelerate Student Achievement: Potential to considerably accelerate Influence Definition: The shared belief by a group of teachers in a particular educational environment that they have the skills to positively impact student outcomes. Evidence Number of meta-analyses: 2 Number of studies: 61 Number of students: 3,489 Number of effects: 61 Effect size: 1.39},
}

@article{noauthor_initial_nodate,
    title = {Initial teacher education programs},
    abstract = {Overview Influence: Initial teacher education programs Domain: Teacher Sub-Domain: Teacher Education Potential to Accelerate Student Achievement: Likely to have small positive impact Influence Definition: Initial teacher education or {ITEs} (sometimes at the undergraduate level and sometimes at the post-graduate level) is the entry-level qualification for teaching in numerous countries, including the United States. More recently, there are school-based {ITEs}, non-accredited {ITEs}, and many online {ITE} programs. Evidence Number of meta-analyses: 5 Number of studies: 117 Number of students: 106,016 Number of effects: 509 Effect size: 0.10},
}

@article{noauthor_professional_nodate,
    title = {Professional development programs},
    abstract = {Overview Influence: Professional development programs Domain: Teacher Sub-Domain: Teacher Education Potential to Accelerate Student Achievement: Likely to have positive impact Influence Definition: Professional development relates to courses or interventions aimed to enhance the beliefs, actions, impact of knowledge of teachers and school leaders. Evidence Number of meta-analyses: 21 Number of studies: 1,151 Number of students: 2,321,242 Number of effects: 2,938 Effect size: 0.37},
    keywords = {Program Development},
}
</code></pre>
<p>And I want to extract the title and part of the abstract from this text.
I managed to extract my desired output by using this code:</p>
<pre><code>s = &quot;@article{noauthor_collective_nodate, title = {Collective teacher efficacy}, abstract = {Overview Influence: Collective teacher efficacy Domain: Teacher Sub-Domain: Teacher attributes Potential to Accelerate Student Achievement: Potential to considerably accelerate Influence Definition: The shared belief by a group of teachers in a particular educational environment that they have the skills to positively impact student outcomes. Evidence Number of meta-analyses: 2 Number of studies: 61 Number of students: 3,489 Number of effects: 61 Effect size: 1.39},}@article{noauthor_collective_nodate, title = {Collective teacher efficacy}, abstract = {Overview Influence: Collective teacher efficacy Domain: Teacher Sub-Domain: Teacher attributes Potential to Accelerate Student Achievement: Potential to considerably accelerate Influence Definition: The shared belief by a group of teachers in a particular educational environment that they have the skills to positively impact student outcomes. Evidence Number of meta-analyses: 2 Number of studies: 61 Number of students: 3,489 Number of effects: 61 Effect size: 1.39},}&quot;


start = s.find(&quot;title = {&quot;) + len(&quot;title = {&quot;)
end = s.find(&quot;}, abstract&quot;)

start2 = s.find(&quot;Influence Definition: &quot;) + len(&quot;Influence Definition: &quot;)
end2 = s.find(&quot;Evidence Number of meta-analyses:&quot;)

substring = s[start:end]
substring2 = s[start2:end2]
print(substring+' - '+substring2+&quot;;&quot;)
</code></pre>
<p>Output:</p>
<pre><code>Collective teacher efficacy - The shared belief by a group of teachers in a particular educational environment that they have the skills to positively impact student outcomes. ;
</code></pre>
<p>The problem is:</p>
<ul>
<li>That this only takes out the first search result</li>
<li>I want to be able to run it on the original text file instead of copy it in as &quot;s&quot;.</li>
</ul>
<p>Can someone please lend out a helping hand?</p>",python|text|extract,"<ol>
<li><a href=""https://docs.python.org/3.8/library/stdtypes.html?highlight=find#str.find"" rel=""nofollow noreferrer"">str.find</a> has a <code>start</code> parameter. You can use that to skip past your previous search result and only find the next occurrence.</li>
<li>You can use <a href=""https://docs.python.org/3.8/library/functions.html?highlight=open#open"" rel=""nofollow noreferrer"">open</a> to read the text from a file (pay attention to the example code in the documentation, i.e. use <code>with open(&quot;filename&quot;)...</code>)</li>
</ol>",0
993,67369455,Extracting specific text from txt file in python,"<p>I've recently picked up python to do some text extracting.
I have a data set that looks like this:</p>
<pre><code>    @article{noauthor_collective_nodate,
    title = {Collective teacher efficacy},
    abstract = {Overview Influence: Collective teacher efficacy Domain: Teacher Sub-Domain: Teacher attributes Potential to Accelerate Student Achievement: Potential to considerably accelerate Influence Definition: The shared belief by a group of teachers in a particular educational environment that they have the skills to positively impact student outcomes. Evidence Number of meta-analyses: 2 Number of studies: 61 Number of students: 3,489 Number of effects: 61 Effect size: 1.39},
@article{noauthor_collective_nodate,
    title = {Collective teacher efficacy},
    abstract = {Overview Influence: Collective teacher efficacy Domain: Teacher Sub-Domain: Teacher attributes Potential to Accelerate Student Achievement: Potential to considerably accelerate Influence Definition: The shared belief by a group of teachers in a particular educational environment that they have the skills to positively impact student outcomes. Evidence Number of meta-analyses: 2 Number of studies: 61 Number of students: 3,489 Number of effects: 61 Effect size: 1.39},
}

@article{noauthor_initial_nodate,
    title = {Initial teacher education programs},
    abstract = {Overview Influence: Initial teacher education programs Domain: Teacher Sub-Domain: Teacher Education Potential to Accelerate Student Achievement: Likely to have small positive impact Influence Definition: Initial teacher education or {ITEs} (sometimes at the undergraduate level and sometimes at the post-graduate level) is the entry-level qualification for teaching in numerous countries, including the United States. More recently, there are school-based {ITEs}, non-accredited {ITEs}, and many online {ITE} programs. Evidence Number of meta-analyses: 5 Number of studies: 117 Number of students: 106,016 Number of effects: 509 Effect size: 0.10},
}

@article{noauthor_professional_nodate,
    title = {Professional development programs},
    abstract = {Overview Influence: Professional development programs Domain: Teacher Sub-Domain: Teacher Education Potential to Accelerate Student Achievement: Likely to have positive impact Influence Definition: Professional development relates to courses or interventions aimed to enhance the beliefs, actions, impact of knowledge of teachers and school leaders. Evidence Number of meta-analyses: 21 Number of studies: 1,151 Number of students: 2,321,242 Number of effects: 2,938 Effect size: 0.37},
    keywords = {Program Development},
}
</code></pre>
<p>And I want to extract the title and part of the abstract from this text.
I managed to extract my desired output by using this code:</p>
<pre><code>s = &quot;@article{noauthor_collective_nodate, title = {Collective teacher efficacy}, abstract = {Overview Influence: Collective teacher efficacy Domain: Teacher Sub-Domain: Teacher attributes Potential to Accelerate Student Achievement: Potential to considerably accelerate Influence Definition: The shared belief by a group of teachers in a particular educational environment that they have the skills to positively impact student outcomes. Evidence Number of meta-analyses: 2 Number of studies: 61 Number of students: 3,489 Number of effects: 61 Effect size: 1.39},}@article{noauthor_collective_nodate, title = {Collective teacher efficacy}, abstract = {Overview Influence: Collective teacher efficacy Domain: Teacher Sub-Domain: Teacher attributes Potential to Accelerate Student Achievement: Potential to considerably accelerate Influence Definition: The shared belief by a group of teachers in a particular educational environment that they have the skills to positively impact student outcomes. Evidence Number of meta-analyses: 2 Number of studies: 61 Number of students: 3,489 Number of effects: 61 Effect size: 1.39},}&quot;


start = s.find(&quot;title = {&quot;) + len(&quot;title = {&quot;)
end = s.find(&quot;}, abstract&quot;)

start2 = s.find(&quot;Influence Definition: &quot;) + len(&quot;Influence Definition: &quot;)
end2 = s.find(&quot;Evidence Number of meta-analyses:&quot;)

substring = s[start:end]
substring2 = s[start2:end2]
print(substring+' - '+substring2+&quot;;&quot;)
</code></pre>
<p>Output:</p>
<pre><code>Collective teacher efficacy - The shared belief by a group of teachers in a particular educational environment that they have the skills to positively impact student outcomes. ;
</code></pre>
<p>The problem is:</p>
<ul>
<li>That this only takes out the first search result</li>
<li>I want to be able to run it on the original text file instead of copy it in as &quot;s&quot;.</li>
</ul>
<p>Can someone please lend out a helping hand?</p>",python|text|extract,"<p>This should do it:</p>
<pre><code>with open(&quot;myfile.txt&quot;, &quot;r&quot;) as f:
    s = f.readlines()
    for x in s:
        if x.__contains__(&quot;title&quot;):
            start = x.find(&quot;title = {&quot;) + len(&quot;title = {&quot;)
            end = x.find(&quot;}&quot;)
            substring = x[start:end] + &quot; - &quot;
        if x.__contains__(&quot;Influence Definition&quot;):
            start = x.find(&quot;Influence Definition: &quot;) + len(&quot;Influence Definition: &quot;)
            end = x.find(&quot;Evidence Number of meta-analyses:&quot;)
            substring += x[start:end]
            print(substring)
            print()
    f.close()
</code></pre>
<p>For example, if your file is called myfile.txt, this will print the following:</p>
<blockquote>
<p>Collective teacher efficacy - The shared belief by a group of teachers
in a particular educational environment that they have the skills to
positively impact student outcomes.</p>
<p>Collective teacher efficacy - The shared belief by a group of teachers
in a particular educational environment that they have the skills to
positively impact student outcomes.</p>
<p>Initial teacher education programs - Initial teacher education or
{ITEs} (sometimes at the undergraduate level and sometimes at the
post-graduate level) is the entry-level qualification for teaching in
numerous countries, including the United States. More recently, there
are school-based {ITEs}, non-accredited {ITEs}, and many online {ITE}
programs.</p>
<p>Professional development programs - Professional development relates
to courses or interventions aimed to enhance the beliefs, actions,
impact of knowledge of teachers and school leaders.</p>
</blockquote>",1
994,67202920,How to convert the first character of a name to uppercase in pandas dataframe python?,"<p>Ideally, my data frame looks like this:-</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>S.no</th>
<th>Names</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Nanda Govind Gajre</td>
</tr>
<tr>
<td>2</td>
<td>deepmala mohan shinde</td>
</tr>
<tr>
<td>3</td>
<td>jyoti dakore</td>
</tr>
<tr>
<td>4</td>
<td>Sonavane Ashanamdev</td>
</tr>
<tr>
<td>5</td>
<td>VIMAL BHIKAJI RATHOD</td>
</tr>
<tr>
<td>6</td>
<td>ARCHAN DATTARAO KADAM</td>
</tr>
</tbody>
</table>
</div>
<p>&quot;Names&quot; column is a combination of First name, Middle name, and Last name</p>
<p><strong>Here, I want the first letter of each word to be in uppercase and the rest in lowercase.</strong></p>
<p>My output</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>S.no</th>
<th>Names</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Nanda Govind Gajre</td>
</tr>
<tr>
<td>2</td>
<td>Deepmala Mohan Shinde</td>
</tr>
<tr>
<td>3</td>
<td>Jyoti Dakore</td>
</tr>
<tr>
<td>4</td>
<td>Sonavane Ashanamdev</td>
</tr>
<tr>
<td>5</td>
<td>Vimal Bhikaji Rathod</td>
</tr>
<tr>
<td>6</td>
<td>Archan Dattarao Kadam</td>
</tr>
</tbody>
</table>
</div>
<p>Example</p>
<pre><code>df = {&quot;Names&quot; : [&quot;Nanda Govind Gajre&quot;, &quot;deepmala mohan shinde&quot;,
    &quot;jyoti dakore&quot;, &quot;Sonavane Ashanamdev&quot;,
    &quot;VIMAL BHIKAJI RATHOD&quot;, &quot;ARCHAN DATTARAO KADAM&quot;,
    &quot;KANTA VITTHALRAO TOKALWAD&quot;]}
</code></pre>",python|pandas|dataframe|jupyter-notebook|uppercase,"<p>Apply <a href=""https://docs.python.org/3.8/library/stdtypes.html#str.title"" rel=""nofollow noreferrer""><code>str.title</code></a> on <code>&quot;Names&quot;</code> column:</p>
<pre><code>df[&quot;Names&quot;] = df[&quot;Names&quot;].apply(str.title)
print(df)
</code></pre>
<p>Prints:</p>
<pre class=""lang-none prettyprint-override""><code>   S.no                  Names
0     1     Nanda Govind Gajre
1     2  Deepmala Mohan Shinde
2     3           Jyoti Dakore
3     4    Sonavane Ashanamdev
4     5   Vimal Bhikaji Rathod
5     6  Archan Dattarao Kadam
</code></pre>
<hr />
<p>Or:</p>
<pre><code>df[&quot;Names&quot;] = df[&quot;Names&quot;].str.title()
</code></pre>",4
995,1194723,Forward declaration - no admin page in django?,"<p>This is probably a db design issue, but I couldn't figure out any better. Among several others, I have these models:</p>

<pre><code>class User(models.Model):
  name = models.CharField( max_length=40 )
  # some fields omitted
  bands = models.ManyToManyField( Band )
</code></pre>

<p>and</p>

<pre><code>class Band(models.Model):
  creator = models.ForeignKey( User )
  # some fields omitted
  name = models.CharField( max_length=40 )
</code></pre>

<p>So basically, I've got a user entity, which has many to many relation with a band entity. The twist is that I want a special user, who ""created"" the band on the site to have special editing capabilities. So I went forward, and added a ForeignKey called creator. The code could not run, because Band came after User in the source. So I forward declared <code>class Band(models.Model): pass</code>. Sadly, this does not seem to be exatly a good idea, because now Band is the only model that doesn't show up any interface elements in the django admin (Bands model is there, it just can't be edited).</p>

<p>My question is that what change should I make in the models to get this work properly? (if any)</p>",python|django|database-design|circular-dependency|forward-declaration,"<p>See: <a href=""http://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey"" rel=""noreferrer"">http://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey</a>, which says:</p>

<blockquote>
  <p>If you need to create a relationship on a model that has not 
  yet been defined, you can use the name of the model, rather 
  than the model object itself:</p>
</blockquote>

<pre><code> class Car(models.Model):
      manufacturer = models.ForeignKey('Manufacturer')
      # ...

 class Manufacturer(models.Model):
      # ...
</code></pre>",12
996,1125399,Question about paths in Python,"<p>let's say i have directory paths looking like this:</p>

<pre><code>this/is/the/basedir/path/a/include
this/is/the/basedir/path/b/include
this/is/the/basedir/path/a
this/is/the/basedir/path/b
</code></pre>

<p>In Python, how can i split these paths up so they will look like this instead:</p>

<pre><code>a/include
b/include
a
b
</code></pre>

<p>If i run os.path.split(path)[1] it will display:</p>

<pre><code>include
include
a
b
</code></pre>

<p>What should i be trying out here, should i be looking at some regex command or can this be done without it? Thanks in advance.</p>

<p>EDIT ALL: I solved it using regular expressions, damn handy tool :)</p>",python|operating-system,"<p>While the criterion is not 100% clear, it seems from the OP's comment that the key issue is specifically whether the path's last component ends in ""include"". If that is the case, and to avoid going wrong when the last component is e.g. ""dontinclude"" (as another answer does by trying string matching instead of path matching), I suggest:</p>

<pre><code>def lastpart(apath):
    pieces = os.path.split(apath)
    final = -1
    if pieces[-1] == 'include':
        final = -2
    return '/'.join(pieces[final:])
</code></pre>",0
997,1125399,Question about paths in Python,"<p>let's say i have directory paths looking like this:</p>

<pre><code>this/is/the/basedir/path/a/include
this/is/the/basedir/path/b/include
this/is/the/basedir/path/a
this/is/the/basedir/path/b
</code></pre>

<p>In Python, how can i split these paths up so they will look like this instead:</p>

<pre><code>a/include
b/include
a
b
</code></pre>

<p>If i run os.path.split(path)[1] it will display:</p>

<pre><code>include
include
a
b
</code></pre>

<p>What should i be trying out here, should i be looking at some regex command or can this be done without it? Thanks in advance.</p>

<p>EDIT ALL: I solved it using regular expressions, damn handy tool :)</p>",python|operating-system,"<p>Maybe something like this:</p>

<pre><code>result = []

prefix = os.path.commonprefix(list_of_paths)
for path in list_of_paths:
    result.append(os.path.relpath(path, prefix))
</code></pre>

<p>This works only in 2.6. The relapath in 2.5 and before does the work only in case the path is the current working directory.</p>",1
998,1125399,Question about paths in Python,"<p>let's say i have directory paths looking like this:</p>

<pre><code>this/is/the/basedir/path/a/include
this/is/the/basedir/path/b/include
this/is/the/basedir/path/a
this/is/the/basedir/path/b
</code></pre>

<p>In Python, how can i split these paths up so they will look like this instead:</p>

<pre><code>a/include
b/include
a
b
</code></pre>

<p>If i run os.path.split(path)[1] it will display:</p>

<pre><code>include
include
a
b
</code></pre>

<p>What should i be trying out here, should i be looking at some regex command or can this be done without it? Thanks in advance.</p>

<p>EDIT ALL: I solved it using regular expressions, damn handy tool :)</p>",python|operating-system,"<p>what about <a href=""http://docs.python.org/library/stdtypes.html?highlight=partition#str.partition"" rel=""nofollow noreferrer"">partition</a>?<br>
It Split the string at the first occurrence of sep, and return a 3-tuple containing the part before the separator, the separator itself, and the part after the separator. If the separator is not found, return a 3-tuple containing the string itself, followed by two empty strings.</p>

<pre><code>data = """"""this/is/the/basedir/path/a/include
this/is/the/basedir/path/b/include
this/is/the/basedir/path/a
this/is/the/basedir/path/b""""""
for line in data.splitlines():
    print line.partition(""this/is/the/basedir/path/"")[2]

#output
a/include
b/include
a
b
</code></pre>

<p>Updated for the new comment by author:<br>
It looks like u need rsplit for different directories by whether the  directory endswith ""include"" of not:</p>

<pre><code>import os.path
data = """"""this/is/the/basedir/path/a/include
this/is/the/basedir/path/b/include
this/is/the/basedir/path/a
this/is/the/basedir/path/b""""""
for line in data.splitlines():
    if line.endswith('include'):
        print '/'.join(line.rsplit(""/"",2)[-2:])
    else:
        print os.path.split(line)[1]
        #or just
        # print line.rsplit(""/"",1)[-1]
#output
a/include
b/include
a
b
</code></pre>",1
999,1125399,Question about paths in Python,"<p>let's say i have directory paths looking like this:</p>

<pre><code>this/is/the/basedir/path/a/include
this/is/the/basedir/path/b/include
this/is/the/basedir/path/a
this/is/the/basedir/path/b
</code></pre>

<p>In Python, how can i split these paths up so they will look like this instead:</p>

<pre><code>a/include
b/include
a
b
</code></pre>

<p>If i run os.path.split(path)[1] it will display:</p>

<pre><code>include
include
a
b
</code></pre>

<p>What should i be trying out here, should i be looking at some regex command or can this be done without it? Thanks in advance.</p>

<p>EDIT ALL: I solved it using regular expressions, damn handy tool :)</p>",python|operating-system,"<p>Perhaps something like this, depends on how hardcoded your prefix is:</p>

<pre><code>def removePrefix(path, prefix):
    plist = path.split(os.sep)
    pflist = prefix.split(os.sep)
    rest = plist[len(pflist):]
    return os.path.join(*rest)
</code></pre>

<p>Usage:</p>

<pre><code>print removePrefix(""this/is/the/basedir/path/b/include"", ""this/is/the/basedir/path"")
b/include
</code></pre>

<p>Assuming you're on a platform where the directory separator (<code>os.sep</code>) really is the forward slash).</p>

<p>This code tries to handle paths as something a little more high-level than mere strings. It's not optimal though, you could (or should) do more cleaning and canonicalization to be safer.</p>",3
